(function(F,gs){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=F.document?gs(F,!0):function(pi){if(!pi.document)throw new Error("jQuery requires a window with a document");return gs(pi)}:gs(F)})(typeof window<"u"?window:this,function(F,gs){"use strict";var pi=[],Ul=Object.getPrototypeOf,Ma=pi.slice,Kc=pi.flat?function(x){return pi.flat.call(x)}:function(x){return pi.concat.apply([],x)},Ko=pi.push,ro=pi.indexOf,oo={},Gl=oo.toString,lo=oo.hasOwnProperty,Xc=lo.toString,ir=Xc.call(Object),Di={},ei=function(D){return"function"==typeof D&&"number"!=typeof D.nodeType&&"function"!=typeof D.item},xr=function(D){return null!=D&&D===D.window},li=F.document,Tr={type:!0,src:!0,nonce:!0,noModule:!0};function nr(x,D,R){var V,Z,ee=(R=R||li).createElement("script");if(ee.text=x,D)for(V in Tr)(Z=D[V]||D.getAttribute&&D.getAttribute(V))&&ee.setAttribute(V,Z);R.head.appendChild(ee).parentNode.removeChild(ee)}function kr(x){return null==x?x+"":"object"==typeof x||"function"==typeof x?oo[Gl.call(x)]||"object":typeof x}var U=function(x,D){return new U.fn.init(x,D)};function Sr(x){var D=!!x&&"length"in x&&x.length,R=kr(x);return!ei(x)&&!xr(x)&&("array"===R||0===D||"number"==typeof D&&D>0&&D-1 in x)}U.fn=U.prototype={jquery:"3.6.4",constructor:U,length:0,toArray:function(){return Ma.call(this)},get:function(x){return null==x?Ma.call(this):x<0?this[x+this.length]:this[x]},pushStack:function(x){var D=U.merge(this.constructor(),x);return D.prevObject=this,D},each:function(x){return U.each(this,x)},map:function(x){return this.pushStack(U.map(this,function(D,R){return x.call(D,R,D)}))},slice:function(){return this.pushStack(Ma.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(U.grep(this,function(x,D){return(D+1)%2}))},odd:function(){return this.pushStack(U.grep(this,function(x,D){return D%2}))},eq:function(x){var D=this.length,R=+x+(x<0?D:0);return this.pushStack(R>=0&&R<D?[this[R]]:[])},end:function(){return this.prevObject||this.constructor()},push:Ko,sort:pi.sort,splice:pi.splice},U.extend=U.fn.extend=function(){var x,D,R,V,Z,ee,ae=arguments[0]||{},ye=1,ve=arguments.length,Me=!1;for("boolean"==typeof ae&&(Me=ae,ae=arguments[ye]||{},ye++),"object"!=typeof ae&&!ei(ae)&&(ae={}),ye===ve&&(ae=this,ye--);ye<ve;ye++)if(null!=(x=arguments[ye]))for(D in x)V=x[D],"__proto__"!==D&&ae!==V&&(Me&&V&&(U.isPlainObject(V)||(Z=Array.isArray(V)))?(R=ae[D],ee=Z&&!Array.isArray(R)?[]:Z||U.isPlainObject(R)?R:{},Z=!1,ae[D]=U.extend(Me,ee,V)):void 0!==V&&(ae[D]=V));return ae},U.extend({expando:"jQuery"+("3.6.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(x){throw new Error(x)},noop:function(){},isPlainObject:function(x){var D,R;return!(!x||"[object Object]"!==Gl.call(x)||(D=Ul(x))&&("function"!=typeof(R=lo.call(D,"constructor")&&D.constructor)||Xc.call(R)!==ir))},isEmptyObject:function(x){var D;for(D in x)return!1;return!0},globalEval:function(x,D,R){nr(x,{nonce:D&&D.nonce},R)},each:function(x,D){var R,V=0;if(Sr(x))for(R=x.length;V<R&&!1!==D.call(x[V],V,x[V]);V++);else for(V in x)if(!1===D.call(x[V],V,x[V]))break;return x},makeArray:function(x,D){var R=D||[];return null!=x&&(Sr(Object(x))?U.merge(R,"string"==typeof x?[x]:x):Ko.call(R,x)),R},inArray:function(x,D,R){return null==D?-1:ro.call(D,x,R)},merge:function(x,D){for(var R=+D.length,V=0,Z=x.length;V<R;V++)x[Z++]=D[V];return x.length=Z,x},grep:function(x,D,R){for(var Z=[],ee=0,ae=x.length,ye=!R;ee<ae;ee++)!D(x[ee],ee)!==ye&&Z.push(x[ee]);return Z},map:function(x,D,R){var V,Z,ee=0,ae=[];if(Sr(x))for(V=x.length;ee<V;ee++)null!=(Z=D(x[ee],ee,R))&&ae.push(Z);else for(ee in x)null!=(Z=D(x[ee],ee,R))&&ae.push(Z);return Kc(ae)},guid:1,support:Di}),"function"==typeof Symbol&&(U.fn[Symbol.iterator]=pi[Symbol.iterator]),U.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(x,D){oo["[object "+D+"]"]=D.toLowerCase()});var ar=
/*!
     * Sizzle CSS Selector Engine v2.3.10
     * https://sizzlejs.com/
     *
     * Copyright JS Foundation and other contributors
     * Released under the MIT license
     * https://js.foundation/
     *
     * Date: 2023-02-14
     */function(x){var D,R,V,Z,ee,ae,ye,ve,Me,ze,nt,Re,Ye,Mt,Xt,Pt,un,gn,ha,Pi="sizzle"+1*new Date,jt=x.document,ia=0,vi=0,Xi=dl(),zr=dl(),ur=dl(),fa=dl(),hr=function(se,be){return se===be&&(nt=!0),0},fr={}.hasOwnProperty,Wn=[],qi=Wn.pop,Ta=Wn.push,bs=Wn.push,vd=Wn.slice,pr=function(se,be){for(var ke=0,je=se.length;ke<je;ke++)if(se[ke]===be)return ke;return-1},bo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",mi="[\\x20\\t\\r\\n\\f]",zs="(?:\\\\[\\da-fA-F]{1,6}"+mi+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",fc="\\["+mi+"*("+zs+")(?:"+mi+"*([*^$|!~]?=)"+mi+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+zs+"))|)"+mi+"*\\]",Hr=":("+zs+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fc+")*)|.*)\\)|)",Ou=new RegExp(mi+"+","g"),_r=new RegExp("^"+mi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+mi+"+$","g"),pc=new RegExp("^"+mi+"*,"+mi+"*"),md=new RegExp("^"+mi+"*([>+~]|"+mi+")"+mi+"*"),bd=new RegExp(mi+"|>"),yo=new RegExp(Hr),hn=new RegExp("^"+zs+"$"),bi={ID:new RegExp("^#("+zs+")"),CLASS:new RegExp("^\\.("+zs+")"),TAG:new RegExp("^("+zs+"|[*])"),ATTR:new RegExp("^"+fc),PSEUDO:new RegExp("^"+Hr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+mi+"*(even|odd|(([+-]|)(\\d*)n|)"+mi+"*(?:([+-]|)"+mi+"*(\\d+)|))"+mi+"*\\)|)","i"),bool:new RegExp("^(?:"+bo+")$","i"),needsContext:new RegExp("^"+mi+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+mi+"*((?:-\\d)?\\d*)"+mi+"*\\)|)(?=[^-]|$)","i")},Fu=/HTML$/i,zu=/^(?:input|select|textarea|button)$/i,Hu=/^h\d$/i,wo=/^[^{]+\{\s*\[native \w/,_u=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qr=/[+~]/,ka=new RegExp("\\\\[\\da-fA-F]{1,6}"+mi+"?|\\\\([^\\r\\n\\f])","g"),Za=function(se,be){var ke="0x"+se.slice(1)-65536;return be||(ke<0?String.fromCharCode(ke+65536):String.fromCharCode(ke>>10|55296,1023&ke|56320))},yd=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Co=function(se,be){return be?"\0"===se?"\ufffd":se.slice(0,-1)+"\\"+se.charCodeAt(se.length-1).toString(16)+" ":"\\"+se},gc=function(){Re()},vc=Vr(function(se){return!0===se.disabled&&"fieldset"===se.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{bs.apply(Wn=vd.call(jt.childNodes),jt.childNodes)}catch{bs={apply:Wn.length?function(be,ke){Ta.apply(be,vd.call(ke))}:function(be,ke){for(var je=be.length,$e=0;be[je++]=ke[$e++];);be.length=je-1}}}function ii(se,be,ke,je){var $e,Ue,Je,gt,pt,Bt,Ft,Rt=be&&be.ownerDocument,Vt=be?be.nodeType:9;if(ke=ke||[],"string"!=typeof se||!se||1!==Vt&&9!==Vt&&11!==Vt)return ke;if(!je&&(Re(be),be=be||Ye,Xt)){if(11!==Vt&&(pt=_u.exec(se)))if($e=pt[1]){if(9===Vt){if(!(Je=be.getElementById($e)))return ke;if(Je.id===$e)return ke.push(Je),ke}else if(Rt&&(Je=Rt.getElementById($e))&&ha(be,Je)&&Je.id===$e)return ke.push(Je),ke}else{if(pt[2])return bs.apply(ke,be.getElementsByTagName(se)),ke;if(($e=pt[3])&&R.getElementsByClassName&&be.getElementsByClassName)return bs.apply(ke,be.getElementsByClassName($e)),ke}if(R.qsa&&!fa[se+" "]&&(!Pt||!Pt.test(se))&&(1!==Vt||"object"!==be.nodeName.toLowerCase())){if(Ft=se,Rt=be,1===Vt&&(bd.test(se)||md.test(se))){for(((Rt=qr.test(se)&&Hs(be.parentNode)||be)!==be||!R.scope)&&((gt=be.getAttribute("id"))?gt=gt.replace(yd,Co):be.setAttribute("id",gt=Pi)),Ue=(Bt=ae(se)).length;Ue--;)Bt[Ue]=(gt?"#"+gt:":scope")+" "+Wr(Bt[Ue]);Ft=Bt.join(",")}try{return bs.apply(ke,Rt.querySelectorAll(Ft)),ke}catch{fa(se,!0)}finally{gt===Pi&&be.removeAttribute("id")}}}return ve(se.replace(_r,"$1"),be,ke,je)}function dl(){var se=[];return function be(ke,je){return se.push(ke+" ")>V.cacheLength&&delete be[se.shift()],be[ke+" "]=je}}function pa(se){return se[Pi]=!0,se}function tn(se){var be=Ye.createElement("fieldset");try{return!!se(be)}catch{return!1}finally{be.parentNode&&be.parentNode.removeChild(be),be=null}}function mc(se,be){for(var ke=se.split("|"),je=ke.length;je--;)V.attrHandle[ke[je]]=be}function bc(se,be){var ke=be&&se,je=ke&&1===se.nodeType&&1===be.nodeType&&se.sourceIndex-be.sourceIndex;if(je)return je;if(ke)for(;ke=ke.nextSibling;)if(ke===be)return-1;return se?1:-1}function yc(se){return function(be){return"input"===be.nodeName.toLowerCase()&&be.type===se}}function qu(se){return function(be){var ke=be.nodeName.toLowerCase();return("input"===ke||"button"===ke)&&be.type===se}}function ul(se){return function(be){return"form"in be?be.parentNode&&!1===be.disabled?"label"in be?"label"in be.parentNode?be.parentNode.disabled===se:be.disabled===se:be.isDisabled===se||be.isDisabled!==!se&&vc(be)===se:be.disabled===se:"label"in be&&be.disabled===se}}function ga(se){return pa(function(be){return be=+be,pa(function(ke,je){for(var $e,Ue=se([],ke.length,be),Je=Ue.length;Je--;)ke[$e=Ue[Je]]&&(ke[$e]=!(je[$e]=ke[$e]))})})}function Hs(se){return se&&typeof se.getElementsByTagName<"u"&&se}for(D in R=ii.support={},ee=ii.isXML=function(se){var ke=se&&(se.ownerDocument||se).documentElement;return!Fu.test(se&&se.namespaceURI||ke&&ke.nodeName||"HTML")},Re=ii.setDocument=function(se){var be,ke,je=se?se.ownerDocument||se:jt;return je==Ye||9!==je.nodeType||!je.documentElement||(Mt=(Ye=je).documentElement,Xt=!ee(Ye),jt!=Ye&&(ke=Ye.defaultView)&&ke.top!==ke&&(ke.addEventListener?ke.addEventListener("unload",gc,!1):ke.attachEvent&&ke.attachEvent("onunload",gc)),R.scope=tn(function($e){return Mt.appendChild($e).appendChild(Ye.createElement("div")),typeof $e.querySelectorAll<"u"&&!$e.querySelectorAll(":scope fieldset div").length}),R.cssHas=tn(function(){try{return Ye.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),R.attributes=tn(function($e){return $e.className="i",!$e.getAttribute("className")}),R.getElementsByTagName=tn(function($e){return $e.appendChild(Ye.createComment("")),!$e.getElementsByTagName("*").length}),R.getElementsByClassName=wo.test(Ye.getElementsByClassName),R.getById=tn(function($e){return Mt.appendChild($e).id=Pi,!Ye.getElementsByName||!Ye.getElementsByName(Pi).length}),R.getById?(V.filter.ID=function($e){var Ue=$e.replace(ka,Za);return function(Je){return Je.getAttribute("id")===Ue}},V.find.ID=function($e,Ue){if(typeof Ue.getElementById<"u"&&Xt){var Je=Ue.getElementById($e);return Je?[Je]:[]}}):(V.filter.ID=function($e){var Ue=$e.replace(ka,Za);return function(Je){var gt=typeof Je.getAttributeNode<"u"&&Je.getAttributeNode("id");return gt&&gt.value===Ue}},V.find.ID=function($e,Ue){if(typeof Ue.getElementById<"u"&&Xt){var Je,gt,pt,Bt=Ue.getElementById($e);if(Bt){if((Je=Bt.getAttributeNode("id"))&&Je.value===$e)return[Bt];for(pt=Ue.getElementsByName($e),gt=0;Bt=pt[gt++];)if((Je=Bt.getAttributeNode("id"))&&Je.value===$e)return[Bt]}return[]}}),V.find.TAG=R.getElementsByTagName?function($e,Ue){return typeof Ue.getElementsByTagName<"u"?Ue.getElementsByTagName($e):R.qsa?Ue.querySelectorAll($e):void 0}:function($e,Ue){var Je,gt=[],pt=0,Bt=Ue.getElementsByTagName($e);if("*"===$e){for(;Je=Bt[pt++];)1===Je.nodeType&&gt.push(Je);return gt}return Bt},V.find.CLASS=R.getElementsByClassName&&function($e,Ue){if(typeof Ue.getElementsByClassName<"u"&&Xt)return Ue.getElementsByClassName($e)},un=[],Pt=[],(R.qsa=wo.test(Ye.querySelectorAll))&&(tn(function($e){var Ue;Mt.appendChild($e).innerHTML="<a id='"+Pi+"'></a><select id='"+Pi+"-\r\\' msallowcapture=''><option selected=''></option></select>",$e.querySelectorAll("[msallowcapture^='']").length&&Pt.push("[*^$]="+mi+"*(?:''|\"\")"),$e.querySelectorAll("[selected]").length||Pt.push("\\["+mi+"*(?:value|"+bo+")"),$e.querySelectorAll("[id~="+Pi+"-]").length||Pt.push("~="),(Ue=Ye.createElement("input")).setAttribute("name",""),$e.appendChild(Ue),$e.querySelectorAll("[name='']").length||Pt.push("\\["+mi+"*name"+mi+"*="+mi+"*(?:''|\"\")"),$e.querySelectorAll(":checked").length||Pt.push(":checked"),$e.querySelectorAll("a#"+Pi+"+*").length||Pt.push(".#.+[+~]"),$e.querySelectorAll("\\\f"),Pt.push("[\\r\\n\\f]")}),tn(function($e){$e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Ue=Ye.createElement("input");Ue.setAttribute("type","hidden"),$e.appendChild(Ue).setAttribute("name","D"),$e.querySelectorAll("[name=d]").length&&Pt.push("name"+mi+"*[*^$|!~]?="),2!==$e.querySelectorAll(":enabled").length&&Pt.push(":enabled",":disabled"),Mt.appendChild($e).disabled=!0,2!==$e.querySelectorAll(":disabled").length&&Pt.push(":enabled",":disabled"),$e.querySelectorAll("*,:x"),Pt.push(",.*:")})),(R.matchesSelector=wo.test(gn=Mt.matches||Mt.webkitMatchesSelector||Mt.mozMatchesSelector||Mt.oMatchesSelector||Mt.msMatchesSelector))&&tn(function($e){R.disconnectedMatch=gn.call($e,"*"),gn.call($e,"[s!='']:x"),un.push("!=",Hr)}),R.cssHas||Pt.push(":has"),Pt=Pt.length&&new RegExp(Pt.join("|")),un=un.length&&new RegExp(un.join("|")),be=wo.test(Mt.compareDocumentPosition),ha=be||wo.test(Mt.contains)?function($e,Ue){var Je=9===$e.nodeType&&$e.documentElement||$e,gt=Ue&&Ue.parentNode;return $e===gt||!(!gt||1!==gt.nodeType||!(Je.contains?Je.contains(gt):$e.compareDocumentPosition&&16&$e.compareDocumentPosition(gt)))}:function($e,Ue){if(Ue)for(;Ue=Ue.parentNode;)if(Ue===$e)return!0;return!1},hr=be?function($e,Ue){if($e===Ue)return nt=!0,0;var Je=!$e.compareDocumentPosition-!Ue.compareDocumentPosition;return Je||(1&(Je=($e.ownerDocument||$e)==(Ue.ownerDocument||Ue)?$e.compareDocumentPosition(Ue):1)||!R.sortDetached&&Ue.compareDocumentPosition($e)===Je?$e==Ye||$e.ownerDocument==jt&&ha(jt,$e)?-1:Ue==Ye||Ue.ownerDocument==jt&&ha(jt,Ue)?1:ze?pr(ze,$e)-pr(ze,Ue):0:4&Je?-1:1)}:function($e,Ue){if($e===Ue)return nt=!0,0;var Je,gt=0,pt=$e.parentNode,Bt=Ue.parentNode,Ft=[$e],Rt=[Ue];if(!pt||!Bt)return $e==Ye?-1:Ue==Ye?1:pt?-1:Bt?1:ze?pr(ze,$e)-pr(ze,Ue):0;if(pt===Bt)return bc($e,Ue);for(Je=$e;Je=Je.parentNode;)Ft.unshift(Je);for(Je=Ue;Je=Je.parentNode;)Rt.unshift(Je);for(;Ft[gt]===Rt[gt];)gt++;return gt?bc(Ft[gt],Rt[gt]):Ft[gt]==jt?-1:Rt[gt]==jt?1:0}),Ye},ii.matches=function(se,be){return ii(se,null,null,be)},ii.matchesSelector=function(se,be){if(Re(se),R.matchesSelector&&Xt&&!fa[be+" "]&&(!un||!un.test(be))&&(!Pt||!Pt.test(be)))try{var ke=gn.call(se,be);if(ke||R.disconnectedMatch||se.document&&11!==se.document.nodeType)return ke}catch{fa(be,!0)}return ii(be,Ye,null,[se]).length>0},ii.contains=function(se,be){return(se.ownerDocument||se)!=Ye&&Re(se),ha(se,be)},ii.attr=function(se,be){(se.ownerDocument||se)!=Ye&&Re(se);var ke=V.attrHandle[be.toLowerCase()],je=ke&&fr.call(V.attrHandle,be.toLowerCase())?ke(se,be,!Xt):void 0;return void 0!==je?je:R.attributes||!Xt?se.getAttribute(be):(je=se.getAttributeNode(be))&&je.specified?je.value:null},ii.escape=function(se){return(se+"").replace(yd,Co)},ii.error=function(se){throw new Error("Syntax error, unrecognized expression: "+se)},ii.uniqueSort=function(se){var be,ke=[],je=0,$e=0;if(nt=!R.detectDuplicates,ze=!R.sortStable&&se.slice(0),se.sort(hr),nt){for(;be=se[$e++];)be===se[$e]&&(je=ke.push($e));for(;je--;)se.splice(ke[je],1)}return ze=null,se},Z=ii.getText=function(se){var be,ke="",je=0,$e=se.nodeType;if($e){if(1===$e||9===$e||11===$e){if("string"==typeof se.textContent)return se.textContent;for(se=se.firstChild;se;se=se.nextSibling)ke+=Z(se)}else if(3===$e||4===$e)return se.nodeValue}else for(;be=se[je++];)ke+=Z(be);return ke},(V=ii.selectors={cacheLength:50,createPseudo:pa,match:bi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(se){return se[1]=se[1].replace(ka,Za),se[3]=(se[3]||se[4]||se[5]||"").replace(ka,Za),"~="===se[2]&&(se[3]=" "+se[3]+" "),se.slice(0,4)},CHILD:function(se){return se[1]=se[1].toLowerCase(),"nth"===se[1].slice(0,3)?(se[3]||ii.error(se[0]),se[4]=+(se[4]?se[5]+(se[6]||1):2*("even"===se[3]||"odd"===se[3])),se[5]=+(se[7]+se[8]||"odd"===se[3])):se[3]&&ii.error(se[0]),se},PSEUDO:function(se){var be,ke=!se[6]&&se[2];return bi.CHILD.test(se[0])?null:(se[3]?se[2]=se[4]||se[5]||"":ke&&yo.test(ke)&&(be=ae(ke,!0))&&(be=ke.indexOf(")",ke.length-be)-ke.length)&&(se[0]=se[0].slice(0,be),se[2]=ke.slice(0,be)),se.slice(0,3))}},filter:{TAG:function(se){var be=se.replace(ka,Za).toLowerCase();return"*"===se?function(){return!0}:function(ke){return ke.nodeName&&ke.nodeName.toLowerCase()===be}},CLASS:function(se){var be=Xi[se+" "];return be||(be=new RegExp("(^|"+mi+")"+se+"("+mi+"|$)"))&&Xi(se,function(ke){return be.test("string"==typeof ke.className&&ke.className||typeof ke.getAttribute<"u"&&ke.getAttribute("class")||"")})},ATTR:function(se,be,ke){return function(je){var $e=ii.attr(je,se);return null==$e?"!="===be:!be||($e+="","="===be?$e===ke:"!="===be?$e!==ke:"^="===be?ke&&0===$e.indexOf(ke):"*="===be?ke&&$e.indexOf(ke)>-1:"$="===be?ke&&$e.slice(-ke.length)===ke:"~="===be?(" "+$e.replace(Ou," ")+" ").indexOf(ke)>-1:"|="===be&&($e===ke||$e.slice(0,ke.length+1)===ke+"-"))}},CHILD:function(se,be,ke,je,$e){var Ue="nth"!==se.slice(0,3),Je="last"!==se.slice(-4),gt="of-type"===be;return 1===je&&0===$e?function(pt){return!!pt.parentNode}:function(pt,Bt,Ft){var Rt,Vt,Ii,It,Qi,Vn,Un=Ue!==Je?"nextSibling":"previousSibling",xi=pt.parentNode,ko=gt&&pt.nodeName.toLowerCase(),es=!Ft&&!gt,dn=!1;if(xi){if(Ue){for(;Un;){for(It=pt;It=It[Un];)if(gt?It.nodeName.toLowerCase()===ko:1===It.nodeType)return!1;Vn=Un="only"===se&&!Vn&&"nextSibling"}return!0}if(Vn=[Je?xi.firstChild:xi.lastChild],Je&&es){for(dn=(Qi=(Rt=(Vt=(Ii=(It=xi)[Pi]||(It[Pi]={}))[It.uniqueID]||(Ii[It.uniqueID]={}))[se]||[])[0]===ia&&Rt[1])&&Rt[2],It=Qi&&xi.childNodes[Qi];It=++Qi&&It&&It[Un]||(dn=Qi=0)||Vn.pop();)if(1===It.nodeType&&++dn&&It===pt){Vt[se]=[ia,Qi,dn];break}}else if(es&&(dn=Qi=(Rt=(Vt=(Ii=(It=pt)[Pi]||(It[Pi]={}))[It.uniqueID]||(Ii[It.uniqueID]={}))[se]||[])[0]===ia&&Rt[1]),!1===dn)for(;(It=++Qi&&It&&It[Un]||(dn=Qi=0)||Vn.pop())&&((gt?It.nodeName.toLowerCase()!==ko:1!==It.nodeType)||!++dn||(es&&((Vt=(Ii=It[Pi]||(It[Pi]={}))[It.uniqueID]||(Ii[It.uniqueID]={}))[se]=[ia,dn]),It!==pt)););return(dn-=$e)===je||dn%je==0&&dn/je>=0}}},PSEUDO:function(se,be){var ke,je=V.pseudos[se]||V.setFilters[se.toLowerCase()]||ii.error("unsupported pseudo: "+se);return je[Pi]?je(be):je.length>1?(ke=[se,se,"",be],V.setFilters.hasOwnProperty(se.toLowerCase())?pa(function($e,Ue){for(var Je,gt=je($e,be),pt=gt.length;pt--;)$e[Je=pr($e,gt[pt])]=!(Ue[Je]=gt[pt])}):function($e){return je($e,0,ke)}):je}},pseudos:{not:pa(function(se){var be=[],ke=[],je=ye(se.replace(_r,"$1"));return je[Pi]?pa(function($e,Ue,Je,gt){for(var pt,Bt=je($e,null,gt,[]),Ft=$e.length;Ft--;)(pt=Bt[Ft])&&($e[Ft]=!(Ue[Ft]=pt))}):function($e,Ue,Je){return be[0]=$e,je(be,null,Je,ke),be[0]=null,!ke.pop()}}),has:pa(function(se){return function(be){return ii(se,be).length>0}}),contains:pa(function(se){return se=se.replace(ka,Za),function(be){return(be.textContent||Z(be)).indexOf(se)>-1}}),lang:pa(function(se){return hn.test(se||"")||ii.error("unsupported lang: "+se),se=se.replace(ka,Za).toLowerCase(),function(be){var ke;do{if(ke=Xt?be.lang:be.getAttribute("xml:lang")||be.getAttribute("lang"))return(ke=ke.toLowerCase())===se||0===ke.indexOf(se+"-")}while((be=be.parentNode)&&1===be.nodeType);return!1}}),target:function(se){var be=x.location&&x.location.hash;return be&&be.slice(1)===se.id},root:function(se){return se===Mt},focus:function(se){return se===Ye.activeElement&&(!Ye.hasFocus||Ye.hasFocus())&&!!(se.type||se.href||~se.tabIndex)},enabled:ul(!1),disabled:ul(!0),checked:function(se){var be=se.nodeName.toLowerCase();return"input"===be&&!!se.checked||"option"===be&&!!se.selected},selected:function(se){return!0===se.selected},empty:function(se){for(se=se.firstChild;se;se=se.nextSibling)if(se.nodeType<6)return!1;return!0},parent:function(se){return!V.pseudos.empty(se)},header:function(se){return Hu.test(se.nodeName)},input:function(se){return zu.test(se.nodeName)},button:function(se){var be=se.nodeName.toLowerCase();return"input"===be&&"button"===se.type||"button"===be},text:function(se){var be;return"input"===se.nodeName.toLowerCase()&&"text"===se.type&&(null==(be=se.getAttribute("type"))||"text"===be.toLowerCase())},first:ga(function(){return[0]}),last:ga(function(se,be){return[be-1]}),eq:ga(function(se,be,ke){return[ke<0?ke+be:ke]}),even:ga(function(se,be){for(var ke=0;ke<be;ke+=2)se.push(ke);return se}),odd:ga(function(se,be){for(var ke=1;ke<be;ke+=2)se.push(ke);return se}),lt:ga(function(se,be,ke){for(var je=ke<0?ke+be:ke>be?be:ke;--je>=0;)se.push(je);return se}),gt:ga(function(se,be,ke){for(var je=ke<0?ke+be:ke;++je<be;)se.push(je);return se})}}).pseudos.nth=V.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})V.pseudos[D]=yc(D);for(D in{submit:!0,reset:!0})V.pseudos[D]=qu(D);function wd(){}function Wr(se){for(var be=0,ke=se.length,je="";be<ke;be++)je+=se[be].value;return je}function Vr(se,be,ke){var je=be.dir,$e=be.next,Ue=$e||je,Je=ke&&"parentNode"===Ue,gt=vi++;return be.first?function(pt,Bt,Ft){for(;pt=pt[je];)if(1===pt.nodeType||Je)return se(pt,Bt,Ft);return!1}:function(pt,Bt,Ft){var Rt,Vt,Ii,It=[ia,gt];if(Ft){for(;pt=pt[je];)if((1===pt.nodeType||Je)&&se(pt,Bt,Ft))return!0}else for(;pt=pt[je];)if(1===pt.nodeType||Je)if(Vt=(Ii=pt[Pi]||(pt[Pi]={}))[pt.uniqueID]||(Ii[pt.uniqueID]={}),$e&&$e===pt.nodeName.toLowerCase())pt=pt[je]||pt;else{if((Rt=Vt[Ue])&&Rt[0]===ia&&Rt[1]===gt)return It[2]=Rt[2];if(Vt[Ue]=It,It[2]=se(pt,Bt,Ft))return!0}return!1}}function wc(se){return se.length>1?function(be,ke,je){for(var $e=se.length;$e--;)if(!se[$e](be,ke,je))return!1;return!0}:se[0]}function nn(se,be,ke,je,$e){for(var Ue,Je=[],gt=0,pt=se.length,Bt=null!=be;gt<pt;gt++)(Ue=se[gt])&&(!ke||ke(Ue,je,$e))&&(Je.push(Ue),Bt&&be.push(gt));return Je}function ys(se,be,ke,je,$e,Ue){return je&&!je[Pi]&&(je=ys(je)),$e&&!$e[Pi]&&($e=ys($e,Ue)),pa(function(Je,gt,pt,Bt){var Ft,Rt,Vt,Ii=[],It=[],Qi=gt.length,Vn=Je||function xo(se,be,ke){for(var je=0,$e=be.length;je<$e;je++)ii(se,be[je],ke);return ke}(be||"*",pt.nodeType?[pt]:pt,[]),Un=!se||!Je&&be?Vn:nn(Vn,Ii,se,pt,Bt),xi=ke?$e||(Je?se:Qi||je)?[]:gt:Un;if(ke&&ke(Un,xi,pt,Bt),je)for(Ft=nn(xi,It),je(Ft,[],pt,Bt),Rt=Ft.length;Rt--;)(Vt=Ft[Rt])&&(xi[It[Rt]]=!(Un[It[Rt]]=Vt));if(Je){if($e||se){if($e){for(Ft=[],Rt=xi.length;Rt--;)(Vt=xi[Rt])&&Ft.push(Un[Rt]=Vt);$e(null,xi=[],Ft,Bt)}for(Rt=xi.length;Rt--;)(Vt=xi[Rt])&&(Ft=$e?pr(Je,Vt):Ii[Rt])>-1&&(Je[Ft]=!(gt[Ft]=Vt))}}else xi=nn(xi===gt?xi.splice(Qi,xi.length):xi),$e?$e(null,gt,xi,Bt):bs.apply(gt,xi)})}function To(se){for(var be,ke,je,$e=se.length,Ue=V.relative[se[0].type],Je=Ue||V.relative[" "],gt=Ue?1:0,pt=Vr(function(Rt){return Rt===be},Je,!0),Bt=Vr(function(Rt){return pr(be,Rt)>-1},Je,!0),Ft=[function(Rt,Vt,Ii){var It=!Ue&&(Ii||Vt!==Me)||((be=Vt).nodeType?pt(Rt,Vt,Ii):Bt(Rt,Vt,Ii));return be=null,It}];gt<$e;gt++)if(ke=V.relative[se[gt].type])Ft=[Vr(wc(Ft),ke)];else{if((ke=V.filter[se[gt].type].apply(null,se[gt].matches))[Pi]){for(je=++gt;je<$e&&!V.relative[se[je].type];je++);return ys(gt>1&&wc(Ft),gt>1&&Wr(se.slice(0,gt-1).concat({value:" "===se[gt-2].type?"*":""})).replace(_r,"$1"),ke,gt<je&&To(se.slice(gt,je)),je<$e&&To(se=se.slice(je)),je<$e&&Wr(se))}Ft.push(ke)}return wc(Ft)}return wd.prototype=V.filters=V.pseudos,V.setFilters=new wd,ae=ii.tokenize=function(se,be){var ke,je,$e,Ue,Je,gt,pt,Bt=zr[se+" "];if(Bt)return be?0:Bt.slice(0);for(Je=se,gt=[],pt=V.preFilter;Je;){for(Ue in(!ke||(je=pc.exec(Je)))&&(je&&(Je=Je.slice(je[0].length)||Je),gt.push($e=[])),ke=!1,(je=md.exec(Je))&&(ke=je.shift(),$e.push({value:ke,type:je[0].replace(_r," ")}),Je=Je.slice(ke.length)),V.filter)(je=bi[Ue].exec(Je))&&(!pt[Ue]||(je=pt[Ue](je)))&&(ke=je.shift(),$e.push({value:ke,type:Ue,matches:je}),Je=Je.slice(ke.length));if(!ke)break}return be?Je.length:Je?ii.error(se):zr(se,gt).slice(0)},ye=ii.compile=function(se,be){var ke,je=[],$e=[],Ue=ur[se+" "];if(!Ue){for(be||(be=ae(se)),ke=be.length;ke--;)(Ue=To(be[ke]))[Pi]?je.push(Ue):$e.push(Ue);Ue=ur(se,function ue(se,be){var ke=be.length>0,je=se.length>0,$e=function(Ue,Je,gt,pt,Bt){var Ft,Rt,Vt,Ii=0,It="0",Qi=Ue&&[],Vn=[],Un=Me,xi=Ue||je&&V.find.TAG("*",Bt),ko=ia+=null==Un?1:Math.random()||.1,es=xi.length;for(Bt&&(Me=Je==Ye||Je||Bt);It!==es&&null!=(Ft=xi[It]);It++){if(je&&Ft){for(Rt=0,!Je&&Ft.ownerDocument!=Ye&&(Re(Ft),gt=!Xt);Vt=se[Rt++];)if(Vt(Ft,Je||Ye,gt)){pt.push(Ft);break}Bt&&(ia=ko)}ke&&((Ft=!Vt&&Ft)&&Ii--,Ue&&Qi.push(Ft))}if(Ii+=It,ke&&It!==Ii){for(Rt=0;Vt=be[Rt++];)Vt(Qi,Vn,Je,gt);if(Ue){if(Ii>0)for(;It--;)Qi[It]||Vn[It]||(Vn[It]=qi.call(pt));Vn=nn(Vn)}bs.apply(pt,Vn),Bt&&!Ue&&Vn.length>0&&Ii+be.length>1&&ii.uniqueSort(pt)}return Bt&&(ia=ko,Me=Un),Qi};return ke?pa($e):$e}($e,je)),Ue.selector=se}return Ue},ve=ii.select=function(se,be,ke,je){var $e,Ue,Je,gt,pt,Bt="function"==typeof se&&se,Ft=!je&&ae(se=Bt.selector||se);if(ke=ke||[],1===Ft.length){if((Ue=Ft[0]=Ft[0].slice(0)).length>2&&"ID"===(Je=Ue[0]).type&&9===be.nodeType&&Xt&&V.relative[Ue[1].type]){if(!(be=(V.find.ID(Je.matches[0].replace(ka,Za),be)||[])[0]))return ke;Bt&&(be=be.parentNode),se=se.slice(Ue.shift().value.length)}for($e=bi.needsContext.test(se)?0:Ue.length;$e--&&!V.relative[gt=(Je=Ue[$e]).type];)if((pt=V.find[gt])&&(je=pt(Je.matches[0].replace(ka,Za),qr.test(Ue[0].type)&&Hs(be.parentNode)||be))){if(Ue.splice($e,1),!(se=je.length&&Wr(Ue)))return bs.apply(ke,je),ke;break}}return(Bt||ye(se,Ft))(je,be,!Xt,ke,!be||qr.test(se)&&Hs(be.parentNode)||be),ke},R.sortStable=Pi.split("").sort(hr).join("")===Pi,R.detectDuplicates=!!nt,Re(),R.sortDetached=tn(function(se){return 1&se.compareDocumentPosition(Ye.createElement("fieldset"))}),tn(function(se){return se.innerHTML="<a href='#'></a>","#"===se.firstChild.getAttribute("href")})||mc("type|href|height|width",function(se,be,ke){if(!ke)return se.getAttribute(be,"type"===be.toLowerCase()?1:2)}),(!R.attributes||!tn(function(se){return se.innerHTML="<input/>",se.firstChild.setAttribute("value",""),""===se.firstChild.getAttribute("value")}))&&mc("value",function(se,be,ke){if(!ke&&"input"===se.nodeName.toLowerCase())return se.defaultValue}),tn(function(se){return null==se.getAttribute("disabled")})||mc(bo,function(se,be,ke){var je;if(!ke)return!0===se[be]?be.toLowerCase():(je=se.getAttributeNode(be))&&je.specified?je.value:null}),ii}(F);U.find=ar,U.expr=ar.selectors,U.expr[":"]=U.expr.pseudos,U.uniqueSort=U.unique=ar.uniqueSort,U.text=ar.getText,U.isXMLDoc=ar.isXML,U.contains=ar.contains,U.escapeSelector=ar.escape;var Ar=function(x,D,R){for(var V=[],Z=void 0!==R;(x=x[D])&&9!==x.nodeType;)if(1===x.nodeType){if(Z&&U(x).is(R))break;V.push(x)}return V},Qc=function(x,D){for(var R=[];x;x=x.nextSibling)1===x.nodeType&&x!==D&&R.push(x);return R},Jc=U.expr.match.needsContext;function ya(x,D){return x.nodeName&&x.nodeName.toLowerCase()===D.toLowerCase()}var Zc=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function co(x,D,R){return ei(D)?U.grep(x,function(V,Z){return!!D.call(V,Z,V)!==R}):D.nodeType?U.grep(x,function(V){return V===D!==R}):"string"!=typeof D?U.grep(x,function(V){return ro.call(D,V)>-1!==R}):U.filter(D,x,R)}U.filter=function(x,D,R){var V=D[0];return R&&(x=":not("+x+")"),1===D.length&&1===V.nodeType?U.find.matchesSelector(V,x)?[V]:[]:U.find.matches(x,U.grep(D,function(Z){return 1===Z.nodeType}))},U.fn.extend({find:function(x){var D,R,V=this.length,Z=this;if("string"!=typeof x)return this.pushStack(U(x).filter(function(){for(D=0;D<V;D++)if(U.contains(Z[D],this))return!0}));for(R=this.pushStack([]),D=0;D<V;D++)U.find(x,Z[D],R);return V>1?U.uniqueSort(R):R},filter:function(x){return this.pushStack(co(this,x||[],!1))},not:function(x){return this.pushStack(co(this,x||[],!0))},is:function(x){return!!co(this,"string"==typeof x&&Jc.test(x)?U(x):x||[],!1).length}});var Qo,ca=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,bn=U.fn.init=function(x,D,R){var V,Z;if(!x)return this;if(R=R||Qo,"string"==typeof x){if(!(V="<"===x[0]&&">"===x[x.length-1]&&x.length>=3?[null,x,null]:ca.exec(x))||!V[1]&&D)return!D||D.jquery?(D||R).find(x):this.constructor(D).find(x);if(V[1]){if(U.merge(this,U.parseHTML(V[1],(D=D instanceof U?D[0]:D)&&D.nodeType?D.ownerDocument||D:li,!0)),Zc.test(V[1])&&U.isPlainObject(D))for(V in D)ei(this[V])?this[V](D[V]):this.attr(V,D[V]);return this}return(Z=li.getElementById(V[2]))&&(this[0]=Z,this.length=1),this}return x.nodeType?(this[0]=x,this.length=1,this):ei(x)?void 0!==R.ready?R.ready(x):x(U):U.makeArray(x,this)};bn.prototype=U.fn,Qo=U(li);var Tu=/^(?:parents|prev(?:Until|All))/,rt={children:!0,contents:!0,next:!0,prev:!0};function ea(x,D){for(;(x=x[D])&&1!==x.nodeType;);return x}U.fn.extend({has:function(x){var D=U(x,this),R=D.length;return this.filter(function(){for(var V=0;V<R;V++)if(U.contains(this,D[V]))return!0})},closest:function(x,D){var R,V=0,Z=this.length,ee=[],ae="string"!=typeof x&&U(x);if(!Jc.test(x))for(;V<Z;V++)for(R=this[V];R&&R!==D;R=R.parentNode)if(R.nodeType<11&&(ae?ae.index(R)>-1:1===R.nodeType&&U.find.matchesSelector(R,x))){ee.push(R);break}return this.pushStack(ee.length>1?U.uniqueSort(ee):ee)},index:function(x){return x?"string"==typeof x?ro.call(U(x),this[0]):ro.call(this,x.jquery?x[0]:x):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(x,D){return this.pushStack(U.uniqueSort(U.merge(this.get(),U(x,D))))},addBack:function(x){return this.add(null==x?this.prevObject:this.prevObject.filter(x))}}),U.each({parent:function(x){var D=x.parentNode;return D&&11!==D.nodeType?D:null},parents:function(x){return Ar(x,"parentNode")},parentsUntil:function(x,D,R){return Ar(x,"parentNode",R)},next:function(x){return ea(x,"nextSibling")},prev:function(x){return ea(x,"previousSibling")},nextAll:function(x){return Ar(x,"nextSibling")},prevAll:function(x){return Ar(x,"previousSibling")},nextUntil:function(x,D,R){return Ar(x,"nextSibling",R)},prevUntil:function(x,D,R){return Ar(x,"previousSibling",R)},siblings:function(x){return Qc((x.parentNode||{}).firstChild,x)},children:function(x){return Qc(x.firstChild)},contents:function(x){return null!=x.contentDocument&&Ul(x.contentDocument)?x.contentDocument:(ya(x,"template")&&(x=x.content||x),U.merge([],x.childNodes))}},function(x,D){U.fn[x]=function(R,V){var Z=U.map(this,D,R);return"Until"!==x.slice(-5)&&(V=R),V&&"string"==typeof V&&(Z=U.filter(V,Z)),this.length>1&&(rt[x]||U.uniqueSort(Z),Tu.test(x)&&Z.reverse()),this.pushStack(Z)}});var Hn=/[^\x20\t\r\n\f]+/g;function Mi(x){return x}function uo(x){throw x}function jl(x,D,R,V){var Z;try{x&&ei(Z=x.promise)?Z.call(x).done(D).fail(R):x&&ei(Z=x.then)?Z.call(x,D,R):D.apply(void 0,[x].slice(V))}catch(ee){R.apply(void 0,[ee])}}U.Callbacks=function(x){x="string"==typeof x?function Yl(x){var D={};return U.each(x.match(Hn)||[],function(R,V){D[V]=!0}),D}(x):U.extend({},x);var D,R,V,Z,ee=[],ae=[],ye=-1,ve=function(){for(Z=Z||x.once,V=D=!0;ae.length;ye=-1)for(R=ae.shift();++ye<ee.length;)!1===ee[ye].apply(R[0],R[1])&&x.stopOnFalse&&(ye=ee.length,R=!1);x.memory||(R=!1),D=!1,Z&&(ee=R?[]:"")},Me={add:function(){return ee&&(R&&!D&&(ye=ee.length-1,ae.push(R)),function ze(nt){U.each(nt,function(Re,Ye){ei(Ye)?(!x.unique||!Me.has(Ye))&&ee.push(Ye):Ye&&Ye.length&&"string"!==kr(Ye)&&ze(Ye)})}(arguments),R&&!D&&ve()),this},remove:function(){return U.each(arguments,function(ze,nt){for(var Re;(Re=U.inArray(nt,ee,Re))>-1;)ee.splice(Re,1),Re<=ye&&ye--}),this},has:function(ze){return ze?U.inArray(ze,ee)>-1:ee.length>0},empty:function(){return ee&&(ee=[]),this},disable:function(){return Z=ae=[],ee=R="",this},disabled:function(){return!ee},lock:function(){return Z=ae=[],!R&&!D&&(ee=R=""),this},locked:function(){return!!Z},fireWith:function(ze,nt){return Z||(nt=[ze,(nt=nt||[]).slice?nt.slice():nt],ae.push(nt),D||ve()),this},fire:function(){return Me.fireWith(this,arguments),this},fired:function(){return!!V}};return Me},U.extend({Deferred:function(x){var D=[["notify","progress",U.Callbacks("memory"),U.Callbacks("memory"),2],["resolve","done",U.Callbacks("once memory"),U.Callbacks("once memory"),0,"resolved"],["reject","fail",U.Callbacks("once memory"),U.Callbacks("once memory"),1,"rejected"]],R="pending",V={state:function(){return R},always:function(){return Z.done(arguments).fail(arguments),this},catch:function(ee){return V.then(null,ee)},pipe:function(){var ee=arguments;return U.Deferred(function(ae){U.each(D,function(ye,ve){var Me=ei(ee[ve[4]])&&ee[ve[4]];Z[ve[1]](function(){var ze=Me&&Me.apply(this,arguments);ze&&ei(ze.promise)?ze.promise().progress(ae.notify).done(ae.resolve).fail(ae.reject):ae[ve[0]+"With"](this,Me?[ze]:arguments)})}),ee=null}).promise()},then:function(ee,ae,ye){var ve=0;function Me(ze,nt,Re,Ye){return function(){var Mt=this,Xt=arguments,Pt=function(){var gn,ha;if(!(ze<ve)){if((gn=Re.apply(Mt,Xt))===nt.promise())throw new TypeError("Thenable self-resolution");ei(ha=gn&&("object"==typeof gn||"function"==typeof gn)&&gn.then)?Ye?ha.call(gn,Me(ve,nt,Mi,Ye),Me(ve,nt,uo,Ye)):(ve++,ha.call(gn,Me(ve,nt,Mi,Ye),Me(ve,nt,uo,Ye),Me(ve,nt,Mi,nt.notifyWith))):(Re!==Mi&&(Mt=void 0,Xt=[gn]),(Ye||nt.resolveWith)(Mt,Xt))}},un=Ye?Pt:function(){try{Pt()}catch(gn){U.Deferred.exceptionHook&&U.Deferred.exceptionHook(gn,un.stackTrace),ze+1>=ve&&(Re!==uo&&(Mt=void 0,Xt=[gn]),nt.rejectWith(Mt,Xt))}};ze?un():(U.Deferred.getStackHook&&(un.stackTrace=U.Deferred.getStackHook()),F.setTimeout(un))}}return U.Deferred(function(ze){D[0][3].add(Me(0,ze,ei(ye)?ye:Mi,ze.notifyWith)),D[1][3].add(Me(0,ze,ei(ee)?ee:Mi)),D[2][3].add(Me(0,ze,ei(ae)?ae:uo))}).promise()},promise:function(ee){return null!=ee?U.extend(ee,V):V}},Z={};return U.each(D,function(ee,ae){var ye=ae[2],ve=ae[5];V[ae[1]]=ye.add,ve&&ye.add(function(){R=ve},D[3-ee][2].disable,D[3-ee][3].disable,D[0][2].lock,D[0][3].lock),ye.add(ae[3].fire),Z[ae[0]]=function(){return Z[ae[0]+"With"](this===Z?void 0:this,arguments),this},Z[ae[0]+"With"]=ye.fireWith}),V.promise(Z),x&&x.call(Z,Z),Z},when:function(x){var D=arguments.length,R=D,V=Array(R),Z=Ma.call(arguments),ee=U.Deferred(),ae=function(ye){return function(ve){V[ye]=this,Z[ye]=arguments.length>1?Ma.call(arguments):ve,--D||ee.resolveWith(V,Z)}};if(D<=1&&(jl(x,ee.done(ae(R)).resolve,ee.reject,!D),"pending"===ee.state()||ei(Z[R]&&Z[R].then)))return ee.then();for(;R--;)jl(Z[R],ae(R),ee.reject);return ee.promise()}});var Er=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;U.Deferred.exceptionHook=function(x,D){F.console&&F.console.warn&&x&&Er.test(x.name)&&F.console.warn("jQuery.Deferred exception: "+x.message,x.stack,D)},U.readyException=function(x){F.setTimeout(function(){throw x})};var $r=U.Deferred();function ho(){li.removeEventListener("DOMContentLoaded",ho),F.removeEventListener("load",ho),U.ready()}U.fn.ready=function(x){return $r.then(x).catch(function(D){U.readyException(D)}),this},U.extend({isReady:!1,readyWait:1,ready:function(x){(!0===x?--U.readyWait:U.isReady)||(U.isReady=!0,!(!0!==x&&--U.readyWait>0)&&$r.resolveWith(li,[U]))}}),U.ready.then=$r.then,"complete"===li.readyState||"loading"!==li.readyState&&!li.documentElement.doScroll?F.setTimeout(U.ready):(li.addEventListener("DOMContentLoaded",ho),F.addEventListener("load",ho));var Fe=function(x,D,R,V,Z,ee,ae){var ye=0,ve=x.length,Me=null==R;if("object"===kr(R))for(ye in Z=!0,R)Fe(x,D,ye,R[ye],!0,ee,ae);else if(void 0!==V&&(Z=!0,ei(V)||(ae=!0),Me&&(ae?(D.call(x,V),D=null):(Me=D,D=function(ze,nt,Re){return Me.call(U(ze),Re)})),D))for(;ye<ve;ye++)D(x[ye],R,ae?V:V.call(x[ye],ye,D(x[ye],R)));return Z?x:Me?D.call(x):ve?D(x[0],R):ee},de=/^-ms-/,Jt=/-([a-z])/g;function ed(x,D){return D.toUpperCase()}function Xn(x){return x.replace(de,"ms-").replace(Jt,ed)}var Dr=function(x){return 1===x.nodeType||9===x.nodeType||!+x.nodeType};function sr(){this.expando=U.expando+sr.uid++}sr.uid=1,sr.prototype={cache:function(x){var D=x[this.expando];return D||(D={},Dr(x)&&(x.nodeType?x[this.expando]=D:Object.defineProperty(x,this.expando,{value:D,configurable:!0}))),D},set:function(x,D,R){var V,Z=this.cache(x);if("string"==typeof D)Z[Xn(D)]=R;else for(V in D)Z[Xn(V)]=D[V];return Z},get:function(x,D){return void 0===D?this.cache(x):x[this.expando]&&x[this.expando][Xn(D)]},access:function(x,D,R){return void 0===D||D&&"string"==typeof D&&void 0===R?this.get(x,D):(this.set(x,D,R),void 0!==R?R:D)},remove:function(x,D){var R,V=x[this.expando];if(void 0!==V){if(void 0!==D)for((R=(D=Array.isArray(D)?D.map(Xn):(D=Xn(D))in V?[D]:D.match(Hn)||[]).length);R--;)delete V[D[R]];(void 0===D||U.isEmptyObject(V))&&(x.nodeType?x[this.expando]=void 0:delete x[this.expando])}},hasData:function(x){var D=x[this.expando];return void 0!==D&&!U.isEmptyObject(D)}};var xe=new sr,cn=new sr,Kl=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Jo=/[A-Z]/g;function Is(x,D,R){var V;if(void 0===R&&1===x.nodeType)if(V="data-"+D.replace(Jo,"-$&").toLowerCase(),"string"==typeof(R=x.getAttribute(V))){try{R=function rr(x){return"true"===x||"false"!==x&&("null"===x?null:x===+x+""?+x:Kl.test(x)?JSON.parse(x):x)}(R)}catch{}cn.set(x,D,R)}else R=void 0;return R}U.extend({hasData:function(x){return cn.hasData(x)||xe.hasData(x)},data:function(x,D,R){return cn.access(x,D,R)},removeData:function(x,D){cn.remove(x,D)},_data:function(x,D,R){return xe.access(x,D,R)},_removeData:function(x,D){xe.remove(x,D)}}),U.fn.extend({data:function(x,D){var R,V,Z,ee=this[0],ae=ee&&ee.attributes;if(void 0===x){if(this.length&&(Z=cn.get(ee),1===ee.nodeType&&!xe.get(ee,"hasDataAttrs"))){for(R=ae.length;R--;)ae[R]&&0===(V=ae[R].name).indexOf("data-")&&(V=Xn(V.slice(5)),Is(ee,V,Z[V]));xe.set(ee,"hasDataAttrs",!0)}return Z}return"object"==typeof x?this.each(function(){cn.set(this,x)}):Fe(this,function(ye){var ve;if(ee&&void 0===ye)return void 0!==(ve=cn.get(ee,x))||void 0!==(ve=Is(ee,x))?ve:void 0;this.each(function(){cn.set(this,x,ye)})},null,D,arguments.length>1,null,!0)},removeData:function(x){return this.each(function(){cn.remove(this,x)})}}),U.extend({queue:function(x,D,R){var V;if(x)return V=xe.get(x,D=(D||"fx")+"queue"),R&&(!V||Array.isArray(R)?V=xe.access(x,D,U.makeArray(R)):V.push(R)),V||[]},dequeue:function(x,D){var R=U.queue(x,D=D||"fx"),V=R.length,Z=R.shift(),ee=U._queueHooks(x,D);"inprogress"===Z&&(Z=R.shift(),V--),Z&&("fx"===D&&R.unshift("inprogress"),delete ee.stop,Z.call(x,function(){U.dequeue(x,D)},ee)),!V&&ee&&ee.empty.fire()},_queueHooks:function(x,D){var R=D+"queueHooks";return xe.get(x,R)||xe.access(x,R,{empty:U.Callbacks("once memory").add(function(){xe.remove(x,[D+"queue",R])})})}}),U.fn.extend({queue:function(x,D){var R=2;return"string"!=typeof x&&(D=x,x="fx",R--),arguments.length<R?U.queue(this[0],x):void 0===D?this:this.each(function(){var V=U.queue(this,x,D);U._queueHooks(this,x),"fx"===x&&"inprogress"!==V[0]&&U.dequeue(this,x)})},dequeue:function(x){return this.each(function(){U.dequeue(this,x)})},clearQueue:function(x){return this.queue(x||"fx",[])},promise:function(x,D){var R,V=1,Z=U.Deferred(),ee=this,ae=this.length,ye=function(){--V||Z.resolveWith(ee,[ee])};for("string"!=typeof x&&(D=x,x=void 0),x=x||"fx";ae--;)(R=xe.get(ee[ae],x+"queueHooks"))&&R.empty&&(V++,R.empty.add(ye));return ye(),Z.promise(D)}});var td=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,H=new RegExp("^(?:([+-])=|)("+td+")([a-z%]*)$","i"),Xa=["Top","Right","Bottom","Left"],Qa=li.documentElement,_n=function(x){return U.contains(x.ownerDocument,x)},Xl={composed:!0};Qa.getRootNode&&(_n=function(x){return U.contains(x.ownerDocument,x)||x.getRootNode(Xl)===x.ownerDocument});var st=function(x,D){return"none"===(x=D||x).style.display||""===x.style.display&&_n(x)&&"none"===U.css(x,"display")};function qn(x,D,R,V){var Z,ee,ae=20,ye=V?function(){return V.cur()}:function(){return U.css(x,D,"")},ve=ye(),Me=R&&R[3]||(U.cssNumber[D]?"":"px"),ze=x.nodeType&&(U.cssNumber[D]||"px"!==Me&&+ve)&&H.exec(U.css(x,D));if(ze&&ze[3]!==Me){for(Me=Me||ze[3],ze=+(ve/=2)||1;ae--;)U.style(x,D,ze+Me),(1-ee)*(1-(ee=ye()/ve||.5))<=0&&(ae=0),ze/=ee;U.style(x,D,(ze*=2)+Me),R=R||[]}return R&&(ze=+ze||+ve||0,Z=R[1]?ze+(R[1]+1)*R[2]:+R[2],V&&(V.unit=Me,V.start=ze,V.end=Z)),Z}var xt={};function vs(x){var D,R=x.ownerDocument,V=x.nodeName,Z=xt[V];return Z||(D=R.body.appendChild(R.createElement(V)),Z=U.css(D,"display"),D.parentNode.removeChild(D),"none"===Z&&(Z="block"),xt[V]=Z,Z)}function wa(x,D){for(var R,V,Z=[],ee=0,ae=x.length;ee<ae;ee++)(V=x[ee]).style&&(R=V.style.display,D?("none"===R&&(Z[ee]=xe.get(V,"display")||null,Z[ee]||(V.style.display="")),""===V.style.display&&st(V)&&(Z[ee]=vs(V))):"none"!==R&&(Z[ee]="none",xe.set(V,"display",R)));for(ee=0;ee<ae;ee++)null!=Z[ee]&&(x[ee].style.display=Z[ee]);return x}U.fn.extend({show:function(){return wa(this,!0)},hide:function(){return wa(this)},toggle:function(x){return"boolean"==typeof x?x?this.show():this.hide():this.each(function(){st(this)?U(this).show():U(this).hide()})}});var D,R,Ls=/^(?:checkbox|radio)$/i,fo=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,B=/^$|^module$|\/(?:java|ecma)script/i;D=li.createDocumentFragment().appendChild(li.createElement("div")),(R=li.createElement("input")).setAttribute("type","radio"),R.setAttribute("checked","checked"),R.setAttribute("name","t"),D.appendChild(R),Di.checkClone=D.cloneNode(!0).cloneNode(!0).lastChild.checked,D.innerHTML="<textarea>x</textarea>",Di.noCloneChecked=!!D.cloneNode(!0).lastChild.defaultValue,D.innerHTML="<option></option>",Di.option=!!D.lastChild;var Pn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function gi(x,D){var R;return R=typeof x.getElementsByTagName<"u"?x.getElementsByTagName(D||"*"):typeof x.querySelectorAll<"u"?x.querySelectorAll(D||"*"):[],void 0===D||D&&ya(x,D)?U.merge([x],R):R}function Ps(x,D){for(var R=0,V=x.length;R<V;R++)xe.set(x[R],"globalEval",!D||xe.get(D[R],"globalEval"))}Pn.tbody=Pn.tfoot=Pn.colgroup=Pn.caption=Pn.thead,Pn.th=Pn.td,Di.option||(Pn.optgroup=Pn.option=[1,"<select multiple='multiple'>","</select>"]);var ms=/<|&#?\w+;/;function Mr(x,D,R,V,Z){for(var ee,ae,ye,ve,Me,ze,nt=D.createDocumentFragment(),Re=[],Ye=0,Mt=x.length;Ye<Mt;Ye++)if((ee=x[Ye])||0===ee)if("object"===kr(ee))U.merge(Re,ee.nodeType?[ee]:ee);else if(ms.test(ee)){for(ae=ae||nt.appendChild(D.createElement("div")),ye=(fo.exec(ee)||["",""])[1].toLowerCase(),ae.innerHTML=(ve=Pn[ye]||Pn._default)[1]+U.htmlPrefilter(ee)+ve[2],ze=ve[0];ze--;)ae=ae.lastChild;U.merge(Re,ae.childNodes),(ae=nt.firstChild).textContent=""}else Re.push(D.createTextNode(ee));for(nt.textContent="",Ye=0;ee=Re[Ye++];)if(V&&U.inArray(ee,V)>-1)Z&&Z.push(ee);else if(Me=_n(ee),ae=gi(nt.appendChild(ee),"script"),Me&&Ps(ae),R)for(ze=0;ee=ae[ze++];)B.test(ee.type||"")&&R.push(ee);return nt}var Ja=/^([^.]*)(?:\.(.+)|)/;function Ns(){return!0}function Ia(){return!1}function Ir(x,D){return x===function Li(){try{return li.activeElement}catch{}}()==("focus"===D)}function Zo(x,D,R,V,Z,ee){var ae,ye;if("object"==typeof D){for(ye in"string"!=typeof R&&(V=V||R,R=void 0),D)Zo(x,ye,R,V,D[ye],ee);return x}if(null==V&&null==Z?(Z=R,V=R=void 0):null==Z&&("string"==typeof R?(Z=V,V=void 0):(Z=V,V=R,R=void 0)),!1===Z)Z=Ia;else if(!Z)return x;return 1===ee&&(ae=Z,Z=function(ve){return U().off(ve),ae.apply(this,arguments)},Z.guid=ae.guid||(ae.guid=U.guid++)),x.each(function(){U.event.add(this,D,Z,V,R)})}function _i(x,D,R){R?(xe.set(x,D,!1),U.event.add(x,D,{namespace:!1,handler:function(V){var Z,ee,ae=xe.get(this,D);if(1&V.isTrigger&&this[D]){if(ae.length)(U.event.special[D]||{}).delegateType&&V.stopPropagation();else if(ae=Ma.call(arguments),xe.set(this,D,ae),Z=R(this,D),this[D](),ae!==(ee=xe.get(this,D))||Z?xe.set(this,D,!1):ee={},ae!==ee)return V.stopImmediatePropagation(),V.preventDefault(),ee&&ee.value}else ae.length&&(xe.set(this,D,{value:U.event.trigger(U.extend(ae[0],U.Event.prototype),ae.slice(1),this)}),V.stopImmediatePropagation())}})):void 0===xe.get(x,D)&&U.event.add(x,D,Ns)}U.event={global:{},add:function(x,D,R,V,Z){var ee,ae,ye,ve,Me,ze,nt,Re,Ye,Mt,Xt,Pt=xe.get(x);if(Dr(x))for(R.handler&&(R=(ee=R).handler,Z=ee.selector),Z&&U.find.matchesSelector(Qa,Z),R.guid||(R.guid=U.guid++),(ve=Pt.events)||(ve=Pt.events=Object.create(null)),(ae=Pt.handle)||(ae=Pt.handle=function(un){return typeof U<"u"&&U.event.triggered!==un.type?U.event.dispatch.apply(x,arguments):void 0}),Me=(D=(D||"").match(Hn)||[""]).length;Me--;)Ye=Xt=(ye=Ja.exec(D[Me])||[])[1],Mt=(ye[2]||"").split(".").sort(),Ye&&(nt=U.event.special[Ye]||{},nt=U.event.special[Ye=(Z?nt.delegateType:nt.bindType)||Ye]||{},ze=U.extend({type:Ye,origType:Xt,data:V,handler:R,guid:R.guid,selector:Z,needsContext:Z&&U.expr.match.needsContext.test(Z),namespace:Mt.join(".")},ee),(Re=ve[Ye])||((Re=ve[Ye]=[]).delegateCount=0,(!nt.setup||!1===nt.setup.call(x,V,Mt,ae))&&x.addEventListener&&x.addEventListener(Ye,ae)),nt.add&&(nt.add.call(x,ze),ze.handler.guid||(ze.handler.guid=R.guid)),Z?Re.splice(Re.delegateCount++,0,ze):Re.push(ze),U.event.global[Ye]=!0)},remove:function(x,D,R,V,Z){var ee,ae,ye,ve,Me,ze,nt,Re,Ye,Mt,Xt,Pt=xe.hasData(x)&&xe.get(x);if(Pt&&(ve=Pt.events)){for(Me=(D=(D||"").match(Hn)||[""]).length;Me--;)if(Ye=Xt=(ye=Ja.exec(D[Me])||[])[1],Mt=(ye[2]||"").split(".").sort(),Ye){for(nt=U.event.special[Ye]||{},Re=ve[Ye=(V?nt.delegateType:nt.bindType)||Ye]||[],ye=ye[2]&&new RegExp("(^|\\.)"+Mt.join("\\.(?:.*\\.|)")+"(\\.|$)"),ae=ee=Re.length;ee--;)ze=Re[ee],(Z||Xt===ze.origType)&&(!R||R.guid===ze.guid)&&(!ye||ye.test(ze.namespace))&&(!V||V===ze.selector||"**"===V&&ze.selector)&&(Re.splice(ee,1),ze.selector&&Re.delegateCount--,nt.remove&&nt.remove.call(x,ze));ae&&!Re.length&&((!nt.teardown||!1===nt.teardown.call(x,Mt,Pt.handle))&&U.removeEvent(x,Ye,Pt.handle),delete ve[Ye])}else for(Ye in ve)U.event.remove(x,Ye+D[Me],R,V,!0);U.isEmptyObject(ve)&&xe.remove(x,"handle events")}},dispatch:function(x){var D,R,V,Z,ee,ae,ye=new Array(arguments.length),ve=U.event.fix(x),Me=(xe.get(this,"events")||Object.create(null))[ve.type]||[],ze=U.event.special[ve.type]||{};for(ye[0]=ve,D=1;D<arguments.length;D++)ye[D]=arguments[D];if(ve.delegateTarget=this,!ze.preDispatch||!1!==ze.preDispatch.call(this,ve)){for(ae=U.event.handlers.call(this,ve,Me),D=0;(Z=ae[D++])&&!ve.isPropagationStopped();)for(ve.currentTarget=Z.elem,R=0;(ee=Z.handlers[R++])&&!ve.isImmediatePropagationStopped();)(!ve.rnamespace||!1===ee.namespace||ve.rnamespace.test(ee.namespace))&&(ve.handleObj=ee,ve.data=ee.data,void 0!==(V=((U.event.special[ee.origType]||{}).handle||ee.handler).apply(Z.elem,ye))&&!1===(ve.result=V)&&(ve.preventDefault(),ve.stopPropagation()));return ze.postDispatch&&ze.postDispatch.call(this,ve),ve.result}},handlers:function(x,D){var R,V,Z,ee,ae,ye=[],ve=D.delegateCount,Me=x.target;if(ve&&Me.nodeType&&!("click"===x.type&&x.button>=1))for(;Me!==this;Me=Me.parentNode||this)if(1===Me.nodeType&&("click"!==x.type||!0!==Me.disabled)){for(ee=[],ae={},R=0;R<ve;R++)void 0===ae[Z=(V=D[R]).selector+" "]&&(ae[Z]=V.needsContext?U(Z,this).index(Me)>-1:U.find(Z,this,null,[Me]).length),ae[Z]&&ee.push(V);ee.length&&ye.push({elem:Me,handlers:ee})}return Me=this,ve<D.length&&ye.push({elem:Me,handlers:D.slice(ve)}),ye},addProp:function(x,D){Object.defineProperty(U.Event.prototype,x,{enumerable:!0,configurable:!0,get:ei(D)?function(){if(this.originalEvent)return D(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[x]},set:function(R){Object.defineProperty(this,x,{enumerable:!0,configurable:!0,writable:!0,value:R})}})},fix:function(x){return x[U.expando]?x:new U.Event(x)},special:{load:{noBubble:!0},click:{setup:function(x){var D=this||x;return Ls.test(D.type)&&D.click&&ya(D,"input")&&_i(D,"click",Ns),!1},trigger:function(x){var D=this||x;return Ls.test(D.type)&&D.click&&ya(D,"input")&&_i(D,"click"),!0},_default:function(x){var D=x.target;return Ls.test(D.type)&&D.click&&ya(D,"input")&&xe.get(D,"click")||ya(D,"a")}},beforeunload:{postDispatch:function(x){void 0!==x.result&&x.originalEvent&&(x.originalEvent.returnValue=x.result)}}}},U.removeEvent=function(x,D,R){x.removeEventListener&&x.removeEventListener(D,R)},U.Event=function(x,D){if(!(this instanceof U.Event))return new U.Event(x,D);x&&x.type?(this.originalEvent=x,this.type=x.type,this.isDefaultPrevented=x.defaultPrevented||void 0===x.defaultPrevented&&!1===x.returnValue?Ns:Ia,this.target=x.target&&3===x.target.nodeType?x.target.parentNode:x.target,this.currentTarget=x.currentTarget,this.relatedTarget=x.relatedTarget):this.type=x,D&&U.extend(this,D),this.timeStamp=x&&x.timeStamp||Date.now(),this[U.expando]=!0},U.Event.prototype={constructor:U.Event,isDefaultPrevented:Ia,isPropagationStopped:Ia,isImmediatePropagationStopped:Ia,isSimulated:!1,preventDefault:function(){var x=this.originalEvent;this.isDefaultPrevented=Ns,x&&!this.isSimulated&&x.preventDefault()},stopPropagation:function(){var x=this.originalEvent;this.isPropagationStopped=Ns,x&&!this.isSimulated&&x.stopPropagation()},stopImmediatePropagation:function(){var x=this.originalEvent;this.isImmediatePropagationStopped=Ns,x&&!this.isSimulated&&x.stopImmediatePropagation(),this.stopPropagation()}},U.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},U.event.addProp),U.each({focus:"focusin",blur:"focusout"},function(x,D){U.event.special[x]={setup:function(){return _i(this,x,Ir),!1},trigger:function(){return _i(this,x),!0},_default:function(R){return xe.get(R.target,x)},delegateType:D}}),U.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(x,D){U.event.special[x]={delegateType:D,bindType:D,handle:function(R){var V,ee=R.relatedTarget,ae=R.handleObj;return(!ee||ee!==this&&!U.contains(this,ee))&&(R.type=ae.origType,V=ae.handler.apply(this,arguments),R.type=D),V}}}),U.fn.extend({on:function(x,D,R,V){return Zo(this,x,D,R,V)},one:function(x,D,R,V){return Zo(this,x,D,R,V,1)},off:function(x,D,R){var V,Z;if(x&&x.preventDefault&&x.handleObj)return V=x.handleObj,U(x.delegateTarget).off(V.namespace?V.origType+"."+V.namespace:V.origType,V.selector,V.handler),this;if("object"==typeof x){for(Z in x)this.off(Z,D,x[Z]);return this}return(!1===D||"function"==typeof D)&&(R=D,D=void 0),!1===R&&(R=Ia),this.each(function(){U.event.remove(this,x,R,D)})}});var id=/<script|<style|<link/i,nd=/checked\s*(?:[^=]|=\s*.checked.)/i,Ql=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Jl(x,D){return ya(x,"table")&&ya(11!==D.nodeType?D:D.firstChild,"tr")&&U(x).children("tbody")[0]||x}function el(x){return x.type=(null!==x.getAttribute("type"))+"/"+x.type,x}function Zl(x){return"true/"===(x.type||"").slice(0,5)?x.type=x.type.slice(5):x.removeAttribute("type"),x}function ec(x,D){var R,V,Z,ae,ye,ve;if(1===D.nodeType){if(xe.hasData(x)&&(ve=xe.get(x).events))for(Z in xe.remove(D,"handle events"),ve)for(R=0,V=ve[Z].length;R<V;R++)U.event.add(D,Z,ve[Z][R]);cn.hasData(x)&&(ae=cn.access(x),ye=U.extend({},ae),cn.set(D,ye))}}function La(x,D){var R=D.nodeName.toLowerCase();"input"===R&&Ls.test(x.type)?D.checked=x.checked:("input"===R||"textarea"===R)&&(D.defaultValue=x.defaultValue)}function ta(x,D,R,V){D=Kc(D);var Z,ee,ae,ye,ve,Me,ze=0,nt=x.length,Re=nt-1,Ye=D[0],Mt=ei(Ye);if(Mt||nt>1&&"string"==typeof Ye&&!Di.checkClone&&nd.test(Ye))return x.each(function(Xt){var Pt=x.eq(Xt);Mt&&(D[0]=Ye.call(this,Xt,Pt.html())),ta(Pt,D,R,V)});if(nt&&(ee=(Z=Mr(D,x[0].ownerDocument,!1,x,V)).firstChild,1===Z.childNodes.length&&(Z=ee),ee||V)){for(ye=(ae=U.map(gi(Z,"script"),el)).length;ze<nt;ze++)ve=Z,ze!==Re&&(ve=U.clone(ve,!0,!0),ye&&U.merge(ae,gi(ve,"script"))),R.call(x[ze],ve,ze);if(ye)for(Me=ae[ae.length-1].ownerDocument,U.map(ae,Zl),ze=0;ze<ye;ze++)B.test((ve=ae[ze]).type||"")&&!xe.access(ve,"globalEval")&&U.contains(Me,ve)&&(ve.src&&"module"!==(ve.type||"").toLowerCase()?U._evalUrl&&!ve.noModule&&U._evalUrl(ve.src,{nonce:ve.nonce||ve.getAttribute("nonce")},Me):nr(ve.textContent.replace(Ql,""),ve,Me))}return x}function tc(x,D,R){for(var V,Z=D?U.filter(D,x):x,ee=0;null!=(V=Z[ee]);ee++)!R&&1===V.nodeType&&U.cleanData(gi(V)),V.parentNode&&(R&&_n(V)&&Ps(gi(V,"script")),V.parentNode.removeChild(V));return x}U.extend({htmlPrefilter:function(x){return x},clone:function(x,D,R){var V,Z,ee,ae,ye=x.cloneNode(!0),ve=_n(x);if(!(Di.noCloneChecked||1!==x.nodeType&&11!==x.nodeType||U.isXMLDoc(x)))for(ae=gi(ye),V=0,Z=(ee=gi(x)).length;V<Z;V++)La(ee[V],ae[V]);if(D)if(R)for(ee=ee||gi(x),ae=ae||gi(ye),V=0,Z=ee.length;V<Z;V++)ec(ee[V],ae[V]);else ec(x,ye);return(ae=gi(ye,"script")).length>0&&Ps(ae,!ve&&gi(x,"script")),ye},cleanData:function(x){for(var D,R,V,Z=U.event.special,ee=0;void 0!==(R=x[ee]);ee++)if(Dr(R)){if(D=R[xe.expando]){if(D.events)for(V in D.events)Z[V]?U.event.remove(R,V):U.removeEvent(R,V,D.handle);R[xe.expando]=void 0}R[cn.expando]&&(R[cn.expando]=void 0)}}}),U.fn.extend({detach:function(x){return tc(this,x,!0)},remove:function(x){return tc(this,x)},text:function(x){return Fe(this,function(D){return void 0===D?U.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=D)})},null,x,arguments.length)},append:function(){return ta(this,arguments,function(x){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Jl(this,x).appendChild(x)})},prepend:function(){return ta(this,arguments,function(x){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var D=Jl(this,x);D.insertBefore(x,D.firstChild)}})},before:function(){return ta(this,arguments,function(x){this.parentNode&&this.parentNode.insertBefore(x,this)})},after:function(){return ta(this,arguments,function(x){this.parentNode&&this.parentNode.insertBefore(x,this.nextSibling)})},empty:function(){for(var x,D=0;null!=(x=this[D]);D++)1===x.nodeType&&(U.cleanData(gi(x,!1)),x.textContent="");return this},clone:function(x,D){return x=x??!1,D=D??x,this.map(function(){return U.clone(this,x,D)})},html:function(x){return Fe(this,function(D){var R=this[0]||{},V=0,Z=this.length;if(void 0===D&&1===R.nodeType)return R.innerHTML;if("string"==typeof D&&!id.test(D)&&!Pn[(fo.exec(D)||["",""])[1].toLowerCase()]){D=U.htmlPrefilter(D);try{for(;V<Z;V++)1===(R=this[V]||{}).nodeType&&(U.cleanData(gi(R,!1)),R.innerHTML=D);R=0}catch{}}R&&this.empty().append(D)},null,x,arguments.length)},replaceWith:function(){var x=[];return ta(this,arguments,function(D){var R=this.parentNode;U.inArray(this,x)<0&&(U.cleanData(gi(this)),R&&R.replaceChild(D,this))},x)}}),U.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(x,D){U.fn[x]=function(R){for(var V,Z=[],ee=U(R),ae=ee.length-1,ye=0;ye<=ae;ye++)V=ye===ae?this:this.clone(!0),U(ee[ye])[D](V),Ko.apply(Z,V.get());return this.pushStack(Z)}});var Bs=new RegExp("^("+td+")(?!px)[a-z%]+$","i"),tl=/^--/,il=function(x){var D=x.ownerDocument.defaultView;return(!D||!D.opener)&&(D=F),D.getComputedStyle(x)},ad=function(x,D,R){var V,Z,ee={};for(Z in D)ee[Z]=x.style[Z],x.style[Z]=D[Z];for(Z in V=R.call(x),D)x.style[Z]=ee[Z];return V},ku=new RegExp(Xa.join("|"),"i"),ic="[\\x20\\t\\r\\n\\f]",Su=new RegExp("^"+ic+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ic+"+$","g");function Lr(x,D,R){var V,Z,ee,ae,ye=tl.test(D),ve=x.style;return(R=R||il(x))&&(ae=R.getPropertyValue(D)||R[D],ye&&ae&&(ae=ae.replace(Su,"$1")||void 0),""===ae&&!_n(x)&&(ae=U.style(x,D)),!Di.pixelBoxStyles()&&Bs.test(ae)&&ku.test(D)&&(V=ve.width,Z=ve.minWidth,ee=ve.maxWidth,ve.minWidth=ve.maxWidth=ve.width=ae,ae=R.width,ve.width=V,ve.minWidth=Z,ve.maxWidth=ee)),void 0!==ae?ae+"":ae}function sd(x,D){return{get:function(){if(!x())return(this.get=D).apply(this,arguments);delete this.get}}}!function(){function x(){if(Me){ve.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Me.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Qa.appendChild(ve).appendChild(Me);var ze=F.getComputedStyle(Me);R="1%"!==ze.top,ye=12===D(ze.marginLeft),Me.style.right="60%",ee=36===D(ze.right),V=36===D(ze.width),Me.style.position="absolute",Z=12===D(Me.offsetWidth/3),Qa.removeChild(ve),Me=null}}function D(ze){return Math.round(parseFloat(ze))}var R,V,Z,ee,ae,ye,ve=li.createElement("div"),Me=li.createElement("div");Me.style&&(Me.style.backgroundClip="content-box",Me.cloneNode(!0).style.backgroundClip="",Di.clearCloneStyle="content-box"===Me.style.backgroundClip,U.extend(Di,{boxSizingReliable:function(){return x(),V},pixelBoxStyles:function(){return x(),ee},pixelPosition:function(){return x(),R},reliableMarginLeft:function(){return x(),ye},scrollboxSize:function(){return x(),Z},reliableTrDimensions:function(){var ze,nt,Re,Ye;return null==ae&&(ze=li.createElement("table"),nt=li.createElement("tr"),Re=li.createElement("div"),ze.style.cssText="position:absolute;left:-11111px;border-collapse:separate",nt.style.cssText="border:1px solid",nt.style.height="1px",Re.style.height="9px",Re.style.display="block",Qa.appendChild(ze).appendChild(nt).appendChild(Re),Ye=F.getComputedStyle(nt),ae=parseInt(Ye.height,10)+parseInt(Ye.borderTopWidth,10)+parseInt(Ye.borderBottomWidth,10)===nt.offsetHeight,Qa.removeChild(ze)),ae}}))}();var rd=["Webkit","Moz","ms"],od=li.createElement("div").style,ld={};function nc(x){return U.cssProps[x]||ld[x]||(x in od?x:ld[x]=function Au(x){for(var D=x[0].toUpperCase()+x.slice(1),R=rd.length;R--;)if((x=rd[R]+D)in od)return x}(x)||x)}var Eu=/^(none|table(?!-c[ea]).+)/,$u={position:"absolute",visibility:"hidden",display:"block"},cd={letterSpacing:"0",fontWeight:"400"};function dd(x,D,R){var V=H.exec(D);return V?Math.max(0,V[2]-(R||0))+(V[3]||"px"):D}function ac(x,D,R,V,Z,ee){var ae="width"===D?1:0,ye=0,ve=0;if(R===(V?"border":"content"))return 0;for(;ae<4;ae+=2)"margin"===R&&(ve+=U.css(x,R+Xa[ae],!0,Z)),V?("content"===R&&(ve-=U.css(x,"padding"+Xa[ae],!0,Z)),"margin"!==R&&(ve-=U.css(x,"border"+Xa[ae]+"Width",!0,Z))):(ve+=U.css(x,"padding"+Xa[ae],!0,Z),"padding"!==R?ve+=U.css(x,"border"+Xa[ae]+"Width",!0,Z):ye+=U.css(x,"border"+Xa[ae]+"Width",!0,Z));return!V&&ee>=0&&(ve+=Math.max(0,Math.ceil(x["offset"+D[0].toUpperCase()+D.slice(1)]-ee-ve-ye-.5))||0),ve}function Et(x,D,R){var V=il(x),ee=(!Di.boxSizingReliable()||R)&&"border-box"===U.css(x,"boxSizing",!1,V),ae=ee,ye=Lr(x,D,V),ve="offset"+D[0].toUpperCase()+D.slice(1);if(Bs.test(ye)){if(!R)return ye;ye="auto"}return(!Di.boxSizingReliable()&&ee||!Di.reliableTrDimensions()&&ya(x,"tr")||"auto"===ye||!parseFloat(ye)&&"inline"===U.css(x,"display",!1,V))&&x.getClientRects().length&&(ee="border-box"===U.css(x,"boxSizing",!1,V),(ae=ve in x)&&(ye=x[ve])),(ye=parseFloat(ye)||0)+ac(x,D,R||(ee?"border":"content"),ae,V,ye)+"px"}function Qn(x,D,R,V,Z){return new Qn.prototype.init(x,D,R,V,Z)}U.extend({cssHooks:{opacity:{get:function(x,D){if(D){var R=Lr(x,"opacity");return""===R?"1":R}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(x,D,R,V){if(x&&3!==x.nodeType&&8!==x.nodeType&&x.style){var Z,ee,ae,ye=Xn(D),ve=tl.test(D),Me=x.style;if(ve||(D=nc(ye)),ae=U.cssHooks[D]||U.cssHooks[ye],void 0===R)return ae&&"get"in ae&&void 0!==(Z=ae.get(x,!1,V))?Z:Me[D];if("string"==(ee=typeof R)&&(Z=H.exec(R))&&Z[1]&&(R=qn(x,D,Z),ee="number"),null==R||R!=R)return;"number"===ee&&!ve&&(R+=Z&&Z[3]||(U.cssNumber[ye]?"":"px")),!Di.clearCloneStyle&&""===R&&0===D.indexOf("background")&&(Me[D]="inherit"),(!ae||!("set"in ae)||void 0!==(R=ae.set(x,R,V)))&&(ve?Me.setProperty(D,R):Me[D]=R)}},css:function(x,D,R,V){var Z,ee,ae,ye=Xn(D);return tl.test(D)||(D=nc(ye)),(ae=U.cssHooks[D]||U.cssHooks[ye])&&"get"in ae&&(Z=ae.get(x,!0,R)),void 0===Z&&(Z=Lr(x,D,V)),"normal"===Z&&D in cd&&(Z=cd[D]),""===R||R?(ee=parseFloat(Z),!0===R||isFinite(ee)?ee||0:Z):Z}}),U.each(["height","width"],function(x,D){U.cssHooks[D]={get:function(R,V,Z){if(V)return!Eu.test(U.css(R,"display"))||R.getClientRects().length&&R.getBoundingClientRect().width?Et(R,D,Z):ad(R,$u,function(){return Et(R,D,Z)})},set:function(R,V,Z){var ee,ae=il(R),ye=!Di.scrollboxSize()&&"absolute"===ae.position,Me=(ye||Z)&&"border-box"===U.css(R,"boxSizing",!1,ae),ze=Z?ac(R,D,Z,Me,ae):0;return Me&&ye&&(ze-=Math.ceil(R["offset"+D[0].toUpperCase()+D.slice(1)]-parseFloat(ae[D])-ac(R,D,"border",!1,ae)-.5)),ze&&(ee=H.exec(V))&&"px"!==(ee[3]||"px")&&(R.style[D]=V,V=U.css(R,D)),dd(0,V,ze)}}}),U.cssHooks.marginLeft=sd(Di.reliableMarginLeft,function(x,D){if(D)return(parseFloat(Lr(x,"marginLeft"))||x.getBoundingClientRect().left-ad(x,{marginLeft:0},function(){return x.getBoundingClientRect().left}))+"px"}),U.each({margin:"",padding:"",border:"Width"},function(x,D){U.cssHooks[x+D]={expand:function(R){for(var V=0,Z={},ee="string"==typeof R?R.split(" "):[R];V<4;V++)Z[x+Xa[V]+D]=ee[V]||ee[V-2]||ee[0];return Z}},"margin"!==x&&(U.cssHooks[x+D].set=dd)}),U.fn.extend({css:function(x,D){return Fe(this,function(R,V,Z){var ee,ae,ye={},ve=0;if(Array.isArray(V)){for(ee=il(R),ae=V.length;ve<ae;ve++)ye[V[ve]]=U.css(R,V[ve],!1,ee);return ye}return void 0!==Z?U.style(R,V,Z):U.css(R,V)},x,D,arguments.length>1)}}),U.Tween=Qn,Qn.prototype={constructor:Qn,init:function(x,D,R,V,Z,ee){this.elem=x,this.prop=R,this.easing=Z||U.easing._default,this.options=D,this.start=this.now=this.cur(),this.end=V,this.unit=ee||(U.cssNumber[R]?"":"px")},cur:function(){var x=Qn.propHooks[this.prop];return x&&x.get?x.get(this):Qn.propHooks._default.get(this)},run:function(x){var D,R=Qn.propHooks[this.prop];return this.pos=D=this.options.duration?U.easing[this.easing](x,this.options.duration*x,0,1,this.options.duration):x,this.now=(this.end-this.start)*D+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),R&&R.set?R.set(this):Qn.propHooks._default.set(this),this}},Qn.prototype.init.prototype=Qn.prototype,Qn.propHooks={_default:{get:function(x){var D;return 1!==x.elem.nodeType||null!=x.elem[x.prop]&&null==x.elem.style[x.prop]?x.elem[x.prop]:(D=U.css(x.elem,x.prop,""))&&"auto"!==D?D:0},set:function(x){U.fx.step[x.prop]?U.fx.step[x.prop](x):1!==x.elem.nodeType||!U.cssHooks[x.prop]&&null==x.elem.style[nc(x.prop)]?x.elem[x.prop]=x.now:U.style(x.elem,x.prop,x.now+x.unit)}}},Qn.propHooks.scrollTop=Qn.propHooks.scrollLeft={set:function(x){x.elem.nodeType&&x.elem.parentNode&&(x.elem[x.prop]=x.now)}},U.easing={linear:function(x){return x},swing:function(x){return.5-Math.cos(x*Math.PI)/2},_default:"swing"},U.fx=Qn.prototype.init,U.fx.step={};var Ca,nl,ud=/^(?:toggle|show|hide)$/,hd=/queueHooks$/;function yn(){nl&&(!1===li.hidden&&F.requestAnimationFrame?F.requestAnimationFrame(yn):F.setTimeout(yn,U.fx.interval),U.fx.tick())}function po(){return F.setTimeout(function(){Ca=void 0}),Ca=Date.now()}function Pr(x,D){var R,V=0,Z={height:x};for(D=D?1:0;V<4;V+=2-D)Z["margin"+(R=Xa[V])]=Z["padding"+R]=x;return D&&(Z.opacity=Z.width=x),Z}function Nr(x,D,R){for(var V,Z=(xa.tweeners[D]||[]).concat(xa.tweeners["*"]),ee=0,ae=Z.length;ee<ae;ee++)if(V=Z[ee].call(R,D,x))return V}function xa(x,D,R){var V,Z,ee=0,ae=xa.prefilters.length,ye=U.Deferred().always(function(){delete ve.elem}),ve=function(){if(Z)return!1;for(var nt=Ca||po(),Re=Math.max(0,Me.startTime+Me.duration-nt),Mt=1-(Re/Me.duration||0),Xt=0,Pt=Me.tweens.length;Xt<Pt;Xt++)Me.tweens[Xt].run(Mt);return ye.notifyWith(x,[Me,Mt,Re]),Mt<1&&Pt?Re:(Pt||ye.notifyWith(x,[Me,1,0]),ye.resolveWith(x,[Me]),!1)},Me=ye.promise({elem:x,props:U.extend({},D),opts:U.extend(!0,{specialEasing:{},easing:U.easing._default},R),originalProperties:D,originalOptions:R,startTime:Ca||po(),duration:R.duration,tweens:[],createTween:function(nt,Re){var Ye=U.Tween(x,Me.opts,nt,Re,Me.opts.specialEasing[nt]||Me.opts.easing);return Me.tweens.push(Ye),Ye},stop:function(nt){var Re=0,Ye=nt?Me.tweens.length:0;if(Z)return this;for(Z=!0;Re<Ye;Re++)Me.tweens[Re].run(1);return nt?(ye.notifyWith(x,[Me,1,0]),ye.resolveWith(x,[Me,nt])):ye.rejectWith(x,[Me,nt]),this}}),ze=Me.props;for(function rc(x,D){var R,V,Z,ee,ae;for(R in x)if(Z=D[V=Xn(R)],ee=x[R],Array.isArray(ee)&&(Z=ee[1],ee=x[R]=ee[0]),R!==V&&(x[V]=ee,delete x[R]),(ae=U.cssHooks[V])&&"expand"in ae)for(R in ee=ae.expand(ee),delete x[V],ee)R in x||(x[R]=ee[R],D[R]=Z);else D[V]=Z}(ze,Me.opts.specialEasing);ee<ae;ee++)if(V=xa.prefilters[ee].call(Me,x,ze,Me.opts))return ei(V.stop)&&(U._queueHooks(Me.elem,Me.opts.queue).stop=V.stop.bind(V)),V;return U.map(ze,Nr,Me),ei(Me.opts.start)&&Me.opts.start.call(x,Me),Me.progress(Me.opts.progress).done(Me.opts.done,Me.opts.complete).fail(Me.opts.fail).always(Me.opts.always),U.fx.timer(U.extend(ve,{elem:x,anim:Me,queue:Me.opts.queue})),Me}U.Animation=U.extend(xa,{tweeners:{"*":[function(x,D){var R=this.createTween(x,D);return qn(R.elem,x,H.exec(D),R),R}]},tweener:function(x,D){ei(x)?(D=x,x=["*"]):x=x.match(Hn);for(var R,V=0,Z=x.length;V<Z;V++)(xa.tweeners[R=x[V]]=xa.tweeners[R]||[]).unshift(D)},prefilters:[function sc(x,D,R){var V,Z,ee,ae,ye,ve,Me,ze,nt="width"in D||"height"in D,Re=this,Ye={},Mt=x.style,Xt=x.nodeType&&st(x),Pt=xe.get(x,"fxshow");for(V in R.queue||(null==(ae=U._queueHooks(x,"fx")).unqueued&&(ae.unqueued=0,ye=ae.empty.fire,ae.empty.fire=function(){ae.unqueued||ye()}),ae.unqueued++,Re.always(function(){Re.always(function(){ae.unqueued--,U.queue(x,"fx").length||ae.empty.fire()})})),D)if(ud.test(Z=D[V])){if(delete D[V],ee=ee||"toggle"===Z,Z===(Xt?"hide":"show")){if("show"!==Z||!Pt||void 0===Pt[V])continue;Xt=!0}Ye[V]=Pt&&Pt[V]||U.style(x,V)}if((ve=!U.isEmptyObject(D))||!U.isEmptyObject(Ye))for(V in nt&&1===x.nodeType&&(R.overflow=[Mt.overflow,Mt.overflowX,Mt.overflowY],null==(Me=Pt&&Pt.display)&&(Me=xe.get(x,"display")),"none"===(ze=U.css(x,"display"))&&(Me?ze=Me:(wa([x],!0),Me=x.style.display||Me,ze=U.css(x,"display"),wa([x]))),("inline"===ze||"inline-block"===ze&&null!=Me)&&"none"===U.css(x,"float")&&(ve||(Re.done(function(){Mt.display=Me}),null==Me&&(Me="none"===(ze=Mt.display)?"":ze)),Mt.display="inline-block")),R.overflow&&(Mt.overflow="hidden",Re.always(function(){Mt.overflow=R.overflow[0],Mt.overflowX=R.overflow[1],Mt.overflowY=R.overflow[2]})),ve=!1,Ye)ve||(Pt?"hidden"in Pt&&(Xt=Pt.hidden):Pt=xe.access(x,"fxshow",{display:Me}),ee&&(Pt.hidden=!Xt),Xt&&wa([x],!0),Re.done(function(){for(V in Xt||wa([x]),xe.remove(x,"fxshow"),Ye)U.style(x,V,Ye[V])})),ve=Nr(Xt?Pt[V]:0,V,Re),V in Pt||(Pt[V]=ve.start,Xt&&(ve.end=ve.start,ve.start=0))}],prefilter:function(x,D){D?xa.prefilters.unshift(x):xa.prefilters.push(x)}}),U.speed=function(x,D,R){var V=x&&"object"==typeof x?U.extend({},x):{complete:R||!R&&D||ei(x)&&x,duration:x,easing:R&&D||D&&!ei(D)&&D};return U.fx.off?V.duration=0:"number"!=typeof V.duration&&(V.duration=V.duration in U.fx.speeds?U.fx.speeds[V.duration]:U.fx.speeds._default),(null==V.queue||!0===V.queue)&&(V.queue="fx"),V.old=V.complete,V.complete=function(){ei(V.old)&&V.old.call(this),V.queue&&U.dequeue(this,V.queue)},V},U.fn.extend({fadeTo:function(x,D,R,V){return this.filter(st).css("opacity",0).show().end().animate({opacity:D},x,R,V)},animate:function(x,D,R,V){var Z=U.isEmptyObject(x),ee=U.speed(D,R,V),ae=function(){var ye=xa(this,U.extend({},x),ee);(Z||xe.get(this,"finish"))&&ye.stop(!0)};return ae.finish=ae,Z||!1===ee.queue?this.each(ae):this.queue(ee.queue,ae)},stop:function(x,D,R){var V=function(Z){var ee=Z.stop;delete Z.stop,ee(R)};return"string"!=typeof x&&(R=D,D=x,x=void 0),D&&this.queue(x||"fx",[]),this.each(function(){var Z=!0,ee=null!=x&&x+"queueHooks",ae=U.timers,ye=xe.get(this);if(ee)ye[ee]&&ye[ee].stop&&V(ye[ee]);else for(ee in ye)ye[ee]&&ye[ee].stop&&hd.test(ee)&&V(ye[ee]);for(ee=ae.length;ee--;)ae[ee].elem===this&&(null==x||ae[ee].queue===x)&&(ae[ee].anim.stop(R),Z=!1,ae.splice(ee,1));(Z||!R)&&U.dequeue(this,x)})},finish:function(x){return!1!==x&&(x=x||"fx"),this.each(function(){var D,R=xe.get(this),V=R[x+"queue"],Z=R[x+"queueHooks"],ee=U.timers,ae=V?V.length:0;for(R.finish=!0,U.queue(this,x,[]),Z&&Z.stop&&Z.stop.call(this,!0),D=ee.length;D--;)ee[D].elem===this&&ee[D].queue===x&&(ee[D].anim.stop(!0),ee.splice(D,1));for(D=0;D<ae;D++)V[D]&&V[D].finish&&V[D].finish.call(this);delete R.finish})}}),U.each(["toggle","show","hide"],function(x,D){var R=U.fn[D];U.fn[D]=function(V,Z,ee){return null==V||"boolean"==typeof V?R.apply(this,arguments):this.animate(Pr(D,!0),V,Z,ee)}}),U.each({slideDown:Pr("show"),slideUp:Pr("hide"),slideToggle:Pr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(x,D){U.fn[x]=function(R,V,Z){return this.animate(D,R,V,Z)}}),U.timers=[],U.fx.tick=function(){var x,D=0,R=U.timers;for(Ca=Date.now();D<R.length;D++)!(x=R[D])()&&R[D]===x&&R.splice(D--,1);R.length||U.fx.stop(),Ca=void 0},U.fx.timer=function(x){U.timers.push(x),U.fx.start()},U.fx.interval=13,U.fx.start=function(){nl||(nl=!0,yn())},U.fx.stop=function(){nl=null},U.fx.speeds={slow:600,fast:200,_default:400},U.fn.delay=function(x,D){return x=U.fx&&U.fx.speeds[x]||x,this.queue(D=D||"fx",function(R,V){var Z=F.setTimeout(R,x);V.stop=function(){F.clearTimeout(Z)}})},function(){var x=li.createElement("input"),R=li.createElement("select").appendChild(li.createElement("option"));x.type="checkbox",Di.checkOn=""!==x.value,Di.optSelected=R.selected,(x=li.createElement("input")).value="t",x.type="radio",Di.radioValue="t"===x.value}();var oc,or=U.expr.attrHandle;U.fn.extend({attr:function(x,D){return Fe(this,U.attr,x,D,arguments.length>1)},removeAttr:function(x){return this.each(function(){U.removeAttr(this,x)})}}),U.extend({attr:function(x,D,R){var V,Z,ee=x.nodeType;if(3!==ee&&8!==ee&&2!==ee)return typeof x.getAttribute>"u"?U.prop(x,D,R):((1!==ee||!U.isXMLDoc(x))&&(Z=U.attrHooks[D.toLowerCase()]||(U.expr.match.bool.test(D)?oc:void 0)),void 0!==R?null===R?void U.removeAttr(x,D):Z&&"set"in Z&&void 0!==(V=Z.set(x,R,D))?V:(x.setAttribute(D,R+""),R):Z&&"get"in Z&&null!==(V=Z.get(x,D))?V:(V=U.find.attr(x,D))??void 0)},attrHooks:{type:{set:function(x,D){if(!Di.radioValue&&"radio"===D&&ya(x,"input")){var R=x.value;return x.setAttribute("type",D),R&&(x.value=R),D}}}},removeAttr:function(x,D){var R,V=0,Z=D&&D.match(Hn);if(Z&&1===x.nodeType)for(;R=Z[V++];)x.removeAttribute(R)}}),oc={set:function(x,D,R){return!1===D?U.removeAttr(x,R):x.setAttribute(R,R),R}},U.each(U.expr.match.bool.source.match(/\w+/g),function(x,D){var R=or[D]||U.find.attr;or[D]=function(V,Z,ee){var ae,ye,ve=Z.toLowerCase();return ee||(ye=or[ve],or[ve]=ae,ae=null!=R(V,Z,ee)?ve:null,or[ve]=ye),ae}});var Du=/^(?:input|select|textarea|button)$/i,Br=/^(?:a|area)$/i;function da(x){return(x.match(Hn)||[]).join(" ")}function ua(x){return x.getAttribute&&x.getAttribute("class")||""}function lc(x){return Array.isArray(x)?x:"string"==typeof x&&x.match(Hn)||[]}U.fn.extend({prop:function(x,D){return Fe(this,U.prop,x,D,arguments.length>1)},removeProp:function(x){return this.each(function(){delete this[U.propFix[x]||x]})}}),U.extend({prop:function(x,D,R){var V,Z,ee=x.nodeType;if(3!==ee&&8!==ee&&2!==ee)return(1!==ee||!U.isXMLDoc(x))&&(Z=U.propHooks[D=U.propFix[D]||D]),void 0!==R?Z&&"set"in Z&&void 0!==(V=Z.set(x,R,D))?V:x[D]=R:Z&&"get"in Z&&null!==(V=Z.get(x,D))?V:x[D]},propHooks:{tabIndex:{get:function(x){var D=U.find.attr(x,"tabindex");return D?parseInt(D,10):Du.test(x.nodeName)||Br.test(x.nodeName)&&x.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Di.optSelected||(U.propHooks.selected={get:function(x){return null},set:function(x){}}),U.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){U.propFix[this.toLowerCase()]=this}),U.fn.extend({addClass:function(x){var D,R,V,Z,ee,ae;return ei(x)?this.each(function(ye){U(this).addClass(x.call(this,ye,ua(this)))}):(D=lc(x)).length?this.each(function(){if(V=ua(this),R=1===this.nodeType&&" "+da(V)+" "){for(ee=0;ee<D.length;ee++)R.indexOf(" "+(Z=D[ee])+" ")<0&&(R+=Z+" ");ae=da(R),V!==ae&&this.setAttribute("class",ae)}}):this},removeClass:function(x){var D,R,V,Z,ee,ae;return ei(x)?this.each(function(ye){U(this).removeClass(x.call(this,ye,ua(this)))}):arguments.length?(D=lc(x)).length?this.each(function(){if(V=ua(this),R=1===this.nodeType&&" "+da(V)+" "){for(ee=0;ee<D.length;ee++)for(Z=D[ee];R.indexOf(" "+Z+" ")>-1;)R=R.replace(" "+Z+" "," ");ae=da(R),V!==ae&&this.setAttribute("class",ae)}}):this:this.attr("class","")},toggleClass:function(x,D){var R,V,Z,ee,ae=typeof x,ye="string"===ae||Array.isArray(x);return ei(x)?this.each(function(ve){U(this).toggleClass(x.call(this,ve,ua(this),D),D)}):"boolean"==typeof D&&ye?D?this.addClass(x):this.removeClass(x):(R=lc(x),this.each(function(){if(ye)for(ee=U(this),Z=0;Z<R.length;Z++)ee.hasClass(V=R[Z])?ee.removeClass(V):ee.addClass(V);else(void 0===x||"boolean"===ae)&&((V=ua(this))&&xe.set(this,"__className__",V),this.setAttribute&&this.setAttribute("class",V||!1===x?"":xe.get(this,"__className__")||""))}))},hasClass:function(x){var D,R,V=0;for(D=" "+x+" ";R=this[V++];)if(1===R.nodeType&&(" "+da(ua(R))+" ").indexOf(D)>-1)return!0;return!1}});var Mu=/\r/g;U.fn.extend({val:function(x){var D,R,V,Z=this[0];return arguments.length?(V=ei(x),this.each(function(ee){var ae;1===this.nodeType&&(null==(ae=V?x.call(this,ee,U(this).val()):x)?ae="":"number"==typeof ae?ae+="":Array.isArray(ae)&&(ae=U.map(ae,function(ye){return null==ye?"":ye+""})),(!(D=U.valHooks[this.type]||U.valHooks[this.nodeName.toLowerCase()])||!("set"in D)||void 0===D.set(this,ae,"value"))&&(this.value=ae))})):Z?(D=U.valHooks[Z.type]||U.valHooks[Z.nodeName.toLowerCase()])&&"get"in D&&void 0!==(R=D.get(Z,"value"))?R:"string"==typeof(R=Z.value)?R.replace(Mu,""):R??"":void 0}}),U.extend({valHooks:{option:{get:function(x){return U.find.attr(x,"value")??da(U.text(x))}},select:{get:function(x){var D,R,V,Z=x.options,ee=x.selectedIndex,ae="select-one"===x.type,ye=ae?null:[],ve=ae?ee+1:Z.length;for(V=ee<0?ve:ae?ee:0;V<ve;V++)if(((R=Z[V]).selected||V===ee)&&!R.disabled&&(!R.parentNode.disabled||!ya(R.parentNode,"optgroup"))){if(D=U(R).val(),ae)return D;ye.push(D)}return ye},set:function(x,D){for(var R,V,Z=x.options,ee=U.makeArray(D),ae=Z.length;ae--;)((V=Z[ae]).selected=U.inArray(U.valHooks.option.get(V),ee)>-1)&&(R=!0);return R||(x.selectedIndex=-1),ee}}}}),U.each(["radio","checkbox"],function(){U.valHooks[this]={set:function(x,D){if(Array.isArray(D))return x.checked=U.inArray(U(x).val(),D)>-1}},Di.checkOn||(U.valHooks[this].get=function(x){return null===x.getAttribute("value")?"on":x.value})}),Di.focusin="onfocusin"in F;var fd=/^(?:focusinfocus|focusoutblur)$/,Rs=function(x){x.stopPropagation()};U.extend(U.event,{trigger:function(x,D,R,V){var Z,ee,ae,ye,ve,Me,ze,nt,Re=[R||li],Ye=lo.call(x,"type")?x.type:x,Mt=lo.call(x,"namespace")?x.namespace.split("."):[];if(ee=nt=ae=R=R||li,3!==R.nodeType&&8!==R.nodeType&&!fd.test(Ye+U.event.triggered)&&(Ye.indexOf(".")>-1&&(Mt=Ye.split("."),Ye=Mt.shift(),Mt.sort()),ve=Ye.indexOf(":")<0&&"on"+Ye,(x=x[U.expando]?x:new U.Event(Ye,"object"==typeof x&&x)).isTrigger=V?2:3,x.namespace=Mt.join("."),x.rnamespace=x.namespace?new RegExp("(^|\\.)"+Mt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,x.result=void 0,x.target||(x.target=R),D=null==D?[x]:U.makeArray(D,[x]),ze=U.event.special[Ye]||{},V||!ze.trigger||!1!==ze.trigger.apply(R,D))){if(!V&&!ze.noBubble&&!xr(R)){for(fd.test((ye=ze.delegateType||Ye)+Ye)||(ee=ee.parentNode);ee;ee=ee.parentNode)Re.push(ee),ae=ee;ae===(R.ownerDocument||li)&&Re.push(ae.defaultView||ae.parentWindow||F)}for(Z=0;(ee=Re[Z++])&&!x.isPropagationStopped();)nt=ee,x.type=Z>1?ye:ze.bindType||Ye,(Me=(xe.get(ee,"events")||Object.create(null))[x.type]&&xe.get(ee,"handle"))&&Me.apply(ee,D),(Me=ve&&ee[ve])&&Me.apply&&Dr(ee)&&(x.result=Me.apply(ee,D),!1===x.result&&x.preventDefault());return x.type=Ye,!V&&!x.isDefaultPrevented()&&(!ze._default||!1===ze._default.apply(Re.pop(),D))&&Dr(R)&&ve&&ei(R[Ye])&&!xr(R)&&((ae=R[ve])&&(R[ve]=null),U.event.triggered=Ye,x.isPropagationStopped()&&nt.addEventListener(Ye,Rs),R[Ye](),x.isPropagationStopped()&&nt.removeEventListener(Ye,Rs),U.event.triggered=void 0,ae&&(R[ve]=ae)),x.result}},simulate:function(x,D,R){var V=U.extend(new U.Event,R,{type:x,isSimulated:!0});U.event.trigger(V,null,D)}}),U.fn.extend({trigger:function(x,D){return this.each(function(){U.event.trigger(x,D,this)})},triggerHandler:function(x,D){var R=this[0];if(R)return U.event.trigger(x,D,R,!0)}}),Di.focusin||U.each({focus:"focusin",blur:"focusout"},function(x,D){var R=function(V){U.event.simulate(D,V.target,U.event.fix(V))};U.event.special[D]={setup:function(){var V=this.ownerDocument||this.document||this,Z=xe.access(V,D);Z||V.addEventListener(x,R,!0),xe.access(V,D,(Z||0)+1)},teardown:function(){var V=this.ownerDocument||this.document||this,Z=xe.access(V,D)-1;Z?xe.access(V,D,Z):(V.removeEventListener(x,R,!0),xe.remove(V,D))}}});var Os=F.location,Rr={guid:Date.now()},Or=/\?/;U.parseXML=function(x){var D,R;if(!x||"string"!=typeof x)return null;try{D=(new F.DOMParser).parseFromString(x,"text/xml")}catch{}return R=D&&D.getElementsByTagName("parsererror")[0],(!D||R)&&U.error("Invalid XML: "+(R?U.map(R.childNodes,function(V){return V.textContent}).join("\n"):x)),D};var Fr=/\[\]$/,al=/\r?\n/g,go=/^(?:submit|button|image|reset|file)$/i,ai=/^(?:input|select|textarea|keygen)/i;function cc(x,D,R,V){var Z;if(Array.isArray(D))U.each(D,function(ee,ae){R||Fr.test(x)?V(x,ae):cc(x+"["+("object"==typeof ae&&null!=ae?ee:"")+"]",ae,R,V)});else if(R||"object"!==kr(D))V(x,D);else for(Z in D)cc(x+"["+Z+"]",D[Z],R,V)}U.param=function(x,D){var R,V=[],Z=function(ee,ae){var ye=ei(ae)?ae():ae;V[V.length]=encodeURIComponent(ee)+"="+encodeURIComponent(ye??"")};if(null==x)return"";if(Array.isArray(x)||x.jquery&&!U.isPlainObject(x))U.each(x,function(){Z(this.name,this.value)});else for(R in x)cc(R,x[R],D,Z);return V.join("&")},U.fn.extend({serialize:function(){return U.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var x=U.prop(this,"elements");return x?U.makeArray(x):this}).filter(function(){var x=this.type;return this.name&&!U(this).is(":disabled")&&ai.test(this.nodeName)&&!go.test(x)&&(this.checked||!Ls.test(x))}).map(function(x,D){var R=U(this).val();return null==R?null:Array.isArray(R)?U.map(R,function(V){return{name:D.name,value:V.replace(al,"\r\n")}}):{name:D.name,value:R.replace(al,"\r\n")}}).get()}});var Iu=/%20/g,sl=/#.*$/,rl=/([?&])_=[^&]*/,Fs=/^(.*?):[ \t]*([^\r\n]*)$/gm,pd=/^(?:GET|HEAD)$/,Pu=/^\/\//,vo={},lr={},ol="*/".concat("*"),cr=li.createElement("a");function ll(x){return function(D,R){"string"!=typeof D&&(R=D,D="*");var V,Z=0,ee=D.toLowerCase().match(Hn)||[];if(ei(R))for(;V=ee[Z++];)"+"===V[0]?(V=V.slice(1)||"*",(x[V]=x[V]||[]).unshift(R)):(x[V]=x[V]||[]).push(R)}}function gd(x,D,R,V){var Z={},ee=x===lr;function ae(ye){var ve;return Z[ye]=!0,U.each(x[ye]||[],function(Me,ze){var nt=ze(D,R,V);return"string"!=typeof nt||ee||Z[nt]?ee?!(ve=nt):void 0:(D.dataTypes.unshift(nt),ae(nt),!1)}),ve}return ae(D.dataTypes[0])||!Z["*"]&&ae("*")}function mo(x,D){var R,V,Z=U.ajaxSettings.flatOptions||{};for(R in D)void 0!==D[R]&&((Z[R]?x:V||(V={}))[R]=D[R]);return V&&U.extend(!0,x,V),x}cr.href=Os.href,U.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Os.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Os.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ol,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":U.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(x,D){return D?mo(mo(x,U.ajaxSettings),D):mo(U.ajaxSettings,x)},ajaxPrefilter:ll(vo),ajaxTransport:ll(lr),ajax:function(x,D){"object"==typeof x&&(D=x,x=void 0);var R,V,Z,ee,ae,ye,ve,Me,ze,nt,Re=U.ajaxSetup({},D=D||{}),Ye=Re.context||Re,Mt=Re.context&&(Ye.nodeType||Ye.jquery)?U(Ye):U.event,Xt=U.Deferred(),Pt=U.Callbacks("once memory"),un=Re.statusCode||{},gn={},ha={},Pi="canceled",jt={readyState:0,getResponseHeader:function(vi){var Xi;if(ve){if(!ee)for(ee={};Xi=Fs.exec(Z);)ee[Xi[1].toLowerCase()+" "]=(ee[Xi[1].toLowerCase()+" "]||[]).concat(Xi[2]);Xi=ee[vi.toLowerCase()+" "]}return null==Xi?null:Xi.join(", ")},getAllResponseHeaders:function(){return ve?Z:null},setRequestHeader:function(vi,Xi){return null==ve&&(vi=ha[vi.toLowerCase()]=ha[vi.toLowerCase()]||vi,gn[vi]=Xi),this},overrideMimeType:function(vi){return null==ve&&(Re.mimeType=vi),this},statusCode:function(vi){var Xi;if(vi)if(ve)jt.always(vi[jt.status]);else for(Xi in vi)un[Xi]=[un[Xi],vi[Xi]];return this},abort:function(vi){var Xi=vi||Pi;return R&&R.abort(Xi),ia(0,Xi),this}};if(Xt.promise(jt),Re.url=((x||Re.url||Os.href)+"").replace(Pu,Os.protocol+"//"),Re.type=D.method||D.type||Re.method||Re.type,Re.dataTypes=(Re.dataType||"*").toLowerCase().match(Hn)||[""],null==Re.crossDomain){ye=li.createElement("a");try{ye.href=Re.url,ye.href=ye.href,Re.crossDomain=cr.protocol+"//"+cr.host!=ye.protocol+"//"+ye.host}catch{Re.crossDomain=!0}}if(Re.data&&Re.processData&&"string"!=typeof Re.data&&(Re.data=U.param(Re.data,Re.traditional)),gd(vo,Re,D,jt),ve)return jt;for(ze in(Me=U.event&&Re.global)&&0==U.active++&&U.event.trigger("ajaxStart"),Re.type=Re.type.toUpperCase(),Re.hasContent=!pd.test(Re.type),V=Re.url.replace(sl,""),Re.hasContent?Re.data&&Re.processData&&0===(Re.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Re.data=Re.data.replace(Iu,"+")):(nt=Re.url.slice(V.length),Re.data&&(Re.processData||"string"==typeof Re.data)&&(V+=(Or.test(V)?"&":"?")+Re.data,delete Re.data),!1===Re.cache&&(V=V.replace(rl,"$1"),nt=(Or.test(V)?"&":"?")+"_="+Rr.guid+++nt),Re.url=V+nt),Re.ifModified&&(U.lastModified[V]&&jt.setRequestHeader("If-Modified-Since",U.lastModified[V]),U.etag[V]&&jt.setRequestHeader("If-None-Match",U.etag[V])),(Re.data&&Re.hasContent&&!1!==Re.contentType||D.contentType)&&jt.setRequestHeader("Content-Type",Re.contentType),jt.setRequestHeader("Accept",Re.dataTypes[0]&&Re.accepts[Re.dataTypes[0]]?Re.accepts[Re.dataTypes[0]]+("*"!==Re.dataTypes[0]?", "+ol+"; q=0.01":""):Re.accepts["*"]),Re.headers)jt.setRequestHeader(ze,Re.headers[ze]);if(Re.beforeSend&&(!1===Re.beforeSend.call(Ye,jt,Re)||ve))return jt.abort();if(Pi="abort",Pt.add(Re.complete),jt.done(Re.success),jt.fail(Re.error),R=gd(lr,Re,D,jt)){if(jt.readyState=1,Me&&Mt.trigger("ajaxSend",[jt,Re]),ve)return jt;Re.async&&Re.timeout>0&&(ae=F.setTimeout(function(){jt.abort("timeout")},Re.timeout));try{ve=!1,R.send(gn,ia)}catch(vi){if(ve)throw vi;ia(-1,vi)}}else ia(-1,"No Transport");function ia(vi,Xi,zr,ur){var fa,hr,fr,Wn,qi,Ta=Xi;ve||(ve=!0,ae&&F.clearTimeout(ae),R=void 0,Z=ur||"",jt.readyState=vi>0?4:0,fa=vi>=200&&vi<300||304===vi,zr&&(Wn=function dc(x,D,R){for(var V,Z,ee,ae,ye=x.contents,ve=x.dataTypes;"*"===ve[0];)ve.shift(),void 0===V&&(V=x.mimeType||D.getResponseHeader("Content-Type"));if(V)for(Z in ye)if(ye[Z]&&ye[Z].test(V)){ve.unshift(Z);break}if(ve[0]in R)ee=ve[0];else{for(Z in R){if(!ve[0]||x.converters[Z+" "+ve[0]]){ee=Z;break}ae||(ae=Z)}ee=ee||ae}if(ee)return ee!==ve[0]&&ve.unshift(ee),R[ee]}(Re,jt,zr)),!fa&&U.inArray("script",Re.dataTypes)>-1&&U.inArray("json",Re.dataTypes)<0&&(Re.converters["text script"]=function(){}),Wn=function Nu(x,D,R,V){var Z,ee,ae,ye,ve,Me={},ze=x.dataTypes.slice();if(ze[1])for(ae in x.converters)Me[ae.toLowerCase()]=x.converters[ae];for(ee=ze.shift();ee;)if(x.responseFields[ee]&&(R[x.responseFields[ee]]=D),!ve&&V&&x.dataFilter&&(D=x.dataFilter(D,x.dataType)),ve=ee,ee=ze.shift())if("*"===ee)ee=ve;else if("*"!==ve&&ve!==ee){if(!(ae=Me[ve+" "+ee]||Me["* "+ee]))for(Z in Me)if((ye=Z.split(" "))[1]===ee&&(ae=Me[ve+" "+ye[0]]||Me["* "+ye[0]])){!0===ae?ae=Me[Z]:!0!==Me[Z]&&(ee=ye[0],ze.unshift(ye[1]));break}if(!0!==ae)if(ae&&x.throws)D=ae(D);else try{D=ae(D)}catch(nt){return{state:"parsererror",error:ae?nt:"No conversion from "+ve+" to "+ee}}}return{state:"success",data:D}}(Re,Wn,jt,fa),fa?(Re.ifModified&&((qi=jt.getResponseHeader("Last-Modified"))&&(U.lastModified[V]=qi),(qi=jt.getResponseHeader("etag"))&&(U.etag[V]=qi)),204===vi||"HEAD"===Re.type?Ta="nocontent":304===vi?Ta="notmodified":(Ta=Wn.state,hr=Wn.data,fa=!(fr=Wn.error))):(fr=Ta,(vi||!Ta)&&(Ta="error",vi<0&&(vi=0))),jt.status=vi,jt.statusText=(Xi||Ta)+"",fa?Xt.resolveWith(Ye,[hr,Ta,jt]):Xt.rejectWith(Ye,[jt,Ta,fr]),jt.statusCode(un),un=void 0,Me&&Mt.trigger(fa?"ajaxSuccess":"ajaxError",[jt,Re,fa?hr:fr]),Pt.fireWith(Ye,[jt,Ta]),Me&&(Mt.trigger("ajaxComplete",[jt,Re]),--U.active||U.event.trigger("ajaxStop")))}return jt},getJSON:function(x,D,R){return U.get(x,D,R,"json")},getScript:function(x,D){return U.get(x,void 0,D,"script")}}),U.each(["get","post"],function(x,D){U[D]=function(R,V,Z,ee){return ei(V)&&(ee=ee||Z,Z=V,V=void 0),U.ajax(U.extend({url:R,type:D,dataType:ee,data:V,success:Z},U.isPlainObject(R)&&R))}}),U.ajaxPrefilter(function(x){var D;for(D in x.headers)"content-type"===D.toLowerCase()&&(x.contentType=x.headers[D]||"")}),U._evalUrl=function(x,D,R){return U.ajax({url:x,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(V){U.globalEval(V,D,R)}})},U.fn.extend({wrapAll:function(x){var D;return this[0]&&(ei(x)&&(x=x.call(this[0])),D=U(x,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&D.insertBefore(this[0]),D.map(function(){for(var R=this;R.firstElementChild;)R=R.firstElementChild;return R}).append(this)),this},wrapInner:function(x){return ei(x)?this.each(function(D){U(this).wrapInner(x.call(this,D))}):this.each(function(){var D=U(this),R=D.contents();R.length?R.wrapAll(x):D.append(x)})},wrap:function(x){var D=ei(x);return this.each(function(R){U(this).wrapAll(D?x.call(this,R):x)})},unwrap:function(x){return this.parent(x).not("body").each(function(){U(this).replaceWith(this.childNodes)}),this}}),U.expr.pseudos.hidden=function(x){return!U.expr.pseudos.visible(x)},U.expr.pseudos.visible=function(x){return!!(x.offsetWidth||x.offsetHeight||x.getClientRects().length)},U.ajaxSettings.xhr=function(){try{return new F.XMLHttpRequest}catch{}};var Bu={0:200,1223:204},dr=U.ajaxSettings.xhr();Di.cors=!!dr&&"withCredentials"in dr,Di.ajax=dr=!!dr,U.ajaxTransport(function(x){var D,R;if(Di.cors||dr&&!x.crossDomain)return{send:function(V,Z){var ee,ae=x.xhr();if(ae.open(x.type,x.url,x.async,x.username,x.password),x.xhrFields)for(ee in x.xhrFields)ae[ee]=x.xhrFields[ee];for(ee in x.mimeType&&ae.overrideMimeType&&ae.overrideMimeType(x.mimeType),!x.crossDomain&&!V["X-Requested-With"]&&(V["X-Requested-With"]="XMLHttpRequest"),V)ae.setRequestHeader(ee,V[ee]);D=function(ye){return function(){D&&(D=R=ae.onload=ae.onerror=ae.onabort=ae.ontimeout=ae.onreadystatechange=null,"abort"===ye?ae.abort():"error"===ye?"number"!=typeof ae.status?Z(0,"error"):Z(ae.status,ae.statusText):Z(Bu[ae.status]||ae.status,ae.statusText,"text"!==(ae.responseType||"text")||"string"!=typeof ae.responseText?{binary:ae.response}:{text:ae.responseText},ae.getAllResponseHeaders()))}},ae.onload=D(),R=ae.onerror=ae.ontimeout=D("error"),void 0!==ae.onabort?ae.onabort=R:ae.onreadystatechange=function(){4===ae.readyState&&F.setTimeout(function(){D&&R()})},D=D("abort");try{ae.send(x.hasContent&&x.data||null)}catch(ye){if(D)throw ye}},abort:function(){D&&D()}}}),U.ajaxPrefilter(function(x){x.crossDomain&&(x.contents.script=!1)}),U.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(x){return U.globalEval(x),x}}}),U.ajaxPrefilter("script",function(x){void 0===x.cache&&(x.cache=!1),x.crossDomain&&(x.type="GET")}),U.ajaxTransport("script",function(x){var D,R;if(x.crossDomain||x.scriptAttrs)return{send:function(V,Z){D=U("<script>").attr(x.scriptAttrs||{}).prop({charset:x.scriptCharset,src:x.url}).on("load error",R=function(ee){D.remove(),R=null,ee&&Z("error"===ee.type?404:200,ee.type)}),li.head.appendChild(D[0])},abort:function(){R&&R()}}});var x,cl=[],uc=/(=)\?(?=&|$)|\?\?/;U.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var x=cl.pop()||U.expando+"_"+Rr.guid++;return this[x]=!0,x}}),U.ajaxPrefilter("json jsonp",function(x,D,R){var V,Z,ee,ae=!1!==x.jsonp&&(uc.test(x.url)?"url":"string"==typeof x.data&&0===(x.contentType||"").indexOf("application/x-www-form-urlencoded")&&uc.test(x.data)&&"data");if(ae||"jsonp"===x.dataTypes[0])return V=x.jsonpCallback=ei(x.jsonpCallback)?x.jsonpCallback():x.jsonpCallback,ae?x[ae]=x[ae].replace(uc,"$1"+V):!1!==x.jsonp&&(x.url+=(Or.test(x.url)?"&":"?")+x.jsonp+"="+V),x.converters["script json"]=function(){return ee||U.error(V+" was not called"),ee[0]},x.dataTypes[0]="json",Z=F[V],F[V]=function(){ee=arguments},R.always(function(){void 0===Z?U(F).removeProp(V):F[V]=Z,x[V]&&(x.jsonpCallback=D.jsonpCallback,cl.push(V)),ee&&ei(Z)&&Z(ee[0]),ee=Z=void 0}),"script"}),Di.createHTMLDocument=((x=li.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===x.childNodes.length),U.parseHTML=function(x,D,R){return"string"!=typeof x?[]:("boolean"==typeof D&&(R=D,D=!1),D||(Di.createHTMLDocument?((V=(D=li.implementation.createHTMLDocument("")).createElement("base")).href=li.location.href,D.head.appendChild(V)):D=li),ee=!R&&[],(Z=Zc.exec(x))?[D.createElement(Z[1])]:(Z=Mr([x],D,ee),ee&&ee.length&&U(ee).remove(),U.merge([],Z.childNodes)));var V,Z,ee},U.fn.load=function(x,D,R){var V,Z,ee,ae=this,ye=x.indexOf(" ");return ye>-1&&(V=da(x.slice(ye)),x=x.slice(0,ye)),ei(D)?(R=D,D=void 0):D&&"object"==typeof D&&(Z="POST"),ae.length>0&&U.ajax({url:x,type:Z||"GET",dataType:"html",data:D}).done(function(ve){ee=arguments,ae.html(V?U("<div>").append(U.parseHTML(ve)).find(V):ve)}).always(R&&function(ve,Me){ae.each(function(){R.apply(this,ee||[ve.responseText,Me,ve])})}),this},U.expr.pseudos.animated=function(x){return U.grep(U.timers,function(D){return x===D.elem}).length},U.offset={setOffset:function(x,D,R){var V,Z,ee,ae,ye,ve,ze=U.css(x,"position"),nt=U(x),Re={};"static"===ze&&(x.style.position="relative"),ye=nt.offset(),ee=U.css(x,"top"),ve=U.css(x,"left"),("absolute"===ze||"fixed"===ze)&&(ee+ve).indexOf("auto")>-1?(ae=(V=nt.position()).top,Z=V.left):(ae=parseFloat(ee)||0,Z=parseFloat(ve)||0),ei(D)&&(D=D.call(x,R,U.extend({},ye))),null!=D.top&&(Re.top=D.top-ye.top+ae),null!=D.left&&(Re.left=D.left-ye.left+Z),"using"in D?D.using.call(x,Re):nt.css(Re)}},U.fn.extend({offset:function(x){if(arguments.length)return void 0===x?this:this.each(function(Z){U.offset.setOffset(this,x,Z)});var D,R,V=this[0];return V?V.getClientRects().length?{top:(D=V.getBoundingClientRect()).top+(R=V.ownerDocument.defaultView).pageYOffset,left:D.left+R.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var x,D,R,V=this[0],Z={top:0,left:0};if("fixed"===U.css(V,"position"))D=V.getBoundingClientRect();else{for(D=this.offset(),R=V.ownerDocument,x=V.offsetParent||R.documentElement;x&&(x===R.body||x===R.documentElement)&&"static"===U.css(x,"position");)x=x.parentNode;x&&x!==V&&1===x.nodeType&&((Z=U(x).offset()).top+=U.css(x,"borderTopWidth",!0),Z.left+=U.css(x,"borderLeftWidth",!0))}return{top:D.top-Z.top-U.css(V,"marginTop",!0),left:D.left-Z.left-U.css(V,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var x=this.offsetParent;x&&"static"===U.css(x,"position");)x=x.offsetParent;return x||Qa})}}),U.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(x,D){var R="pageYOffset"===D;U.fn[x]=function(V){return Fe(this,function(Z,ee,ae){var ye;if(xr(Z)?ye=Z:9===Z.nodeType&&(ye=Z.defaultView),void 0===ae)return ye?ye[D]:Z[ee];ye?ye.scrollTo(R?ye.pageXOffset:ae,R?ae:ye.pageYOffset):Z[ee]=ae},x,V,arguments.length)}}),U.each(["top","left"],function(x,D){U.cssHooks[D]=sd(Di.pixelPosition,function(R,V){if(V)return V=Lr(R,D),Bs.test(V)?U(R).position()[D]+"px":V})}),U.each({Height:"height",Width:"width"},function(x,D){U.each({padding:"inner"+x,content:D,"":"outer"+x},function(R,V){U.fn[V]=function(Z,ee){var ae=arguments.length&&(R||"boolean"!=typeof Z),ye=R||(!0===Z||!0===ee?"margin":"border");return Fe(this,function(ve,Me,ze){var nt;return xr(ve)?0===V.indexOf("outer")?ve["inner"+x]:ve.document.documentElement["client"+x]:9===ve.nodeType?(nt=ve.documentElement,Math.max(ve.body["scroll"+x],nt["scroll"+x],ve.body["offset"+x],nt["offset"+x],nt["client"+x])):void 0===ze?U.css(ve,Me,ye):U.style(ve,Me,ze,ye)},D,ae?Z:void 0,ae)}})}),U.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(x,D){U.fn[D]=function(R){return this.on(D,R)}}),U.fn.extend({bind:function(x,D,R){return this.on(x,null,D,R)},unbind:function(x,D){return this.off(x,null,D)},delegate:function(x,D,R,V){return this.on(D,x,R,V)},undelegate:function(x,D,R){return 1===arguments.length?this.off(x,"**"):this.off(D,x||"**",R)},hover:function(x,D){return this.mouseenter(x).mouseleave(D||x)}}),U.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(x,D){U.fn[D]=function(R,V){return arguments.length>0?this.on(D,null,R,V):this.trigger(D)}});var hc=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;U.proxy=function(x,D){var R,V,Z;if("string"==typeof D&&(R=x[D],D=x,x=R),ei(x))return V=Ma.call(arguments,2),Z=function(){return x.apply(D||this,V.concat(Ma.call(arguments)))},Z.guid=x.guid=x.guid||U.guid++,Z},U.holdReady=function(x){x?U.readyWait++:U.ready(!0)},U.isArray=Array.isArray,U.parseJSON=JSON.parse,U.nodeName=ya,U.isFunction=ei,U.isWindow=xr,U.camelCase=Xn,U.type=kr,U.now=Date.now,U.isNumeric=function(x){var D=U.type(x);return("number"===D||"string"===D)&&!isNaN(x-parseFloat(x))},U.trim=function(x){return null==x?"":(x+"").replace(hc,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return U});var bt=F.jQuery,Ru=F.$;return U.noConflict=function(x){return F.$===U&&(F.$=Ru),x&&F.jQuery===U&&(F.jQuery=bt),U},typeof gs>"u"&&(F.jQuery=F.$=U),U}),function(F,gs){"object"==typeof exports&&typeof module<"u"?gs(exports):"function"==typeof define&&define.amd?define(["exports"],gs):gs((F=typeof globalThis<"u"?globalThis:F||self).d3=F.d3||{})}(this,function(F){"use strict";function pi(r,c){return null==r||null==c?NaN:r<c?-1:r>c?1:r>=c?0:NaN}function Ul(r,c){return null==r||null==c?NaN:c<r?-1:c>r?1:c>=r?0:NaN}function Ma(r){let c,u,f;function g(C,E,S=0,I=C.length){if(S<I){if(0!==c(E,E))return I;do{const N=S+I>>>1;u(C[N],E)<0?S=N+1:I=N}while(S<I)}return S}return 2!==r.length?(c=pi,u=(C,E)=>pi(r(C),E),f=(C,E)=>r(C)-E):(c=r===pi||r===Ul?r:Kc,u=r,f=r),{left:g,center:function y(C,E,S=0,I=C.length){const N=g(C,E,S,I-1);return N>S&&f(C[N-1],E)>-f(C[N],E)?N-1:N},right:function m(C,E,S=0,I=C.length){if(S<I){if(0!==c(E,E))return I;do{const N=S+I>>>1;u(C[N],E)<=0?S=N+1:I=N}while(S<I)}return S}}}function Kc(){return 0}function Ko(r){return null===r?NaN:+r}function*ro(r,c){if(void 0===c)for(let u of r)null!=u&&(u=+u)>=u&&(yield u);else{let u=-1;for(let f of r)null!=(f=c(f,++u,r))&&(f=+f)>=f&&(yield f)}}const oo=Ma(pi),Gl=oo.right,lo=oo.left,Xc=Ma(Ko).center;var ir=Gl;const ei=li(Xo),xr=li(function kr(r){const c=Xo(r);return(u,f,g,m,y)=>{c(u,f,0+(g<<=2),0+(m<<=2),y<<=2),c(u,f,g+1,m+1,y),c(u,f,g+2,m+2,y),c(u,f,g+3,m+3,y)}});function li(r){return function(c,u,f=u){if(!((u=+u)>=0))throw new RangeError("invalid rx");if(!((f=+f)>=0))throw new RangeError("invalid ry");let{data:g,width:m,height:y}=c;if(!((m=Math.floor(m))>=0))throw new RangeError("invalid width");if(!((y=Math.floor(void 0!==y?y:g.length/m))>=0))throw new RangeError("invalid height");if(!m||!y||!u&&!f)return c;const C=u&&r(u),E=f&&r(f),S=g.slice();return C&&E?(Tr(C,S,g,m,y),Tr(C,g,S,m,y),Tr(C,S,g,m,y),nr(E,g,S,m,y),nr(E,S,g,m,y),nr(E,g,S,m,y)):C?(Tr(C,g,S,m,y),Tr(C,S,g,m,y),Tr(C,g,S,m,y)):E&&(nr(E,g,S,m,y),nr(E,S,g,m,y),nr(E,g,S,m,y)),c}}function Tr(r,c,u,f,g){for(let m=0,y=f*g;m<y;)r(c,u,m,m+=f,1)}function nr(r,c,u,f,g){for(let m=0,y=f*g;m<f;++m)r(c,u,m,m+y,f)}function Xo(r){const c=Math.floor(r);if(c===r)return function U(r){const c=2*r+1;return(u,f,g,m,y)=>{if(!((m-=y)>=g))return;let C=r*f[g];const E=y*r;for(let S=g,I=g+E;S<I;S+=y)C+=f[Math.min(m,S)];for(let S=g,I=m;S<=I;S+=y)C+=f[Math.min(m,S+E)],u[S]=C/c,C-=f[Math.max(g,S-E)]}}(r);const u=r-c,f=2*r+1;return(g,m,y,C,E)=>{if(!((C-=E)>=y))return;let S=c*m[y];const I=E*c,N=I+E;for(let P=y,W=y+I;P<W;P+=E)S+=m[Math.min(C,P)];for(let P=y,W=C;P<=W;P+=E)S+=m[Math.min(C,P+I)],g[P]=(S+u*(m[Math.max(y,P-N)]+m[Math.min(C,P+N)]))/f,S-=m[Math.max(y,P-I)]}}function Sr(r,c){let u=0;if(void 0===c)for(let f of r)null!=f&&(f=+f)>=f&&++u;else{let f=-1;for(let g of r)null!=(g=c(g,++f,r))&&(g=+g)>=g&&++u}return u}function ar(r){return 0|r.length}function Ar(r){return!(r>0)}function Qc(r){return"object"!=typeof r||"length"in r?r:Array.from(r)}function co(r,c){let f,u=0,g=0,m=0;if(void 0===c)for(let y of r)null!=y&&(y=+y)>=y&&(f=y-g,g+=f/++u,m+=f*(y-g));else{let y=-1;for(let C of r)null!=(C=c(C,++y,r))&&(C=+C)>=C&&(f=C-g,g+=f/++u,m+=f*(C-g))}if(u>1)return m/(u-1)}function Qo(r,c){const u=co(r,c);return u&&Math.sqrt(u)}function ca(r,c){let u,f;if(void 0===c)for(const g of r)null!=g&&(void 0===u?g>=g&&(u=f=g):(u>g&&(u=g),f<g&&(f=g)));else{let g=-1;for(let m of r)null!=(m=c(m,++g,r))&&(void 0===u?m>=m&&(u=f=m):(u>m&&(u=m),f<m&&(f=m)))}return[u,f]}class bn{constructor(){this._partials=new Float64Array(32),this._n=0}add(c){const u=this._partials;let f=0;for(let g=0;g<this._n&&g<32;g++){const m=u[g],y=c+m,C=Math.abs(c)<Math.abs(m)?c-(y-m):m-(y-c);C&&(u[f++]=C),c=y}return u[f]=c,this._n=f+1,this}valueOf(){const c=this._partials;let f,g,m,u=this._n,y=0;if(u>0){for(y=c[--u];u>0&&(f=y,g=c[--u],y=f+g,m=g-(y-f),!m););u>0&&(m<0&&c[u-1]<0||m>0&&c[u-1]>0)&&(g=2*m,f=y+g,g==f-y&&(y=f))}return y}}class ea extends Map{constructor(c,u=jl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:u}}),null!=c)for(const[f,g]of c)this.set(f,g)}get(c){return super.get(Yl(this,c))}has(c){return super.has(Yl(this,c))}set(c,u){return super.set(Mi(this,c),u)}delete(c){return super.delete(uo(this,c))}}class Hn extends Set{constructor(c,u=jl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:u}}),null!=c)for(const f of c)this.add(f)}has(c){return super.has(Yl(this,c))}add(c){return super.add(Mi(this,c))}delete(c){return super.delete(uo(this,c))}}function Yl({_intern:r,_key:c},u){const f=c(u);return r.has(f)?r.get(f):u}function Mi({_intern:r,_key:c},u){const f=c(u);return r.has(f)?r.get(f):(r.set(f,u),u)}function uo({_intern:r,_key:c},u){const f=c(u);return r.has(f)&&(u=r.get(f),r.delete(f)),u}function jl(r){return null!==r&&"object"==typeof r?r.valueOf():r}function Er(r){return r}function $r(r,...c){return cn(r,Er,Er,c)}function ho(r,...c){return cn(r,Array.from,Er,c)}function Fe(r,c){for(let u=1,f=c.length;u<f;++u)r=r.flatMap(g=>g.pop().map(([m,y])=>[...g,m,y]));return r}function ed(r,c,...u){return cn(r,Er,c,u)}function Xn(r,c,...u){return cn(r,Array.from,c,u)}function xe(r){if(1!==r.length)throw new Error("duplicate key");return r[0]}function cn(r,c,u,f){return function g(m,y){if(y>=f.length)return u(m);const C=new ea,E=f[y++];let S=-1;for(const I of m){const N=E(I,++S,m),P=C.get(N);P?P.push(I):C.set(N,[I])}for(const[I,N]of C)C.set(I,g(N,y));return c(C)}(r,0)}function Kl(r,c){return Array.from(c,u=>r[u])}function Jo(r,...c){if("function"!=typeof r[Symbol.iterator])throw new TypeError("values is not iterable");r=Array.from(r);let[u]=c;if(u&&2!==u.length||c.length>1){const f=Uint32Array.from(r,(g,m)=>m);return c.length>1?(c=c.map(g=>r.map(g)),f.sort((g,m)=>{for(const y of c){const C=Is(y[g],y[m]);if(C)return C}})):(u=r.map(u),f.sort((g,m)=>Is(u[g],u[m]))),Kl(r,f)}return r.sort(rr(u))}function rr(r=pi){if(r===pi)return Is;if("function"!=typeof r)throw new TypeError("compare is not a function");return(c,u)=>{const f=r(c,u);return f||0===f?f:(0===r(u,u))-(0===r(c,c))}}function Is(r,c){return(null==r||!(r>=r))-(null==c||!(c>=c))||(r<c?-1:r>c?1:0)}var Xa=Array.prototype.slice;function Qa(r){return()=>r}const _n=Math.sqrt(50),Xl=Math.sqrt(10),st=Math.sqrt(2);function qn(r,c,u){const f=(c-r)/Math.max(0,u),g=Math.floor(Math.log10(f)),m=f/Math.pow(10,g),y=m>=_n?10:m>=Xl?5:m>=st?2:1;let C,E,S;return g<0?(S=Math.pow(10,-g)/y,C=Math.round(r*S),E=Math.round(c*S),C/S<r&&++C,E/S>c&&--E,S=-S):(S=Math.pow(10,g)*y,C=Math.round(r/S),E=Math.round(c/S),C*S<r&&++C,E*S>c&&--E),E<C&&.5<=u&&u<2?qn(r,c,2*u):[C,E,S]}function xt(r,c,u){if(!((u=+u)>0))return[];if((r=+r)==(c=+c))return[r];const f=c<r,[g,m,y]=f?qn(c,r,u):qn(r,c,u);if(!(m>=g))return[];const C=m-g+1,E=new Array(C);if(f)if(y<0)for(let S=0;S<C;++S)E[S]=(m-S)/-y;else for(let S=0;S<C;++S)E[S]=(m-S)*y;else if(y<0)for(let S=0;S<C;++S)E[S]=(g+S)/-y;else for(let S=0;S<C;++S)E[S]=(g+S)*y;return E}function vs(r,c,u){return qn(r=+r,c=+c,u=+u)[2]}function wa(r,c,u){u=+u;const f=(c=+c)<(r=+r),g=f?vs(c,r,u):vs(r,c,u);return(f?-1:1)*(g<0?1/-g:g)}function Ls(r,c,u){let f;for(;;){const g=vs(r,c,u);if(g===f||0===g||!isFinite(g))return[r,c];g>0?(r=Math.floor(r/g)*g,c=Math.ceil(c/g)*g):g<0&&(r=Math.ceil(r*g)/g,c=Math.floor(c*g)/g),f=g}}function fo(r){return Math.ceil(Math.log(Sr(r))/Math.LN2)+1}function B(){var r=Er,c=ca,u=fo;function f(g){Array.isArray(g)||(g=Array.from(g));var m,C,E,y=g.length,S=new Array(y);for(m=0;m<y;++m)S[m]=r(g[m],m,g);var I=c(S),N=I[0],P=I[1],W=u(S,N,P);if(!Array.isArray(W)){const ie=P,te=+W;if(c===ca&&([N,P]=Ls(N,P,te)),(W=xt(N,P,te))[0]<=N&&(E=vs(N,P,te)),W[W.length-1]>=P)if(ie>=P&&c===ca){const oe=vs(N,P,te);isFinite(oe)&&(oe>0?P=(Math.floor(P/oe)+1)*oe:oe<0&&(P=(Math.ceil(P*-oe)+1)/-oe))}else W.pop()}for(var K=W.length,J=0,Y=K;W[J]<=N;)++J;for(;W[Y-1]>P;)--Y;(J||Y<K)&&(W=W.slice(J,Y),K=Y-J);var ne,Q=new Array(K+1);for(m=0;m<=K;++m)(ne=Q[m]=[]).x0=m>0?W[m-1]:N,ne.x1=m<K?W[m]:P;if(isFinite(E)){if(E>0)for(m=0;m<y;++m)null!=(C=S[m])&&N<=C&&C<=P&&Q[Math.min(K,Math.floor((C-N)/E))].push(g[m]);else if(E<0)for(m=0;m<y;++m)if(null!=(C=S[m])&&N<=C&&C<=P){const ie=Math.floor((N-C)*E);Q[Math.min(K,ie+(W[ie]<=C))].push(g[m])}}else for(m=0;m<y;++m)null!=(C=S[m])&&N<=C&&C<=P&&Q[ir(W,C,0,K)].push(g[m]);return Q}return f.value=function(g){return arguments.length?(r="function"==typeof g?g:Qa(g),f):r},f.domain=function(g){return arguments.length?(c="function"==typeof g?g:Qa([g[0],g[1]]),f):c},f.thresholds=function(g){return arguments.length?(u="function"==typeof g?g:Qa(Array.isArray(g)?Xa.call(g):g),f):u},f}function Pn(r,c){let u;if(void 0===c)for(const f of r)null!=f&&(u<f||void 0===u&&f>=f)&&(u=f);else{let f=-1;for(let g of r)null!=(g=c(g,++f,r))&&(u<g||void 0===u&&g>=g)&&(u=g)}return u}function gi(r,c){let u,f=-1,g=-1;if(void 0===c)for(const m of r)++g,null!=m&&(u<m||void 0===u&&m>=m)&&(u=m,f=g);else for(let m of r)null!=(m=c(m,++g,r))&&(u<m||void 0===u&&m>=m)&&(u=m,f=g);return f}function Ps(r,c){let u;if(void 0===c)for(const f of r)null!=f&&(u>f||void 0===u&&f>=f)&&(u=f);else{let f=-1;for(let g of r)null!=(g=c(g,++f,r))&&(u>g||void 0===u&&g>=g)&&(u=g)}return u}function ms(r,c){let u,f=-1,g=-1;if(void 0===c)for(const m of r)++g,null!=m&&(u>m||void 0===u&&m>=m)&&(u=m,f=g);else for(let m of r)null!=(m=c(m,++g,r))&&(u>m||void 0===u&&m>=m)&&(u=m,f=g);return f}function Mr(r,c,u=0,f=1/0,g){if(c=Math.floor(c),u=Math.floor(Math.max(0,u)),f=Math.floor(Math.min(r.length-1,f)),!(u<=c&&c<=f))return r;for(g=void 0===g?Is:rr(g);f>u;){if(f-u>600){const E=f-u+1,S=c-u+1,I=Math.log(E),N=.5*Math.exp(2*I/3),P=.5*Math.sqrt(I*N*(E-N)/E)*(S-E/2<0?-1:1);Mr(r,c,Math.max(u,Math.floor(c-S*N/E+P)),Math.min(f,Math.floor(c+(E-S)*N/E+P)),g)}const m=r[c];let y=u,C=f;for(Ja(r,u,c),g(r[f],m)>0&&Ja(r,u,f);y<C;){for(Ja(r,y,C),++y,--C;g(r[y],m)<0;)++y;for(;g(r[C],m)>0;)--C}0===g(r[u],m)?Ja(r,u,C):(++C,Ja(r,C,f)),C<=c&&(u=C+1),c<=C&&(f=C-1)}return r}function Ja(r,c,u){const f=r[c];r[c]=r[u],r[u]=f}function Ns(r,c=pi){let u,f=!1;if(1===c.length){let g;for(const m of r){const y=c(m);(f?pi(y,g)>0:0===pi(y,y))&&(u=m,g=y,f=!0)}}else for(const g of r)(f?c(g,u)>0:0===c(g,g))&&(u=g,f=!0);return u}function Ia(r,c,u){if((f=(r=Float64Array.from(ro(r,u))).length)&&!isNaN(c=+c)){if(c<=0||f<2)return Ps(r);if(c>=1)return Pn(r);var f,g=(f-1)*c,m=Math.floor(g),y=Pn(Mr(r,m).subarray(0,m+1));return y+(Ps(r.subarray(m+1))-y)*(g-m)}}function Ir(r,c,u=Ko){if((f=r.length)&&!isNaN(c=+c)){if(c<=0||f<2)return+u(r[0],0,r);if(c>=1)return+u(r[f-1],f-1,r);var f,g=(f-1)*c,m=Math.floor(g),y=+u(r[m],m,r);return y+(+u(r[m+1],m+1,r)-y)*(g-m)}}function Li(r,c,u){if((f=(r=Float64Array.from(ro(r,u))).length)&&!isNaN(c=+c)){if(c<=0||f<2)return ms(r);if(c>=1)return gi(r);var f,g=Math.floor((f-1)*c);return Ns(Mr(Uint32Array.from(r,(C,E)=>E),g,0,f-1,(C,E)=>Is(r[C],r[E])).subarray(0,g+1),C=>r[C])}}function el(r){return Array.from(function*Jl(r){for(const c of r)yield*c}(r))}function La(r,c){return[r,c]}function ta(r,c,u){r=+r,c=+c,u=(g=arguments.length)<2?(c=r,r=0,1):g<3?1:+u;for(var f=-1,g=0|Math.max(0,Math.ceil((c-r)/u)),m=new Array(g);++f<g;)m[f]=r+f*u;return m}function tl(r,c=pi){if(1===c.length)return ms(r,c);let u,f=-1,g=-1;for(const m of r)++g,(f<0?0===c(m,m):c(m,u)<0)&&(u=m,f=g);return f}var ku=ic(Math.random);function ic(r){return function(u,f=0,g=u.length){let m=g-(f=+f);for(;m;){const y=r()*m--|0,C=u[m+f];u[m+f]=u[y+f],u[y+f]=C}return u}}function Lr(r){if(!(m=r.length))return[];for(var c=-1,u=Ps(r,sd),f=new Array(u);++c<u;)for(var m,g=-1,y=f[c]=new Array(m);++g<m;)y[g]=r[g][c];return f}function sd(r){return r.length}function Et(r){return r instanceof Hn?r:new Hn(r)}function Qn(r,c){const u=r[Symbol.iterator](),f=new Set;for(const g of c){const m=Ca(g);if(f.has(m))continue;let y,C;for(;({value:y,done:C}=u.next());){if(C)return!1;const E=Ca(y);if(f.add(E),Object.is(m,E))break}}return!0}function Ca(r){return null!==r&&"object"==typeof r?r.valueOf():r}function hd(r){return r}function rc(r){return"translate("+r+",0)"}function xa(r){return"translate(0,"+r+")"}function oc(r){return c=>+r(c)}function or(r,c){return c=Math.max(0,r.bandwidth()-2*c)/2,r.round()&&(c=Math.round(c)),u=>+r(u)+c}function Du(){return!this.__axis}function Br(r,c){var u=[],f=null,g=null,m=6,y=6,C=3,E=typeof window<"u"&&window.devicePixelRatio>1?0:.5,S=1===r||4===r?-1:1,I=4===r||2===r?"x":"y",N=1===r||3===r?rc:xa;function P(W){var K=f??(c.ticks?c.ticks.apply(c,u):c.domain()),J=g??(c.tickFormat?c.tickFormat.apply(c,u):hd),Y=Math.max(m,0)+C,Q=c.range(),ne=+Q[0]+E,ie=+Q[Q.length-1]+E,te=(c.bandwidth?or:oc)(c.copy(),E),oe=W.selection?W.selection():W,pe=oe.selectAll(".domain").data([null]),Ie=oe.selectAll(".tick").data(K,c).order(),Le=Ie.exit(),Ke=Ie.enter().append("g").attr("class","tick"),Se=Ie.select("line"),Ce=Ie.select("text");pe=pe.merge(pe.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Ie=Ie.merge(Ke),Se=Se.merge(Ke.append("line").attr("stroke","currentColor").attr(I+"2",S*m)),Ce=Ce.merge(Ke.append("text").attr("fill","currentColor").attr(I,S*Y).attr("dy",1===r?"0em":3===r?"0.71em":"0.32em")),W!==oe&&(pe=pe.transition(W),Ie=Ie.transition(W),Se=Se.transition(W),Ce=Ce.transition(W),Le=Le.transition(W).attr("opacity",1e-6).attr("transform",function(tt){return isFinite(tt=te(tt))?N(tt+E):this.getAttribute("transform")}),Ke.attr("opacity",1e-6).attr("transform",function(tt){var Pe=this.parentNode.__axis;return N((Pe&&isFinite(Pe=Pe(tt))?Pe:te(tt))+E)})),Le.remove(),pe.attr("d",4===r||2===r?y?"M"+S*y+","+ne+"H"+E+"V"+ie+"H"+S*y:"M"+E+","+ne+"V"+ie:y?"M"+ne+","+S*y+"V"+E+"H"+ie+"V"+S*y:"M"+ne+","+E+"H"+ie),Ie.attr("opacity",1).attr("transform",function(tt){return N(te(tt)+E)}),Se.attr(I+"2",S*m),Ce.attr(I,S*Y).text(J),oe.filter(Du).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===r?"start":4===r?"end":"middle"),oe.each(function(){this.__axis=te})}return P.scale=function(W){return arguments.length?(c=W,P):c},P.ticks=function(){return u=Array.from(arguments),P},P.tickArguments=function(W){return arguments.length?(u=null==W?[]:Array.from(W),P):u.slice()},P.tickValues=function(W){return arguments.length?(f=null==W?null:Array.from(W),P):f&&f.slice()},P.tickFormat=function(W){return arguments.length?(g=W,P):g},P.tickSize=function(W){return arguments.length?(m=y=+W,P):m},P.tickSizeInner=function(W){return arguments.length?(m=+W,P):m},P.tickSizeOuter=function(W){return arguments.length?(y=+W,P):y},P.tickPadding=function(W){return arguments.length?(C=+W,P):C},P.offset=function(W){return arguments.length?(E=+W,P):E},P}var fd={value:()=>{}};function Rs(){for(var f,r=0,c=arguments.length,u={};r<c;++r){if(!(f=arguments[r]+"")||f in u||/[\s.]/.test(f))throw new Error("illegal type: "+f);u[f]=[]}return new Os(u)}function Os(r){this._=r}function Or(r,c){for(var g,u=0,f=r.length;u<f;++u)if((g=r[u]).name===c)return g.value}function Fr(r,c,u){for(var f=0,g=r.length;f<g;++f)if(r[f].name===c){r[f]=fd,r=r.slice(0,f).concat(r.slice(f+1));break}return null!=u&&r.push({name:c,value:u}),r}Os.prototype=Rs.prototype={constructor:Os,on:function(r,c){var g,u=this._,f=function Rr(r,c){return r.trim().split(/^|\s+/).map(function(u){var f="",g=u.indexOf(".");if(g>=0&&(f=u.slice(g+1),u=u.slice(0,g)),u&&!c.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:f}})}(r+"",u),m=-1,y=f.length;if(!(arguments.length<2)){if(null!=c&&"function"!=typeof c)throw new Error("invalid callback: "+c);for(;++m<y;)if(g=(r=f[m]).type)u[g]=Fr(u[g],r.name,c);else if(null==c)for(g in u)u[g]=Fr(u[g],r.name,null);return this}for(;++m<y;)if((g=(r=f[m]).type)&&(g=Or(u[g],r.name)))return g},copy:function(){var r={},c=this._;for(var u in c)r[u]=c[u].slice();return new Os(r)},call:function(r,c){if((g=arguments.length-2)>0)for(var g,m,u=new Array(g),f=0;f<g;++f)u[f]=arguments[f+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(f=0,g=(m=this._[r]).length;f<g;++f)m[f].value.apply(c,u)},apply:function(r,c,u){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var f=this._[r],g=0,m=f.length;g<m;++g)f[g].value.apply(c,u)}};var al="http://www.w3.org/1999/xhtml",go={svg:"http://www.w3.org/2000/svg",xhtml:al,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ai(r){var c=r+="",u=c.indexOf(":");return u>=0&&"xmlns"!==(c=r.slice(0,u))&&(r=r.slice(u+1)),go.hasOwnProperty(c)?{space:go[c],local:r}:r}function cc(r){return function(){var c=this.ownerDocument,u=this.namespaceURI;return u===al&&c.documentElement.namespaceURI===al?c.createElement(r):c.createElementNS(u,r)}}function Iu(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function sl(r){var c=ai(r);return(c.local?Iu:cc)(c)}function rl(){}function Fs(r){return null==r?rl:function(){return this.querySelector(r)}}function pd(r){return null==r?[]:Array.isArray(r)?r:Array.from(r)}function Pu(){return[]}function vo(r){return null==r?Pu:function(){return this.querySelectorAll(r)}}function cr(r){return function(){return this.matches(r)}}function ll(r){return function(c){return c.matches(r)}}var gd=Array.prototype.find;function dc(){return this.firstElementChild}var Bu=Array.prototype.filter;function dr(){return Array.from(this.children)}function bt(r){return new Array(r.length)}function x(r,c){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=c}function R(r,c,u,f,g,m){for(var C,y=0,E=c.length,S=m.length;y<S;++y)(C=c[y])?(C.__data__=m[y],f[y]=C):u[y]=new x(r,m[y]);for(;y<E;++y)(C=c[y])&&(g[y]=C)}function V(r,c,u,f,g,m,y){var C,E,W,S=new Map,I=c.length,N=m.length,P=new Array(I);for(C=0;C<I;++C)(E=c[C])&&(P[C]=W=y.call(E,E.__data__,C,c)+"",S.has(W)?g[C]=E:S.set(W,E));for(C=0;C<N;++C)W=y.call(r,m[C],C,m)+"",(E=S.get(W))?(f[C]=E,E.__data__=m[C],S.delete(W)):u[C]=new x(r,m[C]);for(C=0;C<I;++C)(E=c[C])&&S.get(P[C])===E&&(g[C]=E)}function Z(r){return r.__data__}function ae(r){return"object"==typeof r&&"length"in r?r:Array.from(r)}function Re(r,c){return r<c?-1:r>c?1:r>=c?0:NaN}function ha(r){return function(){this.removeAttribute(r)}}function Pi(r){return function(){this.removeAttributeNS(r.space,r.local)}}function jt(r,c){return function(){this.setAttribute(r,c)}}function ia(r,c){return function(){this.setAttributeNS(r.space,r.local,c)}}function vi(r,c){return function(){var u=c.apply(this,arguments);null==u?this.removeAttribute(r):this.setAttribute(r,u)}}function Xi(r,c){return function(){var u=c.apply(this,arguments);null==u?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,u)}}function ur(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function fa(r){return function(){this.style.removeProperty(r)}}function hr(r,c,u){return function(){this.style.setProperty(r,c,u)}}function fr(r,c,u){return function(){var f=c.apply(this,arguments);null==f?this.style.removeProperty(r):this.style.setProperty(r,f,u)}}function qi(r,c){return r.style.getPropertyValue(c)||ur(r).getComputedStyle(r,null).getPropertyValue(c)}function Ta(r){return function(){delete this[r]}}function bs(r,c){return function(){this[r]=c}}function vd(r,c){return function(){var u=c.apply(this,arguments);null==u?delete this[r]:this[r]=u}}function bo(r){return r.trim().split(/^|\s+/)}function mi(r){return r.classList||new zs(r)}function zs(r){this._node=r,this._names=bo(r.getAttribute("class")||"")}function fc(r,c){for(var u=mi(r),f=-1,g=c.length;++f<g;)u.add(c[f])}function Hr(r,c){for(var u=mi(r),f=-1,g=c.length;++f<g;)u.remove(c[f])}function Ou(r){return function(){fc(this,r)}}function _r(r){return function(){Hr(this,r)}}function pc(r,c){return function(){(c.apply(this,arguments)?fc:Hr)(this,r)}}function bd(){this.textContent=""}function yo(r){return function(){this.textContent=r}}function hn(r){return function(){var c=r.apply(this,arguments);this.textContent=c??""}}function Fu(){this.innerHTML=""}function zu(r){return function(){this.innerHTML=r}}function Hu(r){return function(){var c=r.apply(this,arguments);this.innerHTML=c??""}}function _u(){this.nextSibling&&this.parentNode.appendChild(this)}function ka(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Co(){return null}function vc(){var r=this.parentNode;r&&r.removeChild(this)}function dl(){var r=this.cloneNode(!1),c=this.parentNode;return c?c.insertBefore(r,this.nextSibling):r}function pa(){var r=this.cloneNode(!0),c=this.parentNode;return c?c.insertBefore(r,this.nextSibling):r}function qu(r){return function(){var c=this.__on;if(c){for(var m,u=0,f=-1,g=c.length;u<g;++u)m=c[u],r.type&&m.type!==r.type||m.name!==r.name?c[++f]=m:this.removeEventListener(m.type,m.listener,m.options);++f?c.length=f:delete this.__on}}}function ul(r,c,u){return function(){var g,f=this.__on,m=function bc(r){return function(c){r.call(this,c,this.__data__)}}(c);if(f)for(var y=0,C=f.length;y<C;++y)if((g=f[y]).type===r.type&&g.name===r.name)return this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=m,g.options=u),void(g.value=c);this.addEventListener(r.type,m,u),g={type:r.type,name:r.name,value:c,listener:m,options:u},f?f.push(g):this.__on=[g]}}function Hs(r,c,u){var f=ur(r),g=f.CustomEvent;"function"==typeof g?g=new g(c,u):(g=f.document.createEvent("Event"),u?(g.initEvent(c,u.bubbles,u.cancelable),g.detail=u.detail):g.initEvent(c,!1,!1)),r.dispatchEvent(g)}function wd(r,c){return function(){return Hs(this,r,c)}}function Wr(r,c){return function(){return Hs(this,r,c.apply(this,arguments))}}x.prototype={constructor:x,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,c){return this._parent.insertBefore(r,c)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}},zs.prototype={add:function(r){this._names.indexOf(r)<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var c=this._names.indexOf(r);c>=0&&(this._names.splice(c,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};var xo=[null];function nn(r,c){this._groups=r,this._parents=c}function ys(){return new nn([[document.documentElement]],xo)}function ue(r){return"string"==typeof r?new nn([[document.querySelector(r)]],[document.documentElement]):new nn([[r]],xo)}nn.prototype=ys.prototype={constructor:nn,select:function Lu(r){"function"!=typeof r&&(r=Fs(r));for(var c=this._groups,u=c.length,f=new Array(u),g=0;g<u;++g)for(var E,S,m=c[g],y=m.length,C=f[g]=new Array(y),I=0;I<y;++I)(E=m[I])&&(S=r.call(E,E.__data__,I,m))&&("__data__"in E&&(S.__data__=E.__data__),C[I]=S);return new nn(f,this._parents)},selectAll:function ol(r){r="function"==typeof r?function lr(r){return function(){return pd(r.apply(this,arguments))}}(r):vo(r);for(var c=this._groups,u=c.length,f=[],g=[],m=0;m<u;++m)for(var E,y=c[m],C=y.length,S=0;S<C;++S)(E=y[S])&&(f.push(r.call(E,E.__data__,S,y)),g.push(E));return new nn(f,g)},selectChild:function Nu(r){return this.select(null==r?dc:function mo(r){return function(){return gd.call(this.children,r)}}("function"==typeof r?r:ll(r)))},selectChildren:function uc(r){return this.selectAll(null==r?dr:function cl(r){return function(){return Bu.call(this.children,r)}}("function"==typeof r?r:ll(r)))},filter:function hc(r){"function"!=typeof r&&(r=cr(r));for(var c=this._groups,u=c.length,f=new Array(u),g=0;g<u;++g)for(var E,m=c[g],y=m.length,C=f[g]=[],S=0;S<y;++S)(E=m[S])&&r.call(E,E.__data__,S,m)&&C.push(E);return new nn(f,this._parents)},data:function ee(r,c){if(!arguments.length)return Array.from(this,Z);var u=c?V:R,f=this._parents,g=this._groups;"function"!=typeof r&&(r=function D(r){return function(){return r}}(r));for(var m=g.length,y=new Array(m),C=new Array(m),E=new Array(m),S=0;S<m;++S){var I=f[S],N=g[S],P=N.length,W=ae(r.call(I,I&&I.__data__,S,f)),K=W.length,J=C[S]=new Array(K),Y=y[S]=new Array(K);u(I,N,J,Y,E[S]=new Array(P),W,c);for(var te,oe,ne=0,ie=0;ne<K;++ne)if(te=J[ne]){for(ne>=ie&&(ie=ne+1);!(oe=Y[ie])&&++ie<K;);te._next=oe||null}}return(y=new nn(y,f))._enter=C,y._exit=E,y},enter:function Ru(){return new nn(this._enter||this._groups.map(bt),this._parents)},exit:function ye(){return new nn(this._exit||this._groups.map(bt),this._parents)},join:function ve(r,c,u){var f=this.enter(),g=this,m=this.exit();return"function"==typeof r?(f=r(f))&&(f=f.selection()):f=f.append(r+""),null!=c&&(g=c(g))&&(g=g.selection()),null==u?m.remove():u(m),f&&g?f.merge(g).order():g},merge:function Me(r){for(var c=r.selection?r.selection():r,u=this._groups,f=c._groups,g=u.length,y=Math.min(g,f.length),C=new Array(g),E=0;E<y;++E)for(var W,S=u[E],I=f[E],N=S.length,P=C[E]=new Array(N),K=0;K<N;++K)(W=S[K]||I[K])&&(P[K]=W);for(;E<g;++E)C[E]=u[E];return new nn(C,this._parents)},selection:function To(){return this},order:function ze(){for(var r=this._groups,c=-1,u=r.length;++c<u;)for(var y,f=r[c],g=f.length-1,m=f[g];--g>=0;)(y=f[g])&&(m&&4^y.compareDocumentPosition(m)&&m.parentNode.insertBefore(y,m),m=y);return this},sort:function nt(r){function c(N,P){return N&&P?r(N.__data__,P.__data__):!N-!P}r||(r=Re);for(var u=this._groups,f=u.length,g=new Array(f),m=0;m<f;++m){for(var S,y=u[m],C=y.length,E=g[m]=new Array(C),I=0;I<C;++I)(S=y[I])&&(E[I]=S);E.sort(c)}return new nn(g,this._parents).order()},call:function Ye(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this},nodes:function Mt(){return Array.from(this)},node:function Xt(){for(var r=this._groups,c=0,u=r.length;c<u;++c)for(var f=r[c],g=0,m=f.length;g<m;++g){var y=f[g];if(y)return y}return null},size:function Pt(){let r=0;for(const c of this)++r;return r},empty:function un(){return!this.node()},each:function gn(r){for(var c=this._groups,u=0,f=c.length;u<f;++u)for(var C,g=c[u],m=0,y=g.length;m<y;++m)(C=g[m])&&r.call(C,C.__data__,m,g);return this},attr:function zr(r,c){var u=ai(r);if(arguments.length<2){var f=this.node();return u.local?f.getAttributeNS(u.space,u.local):f.getAttribute(u)}return this.each((null==c?u.local?Pi:ha:"function"==typeof c?u.local?Xi:vi:u.local?ia:jt)(u,c))},style:function Wn(r,c,u){return arguments.length>1?this.each((null==c?fa:"function"==typeof c?fr:hr)(r,c,u??"")):qi(this.node(),r)},property:function pr(r,c){return arguments.length>1?this.each((null==c?Ta:"function"==typeof c?vd:bs)(r,c)):this.node()[r]},classed:function md(r,c){var u=bo(r+"");if(arguments.length<2){for(var f=mi(this.node()),g=-1,m=u.length;++g<m;)if(!f.contains(u[g]))return!1;return!0}return this.each(("function"==typeof c?pc:c?Ou:_r)(u,c))},text:function bi(r){return arguments.length?this.each(null==r?bd:("function"==typeof r?hn:yo)(r)):this.node().textContent},html:function wo(r){return arguments.length?this.each(null==r?Fu:("function"==typeof r?Hu:zu)(r)):this.node().innerHTML},raise:function qr(){return this.each(_u)},lower:function Za(){return this.each(ka)},append:function yd(r){var c="function"==typeof r?r:sl(r);return this.select(function(){return this.appendChild(c.apply(this,arguments))})},insert:function gc(r,c){var u="function"==typeof r?r:sl(r),f=null==c?Co:"function"==typeof c?c:Fs(c);return this.select(function(){return this.insertBefore(u.apply(this,arguments),f.apply(this,arguments)||null)})},remove:function ii(){return this.each(vc)},clone:function tn(r){return this.select(r?pa:dl)},datum:function mc(r){return arguments.length?this.property("__data__",r):this.node().__data__},on:function ga(r,c,u){var g,y,f=function yc(r){return r.trim().split(/^|\s+/).map(function(c){var u="",f=c.indexOf(".");return f>=0&&(u=c.slice(f+1),c=c.slice(0,f)),{type:c,name:u}})}(r+""),m=f.length;if(!(arguments.length<2)){for(C=c?ul:qu,g=0;g<m;++g)this.each(C(f[g],c,u));return this}var C=this.node().__on;if(C)for(var I,E=0,S=C.length;E<S;++E)for(g=0,I=C[E];g<m;++g)if((y=f[g]).type===I.type&&y.name===I.name)return I.value},dispatch:function Vr(r,c){return this.each(("function"==typeof c?Wr:wd)(r,c))},[Symbol.iterator]:function*wc(){for(var r=this._groups,c=0,u=r.length;c<u;++c)for(var y,f=r[c],g=0,m=f.length;g<m;++g)(y=f[g])&&(yield y)}};var be=0;function ke(){return new je}function je(){this._="@"+(++be).toString(36)}function $e(r){let c;for(;c=r.sourceEvent;)r=c;return r}function Ue(r,c){if(r=$e(r),void 0===c&&(c=r.currentTarget),c){var u=c.ownerSVGElement||c;if(u.createSVGPoint){var f=u.createSVGPoint();return f.x=r.clientX,f.y=r.clientY,[(f=f.matrixTransform(c.getScreenCTM().inverse())).x,f.y]}if(c.getBoundingClientRect){var g=c.getBoundingClientRect();return[r.clientX-g.left-c.clientLeft,r.clientY-g.top-c.clientTop]}}return[r.pageX,r.pageY]}je.prototype=ke.prototype={constructor:je,get:function(r){for(var c=this._;!(c in r);)if(!(r=r.parentNode))return;return r[c]},set:function(r,c){return r[this._]=c},remove:function(r){return this._ in r&&delete r[this._]},toString:function(){return this._}};const pt={passive:!1},Bt={capture:!0,passive:!1};function Ft(r){r.stopImmediatePropagation()}function Rt(r){r.preventDefault(),r.stopImmediatePropagation()}function Vt(r){var c=r.document.documentElement,u=ue(r).on("dragstart.drag",Rt,Bt);"onselectstart"in c?u.on("selectstart.drag",Rt,Bt):(c.__noselect=c.style.MozUserSelect,c.style.MozUserSelect="none")}function Ii(r,c){var u=r.document.documentElement,f=ue(r).on("dragstart.drag",null);c&&(f.on("click.drag",Rt,Bt),setTimeout(function(){f.on("click.drag",null)},0)),"onselectstart"in u?f.on("selectstart.drag",null):(u.style.MozUserSelect=u.__noselect,delete u.__noselect)}var It=r=>()=>r;function Qi(r,{sourceEvent:c,subject:u,target:f,identifier:g,active:m,x:y,y:C,dx:E,dy:S,dispatch:I}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:c,enumerable:!0,configurable:!0},subject:{value:u,enumerable:!0,configurable:!0},target:{value:f,enumerable:!0,configurable:!0},identifier:{value:g,enumerable:!0,configurable:!0},active:{value:m,enumerable:!0,configurable:!0},x:{value:y,enumerable:!0,configurable:!0},y:{value:C,enumerable:!0,configurable:!0},dx:{value:E,enumerable:!0,configurable:!0},dy:{value:S,enumerable:!0,configurable:!0},_:{value:I}})}function Vn(r){return!r.ctrlKey&&!r.button}function Un(){return this.parentNode}function xi(r,c){return c??{x:r.x,y:r.y}}function ko(){return navigator.maxTouchPoints||"ontouchstart"in this}function dn(r,c,u){r.prototype=c.prototype=u,u.constructor=r}function So(r,c){var u=Object.create(r.prototype);for(var f in c)u[f]=c[f];return u}function ws(){}Qi.prototype.on=function(){var r=this._.on.apply(this._,arguments);return r===this._?this:r};var hl=1/.7,Ur="\\s*([+-]?\\d+)\\s*",Zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wu=/^#([0-9a-f]{3,8})$/,Vu=new RegExp(`^rgb\\(${Ur},${Ur},${Ur}\\)$`),Df=new RegExp(`^rgb\\(${Oi},${Oi},${Oi}\\)$`),Ao=new RegExp(`^rgba\\(${Ur},${Ur},${Ur},${Zt}\\)$`),Cd=new RegExp(`^rgba\\(${Oi},${Oi},${Oi},${Zt}\\)$`),_g=new RegExp(`^hsl\\(${Zt},${Oi},${Oi}\\)$`),xd=new RegExp(`^hsla\\(${Zt},${Oi},${Oi},${Zt}\\)$`),Cc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Uu(){return this.rgb().formatHex()}function Mf(){return this.rgb().formatRgb()}function Gr(r){var c,u;return r=(r+"").trim().toLowerCase(),(c=Wu.exec(r))?(u=c[1].length,c=parseInt(c[1],16),6===u?If(c):3===u?new An(c>>8&15|c>>4&240,c>>4&15|240&c,(15&c)<<4|15&c,1):8===u?fl(c>>24&255,c>>16&255,c>>8&255,(255&c)/255):4===u?fl(c>>12&15|c>>8&240,c>>8&15|c>>4&240,c>>4&15|240&c,((15&c)<<4|15&c)/255):null):(c=Vu.exec(r))?new An(c[1],c[2],c[3],1):(c=Df.exec(r))?new An(255*c[1]/100,255*c[2]/100,255*c[3]/100,1):(c=Ao.exec(r))?fl(c[1],c[2],c[3],c[4]):(c=Cd.exec(r))?fl(255*c[1]/100,255*c[2]/100,255*c[3]/100,c[4]):(c=_g.exec(r))?Pf(c[1],c[2]/100,c[3]/100,1):(c=xd.exec(r))?Pf(c[1],c[2]/100,c[3]/100,c[4]):Cc.hasOwnProperty(r)?If(Cc[r]):"transparent"===r?new An(NaN,NaN,NaN,0):null}function If(r){return new An(r>>16&255,r>>8&255,255&r,1)}function fl(r,c,u,f){return f<=0&&(r=c=u=NaN),new An(r,c,u,f)}function ts(r){return r instanceof ws||(r=Gr(r)),r?new An((r=r.rgb()).r,r.g,r.b,r.opacity):new An}function Eo(r,c,u,f){return 1===arguments.length?ts(r):new An(r,c,u,f??1)}function An(r,c,u,f){this.r=+r,this.g=+c,this.b=+u,this.opacity=+f}function Pa(){return`#${$o(this.r)}${$o(this.g)}${$o(this.b)}`}function Lf(){const r=pl(this.opacity);return`${1===r?"rgb(":"rgba("}${Yr(this.r)}, ${Yr(this.g)}, ${Yr(this.b)}${1===r?")":`, ${r})`}`}function pl(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Yr(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function $o(r){return((r=Yr(r))<16?"0":"")+r.toString(16)}function Pf(r,c,u,f){return f<=0?r=c=u=NaN:u<=0||u>=1?r=c=NaN:c<=0&&(r=NaN),new Cs(r,c,u,f)}function xc(r){if(r instanceof Cs)return new Cs(r.h,r.s,r.l,r.opacity);if(r instanceof ws||(r=Gr(r)),!r)return new Cs;if(r instanceof Cs)return r;var c=(r=r.rgb()).r/255,u=r.g/255,f=r.b/255,g=Math.min(c,u,f),m=Math.max(c,u,f),y=NaN,C=m-g,E=(m+g)/2;return C?(y=c===m?(u-f)/C+6*(u<f):u===m?(f-c)/C+2:(c-u)/C+4,C/=E<.5?m+g:2-m-g,y*=60):C=E>0&&E<1?0:y,new Cs(y,C,E,r.opacity)}function _s(r,c,u,f){return 1===arguments.length?xc(r):new Cs(r,c,u,f??1)}function Cs(r,c,u,f){this.h=+r,this.s=+c,this.l=+u,this.opacity=+f}function kd(r){return(r=(r||0)%360)<0?r+360:r}function gl(r){return Math.max(0,Math.min(1,r||0))}function Sd(r,c,u){return 255*(r<60?c+(u-c)*r/60:r<180?u:r<240?c+(u-c)*(240-r)/60:c)}dn(ws,Gr,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Uu,formatHex:Uu,formatHex8:function Td(){return this.rgb().formatHex8()},formatHsl:function Nn(){return xc(this).formatHsl()},formatRgb:Mf,toString:Mf}),dn(An,Eo,So(ws,{brighter(r){return r=null==r?hl:Math.pow(hl,r),new An(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=null==r?.7:Math.pow(.7,r),new An(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new An(Yr(this.r),Yr(this.g),Yr(this.b),pl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pa,formatHex:Pa,formatHex8:function qg(){return`#${$o(this.r)}${$o(this.g)}${$o(this.b)}${$o(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Lf,toString:Lf})),dn(Cs,_s,So(ws,{brighter(r){return r=null==r?hl:Math.pow(hl,r),new Cs(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=null==r?.7:Math.pow(.7,r),new Cs(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+360*(this.h<0),c=isNaN(r)||isNaN(this.s)?0:this.s,u=this.l,f=u+(u<.5?u:1-u)*c,g=2*u-f;return new An(Sd(r>=240?r-240:r+120,g,f),Sd(r,g,f),Sd(r<120?r+240:r-120,g,f),this.opacity)},clamp(){return new Cs(kd(this.h),gl(this.s),gl(this.l),pl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=pl(this.opacity);return`${1===r?"hsl(":"hsla("}${kd(this.h)}, ${100*gl(this.s)}%, ${100*gl(this.l)}%${1===r?")":`, ${r})`}`}}));const Do=Math.PI/180,vl=180/Math.PI,Nf=.96422,ml=1,Bn=.82521,Bf=4/29,vr=6/29,Rf=3*vr*vr,an=vr*vr*vr;function Of(r){if(r instanceof is)return new is(r.l,r.a,r.b,r.opacity);if(r instanceof xs)return Dd(r);r instanceof An||(r=ts(r));var m,y,c=Tc(r.r),u=Tc(r.g),f=Tc(r.b),g=Ed((.2225045*c+.7168786*u+.0606169*f)/ml);return c===u&&u===f?m=y=g:(m=Ed((.4360747*c+.3850649*u+.1430804*f)/Nf),y=Ed((.0139322*c+.0971045*u+.7141733*f)/Bn)),new is(116*g-16,500*(m-g),200*(g-y),r.opacity)}function bl(r,c,u,f){return 1===arguments.length?Of(r):new is(r,c,u,f??1)}function is(r,c,u,f){this.l=+r,this.a=+c,this.b=+u,this.opacity=+f}function Ed(r){return r>an?Math.pow(r,1/3):r/Rf+Bf}function Sa(r){return r>vr?r*r*r:Rf*(r-Bf)}function Yu(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function Tc(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function ju(r){if(r instanceof xs)return new xs(r.h,r.c,r.l,r.opacity);if(r instanceof is||(r=Of(r)),0===r.a&&0===r.b)return new xs(NaN,0<r.l&&r.l<100?0:NaN,r.l,r.opacity);var c=Math.atan2(r.b,r.a)*vl;return new xs(c<0?c+360:c,Math.sqrt(r.a*r.a+r.b*r.b),r.l,r.opacity)}function $d(r,c,u,f){return 1===arguments.length?ju(r):new xs(r,c,u,f??1)}function xs(r,c,u,f){this.h=+r,this.c=+c,this.l=+u,this.opacity=+f}function Dd(r){if(isNaN(r.h))return new is(r.l,0,0,r.opacity);var c=r.h*Do;return new is(r.l,Math.cos(c)*r.c,Math.sin(c)*r.c,r.opacity)}dn(is,bl,So(ws,{brighter(r){return new is(this.l+18*(r??1),this.a,this.b,this.opacity)},darker(r){return new is(this.l-18*(r??1),this.a,this.b,this.opacity)},rgb(){var r=(this.l+16)/116,c=isNaN(this.a)?r:r+this.a/500,u=isNaN(this.b)?r:r-this.b/200;return new An(Yu(3.1338561*(c=Nf*Sa(c))-1.6168667*(r=ml*Sa(r))-.4906146*(u=Bn*Sa(u))),Yu(-.9787684*c+1.9161415*r+.033454*u),Yu(.0719453*c-.2289914*r+1.4052427*u),this.opacity)}})),dn(xs,$d,So(ws,{brighter(r){return new xs(this.h,this.c,this.l+18*(r??1),this.opacity)},darker(r){return new xs(this.h,this.c,this.l-18*(r??1),this.opacity)},rgb(){return Dd(this).rgb()}}));var Ku=1.78277,yl=-.29227,wl=-.90649,kc=1.97294,Ts=kc*wl,Id=kc*Ku,Xu=Ku*yl- -.14861*wl;function va(r,c,u,f){return 1===arguments.length?function Qu(r){if(r instanceof Mo)return new Mo(r.h,r.s,r.l,r.opacity);r instanceof An||(r=ts(r));var u=r.g/255,f=r.b/255,g=(Xu*f+Ts*(r.r/255)-Id*u)/(Xu+Ts-Id),m=f-g,y=(kc*(u-g)-yl*m)/wl,C=Math.sqrt(y*y+m*m)/(kc*g*(1-g)),E=C?Math.atan2(y,m)*vl-120:NaN;return new Mo(E<0?E+360:E,C,g,r.opacity)}(r):new Mo(r,c,u,f??1)}function Mo(r,c,u,f){this.h=+r,this.s=+c,this.l=+u,this.opacity=+f}function Io(r,c,u,f,g){var m=r*r,y=m*r;return((1-3*r+3*m-y)*c+(4-6*m+3*y)*u+(1+3*r+3*m-3*y)*f+y*g)/6}function Ju(r){var c=r.length-1;return function(u){var f=u<=0?u=0:u>=1?(u=1,c-1):Math.floor(u*c),g=r[f],m=r[f+1];return Io((u-f/c)*c,f>0?r[f-1]:2*g-m,g,m,f<c-1?r[f+2]:2*m-g)}}function Ld(r){var c=r.length;return function(u){var f=Math.floor(((u%=1)<0?++u:u)*c);return Io((u-f/c)*c,r[(f+c-1)%c],r[f%c],r[(f+1)%c],r[(f+2)%c])}}dn(Mo,va,So(ws,{brighter(r){return r=null==r?hl:Math.pow(hl,r),new Mo(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=null==r?.7:Math.pow(.7,r),new Mo(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=isNaN(this.h)?0:(this.h+120)*Do,c=+this.l,u=isNaN(this.s)?0:this.s*c*(1-c),f=Math.cos(r),g=Math.sin(r);return new An(255*(c+u*(-.14861*f+Ku*g)),255*(c+u*(yl*f+wl*g)),255*(c+u*(kc*f)),this.opacity)}}));var Cl=r=>()=>r;function Ff(r,c){return function(u){return r+u*c}}function xl(r,c){var u=c-r;return u?Ff(r,u>180||u<-180?u-360*Math.round(u/360):u):Cl(isNaN(r)?c:r)}function Wi(r,c){var u=c-r;return u?Ff(r,u):Cl(isNaN(r)?c:r)}var ks=function r(c){var u=function Vg(r){return 1==(r=+r)?Wi:function(c,u){return u-c?function Pd(r,c,u){return r=Math.pow(r,u),c=Math.pow(c,u)-r,u=1/u,function(f){return Math.pow(r+f*c,u)}}(c,u,r):Cl(isNaN(c)?u:c)}}(c);function f(g,m){var y=u((g=Eo(g)).r,(m=Eo(m)).r),C=u(g.g,m.g),E=u(g.b,m.b),S=Wi(g.opacity,m.opacity);return function(I){return g.r=y(I),g.g=C(I),g.b=E(I),g.opacity=S(I),g+""}}return f.gamma=r,f}(1);function Zu(r){return function(c){var y,C,u=c.length,f=new Array(u),g=new Array(u),m=new Array(u);for(y=0;y<u;++y)C=Eo(c[y]),f[y]=C.r||0,g[y]=C.g||0,m[y]=C.b||0;return f=r(f),g=r(g),m=r(m),C.opacity=1,function(E){return C.r=f(E),C.g=g(E),C.b=m(E),C+""}}}var Nd=Zu(Ju),na=Zu(Ld);function Bd(r,c){c||(c=[]);var g,u=r?Math.min(c.length,r.length):0,f=c.slice();return function(m){for(g=0;g<u;++g)f[g]=r[g]*(1-m)+c[g]*m;return f}}function Rd(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Tl(r,c){var y,u=c?c.length:0,f=r?Math.min(u,r.length):0,g=new Array(f),m=new Array(u);for(y=0;y<f;++y)g[y]=$t(r[y],c[y]);for(;y<u;++y)m[y]=c[y];return function(C){for(y=0;y<f;++y)m[y]=g[y](C);return m}}function Sc(r,c){var u=new Date;return r=+r,c=+c,function(f){return u.setTime(r*(1-f)+c*f),u}}function Na(r,c){return r=+r,c=+c,function(u){return r*(1-u)+c*u}}function Od(r,c){var g,u={},f={};for(g in(null===r||"object"!=typeof r)&&(r={}),(null===c||"object"!=typeof c)&&(c={}),c)g in r?u[g]=$t(r[g],c[g]):f[g]=c[g];return function(m){for(g in u)f[g]=u[g](m);return f}}var Fd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zd=new RegExp(Fd.source,"g");function Hd(r,c){var f,g,m,u=Fd.lastIndex=zd.lastIndex=0,y=-1,C=[],E=[];for(r+="",c+="";(f=Fd.exec(r))&&(g=zd.exec(c));)(m=g.index)>u&&(m=c.slice(u,m),C[y]?C[y]+=m:C[++y]=m),(f=f[0])===(g=g[0])?C[y]?C[y]+=g:C[++y]=g:(C[++y]=null,E.push({i:y,x:Na(f,g)})),u=zd.lastIndex;return u<c.length&&(m=c.slice(u),C[y]?C[y]+=m:C[++y]=m),C.length<2?E[0]?function zf(r){return function(c){return r(c)+""}}(E[0].x):function kl(r){return function(){return r}}(c):(c=E.length,function(S){for(var N,I=0;I<c;++I)C[(N=E[I]).i]=N.x(S);return C.join("")})}function $t(r,c){var f,u=typeof c;return null==c||"boolean"===u?Cl(c):("number"===u?Na:"string"===u?(f=Gr(c))?(c=f,ks):Hd:c instanceof Gr?ks:c instanceof Date?Sc:Rd(c)?Bd:Array.isArray(c)?Tl:"function"!=typeof c.valueOf&&"function"!=typeof c.toString||isNaN(c)?Od:Na)(r,c)}function Sl(r,c){return r=+r,c=+c,function(u){return Math.round(r*(1-u)+c*u)}}var Ac,eh=180/Math.PI,_d={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qd(r,c,u,f,g,m){var y,C,E;return(y=Math.sqrt(r*r+c*c))&&(r/=y,c/=y),(E=r*u+c*f)&&(u-=r*E,f-=c*E),(C=Math.sqrt(u*u+f*f))&&(u/=C,f/=C,E/=C),r*f<c*u&&(r=-r,c=-c,E=-E,y=-y),{translateX:g,translateY:m,rotate:Math.atan2(c,r)*eh,skewX:Math.atan(E)*eh,scaleX:y,scaleY:C}}function Ec(r,c,u,f){function g(S){return S.length?S.pop()+" ":""}return function(S,I){var N=[],P=[];return S=r(S),I=r(I),function m(S,I,N,P,W,K){if(S!==N||I!==P){var J=W.push("translate(",null,c,null,u);K.push({i:J-4,x:Na(S,N)},{i:J-2,x:Na(I,P)})}else(N||P)&&W.push("translate("+N+c+P+u)}(S.translateX,S.translateY,I.translateX,I.translateY,N,P),function y(S,I,N,P){S!==I?(S-I>180?I+=360:I-S>180&&(S+=360),P.push({i:N.push(g(N)+"rotate(",null,f)-2,x:Na(S,I)})):I&&N.push(g(N)+"rotate("+I+f)}(S.rotate,I.rotate,N,P),function C(S,I,N,P){S!==I?P.push({i:N.push(g(N)+"skewX(",null,f)-2,x:Na(S,I)}):I&&N.push(g(N)+"skewX("+I+f)}(S.skewX,I.skewX,N,P),function E(S,I,N,P,W,K){if(S!==N||I!==P){var J=W.push(g(W)+"scale(",null,",",null,")");K.push({i:J-4,x:Na(S,N)},{i:J-2,x:Na(I,P)})}else(1!==N||1!==P)&&W.push(g(W)+"scale("+N+","+P+")")}(S.scaleX,S.scaleY,I.scaleX,I.scaleY,N,P),S=I=null,function(W){for(var Y,K=-1,J=P.length;++K<J;)N[(Y=P[K]).i]=Y.x(W);return N.join("")}}}var ih=Ec(function qf(r){const c=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(r+"");return c.isIdentity?_d:qd(c.a,c.b,c.c,c.d,c.e,c.f)},"px, ","px)","deg)"),nh=Ec(function th(r){return null!=r&&(Ac||(Ac=document.createElementNS("http://www.w3.org/2000/svg","g")),Ac.setAttribute("transform",r),r=Ac.transform.baseVal.consolidate())?qd((r=r.matrix).a,r.b,r.c,r.d,r.e,r.f):_d},", ",")",")");function ns(r){return((r=Math.exp(r))+1/r)/2}var Wd=function r(c,u,f){function g(m,y){var Y,Q,C=m[0],E=m[1],S=m[2],P=y[2],W=y[0]-C,K=y[1]-E,J=W*W+K*K;if(J<1e-12)Q=Math.log(P/S)/c,Y=function(Ie){return[C+Ie*W,E+Ie*K,S*Math.exp(c*Ie*Q)]};else{var ne=Math.sqrt(J),ie=(P*P-S*S+f*J)/(2*S*u*ne),te=(P*P-S*S-f*J)/(2*P*u*ne),oe=Math.log(Math.sqrt(ie*ie+1)-ie),pe=Math.log(Math.sqrt(te*te+1)-te);Q=(pe-oe)/c,Y=function(Ie){var Le=Ie*Q,Ke=ns(oe),Se=S/(u*ne)*(Ke*function Gg(r){return((r=Math.exp(2*r))-1)/(r+1)}(c*Le+oe)-function Ug(r){return((r=Math.exp(r))-1/r)/2}(oe));return[C+Se*W,E+Se*K,S*Ke/ns(c*Le+oe)]}}return Y.duration=1e3*Q*c/Math.SQRT2,Y}return g.rho=function(m){var y=Math.max(.001,+m),C=y*y;return r(y,C,C*C)},g}(Math.SQRT2,2,4);function Vd(r){return function(c,u){var f=r((c=_s(c)).h,(u=_s(u)).h),g=Wi(c.s,u.s),m=Wi(c.l,u.l),y=Wi(c.opacity,u.opacity);return function(C){return c.h=f(C),c.s=g(C),c.l=m(C),c.opacity=y(C),c+""}}}var Yg=Vd(xl),sh=Vd(Wi);function oh(r){return function(c,u){var f=r((c=$d(c)).h,(u=$d(u)).h),g=Wi(c.c,u.c),m=Wi(c.l,u.l),y=Wi(c.opacity,u.opacity);return function(C){return c.h=f(C),c.c=g(C),c.l=m(C),c.opacity=y(C),c+""}}}var lh=oh(xl),jr=oh(Wi);function Wf(r){return function c(u){function f(g,m){var y=r((g=va(g)).h,(m=va(m)).h),C=Wi(g.s,m.s),E=Wi(g.l,m.l),S=Wi(g.opacity,m.opacity);return function(I){return g.h=y(I),g.s=C(I),g.l=E(Math.pow(I,u)),g.opacity=S(I),g+""}}return u=+u,f.gamma=c,f}(1)}var Vf=Wf(xl),Lo=Wf(Wi);function ch(r,c){void 0===c&&(c=r,r=$t);for(var u=0,f=c.length-1,g=c[0],m=new Array(f<0?0:f);u<f;)m[u]=r(g,g=c[++u]);return function(y){var C=Math.max(0,Math.min(f-1,Math.floor(y*=f)));return m[C](y-C)}}var El,Bo,Al=0,Po=0,No=0,Uf=1e3,$c=0,Kr=0,Ud=0,Dc="object"==typeof performance&&performance.now?performance:Date,Gf="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function Mc(){return Kr||(Gf(Yf),Kr=Dc.now()+Ud)}function Yf(){Kr=0}function Xr(){this._call=this._time=this._next=null}function Gd(r,c,u){var f=new Xr;return f.restart(r,c,u),f}function $l(){Mc(),++Al;for(var c,r=El;r;)(c=Kr-r._time)>=0&&r._call.call(void 0,c),r=r._next;--Al}function uh(){Kr=($c=Dc.now())+Ud,Al=Po=0;try{$l()}finally{Al=0,function jg(){for(var r,u,c=El,f=1/0;c;)c._call?(f>c._time&&(f=c._time),r=c,c=c._next):(u=c._next,c._next=null,c=r?r._next=u:El=u);Bo=r,Ic(f)}(),Kr=0}}function Ro(){var r=Dc.now(),c=r-$c;c>Uf&&(Ud-=c,$c=r)}function Ic(r){Al||(Po&&(Po=clearTimeout(Po)),r-Kr>24?(r<1/0&&(Po=setTimeout(uh,r-Dc.now()-Ud)),No&&(No=clearInterval(No))):(No||($c=Dc.now(),No=setInterval(Ro,Uf)),Al=1,Gf(uh)))}function sn(r,c,u){var f=new Xr;return f.restart(g=>{f.stop(),r(g+c)},c=null==c?0:+c,u),f}Xr.prototype=Gd.prototype={constructor:Xr,restart:function(r,c,u){if("function"!=typeof r)throw new TypeError("callback is not a function");u=(null==u?Mc():+u)+(null==c?0:+c),!this._next&&Bo!==this&&(Bo?Bo._next=this:El=this,Bo=this),this._call=r,this._time=u,Ic()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ic())}};var jf=Rs("start","end","cancel","interrupt"),hh=[],Dl=0,ph=2,Ml=3,Yd=5,Il=6;function Ll(r,c,u,f,g,m){var y=r.__transition;if(y){if(u in y)return}else r.__transition={};!function Kf(r,c,u){var g,f=r.__transition;function y(S){var I,N,P,W;if(1!==u.state)return E();for(I in f)if((W=f[I]).name===u.name){if(W.state===Ml)return sn(y);4===W.state?(W.state=Il,W.timer.stop(),W.on.call("interrupt",r,r.__data__,W.index,W.group),delete f[I]):+I<c&&(W.state=Il,W.timer.stop(),W.on.call("cancel",r,r.__data__,W.index,W.group),delete f[I])}if(sn(function(){u.state===Ml&&(u.state=4,u.timer.restart(C,u.delay,u.time),C(S))}),u.state=ph,u.on.call("start",r,r.__data__,u.index,u.group),u.state===ph){for(u.state=Ml,g=new Array(P=u.tween.length),I=0,N=-1;I<P;++I)(W=u.tween[I].value.call(r,r.__data__,u.index,u.group))&&(g[++N]=W);g.length=N+1}}function C(S){for(var I=S<u.duration?u.ease.call(null,S/u.duration):(u.timer.restart(E),u.state=Yd,1),N=-1,P=g.length;++N<P;)g[N].call(r,I);u.state===Yd&&(u.on.call("end",r,r.__data__,u.index,u.group),E())}function E(){for(var S in u.state=Il,u.timer.stop(),delete f[c],f)return;delete r.__transition}f[c]=u,u.timer=Gd(function m(S){u.state=1,u.timer.restart(y,u.delay,u.time),u.delay<=S&&y(S-u.delay)},0,u.time)}(r,u,{name:c,index:f,group:g,on:jf,tween:hh,time:m.time,delay:m.delay,duration:m.duration,ease:m.ease,timer:null,state:Dl})}function gh(r,c){var u=Ba(r,c);if(u.state>Dl)throw new Error("too late; already scheduled");return u}function Ss(r,c){var u=Ba(r,c);if(u.state>Ml)throw new Error("too late; already running");return u}function Ba(r,c){var u=r.__transition;if(!u||!(u=u[c]))throw new Error("transition not found");return u}function Fo(r,c){var f,g,y,u=r.__transition,m=!0;if(u){for(y in c=null==c?null:c+"",u)(f=u[y]).name===c?(g=f.state>ph&&f.state<Yd,f.state=Il,f.timer.stop(),f.on.call(g?"interrupt":"cancel",r,r.__data__,f.index,f.group),delete u[y]):m=!1;m&&delete r.__transition}}function Lc(r,c){var u,f;return function(){var g=Ss(this,r),m=g.tween;if(m!==u)for(var y=0,C=(f=u=m).length;y<C;++y)if(f[y].name===c){(f=f.slice()).splice(y,1);break}g.tween=f}}function Xf(r,c,u){var f,g;if("function"!=typeof u)throw new Error;return function(){var m=Ss(this,r),y=m.tween;if(y!==f){g=(f=y).slice();for(var C={name:c,value:u},E=0,S=g.length;E<S;++E)if(g[E].name===c){g[E]=C;break}E===S&&g.push(C)}m.tween=g}}function Pc(r,c,u){var f=r._id;return r.each(function(){var g=Ss(this,f);(g.value||(g.value={}))[c]=u.apply(this,arguments)}),function(g){return Ba(g,f).value[c]}}function mh(r,c){var u;return("number"==typeof c?Na:c instanceof Gr?ks:(u=Gr(c))?(c=u,ks):Hd)(r,c)}function Jf(r){return function(){this.removeAttribute(r)}}function bh(r){return function(){this.removeAttributeNS(r.space,r.local)}}function Xg(r,c,u){var f,m,g=u+"";return function(){var y=this.getAttribute(r);return y===g?null:y===f?m:m=c(f=y,u)}}function yh(r,c,u){var f,m,g=u+"";return function(){var y=this.getAttributeNS(r.space,r.local);return y===g?null:y===f?m:m=c(f=y,u)}}function jd(r,c,u){var f,g,m;return function(){var y,E,C=u(this);return null==C?void this.removeAttribute(r):(y=this.getAttribute(r))===(E=C+"")?null:y===f&&E===g?m:(g=E,m=c(f=y,C))}}function zo(r,c,u){var f,g,m;return function(){var y,E,C=u(this);return null==C?void this.removeAttributeNS(r.space,r.local):(y=this.getAttributeNS(r.space,r.local))===(E=C+"")?null:y===f&&E===g?m:(g=E,m=c(f=y,C))}}function Ch(r,c){var u,f;function g(){var m=c.apply(this,arguments);return m!==f&&(u=(f=m)&&function Qg(r,c){return function(u){this.setAttributeNS(r.space,r.local,c.call(this,u))}}(r,m)),u}return g._value=c,g}function Pl(r,c){var u,f;function g(){var m=c.apply(this,arguments);return m!==f&&(u=(f=m)&&function wh(r,c){return function(u){this.setAttribute(r,c.call(this,u))}}(r,m)),u}return g._value=c,g}function xh(r,c){return function(){gh(this,r).delay=+c.apply(this,arguments)}}function Th(r,c){return c=+c,function(){gh(this,r).delay=c}}function tp(r,c){return function(){Ss(this,r).duration=+c.apply(this,arguments)}}function ip(r,c){return c=+c,function(){Ss(this,r).duration=c}}var Mh=ys.prototype.constructor;function Xd(r){return function(){this.style.removeProperty(r)}}var up=0;function as(r,c,u,f){this._groups=r,this._parents=c,this._name=u,this._id=f}function Qd(r){return ys().transition(r)}function Bh(){return++up}var mr=ys.prototype;function Ra(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function br(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}as.prototype=Qd.prototype={constructor:as,select:function rp(r){var c=this._name,u=this._id;"function"!=typeof r&&(r=Fs(r));for(var f=this._groups,g=f.length,m=new Array(g),y=0;y<g;++y)for(var I,N,C=f[y],E=C.length,S=m[y]=new Array(E),P=0;P<E;++P)(I=C[P])&&(N=r.call(I,I.__data__,P,C))&&("__data__"in I&&(N.__data__=I.__data__),S[P]=N,Ll(S[P],c,u,P,S,Ba(I,u)));return new as(m,this._parents,c,u)},selectAll:function tv(r){var c=this._name,u=this._id;"function"!=typeof r&&(r=vo(r));for(var f=this._groups,g=f.length,m=[],y=[],C=0;C<g;++C)for(var I,E=f[C],S=E.length,N=0;N<S;++N)if(I=E[N]){for(var W,P=r.call(I,I.__data__,N,E),K=Ba(I,u),J=0,Y=P.length;J<Y;++J)(W=P[J])&&Ll(W,c,u,J,P,K);m.push(P),y.push(I)}return new as(m,y,c,u)},selectChild:mr.selectChild,selectChildren:mr.selectChildren,filter:function Kd(r){"function"!=typeof r&&(r=cr(r));for(var c=this._groups,u=c.length,f=new Array(u),g=0;g<u;++g)for(var E,m=c[g],y=m.length,C=f[g]=[],S=0;S<y;++S)(E=m[S])&&r.call(E,E.__data__,S,m)&&C.push(E);return new as(f,this._parents,this._name,this._id)},merge:function Zg(r){if(r._id!==this._id)throw new Error;for(var c=this._groups,u=r._groups,f=c.length,m=Math.min(f,u.length),y=new Array(f),C=0;C<m;++C)for(var P,E=c[C],S=u[C],I=E.length,N=y[C]=new Array(I),W=0;W<I;++W)(P=E[W]||S[W])&&(N[W]=P);for(;C<f;++C)y[C]=c[C];return new as(y,this._parents,this._name,this._id)},selection:function Ih(){return new Mh(this._groups,this._parents)},transition:function Gn(){for(var r=this._name,c=this._id,u=Bh(),f=this._groups,g=f.length,m=0;m<g;++m)for(var E,y=f[m],C=y.length,S=0;S<C;++S)if(E=y[S]){var I=Ba(E,c);Ll(E,r,u,S,y,{time:I.time+I.delay+I.duration,delay:0,duration:I.duration,ease:I.ease})}return new as(f,this._parents,r,u)},call:mr.call,nodes:mr.nodes,node:mr.node,size:mr.size,empty:mr.empty,each:mr.each,on:function sp(r,c){var u=this._id;return arguments.length<2?Ba(this.node(),u).on.on(r):this.each(function $h(r,c,u){var f,g,m=function Eh(r){return(r+"").trim().split(/^|\s+/).every(function(c){var u=c.indexOf(".");return u>=0&&(c=c.slice(0,u)),!c||"start"===c})}(c)?gh:Ss;return function(){var y=m(this,r),C=y.on;C!==f&&(g=(f=C).copy()).on(c,u),y.on=g}}(u,r,c))},attr:function Zf(r,c){var u=ai(r),f="transform"===u?nh:mh;return this.attrTween(r,"function"==typeof c?(u.local?zo:jd)(u,f,Pc(this,"attr."+r,c)):null==c?(u.local?bh:Jf)(u):(u.local?yh:Xg)(u,f,c))},attrTween:function ep(r,c){var u="attr."+r;if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==c)return this.tween(u,null);if("function"!=typeof c)throw new Error;var f=ai(r);return this.tween(u,(f.local?Ch:Pl)(f,c))},style:function cp(r,c,u){var f="transform"==(r+="")?ih:mh;return null==c?this.styleTween(r,function op(r,c){var u,f,g;return function(){var m=qi(this,r),y=(this.style.removeProperty(r),qi(this,r));return m===y?null:m===u&&y===f?g:g=c(u=m,f=y)}}(r,f)).on("end.style."+r,Xd(r)):"function"==typeof c?this.styleTween(r,function lp(r,c,u){var f,g,m;return function(){var y=qi(this,r),C=u(this),E=C+"";return null==C&&(this.style.removeProperty(r),E=C=qi(this,r)),y===E?null:y===f&&E===g?m:(g=E,m=c(f=y,C))}}(r,f,Pc(this,"style."+r,c))).each(function Lh(r,c){var u,f,g,C,m="style."+c,y="end."+m;return function(){var E=Ss(this,r),S=E.on,I=null==E.value[m]?C||(C=Xd(c)):void 0;(S!==u||g!==I)&&(f=(u=S).copy()).on(y,g=I),E.on=f}}(this._id,r)):this.styleTween(r,function qs(r,c,u){var f,m,g=u+"";return function(){var y=qi(this,r);return y===g?null:y===f?m:m=c(f=y,u)}}(r,f,c),u).on("end.style."+r,null)},styleTween:function Ph(r,c,u){var f="style."+(r+="");if(arguments.length<2)return(f=this.tween(f))&&f._value;if(null==c)return this.tween(f,null);if("function"!=typeof c)throw new Error;return this.tween(f,function iv(r,c,u){var f,g;function m(){var y=c.apply(this,arguments);return y!==g&&(f=(g=y)&&function Ws(r,c,u){return function(f){this.style.setProperty(r,c.call(this,f),u)}}(r,y,u)),f}return m._value=c,m}(r,c,u??""))},text:function Nh(r){return this.tween("text","function"==typeof r?function nv(r){return function(){var c=r(this);this.textContent=c??""}}(Pc(this,"text",r)):function Vs(r){return function(){this.textContent=r}}(null==r?"":r+""))},textTween:function Yi(r){var c="text";if(arguments.length<1)return(c=this.tween(c))&&c._value;if(null==r)return this.tween(c,null);if("function"!=typeof r)throw new Error;return this.tween(c,function dp(r){var c,u;function f(){var g=r.apply(this,arguments);return g!==u&&(c=(u=g)&&function Nl(r){return function(c){this.textContent=r.call(this,c)}}(g)),c}return f._value=r,f}(r))},remove:function Dh(){return this.on("end.remove",function ev(r){return function(){var c=this.parentNode;for(var u in this.__transition)if(+u!==r)return;c&&c.removeChild(this)}}(this._id))},tween:function Qf(r,c){var u=this._id;if(r+="",arguments.length<2){for(var y,f=Ba(this.node(),u).tween,g=0,m=f.length;g<m;++g)if((y=f[g]).name===r)return y.value;return null}return this.each((null==c?Lc:Xf)(u,r,c))},delay:function kh(r){var c=this._id;return arguments.length?this.each(("function"==typeof r?xh:Th)(c,r)):Ba(this.node(),c).delay},duration:function Jg(r){var c=this._id;return arguments.length?this.each(("function"==typeof r?tp:ip)(c,r)):Ba(this.node(),c).duration},ease:function Ah(r){var c=this._id;return arguments.length?this.each(function Sh(r,c){if("function"!=typeof c)throw new Error;return function(){Ss(this,r).ease=c}}(c,r)):Ba(this.node(),c).ease},easeVarying:function ap(r){if("function"!=typeof r)throw new Error;return this.each(function np(r,c){return function(){var u=c.apply(this,arguments);if("function"!=typeof u)throw new Error;Ss(this,r).ease=u}}(this._id,r))},end:function aa(){var r,c,u=this,f=u._id,g=u.size();return new Promise(function(m,y){var C={value:y},E={value:function(){0==--g&&m()}};u.each(function(){var S=Ss(this,f),I=S.on;I!==r&&((c=(r=I).copy())._.cancel.push(C),c._.interrupt.push(C),c._.end.push(E)),S.on=c}),0===g&&m()})},[Symbol.iterator]:mr[Symbol.iterator]};var pp=function r(c){function u(f){return Math.pow(f,c)}return c=+c,u.exponent=r,u}(3),zh=function r(c){function u(f){return 1-Math.pow(1-f,c)}return c=+c,u.exponent=r,u}(3),Rn=function r(c){function u(f){return((f*=2)<=1?Math.pow(f,c):2-Math.pow(2-f,c))/2}return c=+c,u.exponent=r,u}(3),gp=Math.PI,Jd=gp/2;function Bc(r){return(1-Math.cos(gp*r))/2}function Us(r){return 1.0009775171065494*(Math.pow(2,-10*r)-.0009765625)}function vp(r){return((r*=2)<=1?Us(1-r):2-Us(r-1))/2}function bp(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var Rc=4/11,Zd=7.5625;function Aa(r){return(r=+r)<Rc?Zd*r*r:r<.7272727272727273?Zd*(r-=.5454545454545454)*r+.75:r<.9090909090909091?Zd*(r-=.8181818181818182)*r+.9375:Zd*(r-=.9545454545454546)*r+.984375}var eu=1.70158,cv=function r(c){function u(f){return(f=+f)*f*(c*(f-1)+f)}return c=+c,u.overshoot=r,u}(eu),dv=function r(c){function u(f){return--f*f*((f+1)*c+f)+1}return c=+c,u.overshoot=r,u}(eu),s=function r(c){function u(f){return((f*=2)<1?f*f*((c+1)*f-c):(f-=2)*f*((c+1)*f+c)+2)/2}return c=+c,u.overshoot=r,u}(eu),e=2*Math.PI,n=function r(c,u){var f=Math.asin(1/(c=Math.max(1,c)))*(u/=e);function g(m){return c*Us(- --m)*Math.sin((f-m)/u)}return g.amplitude=function(m){return r(m,u*e)},g.period=function(m){return r(c,m)},g}(1,.3),a=function r(c,u){var f=Math.asin(1/(c=Math.max(1,c)))*(u/=e);function g(m){return 1-c*Us(m=+m)*Math.sin((m+f)/u)}return g.amplitude=function(m){return r(m,u*e)},g.period=function(m){return r(c,m)},g}(1,.3),o=function r(c,u){var f=Math.asin(1/(c=Math.max(1,c)))*(u/=e);function g(m){return((m=2*m-1)<0?c*Us(-m)*Math.sin((f-m)/u):2-c*Us(m)*Math.sin((f+m)/u))/2}return g.amplitude=function(m){return r(m,u*e)},g.period=function(m){return r(c,m)},g}(1,.3),l={time:null,delay:0,duration:250,ease:br};function d(r,c){for(var u;!(u=r.__transition)||!(u=u[c]);)if(!(r=r.parentNode))throw new Error(`transition ${c} not found`);return u}ys.prototype.interrupt=function vh(r){return this.each(function(){Fo(this,r)})},ys.prototype.transition=function h(r){var c,u;r instanceof as?(c=r._id,r=r._name):(c=Bh(),(u=l).time=Mc(),r=null==r?null:r+"");for(var f=this._groups,g=f.length,m=0;m<g;++m)for(var E,y=f[m],C=y.length,S=0;S<C;++S)(E=y[S])&&Ll(E,r,c,S,y,u||d(E,c));return new as(f,this._parents,r,c)};var p=[null],b=r=>()=>r;function w(r,{sourceEvent:c,target:u,selection:f,mode:g,dispatch:m}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:c,enumerable:!0,configurable:!0},target:{value:u,enumerable:!0,configurable:!0},selection:{value:f,enumerable:!0,configurable:!0},mode:{value:g,enumerable:!0,configurable:!0},_:{value:m}})}function k(r){r.preventDefault(),r.stopImmediatePropagation()}var A={name:"drag"},M={name:"space"},L={name:"handle"},z={name:"center"};const{abs:q,max:O,min:_}=Math;function G(r){return[+r[0],+r[1]]}function j(r){return[G(r[0]),G(r[1])]}var X={name:"x",handles:["w","e"].map(ge),input:function(r,c){return null==r?null:[[+r[0],c[0][1]],[+r[1],c[1][1]]]},output:function(r){return r&&[r[0][0],r[1][0]]}},fe={name:"y",handles:["n","s"].map(ge),input:function(r,c){return null==r?null:[[c[0][0],+r[0]],[c[1][0],+r[1]]]},output:function(r){return r&&[r[0][1],r[1][1]]}},he={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ge),input:function(r){return null==r?null:j(r)},output:function(r){return r}},we={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},re={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ne={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},le={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Te={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ge(r){return{type:r}}function ce(r){return!r.ctrlKey&&!r.button}function Be(){var r=this.ownerSVGElement||this;return r.hasAttribute("viewBox")?[[(r=r.viewBox.baseVal).x,r.y],[r.x+r.width,r.y+r.height]]:[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]}function qe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oe(r){for(;!r.__brush;)if(!(r=r.parentNode))return;return r.__brush}function Dt(r){var C,c=Be,u=ce,f=qe,g=!0,m=Rs("start","brush","end"),y=6;function E(Y){var Q=Y.property("__brush",J).selectAll(".overlay").data([ge("overlay")]);Q.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",we.overlay).merge(Q).each(function(){var ie=Oe(this).extent;ue(this).attr("x",ie[0][0]).attr("y",ie[0][1]).attr("width",ie[1][0]-ie[0][0]).attr("height",ie[1][1]-ie[0][1])}),Y.selectAll(".selection").data([ge("selection")]).enter().append("rect").attr("class","selection").attr("cursor",we.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var ne=Y.selectAll(".handle").data(r.handles,function(ie){return ie.type});ne.exit().remove(),ne.enter().append("rect").attr("class",function(ie){return"handle handle--"+ie.type}).attr("cursor",function(ie){return we[ie.type]}),Y.each(S).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",P).filter(f).on("touchstart.brush",P).on("touchmove.brush",W).on("touchend.brush touchcancel.brush",K).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(){var Y=ue(this),Q=Oe(this).selection;Q?(Y.selectAll(".selection").style("display",null).attr("x",Q[0][0]).attr("y",Q[0][1]).attr("width",Q[1][0]-Q[0][0]).attr("height",Q[1][1]-Q[0][1]),Y.selectAll(".handle").style("display",null).attr("x",function(ne){return"e"===ne.type[ne.type.length-1]?Q[1][0]-y/2:Q[0][0]-y/2}).attr("y",function(ne){return"s"===ne.type[0]?Q[1][1]-y/2:Q[0][1]-y/2}).attr("width",function(ne){return"n"===ne.type||"s"===ne.type?Q[1][0]-Q[0][0]+y:y}).attr("height",function(ne){return"e"===ne.type||"w"===ne.type?Q[1][1]-Q[0][1]+y:y})):Y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function I(Y,Q,ne){var ie=Y.__brush.emitter;return!ie||ne&&ie.clean?new N(Y,Q,ne):ie}function N(Y,Q,ne){this.that=Y,this.args=Q,this.state=Y.__brush,this.active=0,this.clean=ne}function P(Y){if((!C||Y.touches)&&u.apply(this,arguments)){var Se,Ce,Pe,me,De,_e,dt,mt,Ki,$i,Kn,Q=this,ne=Y.target.__data__.type,ie="selection"===(g&&Y.metaKey?ne="overlay":ne)?A:g&&Y.altKey?z:L,te=r===fe?null:le[ne],oe=r===X?null:Te[ne],pe=Oe(Q),Ie=pe.extent,Le=pe.selection,Ke=Ie[0][0],tt=Ie[0][1],Ee=Ie[1][0],lt=Ie[1][1],At=0,Ht=0,Ri=te&&oe&&g&&Y.shiftKey,Hi=Array.from(Y.touches||[Y],Qt=>{const Ln=Qt.identifier;return(Qt=Ue(Qt,Q)).point0=Qt.slice(),Qt.identifier=Ln,Qt});Fo(Q);var zn=I(Q,arguments,!0).beforestart();if("overlay"===ne){Le&&(Ki=!0);const Qt=[Hi[0],Hi[1]||Hi[0]];pe.selection=Le=[[Se=r===fe?Ke:_(Qt[0][0],Qt[1][0]),Pe=r===X?tt:_(Qt[0][1],Qt[1][1])],[De=r===fe?Ee:O(Qt[0][0],Qt[1][0]),dt=r===X?lt:O(Qt[0][1],Qt[1][1])]],Hi.length>1&&In(Y)}else Se=Le[0][0],Pe=Le[0][1],De=Le[1][0],dt=Le[1][1];Ce=Se,me=Pe,_e=De,mt=dt;var Ct=ue(Q).attr("pointer-events","none"),ni=Ct.selectAll(".overlay").attr("cursor",we[ne]);if(Y.touches)zn.moved=ht,zn.ended=Zi;else{var Ci=ue(Y.view).on("mousemove.brush",ht,!0).on("mouseup.brush",Zi,!0);g&&Ci.on("keydown.brush",function ja(Qt){switch(Qt.keyCode){case 16:Ri=te&&oe;break;case 18:ie===L&&(te&&(De=_e-At*te,Se=Ce+At*te),oe&&(dt=mt-Ht*oe,Pe=me+Ht*oe),ie=z,In(Qt));break;case 32:(ie===L||ie===z)&&(te<0?De=_e-At:te>0&&(Se=Ce-At),oe<0?dt=mt-Ht:oe>0&&(Pe=me-Ht),ie=M,ni.attr("cursor",we.selection),In(Qt));break;default:return}k(Qt)},!0).on("keyup.brush",function Ka(Qt){switch(Qt.keyCode){case 16:Ri&&($i=Kn=Ri=!1,In(Qt));break;case 18:ie===z&&(te<0?De=_e:te>0&&(Se=Ce),oe<0?dt=mt:oe>0&&(Pe=me),ie=L,In(Qt));break;case 32:ie===M&&(Qt.altKey?(te&&(De=_e-At*te,Se=Ce+At*te),oe&&(dt=mt-Ht*oe,Pe=me+Ht*oe),ie=z):(te<0?De=_e:te>0&&(Se=Ce),oe<0?dt=mt:oe>0&&(Pe=me),ie=L),ni.attr("cursor",we[ne]),In(Qt));break;default:return}k(Qt)},!0),Vt(Y.view)}S.call(Q),zn.start(Y,ie.name)}function ht(Qt){for(const Ln of Qt.changedTouches||[Qt])for(const $f of Hi)$f.identifier===Ln.identifier&&($f.cur=Ue(Ln,Q));if(Ri&&!$i&&!Kn&&1===Hi.length){const Ln=Hi[0];q(Ln.cur[0]-Ln[0])>q(Ln.cur[1]-Ln[1])?Kn=!0:$i=!0}for(const Ln of Hi)Ln.cur&&(Ln[0]=Ln.cur[0],Ln[1]=Ln.cur[1]);Ki=!0,k(Qt),In(Qt)}function In(Qt){const Ln=Hi[0],$f=Ln.point0;var Vl;switch(At=Ln[0]-$f[0],Ht=Ln[1]-$f[1],ie){case M:case A:te&&(At=O(Ke-Se,_(Ee-De,At)),Ce=Se+At,_e=De+At),oe&&(Ht=O(tt-Pe,_(lt-dt,Ht)),me=Pe+Ht,mt=dt+Ht);break;case L:Hi[1]?(te&&(Ce=O(Ke,_(Ee,Hi[0][0])),_e=O(Ke,_(Ee,Hi[1][0])),te=1),oe&&(me=O(tt,_(lt,Hi[0][1])),mt=O(tt,_(lt,Hi[1][1])),oe=1)):(te<0?(At=O(Ke-Se,_(Ee-Se,At)),Ce=Se+At,_e=De):te>0&&(At=O(Ke-De,_(Ee-De,At)),Ce=Se,_e=De+At),oe<0?(Ht=O(tt-Pe,_(lt-Pe,Ht)),me=Pe+Ht,mt=dt):oe>0&&(Ht=O(tt-dt,_(lt-dt,Ht)),me=Pe,mt=dt+Ht));break;case z:te&&(Ce=O(Ke,_(Ee,Se-At*te)),_e=O(Ke,_(Ee,De+At*te))),oe&&(me=O(tt,_(lt,Pe-Ht*oe)),mt=O(tt,_(lt,dt+Ht*oe)))}_e<Ce&&(te*=-1,Vl=Se,Se=De,De=Vl,Vl=Ce,Ce=_e,_e=Vl,ne in re&&ni.attr("cursor",we[ne=re[ne]])),mt<me&&(oe*=-1,Vl=Pe,Pe=dt,dt=Vl,Vl=me,me=mt,mt=Vl,ne in Ne&&ni.attr("cursor",we[ne=Ne[ne]])),pe.selection&&(Le=pe.selection),$i&&(Ce=Le[0][0],_e=Le[1][0]),Kn&&(me=Le[0][1],mt=Le[1][1]),(Le[0][0]!==Ce||Le[0][1]!==me||Le[1][0]!==_e||Le[1][1]!==mt)&&(pe.selection=[[Ce,me],[_e,mt]],S.call(Q),zn.brush(Qt,ie.name))}function Zi(Qt){if(function T(r){r.stopImmediatePropagation()}(Qt),Qt.touches){if(Qt.touches.length)return;C&&clearTimeout(C),C=setTimeout(function(){C=null},500)}else Ii(Qt.view,Ki),Ci.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ct.attr("pointer-events","all"),ni.attr("cursor",we.overlay),pe.selection&&(Le=pe.selection),function ot(r){return r[0][0]===r[1][0]||r[0][1]===r[1][1]}(Le)&&(pe.selection=null,S.call(Q)),zn.end(Qt,ie.name)}}function W(Y){I(this,arguments).moved(Y)}function K(Y){I(this,arguments).ended(Y)}function J(){var Y=this.__brush||{selection:null};return Y.extent=j(c.apply(this,arguments)),Y.dim=r,Y}return E.move=function(Y,Q,ne){Y.tween?Y.on("start.brush",function(ie){I(this,arguments).beforestart().start(ie)}).on("interrupt.brush end.brush",function(ie){I(this,arguments).end(ie)}).tween("brush",function(){var ie=this,te=ie.__brush,oe=I(ie,arguments),pe=te.selection,Ie=r.input("function"==typeof Q?Q.apply(this,arguments):Q,te.extent),Le=$t(pe,Ie);function Ke(Se){te.selection=1===Se&&null===Ie?null:Le(Se),S.call(ie),oe.brush()}return null!==pe&&null!==Ie?Ke:Ke(1)}):Y.each(function(){var ie=this,te=arguments,oe=ie.__brush,pe=r.input("function"==typeof Q?Q.apply(ie,te):Q,oe.extent),Ie=I(ie,te).beforestart();Fo(ie),oe.selection=null===pe?null:pe,S.call(ie),Ie.start(ne).brush(ne).end(ne)})},E.clear=function(Y,Q){E.move(Y,null,Q)},N.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(Y,Q){return this.starting?(this.starting=!1,this.emit("start",Y,Q)):this.emit("brush",Y),this},brush:function(Y,Q){return this.emit("brush",Y,Q),this},end:function(Y,Q){return 0==--this.active&&(delete this.state.emitter,this.emit("end",Y,Q)),this},emit:function(Y,Q,ne){var ie=ue(this.that).datum();m.call(Y,this.that,new w(Y,{sourceEvent:Q,target:E,selection:r.output(this.state.selection),mode:ne,dispatch:m}),ie)}},E.extent=function(Y){return arguments.length?(c="function"==typeof Y?Y:b(j(Y)),E):c},E.filter=function(Y){return arguments.length?(u="function"==typeof Y?Y:b(!!Y),E):u},E.touchable=function(Y){return arguments.length?(f="function"==typeof Y?Y:b(!!Y),E):f},E.handleSize=function(Y){return arguments.length?(y=+Y,E):y},E.keyModifiers=function(Y){return arguments.length?(g=!!Y,E):g},E.on=function(){var Y=m.on.apply(m,arguments);return Y===m?E:Y},E}var zt=Math.abs,_t=Math.cos,ti=Math.sin,ci=Math.PI,di=ci/2,ut=2*ci,Xe=Math.max;function Tt(r,c){return Array.from({length:c-r},(u,f)=>r+f)}function Jn(r,c){var u=0,f=null,g=null,m=null;function y(C){var K,E=C.length,S=new Array(E),I=Tt(0,E),N=new Array(E*E),P=new Array(E),W=0;C=Float64Array.from({length:E*E},c?(J,Y)=>C[Y%E][Y/E|0]:(J,Y)=>C[Y/E|0][Y%E]);for(let J=0;J<E;++J){let Y=0;for(let Q=0;Q<E;++Q)Y+=C[J*E+Q]+r*C[Q*E+J];W+=S[J]=Y}K=(W=Xe(0,ut-u*E)/W)?u:ut/E;{let J=0;f&&I.sort((Y,Q)=>f(S[Y],S[Q]));for(const Y of I){const Q=J;if(r){const ne=Tt(1+~E,E).filter(ie=>ie<0?C[~ie*E+Y]:C[Y*E+ie]);g&&ne.sort((ie,te)=>g(ie<0?-C[~ie*E+Y]:C[Y*E+ie],te<0?-C[~te*E+Y]:C[Y*E+te]));for(const ie of ne)ie<0?(N[~ie*E+Y]||(N[~ie*E+Y]={source:null,target:null})).target={index:Y,startAngle:J,endAngle:J+=C[~ie*E+Y]*W,value:C[~ie*E+Y]}:(N[Y*E+ie]||(N[Y*E+ie]={source:null,target:null})).source={index:Y,startAngle:J,endAngle:J+=C[Y*E+ie]*W,value:C[Y*E+ie]};P[Y]={index:Y,startAngle:Q,endAngle:J,value:S[Y]}}else{const ne=Tt(0,E).filter(ie=>C[Y*E+ie]||C[ie*E+Y]);g&&ne.sort((ie,te)=>g(C[Y*E+ie],C[Y*E+te]));for(const ie of ne){let te;if(Y<ie?(te=N[Y*E+ie]||(N[Y*E+ie]={source:null,target:null}),te.source={index:Y,startAngle:J,endAngle:J+=C[Y*E+ie]*W,value:C[Y*E+ie]}):(te=N[ie*E+Y]||(N[ie*E+Y]={source:null,target:null}),te.target={index:Y,startAngle:J,endAngle:J+=C[Y*E+ie]*W,value:C[Y*E+ie]},Y===ie&&(te.source=te.target)),te.source&&te.target&&te.source.value<te.target.value){const oe=te.source;te.source=te.target,te.target=oe}}P[Y]={index:Y,startAngle:Q,endAngle:J,value:S[Y]}}J+=K}}return(N=Object.values(N)).groups=P,m?N.sort(m):N}return y.padAngle=function(C){return arguments.length?(u=Xe(0,C),y):u},y.sortGroups=function(C){return arguments.length?(f=C,y):f},y.sortSubgroups=function(C){return arguments.length?(g=C,y):g},y.sortChords=function(C){return arguments.length?(null==C?m=null:(m=function Ji(r){return function(c,u){return r(c.source.value+c.target.value,u.source.value+u.target.value)}}(C))._=C,y):m&&m._},y}const vn=Math.PI,ri=2*vn,Yn=1e-6,Gs=ri-Yn;function Cn(r){this._+=r[0];for(let c=1,u=r.length;c<u;++c)this._+=arguments[c]+r[c]}let Fi=class{constructor(c){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==c?Cn:function rs(r){let c=Math.floor(r);if(!(c>=0))throw new Error(`invalid digits: ${r}`);if(c>15)return Cn;const u=10**c;return function(f){this._+=f[0];for(let g=1,m=f.length;g<m;++g)this._+=Math.round(arguments[g]*u)/u+f[g]}}(c)}moveTo(c,u){this._append`M${this._x0=this._x1=+c},${this._y0=this._y1=+u}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(c,u){this._append`L${this._x1=+c},${this._y1=+u}`}quadraticCurveTo(c,u,f,g){this._append`Q${+c},${+u},${this._x1=+f},${this._y1=+g}`}bezierCurveTo(c,u,f,g,m,y){this._append`C${+c},${+u},${+f},${+g},${this._x1=+m},${this._y1=+y}`}arcTo(c,u,f,g,m){if(c=+c,u=+u,f=+f,g=+g,(m=+m)<0)throw new Error(`negative radius: ${m}`);let y=this._x1,C=this._y1,E=f-c,S=g-u,I=y-c,N=C-u,P=I*I+N*N;if(null===this._x1)this._append`M${this._x1=c},${this._y1=u}`;else if(P>Yn)if(Math.abs(N*E-S*I)>Yn&&m){let W=f-y,K=g-C,J=E*E+S*S,Y=W*W+K*K,Q=Math.sqrt(J),ne=Math.sqrt(P),ie=m*Math.tan((vn-Math.acos((J+P-Y)/(2*Q*ne)))/2),te=ie/ne,oe=ie/Q;Math.abs(te-1)>Yn&&this._append`L${c+te*I},${u+te*N}`,this._append`A${m},${m},0,0,${+(N*W>I*K)},${this._x1=c+oe*E},${this._y1=u+oe*S}`}else this._append`L${this._x1=c},${this._y1=u}`}arc(c,u,f,g,m,y){if(c=+c,u=+u,y=!!y,(f=+f)<0)throw new Error(`negative radius: ${f}`);let C=f*Math.cos(g),E=f*Math.sin(g),S=c+C,I=u+E,N=1^y,P=y?g-m:m-g;null===this._x1?this._append`M${S},${I}`:(Math.abs(this._x1-S)>Yn||Math.abs(this._y1-I)>Yn)&&this._append`L${S},${I}`,f&&(P<0&&(P=P%ri+ri),P>Gs?this._append`A${f},${f},0,1,${N},${c-C},${u-E}A${f},${f},0,1,${N},${this._x1=S},${this._y1=I}`:P>Yn&&this._append`A${f},${f},0,${+(P>=vn)},${N},${this._x1=c+f*Math.cos(m)},${this._y1=u+f*Math.sin(m)}`)}rect(c,u,f,g){this._append`M${this._x0=this._x1=+c},${this._y0=this._y1=+u}h${f=+f}v${+g}h${-f}Z`}toString(){return this._}};function Ni(){return new Fi}Ni.prototype=Fi.prototype;var Oa=Array.prototype.slice;function et(r){return function(){return r}}function Yt(r){return r.source}function kt(r){return r.target}function en(r){return r.radius}function En(r){return r.startAngle}function Ze(r){return r.endAngle}function it(){return 0}function at(){return 10}function ct(r){var c=Yt,u=kt,f=en,g=en,m=En,y=Ze,C=it,E=null;function S(){var I,N=c.apply(this,arguments),P=u.apply(this,arguments),W=C.apply(this,arguments)/2,K=Oa.call(arguments),J=+f.apply(this,(K[0]=N,K)),Y=m.apply(this,K)-di,Q=y.apply(this,K)-di,ne=+g.apply(this,(K[0]=P,K)),ie=m.apply(this,K)-di,te=y.apply(this,K)-di;if(E||(E=I=Ni()),W>1e-12&&(zt(Q-Y)>2*W+1e-12?Q>Y?(Y+=W,Q-=W):(Y-=W,Q+=W):Y=Q=(Y+Q)/2,zt(te-ie)>2*W+1e-12?te>ie?(ie+=W,te-=W):(ie-=W,te+=W):ie=te=(ie+te)/2),E.moveTo(J*_t(Y),J*ti(Y)),E.arc(0,0,J,Y,Q),Y!==ie||Q!==te)if(r){var pe=ne-+r.apply(this,arguments),Ie=(ie+te)/2;E.quadraticCurveTo(0,0,pe*_t(ie),pe*ti(ie)),E.lineTo(ne*_t(Ie),ne*ti(Ie)),E.lineTo(pe*_t(te),pe*ti(te))}else E.quadraticCurveTo(0,0,ne*_t(ie),ne*ti(ie)),E.arc(0,0,ne,ie,te);if(E.quadraticCurveTo(0,0,J*_t(Y),J*ti(Y)),E.closePath(),I)return E=null,I+""||null}return r&&(S.headRadius=function(I){return arguments.length?(r="function"==typeof I?I:et(+I),S):r}),S.radius=function(I){return arguments.length?(f=g="function"==typeof I?I:et(+I),S):f},S.sourceRadius=function(I){return arguments.length?(f="function"==typeof I?I:et(+I),S):f},S.targetRadius=function(I){return arguments.length?(g="function"==typeof I?I:et(+I),S):g},S.startAngle=function(I){return arguments.length?(m="function"==typeof I?I:et(+I),S):m},S.endAngle=function(I){return arguments.length?(y="function"==typeof I?I:et(+I),S):y},S.padAngle=function(I){return arguments.length?(C="function"==typeof I?I:et(+I),S):C},S.source=function(I){return arguments.length?(c=I,S):c},S.target=function(I){return arguments.length?(u=I,S):u},S.context=function(I){return arguments.length?(E=I??null,S):E},S}var Vi=Array.prototype.slice;function sa(r,c){return r-c}var xn=r=>()=>r;function Ea(r,c){for(var g,u=-1,f=c.length;++u<f;)if(g=os(r,c[u]))return g;return 0}function os(r,c){for(var u=c[0],f=c[1],g=-1,m=0,y=r.length,C=y-1;m<y;C=m++){var E=r[m],S=E[0],I=E[1],N=r[C],P=N[0],W=N[1];if(ls(E,N,c))return 0;I>f!=W>f&&u<(P-S)*(f-I)/(W-I)+S&&(g=-g)}return g}function ls(r,c,u){var f;return function Fn(r,c,u){return(c[0]-r[0])*(u[1]-r[1])==(u[0]-r[0])*(c[1]-r[1])}(r,c,u)&&function As(r,c,u){return r<=c&&c<=u||u<=c&&c<=r}(r[f=+(r[0]===c[0])],u[f],c[f])}function Ys(){}var Ui=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function js(){var r=1,c=1,u=fo,f=E;function g(S){var I=u(S);if(Array.isArray(I))I=I.slice().sort(sa);else{const N=ca(S,Jr);for(I=xt(...Ls(N[0],N[1],I),I);I[I.length-1]>=N[1];)I.pop();for(;I[1]<N[0];)I.shift()}return I.map(N=>m(S,N))}function m(S,I){const N=null==I?NaN:+I;if(isNaN(N))throw new Error(`invalid value: ${I}`);var P=[],W=[];return function y(S,I,N){var K,J,Y,Q,ne,ie,P=new Array,W=new Array;for(K=J=-1,Q=ma(S[0],I),Ui[Q<<1].forEach(te);++K<r-1;)Y=Q,Q=ma(S[K+1],I),Ui[Y|Q<<1].forEach(te);for(Ui[Q<<0].forEach(te);++J<c-1;){for(K=-1,Q=ma(S[J*r+r],I),ne=ma(S[J*r],I),Ui[Q<<1|ne<<2].forEach(te);++K<r-1;)Y=Q,Q=ma(S[J*r+r+K+1],I),ie=ne,ne=ma(S[J*r+K+1],I),Ui[Y|Q<<1|ne<<2|ie<<3].forEach(te);Ui[Q|ne<<3].forEach(te)}for(K=-1,Ui[(ne=S[J*r]>=I)<<2].forEach(te);++K<r-1;)ie=ne,ne=ma(S[J*r+K+1],I),Ui[ne<<2|ie<<3].forEach(te);function te(oe){var Se,Ce,pe=[oe[0][0]+K,oe[0][1]+J],Ie=[oe[1][0]+K,oe[1][1]+J],Le=C(pe),Ke=C(Ie);(Se=W[Le])?(Ce=P[Ke])?(delete W[Se.end],delete P[Ce.start],Se===Ce?(Se.ring.push(Ie),N(Se.ring)):P[Se.start]=W[Ce.end]={start:Se.start,end:Ce.end,ring:Se.ring.concat(Ce.ring)}):(delete W[Se.end],Se.ring.push(Ie),W[Se.end=Ke]=Se):(Se=P[Ke])?(Ce=W[Le])?(delete P[Se.start],delete W[Ce.end],Se===Ce?(Se.ring.push(Ie),N(Se.ring)):P[Ce.start]=W[Se.end]={start:Ce.start,end:Se.end,ring:Ce.ring.concat(Se.ring)}):(delete P[Se.start],Se.ring.unshift(pe),P[Se.start=Le]=Se):P[Le]=W[Ke]={start:Le,end:Ke,ring:[pe,Ie]}}Ui[ne<<3].forEach(te)}(S,N,function(K){f(K,S,N),function hi(r){for(var c=0,u=r.length,f=r[u-1][1]*r[0][0]-r[u-1][0]*r[0][1];++c<u;)f+=r[c-1][1]*r[c][0]-r[c-1][0]*r[c][1];return f}(K)>0?P.push([K]):W.push(K)}),W.forEach(function(K){for(var Q,J=0,Y=P.length;J<Y;++J)if(-1!==Ea((Q=P[J])[0],K))return void Q.push(K)}),{type:"MultiPolygon",value:I,coordinates:P}}function C(S){return 2*S[0]+S[1]*(r+1)*4}function E(S,I,N){S.forEach(function(P){var W=P[0],K=P[1],J=0|W,Y=0|K,Q=Es(I[Y*r+J]);W>0&&W<r&&J===W&&(P[0]=cs(W,Es(I[Y*r+J-1]),Q,N)),K>0&&K<c&&Y===K&&(P[1]=cs(K,Es(I[(Y-1)*r+J]),Q,N))})}return g.contour=m,g.size=function(S){if(!arguments.length)return[r,c];var I=Math.floor(S[0]),N=Math.floor(S[1]);if(!(I>=0&&N>=0))throw new Error("invalid size");return r=I,c=N,g},g.thresholds=function(S){return arguments.length?(u="function"==typeof S?S:Array.isArray(S)?xn(Vi.call(S)):xn(S),g):u},g.smooth=function(S){return arguments.length?(f=S?E:Ys,g):f===E},g}function Jr(r){return isFinite(r)?r:NaN}function ma(r,c){return null!=r&&+r>=c}function Es(r){return null==r||isNaN(r=+r)?-1/0:r}function cs(r,c,u,f){const g=f-c,m=u-c,y=isFinite(g)||isFinite(m)?g/m:Math.sign(g)/Math.sign(m);return isNaN(y)?r:r+y-.5}function ds(r){return r[0]}function Uh(r){return r[1]}function tu(){return 1}const vt=134217729;function Kt(r,c,u,f,g){let m,y,C,E,S=c[0],I=f[0],N=0,P=0;I>S==I>-S?(m=S,S=c[++N]):(m=I,I=f[++P]);let W=0;if(N<r&&P<u)for(I>S==I>-S?(y=S+m,C=m-(y-S),S=c[++N]):(y=I+m,C=m-(y-I),I=f[++P]),m=y,0!==C&&(g[W++]=C);N<r&&P<u;)I>S==I>-S?(y=m+S,E=y-m,C=m-(y-E)+(S-E),S=c[++N]):(y=m+I,E=y-m,C=m-(y-E)+(I-E),I=f[++P]),m=y,0!==C&&(g[W++]=C);for(;N<r;)y=m+S,E=y-m,C=m-(y-E)+(S-E),S=c[++N],m=y,0!==C&&(g[W++]=C);for(;P<u;)y=m+I,E=y-m,C=m-(y-E)+(I-E),I=f[++P],m=y,0!==C&&(g[W++]=C);return(0!==m||0===W)&&(g[W++]=m),W}function Tn(r){return new Float64Array(r)}const ra=Tn(4),Ks=Tn(8),Fa=Tn(12),fi=Tn(16),Qe=Tn(4);function oi(r,c,u,f,g,m){const y=(c-m)*(u-g),C=(r-g)*(f-m),E=y-C;if(0===y||0===C||y>0!=C>0)return E;const S=Math.abs(y+C);return Math.abs(E)>=33306690738754716e-32*S?E:-function wt(r,c,u,f,g,m,y){let C,E,S,I,N,P,W,K,J,Y,Q,ne,ie,te,oe,pe,Ie,Le;const Ke=r-g,Se=u-g,Ce=c-m,tt=f-m;te=Ke*tt,P=vt*Ke,W=P-(P-Ke),K=Ke-W,P=vt*tt,J=P-(P-tt),Y=tt-J,oe=K*Y-(te-W*J-K*J-W*Y),pe=Ce*Se,P=vt*Ce,W=P-(P-Ce),K=Ce-W,P=vt*Se,J=P-(P-Se),Y=Se-J,Ie=K*Y-(pe-W*J-K*J-W*Y),Q=oe-Ie,N=oe-Q,ra[0]=oe-(Q+N)+(N-Ie),ne=te+Q,N=ne-te,ie=te-(ne-N)+(Q-N),Q=ie-pe,N=ie-Q,ra[1]=ie-(Q+N)+(N-pe),Le=ne+Q,N=Le-ne,ra[2]=ne-(Le-N)+(Q-N),ra[3]=Le;let Pe=function Ti(r,c){let u=c[0];for(let f=1;f<r;f++)u+=c[f];return u}(4,ra),me=22204460492503146e-32*y;if(Pe>=me||-Pe>=me||(N=r-Ke,C=r-(Ke+N)+(N-g),N=u-Se,S=u-(Se+N)+(N-g),N=c-Ce,E=c-(Ce+N)+(N-m),N=f-tt,I=f-(tt+N)+(N-m),0===C&&0===E&&0===S&&0===I)||(me=11093356479670487e-47*y+33306690738754706e-32*Math.abs(Pe),Pe+=Ke*I+tt*C-(Ce*S+Se*E),Pe>=me||-Pe>=me))return Pe;te=C*tt,P=vt*C,W=P-(P-C),K=C-W,P=vt*tt,J=P-(P-tt),Y=tt-J,oe=K*Y-(te-W*J-K*J-W*Y),pe=E*Se,P=vt*E,W=P-(P-E),K=E-W,P=vt*Se,J=P-(P-Se),Y=Se-J,Ie=K*Y-(pe-W*J-K*J-W*Y),Q=oe-Ie,N=oe-Q,Qe[0]=oe-(Q+N)+(N-Ie),ne=te+Q,N=ne-te,ie=te-(ne-N)+(Q-N),Q=ie-pe,N=ie-Q,Qe[1]=ie-(Q+N)+(N-pe),Le=ne+Q,N=Le-ne,Qe[2]=ne-(Le-N)+(Q-N),Qe[3]=Le;const Ee=Kt(4,ra,4,Qe,Ks);te=Ke*I,P=vt*Ke,W=P-(P-Ke),K=Ke-W,P=vt*I,J=P-(P-I),Y=I-J,oe=K*Y-(te-W*J-K*J-W*Y),pe=Ce*S,P=vt*Ce,W=P-(P-Ce),K=Ce-W,P=vt*S,J=P-(P-S),Y=S-J,Ie=K*Y-(pe-W*J-K*J-W*Y),Q=oe-Ie,N=oe-Q,Qe[0]=oe-(Q+N)+(N-Ie),ne=te+Q,N=ne-te,ie=te-(ne-N)+(Q-N),Q=ie-pe,N=ie-Q,Qe[1]=ie-(Q+N)+(N-pe),Le=ne+Q,N=Le-ne,Qe[2]=ne-(Le-N)+(Q-N),Qe[3]=Le;const De=Kt(Ee,Ks,4,Qe,Fa);te=C*I,P=vt*C,W=P-(P-C),K=C-W,P=vt*I,J=P-(P-I),Y=I-J,oe=K*Y-(te-W*J-K*J-W*Y),pe=E*S,P=vt*E,W=P-(P-E),K=E-W,P=vt*S,J=P-(P-S),Y=S-J,Ie=K*Y-(pe-W*J-K*J-W*Y),Q=oe-Ie,N=oe-Q,Qe[0]=oe-(Q+N)+(N-Ie),ne=te+Q,N=ne-te,ie=te-(ne-N)+(Q-N),Q=ie-pe,N=ie-Q,Qe[1]=ie-(Q+N)+(N-pe),Le=ne+Q,N=Le-ne,Qe[2]=ne-(Le-N)+(Q-N),Qe[3]=Le;const _e=Kt(De,Fa,4,Qe,fi);return fi[_e-1]}(r,c,u,f,g,m,S)}const ji=Math.pow(2,-52),ki=new Uint32Array(512);class Xs{static from(c,u=Bi,f=Oc){const g=c.length,m=new Float64Array(2*g);for(let y=0;y<g;y++){const C=c[y];m[2*y]=u(C),m[2*y+1]=f(C)}return new Xs(m)}constructor(c){const u=c.length>>1;if(u>0&&"number"!=typeof c[0])throw new Error("Expected coords to contain numbers.");this.coords=c;const f=Math.max(2*u-5,0);this._triangles=new Uint32Array(3*f),this._halfedges=new Int32Array(3*f),this._hashSize=Math.ceil(Math.sqrt(u)),this._hullPrev=new Uint32Array(u),this._hullNext=new Uint32Array(u),this._hullTri=new Uint32Array(u),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(u),this._dists=new Float64Array(u),this.update()}update(){const{coords:c,_hullPrev:u,_hullNext:f,_hullTri:g,_hullHash:m}=this,y=c.length>>1;let C=1/0,E=1/0,S=-1/0,I=-1/0;for(let Se=0;Se<y;Se++){const Ce=c[2*Se],tt=c[2*Se+1];Ce<C&&(C=Ce),tt<E&&(E=tt),Ce>S&&(S=Ce),tt>I&&(I=tt),this._ids[Se]=Se}const N=(C+S)/2,P=(E+I)/2;let K,J,Y,W=1/0;for(let Se=0;Se<y;Se++){const Ce=Ho(N,P,c[2*Se],c[2*Se+1]);Ce<W&&(K=Se,W=Ce)}const Q=c[2*K],ne=c[2*K+1];W=1/0;for(let Se=0;Se<y;Se++){if(Se===K)continue;const Ce=Ho(Q,ne,c[2*Se],c[2*Se+1]);Ce<W&&Ce>0&&(J=Se,W=Ce)}let ie=c[2*J],te=c[2*J+1],oe=1/0;for(let Se=0;Se<y;Se++){if(Se===K||Se===J)continue;const Ce=Bl(Q,ne,ie,te,c[2*Se],c[2*Se+1]);Ce<oe&&(Y=Se,oe=Ce)}let pe=c[2*Y],Ie=c[2*Y+1];if(oe===1/0){for(let tt=0;tt<y;tt++)this._dists[tt]=c[2*tt]-c[0]||c[2*tt+1]-c[1];$n(this._ids,this._dists,0,y-1);const Se=new Uint32Array(y);let Ce=0;for(let tt=0,Pe=-1/0;tt<y;tt++){const me=this._ids[tt];this._dists[me]>Pe&&(Se[Ce++]=me,Pe=this._dists[me])}return this.hull=Se.subarray(0,Ce),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(oi(Q,ne,ie,te,pe,Ie)<0){const Se=J,Ce=ie,tt=te;J=Y,ie=pe,te=Ie,Y=Se,pe=Ce,Ie=tt}const Le=function nu(r,c,u,f,g,m){const y=u-r,C=f-c,E=g-r,S=m-c,I=y*y+C*C,N=E*E+S*S,P=.5/(y*S-C*E);return{x:r+(S*I-C*N)*P,y:c+(y*N-E*I)*P}}(Q,ne,ie,te,pe,Ie);this._cx=Le.x,this._cy=Le.y;for(let Se=0;Se<y;Se++)this._dists[Se]=Ho(c[2*Se],c[2*Se+1],Le.x,Le.y);$n(this._ids,this._dists,0,y-1),this._hullStart=K;let Ke=3;f[K]=u[Y]=J,f[J]=u[K]=Y,f[Y]=u[J]=K,g[K]=0,g[J]=1,g[Y]=2,m.fill(-1),m[this._hashKey(Q,ne)]=K,m[this._hashKey(ie,te)]=J,m[this._hashKey(pe,Ie)]=Y,this.trianglesLen=0,this._addTriangle(K,J,Y,-1,-1,-1);for(let Ce,tt,Se=0;Se<this._ids.length;Se++){const Pe=this._ids[Se],me=c[2*Pe],Ee=c[2*Pe+1];if(Se>0&&Math.abs(me-Ce)<=ji&&Math.abs(Ee-tt)<=ji||(Ce=me,tt=Ee,Pe===K||Pe===J||Pe===Y))continue;let De=0;for(let At=0,Ht=this._hashKey(me,Ee);At<this._hashSize&&(De=m[(Ht+At)%this._hashSize],-1===De||De===f[De]);At++);De=u[De];let lt,_e=De;for(;lt=f[_e],oi(me,Ee,c[2*_e],c[2*_e+1],c[2*lt],c[2*lt+1])>=0;)if(_e=lt,_e===De){_e=-1;break}if(-1===_e)continue;let dt=this._addTriangle(_e,Pe,f[_e],-1,-1,g[_e]);g[Pe]=this._legalize(dt+2),g[_e]=dt,Ke++;let mt=f[_e];for(;lt=f[mt],oi(me,Ee,c[2*mt],c[2*mt+1],c[2*lt],c[2*lt+1])<0;)dt=this._addTriangle(mt,Pe,lt,g[Pe],-1,g[mt]),g[Pe]=this._legalize(dt+2),f[mt]=mt,Ke--,mt=lt;if(_e===De)for(;lt=u[_e],oi(me,Ee,c[2*lt],c[2*lt+1],c[2*_e],c[2*_e+1])<0;)dt=this._addTriangle(lt,Pe,_e,-1,g[_e],g[lt]),this._legalize(dt+2),g[lt]=dt,f[_e]=_e,Ke--,_e=lt;this._hullStart=u[Pe]=_e,f[_e]=u[mt]=Pe,f[Pe]=mt,m[this._hashKey(me,Ee)]=Pe,m[this._hashKey(c[2*_e],c[2*_e+1])]=_e}this.hull=new Uint32Array(Ke);for(let Se=0,Ce=this._hullStart;Se<Ke;Se++)this.hull[Se]=Ce,Ce=f[Ce];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(c,u){return Math.floor(function Cp(r,c){const u=r/(Math.abs(r)+Math.abs(c));return(c>0?3-u:1+u)/4}(c-this._cx,u-this._cy)*this._hashSize)%this._hashSize}_legalize(c){const{_triangles:u,_halfedges:f,coords:g}=this;let m=0,y=0;for(;;){const C=f[c],E=c-c%3;if(y=E+(c+2)%3,-1===C){if(0===m)break;c=ki[--m];continue}const S=C-C%3,N=S+(C+2)%3,P=u[y],W=u[c],K=u[E+(c+1)%3],J=u[N];if(iu(g[2*P],g[2*P+1],g[2*W],g[2*W+1],g[2*K],g[2*K+1],g[2*J],g[2*J+1])){u[c]=J,u[C]=P;const Q=f[N];if(-1===Q){let ie=this._hullStart;do{if(this._hullTri[ie]===N){this._hullTri[ie]=c;break}ie=this._hullPrev[ie]}while(ie!==this._hullStart)}this._link(c,Q),this._link(C,f[y]),this._link(y,N),m<ki.length&&(ki[m++]=S+(C+1)%3)}else{if(0===m)break;c=ki[--m]}}return y}_link(c,u){this._halfedges[c]=u,-1!==u&&(this._halfedges[u]=c)}_addTriangle(c,u,f,g,m,y){const C=this.trianglesLen;return this._triangles[C]=c,this._triangles[C+1]=u,this._triangles[C+2]=f,this._link(C,g),this._link(C+1,m),this._link(C+2,y),this.trianglesLen+=3,C}}function Ho(r,c,u,f){const g=r-u,m=c-f;return g*g+m*m}function iu(r,c,u,f,g,m,y,C){const E=r-y,S=c-C,I=u-y,N=f-C,P=g-y,W=m-C,J=I*I+N*N,Y=P*P+W*W;return E*(N*Y-J*W)-S*(I*Y-J*P)+(E*E+S*S)*(I*W-N*P)<0}function Bl(r,c,u,f,g,m){const y=u-r,C=f-c,E=g-r,S=m-c,I=y*y+C*C,N=E*E+S*S,P=.5/(y*S-C*E),W=(S*I-C*N)*P,K=(y*N-E*I)*P;return W*W+K*K}function $n(r,c,u,f){if(f-u<=20)for(let g=u+1;g<=f;g++){const m=r[g],y=c[m];let C=g-1;for(;C>=u&&c[r[C]]>y;)r[C+1]=r[C--];r[C+1]=m}else{let m=u+1,y=f;rn(r,u+f>>1,m),c[r[u]]>c[r[f]]&&rn(r,u,f),c[r[m]]>c[r[f]]&&rn(r,m,f),c[r[u]]>c[r[m]]&&rn(r,u,m);const C=r[m],E=c[C];for(;;){do{m++}while(c[r[m]]<E);do{y--}while(c[r[y]]>E);if(y<m)break;rn(r,m,y)}r[u+1]=r[y],r[y]=C,f-m+1>=y-u?($n(r,c,m,f),$n(r,c,u,y-1)):($n(r,c,u,y-1),$n(r,c,m,f))}}function rn(r,c,u){const f=r[c];r[c]=r[u],r[u]=f}function Bi(r){return r[0]}function Oc(r){return r[1]}class $s{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(c,u){this._+=`M${this._x0=this._x1=+c},${this._y0=this._y1=+u}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(c,u){this._+=`L${this._x1=+c},${this._y1=+u}`}arc(c,u,f){const g=(c=+c)+(f=+f),m=u=+u;if(f<0)throw new Error("negative radius");null===this._x1?this._+=`M${g},${m}`:(Math.abs(this._x1-g)>1e-6||Math.abs(this._y1-m)>1e-6)&&(this._+="L"+g+","+m),f&&(this._+=`A${f},${f},0,1,1,${c-f},${u}A${f},${f},0,1,1,${this._x1=g},${this._y1=m}`)}rect(c,u,f,g){this._+=`M${this._x0=this._x1=+c},${this._y0=this._y1=+u}h${+f}v${+g}h${-f}Z`}value(){return this._||null}}class Yh{constructor(){this._=[]}moveTo(c,u){this._.push([c,u])}closePath(){this._.push(this._[0].slice())}lineTo(c,u){this._.push([c,u])}value(){return this._.length?this._:null}}class Qm{constructor(c,[u,f,g,m]=[0,0,960,500]){if(!((g=+g)>=(u=+u)&&(m=+m)>=(f=+f)))throw new Error("invalid bounds");this.delaunay=c,this._circumcenters=new Float64Array(2*c.points.length),this.vectors=new Float64Array(2*c.points.length),this.xmax=g,this.xmin=u,this.ymax=m,this.ymin=f,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:c,hull:u,triangles:f},vectors:g}=this,m=this.circumcenters=this._circumcenters.subarray(0,f.length/3*2);for(let Y,Q,W=0,K=0,J=f.length;W<J;W+=3,K+=2){const ne=2*f[W],ie=2*f[W+1],te=2*f[W+2],oe=c[ne],pe=c[ne+1],Ke=c[te],Se=c[te+1],Ce=c[ie]-oe,tt=c[ie+1]-pe,Pe=Ke-oe,me=Se-pe,Ee=2*(Ce*me-tt*Pe);if(Math.abs(Ee)<1e-9){let De=1e9;const _e=2*f[0];De*=Math.sign((c[_e]-oe)*me-(c[_e+1]-pe)*Pe),Y=(oe+Ke)/2-De*me,Q=(pe+Se)/2+De*Pe}else{const De=1/Ee,_e=Ce*Ce+tt*tt,lt=Pe*Pe+me*me;Y=oe+(me*_e-tt*lt)*De,Q=pe+(Ce*lt-Pe*_e)*De}m[K]=Y,m[K+1]=Q}let C,S,N,y=u[u.length-1],E=4*y,I=c[2*y],P=c[2*y+1];g.fill(0);for(let W=0;W<u.length;++W)y=u[W],C=E,S=I,N=P,E=4*y,I=c[2*y],P=c[2*y+1],g[C+2]=g[E]=N-P,g[C+3]=g[E+1]=I-S}render(c){const u=null==c?c=new $s:void 0,{delaunay:{halfedges:f,inedges:g,hull:m},circumcenters:y,vectors:C}=this;if(m.length<=1)return null;for(let I=0,N=f.length;I<N;++I){const P=f[I];if(P<I)continue;const W=2*Math.floor(I/3),K=2*Math.floor(P/3);this._renderSegment(y[W],y[W+1],y[K],y[K+1],c)}let E,S=m[m.length-1];for(let I=0;I<m.length;++I){E=S,S=m[I];const N=2*Math.floor(g[S]/3),P=y[N],W=y[N+1],K=4*E,J=this._project(P,W,C[K+2],C[K+3]);J&&this._renderSegment(P,W,J[0],J[1],c)}return u&&u.value()}renderBounds(c){const u=null==c?c=new $s:void 0;return c.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),u&&u.value()}renderCell(c,u){const f=null==u?u=new $s:void 0,g=this._clip(c);if(null===g||!g.length)return;u.moveTo(g[0],g[1]);let m=g.length;for(;g[0]===g[m-2]&&g[1]===g[m-1]&&m>1;)m-=2;for(let y=2;y<m;y+=2)(g[y]!==g[y-2]||g[y+1]!==g[y-1])&&u.lineTo(g[y],g[y+1]);return u.closePath(),f&&f.value()}*cellPolygons(){const{delaunay:{points:c}}=this;for(let u=0,f=c.length/2;u<f;++u){const g=this.cellPolygon(u);g&&(g.index=u,yield g)}}cellPolygon(c){const u=new Yh;return this.renderCell(c,u),u.value()}_renderSegment(c,u,f,g,m){let y;const C=this._regioncode(c,u),E=this._regioncode(f,g);0===C&&0===E?(m.moveTo(c,u),m.lineTo(f,g)):(y=this._clipSegment(c,u,f,g,C,E))&&(m.moveTo(y[0],y[1]),m.lineTo(y[2],y[3]))}contains(c,u,f){return(u=+u)==u&&(f=+f)==f&&this.delaunay._step(c,u,f)===c}*neighbors(c){const u=this._clip(c);if(u)for(const f of this.delaunay.neighbors(c)){const g=this._clip(f);if(g)e:for(let m=0,y=u.length;m<y;m+=2)for(let C=0,E=g.length;C<E;C+=2)if(u[m]==g[C]&&u[m+1]==g[C+1]&&u[(m+2)%y]==g[(C+E-2)%E]&&u[(m+3)%y]==g[(C+E-1)%E]){yield f;break e}}}_cell(c){const{circumcenters:u,delaunay:{inedges:f,halfedges:g,triangles:m}}=this,y=f[c];if(-1===y)return null;const C=[];let E=y;do{const S=Math.floor(E/3);if(C.push(u[2*S],u[2*S+1]),E=E%3==2?E-2:E+1,m[E]!==c)break;E=g[E]}while(E!==y&&-1!==E);return C}_clip(c){if(0===c&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const u=this._cell(c);if(null===u)return null;const{vectors:f}=this,g=4*c;return f[g]||f[g+1]?this._clipInfinite(c,u,f[g],f[g+1],f[g+2],f[g+3]):this._clipFinite(c,u)}_clipFinite(c,u){const f=u.length;let m,y,S,N,g=null,C=u[f-2],E=u[f-1],I=this._regioncode(C,E),P=0;for(let W=0;W<f;W+=2)if(m=C,y=E,C=u[W],E=u[W+1],S=I,I=this._regioncode(C,E),0===S&&0===I)N=P,P=0,g?g.push(C,E):g=[C,E];else{let K,J,Y,Q,ne;if(0===S){if(null===(K=this._clipSegment(m,y,C,E,S,I)))continue;[J,Y,Q,ne]=K}else{if(null===(K=this._clipSegment(C,E,m,y,I,S)))continue;[Q,ne,J,Y]=K,N=P,P=this._edgecode(J,Y),N&&P&&this._edge(c,N,P,g,g.length),g?g.push(J,Y):g=[J,Y]}N=P,P=this._edgecode(Q,ne),N&&P&&this._edge(c,N,P,g,g.length),g?g.push(Q,ne):g=[Q,ne]}if(g)N=P,P=this._edgecode(g[0],g[1]),N&&P&&this._edge(c,N,P,g,g.length);else if(this.contains(c,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return g}_clipSegment(c,u,f,g,m,y){for(;;){if(0===m&&0===y)return[c,u,f,g];if(m&y)return null;let C,E,S=m||y;8&S?(C=c+(f-c)*(this.ymax-u)/(g-u),E=this.ymax):4&S?(C=c+(f-c)*(this.ymin-u)/(g-u),E=this.ymin):2&S?(E=u+(g-u)*(this.xmax-c)/(f-c),C=this.xmax):(E=u+(g-u)*(this.xmin-c)/(f-c),C=this.xmin),m?m=this._regioncode(c=C,u=E):y=this._regioncode(f=C,g=E)}}_clipInfinite(c,u,f,g,m,y){let E,C=Array.from(u);if((E=this._project(C[0],C[1],f,g))&&C.unshift(E[0],E[1]),(E=this._project(C[C.length-2],C[C.length-1],m,y))&&C.push(E[0],E[1]),C=this._clipFinite(c,C))for(let N,S=0,I=C.length,P=this._edgecode(C[I-2],C[I-1]);S<I;S+=2)N=P,P=this._edgecode(C[S],C[S+1]),N&&P&&(S=this._edge(c,N,P,C,S),I=C.length);else this.contains(c,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(C=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return C}_edge(c,u,f,g,m){for(;u!==f;){let y,C;switch(u){case 5:u=4;continue;case 4:u=6,y=this.xmax,C=this.ymin;break;case 6:u=2;continue;case 2:u=10,y=this.xmax,C=this.ymax;break;case 10:u=8;continue;case 8:u=9,y=this.xmin,C=this.ymax;break;case 9:u=1;continue;case 1:u=5,y=this.xmin,C=this.ymin}(g[m]!==y||g[m+1]!==C)&&this.contains(c,y,C)&&(g.splice(m,0,y,C),m+=2)}if(g.length>4)for(let y=0;y<g.length;y+=2){const C=(y+2)%g.length,E=(y+4)%g.length;(g[y]===g[C]&&g[C]===g[E]||g[y+1]===g[C+1]&&g[C+1]===g[E+1])&&(g.splice(C,2),y-=2)}return m}_project(c,u,f,g){let y,C,E,m=1/0;if(g<0){if(u<=this.ymin)return null;(y=(this.ymin-u)/g)<m&&(E=this.ymin,C=c+(m=y)*f)}else if(g>0){if(u>=this.ymax)return null;(y=(this.ymax-u)/g)<m&&(E=this.ymax,C=c+(m=y)*f)}if(f>0){if(c>=this.xmax)return null;(y=(this.xmax-c)/f)<m&&(C=this.xmax,E=u+(m=y)*g)}else if(f<0){if(c<=this.xmin)return null;(y=(this.xmin-c)/f)<m&&(C=this.xmin,E=u+(m=y)*g)}return[C,E]}_edgecode(c,u){return(c===this.xmin?1:c===this.xmax?2:0)|(u===this.ymin?4:u===this.ymax?8:0)}_regioncode(c,u){return(c<this.xmin?1:c>this.xmax?2:0)|(u<this.ymin?4:u>this.ymax?8:0)}}const I1=2*Math.PI,au=Math.pow;function L1(r){return r[0]}function P1(r){return r[1]}function B1(r,c,u){return[r+Math.sin(r+c)*u,c+Math.cos(r-c)*u]}class uv{static from(c,u=L1,f=P1,g){return new uv("length"in c?function R1(r,c,u,f){const g=r.length,m=new Float64Array(2*g);for(let y=0;y<g;++y){const C=r[y];m[2*y]=c.call(f,C,y,r),m[2*y+1]=u.call(f,C,y,r)}return m}(c,u,f,g):Float64Array.from(function*O1(r,c,u,f){let g=0;for(const m of r)yield c.call(f,m,g,r),yield u.call(f,m,g,r),++g}(c,u,f,g)))}constructor(c){this._delaunator=new Xs(c),this.inedges=new Int32Array(c.length/2),this._hullIndex=new Int32Array(c.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const c=this._delaunator,u=this.points;if(c.hull&&c.hull.length>2&&function N1(r){const{triangles:c,coords:u}=r;for(let f=0;f<c.length;f+=3){const g=2*c[f],m=2*c[f+1],y=2*c[f+2];if((u[y]-u[g])*(u[m+1]-u[g+1])-(u[m]-u[g])*(u[y+1]-u[g+1])>1e-10)return!1}return!0}(c)){this.collinear=Int32Array.from({length:u.length/2},(P,W)=>W).sort((P,W)=>u[2*P]-u[2*W]||u[2*P+1]-u[2*W+1]);const E=this.collinear[0],S=this.collinear[this.collinear.length-1],I=[u[2*E],u[2*E+1],u[2*S],u[2*S+1]],N=1e-8*Math.hypot(I[3]-I[1],I[2]-I[0]);for(let P=0,W=u.length/2;P<W;++P){const K=B1(u[2*P],u[2*P+1],N);u[2*P]=K[0],u[2*P+1]=K[1]}this._delaunator=new Xs(u)}else delete this.collinear;const f=this.halfedges=this._delaunator.halfedges,g=this.hull=this._delaunator.hull,m=this.triangles=this._delaunator.triangles,y=this.inedges.fill(-1),C=this._hullIndex.fill(-1);for(let E=0,S=f.length;E<S;++E){const I=m[E%3==2?E-2:E+1];(-1===f[E]||-1===y[I])&&(y[I]=E)}for(let E=0,S=g.length;E<S;++E)C[g[E]]=E;g.length<=2&&g.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=g[0],y[g[0]]=1,2===g.length&&(y[g[1]]=0,this.triangles[1]=g[1],this.triangles[2]=g[1]))}voronoi(c){return new Qm(this,c)}*neighbors(c){const{inedges:u,hull:f,_hullIndex:g,halfedges:m,triangles:y,collinear:C}=this;if(C){const N=C.indexOf(c);return N>0&&(yield C[N-1]),void(N<C.length-1&&(yield C[N+1]))}const E=u[c];if(-1===E)return;let S=E,I=-1;do{if(yield I=y[S],S=S%3==2?S-2:S+1,y[S]!==c)return;if(S=m[S],-1===S){const N=f[(g[c]+1)%f.length];return void(N!==I&&(yield N))}}while(S!==E)}find(c,u,f=0){if((c=+c)!=c||(u=+u)!=u)return-1;const g=f;let m;for(;(m=this._step(f,c,u))>=0&&m!==f&&m!==g;)f=m;return m}_step(c,u,f){const{inedges:g,hull:m,_hullIndex:y,halfedges:C,triangles:E,points:S}=this;if(-1===g[c]||!S.length)return(c+1)%(S.length>>1);let I=c,N=au(u-S[2*c],2)+au(f-S[2*c+1],2);const P=g[c];let W=P;do{let K=E[W];const J=au(u-S[2*K],2)+au(f-S[2*K+1],2);if(J<N&&(N=J,I=K),W=W%3==2?W-2:W+1,E[W]!==c)break;if(W=C[W],-1===W){if(W=m[(y[c]+1)%m.length],W!==K&&au(u-S[2*W],2)+au(f-S[2*W+1],2)<N)return W;break}}while(W!==P);return I}render(c){const u=null==c?c=new $s:void 0,{points:f,halfedges:g,triangles:m}=this;for(let y=0,C=g.length;y<C;++y){const E=g[y];if(E<y)continue;const S=2*m[y],I=2*m[E];c.moveTo(f[S],f[S+1]),c.lineTo(f[I],f[I+1])}return this.renderHull(c),u&&u.value()}renderPoints(c,u){void 0===u&&(!c||"function"!=typeof c.moveTo)&&(u=c,c=null),u=null==u?2:+u;const f=null==c?c=new $s:void 0,{points:g}=this;for(let m=0,y=g.length;m<y;m+=2){const C=g[m],E=g[m+1];c.moveTo(C+u,E),c.arc(C,E,u,0,I1)}return f&&f.value()}renderHull(c){const u=null==c?c=new $s:void 0,{hull:f,points:g}=this,m=2*f[0],y=f.length;c.moveTo(g[m],g[m+1]);for(let C=1;C<y;++C){const E=2*f[C];c.lineTo(g[E],g[E+1])}return c.closePath(),u&&u.value()}hullPolygon(){const c=new Yh;return this.renderHull(c),c.value()}renderTriangle(c,u){const f=null==u?u=new $s:void 0,{points:g,triangles:m}=this,y=2*m[c*=3],C=2*m[c+1],E=2*m[c+2];return u.moveTo(g[y],g[y+1]),u.lineTo(g[C],g[C+1]),u.lineTo(g[E],g[E+1]),u.closePath(),f&&f.value()}*trianglePolygons(){const{triangles:c}=this;for(let u=0,f=c.length/3;u<f;++u)yield this.trianglePolygon(u)}trianglePolygon(c){const u=new Yh;return this.renderTriangle(c,u),u.value()}}var Jm={},hv={};function Zm(r){return new Function("d","return {"+r.map(function(c,u){return JSON.stringify(c)+": d["+u+'] || ""'}).join(",")+"}")}function eb(r){var c=Object.create(null),u=[];return r.forEach(function(f){for(var g in f)g in c||u.push(c[g]=g)}),u}function hs(r,c){var u=r+"",f=u.length;return f<c?new Array(c-f+1).join(0)+u:u}function xp(r){var c=new RegExp('["'+r+"\n\r]"),u=r.charCodeAt(0);function g(N,P){var Q,W=[],K=N.length,J=0,Y=0,ne=K<=0,ie=!1;function te(){if(ne)return hv;if(ie)return ie=!1,Jm;var pe,Le,Ie=J;if(34===N.charCodeAt(Ie)){for(;J++<K&&34!==N.charCodeAt(J)||34===N.charCodeAt(++J););return(pe=J)>=K?ne=!0:10===(Le=N.charCodeAt(J++))?ie=!0:13===Le&&(ie=!0,10===N.charCodeAt(J)&&++J),N.slice(Ie+1,pe-1).replace(/""/g,'"')}for(;J<K;){if(10===(Le=N.charCodeAt(pe=J++)))ie=!0;else if(13===Le)ie=!0,10===N.charCodeAt(J)&&++J;else if(Le!==u)continue;return N.slice(Ie,pe)}return ne=!0,N.slice(Ie,K)}for(10===N.charCodeAt(K-1)&&--K,13===N.charCodeAt(K-1)&&--K;(Q=te())!==hv;){for(var oe=[];Q!==Jm&&Q!==hv;)oe.push(Q),Q=te();P&&null==(oe=P(oe,Y++))||W.push(oe)}return W}function m(N,P){return N.map(function(W){return P.map(function(K){return I(W[K])}).join(r)})}function S(N){return N.map(I).join(r)}function I(N){return null==N?"":N instanceof Date?function H1(r){var c=r.getUTCHours(),u=r.getUTCMinutes(),f=r.getUTCSeconds(),g=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":function z1(r){return r<0?"-"+hs(-r,6):r>9999?"+"+hs(r,6):hs(r,4)}(r.getUTCFullYear())+"-"+hs(r.getUTCMonth()+1,2)+"-"+hs(r.getUTCDate(),2)+(g?"T"+hs(c,2)+":"+hs(u,2)+":"+hs(f,2)+"."+hs(g,3)+"Z":f?"T"+hs(c,2)+":"+hs(u,2)+":"+hs(f,2)+"Z":u||c?"T"+hs(c,2)+":"+hs(u,2)+"Z":"")}(N):c.test(N+="")?'"'+N.replace(/"/g,'""')+'"':N}return{parse:function f(N,P){var W,K,J=g(N,function(Y,Q){if(W)return W(Y,Q-1);K=Y,W=P?function F1(r,c){var u=Zm(r);return function(f,g){return c(u(f),g,r)}}(Y,P):Zm(Y)});return J.columns=K||[],J},parseRows:g,format:function y(N,P){return null==P&&(P=eb(N)),[P.map(I).join(r)].concat(m(N,P)).join("\n")},formatBody:function C(N,P){return null==P&&(P=eb(N)),m(N,P).join("\n")},formatRows:function E(N){return N.map(S).join("\n")},formatRow:S,formatValue:I}}var Fc=xp(","),tb=Fc.parse,_1=Fc.parseRows,q1=Fc.format,W1=Fc.formatBody,V1=Fc.formatRows,U1=Fc.formatRow,G1=Fc.formatValue,zc=xp("\t"),ib=zc.parse,Y1=zc.parseRows,j1=zc.format,K1=zc.formatBody,X1=zc.formatRows,Q1=zc.formatRow,J1=zc.formatValue;const eC=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function tC(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.blob()}function nC(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.arrayBuffer()}function sC(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.text()}function Tp(r,c){return fetch(r,c).then(sC)}function nb(r){return function(c,u,f){return 2===arguments.length&&"function"==typeof u&&(f=u,u=void 0),Tp(c,u).then(function(g){return r(g,f)})}}var oC=nb(tb),lC=nb(ib);function dC(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);if(204!==r.status&&205!==r.status)return r.json()}function gv(r){return(c,u)=>Tp(c,u).then(f=>(new DOMParser).parseFromString(f,r))}var hC=gv("application/xml"),fC=gv("text/html"),pC=gv("image/svg+xml");function ab(r,c,u,f){if(isNaN(c)||isNaN(u))return r;var g,N,P,W,K,J,Y,Q,ne,m=r._root,y={data:f},C=r._x0,E=r._y0,S=r._x1,I=r._y1;if(!m)return r._root=y,r;for(;m.length;)if((J=c>=(N=(C+S)/2))?C=N:S=N,(Y=u>=(P=(E+I)/2))?E=P:I=P,g=m,!(m=m[Q=Y<<1|J]))return g[Q]=y,r;if(W=+r._x.call(null,m.data),K=+r._y.call(null,m.data),c===W&&u===K)return y.next=m,g?g[Q]=y:r._root=y,r;do{g=g?g[Q]=new Array(4):r._root=new Array(4),(J=c>=(N=(C+S)/2))?C=N:S=N,(Y=u>=(P=(E+I)/2))?E=P:I=P}while((Q=Y<<1|J)==(ne=(K>=P)<<1|W>=N));return g[ne]=m,g[Q]=y,r}function za(r,c,u,f,g){this.node=r,this.x0=c,this.y0=u,this.x1=f,this.y1=g}function $C(r){return r[0]}function MC(r){return r[1]}function kp(r,c,u){var f=new vv(c??$C,u??MC,NaN,NaN,NaN,NaN);return null==r?f:f.addAll(r)}function vv(r,c,u,f,g,m){this._x=r,this._y=c,this._x0=u,this._y0=f,this._x1=g,this._y1=m,this._root=void 0}function sb(r){for(var c={data:r.data},u=c;r=r.next;)u=u.next={data:r.data};return c}var Ha=kp.prototype=vv.prototype;function Zn(r){return function(){return r}}function Rl(r){return 1e-6*(r()-.5)}function LC(r){return r.x+r.vx}function PC(r){return r.y+r.vy}function BC(r){return r.index}function rb(r,c){var u=r.get(c);if(!u)throw new Error("node not found: "+c);return u}Ha.copy=function(){var u,f,r=new vv(this._x,this._y,this._x0,this._y0,this._x1,this._y1),c=this._root;if(!c)return r;if(!c.length)return r._root=sb(c),r;for(u=[{source:c,target:r._root=new Array(4)}];c=u.pop();)for(var g=0;g<4;++g)(f=c.source[g])&&(f.length?u.push({source:f,target:c.target[g]=new Array(4)}):c.target[g]=sb(f));return r},Ha.add=function vC(r){const c=+this._x.call(null,r),u=+this._y.call(null,r);return ab(this.cover(c,u),c,u,r)},Ha.addAll=function mC(r){var c,u,g,m,f=r.length,y=new Array(f),C=new Array(f),E=1/0,S=1/0,I=-1/0,N=-1/0;for(u=0;u<f;++u)isNaN(g=+this._x.call(null,c=r[u]))||isNaN(m=+this._y.call(null,c))||(y[u]=g,C[u]=m,g<E&&(E=g),g>I&&(I=g),m<S&&(S=m),m>N&&(N=m));if(E>I||S>N)return this;for(this.cover(E,S).cover(I,N),u=0;u<f;++u)ab(this,y[u],C[u],r[u]);return this},Ha.cover=function bC(r,c){if(isNaN(r=+r)||isNaN(c=+c))return this;var u=this._x0,f=this._y0,g=this._x1,m=this._y1;if(isNaN(u))g=(u=Math.floor(r))+1,m=(f=Math.floor(c))+1;else{for(var E,S,y=g-u||1,C=this._root;u>r||r>=g||f>c||c>=m;)switch(S=(c<f)<<1|r<u,E=new Array(4),E[S]=C,C=E,y*=2,S){case 0:g=u+y,m=f+y;break;case 1:u=g-y,m=f+y;break;case 2:g=u+y,f=m-y;break;case 3:u=g-y,f=m-y}this._root&&this._root.length&&(this._root=C)}return this._x0=u,this._y0=f,this._x1=g,this._y1=m,this},Ha.data=function yC(){var r=[];return this.visit(function(c){if(!c.length)do{r.push(c.data)}while(c=c.next)}),r},Ha.extent=function wC(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ha.find=function CC(r,c,u){var f,y,C,E,S,K,J,g=this._x0,m=this._y0,I=this._x1,N=this._y1,P=[],W=this._root;for(W&&P.push(new za(W,g,m,I,N)),null==u?u=1/0:(g=r-u,m=c-u,I=r+u,N=c+u,u*=u);K=P.pop();)if(!(!(W=K.node)||(y=K.x0)>I||(C=K.y0)>N||(E=K.x1)<g||(S=K.y1)<m))if(W.length){var Y=(y+E)/2,Q=(C+S)/2;P.push(new za(W[3],Y,Q,E,S),new za(W[2],y,Q,Y,S),new za(W[1],Y,C,E,Q),new za(W[0],y,C,Y,Q)),(J=(c>=Q)<<1|r>=Y)&&(K=P[P.length-1],P[P.length-1]=P[P.length-1-J],P[P.length-1-J]=K)}else{var ne=r-+this._x.call(null,W.data),ie=c-+this._y.call(null,W.data),te=ne*ne+ie*ie;if(te<u){var oe=Math.sqrt(u=te);g=r-oe,m=c-oe,I=r+oe,N=c+oe,f=W.data}}return f},Ha.remove=function xC(r){if(isNaN(I=+this._x.call(null,r))||isNaN(N=+this._y.call(null,r)))return this;var c,f,g,m,I,N,P,W,K,J,Y,Q,u=this._root,y=this._x0,C=this._y0,E=this._x1,S=this._y1;if(!u)return this;if(u.length)for(;;){if((K=I>=(P=(y+E)/2))?y=P:E=P,(J=N>=(W=(C+S)/2))?C=W:S=W,c=u,!(u=u[Y=J<<1|K]))return this;if(!u.length)break;(c[Y+1&3]||c[Y+2&3]||c[Y+3&3])&&(f=c,Q=Y)}for(;u.data!==r;)if(g=u,!(u=u.next))return this;return(m=u.next)&&delete u.next,g?(m?g.next=m:delete g.next,this):c?(m?c[Y]=m:delete c[Y],(u=c[0]||c[1]||c[2]||c[3])&&u===(c[3]||c[2]||c[1]||c[0])&&!u.length&&(f?f[Q]=u:this._root=u),this):(this._root=m,this)},Ha.removeAll=function TC(r){for(var c=0,u=r.length;c<u;++c)this.remove(r[c]);return this},Ha.root=function kC(){return this._root},Ha.size=function SC(){var r=0;return this.visit(function(c){if(!c.length)do{++r}while(c=c.next)}),r},Ha.visit=function AC(r){var u,g,m,y,C,E,c=[],f=this._root;for(f&&c.push(new za(f,this._x0,this._y0,this._x1,this._y1));u=c.pop();)if(!r(f=u.node,m=u.x0,y=u.y0,C=u.x1,E=u.y1)&&f.length){var S=(m+C)/2,I=(y+E)/2;(g=f[3])&&c.push(new za(g,S,I,C,E)),(g=f[2])&&c.push(new za(g,m,I,S,E)),(g=f[1])&&c.push(new za(g,S,y,C,I)),(g=f[0])&&c.push(new za(g,m,y,S,I))}return this},Ha.visitAfter=function EC(r){var f,c=[],u=[];for(this._root&&c.push(new za(this._root,this._x0,this._y0,this._x1,this._y1));f=c.pop();){var g=f.node;if(g.length){var m,y=f.x0,C=f.y0,E=f.x1,S=f.y1,I=(y+E)/2,N=(C+S)/2;(m=g[0])&&c.push(new za(m,y,C,I,N)),(m=g[1])&&c.push(new za(m,I,C,E,N)),(m=g[2])&&c.push(new za(m,y,N,I,S)),(m=g[3])&&c.push(new za(m,I,N,E,S))}u.push(f)}for(;f=u.pop();)r(f.node,f.x0,f.y0,f.x1,f.y1);return this},Ha.x=function DC(r){return arguments.length?(this._x=r,this):this._x},Ha.y=function IC(r){return arguments.length?(this._y=r,this):this._y};const ob=4294967296;function HC(r){return r.x}function _C(r){return r.y}var WC=Math.PI*(3-Math.sqrt(5));function Sp(r,c){if((u=(r=c?r.toExponential(c-1):r.toExponential()).indexOf("e"))<0)return null;var u,f=r.slice(0,u);return[f.length>1?f[0]+f.slice(2):f,+r.slice(u+1)]}function su(r){return(r=Sp(Math.abs(r)))?r[1]:NaN}var lb,JC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ru(r){if(!(c=JC.exec(r)))throw new Error("invalid format: "+r);var c;return new Ap({fill:c[1],align:c[2],sign:c[3],symbol:c[4],zero:c[5],width:c[6],comma:c[7],precision:c[8]&&c[8].slice(1),trim:c[9],type:c[10]})}function Ap(r){this.fill=void 0===r.fill?" ":r.fill+"",this.align=void 0===r.align?">":r.align+"",this.sign=void 0===r.sign?"-":r.sign+"",this.symbol=void 0===r.symbol?"":r.symbol+"",this.zero=!!r.zero,this.width=void 0===r.width?void 0:+r.width,this.comma=!!r.comma,this.precision=void 0===r.precision?void 0:+r.precision,this.trim=!!r.trim,this.type=void 0===r.type?"":r.type+""}function cb(r,c){var u=Sp(r,c);if(!u)return r+"";var f=u[0],g=u[1];return g<0?"0."+new Array(-g).join("0")+f:f.length>g+1?f.slice(0,g+1)+"."+f.slice(g+1):f+new Array(g-f.length+2).join("0")}ru.prototype=Ap.prototype,Ap.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var db={"%":(r,c)=>(100*r).toFixed(c),b:r=>Math.round(r).toString(2),c:r=>r+"",d:function KC(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)},e:(r,c)=>r.toExponential(c),f:(r,c)=>r.toFixed(c),g:(r,c)=>r.toPrecision(c),o:r=>Math.round(r).toString(8),p:(r,c)=>cb(100*r,c),r:cb,s:function ex(r,c){var u=Sp(r,c);if(!u)return r+"";var f=u[0],g=u[1],m=g-(lb=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,y=f.length;return m===y?f:m>y?f+new Array(m-y+1).join("0"):m>0?f.slice(0,m)+"."+f.slice(m):"0."+new Array(1-m).join("0")+Sp(r,Math.max(0,c+m-1))[0]},X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function ub(r){return r}var Ep,hb=Array.prototype.map,fb=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function pb(r){var c=void 0===r.grouping||void 0===r.thousands?ub:function XC(r,c){return function(u,f){for(var g=u.length,m=[],y=0,C=r[0],E=0;g>0&&C>0&&(E+C+1>f&&(C=Math.max(1,f-E)),m.push(u.substring(g-=C,g+C)),!((E+=C+1)>f));)C=r[y=(y+1)%r.length];return m.reverse().join(c)}}(hb.call(r.grouping,Number),r.thousands+""),u=void 0===r.currency?"":r.currency[0]+"",f=void 0===r.currency?"":r.currency[1]+"",g=void 0===r.decimal?".":r.decimal+"",m=void 0===r.numerals?ub:function QC(r){return function(c){return c.replace(/[0-9]/g,function(u){return r[+u]})}}(hb.call(r.numerals,String)),y=void 0===r.percent?"%":r.percent+"",C=void 0===r.minus?"\u2212":r.minus+"",E=void 0===r.nan?"NaN":r.nan+"";function S(N){var P=(N=ru(N)).fill,W=N.align,K=N.sign,J=N.symbol,Y=N.zero,Q=N.width,ne=N.comma,ie=N.precision,te=N.trim,oe=N.type;"n"===oe?(ne=!0,oe="g"):db[oe]||(void 0===ie&&(ie=12),te=!0,oe="g"),(Y||"0"===P&&"="===W)&&(Y=!0,P="0",W="=");var pe="$"===J?u:"#"===J&&/[boxX]/.test(oe)?"0"+oe.toLowerCase():"",Ie="$"===J?f:/[%p]/.test(oe)?y:"",Le=db[oe],Ke=/[defgprs%]/.test(oe);function Se(Ce){var me,Ee,De,tt=pe,Pe=Ie;if("c"===oe)Pe=Le(Ce)+Pe,Ce="";else{var _e=(Ce=+Ce)<0||1/Ce<0;if(Ce=isNaN(Ce)?E:Le(Math.abs(Ce),ie),te&&(Ce=function ZC(r){e:for(var g,c=r.length,u=1,f=-1;u<c;++u)switch(r[u]){case".":f=g=u;break;case"0":0===f&&(f=u),g=u;break;default:if(!+r[u])break e;f>0&&(f=0)}return f>0?r.slice(0,f)+r.slice(g+1):r}(Ce)),_e&&0==+Ce&&"+"!==K&&(_e=!1),tt=(_e?"("===K?K:C:"-"===K||"("===K?"":K)+tt,Pe=("s"===oe?fb[8+lb/3]:"")+Pe+(_e&&"("===K?")":""),Ke)for(me=-1,Ee=Ce.length;++me<Ee;)if(48>(De=Ce.charCodeAt(me))||De>57){Pe=(46===De?g+Ce.slice(me+1):Ce.slice(me))+Pe,Ce=Ce.slice(0,me);break}}ne&&!Y&&(Ce=c(Ce,1/0));var lt=tt.length+Ce.length+Pe.length,dt=lt<Q?new Array(Q-lt+1).join(P):"";switch(ne&&Y&&(Ce=c(dt+Ce,dt.length?Q-Pe.length:1/0),dt=""),W){case"<":Ce=tt+Ce+Pe+dt;break;case"=":Ce=tt+dt+Ce+Pe;break;case"^":Ce=dt.slice(0,lt=dt.length>>1)+tt+Ce+Pe+dt.slice(lt);break;default:Ce=dt+tt+Ce+Pe}return m(Ce)}return ie=void 0===ie?6:/[gprs]/.test(oe)?Math.max(1,Math.min(21,ie)):Math.max(0,Math.min(20,ie)),Se.toString=function(){return N+""},Se}return{format:S,formatPrefix:function I(N,P){var W=S(((N=ru(N)).type="f",N)),K=3*Math.max(-8,Math.min(8,Math.floor(su(P)/3))),J=Math.pow(10,-K),Y=fb[8+K/3];return function(Q){return W(J*Q)+Y}}}}function gb(r){return Ep=pb(r),F.format=Ep.format,F.formatPrefix=Ep.formatPrefix,Ep}function vb(r){return Math.max(0,-su(Math.abs(r)))}function mb(r,c){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(su(c)/3)))-su(Math.abs(r)))}function bb(r,c){return r=Math.abs(r),c=Math.abs(c)-r,Math.max(0,su(c)-su(r))+1}F.format=void 0,F.formatPrefix=void 0,gb({thousands:",",grouping:[3],currency:["$",""]});var Wt=1e-6,Kh=1e-12,wi=Math.PI,Dn=wi/2,$p=wi/4,_a=2*wi,on=180/wi,Gt=wi/180,Si=Math.abs,ou=Math.atan,qa=Math.atan2,Ot=Math.cos,Dp=Math.ceil,yb=Math.exp,mv=Math.hypot,Mp=Math.log,bv=Math.pow,St=Math.sin,Qs=Math.sign||function(r){return r>0?1:r<0?-1:0},oa=Math.sqrt,yv=Math.tan;function wb(r){return r>1?0:r<-1?wi:Math.acos(r)}function Wa(r){return r>1?Dn:r<-1?-Dn:Math.asin(r)}function Cb(r){return(r=St(r/2))*r}function kn(){}function Ip(r,c){r&&Tb.hasOwnProperty(r.type)&&Tb[r.type](r,c)}var xb={Feature:function(r,c){Ip(r.geometry,c)},FeatureCollection:function(r,c){for(var u=r.features,f=-1,g=u.length;++f<g;)Ip(u[f].geometry,c)}},Tb={Sphere:function(r,c){c.sphere()},Point:function(r,c){c.point((r=r.coordinates)[0],r[1],r[2])},MultiPoint:function(r,c){for(var u=r.coordinates,f=-1,g=u.length;++f<g;)c.point((r=u[f])[0],r[1],r[2])},LineString:function(r,c){wv(r.coordinates,c,0)},MultiLineString:function(r,c){for(var u=r.coordinates,f=-1,g=u.length;++f<g;)wv(u[f],c,0)},Polygon:function(r,c){kb(r.coordinates,c)},MultiPolygon:function(r,c){for(var u=r.coordinates,f=-1,g=u.length;++f<g;)kb(u[f],c)},GeometryCollection:function(r,c){for(var u=r.geometries,f=-1,g=u.length;++f<g;)Ip(u[f],c)}};function wv(r,c,u){var m,f=-1,g=r.length-u;for(c.lineStart();++f<g;)c.point((m=r[f])[0],m[1],m[2]);c.lineEnd()}function kb(r,c){var u=-1,f=r.length;for(c.polygonStart();++u<f;)wv(r[u],c,1);c.polygonEnd()}function yr(r,c){r&&xb.hasOwnProperty(r.type)?xb[r.type](r,c):Ip(r,c)}var Sb,Ab,Cv,xv,Tv,Lp=new bn,Pp=new bn,Zr={point:kn,lineStart:kn,lineEnd:kn,polygonStart:function(){Lp=new bn,Zr.lineStart=tx,Zr.lineEnd=ix},polygonEnd:function(){var r=+Lp;Pp.add(r<0?_a+r:r),this.lineStart=this.lineEnd=this.point=kn},sphere:function(){Pp.add(_a)}};function tx(){Zr.point=nx}function ix(){Eb(Sb,Ab)}function nx(r,c){Zr.point=Eb,Sb=r,Ab=c,Cv=r*=Gt,xv=Ot(c=(c*=Gt)/2+$p),Tv=St(c)}function Eb(r,c){var u=(r*=Gt)-Cv,f=u>=0?1:-1,g=f*u,m=Ot(c=(c*=Gt)/2+$p),y=St(c),C=Tv*y,E=xv*m+C*Ot(g),S=C*f*St(g);Lp.add(qa(S,E)),Cv=r,xv=m,Tv=y}function Np(r){return[qa(r[1],r[0]),Wa(r[2])]}function Hc(r){var c=r[0],u=r[1],f=Ot(u);return[f*Ot(c),f*St(c),St(u)]}function Bp(r,c){return r[0]*c[0]+r[1]*c[1]+r[2]*c[2]}function lu(r,c){return[r[1]*c[2]-r[2]*c[1],r[2]*c[0]-r[0]*c[2],r[0]*c[1]-r[1]*c[0]]}function kv(r,c){r[0]+=c[0],r[1]+=c[1],r[2]+=c[2]}function Rp(r,c){return[r[0]*c,r[1]*c,r[2]*c]}function Op(r){var c=oa(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=c,r[1]/=c,r[2]/=c}var Sn,fs,Mn,Ds,_c,$b,Db,cu,Xh,Ol,_o,qo={point:Sv,lineStart:Ib,lineEnd:Lb,polygonStart:function(){qo.point=Pb,qo.lineStart=sx,qo.lineEnd=rx,Xh=new bn,Zr.polygonStart()},polygonEnd:function(){Zr.polygonEnd(),qo.point=Sv,qo.lineStart=Ib,qo.lineEnd=Lb,Lp<0?(Sn=-(Mn=180),fs=-(Ds=90)):Xh>Wt?Ds=90:Xh<-Wt&&(fs=-90),_o[0]=Sn,_o[1]=Mn},sphere:function(){Sn=-(Mn=180),fs=-(Ds=90)}};function Sv(r,c){Ol.push(_o=[Sn=r,Mn=r]),c<fs&&(fs=c),c>Ds&&(Ds=c)}function Mb(r,c){var u=Hc([r*Gt,c*Gt]);if(cu){var f=lu(cu,u),m=lu([f[1],-f[0],0],f);Op(m),m=Np(m);var S,y=r-_c,C=y>0?1:-1,E=m[0]*on*C,I=Si(y)>180;I^(C*_c<E&&E<C*r)?(S=m[1]*on)>Ds&&(Ds=S):I^(C*_c<(E=(E+360)%360-180)&&E<C*r)?(S=-m[1]*on)<fs&&(fs=S):(c<fs&&(fs=c),c>Ds&&(Ds=c)),I?r<_c?Ms(Sn,r)>Ms(Sn,Mn)&&(Mn=r):Ms(r,Mn)>Ms(Sn,Mn)&&(Sn=r):Mn>=Sn?(r<Sn&&(Sn=r),r>Mn&&(Mn=r)):r>_c?Ms(Sn,r)>Ms(Sn,Mn)&&(Mn=r):Ms(r,Mn)>Ms(Sn,Mn)&&(Sn=r)}else Ol.push(_o=[Sn=r,Mn=r]);c<fs&&(fs=c),c>Ds&&(Ds=c),cu=u,_c=r}function Ib(){qo.point=Mb}function Lb(){_o[0]=Sn,_o[1]=Mn,qo.point=Sv,cu=null}function Pb(r,c){if(cu){var u=r-_c;Xh.add(Si(u)>180?u+(u>0?360:-360):u)}else $b=r,Db=c;Zr.point(r,c),Mb(r,c)}function sx(){Zr.lineStart()}function rx(){Pb($b,Db),Zr.lineEnd(),Si(Xh)>Wt&&(Sn=-(Mn=180)),_o[0]=Sn,_o[1]=Mn,cu=null}function Ms(r,c){return(c-=r)<0?c+360:c}function ox(r,c){return r[0]-c[0]}function Nb(r,c){return r[0]<=r[1]?r[0]<=c&&c<=r[1]:c<r[0]||r[1]<c}var Qh,Fp,zp,Hp,_p,qp,Wp,Vp,Av,Ev,$v,Bb,Rb,Va,Ua,Ga,wr={sphere:kn,point:Dv,lineStart:Ob,lineEnd:Fb,polygonStart:function(){wr.lineStart=ux,wr.lineEnd=hx},polygonEnd:function(){wr.lineStart=Ob,wr.lineEnd=Fb}};function Dv(r,c){r*=Gt;var u=Ot(c*=Gt);Jh(u*Ot(r),u*St(r),St(c))}function Jh(r,c,u){++Qh,zp+=(r-zp)/Qh,Hp+=(c-Hp)/Qh,_p+=(u-_p)/Qh}function Ob(){wr.point=cx}function cx(r,c){r*=Gt;var u=Ot(c*=Gt);Va=u*Ot(r),Ua=u*St(r),Ga=St(c),wr.point=dx,Jh(Va,Ua,Ga)}function dx(r,c){r*=Gt;var u=Ot(c*=Gt),f=u*Ot(r),g=u*St(r),m=St(c),y=qa(oa((y=Ua*m-Ga*g)*y+(y=Ga*f-Va*m)*y+(y=Va*g-Ua*f)*y),Va*f+Ua*g+Ga*m);Fp+=y,qp+=y*(Va+(Va=f)),Wp+=y*(Ua+(Ua=g)),Vp+=y*(Ga+(Ga=m)),Jh(Va,Ua,Ga)}function Fb(){wr.point=Dv}function ux(){wr.point=fx}function hx(){zb(Bb,Rb),wr.point=Dv}function fx(r,c){Bb=r,Rb=c,r*=Gt,c*=Gt,wr.point=zb;var u=Ot(c);Va=u*Ot(r),Ua=u*St(r),Ga=St(c),Jh(Va,Ua,Ga)}function zb(r,c){r*=Gt;var u=Ot(c*=Gt),f=u*Ot(r),g=u*St(r),m=St(c),y=Ua*m-Ga*g,C=Ga*f-Va*m,E=Va*g-Ua*f,S=mv(y,C,E),I=Wa(S),N=S&&-I/S;Av.add(N*y),Ev.add(N*C),$v.add(N*E),Fp+=I,qp+=I*(Va+(Va=f)),Wp+=I*(Ua+(Ua=g)),Vp+=I*(Ga+(Ga=m)),Jh(Va,Ua,Ga)}function du(r){return function(){return r}}function Mv(r,c){function u(f,g){return f=r(f,g),c(f[0],f[1])}return r.invert&&c.invert&&(u.invert=function(f,g){return(f=c.invert(f,g))&&r.invert(f[0],f[1])}),u}function Iv(r,c){return Si(r)>wi&&(r-=Math.round(r/_a)*_a),[r,c]}function Lv(r,c,u){return(r%=_a)?c||u?Mv(_b(r),qb(c,u)):_b(r):c||u?qb(c,u):Iv}function Hb(r){return function(c,u){return Si(c+=r)>wi&&(c-=Math.round(c/_a)*_a),[c,u]}}function _b(r){var c=Hb(r);return c.invert=Hb(-r),c}function qb(r,c){var u=Ot(r),f=St(r),g=Ot(c),m=St(c);function y(C,E){var S=Ot(E),I=Ot(C)*S,N=St(C)*S,P=St(E),W=P*u+I*f;return[qa(N*g-W*m,I*u-P*f),Wa(W*g+N*m)]}return y.invert=function(C,E){var S=Ot(E),I=Ot(C)*S,N=St(C)*S,P=St(E),W=P*g-N*m;return[qa(N*g+P*m,I*u+W*f),Wa(W*u-I*f)]},y}function Wb(r){function c(u){return(u=r(u[0]*Gt,u[1]*Gt))[0]*=on,u[1]*=on,u}return r=Lv(r[0]*Gt,r[1]*Gt,r.length>2?r[2]*Gt:0),c.invert=function(u){return(u=r.invert(u[0]*Gt,u[1]*Gt))[0]*=on,u[1]*=on,u},c}function Vb(r,c,u,f,g,m){if(u){var y=Ot(c),C=St(c),E=f*u;null==g?(g=c+f*_a,m=c-E/2):(g=Ub(y,g),m=Ub(y,m),(f>0?g<m:g>m)&&(g+=f*_a));for(var S,I=g;f>0?I>m:I<m;I-=E)S=Np([y,-C*Ot(I),-C*St(I)]),r.point(S[0],S[1])}}function Ub(r,c){(c=Hc(c))[0]-=r,Op(c);var u=wb(-c[1]);return((-c[2]<0?-u:u)+_a-Wt)%_a}function Gb(){var c,r=[];return{point:function(u,f,g){c.push([u,f,g])},lineStart:function(){r.push(c=[])},lineEnd:kn,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var u=r;return r=[],c=null,u}}}function Up(r,c){return Si(r[0]-c[0])<Wt&&Si(r[1]-c[1])<Wt}function Gp(r,c,u,f){this.x=r,this.z=c,this.o=u,this.e=f,this.v=!1,this.n=this.p=null}function Yb(r,c,u,f,g){var C,E,m=[],y=[];if(r.forEach(function(K){if(!((J=K.length-1)<=0)){var J,ne,Y=K[0],Q=K[J];if(Up(Y,Q)){if(!Y[2]&&!Q[2]){for(g.lineStart(),C=0;C<J;++C)g.point((Y=K[C])[0],Y[1]);return void g.lineEnd()}Q[0]+=2*Wt}m.push(ne=new Gp(Y,K,null,!0)),y.push(ne.o=new Gp(Y,null,ne,!1)),m.push(ne=new Gp(Q,K,null,!1)),y.push(ne.o=new Gp(Q,null,ne,!0))}}),m.length){for(y.sort(c),jb(m),jb(y),C=0,E=y.length;C<E;++C)y[C].e=u=!u;for(var I,N,S=m[0];;){for(var P=S,W=!0;P.v;)if((P=P.n)===S)return;I=P.z,g.lineStart();do{if(P.v=P.o.v=!0,P.e){if(W)for(C=0,E=I.length;C<E;++C)g.point((N=I[C])[0],N[1]);else f(P.x,P.n.x,1,g);P=P.n}else{if(W)for(C=(I=P.p.z).length-1;C>=0;--C)g.point((N=I[C])[0],N[1]);else f(P.x,P.p.x,-1,g);P=P.p}I=(P=P.o).z,W=!W}while(!P.v);g.lineEnd()}}}function jb(r){if(c=r.length){for(var c,g,u=0,f=r[0];++u<c;)f.n=g=r[u],g.p=f,f=g;f.n=g=r[0],g.p=f}}function Pv(r){return Si(r[0])<=wi?r[0]:Qs(r[0])*((Si(r[0])+wi)%_a-wi)}function Kb(r,c){var u=Pv(c),f=c[1],g=St(f),m=[St(u),-Ot(u),0],y=0,C=0,E=new bn;1===g?f=Dn+Wt:-1===g&&(f=-Dn-Wt);for(var S=0,I=r.length;S<I;++S)if(P=(N=r[S]).length)for(var N,P,W=N[P-1],K=Pv(W),J=W[1]/2+$p,Y=St(J),Q=Ot(J),ne=0;ne<P;++ne,K=te,Y=pe,Q=Ie,W=ie){var ie=N[ne],te=Pv(ie),oe=ie[1]/2+$p,pe=St(oe),Ie=Ot(oe),Le=te-K,Ke=Le>=0?1:-1,Se=Ke*Le,Ce=Se>wi,tt=Y*pe;if(E.add(qa(tt*Ke*St(Se),Q*Ie+tt*Ot(Se))),y+=Ce?Le+Ke*_a:Le,Ce^K>=u^te>=u){var Pe=lu(Hc(W),Hc(ie));Op(Pe);var me=lu(m,Pe);Op(me);var Ee=(Ce^Le>=0?-1:1)*Wa(me[2]);(f>Ee||f===Ee&&(Pe[0]||Pe[1]))&&(C+=Ce^Le>=0?1:-1)}}return(y<-Wt||y<Wt&&E<-Kh)^1&C}function Xb(r,c,u,f){return function(g){var S,I,N,m=c(g),y=Gb(),C=c(y),E=!1,P={point:W,lineStart:J,lineEnd:Y,polygonStart:function(){P.point=Q,P.lineStart=ne,P.lineEnd=ie,I=[],S=[]},polygonEnd:function(){P.point=W,P.lineStart=J,P.lineEnd=Y,I=el(I);var te=Kb(S,f);I.length?(E||(g.polygonStart(),E=!0),Yb(I,mx,te,u,g)):te&&(E||(g.polygonStart(),E=!0),g.lineStart(),u(null,null,1,g),g.lineEnd()),E&&(g.polygonEnd(),E=!1),I=S=null},sphere:function(){g.polygonStart(),g.lineStart(),u(null,null,1,g),g.lineEnd(),g.polygonEnd()}};function W(te,oe){r(te,oe)&&g.point(te,oe)}function K(te,oe){m.point(te,oe)}function J(){P.point=K,m.lineStart()}function Y(){P.point=W,m.lineEnd()}function Q(te,oe){N.push([te,oe]),C.point(te,oe)}function ne(){C.lineStart(),N=[]}function ie(){Q(N[0][0],N[0][1]),C.lineEnd();var pe,Le,Ke,Se,te=C.clean(),oe=y.result(),Ie=oe.length;if(N.pop(),S.push(N),N=null,Ie){if(1&te){if((Le=(Ke=oe[0]).length-1)>0){for(E||(g.polygonStart(),E=!0),g.lineStart(),pe=0;pe<Le;++pe)g.point((Se=Ke[pe])[0],Se[1]);g.lineEnd()}return}Ie>1&&2&te&&oe.push(oe.pop().concat(oe.shift())),I.push(oe.filter(vx))}}return P}}function vx(r){return r.length>1}function mx(r,c){return((r=r.x)[0]<0?r[1]-Dn-Wt:Dn-r[1])-((c=c.x)[0]<0?c[1]-Dn-Wt:Dn-c[1])}Iv.invert=Iv;var Nv=Xb(function(){return!0},function bx(r){var g,c=NaN,u=NaN,f=NaN;return{lineStart:function(){r.lineStart(),g=1},point:function(m,y){var C=m>0?wi:-wi,E=Si(m-c);Si(E-wi)<Wt?(r.point(c,u=(u+y)/2>0?Dn:-Dn),r.point(f,u),r.lineEnd(),r.lineStart(),r.point(C,u),r.point(m,u),g=0):f!==C&&E>=wi&&(Si(c-f)<Wt&&(c-=f*Wt),Si(m-C)<Wt&&(m-=C*Wt),u=function yx(r,c,u,f){var g,m,y=St(r-u);return Si(y)>Wt?ou((St(c)*(m=Ot(f))*St(u)-St(f)*(g=Ot(c))*St(r))/(g*m*y)):(c+f)/2}(c,u,m,y),r.point(f,u),r.lineEnd(),r.lineStart(),r.point(C,u),g=0),r.point(c=m,u=y),f=C},lineEnd:function(){r.lineEnd(),c=u=NaN},clean:function(){return 2-g}}},function wx(r,c,u,f){var g;if(null==r)f.point(-wi,g=u*Dn),f.point(0,g),f.point(wi,g),f.point(wi,0),f.point(wi,-g),f.point(0,-g),f.point(-wi,-g),f.point(-wi,0),f.point(-wi,g);else if(Si(r[0]-c[0])>Wt){var m=r[0]<c[0]?wi:-wi;f.point(-m,g=u*m/2),f.point(0,g),f.point(m,g)}else f.point(c[0],c[1])},[-wi,-Dn]);function Qb(r){var c=Ot(r),u=6*Gt,f=c>0,g=Si(c)>Wt;function y(I,N){return Ot(I)*Ot(N)>c}function E(I,N,P){var J=[1,0,0],Y=lu(Hc(I),Hc(N)),Q=Bp(Y,Y),ne=Y[0],ie=Q-ne*ne;if(!ie)return!P&&I;var te=c*Q/ie,oe=-c*ne/ie,pe=lu(J,Y),Ie=Rp(J,te);kv(Ie,Rp(Y,oe));var Ke=pe,Se=Bp(Ie,Ke),Ce=Bp(Ke,Ke),tt=Se*Se-Ce*(Bp(Ie,Ie)-1);if(!(tt<0)){var Pe=oa(tt),me=Rp(Ke,(-Se-Pe)/Ce);if(kv(me,Ie),me=Np(me),!P)return me;var dt,Ee=I[0],De=N[0],_e=I[1],lt=N[1];De<Ee&&(dt=Ee,Ee=De,De=dt);var mt=De-Ee,At=Si(mt-wi)<Wt;if(!At&&lt<_e&&(dt=_e,_e=lt,lt=dt),At||mt<Wt?At?_e+lt>0^me[1]<(Si(me[0]-Ee)<Wt?_e:lt):_e<=me[1]&&me[1]<=lt:mt>wi^(Ee<=me[0]&&me[0]<=De)){var Ki=Rp(Ke,(-Se+Pe)/Ce);return kv(Ki,Ie),[me,Np(Ki)]}}}function S(I,N){var P=f?r:wi-r,W=0;return I<-P?W|=1:I>P&&(W|=2),N<-P?W|=4:N>P&&(W|=8),W}return Xb(y,function C(I){var N,P,W,K,J;return{lineStart:function(){K=W=!1,J=1},point:function(Y,Q){var ie,ne=[Y,Q],te=y(Y,Q),oe=f?te?0:S(Y,Q):te?S(Y+(Y<0?wi:-wi),Q):0;if(!N&&(K=W=te)&&I.lineStart(),te!==W&&(!(ie=E(N,ne))||Up(N,ie)||Up(ne,ie))&&(ne[2]=1),te!==W)J=0,te?(I.lineStart(),ie=E(ne,N),I.point(ie[0],ie[1])):(ie=E(N,ne),I.point(ie[0],ie[1],2),I.lineEnd()),N=ie;else if(g&&N&&f^te){var pe;!(oe&P)&&(pe=E(ne,N,!0))&&(J=0,f?(I.lineStart(),I.point(pe[0][0],pe[0][1]),I.point(pe[1][0],pe[1][1]),I.lineEnd()):(I.point(pe[1][0],pe[1][1]),I.lineEnd(),I.lineStart(),I.point(pe[0][0],pe[0][1],3)))}te&&(!N||!Up(N,ne))&&I.point(ne[0],ne[1]),N=ne,W=te,P=oe},lineEnd:function(){W&&I.lineEnd(),N=null},clean:function(){return J|(K&&W)<<1}}},function m(I,N,P,W){Vb(W,r,u,P,I,N)},f?[0,-r]:[-wi,r-wi])}var Zh=1e9,Yp=-Zh;function jp(r,c,u,f){function g(S,I){return r<=S&&S<=u&&c<=I&&I<=f}function m(S,I,N,P){var W=0,K=0;if(null==S||(W=y(S,N))!==(K=y(I,N))||E(S,I)<0^N>0)do{P.point(0===W||3===W?r:u,W>1?f:c)}while((W=(W+N+4)%4)!==K);else P.point(I[0],I[1])}function y(S,I){return Si(S[0]-r)<Wt?I>0?0:3:Si(S[0]-u)<Wt?I>0?2:1:Si(S[1]-c)<Wt?I>0?1:0:I>0?3:2}function C(S,I){return E(S.x,I.x)}function E(S,I){var N=y(S,1),P=y(I,1);return N!==P?N-P:0===N?I[1]-S[1]:1===N?S[0]-I[0]:2===N?S[1]-I[1]:I[0]-S[0]}return function(S){var P,W,K,J,Y,Q,ne,ie,te,oe,pe,I=S,N=Gb(),Ie={point:Le,lineStart:function tt(){Ie.point=me,W&&W.push(K=[]),oe=!0,te=!1,ne=ie=NaN},lineEnd:function Pe(){P&&(me(J,Y),Q&&te&&N.rejoin(),P.push(N.result())),Ie.point=Le,te&&I.lineEnd()},polygonStart:function Se(){I=N,P=[],W=[],pe=!0},polygonEnd:function Ce(){var Ee=function Ke(){for(var Ee=0,De=0,_e=W.length;De<_e;++De)for(var Ht,Ki,lt=W[De],dt=1,mt=lt.length,At=lt[0],Ri=At[0],$i=At[1];dt<mt;++dt)Ht=Ri,Ki=$i,Ri=(At=lt[dt])[0],$i=At[1],Ki<=f?$i>f&&(Ri-Ht)*(f-Ki)>($i-Ki)*(r-Ht)&&++Ee:$i<=f&&(Ri-Ht)*(f-Ki)<($i-Ki)*(r-Ht)&&--Ee;return Ee}(),De=pe&&Ee,_e=(P=el(P)).length;(De||_e)&&(S.polygonStart(),De&&(S.lineStart(),m(null,null,1,S),S.lineEnd()),_e&&Yb(P,C,Ee,m,S),S.polygonEnd()),I=S,P=W=K=null}};function Le(Ee,De){g(Ee,De)&&I.point(Ee,De)}function me(Ee,De){var _e=g(Ee,De);if(W&&K.push([Ee,De]),oe)J=Ee,Y=De,Q=_e,oe=!1,_e&&(I.lineStart(),I.point(Ee,De));else if(_e&&te)I.point(Ee,De);else{var lt=[ne=Math.max(Yp,Math.min(Zh,ne)),ie=Math.max(Yp,Math.min(Zh,ie))],dt=[Ee=Math.max(Yp,Math.min(Zh,Ee)),De=Math.max(Yp,Math.min(Zh,De))];!function Cx(r,c,u,f,g,m){var K,y=r[0],C=r[1],I=0,N=1,P=c[0]-y,W=c[1]-C;if(K=u-y,P||!(K>0)){if(K/=P,P<0){if(K<I)return;K<N&&(N=K)}else if(P>0){if(K>N)return;K>I&&(I=K)}if(K=g-y,P||!(K<0)){if(K/=P,P<0){if(K>N)return;K>I&&(I=K)}else if(P>0){if(K<I)return;K<N&&(N=K)}if(K=f-C,W||!(K>0)){if(K/=W,W<0){if(K<I)return;K<N&&(N=K)}else if(W>0){if(K>N)return;K>I&&(I=K)}if(K=m-C,W||!(K<0)){if(K/=W,W<0){if(K>N)return;K>I&&(I=K)}else if(W>0){if(K<I)return;K<N&&(N=K)}return I>0&&(r[0]=y+I*P,r[1]=C+I*W),N<1&&(c[0]=y+N*P,c[1]=C+N*W),!0}}}}}(lt,dt,r,c,u,f)?_e&&(I.lineStart(),I.point(Ee,De),pe=!1):(te||(I.lineStart(),I.point(lt[0],lt[1])),I.point(dt[0],dt[1]),_e||I.lineEnd(),pe=!1)}ne=Ee,ie=De,te=_e}return Ie}}var Bv,Rv,Kp,Xp,uu={sphere:kn,point:kn,lineStart:function Tx(){uu.point=Sx,uu.lineEnd=kx},lineEnd:kn,polygonStart:kn,polygonEnd:kn};function kx(){uu.point=uu.lineEnd=kn}function Sx(r,c){Rv=r*=Gt,Kp=St(c*=Gt),Xp=Ot(c),uu.point=Ax}function Ax(r,c){r*=Gt;var u=St(c*=Gt),f=Ot(c),g=Si(r-Rv),m=Ot(g),C=f*St(g),E=Xp*u-Kp*f*m,S=Kp*u+Xp*f*m;Bv.add(qa(oa(C*C+E*E),S)),Rv=r,Kp=u,Xp=f}function Jb(r){return Bv=new bn,yr(r,uu),+Bv}var Ov=[null,null],Ex={type:"LineString",coordinates:Ov};function Qp(r,c){return Ov[0]=r,Ov[1]=c,Jb(Ex)}var Zb={Feature:function(r,c){return Jp(r.geometry,c)},FeatureCollection:function(r,c){for(var u=r.features,f=-1,g=u.length;++f<g;)if(Jp(u[f].geometry,c))return!0;return!1}},e0={Sphere:function(){return!0},Point:function(r,c){return t0(r.coordinates,c)},MultiPoint:function(r,c){for(var u=r.coordinates,f=-1,g=u.length;++f<g;)if(t0(u[f],c))return!0;return!1},LineString:function(r,c){return i0(r.coordinates,c)},MultiLineString:function(r,c){for(var u=r.coordinates,f=-1,g=u.length;++f<g;)if(i0(u[f],c))return!0;return!1},Polygon:function(r,c){return n0(r.coordinates,c)},MultiPolygon:function(r,c){for(var u=r.coordinates,f=-1,g=u.length;++f<g;)if(n0(u[f],c))return!0;return!1},GeometryCollection:function(r,c){for(var u=r.geometries,f=-1,g=u.length;++f<g;)if(Jp(u[f],c))return!0;return!1}};function Jp(r,c){return!(!r||!e0.hasOwnProperty(r.type))&&e0[r.type](r,c)}function t0(r,c){return 0===Qp(r,c)}function i0(r,c){for(var u,f,g,m=0,y=r.length;m<y;m++){if(0===(f=Qp(r[m],c))||m>0&&(g=Qp(r[m],r[m-1]))>0&&u<=g&&f<=g&&(u+f-g)*(1-Math.pow((u-f)/g,2))<Kh*g)return!0;u=f}return!1}function n0(r,c){return!!Kb(r.map($x),a0(c))}function $x(r){return(r=r.map(a0)).pop(),r}function a0(r){return[r[0]*Gt,r[1]*Gt]}function s0(r,c,u){var f=ta(r,c-Wt,u).concat(c);return function(g){return f.map(function(m){return[g,m]})}}function r0(r,c,u){var f=ta(r,c-Wt,u).concat(c);return function(g){return f.map(function(m){return[m,g]})}}function o0(){var r,c,u,f,g,m,y,C,P,W,K,J,E=10,S=E,I=90,N=360,Y=2.5;function Q(){return{type:"MultiLineString",coordinates:ne()}}function ne(){return ta(Dp(f/I)*I,u,I).map(K).concat(ta(Dp(C/N)*N,y,N).map(J)).concat(ta(Dp(c/E)*E,r,E).filter(function(ie){return Si(ie%I)>Wt}).map(P)).concat(ta(Dp(m/S)*S,g,S).filter(function(ie){return Si(ie%N)>Wt}).map(W))}return Q.lines=function(){return ne().map(function(ie){return{type:"LineString",coordinates:ie}})},Q.outline=function(){return{type:"Polygon",coordinates:[K(f).concat(J(y).slice(1),K(u).reverse().slice(1),J(C).reverse().slice(1))]}},Q.extent=function(ie){return arguments.length?Q.extentMajor(ie).extentMinor(ie):Q.extentMinor()},Q.extentMajor=function(ie){return arguments.length?(C=+ie[0][1],y=+ie[1][1],(f=+ie[0][0])>(u=+ie[1][0])&&(ie=f,f=u,u=ie),C>y&&(ie=C,C=y,y=ie),Q.precision(Y)):[[f,C],[u,y]]},Q.extentMinor=function(ie){return arguments.length?(m=+ie[0][1],g=+ie[1][1],(c=+ie[0][0])>(r=+ie[1][0])&&(ie=c,c=r,r=ie),m>g&&(ie=m,m=g,g=ie),Q.precision(Y)):[[c,m],[r,g]]},Q.step=function(ie){return arguments.length?Q.stepMajor(ie).stepMinor(ie):Q.stepMinor()},Q.stepMajor=function(ie){return arguments.length?(I=+ie[0],N=+ie[1],Q):[I,N]},Q.stepMinor=function(ie){return arguments.length?(E=+ie[0],S=+ie[1],Q):[E,S]},Q.precision=function(ie){return arguments.length?(Y=+ie,P=s0(m,g,90),W=r0(c,r,Y),K=s0(C,y,90),J=r0(f,u,Y),Q):Y},Q.extentMajor([[-180,-90+Wt],[180,90-Wt]]).extentMinor([[-180,-80-Wt],[180,80+Wt]])}var l0,c0,Hv,_v,ef=r=>r,Fv=new bn,zv=new bn,Fl={point:kn,lineStart:kn,lineEnd:kn,polygonStart:function(){Fl.lineStart=Lx,Fl.lineEnd=Nx},polygonEnd:function(){Fl.lineStart=Fl.lineEnd=Fl.point=kn,Fv.add(Si(zv)),zv=new bn},result:function(){var r=Fv/2;return Fv=new bn,r}};function Lx(){Fl.point=Px}function Px(r,c){Fl.point=d0,l0=Hv=r,c0=_v=c}function d0(r,c){zv.add(_v*r-Hv*c),Hv=r,_v=c}function Nx(){d0(l0,c0)}var h0,f0,eo,to,u0=Fl,hu=1/0,Zp=hu,tf=-hu,eg=tf,tg={point:function Rx(r,c){r<hu&&(hu=r),r>tf&&(tf=r),c<Zp&&(Zp=c),c>eg&&(eg=c)},lineStart:kn,lineEnd:kn,polygonStart:kn,polygonEnd:kn,result:function(){var r=[[hu,Zp],[tf,eg]];return tf=eg=-(Zp=hu=1/0),r}},qv=0,Wv=0,nf=0,ig=0,ng=0,fu=0,Vv=0,Uv=0,af=0,Cr={point:qc,lineStart:p0,lineEnd:g0,polygonStart:function(){Cr.lineStart=zx,Cr.lineEnd=Hx},polygonEnd:function(){Cr.point=qc,Cr.lineStart=p0,Cr.lineEnd=g0},result:function(){var r=af?[Vv/af,Uv/af]:fu?[ig/fu,ng/fu]:nf?[qv/nf,Wv/nf]:[NaN,NaN];return qv=Wv=nf=ig=ng=fu=Vv=Uv=af=0,r}};function qc(r,c){qv+=r,Wv+=c,++nf}function p0(){Cr.point=Ox}function Ox(r,c){Cr.point=Fx,qc(eo=r,to=c)}function Fx(r,c){var u=r-eo,f=c-to,g=oa(u*u+f*f);ig+=g*(eo+r)/2,ng+=g*(to+c)/2,fu+=g,qc(eo=r,to=c)}function g0(){Cr.point=qc}function zx(){Cr.point=_x}function Hx(){v0(h0,f0)}function _x(r,c){Cr.point=v0,qc(h0=eo=r,f0=to=c)}function v0(r,c){var u=r-eo,f=c-to,g=oa(u*u+f*f);ig+=g*(eo+r)/2,ng+=g*(to+c)/2,fu+=g,Vv+=(g=to*r-eo*c)*(eo+r),Uv+=g*(to+c),af+=3*g,qc(eo=r,to=c)}var m0=Cr;function b0(r){this._context=r}b0.prototype={_radius:4.5,pointRadius:function(r){return this._radius=r,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(r,c){switch(this._point){case 0:this._context.moveTo(r,c),this._point=1;break;case 1:this._context.lineTo(r,c);break;default:this._context.moveTo(r+this._radius,c),this._context.arc(r,c,this._radius,0,_a)}},result:kn};var Yv,y0,w0,sf,rf,Gv=new bn,ag={point:kn,lineStart:function(){ag.point=qx},lineEnd:function(){Yv&&C0(y0,w0),ag.point=kn},polygonStart:function(){Yv=!0},polygonEnd:function(){Yv=null},result:function(){var r=+Gv;return Gv=new bn,r}};function qx(r,c){ag.point=C0,y0=sf=r,w0=rf=c}function C0(r,c){Gv.add(oa((sf-=r)*sf+(rf-=c)*rf)),sf=r,rf=c}var x0=ag;let T0,sg,k0,S0;class A0{constructor(c){this._append=null==c?E0:function Wx(r){const c=Math.floor(r);if(!(c>=0))throw new RangeError(`invalid digits: ${r}`);if(c>15)return E0;if(c!==T0){const u=10**c;T0=c,sg=function(g){let m=1;this._+=g[0];for(const y=g.length;m<y;++m)this._+=Math.round(arguments[m]*u)/u+g[m]}}return sg}(c),this._radius=4.5,this._=""}pointRadius(c){return this._radius=+c,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(c,u){switch(this._point){case 0:this._append`M${c},${u}`,this._point=1;break;case 1:this._append`L${c},${u}`;break;default:if(this._append`M${c},${u}`,this._radius!==k0||this._append!==sg){const f=this._radius,g=this._;this._="",this._append`m0,${f}a${f},${f} 0 1,1 0,${-2*f}a${f},${f} 0 1,1 0,${2*f}z`,k0=f,sg=this._append,S0=this._,this._=g}this._+=S0}}result(){const c=this._;return this._="",c.length?c:null}}function E0(r){let c=1;this._+=r[0];for(const u=r.length;c<u;++c)this._+=arguments[c]+r[c]}function of(r){return function(c){var u=new jv;for(var f in r)u[f]=r[f];return u.stream=c,u}}function jv(){}function Kv(r,c,u){var f=r.clipExtent&&r.clipExtent();return r.scale(150).translate([0,0]),null!=f&&r.clipExtent(null),yr(u,r.stream(tg)),c(tg.result()),null!=f&&r.clipExtent(f),r}function rg(r,c,u){return Kv(r,function(f){var g=c[1][0]-c[0][0],m=c[1][1]-c[0][1],y=Math.min(g/(f[1][0]-f[0][0]),m/(f[1][1]-f[0][1])),C=+c[0][0]+(g-y*(f[1][0]+f[0][0]))/2,E=+c[0][1]+(m-y*(f[1][1]+f[0][1]))/2;r.scale(150*y).translate([C,E])},u)}function Xv(r,c,u){return rg(r,[[0,0],c],u)}function Qv(r,c,u){return Kv(r,function(f){var g=+c,m=g/(f[1][0]-f[0][0]),y=(g-m*(f[1][0]+f[0][0]))/2,C=-m*f[0][1];r.scale(150*m).translate([y,C])},u)}function Jv(r,c,u){return Kv(r,function(f){var g=+c,m=g/(f[1][1]-f[0][1]),y=-m*f[0][0],C=(g-m*(f[1][1]+f[0][1]))/2;r.scale(150*m).translate([y,C])},u)}jv.prototype={constructor:jv,point:function(r,c){this.stream.point(r,c)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var $0=16,Gx=Ot(30*Gt);function D0(r,c){return+c?function jx(r,c){function u(f,g,m,y,C,E,S,I,N,P,W,K,J,Y){var Q=S-f,ne=I-g,ie=Q*Q+ne*ne;if(ie>4*c&&J--){var te=y+P,oe=C+W,pe=E+K,Ie=oa(te*te+oe*oe+pe*pe),Le=Wa(pe/=Ie),Ke=Si(Si(pe)-1)<Wt||Si(m-N)<Wt?(m+N)/2:qa(oe,te),Se=r(Ke,Le),Ce=Se[0],tt=Se[1],Pe=Ce-f,me=tt-g,Ee=ne*Pe-Q*me;(Ee*Ee/ie>c||Si((Q*Pe+ne*me)/ie-.5)>.3||y*P+C*W+E*K<Gx)&&(u(f,g,m,y,C,E,Ce,tt,Ke,te/=Ie,oe/=Ie,pe,J,Y),Y.point(Ce,tt),u(Ce,tt,Ke,te,oe,pe,S,I,N,P,W,K,J,Y))}}return function(f){var g,m,y,C,E,S,I,N,P,W,K,J,Y={point:Q,lineStart:ne,lineEnd:te,polygonStart:function(){f.polygonStart(),Y.lineStart=oe},polygonEnd:function(){f.polygonEnd(),Y.lineStart=ne}};function Q(Le,Ke){Le=r(Le,Ke),f.point(Le[0],Le[1])}function ne(){N=NaN,Y.point=ie,f.lineStart()}function ie(Le,Ke){var Se=Hc([Le,Ke]),Ce=r(Le,Ke);u(N,P,I,W,K,J,N=Ce[0],P=Ce[1],I=Le,W=Se[0],K=Se[1],J=Se[2],$0,f),f.point(N,P)}function te(){Y.point=Q,f.lineEnd()}function oe(){ne(),Y.point=pe,Y.lineEnd=Ie}function pe(Le,Ke){ie(g=Le,Ke),m=N,y=P,C=W,E=K,S=J,Y.point=ie}function Ie(){u(N,P,I,W,K,J,m,y,g,C,E,S,$0,f),Y.lineEnd=te,te()}return Y}}(r,c):function Yx(r){return of({point:function(c,u){c=r(c,u),this.stream.point(c[0],c[1])}})}(r)}var Kx=of({point:function(r,c){this.stream.point(r*Gt,c*Gt)}});function M0(r,c,u,f,g,m){if(!m)return function Qx(r,c,u,f,g){function m(y,C){return[c+r*(y*=f),u-r*(C*=g)]}return m.invert=function(y,C){return[(y-c)/r*f,(u-C)/r*g]},m}(r,c,u,f,g);var y=Ot(m),C=St(m),E=y*r,S=C*r,I=y/r,N=C/r,P=(C*u-y*c)/r,W=(C*c+y*u)/r;function K(J,Y){return[E*(J*=f)-S*(Y*=g)+c,u-S*J-E*Y]}return K.invert=function(J,Y){return[f*(I*J-N*Y+P),g*(W-N*J-I*Y)]},K}function io(r){return Zv(function(){return r})()}function Zv(r){var c,I,Q,ne,ie,pe,Ie,Le,Ke,Se,u=150,f=480,g=250,m=0,y=0,C=0,E=0,S=0,N=0,P=1,W=1,K=null,J=Nv,Y=null,te=ef,oe=.5;function Ce(Ee){return Le(Ee[0]*Gt,Ee[1]*Gt)}function tt(Ee){return(Ee=Le.invert(Ee[0],Ee[1]))&&[Ee[0]*on,Ee[1]*on]}function Pe(){var Ee=M0(u,0,0,P,W,N).apply(null,c(m,y)),De=M0(u,f-Ee[0],g-Ee[1],P,W,N);return I=Lv(C,E,S),Ie=Mv(c,De),Le=Mv(I,Ie),pe=D0(Ie,oe),me()}function me(){return Ke=Se=null,Ce}return Ce.stream=function(Ee){return Ke&&Se===Ee?Ke:Ke=Kx(function Xx(r){return of({point:function(c,u){var f=r(c,u);return this.stream.point(f[0],f[1])}})}(I)(J(pe(te(Se=Ee)))))},Ce.preclip=function(Ee){return arguments.length?(J=Ee,K=void 0,me()):J},Ce.postclip=function(Ee){return arguments.length?(te=Ee,Y=Q=ne=ie=null,me()):te},Ce.clipAngle=function(Ee){return arguments.length?(J=+Ee?Qb(K=Ee*Gt):(K=null,Nv),me()):K*on},Ce.clipExtent=function(Ee){return arguments.length?(te=null==Ee?(Y=Q=ne=ie=null,ef):jp(Y=+Ee[0][0],Q=+Ee[0][1],ne=+Ee[1][0],ie=+Ee[1][1]),me()):null==Y?null:[[Y,Q],[ne,ie]]},Ce.scale=function(Ee){return arguments.length?(u=+Ee,Pe()):u},Ce.translate=function(Ee){return arguments.length?(f=+Ee[0],g=+Ee[1],Pe()):[f,g]},Ce.center=function(Ee){return arguments.length?(m=Ee[0]%360*Gt,y=Ee[1]%360*Gt,Pe()):[m*on,y*on]},Ce.rotate=function(Ee){return arguments.length?(C=Ee[0]%360*Gt,E=Ee[1]%360*Gt,S=Ee.length>2?Ee[2]%360*Gt:0,Pe()):[C*on,E*on,S*on]},Ce.angle=function(Ee){return arguments.length?(N=Ee%360*Gt,Pe()):N*on},Ce.reflectX=function(Ee){return arguments.length?(P=Ee?-1:1,Pe()):P<0},Ce.reflectY=function(Ee){return arguments.length?(W=Ee?-1:1,Pe()):W<0},Ce.precision=function(Ee){return arguments.length?(pe=D0(Ie,oe=Ee*Ee),me()):oa(oe)},Ce.fitExtent=function(Ee,De){return rg(Ce,Ee,De)},Ce.fitSize=function(Ee,De){return Xv(Ce,Ee,De)},Ce.fitWidth=function(Ee,De){return Qv(Ce,Ee,De)},Ce.fitHeight=function(Ee,De){return Jv(Ce,Ee,De)},function(){return c=r.apply(this,arguments),Ce.invert=c.invert&&tt,Pe()}}function em(r){var c=0,u=wi/3,f=Zv(r),g=f(c,u);return g.parallels=function(m){return arguments.length?f(c=m[0]*Gt,u=m[1]*Gt):[c*on,u*on]},g}function I0(r,c){var u=St(r),f=(u+St(c))/2;if(Si(f)<Wt)return function Jx(r){var c=Ot(r);function u(f,g){return[f*c,St(g)/c]}return u.invert=function(f,g){return[f/c,Wa(g*c)]},u}(r);var g=1+u*(2*f-u),m=oa(g)/f;function y(C,E){var S=oa(g-2*f*St(E))/f;return[S*St(C*=f),m-S*Ot(C)]}return y.invert=function(C,E){var S=m-E,I=qa(C,Si(S))*Qs(S);return S*f<0&&(I-=wi*Qs(C)*Qs(S)),[I/f,Wa((g-(C*C+S*S)*f*f)/(2*f))]},y}function og(){return em(I0).scale(155.424).center([0,33.6442])}function L0(){return og().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function P0(r){return function(c,u){var f=Ot(c),g=Ot(u),m=r(f*g);return m===1/0?[2,0]:[m*g*St(c),m*St(u)]}}function lf(r){return function(c,u){var f=oa(c*c+u*u),g=r(f),m=St(g),y=Ot(g);return[qa(c*m,f*y),Wa(f&&u*m/f)]}}var tm=P0(function(r){return oa(2/(1+r))});tm.invert=lf(function(r){return 2*Wa(r/2)});var im=P0(function(r){return(r=wb(r))&&r/St(r)});function cf(r,c){return[r,Mp(yv((Dn+c)/2))]}function N0(r){var C,E,S,c=io(r),u=c.center,f=c.scale,g=c.translate,m=c.clipExtent,y=null;function I(){var N=wi*f(),P=c(Wb(c.rotate()).invert([0,0]));return m(null==y?[[P[0]-N,P[1]-N],[P[0]+N,P[1]+N]]:r===cf?[[Math.max(P[0]-N,y),C],[Math.min(P[0]+N,E),S]]:[[y,Math.max(P[1]-N,C)],[E,Math.min(P[1]+N,S)]])}return c.scale=function(N){return arguments.length?(f(N),I()):f()},c.translate=function(N){return arguments.length?(g(N),I()):g()},c.center=function(N){return arguments.length?(u(N),I()):u()},c.clipExtent=function(N){return arguments.length?(null==N?y=C=E=S=null:(y=+N[0][0],C=+N[0][1],E=+N[1][0],S=+N[1][1]),I()):null==y?null:[[y,C],[E,S]]},I()}function lg(r){return yv((Dn+r)/2)}function B0(r,c){var u=Ot(r),f=r===c?St(r):Mp(u/Ot(c))/Mp(lg(c)/lg(r)),g=u*bv(lg(r),f)/f;if(!f)return cf;function m(y,C){g>0?C<-Dn+Wt&&(C=-Dn+Wt):C>Dn-Wt&&(C=Dn-Wt);var E=g/bv(lg(C),f);return[E*St(f*y),g-E*Ot(f*y)]}return m.invert=function(y,C){var E=g-C,S=Qs(f)*oa(y*y+E*E),I=qa(y,Si(E))*Qs(E);return E*f<0&&(I-=wi*Qs(y)*Qs(E)),[I/f,2*ou(bv(g/S,1/f))-Dn]},m}function df(r,c){return[r,c]}function R0(r,c){var u=Ot(r),f=r===c?St(r):(u-Ot(c))/(c-r),g=u/f+r;if(Si(f)<Wt)return df;function m(y,C){var E=g-C,S=f*y;return[E*St(S),g-E*Ot(S)]}return m.invert=function(y,C){var E=g-C,S=qa(y,Si(E))*Qs(E);return E*f<0&&(S-=wi*Qs(y)*Qs(E)),[S/f,g-Qs(f)*oa(y*y+E*E)]},m}im.invert=lf(function(r){return r}),cf.invert=function(r,c){return[r,2*ou(yb(c))-Dn]},df.invert=df;var uf=1.340264,hf=-.081106,ff=893e-6,pf=.003796,cg=oa(3)/2;function nm(r,c){var u=Wa(cg*St(c)),f=u*u,g=f*f*f;return[r*Ot(u)/(cg*(uf+3*hf*f+g*(7*ff+9*pf*f))),u*(uf+hf*f+g*(ff+pf*f))]}function am(r,c){var u=Ot(c),f=Ot(r)*u;return[u*St(r)/f,St(c)/f]}function sm(r,c){var u=c*c,f=u*u;return[r*(.8707-.131979*u+f*(f*(.003971*u-.001529*f)-.013791)),c*(1.007226+u*(.015085+f*(.028874*u-.044475-.005916*f)))]}function rm(r,c){return[Ot(c)*St(r),St(c)]}function om(r,c){var u=Ot(c),f=1+Ot(r)*u;return[u*St(r)/f,St(c)/f]}function lm(r,c){return[Mp(yv((Dn+c)/2)),-r]}function gT(r,c){return r.parent===c.parent?1:2}function mT(r,c){return r+c.x}function yT(r,c){return Math.max(r,c.y)}function TT(r){var c=0,u=r.children,f=u&&u.length;if(f)for(;--f>=0;)c+=u[f].value;else c=1;r.value=c}function cm(r,c){r instanceof Map?(r=[void 0,r],void 0===c&&(c=HT)):void 0===c&&(c=zT);for(var f,m,y,C,E,u=new Wc(r),g=[u];f=g.pop();)if((y=c(f.data))&&(E=(y=Array.from(y)).length))for(f.children=y,C=E-1;C>=0;--C)g.push(m=y[C]=new Wc(y[C])),m.parent=f,m.depth=f.depth+1;return u.eachBefore(O0)}function zT(r){return r.children}function HT(r){return Array.isArray(r)?r[1]:null}function _T(r){void 0!==r.data.value&&(r.value=r.data.value),r.data=r.data.data}function O0(r){var c=0;do{r.height=c}while((r=r.parent)&&r.height<++c)}function Wc(r){this.data=r,this.depth=this.height=0,this.parent=null}function dg(r){return null==r?null:F0(r)}function F0(r){if("function"!=typeof r)throw new Error;return r}function Vc(){return 0}function pu(r){return function(){return r}}nm.invert=function(r,c){for(var y,u=c,f=u*u,g=f*f*f,m=0;m<12&&(g=(f=(u-=y=(u*(uf+hf*f+g*(ff+pf*f))-c)/(uf+3*hf*f+g*(7*ff+9*pf*f)))*u)*f*f,!(Si(y)<Kh));++m);return[cg*r*(uf+3*hf*f+g*(7*ff+9*pf*f))/Ot(u),Wa(St(u)/cg)]},am.invert=lf(ou),sm.invert=function(r,c){var g,u=c,f=25;do{var m=u*u,y=m*m;u-=g=(u*(1.007226+m*(.015085+y*(.028874*m-.044475-.005916*y)))-c)/(1.007226+m*(.045255+y*(.259866*m-.311325-.005916*11*y)))}while(Si(g)>Wt&&--f>0);return[r/(.8707+(m=u*u)*(m*(m*m*m*(.003971-.001529*m)-.013791)-.131979)),u]},rm.invert=lf(Wa),om.invert=lf(function(r){return 2*ou(r)}),lm.invert=function(r,c){return[-c,2*ou(yb(r))-Dn]},Wc.prototype=cm.prototype={constructor:Wc,count:function kT(){return this.eachAfter(TT)},each:function ST(r,c){let u=-1;for(const f of this)r.call(c,f,++u,this);return this},eachAfter:function ET(r,c){for(var m,y,C,u=this,f=[u],g=[],E=-1;u=f.pop();)if(g.push(u),m=u.children)for(y=0,C=m.length;y<C;++y)f.push(m[y]);for(;u=g.pop();)r.call(c,u,++E,this);return this},eachBefore:function AT(r,c){for(var g,m,u=this,f=[u],y=-1;u=f.pop();)if(r.call(c,u,++y,this),g=u.children)for(m=g.length-1;m>=0;--m)f.push(g[m]);return this},find:function $T(r,c){let u=-1;for(const f of this)if(r.call(c,f,++u,this))return f},sum:function DT(r){return this.eachAfter(function(c){for(var u=+r(c.data)||0,f=c.children,g=f&&f.length;--g>=0;)u+=f[g].value;c.value=u})},sort:function MT(r){return this.eachBefore(function(c){c.children&&c.children.sort(r)})},path:function IT(r){for(var c=this,u=function LT(r,c){if(r===c)return r;var u=r.ancestors(),f=c.ancestors(),g=null;for(r=u.pop(),c=f.pop();r===c;)g=r,r=u.pop(),c=f.pop();return g}(c,r),f=[c];c!==u;)f.push(c=c.parent);for(var g=f.length;r!==u;)f.splice(g,0,r),r=r.parent;return f},ancestors:function PT(){for(var r=this,c=[r];r=r.parent;)c.push(r);return c},descendants:function NT(){return Array.from(this)},leaves:function BT(){var r=[];return this.eachBefore(function(c){c.children||r.push(c)}),r},links:function RT(){var r=this,c=[];return r.each(function(u){u!==r&&c.push({source:u.parent,target:u})}),c},copy:function FT(){return cm(this).eachBefore(_T)},[Symbol.iterator]:function*OT(){var c,f,g,m,r=this,u=[r];do{for(c=u.reverse(),u=[];r=c.pop();)if(yield r,f=r.children)for(g=0,m=f.length;g<m;++g)u.push(f[g])}while(u.length)}};const z0=4294967296;function dm(){let r=1;return()=>(r=(1664525*r+1013904223)%z0)/z0}function H0(r,c){for(var m,y,u=0,f=(r=function UT(r,c){let f,g,u=r.length;for(;u;)g=c()*u--|0,f=r[u],r[u]=r[g],r[g]=f;return r}(Array.from(r),c)).length,g=[];u<f;)m=r[u],y&&_0(y,m)?++u:(y=jT(g=YT(g,m)),u=0);return y}function YT(r,c){var u,f;if(um(c,r))return[c];for(u=0;u<r.length;++u)if(ug(c,r[u])&&um(gf(r[u],c),r))return[r[u],c];for(u=0;u<r.length-1;++u)for(f=u+1;f<r.length;++f)if(ug(gf(r[u],r[f]),c)&&ug(gf(r[u],c),r[f])&&ug(gf(r[f],c),r[u])&&um(q0(r[u],r[f],c),r))return[r[u],r[f],c];throw new Error}function ug(r,c){var u=r.r-c.r,f=c.x-r.x,g=c.y-r.y;return u<0||u*u<f*f+g*g}function _0(r,c){var u=r.r-c.r+1e-9*Math.max(r.r,c.r,1),f=c.x-r.x,g=c.y-r.y;return u>0&&u*u>f*f+g*g}function um(r,c){for(var u=0;u<c.length;++u)if(!_0(r,c[u]))return!1;return!0}function jT(r){switch(r.length){case 1:return function KT(r){return{x:r.x,y:r.y,r:r.r}}(r[0]);case 2:return gf(r[0],r[1]);case 3:return q0(r[0],r[1],r[2])}}function gf(r,c){var u=r.x,f=r.y,g=r.r,m=c.x,y=c.y,C=c.r,E=m-u,S=y-f,I=C-g,N=Math.sqrt(E*E+S*S);return{x:(u+m+E/N*I)/2,y:(f+y+S/N*I)/2,r:(N+g+C)/2}}function q0(r,c,u){var f=r.x,g=r.y,m=r.r,y=c.x,C=c.y,E=c.r,S=u.x,I=u.y,N=u.r,P=f-y,W=f-S,K=g-C,J=g-I,Y=E-m,Q=N-m,ne=f*f+g*g-m*m,ie=ne-y*y-C*C+E*E,te=ne-S*S-I*I+N*N,oe=W*K-P*J,pe=(K*te-J*ie)/(2*oe)-f,Ie=(J*Y-K*Q)/oe,Le=(W*ie-P*te)/(2*oe)-g,Ke=(P*Q-W*Y)/oe,Se=Ie*Ie+Ke*Ke-1,Ce=2*(m+pe*Ie+Le*Ke),tt=pe*pe+Le*Le-m*m,Pe=-(Math.abs(Se)>1e-6?(Ce+Math.sqrt(Ce*Ce-4*Se*tt))/(2*Se):tt/Ce);return{x:f+pe+Ie*Pe,y:g+Le+Ke*Pe,r:Pe}}function W0(r,c,u){var g,m,C,E,f=r.x-c.x,y=r.y-c.y,S=f*f+y*y;S?(m=c.r+u.r,E=r.r+u.r,(m*=m)>(E*=E)?(g=(S+E-m)/(2*S),C=Math.sqrt(Math.max(0,E/S-g*g)),u.x=r.x-g*f-C*y,u.y=r.y-g*y+C*f):(g=(S+m-E)/(2*S),C=Math.sqrt(Math.max(0,m/S-g*g)),u.x=c.x+g*f-C*y,u.y=c.y+g*y+C*f)):(u.x=c.x+u.r,u.y=c.y)}function V0(r,c){var u=r.r+c.r-1e-6,f=c.x-r.x,g=c.y-r.y;return u>0&&u*u>f*f+g*g}function U0(r){var c=r._,u=r.next._,f=c.r+u.r,g=(c.x*u.r+u.x*c.r)/f,m=(c.y*u.r+u.y*c.r)/f;return g*g+m*m}function hg(r){this._=r,this.next=null,this.previous=null}function G0(r,c){if(!(m=(r=function VT(r){return"object"==typeof r&&"length"in r?r:Array.from(r)}(r)).length))return 0;var u,f,g,m,y,C,E,S,I,N,P;if((u=r[0]).x=0,u.y=0,!(m>1))return u.r;if(u.x=-(f=r[1]).r,f.x=u.r,f.y=0,!(m>2))return u.r+f.r;W0(f,u,g=r[2]),u=new hg(u),f=new hg(f),g=new hg(g),u.next=g.previous=f,f.next=u.previous=g,g.next=f.previous=u;e:for(E=3;E<m;++E){W0(u._,f._,g=r[E]),g=new hg(g),S=f.next,I=u.previous,N=f._.r,P=u._.r;do{if(N<=P){if(V0(S._,g._)){u.next=f=S,f.previous=u,--E;continue e}N+=S._.r,S=S.next}else{if(V0(I._,g._)){(u=I).next=f,f.previous=u,--E;continue e}P+=I._.r,I=I.previous}}while(S!==I.next);for(g.previous=u,g.next=f,u.next=f.previous=f=g,y=U0(u);(g=g.next)!==f;)(C=U0(g))<y&&(u=g,y=C);f=u.next}for(u=[f._],g=f;(g=g.next)!==f;)u.push(g._);for(g=H0(u,c),E=0;E<m;++E)(u=r[E]).x-=g.x,u.y-=g.y;return g.r}function QT(r){return Math.sqrt(r.value)}function Y0(r){return function(c){c.children||(c.r=Math.max(0,+r(c)||0))}}function hm(r,c,u){return function(f){if(g=f.children){var g,m,E,y=g.length,C=r(f)*c||0;if(C)for(m=0;m<y;++m)g[m].r+=C;if(E=G0(g,u),C)for(m=0;m<y;++m)g[m].r-=C;f.r=E+C}}}function j0(r){return function(c){var u=c.parent;c.r*=r,u&&(c.x=u.x+r*c.x,c.y=u.y+r*c.y)}}function K0(r){r.x0=Math.round(r.x0),r.y0=Math.round(r.y0),r.x1=Math.round(r.x1),r.y1=Math.round(r.y1)}function vf(r,c,u,f,g){for(var y,m=r.children,C=-1,E=m.length,S=r.value&&(f-c)/r.value;++C<E;)(y=m[C]).y0=u,y.y1=g,y.x0=c,y.x1=c+=y.value*S}var ek={depth:-1},X0={},fm={};function tk(r){return r.id}function ik(r){return r.parentId}function Q0(r){let c=r.length;if(c<2)return"";for(;--c>1&&!pm(r,c););return r.slice(0,c)}function pm(r,c){if("/"===r[c]){let u=0;for(;c>0&&"\\"===r[--c];)++u;if(!(1&u))return!0}return!1}function sk(r,c){return r.parent===c.parent?1:2}function gm(r){var c=r.children;return c?c[0]:r.t}function vm(r){var c=r.children;return c?c[c.length-1]:r.t}function rk(r,c,u){var f=u/(c.i-r.i);c.c-=f,c.s+=u,r.c+=f,c.z+=u,c.m+=u}function lk(r,c,u){return r.a.parent===c.parent?r.a:u}function fg(r,c){this._=r,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=c}function pg(r,c,u,f,g){for(var y,m=r.children,C=-1,E=m.length,S=r.value&&(g-u)/r.value;++C<E;)(y=m[C]).x0=c,y.x1=f,y.y0=u,y.y1=u+=y.value*S}fg.prototype=Object.create(Wc.prototype);var J0=(1+Math.sqrt(5))/2;function Z0(r,c,u,f,g,m){for(var E,S,W,K,Y,Q,ne,ie,te,oe,pe,y=[],C=c.children,I=0,N=0,P=C.length,J=c.value;I<P;){W=g-u,K=m-f;do{Y=C[N++].value}while(!Y&&N<P);for(Q=ne=Y,pe=Y*Y*(oe=Math.max(K/W,W/K)/(J*r)),te=Math.max(ne/pe,pe/Q);N<P;++N){if(Y+=S=C[N].value,S<Q&&(Q=S),S>ne&&(ne=S),pe=Y*Y*oe,(ie=Math.max(ne/pe,pe/Q))>te){Y-=S;break}te=ie}y.push(E={value:Y,dice:W<K,children:C.slice(I,N)}),E.dice?vf(E,u,f,g,J?f+=K*Y/J:m):pg(E,u,f,J?u+=W*Y/J:g,m),J-=Y,I=N}return y}var ey=function r(c){function u(f,g,m,y,C){Z0(c,f,g,m,y,C)}return u.ratio=function(f){return r((f=+f)>1?f:1)},u}(J0),pk=function r(c){function u(f,g,m,y,C){if((E=f._squarify)&&E.ratio===c)for(var E,S,I,N,W,P=-1,K=E.length,J=f.value;++P<K;){for(I=(S=E[P]).children,N=S.value=0,W=I.length;N<W;++N)S.value+=I[N].value;S.dice?vf(S,g,m,y,J?m+=(C-m)*S.value/J:C):pg(S,g,m,J?g+=(y-g)*S.value/J:y,C),J-=S.value}else f._squarify=E=Z0(c,f,g,m,y,C),E.ratio=c}return u.ratio=function(f){return r((f=+f)>1?f:1)},u}(J0);function mk(r,c,u){return(c[0]-r[0])*(u[1]-r[1])-(c[1]-r[1])*(u[0]-r[0])}function bk(r,c){return r[0]-c[0]||r[1]-c[1]}function ty(r){const c=r.length,u=[0,1];let g,f=2;for(g=2;g<c;++g){for(;f>1&&mk(r[u[f-2]],r[u[f-1]],r[g])<=0;)--f;u[f++]=g}return u.slice(0,f)}var ba=Math.random,xk=function r(c){function u(f,g){return f=null==f?0:+f,g=null==g?1:+g,1===arguments.length?(g=f,f=0):g-=f,function(){return c()*g+f}}return u.source=r,u}(ba),Tk=function r(c){function u(f,g){return arguments.length<2&&(g=f,f=0),f=Math.floor(f),g=Math.floor(g)-f,function(){return Math.floor(c()*g+f)}}return u.source=r,u}(ba),mm=function r(c){function u(f,g){var m,y;return f=null==f?0:+f,g=null==g?1:+g,function(){var C;if(null!=m)C=m,m=null;else do{m=2*c()-1,C=2*c()-1,y=m*m+C*C}while(!y||y>1);return f+g*C*Math.sqrt(-2*Math.log(y)/y)}}return u.source=r,u}(ba),kk=function r(c){var u=mm.source(c);function f(){var g=u.apply(this,arguments);return function(){return Math.exp(g())}}return f.source=r,f}(ba),iy=function r(c){function u(f){return(f=+f)<=0?()=>0:function(){for(var g=0,m=f;m>1;--m)g+=c();return g+m*c()}}return u.source=r,u}(ba),Sk=function r(c){var u=iy.source(c);function f(g){if(0==(g=+g))return c;var m=u(g);return function(){return m()/g}}return f.source=r,f}(ba),Ak=function r(c){function u(f){return function(){return-Math.log1p(-c())/f}}return u.source=r,u}(ba),Ek=function r(c){function u(f){if((f=+f)<0)throw new RangeError("invalid alpha");return f=1/-f,function(){return Math.pow(1-c(),f)}}return u.source=r,u}(ba),$k=function r(c){function u(f){if((f=+f)<0||f>1)throw new RangeError("invalid p");return function(){return Math.floor(c()+f)}}return u.source=r,u}(ba),ny=function r(c){function u(f){if((f=+f)<0||f>1)throw new RangeError("invalid p");return 0===f?()=>1/0:1===f?()=>1:(f=Math.log1p(-f),function(){return 1+Math.floor(Math.log1p(-c())/f)})}return u.source=r,u}(ba),bm=function r(c){var u=mm.source(c)();function f(g,m){if((g=+g)<0)throw new RangeError("invalid k");if(0===g)return()=>0;if(m=null==m?1:+m,1===g)return()=>-Math.log1p(-c())*m;var y=(g<1?g+1:g)-1/3,C=1/(3*Math.sqrt(y)),E=g<1?()=>Math.pow(c(),1/g):()=>1;return function(){do{do{var S=u(),I=1+C*S}while(I<=0);I*=I*I;var N=1-c()}while(N>=1-.0331*S*S*S*S&&Math.log(N)>=.5*S*S+y*(1-I+Math.log(I)));return y*I*E()*m}}return f.source=r,f}(ba),ay=function r(c){var u=bm.source(c);function f(g,m){var y=u(g),C=u(m);return function(){var E=y();return 0===E?0:E/(E+C())}}return f.source=r,f}(ba),sy=function r(c){var u=ny.source(c),f=ay.source(c);function g(m,y){return m=+m,(y=+y)>=1?()=>m:y<=0?()=>0:function(){for(var C=0,E=m,S=y;E*S>16&&E*(1-S)>16;){var I=Math.floor((E+1)*S),N=f(I,E-I+1)();N<=S?(C+=I,E-=I,S=(S-N)/(1-N)):(E=I-1,S/=N)}for(var P=S<.5,K=u(P?S:1-S),J=K(),Y=0;J<=E;++Y)J+=K();return C+(P?Y:E-Y)}}return g.source=r,g}(ba),Dk=function r(c){function u(f,g,m){var y;return 0==(f=+f)?y=C=>-Math.log(C):(f=1/f,y=C=>Math.pow(C,f)),g=null==g?0:+g,m=null==m?1:+m,function(){return g+m*y(-Math.log1p(-c()))}}return u.source=r,u}(ba),Mk=function r(c){function u(f,g){return f=null==f?0:+f,g=null==g?1:+g,function(){return f+g*Math.tan(Math.PI*c())}}return u.source=r,u}(ba),Ik=function r(c){function u(f,g){return f=null==f?0:+f,g=null==g?1:+g,function(){var m=c();return f+g*Math.log(m/(1-m))}}return u.source=r,u}(ba),Lk=function r(c){var u=bm.source(c),f=sy.source(c);function g(m){return function(){for(var y=0,C=m;C>16;){var E=Math.floor(.875*C),S=u(E)();if(S>C)return y+f(E-1,C/S)();y+=E,C-=S}for(var I=-Math.log1p(-c()),N=0;I<=C;++N)I-=Math.log1p(-c());return y+N}}return g.source=r,g}(ba);const ry=1/4294967296;function Js(r,c){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(c).domain(r)}return this}function Wo(r,c){switch(arguments.length){case 0:break;case 1:"function"==typeof r?this.interpolator(r):this.range(r);break;default:this.domain(r),"function"==typeof c?this.interpolator(c):this.range(c)}return this}const ym=Symbol("implicit");function wm(){var r=new ea,c=[],u=[],f=ym;function g(m){let y=r.get(m);if(void 0===y){if(f!==ym)return f;r.set(m,y=c.push(m)-1)}return u[y%u.length]}return g.domain=function(m){if(!arguments.length)return c.slice();c=[],r=new ea;for(const y of m)r.has(y)||r.set(y,c.push(y)-1);return g},g.range=function(m){return arguments.length?(u=Array.from(m),g):u.slice()},g.unknown=function(m){return arguments.length?(f=m,g):f},g.copy=function(){return wm(c,u).unknown(f)},Js.apply(g,arguments),g}function Cm(){var m,y,r=wm().unknown(void 0),c=r.domain,u=r.range,f=0,g=1,C=!1,E=0,S=0,I=.5;function N(){var P=c().length,W=g<f,K=W?g:f,J=W?f:g;m=(J-K)/Math.max(1,P-E+2*S),C&&(m=Math.floor(m)),K+=(J-K-m*(P-E))*I,y=m*(1-E),C&&(K=Math.round(K),y=Math.round(y));var Y=ta(P).map(function(Q){return K+m*Q});return u(W?Y.reverse():Y)}return delete r.unknown,r.domain=function(P){return arguments.length?(c(P),N()):c()},r.range=function(P){return arguments.length?([f,g]=P,f=+f,g=+g,N()):[f,g]},r.rangeRound=function(P){return[f,g]=P,f=+f,g=+g,C=!0,N()},r.bandwidth=function(){return y},r.step=function(){return m},r.round=function(P){return arguments.length?(C=!!P,N()):C},r.padding=function(P){return arguments.length?(E=Math.min(1,S=+P),N()):E},r.paddingInner=function(P){return arguments.length?(E=Math.min(1,P),N()):E},r.paddingOuter=function(P){return arguments.length?(S=+P,N()):S},r.align=function(P){return arguments.length?(I=Math.max(0,Math.min(1,P)),N()):I},r.copy=function(){return Cm(c(),[f,g]).round(C).paddingInner(E).paddingOuter(S).align(I)},Js.apply(N(),arguments)}function oy(r){var c=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return oy(c())},r}function gg(r){return+r}var ly=[0,1];function Ya(r){return r}function xm(r,c){return(c-=r=+r)?function(u){return(u-r)/c}:function Ok(r){return function(){return r}}(isNaN(c)?NaN:.5)}function zk(r,c,u){var f=r[0],g=r[1],m=c[0],y=c[1];return g<f?(f=xm(g,f),m=u(y,m)):(f=xm(f,g),m=u(m,y)),function(C){return m(f(C))}}function Hk(r,c,u){var f=Math.min(r.length,c.length)-1,g=new Array(f),m=new Array(f),y=-1;for(r[f]<r[0]&&(r=r.slice().reverse(),c=c.slice().reverse());++y<f;)g[y]=xm(r[y],r[y+1]),m[y]=u(c[y],c[y+1]);return function(C){var E=ir(r,C,1,f)-1;return m[E](g[E](C))}}function mf(r,c){return c.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function vg(){var f,g,m,C,E,S,r=ly,c=ly,u=$t,y=Ya;function I(){var P=Math.min(r.length,c.length);return y!==Ya&&(y=function Fk(r,c){var u;return r>c&&(u=r,r=c,c=u),function(f){return Math.max(r,Math.min(c,f))}}(r[0],r[P-1])),C=P>2?Hk:zk,E=S=null,N}function N(P){return null==P||isNaN(P=+P)?m:(E||(E=C(r.map(f),c,u)))(f(y(P)))}return N.invert=function(P){return y(g((S||(S=C(c,r.map(f),Na)))(P)))},N.domain=function(P){return arguments.length?(r=Array.from(P,gg),I()):r.slice()},N.range=function(P){return arguments.length?(c=Array.from(P),I()):c.slice()},N.rangeRound=function(P){return c=Array.from(P),u=Sl,I()},N.clamp=function(P){return arguments.length?(y=!!P||Ya,I()):y!==Ya},N.interpolate=function(P){return arguments.length?(u=P,I()):u},N.unknown=function(P){return arguments.length?(m=P,N):m},function(P,W){return f=P,g=W,I()}}function Tm(){return vg()(Ya,Ya)}function cy(r,c,u,f){var m,g=wa(r,c,u);switch((f=ru(f??",f")).type){case"s":var y=Math.max(Math.abs(r),Math.abs(c));return null==f.precision&&!isNaN(m=mb(g,y))&&(f.precision=m),F.formatPrefix(f,y);case"":case"e":case"g":case"p":case"r":null==f.precision&&!isNaN(m=bb(g,Math.max(Math.abs(r),Math.abs(c))))&&(f.precision=m-("e"===f.type));break;case"f":case"%":null==f.precision&&!isNaN(m=vb(g))&&(f.precision=m-2*("%"===f.type))}return F.format(f)}function zl(r){var c=r.domain;return r.ticks=function(u){var f=c();return xt(f[0],f[f.length-1],u??10)},r.tickFormat=function(u,f){var g=c();return cy(g[0],g[g.length-1],u??10,f)},r.nice=function(u){null==u&&(u=10);var E,S,f=c(),g=0,m=f.length-1,y=f[g],C=f[m],I=10;for(C<y&&(S=y,y=C,C=S,S=g,g=m,m=S);I-- >0;){if((S=vs(y,C,u))===E)return f[g]=y,f[m]=C,c(f);if(S>0)y=Math.floor(y/S)*S,C=Math.ceil(C/S)*S;else{if(!(S<0))break;y=Math.ceil(y*S)/S,C=Math.floor(C*S)/S}E=S}return r},r}function hy(r,c){var y,u=0,f=(r=r.slice()).length-1,g=r[u],m=r[f];return m<g&&(y=u,u=f,f=y,y=g,g=m,m=y),r[u]=c.floor(g),r[f]=c.ceil(m),r}function fy(r){return Math.log(r)}function py(r){return Math.exp(r)}function _k(r){return-Math.log(-r)}function qk(r){return-Math.exp(-r)}function Wk(r){return isFinite(r)?+("1e"+r):r<0?0:r}function gy(r){return(c,u)=>-r(-c,u)}function km(r){const c=r(fy,py),u=c.domain;let g,m,f=10;function y(){return g=function Uk(r){return r===Math.E?Math.log:10===r&&Math.log10||2===r&&Math.log2||(r=Math.log(r),c=>Math.log(c)/r)}(f),m=function Vk(r){return 10===r?Wk:r===Math.E?Math.exp:c=>Math.pow(r,c)}(f),u()[0]<0?(g=gy(g),m=gy(m),r(_k,qk)):r(fy,py),c}return c.base=function(C){return arguments.length?(f=+C,y()):f},c.domain=function(C){return arguments.length?(u(C),y()):u()},c.ticks=C=>{const E=u();let S=E[0],I=E[E.length-1];const N=I<S;N&&([S,I]=[I,S]);let K,J,P=g(S),W=g(I);const Y=null==C?10:+C;let Q=[];if(!(f%1)&&W-P<Y){if(P=Math.floor(P),W=Math.ceil(W),S>0){for(;P<=W;++P)for(K=1;K<f;++K)if(J=P<0?K/m(-P):K*m(P),!(J<S)){if(J>I)break;Q.push(J)}}else for(;P<=W;++P)for(K=f-1;K>=1;--K)if(J=P>0?K/m(-P):K*m(P),!(J<S)){if(J>I)break;Q.push(J)}2*Q.length<Y&&(Q=xt(S,I,Y))}else Q=xt(P,W,Math.min(W-P,Y)).map(m);return N?Q.reverse():Q},c.tickFormat=(C,E)=>{if(null==C&&(C=10),null==E&&(E=10===f?"s":","),"function"!=typeof E&&(!(f%1)&&null==(E=ru(E)).precision&&(E.trim=!0),E=F.format(E)),C===1/0)return E;const S=Math.max(1,f*C/c.ticks().length);return I=>{let N=I/m(Math.round(g(I)));return N*f<f-.5&&(N*=f),N<=S?E(I):""}},c.nice=()=>u(hy(u(),{floor:C=>m(Math.floor(g(C))),ceil:C=>m(Math.ceil(g(C)))})),c}function my(r){return function(c){return Math.sign(c)*Math.log1p(Math.abs(c/r))}}function by(r){return function(c){return Math.sign(c)*Math.expm1(Math.abs(c))*r}}function Sm(r){var c=1,u=r(my(c),by(c));return u.constant=function(f){return arguments.length?r(my(c=+f),by(c)):c},zl(u)}function wy(r){return function(c){return c<0?-Math.pow(-c,r):Math.pow(c,r)}}function Gk(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function Yk(r){return r<0?-r*r:r*r}function Am(r){var c=r(Ya,Ya),u=1;return c.exponent=function(g){return arguments.length?(u=+g,function f(){return 1===u?r(Ya,Ya):.5===u?r(Gk,Yk):r(wy(u),wy(1/u))}()):u},zl(c)}function Em(){var r=Am(vg());return r.copy=function(){return mf(r,Em()).exponent(r.exponent())},Js.apply(r,arguments),r}function Cy(r){return Math.sign(r)*r*r}const $m=new Date,Dm=new Date;function jn(r,c,u,f){function g(m){return r(m=0===arguments.length?new Date:new Date(+m)),m}return g.floor=m=>(r(m=new Date(+m)),m),g.ceil=m=>(r(m=new Date(m-1)),c(m,1),r(m),m),g.round=m=>{const y=g(m),C=g.ceil(m);return m-y<C-m?y:C},g.offset=(m,y)=>(c(m=new Date(+m),null==y?1:Math.floor(y)),m),g.range=(m,y,C)=>{const E=[];if(m=g.ceil(m),C=null==C?1:Math.floor(C),!(m<y&&C>0))return E;let S;do{E.push(S=new Date(+m)),c(m,C),r(m)}while(S<m&&m<y);return E},g.filter=m=>jn(y=>{if(y>=y)for(;r(y),!m(y);)y.setTime(y-1)},(y,C)=>{if(y>=y)if(C<0)for(;++C<=0;)for(;c(y,-1),!m(y););else for(;--C>=0;)for(;c(y,1),!m(y););}),u&&(g.count=(m,y)=>($m.setTime(+m),Dm.setTime(+y),r($m),r(Dm),Math.floor(u($m,Dm))),g.every=m=>(m=Math.floor(m),isFinite(m)&&m>0?m>1?g.filter(f?y=>f(y)%m==0:y=>g.count(0,y)%m==0):g:null)),g}const gu=jn(()=>{},(r,c)=>{r.setTime(+r+c)},(r,c)=>c-r);gu.every=r=>(r=Math.floor(r),isFinite(r)&&r>0?r>1?jn(c=>{c.setTime(Math.floor(c/r)*r)},(c,u)=>{c.setTime(+c+u*r)},(c,u)=>(u-c)/r):gu:null);const Ay=gu.range,Vo=1e3,Zs=6e4,Uo=60*Zs,Go=24*Uo,Mm=7*Go,Ey=30*Go,Im=365*Go,Yo=jn(r=>{r.setTime(r-r.getMilliseconds())},(r,c)=>{r.setTime(+r+c*Vo)},(r,c)=>(c-r)/Vo,r=>r.getUTCSeconds()),$y=Yo.range,mg=jn(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*Vo)},(r,c)=>{r.setTime(+r+c*Zs)},(r,c)=>(c-r)/Zs,r=>r.getMinutes()),Xk=mg.range,bg=jn(r=>{r.setUTCSeconds(0,0)},(r,c)=>{r.setTime(+r+c*Zs)},(r,c)=>(c-r)/Zs,r=>r.getUTCMinutes()),Qk=bg.range,yg=jn(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*Vo-r.getMinutes()*Zs)},(r,c)=>{r.setTime(+r+c*Uo)},(r,c)=>(c-r)/Uo,r=>r.getHours()),Jk=yg.range,wg=jn(r=>{r.setUTCMinutes(0,0,0)},(r,c)=>{r.setTime(+r+c*Uo)},(r,c)=>(c-r)/Uo,r=>r.getUTCHours()),Zk=wg.range,vu=jn(r=>r.setHours(0,0,0,0),(r,c)=>r.setDate(r.getDate()+c),(r,c)=>(c-r-(c.getTimezoneOffset()-r.getTimezoneOffset())*Zs)/Go,r=>r.getDate()-1),e2=vu.range,bf=jn(r=>{r.setUTCHours(0,0,0,0)},(r,c)=>{r.setUTCDate(r.getUTCDate()+c)},(r,c)=>(c-r)/Go,r=>r.getUTCDate()-1),t2=bf.range,Lm=jn(r=>{r.setUTCHours(0,0,0,0)},(r,c)=>{r.setUTCDate(r.getUTCDate()+c)},(r,c)=>(c-r)/Go,r=>Math.floor(r/Go)),i2=Lm.range;function Uc(r){return jn(c=>{c.setDate(c.getDate()-(c.getDay()+7-r)%7),c.setHours(0,0,0,0)},(c,u)=>{c.setDate(c.getDate()+7*u)},(c,u)=>(u-c-(u.getTimezoneOffset()-c.getTimezoneOffset())*Zs)/Mm)}const mu=Uc(0),yf=Uc(1),Dy=Uc(2),My=Uc(3),Gc=Uc(4),Iy=Uc(5),Ly=Uc(6),Py=mu.range,n2=yf.range,a2=Dy.range,s2=My.range,r2=Gc.range,o2=Iy.range,l2=Ly.range;function Yc(r){return jn(c=>{c.setUTCDate(c.getUTCDate()-(c.getUTCDay()+7-r)%7),c.setUTCHours(0,0,0,0)},(c,u)=>{c.setUTCDate(c.getUTCDate()+7*u)},(c,u)=>(u-c)/Mm)}const bu=Yc(0),wf=Yc(1),Ny=Yc(2),By=Yc(3),jc=Yc(4),Ry=Yc(5),Oy=Yc(6),Fy=bu.range,c2=wf.range,d2=Ny.range,u2=By.range,h2=jc.range,f2=Ry.range,p2=Oy.range,Cg=jn(r=>{r.setDate(1),r.setHours(0,0,0,0)},(r,c)=>{r.setMonth(r.getMonth()+c)},(r,c)=>c.getMonth()-r.getMonth()+12*(c.getFullYear()-r.getFullYear()),r=>r.getMonth()),g2=Cg.range,xg=jn(r=>{r.setUTCDate(1),r.setUTCHours(0,0,0,0)},(r,c)=>{r.setUTCMonth(r.getUTCMonth()+c)},(r,c)=>c.getUTCMonth()-r.getUTCMonth()+12*(c.getUTCFullYear()-r.getUTCFullYear()),r=>r.getUTCMonth()),v2=xg.range,no=jn(r=>{r.setMonth(0,1),r.setHours(0,0,0,0)},(r,c)=>{r.setFullYear(r.getFullYear()+c)},(r,c)=>c.getFullYear()-r.getFullYear(),r=>r.getFullYear());no.every=r=>isFinite(r=Math.floor(r))&&r>0?jn(c=>{c.setFullYear(Math.floor(c.getFullYear()/r)*r),c.setMonth(0,1),c.setHours(0,0,0,0)},(c,u)=>{c.setFullYear(c.getFullYear()+u*r)}):null;const m2=no.range,ao=jn(r=>{r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,c)=>{r.setUTCFullYear(r.getUTCFullYear()+c)},(r,c)=>c.getUTCFullYear()-r.getUTCFullYear(),r=>r.getUTCFullYear());ao.every=r=>isFinite(r=Math.floor(r))&&r>0?jn(c=>{c.setUTCFullYear(Math.floor(c.getUTCFullYear()/r)*r),c.setUTCMonth(0,1),c.setUTCHours(0,0,0,0)},(c,u)=>{c.setUTCFullYear(c.getUTCFullYear()+u*r)}):null;const b2=ao.range;function zy(r,c,u,f,g,m){const y=[[Yo,1,Vo],[Yo,5,5e3],[Yo,15,15e3],[Yo,30,3e4],[m,1,Zs],[m,5,5*Zs],[m,15,15*Zs],[m,30,30*Zs],[g,1,Uo],[g,3,3*Uo],[g,6,6*Uo],[g,12,12*Uo],[f,1,Go],[f,2,2*Go],[u,1,Mm],[c,1,Ey],[c,3,3*Ey],[r,1,Im]];function E(S,I,N){const P=Math.abs(I-S)/N,W=Ma(([,,Y])=>Y).right(y,P);if(W===y.length)return r.every(wa(S/Im,I/Im,N));if(0===W)return gu.every(Math.max(wa(S,I,N),1));const[K,J]=y[P/y[W-1][2]<y[W][2]/P?W-1:W];return K.every(J)}return[function C(S,I,N){const P=I<S;P&&([S,I]=[I,S]);const W=N&&"function"==typeof N.range?N:E(S,I,N),K=W?W.range(S,+I+1):[];return P?K.reverse():K},E]}const[Hy,_y]=zy(ao,xg,bu,Lm,wg,bg),[qy,Wy]=zy(no,Cg,mu,vu,yg,mg);function Pm(r){if(0<=r.y&&r.y<100){var c=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return c.setFullYear(r.y),c}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function Nm(r){if(0<=r.y&&r.y<100){var c=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return c.setUTCFullYear(r.y),c}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function Cf(r,c,u){return{y:r,m:c,d:u,H:0,M:0,S:0,L:0}}function Vy(r){var c=r.dateTime,u=r.date,f=r.time,g=r.periods,m=r.days,y=r.shortDays,C=r.months,E=r.shortMonths,S=xf(g),I=Tf(g),N=xf(m),P=Tf(m),W=xf(y),K=Tf(y),J=xf(C),Y=Tf(C),Q=xf(E),ne=Tf(E),ie={a:function _e(Ct){return y[Ct.getDay()]},A:function lt(Ct){return m[Ct.getDay()]},b:function dt(Ct){return E[Ct.getMonth()]},B:function mt(Ct){return C[Ct.getMonth()]},c:null,d:Xy,e:Xy,f:_2,g:Q2,G:Z2,H:F2,I:z2,j:H2,L:Qy,m:q2,M:W2,p:function At(Ct){return g[+(Ct.getHours()>=12)]},q:function Ht(Ct){return 1+~~(Ct.getMonth()/3)},Q:nw,s:aw,S:V2,u:U2,U:G2,V:Y2,w:j2,W:K2,x:null,X:null,y:X2,Y:J2,Z:eS,"%":iw},te={a:function Ki(Ct){return y[Ct.getUTCDay()]},A:function Ri(Ct){return m[Ct.getUTCDay()]},b:function $i(Ct){return E[Ct.getUTCMonth()]},B:function Kn(Ct){return C[Ct.getUTCMonth()]},c:null,d:Zy,e:Zy,f:aS,g:pS,G:vS,H:tS,I:iS,j:nS,L:ew,m:sS,M:rS,p:function Hi(Ct){return g[+(Ct.getUTCHours()>=12)]},q:function zn(Ct){return 1+~~(Ct.getUTCMonth()/3)},Q:nw,s:aw,S:oS,u:lS,U:cS,V:dS,w:uS,W:hS,x:null,X:null,y:fS,Y:gS,Z:mS,"%":iw},oe={a:function Se(Ct,ni,Ci){var ht=W.exec(ni.slice(Ci));return ht?(Ct.w=K.get(ht[0].toLowerCase()),Ci+ht[0].length):-1},A:function Ce(Ct,ni,Ci){var ht=N.exec(ni.slice(Ci));return ht?(Ct.w=P.get(ht[0].toLowerCase()),Ci+ht[0].length):-1},b:function tt(Ct,ni,Ci){var ht=Q.exec(ni.slice(Ci));return ht?(Ct.m=ne.get(ht[0].toLowerCase()),Ci+ht[0].length):-1},B:function Pe(Ct,ni,Ci){var ht=J.exec(ni.slice(Ci));return ht?(Ct.m=Y.get(ht[0].toLowerCase()),Ci+ht[0].length):-1},c:function me(Ct,ni,Ci){return Le(Ct,c,ni,Ci)},d:jy,e:jy,f:N2,g:Yy,G:Gy,H:Ky,I:Ky,j:M2,L:P2,m:D2,M:I2,p:function Ke(Ct,ni,Ci){var ht=S.exec(ni.slice(Ci));return ht?(Ct.p=I.get(ht[0].toLowerCase()),Ci+ht[0].length):-1},q:$2,Q:R2,s:O2,S:L2,u:T2,U:k2,V:S2,w:x2,W:A2,x:function Ee(Ct,ni,Ci){return Le(Ct,u,ni,Ci)},X:function De(Ct,ni,Ci){return Le(Ct,f,ni,Ci)},y:Yy,Y:Gy,Z:E2,"%":B2};function pe(Ct,ni){return function(Ci){var Ka,Qt,Ln,ht=[],In=-1,Zi=0,ja=Ct.length;for(Ci instanceof Date||(Ci=new Date(+Ci));++In<ja;)37===Ct.charCodeAt(In)&&(ht.push(Ct.slice(Zi,In)),null!=(Qt=Uy[Ka=Ct.charAt(++In)])?Ka=Ct.charAt(++In):Qt="e"===Ka?" ":"0",(Ln=ni[Ka])&&(Ka=Ln(Ci,Qt)),ht.push(Ka),Zi=In+1);return ht.push(Ct.slice(Zi,In)),ht.join("")}}function Ie(Ct,ni){return function(Ci){var Zi,ja,ht=Cf(1900,void 0,1);if(Le(ht,Ct,Ci+="",0)!=Ci.length)return null;if("Q"in ht)return new Date(ht.Q);if("s"in ht)return new Date(1e3*ht.s+("L"in ht?ht.L:0));if(ni&&!("Z"in ht)&&(ht.Z=0),"p"in ht&&(ht.H=ht.H%12+12*ht.p),void 0===ht.m&&(ht.m="q"in ht?ht.q:0),"V"in ht){if(ht.V<1||ht.V>53)return null;"w"in ht||(ht.w=1),"Z"in ht?(ja=(Zi=Nm(Cf(ht.y,0,1))).getUTCDay(),Zi=ja>4||0===ja?wf.ceil(Zi):wf(Zi),Zi=bf.offset(Zi,7*(ht.V-1)),ht.y=Zi.getUTCFullYear(),ht.m=Zi.getUTCMonth(),ht.d=Zi.getUTCDate()+(ht.w+6)%7):(ja=(Zi=Pm(Cf(ht.y,0,1))).getDay(),Zi=ja>4||0===ja?yf.ceil(Zi):yf(Zi),Zi=vu.offset(Zi,7*(ht.V-1)),ht.y=Zi.getFullYear(),ht.m=Zi.getMonth(),ht.d=Zi.getDate()+(ht.w+6)%7)}else("W"in ht||"U"in ht)&&("w"in ht||(ht.w="u"in ht?ht.u%7:"W"in ht?1:0),ja="Z"in ht?Nm(Cf(ht.y,0,1)).getUTCDay():Pm(Cf(ht.y,0,1)).getDay(),ht.m=0,ht.d="W"in ht?(ht.w+6)%7+7*ht.W-(ja+5)%7:ht.w+7*ht.U-(ja+6)%7);return"Z"in ht?(ht.H+=ht.Z/100|0,ht.M+=ht.Z%100,Nm(ht)):Pm(ht)}}function Le(Ct,ni,Ci,ht){for(var Ka,Qt,In=0,Zi=ni.length,ja=Ci.length;In<Zi;){if(ht>=ja)return-1;if(37===(Ka=ni.charCodeAt(In++))){if(Ka=ni.charAt(In++),!(Qt=oe[Ka in Uy?ni.charAt(In++):Ka])||(ht=Qt(Ct,Ci,ht))<0)return-1}else if(Ka!=Ci.charCodeAt(ht++))return-1}return ht}return ie.x=pe(u,ie),ie.X=pe(f,ie),ie.c=pe(c,ie),te.x=pe(u,te),te.X=pe(f,te),te.c=pe(c,te),{format:function(Ct){var ni=pe(Ct+="",ie);return ni.toString=function(){return Ct},ni},parse:function(Ct){var ni=Ie(Ct+="",!1);return ni.toString=function(){return Ct},ni},utcFormat:function(Ct){var ni=pe(Ct+="",te);return ni.toString=function(){return Ct},ni},utcParse:function(Ct){var ni=Ie(Ct+="",!0);return ni.toString=function(){return Ct},ni}}}var yu,Uy={"-":"",_:" ",0:"0"},la=/^\s*\d+/,y2=/^%/,w2=/[\\^$*+?|[\]().{}]/g;function zi(r,c,u){var f=r<0?"-":"",g=(f?-r:r)+"",m=g.length;return f+(m<u?new Array(u-m+1).join(c)+g:g)}function C2(r){return r.replace(w2,"\\$&")}function xf(r){return new RegExp("^(?:"+r.map(C2).join("|")+")","i")}function Tf(r){return new Map(r.map((c,u)=>[c.toLowerCase(),u]))}function x2(r,c,u){var f=la.exec(c.slice(u,u+1));return f?(r.w=+f[0],u+f[0].length):-1}function T2(r,c,u){var f=la.exec(c.slice(u,u+1));return f?(r.u=+f[0],u+f[0].length):-1}function k2(r,c,u){var f=la.exec(c.slice(u,u+2));return f?(r.U=+f[0],u+f[0].length):-1}function S2(r,c,u){var f=la.exec(c.slice(u,u+2));return f?(r.V=+f[0],u+f[0].length):-1}function A2(r,c,u){var f=la.exec(c.slice(u,u+2));return f?(r.W=+f[0],u+f[0].length):-1}function Gy(r,c,u){var f=la.exec(c.slice(u,u+4));return f?(r.y=+f[0],u+f[0].length):-1}function Yy(r,c,u){var f=la.exec(c.slice(u,u+2));return f?(r.y=+f[0]+(+f[0]>68?1900:2e3),u+f[0].length):-1}function E2(r,c,u){var f=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(c.slice(u,u+6));return f?(r.Z=f[1]?0:-(f[2]+(f[3]||"00")),u+f[0].length):-1}function $2(r,c,u){var f=la.exec(c.slice(u,u+1));return f?(r.q=3*f[0]-3,u+f[0].length):-1}function D2(r,c,u){var f=la.exec(c.slice(u,u+2));return f?(r.m=f[0]-1,u+f[0].length):-1}function jy(r,c,u){var f=la.exec(c.slice(u,u+2));return f?(r.d=+f[0],u+f[0].length):-1}function M2(r,c,u){var f=la.exec(c.slice(u,u+3));return f?(r.m=0,r.d=+f[0],u+f[0].length):-1}function Ky(r,c,u){var f=la.exec(c.slice(u,u+2));return f?(r.H=+f[0],u+f[0].length):-1}function I2(r,c,u){var f=la.exec(c.slice(u,u+2));return f?(r.M=+f[0],u+f[0].length):-1}function L2(r,c,u){var f=la.exec(c.slice(u,u+2));return f?(r.S=+f[0],u+f[0].length):-1}function P2(r,c,u){var f=la.exec(c.slice(u,u+3));return f?(r.L=+f[0],u+f[0].length):-1}function N2(r,c,u){var f=la.exec(c.slice(u,u+6));return f?(r.L=Math.floor(f[0]/1e3),u+f[0].length):-1}function B2(r,c,u){var f=y2.exec(c.slice(u,u+1));return f?u+f[0].length:-1}function R2(r,c,u){var f=la.exec(c.slice(u));return f?(r.Q=+f[0],u+f[0].length):-1}function O2(r,c,u){var f=la.exec(c.slice(u));return f?(r.s=+f[0],u+f[0].length):-1}function Xy(r,c){return zi(r.getDate(),c,2)}function F2(r,c){return zi(r.getHours(),c,2)}function z2(r,c){return zi(r.getHours()%12||12,c,2)}function H2(r,c){return zi(1+vu.count(no(r),r),c,3)}function Qy(r,c){return zi(r.getMilliseconds(),c,3)}function _2(r,c){return Qy(r,c)+"000"}function q2(r,c){return zi(r.getMonth()+1,c,2)}function W2(r,c){return zi(r.getMinutes(),c,2)}function V2(r,c){return zi(r.getSeconds(),c,2)}function U2(r){var c=r.getDay();return 0===c?7:c}function G2(r,c){return zi(mu.count(no(r)-1,r),c,2)}function Jy(r){var c=r.getDay();return c>=4||0===c?Gc(r):Gc.ceil(r)}function Y2(r,c){return r=Jy(r),zi(Gc.count(no(r),r)+(4===no(r).getDay()),c,2)}function j2(r){return r.getDay()}function K2(r,c){return zi(yf.count(no(r)-1,r),c,2)}function X2(r,c){return zi(r.getFullYear()%100,c,2)}function Q2(r,c){return zi((r=Jy(r)).getFullYear()%100,c,2)}function J2(r,c){return zi(r.getFullYear()%1e4,c,4)}function Z2(r,c){var u=r.getDay();return zi((r=u>=4||0===u?Gc(r):Gc.ceil(r)).getFullYear()%1e4,c,4)}function eS(r){var c=r.getTimezoneOffset();return(c>0?"-":(c*=-1,"+"))+zi(c/60|0,"0",2)+zi(c%60,"0",2)}function Zy(r,c){return zi(r.getUTCDate(),c,2)}function tS(r,c){return zi(r.getUTCHours(),c,2)}function iS(r,c){return zi(r.getUTCHours()%12||12,c,2)}function nS(r,c){return zi(1+bf.count(ao(r),r),c,3)}function ew(r,c){return zi(r.getUTCMilliseconds(),c,3)}function aS(r,c){return ew(r,c)+"000"}function sS(r,c){return zi(r.getUTCMonth()+1,c,2)}function rS(r,c){return zi(r.getUTCMinutes(),c,2)}function oS(r,c){return zi(r.getUTCSeconds(),c,2)}function lS(r){var c=r.getUTCDay();return 0===c?7:c}function cS(r,c){return zi(bu.count(ao(r)-1,r),c,2)}function tw(r){var c=r.getUTCDay();return c>=4||0===c?jc(r):jc.ceil(r)}function dS(r,c){return r=tw(r),zi(jc.count(ao(r),r)+(4===ao(r).getUTCDay()),c,2)}function uS(r){return r.getUTCDay()}function hS(r,c){return zi(wf.count(ao(r)-1,r),c,2)}function fS(r,c){return zi(r.getUTCFullYear()%100,c,2)}function pS(r,c){return zi((r=tw(r)).getUTCFullYear()%100,c,2)}function gS(r,c){return zi(r.getUTCFullYear()%1e4,c,4)}function vS(r,c){var u=r.getUTCDay();return zi((r=u>=4||0===u?jc(r):jc.ceil(r)).getUTCFullYear()%1e4,c,4)}function mS(){return"+0000"}function iw(){return"%"}function nw(r){return+r}function aw(r){return Math.floor(+r/1e3)}function sw(r){return yu=Vy(r),F.timeFormat=yu.format,F.timeParse=yu.parse,F.utcFormat=yu.utcFormat,F.utcParse=yu.utcParse,yu}F.timeFormat=void 0,F.timeParse=void 0,F.utcFormat=void 0,F.utcParse=void 0,sw({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var rw="%Y-%m-%dT%H:%M:%S.%LZ",wS=Date.prototype.toISOString?function bS(r){return r.toISOString()}:F.utcFormat(rw),TS=+new Date("2000-01-01T00:00:00.000Z")?function CS(r){var c=new Date(r);return isNaN(c)?null:c}:F.utcParse(rw);function kS(r){return new Date(r)}function SS(r){return r instanceof Date?+r:+new Date(+r)}function Bm(r,c,u,f,g,m,y,C,E,S){var I=Tm(),N=I.invert,P=I.domain,W=S(".%L"),K=S(":%S"),J=S("%I:%M"),Y=S("%I %p"),Q=S("%a %d"),ne=S("%b %d"),ie=S("%B"),te=S("%Y");function oe(pe){return(E(pe)<pe?W:C(pe)<pe?K:y(pe)<pe?J:m(pe)<pe?Y:f(pe)<pe?g(pe)<pe?Q:ne:u(pe)<pe?ie:te)(pe)}return I.invert=function(pe){return new Date(N(pe))},I.domain=function(pe){return arguments.length?P(Array.from(pe,SS)):P().map(kS)},I.ticks=function(pe){var Ie=P();return r(Ie[0],Ie[Ie.length-1],pe??10)},I.tickFormat=function(pe,Ie){return null==Ie?oe:S(Ie)},I.nice=function(pe){var Ie=P();return(!pe||"function"!=typeof pe.range)&&(pe=c(Ie[0],Ie[Ie.length-1],pe??10)),pe?P(hy(Ie,pe)):I},I.copy=function(){return mf(I,Bm(r,c,u,f,g,m,y,C,E,S))},I}function Tg(){var u,f,g,m,E,r=0,c=1,y=Ya,C=!1;function S(N){return null==N||isNaN(N=+N)?E:y(0===g?.5:(N=(m(N)-u)*g,C?Math.max(0,Math.min(1,N)):N))}function I(N){return function(P){var W,K;return arguments.length?([W,K]=P,y=N(W,K),S):[y(0),y(1)]}}return S.domain=function(N){return arguments.length?([r,c]=N,u=m(r=+r),f=m(c=+c),g=u===f?0:1/(f-u),S):[r,c]},S.clamp=function(N){return arguments.length?(C=!!N,S):C},S.interpolator=function(N){return arguments.length?(y=N,S):y},S.range=I($t),S.rangeRound=I(Sl),S.unknown=function(N){return arguments.length?(E=N,S):E},function(N){return m=N,u=N(r),f=N(c),g=u===f?0:1/(f-u),S}}function Hl(r,c){return c.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function Rm(){var r=Am(Tg());return r.copy=function(){return Hl(r,Rm()).exponent(r.exponent())},Wo.apply(r,arguments)}function kg(){var g,m,y,C,E,I,P,r=0,c=.5,u=1,f=1,S=Ya,N=!1;function W(J){return isNaN(J=+J)?P:(J=.5+((J=+I(J))-m)*(f*J<f*m?C:E),S(N?Math.max(0,Math.min(1,J)):J))}function K(J){return function(Y){var Q,ne,ie;return arguments.length?([Q,ne,ie]=Y,S=ch(J,[Q,ne,ie]),W):[S(0),S(.5),S(1)]}}return W.domain=function(J){return arguments.length?([r,c,u]=J,g=I(r=+r),m=I(c=+c),y=I(u=+u),C=g===m?0:.5/(m-g),E=m===y?0:.5/(y-m),f=m<g?-1:1,W):[r,c,u]},W.clamp=function(J){return arguments.length?(N=!!J,W):N},W.interpolator=function(J){return arguments.length?(S=J,W):S},W.range=K($t),W.rangeRound=K(Sl),W.unknown=function(J){return arguments.length?(P=J,W):P},function(J){return I=J,g=J(r),m=J(c),y=J(u),C=g===m?0:.5/(m-g),E=m===y?0:.5/(y-m),f=m<g?-1:1,W}}function Om(){var r=Am(kg());return r.copy=function(){return Hl(r,Om()).exponent(r.exponent())},Wo.apply(r,arguments)}function ui(r){for(var c=r.length/6|0,u=new Array(c),f=0;f<c;)u[f]="#"+r.slice(6*f,6*++f);return u}var MS=ui("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),IS=ui("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),LS=ui("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),PS=ui("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),NS=ui("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),BS=ui("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),RS=ui("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),OS=ui("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),FS=ui("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),zS=ui("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ln=r=>Nd(r[r.length-1]),pw=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ui),HS=ln(pw),gw=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ui),_S=ln(gw),vw=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ui),qS=ln(vw),mw=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ui),WS=ln(mw),bw=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ui),VS=ln(bw),yw=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ui),US=ln(yw),ww=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ui),GS=ln(ww),Cw=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ui),YS=ln(Cw),xw=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ui),jS=ln(xw),Tw=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ui),KS=ln(Tw),kw=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ui),XS=ln(kw),Sw=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ui),QS=ln(Sw),Aw=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ui),JS=ln(Aw),Ew=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ui),ZS=ln(Ew),$w=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ui),eA=ln($w),Dw=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ui),tA=ln(Dw),Mw=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ui),iA=ln(Mw),Iw=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ui),nA=ln(Iw),Lw=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ui),aA=ln(Lw),Pw=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ui),sA=ln(Pw),Nw=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ui),rA=ln(Nw),Bw=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ui),oA=ln(Bw),Rw=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ui),lA=ln(Rw),Ow=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ui),cA=ln(Ow),Fw=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ui),dA=ln(Fw),zw=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ui),uA=ln(zw),Hw=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ui),hA=ln(Hw),pA=Lo(va(300,.5,0),va(-240,.5,1)),gA=Lo(va(-100,.75,.35),va(80,1.5,.8)),vA=Lo(va(260,.75,.35),va(80,1.5,.8)),Sg=va(),Ag=Eo(),bA=Math.PI/3,yA=2*Math.PI/3;function Eg(r){var c=r.length;return function(u){return r[Math.max(0,Math.min(c-1,Math.floor(u*c)))]}}var xA=Eg(ui("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),TA=Eg(ui("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),kA=Eg(ui("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),SA=Eg(ui("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function si(r){return function(){return r}}const _w=Math.abs,$a=Math.atan2,jo=Math.cos,AA=Math.max,wu=Math.min,ps=Math.sin,pn=Math.sqrt,Da=1e-12,_l=Math.PI,$g=_l/2,ql=2*_l;function qw(r){return r>=1?$g:r<=-1?-$g:Math.asin(r)}function kf(r){let c=3;return r.digits=function(u){if(!arguments.length)return c;if(null==u)c=null;else{const f=Math.floor(u);if(!(f>=0))throw new RangeError(`invalid digits: ${u}`);c=f}return r},()=>new Fi(c)}function $A(r){return r.innerRadius}function DA(r){return r.outerRadius}function MA(r){return r.startAngle}function IA(r){return r.endAngle}function LA(r){return r&&r.padAngle}function Dg(r,c,u,f,g,m,y){var C=r-u,E=c-f,S=(y?m:-m)/pn(C*C+E*E),I=S*E,N=-S*C,P=r+I,W=c+N,K=u+I,J=f+N,Y=(P+K)/2,Q=(W+J)/2,ne=K-P,ie=J-W,te=ne*ne+ie*ie,oe=g-m,pe=P*J-K*W,Ie=(ie<0?-1:1)*pn(AA(0,oe*oe*te-pe*pe)),Le=(pe*ie-ne*Ie)/te,Ke=(-pe*ne-ie*Ie)/te,Se=(pe*ie+ne*Ie)/te,Ce=(-pe*ne+ie*Ie)/te,tt=Le-Y,Pe=Ke-Q,me=Se-Y,Ee=Ce-Q;return tt*tt+Pe*Pe>me*me+Ee*Ee&&(Le=Se,Ke=Ce),{cx:Le,cy:Ke,x01:-I,y01:-N,x11:Le*(g/oe-1),y11:Ke*(g/oe-1)}}var BA=Array.prototype.slice;function Mg(r){return"object"==typeof r&&"length"in r?r:Array.from(r)}function Ww(r){this._context=r}function Ig(r){return new Ww(r)}function Fm(r){return r[0]}function zm(r){return r[1]}function Hm(r,c){var u=si(!0),f=null,g=Ig,m=null,y=kf(C);function C(E){var S,N,W,I=(E=Mg(E)).length,P=!1;for(null==f&&(m=g(W=y())),S=0;S<=I;++S)!(S<I&&u(N=E[S],S,E))===P&&((P=!P)?m.lineStart():m.lineEnd()),P&&m.point(+r(N,S,E),+c(N,S,E));if(W)return m=null,W+""||null}return r="function"==typeof r?r:void 0===r?Fm:si(r),c="function"==typeof c?c:void 0===c?zm:si(c),C.x=function(E){return arguments.length?(r="function"==typeof E?E:si(+E),C):r},C.y=function(E){return arguments.length?(c="function"==typeof E?E:si(+E),C):c},C.defined=function(E){return arguments.length?(u="function"==typeof E?E:si(!!E),C):u},C.curve=function(E){return arguments.length?(g=E,null!=f&&(m=g(f)),C):g},C.context=function(E){return arguments.length?(null==E?f=m=null:m=g(f=E),C):f},C}function Vw(r,c,u){var f=null,g=si(!0),m=null,y=Ig,C=null,E=kf(S);function S(N){var P,W,K,Y,ne,J=(N=Mg(N)).length,Q=!1,ie=new Array(J),te=new Array(J);for(null==m&&(C=y(ne=E())),P=0;P<=J;++P){if(!(P<J&&g(Y=N[P],P,N))===Q)if(Q=!Q)W=P,C.areaStart(),C.lineStart();else{for(C.lineEnd(),C.lineStart(),K=P-1;K>=W;--K)C.point(ie[K],te[K]);C.lineEnd(),C.areaEnd()}Q&&(ie[P]=+r(Y,P,N),te[P]=+c(Y,P,N),C.point(f?+f(Y,P,N):ie[P],u?+u(Y,P,N):te[P]))}if(ne)return C=null,ne+""||null}function I(){return Hm().defined(g).curve(y).context(m)}return r="function"==typeof r?r:void 0===r?Fm:si(+r),c="function"==typeof c?c:si(void 0===c?0:+c),u="function"==typeof u?u:void 0===u?zm:si(+u),S.x=function(N){return arguments.length?(r="function"==typeof N?N:si(+N),f=null,S):r},S.x0=function(N){return arguments.length?(r="function"==typeof N?N:si(+N),S):r},S.x1=function(N){return arguments.length?(f=null==N?null:"function"==typeof N?N:si(+N),S):f},S.y=function(N){return arguments.length?(c="function"==typeof N?N:si(+N),u=null,S):c},S.y0=function(N){return arguments.length?(c="function"==typeof N?N:si(+N),S):c},S.y1=function(N){return arguments.length?(u=null==N?null:"function"==typeof N?N:si(+N),S):u},S.lineX0=S.lineY0=function(){return I().x(r).y(c)},S.lineY1=function(){return I().x(r).y(u)},S.lineX1=function(){return I().x(f).y(c)},S.defined=function(N){return arguments.length?(g="function"==typeof N?N:si(!!N),S):g},S.curve=function(N){return arguments.length?(y=N,null!=m&&(C=y(m)),S):y},S.context=function(N){return arguments.length?(null==N?m=C=null:C=y(m=N),S):m},S}function RA(r,c){return c<r?-1:c>r?1:c>=r?0:NaN}function OA(r){return r}Ww.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,c){switch(r=+r,c=+c,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,c):this._context.moveTo(r,c);break;case 1:this._point=2;default:this._context.lineTo(r,c)}}};var Uw=_m(Ig);function Gw(r){this._curve=r}function _m(r){function c(u){return new Gw(r(u))}return c._curve=r,c}function Sf(r){var c=r.curve;return r.angle=r.x,delete r.x,r.radius=r.y,delete r.y,r.curve=function(u){return arguments.length?c(_m(u)):c()._curve},r}function Yw(){return Sf(Hm().curve(Uw))}function jw(){var r=Vw().curve(Uw),c=r.curve,u=r.lineX0,f=r.lineX1,g=r.lineY0,m=r.lineY1;return r.angle=r.x,delete r.x,r.startAngle=r.x0,delete r.x0,r.endAngle=r.x1,delete r.x1,r.radius=r.y,delete r.y,r.innerRadius=r.y0,delete r.y0,r.outerRadius=r.y1,delete r.y1,r.lineStartAngle=function(){return Sf(u())},delete r.lineX0,r.lineEndAngle=function(){return Sf(f())},delete r.lineX1,r.lineInnerRadius=function(){return Sf(g())},delete r.lineY0,r.lineOuterRadius=function(){return Sf(m())},delete r.lineY1,r.curve=function(y){return arguments.length?c(_m(y)):c()._curve},r}function Af(r,c){return[(c=+c)*Math.cos(r-=Math.PI/2),c*Math.sin(r)]}Gw.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(r,c){this._curve.point(c*Math.sin(r),c*-Math.cos(r))}};class Kw{constructor(c,u){this._context=c,this._x=u}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(c,u){switch(c=+c,u=+u,this._point){case 0:this._point=1,this._line?this._context.lineTo(c,u):this._context.moveTo(c,u);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+c)/2,this._y0,this._x0,u,c,u):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+u)/2,c,this._y0,c,u)}this._x0=c,this._y0=u}}class zA{constructor(c){this._context=c}lineStart(){this._point=0}lineEnd(){}point(c,u){if(c=+c,u=+u,0===this._point)this._point=1;else{const f=Af(this._x0,this._y0),g=Af(this._x0,this._y0=(this._y0+u)/2),m=Af(c,this._y0),y=Af(c,u);this._context.moveTo(...f),this._context.bezierCurveTo(...g,...m,...y)}this._x0=c,this._y0=u}}function Xw(r){return new Kw(r,!0)}function Qw(r){return new Kw(r,!1)}function HA(r){return new zA(r)}function _A(r){return r.source}function qA(r){return r.target}function Lg(r){let c=_A,u=qA,f=Fm,g=zm,m=null,y=null,C=kf(E);function E(){let S;const I=BA.call(arguments),N=c.apply(this,I),P=u.apply(this,I);if(null==m&&(y=r(S=C())),y.lineStart(),I[0]=N,y.point(+f.apply(this,I),+g.apply(this,I)),I[0]=P,y.point(+f.apply(this,I),+g.apply(this,I)),y.lineEnd(),S)return y=null,S+""||null}return E.source=function(S){return arguments.length?(c=S,E):c},E.target=function(S){return arguments.length?(u=S,E):u},E.x=function(S){return arguments.length?(f="function"==typeof S?S:si(+S),E):f},E.y=function(S){return arguments.length?(g="function"==typeof S?S:si(+S),E):g},E.context=function(S){return arguments.length?(null==S?m=y=null:y=r(m=S),E):m},E}const GA=pn(3);var Jw={draw(r,c){const u=.59436*pn(c+wu(c/28,.75)),f=u/2,g=f*GA;r.moveTo(0,u),r.lineTo(0,-u),r.moveTo(-g,-f),r.lineTo(g,f),r.moveTo(-g,f),r.lineTo(g,-f)}},Pg={draw(r,c){const u=pn(c/_l);r.moveTo(u,0),r.arc(0,0,u,0,ql)}},Zw={draw(r,c){const u=pn(c/5)/2;r.moveTo(-3*u,-u),r.lineTo(-u,-u),r.lineTo(-u,-3*u),r.lineTo(u,-3*u),r.lineTo(u,-u),r.lineTo(3*u,-u),r.lineTo(3*u,u),r.lineTo(u,u),r.lineTo(u,3*u),r.lineTo(-u,3*u),r.lineTo(-u,u),r.lineTo(-3*u,u),r.closePath()}};const e1=pn(1/3),YA=2*e1;var t1={draw(r,c){const u=pn(c/YA),f=u*e1;r.moveTo(0,-u),r.lineTo(f,0),r.lineTo(0,u),r.lineTo(-f,0),r.closePath()}},i1={draw(r,c){const u=.62625*pn(c);r.moveTo(0,-u),r.lineTo(u,0),r.lineTo(0,u),r.lineTo(-u,0),r.closePath()}},n1={draw(r,c){const u=.87559*pn(c-wu(c/7,2));r.moveTo(-u,0),r.lineTo(u,0),r.moveTo(0,u),r.lineTo(0,-u)}},a1={draw(r,c){const u=pn(c),f=-u/2;r.rect(f,f,u,u)}},s1={draw(r,c){const u=.4431*pn(c);r.moveTo(u,u),r.lineTo(u,-u),r.lineTo(-u,-u),r.lineTo(-u,u),r.closePath()}};const r1=ps(_l/10)/ps(7*_l/10),KA=ps(ql/10)*r1,XA=-jo(ql/10)*r1;var o1={draw(r,c){const u=pn(.8908130915292852*c),f=KA*u,g=XA*u;r.moveTo(0,-u),r.lineTo(f,g);for(let m=1;m<5;++m){const y=ql*m/5,C=jo(y),E=ps(y);r.lineTo(E*u,-C*u),r.lineTo(C*f-E*g,E*f+C*g)}r.closePath()}};const qm=pn(3);var l1={draw(r,c){const u=-pn(c/(3*qm));r.moveTo(0,2*u),r.lineTo(-qm*u,-u),r.lineTo(qm*u,-u),r.closePath()}};const QA=pn(3);var c1={draw(r,c){const u=.6824*pn(c),f=u/2,g=u*QA/2;r.moveTo(0,-u),r.lineTo(g,f),r.lineTo(-g,f),r.closePath()}};const er=-.5,tr=pn(3)/2,Wm=1/pn(12),JA=3*(Wm/2+1);var d1={draw(r,c){const u=pn(c/JA),f=u/2,g=u*Wm,m=f,y=u*Wm+u,C=-m,E=y;r.moveTo(f,g),r.lineTo(m,y),r.lineTo(C,E),r.lineTo(er*f-tr*g,tr*f+er*g),r.lineTo(er*m-tr*y,tr*m+er*y),r.lineTo(er*C-tr*E,tr*C+er*E),r.lineTo(er*f+tr*g,er*g-tr*f),r.lineTo(er*m+tr*y,er*y-tr*m),r.lineTo(er*C+tr*E,er*E-tr*C),r.closePath()}},Vm={draw(r,c){const u=.6189*pn(c-wu(c/6,1.7));r.moveTo(-u,-u),r.lineTo(u,u),r.moveTo(-u,u),r.lineTo(u,-u)}};const u1=[Pg,Zw,t1,a1,o1,l1,d1],ZA=[Pg,n1,Vm,c1,Jw,s1,i1];function Wl(){}function Ng(r,c,u){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+c)/6,(r._y0+4*r._y1+u)/6)}function Bg(r){this._context=r}function h1(r){this._context=r}function f1(r){this._context=r}function p1(r,c){this._basis=new Bg(r),this._beta=c}Bg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ng(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,c){switch(r=+r,c=+c,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,c):this._context.moveTo(r,c);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ng(this,r,c)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=c}},h1.prototype={areaStart:Wl,areaEnd:Wl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(r,c){switch(r=+r,c=+c,this._point){case 0:this._point=1,this._x2=r,this._y2=c;break;case 1:this._point=2,this._x3=r,this._y3=c;break;case 2:this._point=3,this._x4=r,this._y4=c,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+c)/6);break;default:Ng(this,r,c)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=c}},f1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,c){switch(r=+r,c=+c,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var u=(this._x0+4*this._x1+r)/6,f=(this._y0+4*this._y1+c)/6;this._line?this._context.lineTo(u,f):this._context.moveTo(u,f);break;case 3:this._point=4;default:Ng(this,r,c)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=c}},p1.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var r=this._x,c=this._y,u=r.length-1;if(u>0)for(var E,f=r[0],g=c[0],m=r[u]-f,y=c[u]-g,C=-1;++C<=u;)this._basis.point(this._beta*r[C]+(1-this._beta)*(f+(E=C/u)*m),this._beta*c[C]+(1-this._beta)*(g+E*y));this._x=this._y=null,this._basis.lineEnd()},point:function(r,c){this._x.push(+r),this._y.push(+c)}};var aE=function r(c){function u(f){return 1===c?new Bg(f):new p1(f,c)}return u.beta=function(f){return r(+f)},u}(.85);function Rg(r,c,u){r._context.bezierCurveTo(r._x1+r._k*(r._x2-r._x0),r._y1+r._k*(r._y2-r._y0),r._x2+r._k*(r._x1-c),r._y2+r._k*(r._y1-u),r._x2,r._y2)}function Um(r,c){this._context=r,this._k=(1-c)/6}Um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Rg(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,c){switch(r=+r,c=+c,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,c):this._context.moveTo(r,c);break;case 1:this._point=2,this._x1=r,this._y1=c;break;case 2:this._point=3;default:Rg(this,r,c)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=c}};var sE=function r(c){function u(f){return new Um(f,c)}return u.tension=function(f){return r(+f)},u}(0);function Gm(r,c){this._context=r,this._k=(1-c)/6}Gm.prototype={areaStart:Wl,areaEnd:Wl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(r,c){switch(r=+r,c=+c,this._point){case 0:this._point=1,this._x3=r,this._y3=c;break;case 1:this._point=2,this._context.moveTo(this._x4=r,this._y4=c);break;case 2:this._point=3,this._x5=r,this._y5=c;break;default:Rg(this,r,c)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=c}};var rE=function r(c){function u(f){return new Gm(f,c)}return u.tension=function(f){return r(+f)},u}(0);function Ym(r,c){this._context=r,this._k=(1-c)/6}Ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,c){switch(r=+r,c=+c,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Rg(this,r,c)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=c}};var oE=function r(c){function u(f){return new Ym(f,c)}return u.tension=function(f){return r(+f)},u}(0);function jm(r,c,u){var f=r._x1,g=r._y1,m=r._x2,y=r._y2;if(r._l01_a>Da){var C=2*r._l01_2a+3*r._l01_a*r._l12_a+r._l12_2a,E=3*r._l01_a*(r._l01_a+r._l12_a);f=(f*C-r._x0*r._l12_2a+r._x2*r._l01_2a)/E,g=(g*C-r._y0*r._l12_2a+r._y2*r._l01_2a)/E}if(r._l23_a>Da){var S=2*r._l23_2a+3*r._l23_a*r._l12_a+r._l12_2a,I=3*r._l23_a*(r._l23_a+r._l12_a);m=(m*S+r._x1*r._l23_2a-c*r._l12_2a)/I,y=(y*S+r._y1*r._l23_2a-u*r._l12_2a)/I}r._context.bezierCurveTo(f,g,m,y,r._x2,r._y2)}function g1(r,c){this._context=r,this._alpha=c}g1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,c){if(r=+r,c=+c,this._point){var u=this._x2-r,f=this._y2-c;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(u*u+f*f,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,c):this._context.moveTo(r,c);break;case 1:this._point=2;break;case 2:this._point=3;default:jm(this,r,c)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=c}};var lE=function r(c){function u(f){return c?new g1(f,c):new Um(f,0)}return u.alpha=function(f){return r(+f)},u}(.5);function v1(r,c){this._context=r,this._alpha=c}v1.prototype={areaStart:Wl,areaEnd:Wl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(r,c){if(r=+r,c=+c,this._point){var u=this._x2-r,f=this._y2-c;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(u*u+f*f,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=r,this._y3=c;break;case 1:this._point=2,this._context.moveTo(this._x4=r,this._y4=c);break;case 2:this._point=3,this._x5=r,this._y5=c;break;default:jm(this,r,c)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=c}};var cE=function r(c){function u(f){return c?new v1(f,c):new Gm(f,0)}return u.alpha=function(f){return r(+f)},u}(.5);function m1(r,c){this._context=r,this._alpha=c}m1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,c){if(r=+r,c=+c,this._point){var u=this._x2-r,f=this._y2-c;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(u*u+f*f,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jm(this,r,c)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=c}};var dE=function r(c){function u(f){return c?new m1(f,c):new Ym(f,0)}return u.alpha=function(f){return r(+f)},u}(.5);function b1(r){this._context=r}function y1(r){return r<0?-1:1}function w1(r,c,u){var f=r._x1-r._x0,g=c-r._x1,m=(r._y1-r._y0)/(f||g<0&&-0),y=(u-r._y1)/(g||f<0&&-0),C=(m*g+y*f)/(f+g);return(y1(m)+y1(y))*Math.min(Math.abs(m),Math.abs(y),.5*Math.abs(C))||0}function C1(r,c){var u=r._x1-r._x0;return u?(3*(r._y1-r._y0)/u-c)/2:c}function Km(r,c,u){var f=r._x0,m=r._x1,y=r._y1,C=(m-f)/3;r._context.bezierCurveTo(f+C,r._y0+C*c,m-C,y-C*u,m,y)}function Og(r){this._context=r}function x1(r){this._context=new T1(r)}function T1(r){this._context=r}function k1(r){this._context=r}function S1(r){var c,f,u=r.length-1,g=new Array(u),m=new Array(u),y=new Array(u);for(g[0]=0,m[0]=2,y[0]=r[0]+2*r[1],c=1;c<u-1;++c)g[c]=1,m[c]=4,y[c]=4*r[c]+2*r[c+1];for(g[u-1]=2,m[u-1]=7,y[u-1]=8*r[u-1]+r[u],c=1;c<u;++c)m[c]-=f=g[c]/m[c-1],y[c]-=f*y[c-1];for(g[u-1]=y[u-1]/m[u-1],c=u-2;c>=0;--c)g[c]=(y[c]-g[c+1])/m[c];for(m[u-1]=(r[u]+g[u-1])/2,c=0;c<u-1;++c)m[c]=2*r[c+1]-g[c+1];return[g,m]}function Fg(r,c){this._context=r,this._t=c}function Cu(r,c){if((y=r.length)>1)for(var f,g,y,u=1,m=r[c[0]],C=m.length;u<y;++u)for(g=m,m=r[c[u]],f=0;f<C;++f)m[f][1]+=m[f][0]=isNaN(g[f][1])?g[f][0]:g[f][1]}function xu(r){for(var c=r.length,u=new Array(c);--c>=0;)u[c]=c;return u}function bE(r,c){return r[c]}function yE(r){const c=[];return c.key=r,c}function A1(r){var c=r.map(SE);return xu(r).sort(function(u,f){return c[u]-c[f]})}function SE(r){for(var g,c=-1,u=0,f=r.length,m=-1/0;++c<f;)(g=+r[c][1])>m&&(m=g,u=c);return u}function E1(r){var c=r.map($1);return xu(r).sort(function(u,f){return c[u]-c[f]})}function $1(r){for(var g,c=0,u=-1,f=r.length;++u<f;)(g=+r[u][1])&&(c+=g);return c}b1.prototype={areaStart:Wl,areaEnd:Wl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,c){r=+r,c=+c,this._point?this._context.lineTo(r,c):(this._point=1,this._context.moveTo(r,c))}},Og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Km(this,this._t0,C1(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(r,c){var u=NaN;if(c=+c,(r=+r)!==this._x1||c!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,c):this._context.moveTo(r,c);break;case 1:this._point=2;break;case 2:this._point=3,Km(this,C1(this,u=w1(this,r,c)),u);break;default:Km(this,this._t0,u=w1(this,r,c))}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=c,this._t0=u}}},(x1.prototype=Object.create(Og.prototype)).point=function(r,c){Og.prototype.point.call(this,c,r)},T1.prototype={moveTo:function(r,c){this._context.moveTo(c,r)},closePath:function(){this._context.closePath()},lineTo:function(r,c){this._context.lineTo(c,r)},bezierCurveTo:function(r,c,u,f,g,m){this._context.bezierCurveTo(c,r,f,u,m,g)}},k1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,c=this._y,u=r.length;if(u)if(this._line?this._context.lineTo(r[0],c[0]):this._context.moveTo(r[0],c[0]),2===u)this._context.lineTo(r[1],c[1]);else for(var f=S1(r),g=S1(c),m=0,y=1;y<u;++m,++y)this._context.bezierCurveTo(f[0][m],g[0][m],f[1][m],g[1][m],r[y],c[y]);(this._line||0!==this._line&&1===u)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,c){this._x.push(+r),this._y.push(+c)}},Fg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,c){switch(r=+r,c=+c,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,c):this._context.moveTo(r,c);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,c),this._context.lineTo(r,c);else{var u=this._x*(1-this._t)+r*this._t;this._context.lineTo(u,this._y),this._context.lineTo(u,c)}}this._x=r,this._y=c}};var zg=r=>()=>r;function DE(r,{sourceEvent:c,target:u,transform:f,dispatch:g}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:c,enumerable:!0,configurable:!0},target:{value:u,enumerable:!0,configurable:!0},transform:{value:f,enumerable:!0,configurable:!0},_:{value:g}})}function so(r,c,u){this.k=r,this.x=c,this.y=u}so.prototype={constructor:so,scale:function(r){return 1===r?this:new so(this.k*r,this.x,this.y)},translate:function(r,c){return 0===r&0===c?this:new so(this.k,this.x+this.k*r,this.y+this.k*c)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hg=new so(1,0,0);function D1(r){for(;!r.__zoom;)if(!(r=r.parentNode))return Hg;return r.__zoom}function Xm(r){r.stopImmediatePropagation()}function Ef(r){r.preventDefault(),r.stopImmediatePropagation()}function ME(r){return!(r.ctrlKey&&"wheel"!==r.type||r.button)}function IE(){var r=this;return r instanceof SVGElement?(r=r.ownerSVGElement||r).hasAttribute("viewBox")?[[(r=r.viewBox.baseVal).x,r.y],[r.x+r.width,r.y+r.height]]:[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]:[[0,0],[r.clientWidth,r.clientHeight]]}function M1(){return this.__zoom||Hg}function LE(r){return-r.deltaY*(1===r.deltaMode?.05:r.deltaMode?1:.002)*(r.ctrlKey?10:1)}function PE(){return navigator.maxTouchPoints||"ontouchstart"in this}function NE(r,c,u){var f=r.invertX(c[0][0])-u[0][0],g=r.invertX(c[1][0])-u[1][0],m=r.invertY(c[0][1])-u[0][1],y=r.invertY(c[1][1])-u[1][1];return r.translate(g>f?(f+g)/2:Math.min(0,f)||Math.max(0,g),y>m?(m+y)/2:Math.min(0,m)||Math.max(0,y))}D1.prototype=so.prototype,F.Adder=bn,F.Delaunay=uv,F.FormatSpecifier=Ap,F.InternMap=ea,F.InternSet=Hn,F.Node=Wc,F.Path=Fi,F.Voronoi=Qm,F.ZoomTransform=so,F.active=function v(r,c){var f,g,u=r.__transition;if(u)for(g in c=null==c?null:c+"",u)if((f=u[g]).state>1&&f.name===c)return new as([[r]],p,c,+g);return null},F.arc=function NA(){var r=$A,c=DA,u=si(0),f=null,g=MA,m=IA,y=LA,C=null,E=kf(S);function S(){var I,N,P=+r.apply(this,arguments),W=+c.apply(this,arguments),K=g.apply(this,arguments)-$g,J=m.apply(this,arguments)-$g,Y=_w(J-K),Q=J>K;if(C||(C=I=E()),W<P&&(N=W,W=P,P=N),W>Da)if(Y>ql-Da)C.moveTo(W*jo(K),W*ps(K)),C.arc(0,0,W,K,J,!Q),P>Da&&(C.moveTo(P*jo(J),P*ps(J)),C.arc(0,0,P,J,K,Q));else{var Pe,me,ne=K,ie=J,te=K,oe=J,pe=Y,Ie=Y,Le=y.apply(this,arguments)/2,Ke=Le>Da&&(f?+f.apply(this,arguments):pn(P*P+W*W)),Se=wu(_w(W-P)/2,+u.apply(this,arguments)),Ce=Se,tt=Se;if(Ke>Da){var Ee=qw(Ke/P*ps(Le)),De=qw(Ke/W*ps(Le));(pe-=2*Ee)>Da?(te+=Ee*=Q?1:-1,oe-=Ee):(pe=0,te=oe=(K+J)/2),(Ie-=2*De)>Da?(ne+=De*=Q?1:-1,ie-=De):(Ie=0,ne=ie=(K+J)/2)}var _e=W*jo(ne),lt=W*ps(ne),dt=P*jo(oe),mt=P*ps(oe);if(Se>Da){var $i,At=W*jo(ie),Ht=W*ps(ie),Ki=P*jo(te),Ri=P*ps(te);if(Y<_l)if($i=function PA(r,c,u,f,g,m,y,C){var E=u-r,S=f-c,I=y-g,N=C-m,P=N*E-I*S;if(!(P*P<Da))return[r+(P=(I*(c-m)-N*(r-g))/P)*E,c+P*S]}(_e,lt,Ki,Ri,At,Ht,dt,mt)){var Kn=_e-$i[0],Hi=lt-$i[1],zn=At-$i[0],Ct=Ht-$i[1],ni=1/ps(function EA(r){return r>1?0:r<-1?_l:Math.acos(r)}((Kn*zn+Hi*Ct)/(pn(Kn*Kn+Hi*Hi)*pn(zn*zn+Ct*Ct)))/2),Ci=pn($i[0]*$i[0]+$i[1]*$i[1]);Ce=wu(Se,(P-Ci)/(ni-1)),tt=wu(Se,(W-Ci)/(ni+1))}else Ce=tt=0}Ie>Da?tt>Da?(Pe=Dg(Ki,Ri,_e,lt,W,tt,Q),me=Dg(At,Ht,dt,mt,W,tt,Q),C.moveTo(Pe.cx+Pe.x01,Pe.cy+Pe.y01),tt<Se?C.arc(Pe.cx,Pe.cy,tt,$a(Pe.y01,Pe.x01),$a(me.y01,me.x01),!Q):(C.arc(Pe.cx,Pe.cy,tt,$a(Pe.y01,Pe.x01),$a(Pe.y11,Pe.x11),!Q),C.arc(0,0,W,$a(Pe.cy+Pe.y11,Pe.cx+Pe.x11),$a(me.cy+me.y11,me.cx+me.x11),!Q),C.arc(me.cx,me.cy,tt,$a(me.y11,me.x11),$a(me.y01,me.x01),!Q))):(C.moveTo(_e,lt),C.arc(0,0,W,ne,ie,!Q)):C.moveTo(_e,lt),P>Da&&pe>Da?Ce>Da?(Pe=Dg(dt,mt,At,Ht,P,-Ce,Q),me=Dg(_e,lt,Ki,Ri,P,-Ce,Q),C.lineTo(Pe.cx+Pe.x01,Pe.cy+Pe.y01),Ce<Se?C.arc(Pe.cx,Pe.cy,Ce,$a(Pe.y01,Pe.x01),$a(me.y01,me.x01),!Q):(C.arc(Pe.cx,Pe.cy,Ce,$a(Pe.y01,Pe.x01),$a(Pe.y11,Pe.x11),!Q),C.arc(0,0,P,$a(Pe.cy+Pe.y11,Pe.cx+Pe.x11),$a(me.cy+me.y11,me.cx+me.x11),Q),C.arc(me.cx,me.cy,Ce,$a(me.y11,me.x11),$a(me.y01,me.x01),!Q))):C.arc(0,0,P,oe,te,Q):C.lineTo(dt,mt)}else C.moveTo(0,0);if(C.closePath(),I)return C=null,I+""||null}return S.centroid=function(){var I=(+r.apply(this,arguments)+ +c.apply(this,arguments))/2,N=(+g.apply(this,arguments)+ +m.apply(this,arguments))/2-_l/2;return[jo(N)*I,ps(N)*I]},S.innerRadius=function(I){return arguments.length?(r="function"==typeof I?I:si(+I),S):r},S.outerRadius=function(I){return arguments.length?(c="function"==typeof I?I:si(+I),S):c},S.cornerRadius=function(I){return arguments.length?(u="function"==typeof I?I:si(+I),S):u},S.padRadius=function(I){return arguments.length?(f=null==I?null:"function"==typeof I?I:si(+I),S):f},S.startAngle=function(I){return arguments.length?(g="function"==typeof I?I:si(+I),S):g},S.endAngle=function(I){return arguments.length?(m="function"==typeof I?I:si(+I),S):m},S.padAngle=function(I){return arguments.length?(y="function"==typeof I?I:si(+I),S):y},S.context=function(I){return arguments.length?(C=I??null,S):C},S},F.area=Vw,F.areaRadial=jw,F.ascending=pi,F.autoType=function Z1(r){for(var c in r){var f,g,u=r[c].trim();if(u)if("true"===u)u=!0;else if("false"===u)u=!1;else if("NaN"===u)u=NaN;else if(isNaN(f=+u)){if(!(g=u.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;eC&&g[4]&&!g[7]&&(u=u.replace(/-/g,"/").replace(/T/," ")),u=new Date(u)}else u=f;else u=null;r[c]=u}return r},F.axisBottom=function lc(r){return Br(3,r)},F.axisLeft=function Mu(r){return Br(4,r)},F.axisRight=function ua(r){return Br(2,r)},F.axisTop=function da(r){return Br(1,r)},F.bin=B,F.bisect=ir,F.bisectCenter=Xc,F.bisectLeft=lo,F.bisectRight=Gl,F.bisector=Ma,F.blob=function iC(r,c){return fetch(r,c).then(tC)},F.blur=function Di(r,c){if(!((c=+c)>=0))throw new RangeError("invalid r");let u=r.length;if(!((u=Math.floor(u))>=0))throw new RangeError("invalid length");if(!u||!c)return r;const f=Xo(c),g=r.slice();return f(r,g,0,u,1),f(g,r,0,u,1),f(r,g,0,u,1),r},F.blur2=ei,F.blurImage=xr,F.brush=function yt(){return Dt(he)},F.brushSelection=function He(r){var c=r.__brush;return c?c.dim.output(c.selection):null},F.brushX=function Ae(){return Dt(X)},F.brushY=function We(){return Dt(fe)},F.buffer=function aC(r,c){return fetch(r,c).then(nC)},F.chord=function yi(){return Jn(!1,!1)},F.chordDirected=function Ai(){return Jn(!0,!1)},F.chordTranspose=function Nt(){return Jn(!1,!0)},F.cluster=function xT(){var r=gT,c=1,u=1,f=!1;function g(m){var y,C=0;m.eachAfter(function(P){var W=P.children;W?(P.x=function vT(r){return r.reduce(mT,0)/r.length}(W),P.y=function bT(r){return 1+r.reduce(yT,0)}(W)):(P.x=y?C+=r(P,y):0,P.y=0,y=P)});var E=function wT(r){for(var c;c=r.children;)r=c[0];return r}(m),S=function CT(r){for(var c;c=r.children;)r=c[c.length-1];return r}(m),I=E.x-r(E,S)/2,N=S.x+r(S,E)/2;return m.eachAfter(f?function(P){P.x=(P.x-m.x)*c,P.y=(m.y-P.y)*u}:function(P){P.x=(P.x-I)/(N-I)*c,P.y=(1-(m.y?P.y/m.y:1))*u})}return g.separation=function(m){return arguments.length?(r=m,g):r},g.size=function(m){return arguments.length?(f=!1,c=+m[0],u=+m[1],g):f?null:[c,u]},g.nodeSize=function(m){return arguments.length?(f=!0,c=+m[0],u=+m[1],g):f?[c,u]:null},g},F.color=Gr,F.contourDensity=function Ve(){var r=ds,c=Uh,u=tu,f=960,g=500,m=20,y=2,C=3*m,E=f+2*C>>y,S=g+2*C>>y,I=xn(20);function N(ne){var ie=new Float32Array(E*S),te=Math.pow(2,-y),oe=-1;for(const Pe of ne){var pe=(r(Pe,++oe,ne)+C)*te,Ie=(c(Pe,oe,ne)+C)*te,Le=+u(Pe,oe,ne);if(Le&&pe>=0&&pe<E&&Ie>=0&&Ie<S){var Ke=Math.floor(pe),Se=Math.floor(Ie),Ce=pe-Ke-.5,tt=Ie-Se-.5;ie[Ke+Se*E]+=(1-Ce)*(1-tt)*Le,ie[Ke+1+Se*E]+=Ce*(1-tt)*Le,ie[Ke+1+(Se+1)*E]+=Ce*tt*Le,ie[Ke+(Se+1)*E]+=(1-Ce)*tt*Le}}return ei({data:ie,width:E,height:S},m*te),ie}function P(ne){var ie=N(ne),te=I(ie),oe=Math.pow(2,2*y);return Array.isArray(te)||(te=xt(Number.MIN_VALUE,Pn(ie)/oe,te)),js().size([E,S]).thresholds(te.map(pe=>pe*oe))(ie).map((pe,Ie)=>(pe.value=+te[Ie],W(pe)))}function W(ne){return ne.coordinates.forEach(K),ne}function K(ne){ne.forEach(J)}function J(ne){ne.forEach(Y)}function Y(ne){ne[0]=ne[0]*Math.pow(2,y)-C,ne[1]=ne[1]*Math.pow(2,y)-C}function Q(){return E=f+2*(C=3*m)>>y,S=g+2*C>>y,P}return P.contours=function(ne){var ie=N(ne),te=js().size([E,S]),oe=Math.pow(2,2*y),pe=Ie=>{var Le=W(te.contour(ie,(Ie=+Ie)*oe));return Le.value=Ie,Le};return Object.defineProperty(pe,"max",{get:()=>Pn(ie)/oe}),pe},P.x=function(ne){return arguments.length?(r="function"==typeof ne?ne:xn(+ne),P):r},P.y=function(ne){return arguments.length?(c="function"==typeof ne?ne:xn(+ne),P):c},P.weight=function(ne){return arguments.length?(u="function"==typeof ne?ne:xn(+ne),P):u},P.size=function(ne){if(!arguments.length)return[f,g];var ie=+ne[0],te=+ne[1];if(!(ie>=0&&te>=0))throw new Error("invalid size");return f=ie,g=te,Q()},P.cellSize=function(ne){if(!arguments.length)return 1<<y;if(!((ne=+ne)>=1))throw new Error("invalid cell size");return y=Math.floor(Math.log(ne)/Math.LN2),Q()},P.thresholds=function(ne){return arguments.length?(I="function"==typeof ne?ne:Array.isArray(ne)?xn(Vi.call(ne)):xn(ne),P):I},P.bandwidth=function(ne){if(!arguments.length)return Math.sqrt(m*(m+1));if(!((ne=+ne)>=0))throw new Error("invalid bandwidth");return m=(Math.sqrt(4*ne*ne+1)-1)/2,Q()},P},F.contours=js,F.count=Sr,F.create=function se(r){return ue(sl(r).call(document.documentElement))},F.creator=sl,F.cross=function ya(...r){const c="function"==typeof r[r.length-1]&&function Jc(r){return c=>r(...c)}(r.pop()),u=(r=r.map(Qc)).map(ar),f=r.length-1,g=new Array(f+1).fill(0),m=[];if(f<0||u.some(Ar))return m;for(;;){m.push(g.map((C,E)=>r[E][C]));let y=f;for(;++g[y]===u[y];){if(0===y)return c?m.map(c):m;g[y--]=0}}},F.csv=oC,F.csvFormat=q1,F.csvFormatBody=W1,F.csvFormatRow=U1,F.csvFormatRows=V1,F.csvFormatValue=G1,F.csvParse=tb,F.csvParseRows=_1,F.cubehelix=va,F.cumsum=function Zc(r,c){var u=0,f=0;return Float64Array.from(r,void 0===c?g=>u+=+g||0:g=>u+=+c(g,f++,r)||0)},F.curveBasis=function tE(r){return new Bg(r)},F.curveBasisClosed=function iE(r){return new h1(r)},F.curveBasisOpen=function nE(r){return new f1(r)},F.curveBumpX=Xw,F.curveBumpY=Qw,F.curveBundle=aE,F.curveCardinal=sE,F.curveCardinalClosed=rE,F.curveCardinalOpen=oE,F.curveCatmullRom=lE,F.curveCatmullRomClosed=cE,F.curveCatmullRomOpen=dE,F.curveLinear=Ig,F.curveLinearClosed=function uE(r){return new b1(r)},F.curveMonotoneX=function hE(r){return new Og(r)},F.curveMonotoneY=function fE(r){return new x1(r)},F.curveNatural=function pE(r){return new k1(r)},F.curveStep=function gE(r){return new Fg(r,.5)},F.curveStepAfter=function mE(r){return new Fg(r,1)},F.curveStepBefore=function vE(r){return new Fg(r,0)},F.descending=Ul,F.deviation=Qo,F.difference=function cd(r,...c){r=new Hn(r);for(const u of c)for(const f of u)r.delete(f);return r},F.disjoint=function dd(r,c){const u=c[Symbol.iterator](),f=new Hn;for(const g of r){if(f.has(g))return!1;let m,y;for(;({value:m,done:y}=u.next())&&!y;){if(Object.is(g,m))return!1;f.add(m)}}return!0},F.dispatch=Rs,F.drag=function es(){var C,E,S,I,r=Vn,c=Un,u=xi,f=ko,g={},m=Rs("start","drag","end"),y=0,N=0;function P(te){te.on("mousedown.drag",W).filter(f).on("touchstart.drag",Y).on("touchmove.drag",Q,pt).on("touchend.drag touchcancel.drag",ne).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function W(te,oe){if(!I&&r.call(this,te,oe)){var pe=ie(this,c.call(this,te,oe),te,oe,"mouse");pe&&(ue(te.view).on("mousemove.drag",K,Bt).on("mouseup.drag",J,Bt),Vt(te.view),Ft(te),S=!1,C=te.clientX,E=te.clientY,pe("start",te))}}function K(te){if(Rt(te),!S){var oe=te.clientX-C,pe=te.clientY-E;S=oe*oe+pe*pe>N}g.mouse("drag",te)}function J(te){ue(te.view).on("mousemove.drag mouseup.drag",null),Ii(te.view,S),Rt(te),g.mouse("end",te)}function Y(te,oe){if(r.call(this,te,oe)){var Ke,Se,pe=te.changedTouches,Ie=c.call(this,te,oe),Le=pe.length;for(Ke=0;Ke<Le;++Ke)(Se=ie(this,Ie,te,oe,pe[Ke].identifier,pe[Ke]))&&(Ft(te),Se("start",te,pe[Ke]))}}function Q(te){var Ie,Le,oe=te.changedTouches,pe=oe.length;for(Ie=0;Ie<pe;++Ie)(Le=g[oe[Ie].identifier])&&(Rt(te),Le("drag",te,oe[Ie]))}function ne(te){var Ie,Le,oe=te.changedTouches,pe=oe.length;for(I&&clearTimeout(I),I=setTimeout(function(){I=null},500),Ie=0;Ie<pe;++Ie)(Le=g[oe[Ie].identifier])&&(Ft(te),Le("end",te,oe[Ie]))}function ie(te,oe,pe,Ie,Le,Ke){var tt,Pe,me,Se=m.copy(),Ce=Ue(Ke||pe,oe);if(null!=(me=u.call(te,new Qi("beforestart",{sourceEvent:pe,target:P,identifier:Le,active:y,x:Ce[0],y:Ce[1],dx:0,dy:0,dispatch:Se}),Ie)))return tt=me.x-Ce[0]||0,Pe=me.y-Ce[1]||0,function Ee(De,_e,lt){var mt,dt=Ce;switch(De){case"start":g[Le]=Ee,mt=y++;break;case"end":delete g[Le],--y;case"drag":Ce=Ue(lt||_e,oe),mt=y}Se.call(De,te,new Qi(De,{sourceEvent:_e,subject:me,target:P,identifier:Le,active:mt,x:Ce[0]+tt,y:Ce[1]+Pe,dx:Ce[0]-dt[0],dy:Ce[1]-dt[1],dispatch:Se}),Ie)}}return P.filter=function(te){return arguments.length?(r="function"==typeof te?te:It(!!te),P):r},P.container=function(te){return arguments.length?(c="function"==typeof te?te:It(te),P):c},P.subject=function(te){return arguments.length?(u="function"==typeof te?te:It(te),P):u},P.touchable=function(te){return arguments.length?(f="function"==typeof te?te:It(!!te),P):f},P.on=function(){var te=m.on.apply(m,arguments);return te===m?P:te},P.clickDistance=function(te){return arguments.length?(N=(te=+te)*te,P):Math.sqrt(N)},P},F.dragDisable=Vt,F.dragEnable=Ii,F.dsv=function rC(r,c,u,f){3===arguments.length&&"function"==typeof u&&(f=u,u=void 0);var g=xp(r);return Tp(c,u).then(function(m){return g.parse(m,f)})},F.dsvFormat=xp,F.easeBack=s,F.easeBackIn=cv,F.easeBackInOut=s,F.easeBackOut=dv,F.easeBounce=Aa,F.easeBounceIn=function Vh(r){return 1-Aa(1-r)},F.easeBounceInOut=function lv(r){return((r*=2)<=1?1-Aa(1-r):Aa(r-1)+1)/2},F.easeBounceOut=Aa,F.easeCircle=bp,F.easeCircleIn=function rv(r){return 1-Math.sqrt(1-r*r)},F.easeCircleInOut=bp,F.easeCircleOut=function mp(r){return Math.sqrt(1- --r*r)},F.easeCubic=br,F.easeCubicIn=function fp(r){return r*r*r},F.easeCubicInOut=br,F.easeCubicOut=function Oh(r){return--r*r*r+1},F.easeElastic=a,F.easeElasticIn=n,F.easeElasticInOut=o,F.easeElasticOut=a,F.easeExp=vp,F.easeExpIn=function ss(r){return Us(1-+r)},F.easeExpInOut=vp,F.easeExpOut=function sv(r){return 1-Us(r)},F.easeLinear=r=>+r,F.easePoly=Rn,F.easePolyIn=pp,F.easePolyInOut=Rn,F.easePolyOut=zh,F.easeQuad=Ra,F.easeQuadIn=function hp(r){return r*r},F.easeQuadInOut=Ra,F.easeQuadOut=function Nc(r){return r*(2-r)},F.easeSin=Bc,F.easeSinIn=function Hh(r){return 1==+r?1:1-Math.cos(r*Jd)},F.easeSinInOut=Bc,F.easeSinOut=function av(r){return Math.sin(r*Jd)},F.every=function od(r,c){if("function"!=typeof c)throw new TypeError("test is not a function");let u=-1;for(const f of r)if(!c(f,++u,r))return!1;return!0},F.extent=ca,F.fcumsum=function rt(r,c){const u=new bn;let f=-1;return Float64Array.from(r,void 0===c?g=>u.add(+g||0):g=>u.add(+c(g,++f,r)||0))},F.filter=function Au(r,c){if("function"!=typeof c)throw new TypeError("test is not a function");const u=[];let f=-1;for(const g of r)c(g,++f,r)&&u.push(g);return u},F.flatGroup=function de(r,...c){return Fe(ho(r,...c),c)},F.flatRollup=function Jt(r,c,...u){return Fe(Xn(r,c,...u),u)},F.forceCenter=function gC(r,c){var u,f=1;function g(){var m,C,y=u.length,E=0,S=0;for(m=0;m<y;++m)E+=(C=u[m]).x,S+=C.y;for(E=(E/y-r)*f,S=(S/y-c)*f,m=0;m<y;++m)(C=u[m]).x-=E,C.y-=S}return null==r&&(r=0),null==c&&(c=0),g.initialize=function(m){u=m},g.x=function(m){return arguments.length?(r=+m,g):r},g.y=function(m){return arguments.length?(c=+m,g):c},g.strength=function(m){return arguments.length?(f=+m,g):f},g},F.forceCollide=function NC(r){var c,u,f,g=1,m=1;function y(){for(var S,N,P,W,K,J,Y,I=c.length,Q=0;Q<m;++Q)for(N=kp(c,LC,PC).visitAfter(C),S=0;S<I;++S)Y=(J=u[(P=c[S]).index])*J,W=P.x+P.vx,K=P.y+P.vy,N.visit(ne);function ne(ie,te,oe,pe,Ie){var Le=ie.data,Ke=ie.r,Se=J+Ke;if(!Le)return te>W+Se||pe<W-Se||oe>K+Se||Ie<K-Se;if(Le.index>P.index){var Ce=W-Le.x-Le.vx,tt=K-Le.y-Le.vy,Pe=Ce*Ce+tt*tt;Pe<Se*Se&&(0===Ce&&(Pe+=(Ce=Rl(f))*Ce),0===tt&&(Pe+=(tt=Rl(f))*tt),Pe=(Se-(Pe=Math.sqrt(Pe)))/Pe*g,P.vx+=(Ce*=Pe)*(Se=(Ke*=Ke)/(Y+Ke)),P.vy+=(tt*=Pe)*Se,Le.vx-=Ce*(Se=1-Se),Le.vy-=tt*Se)}}}function C(S){if(S.data)return S.r=u[S.data.index];for(var I=S.r=0;I<4;++I)S[I]&&S[I].r>S.r&&(S.r=S[I].r)}function E(){if(c){var S,N,I=c.length;for(u=new Array(I),S=0;S<I;++S)u[(N=c[S]).index]=+r(N,S,c)}}return"function"!=typeof r&&(r=Zn(null==r?1:+r)),y.initialize=function(S,I){c=S,f=I,E()},y.iterations=function(S){return arguments.length?(m=+S,y):m},y.strength=function(S){return arguments.length?(g=+S,y):g},y.radius=function(S){return arguments.length?(r="function"==typeof S?S:Zn(+S),E(),y):r},y},F.forceLink=function RC(r){var f,m,y,C,E,S,c=BC,u=function N(Y){return 1/Math.min(C[Y.source.index],C[Y.target.index])},g=Zn(30),I=1;function P(Y){for(var Q=0,ne=r.length;Q<I;++Q)for(var te,oe,pe,Ie,Le,Ke,Se,ie=0;ie<ne;++ie)Ie=(pe=(te=r[ie]).target).x+pe.vx-(oe=te.source).x-oe.vx||Rl(S),Le=pe.y+pe.vy-oe.y-oe.vy||Rl(S),Le*=Ke=((Ke=Math.sqrt(Ie*Ie+Le*Le))-m[ie])/Ke*Y*f[ie],pe.vx-=(Ie*=Ke)*(Se=E[ie]),pe.vy-=Le*Se,oe.vx+=Ie*(Se=1-Se),oe.vy+=Le*Se}function W(){if(y){var Y,te,Q=y.length,ne=r.length,ie=new Map(y.map((oe,pe)=>[c(oe,pe,y),oe]));for(Y=0,C=new Array(Q);Y<ne;++Y)(te=r[Y]).index=Y,"object"!=typeof te.source&&(te.source=rb(ie,te.source)),"object"!=typeof te.target&&(te.target=rb(ie,te.target)),C[te.source.index]=(C[te.source.index]||0)+1,C[te.target.index]=(C[te.target.index]||0)+1;for(Y=0,E=new Array(ne);Y<ne;++Y)E[Y]=C[(te=r[Y]).source.index]/(C[te.source.index]+C[te.target.index]);f=new Array(ne),K(),m=new Array(ne),J()}}function K(){if(y)for(var Y=0,Q=r.length;Y<Q;++Y)f[Y]=+u(r[Y],Y,r)}function J(){if(y)for(var Y=0,Q=r.length;Y<Q;++Y)m[Y]=+g(r[Y],Y,r)}return null==r&&(r=[]),P.initialize=function(Y,Q){y=Y,S=Q,W()},P.links=function(Y){return arguments.length?(r=Y,W(),P):r},P.id=function(Y){return arguments.length?(c=Y,P):c},P.iterations=function(Y){return arguments.length?(I=+Y,P):I},P.strength=function(Y){return arguments.length?(u="function"==typeof Y?Y:Zn(+Y),K(),P):u},P.distance=function(Y){return arguments.length?(g="function"==typeof Y?Y:Zn(+Y),J(),P):g},P},F.forceManyBody=function UC(){var r,c,u,f,m,g=Zn(-30),y=1,C=1/0,E=.81;function S(W){var K,J=r.length,Y=kp(r,HC,_C).visitAfter(N);for(f=W,K=0;K<J;++K)c=r[K],Y.visit(P)}function I(){if(r){var W,J,K=r.length;for(m=new Array(K),W=0;W<K;++W)m[(J=r[W]).index]=+g(J,W,r)}}function N(W){var J,Y,ne,ie,te,K=0,Q=0;if(W.length){for(ne=ie=te=0;te<4;++te)(J=W[te])&&(Y=Math.abs(J.value))&&(K+=J.value,Q+=Y,ne+=Y*J.x,ie+=Y*J.y);W.x=ne/Q,W.y=ie/Q}else{(J=W).x=J.data.x,J.y=J.data.y;do{K+=m[J.data.index]}while(J=J.next)}W.value=K}function P(W,K,J,Y){if(!W.value)return!0;var Q=W.x-c.x,ne=W.y-c.y,ie=Y-K,te=Q*Q+ne*ne;if(ie*ie/E<te)return te<C&&(0===Q&&(te+=(Q=Rl(u))*Q),0===ne&&(te+=(ne=Rl(u))*ne),te<y&&(te=Math.sqrt(y*te)),c.vx+=Q*W.value*f/te,c.vy+=ne*W.value*f/te),!0;if(!(W.length||te>=C)){(W.data!==c||W.next)&&(0===Q&&(te+=(Q=Rl(u))*Q),0===ne&&(te+=(ne=Rl(u))*ne),te<y&&(te=Math.sqrt(y*te)));do{W.data!==c&&(c.vx+=Q*(ie=m[W.data.index]*f/te),c.vy+=ne*ie)}while(W=W.next)}}return S.initialize=function(W,K){r=W,u=K,I()},S.strength=function(W){return arguments.length?(g="function"==typeof W?W:Zn(+W),I(),S):g},S.distanceMin=function(W){return arguments.length?(y=W*W,S):Math.sqrt(y)},S.distanceMax=function(W){return arguments.length?(C=W*W,S):Math.sqrt(C)},S.theta=function(W){return arguments.length?(E=W*W,S):Math.sqrt(E)},S},F.forceRadial=function GC(r,c,u){var f,m,y,g=Zn(.1);function C(S){for(var I=0,N=f.length;I<N;++I){var P=f[I],W=P.x-c||1e-6,K=P.y-u||1e-6,J=Math.sqrt(W*W+K*K),Y=(y[I]-J)*m[I]*S/J;P.vx+=W*Y,P.vy+=K*Y}}function E(){if(f){var S,I=f.length;for(m=new Array(I),y=new Array(I),S=0;S<I;++S)y[S]=+r(f[S],S,f),m[S]=isNaN(y[S])?0:+g(f[S],S,f)}}return"function"!=typeof r&&(r=Zn(+r)),null==c&&(c=0),null==u&&(u=0),C.initialize=function(S){f=S,E()},C.strength=function(S){return arguments.length?(g="function"==typeof S?S:Zn(+S),E(),C):g},C.radius=function(S){return arguments.length?(r="function"==typeof S?S:Zn(+S),E(),C):r},C.x=function(S){return arguments.length?(c=+S,C):c},C.y=function(S){return arguments.length?(u=+S,C):u},C},F.forceSimulation=function VC(r){var c,u=1,f=.001,g=1-Math.pow(f,1/300),m=0,y=.6,C=new Map,E=Gd(N),S=Rs("tick","end"),I=function zC(){let r=1;return()=>(r=(1664525*r+1013904223)%ob)/ob}();function N(){P(),S.call("tick",c),u<f&&(E.stop(),S.call("end",c))}function P(J){var Y,ne,Q=r.length;void 0===J&&(J=1);for(var ie=0;ie<J;++ie)for(u+=(m-u)*g,C.forEach(function(te){te(u)}),Y=0;Y<Q;++Y)null==(ne=r[Y]).fx?ne.x+=ne.vx*=y:(ne.x=ne.fx,ne.vx=0),null==ne.fy?ne.y+=ne.vy*=y:(ne.y=ne.fy,ne.vy=0);return c}function W(){for(var Q,J=0,Y=r.length;J<Y;++J){if((Q=r[J]).index=J,null!=Q.fx&&(Q.x=Q.fx),null!=Q.fy&&(Q.y=Q.fy),isNaN(Q.x)||isNaN(Q.y)){var ne=10*Math.sqrt(.5+J),ie=J*WC;Q.x=ne*Math.cos(ie),Q.y=ne*Math.sin(ie)}(isNaN(Q.vx)||isNaN(Q.vy))&&(Q.vx=Q.vy=0)}}function K(J){return J.initialize&&J.initialize(r,I),J}return null==r&&(r=[]),W(),c={tick:P,restart:function(){return E.restart(N),c},stop:function(){return E.stop(),c},nodes:function(J){return arguments.length?(r=J,W(),C.forEach(K),c):r},alpha:function(J){return arguments.length?(u=+J,c):u},alphaMin:function(J){return arguments.length?(f=+J,c):f},alphaDecay:function(J){return arguments.length?(g=+J,c):+g},alphaTarget:function(J){return arguments.length?(m=+J,c):m},velocityDecay:function(J){return arguments.length?(y=1-J,c):1-y},randomSource:function(J){return arguments.length?(I=J,C.forEach(K),c):I},force:function(J,Y){return arguments.length>1?(null==Y?C.delete(J):C.set(J,K(Y)),c):C.get(J)},find:function(J,Y,Q){var te,oe,pe,Ie,Le,ne=0,ie=r.length;for(null==Q?Q=1/0:Q*=Q,ne=0;ne<ie;++ne)(pe=(te=J-(Ie=r[ne]).x)*te+(oe=Y-Ie.y)*oe)<Q&&(Le=Ie,Q=pe);return Le},on:function(J,Y){return arguments.length>1?(S.on(J,Y),c):S.on(J)}}},F.forceX=function YC(r){var u,f,g,c=Zn(.1);function m(C){for(var I,E=0,S=u.length;E<S;++E)(I=u[E]).vx+=(g[E]-I.x)*f[E]*C}function y(){if(u){var C,E=u.length;for(f=new Array(E),g=new Array(E),C=0;C<E;++C)f[C]=isNaN(g[C]=+r(u[C],C,u))?0:+c(u[C],C,u)}}return"function"!=typeof r&&(r=Zn(null==r?0:+r)),m.initialize=function(C){u=C,y()},m.strength=function(C){return arguments.length?(c="function"==typeof C?C:Zn(+C),y(),m):c},m.x=function(C){return arguments.length?(r="function"==typeof C?C:Zn(+C),y(),m):r},m},F.forceY=function jC(r){var u,f,g,c=Zn(.1);function m(C){for(var I,E=0,S=u.length;E<S;++E)(I=u[E]).vy+=(g[E]-I.y)*f[E]*C}function y(){if(u){var C,E=u.length;for(f=new Array(E),g=new Array(E),C=0;C<E;++C)f[C]=isNaN(g[C]=+r(u[C],C,u))?0:+c(u[C],C,u)}}return"function"!=typeof r&&(r=Zn(null==r?0:+r)),m.initialize=function(C){u=C,y()},m.strength=function(C){return arguments.length?(c="function"==typeof C?C:Zn(+C),y(),m):c},m.y=function(C){return arguments.length?(r="function"==typeof C?C:Zn(+C),y(),m):r},m},F.formatDefaultLocale=gb,F.formatLocale=pb,F.formatSpecifier=ru,F.fsum=function Tu(r,c){const u=new bn;if(void 0===c)for(let f of r)(f=+f)&&u.add(f);else{let f=-1;for(let g of r)(g=+c(g,++f,r))&&u.add(g)}return+u},F.geoAlbers=L0,F.geoAlbersUsa=function eT(){var r,c,f,m,C,E,u=L0(),g=og().rotate([154,0]).center([-2,58.5]).parallels([55,65]),y=og().rotate([157,0]).center([-3,19.9]).parallels([8,18]),S={point:function(P,W){E=[P,W]}};function I(P){var W=P[0],K=P[1];return E=null,f.point(W,K),E||(m.point(W,K),E)||(C.point(W,K),E)}function N(){return r=c=null,I}return I.invert=function(P){var W=u.scale(),K=u.translate(),J=(P[0]-K[0])/W,Y=(P[1]-K[1])/W;return(Y>=.12&&Y<.234&&J>=-.425&&J<-.214?g:Y>=.166&&Y<.234&&J>=-.214&&J<-.115?y:u).invert(P)},I.stream=function(P){return r&&c===P?r:r=function Zx(r){var c=r.length;return{point:function(u,f){for(var g=-1;++g<c;)r[g].point(u,f)},sphere:function(){for(var u=-1;++u<c;)r[u].sphere()},lineStart:function(){for(var u=-1;++u<c;)r[u].lineStart()},lineEnd:function(){for(var u=-1;++u<c;)r[u].lineEnd()},polygonStart:function(){for(var u=-1;++u<c;)r[u].polygonStart()},polygonEnd:function(){for(var u=-1;++u<c;)r[u].polygonEnd()}}}([u.stream(c=P),g.stream(P),y.stream(P)])},I.precision=function(P){return arguments.length?(u.precision(P),g.precision(P),y.precision(P),N()):u.precision()},I.scale=function(P){return arguments.length?(u.scale(P),g.scale(.35*P),y.scale(P),I.translate(u.translate())):u.scale()},I.translate=function(P){if(!arguments.length)return u.translate();var W=u.scale(),K=+P[0],J=+P[1];return f=u.translate(P).clipExtent([[K-.455*W,J-.238*W],[K+.455*W,J+.238*W]]).stream(S),m=g.translate([K-.307*W,J+.201*W]).clipExtent([[K-.425*W+Wt,J+.12*W+Wt],[K-.214*W-Wt,J+.234*W-Wt]]).stream(S),C=y.translate([K-.205*W,J+.212*W]).clipExtent([[K-.214*W+Wt,J+.166*W+Wt],[K-.115*W-Wt,J+.234*W-Wt]]).stream(S),N()},I.fitExtent=function(P,W){return rg(I,P,W)},I.fitSize=function(P,W){return Xv(I,P,W)},I.fitWidth=function(P,W){return Qv(I,P,W)},I.fitHeight=function(P,W){return Jv(I,P,W)},I.scale(1070)},F.geoArea=function ax(r){return Pp=new bn,yr(r,Zr),2*Pp},F.geoAzimuthalEqualArea=function tT(){return io(tm).scale(124.75).clipAngle(179.999)},F.geoAzimuthalEqualAreaRaw=tm,F.geoAzimuthalEquidistant=function iT(){return io(im).scale(79.4188).clipAngle(179.999)},F.geoAzimuthalEquidistantRaw=im,F.geoBounds=function lx(r){var c,u,f,g,m,y,C;if(Ds=Mn=-(Sn=fs=1/0),Ol=[],yr(r,qo),u=Ol.length){for(Ol.sort(ox),c=1,m=[f=Ol[0]];c<u;++c)Nb(f,(g=Ol[c])[0])||Nb(f,g[1])?(Ms(f[0],g[1])>Ms(f[0],f[1])&&(f[1]=g[1]),Ms(g[0],f[1])>Ms(f[0],f[1])&&(f[0]=g[0])):m.push(f=g);for(y=-1/0,c=0,f=m[u=m.length-1];c<=u;f=g,++c)(C=Ms(f[1],(g=m[c])[0]))>y&&(y=C,Sn=g[0],Mn=f[1])}return Ol=_o=null,Sn===1/0||fs===1/0?[[NaN,NaN],[NaN,NaN]]:[[Sn,fs],[Mn,Ds]]},F.geoCentroid=function px(r){Qh=Fp=zp=Hp=_p=qp=Wp=Vp=0,Av=new bn,Ev=new bn,$v=new bn,yr(r,wr);var c=+Av,u=+Ev,f=+$v,g=mv(c,u,f);return g<Kh&&(c=qp,u=Wp,f=Vp,Fp<Wt&&(c=zp,u=Hp,f=_p),(g=mv(c,u,f))<Kh)?[NaN,NaN]:[qa(u,c)*on,Wa(f/g)*on]},F.geoCircle=function gx(){var f,g,r=du([0,0]),c=du(90),u=du(6),m={point:function y(E,S){f.push(E=g(E,S)),E[0]*=on,E[1]*=on}};function C(){var E=r.apply(this,arguments),S=c.apply(this,arguments)*Gt,I=u.apply(this,arguments)*Gt;return f=[],g=Lv(-E[0]*Gt,-E[1]*Gt,0).invert,Vb(m,S,I,1),E={type:"Polygon",coordinates:[f]},f=g=null,E}return C.center=function(E){return arguments.length?(r="function"==typeof E?E:du([+E[0],+E[1]]),C):r},C.radius=function(E){return arguments.length?(c="function"==typeof E?E:du(+E),C):c},C.precision=function(E){return arguments.length?(u="function"==typeof E?E:du(+E),C):u},C},F.geoClipAntimeridian=Nv,F.geoClipCircle=Qb,F.geoClipExtent=function xx(){var g,m,y,r=0,c=0,u=960,f=500;return y={stream:function(C){return g&&m===C?g:g=jp(r,c,u,f)(m=C)},extent:function(C){return arguments.length?(r=+C[0][0],c=+C[0][1],u=+C[1][0],f=+C[1][1],g=m=null,y):[[r,c],[u,f]]}}},F.geoClipRectangle=jp,F.geoConicConformal=function aT(){return em(B0).scale(109.5).parallels([30,30])},F.geoConicConformalRaw=B0,F.geoConicEqualArea=og,F.geoConicEqualAreaRaw=I0,F.geoConicEquidistant=function rT(){return em(R0).scale(131.154).center([0,13.9389])},F.geoConicEquidistantRaw=R0,F.geoContains=function Dx(r,c){return(r&&Zb.hasOwnProperty(r.type)?Zb[r.type]:Jp)(r,c)},F.geoDistance=Qp,F.geoEqualEarth=function lT(){return io(nm).scale(177.158)},F.geoEqualEarthRaw=nm,F.geoEquirectangular=function sT(){return io(df).scale(152.63)},F.geoEquirectangularRaw=df,F.geoGnomonic=function cT(){return io(am).scale(144.049).clipAngle(60)},F.geoGnomonicRaw=am,F.geoGraticule=o0,F.geoGraticule10=function Mx(){return o0()()},F.geoIdentity=function dT(){var y,C,S,I,N,Y,Q,r=1,c=0,u=0,f=1,g=1,m=0,E=null,P=1,W=1,K=of({point:function(te,oe){var pe=ie([te,oe]);this.stream.point(pe[0],pe[1])}}),J=ef;function ne(){return P=r*f,W=r*g,Y=Q=null,ie}function ie(te){var oe=te[0]*P,pe=te[1]*W;if(m){var Ie=pe*y-oe*C;oe=oe*y+pe*C,pe=Ie}return[oe+c,pe+u]}return ie.invert=function(te){var oe=te[0]-c,pe=te[1]-u;if(m){var Ie=pe*y+oe*C;oe=oe*y-pe*C,pe=Ie}return[oe/P,pe/W]},ie.stream=function(te){return Y&&Q===te?Y:Y=K(J(Q=te))},ie.postclip=function(te){return arguments.length?(J=te,E=S=I=N=null,ne()):J},ie.clipExtent=function(te){return arguments.length?(J=null==te?(E=S=I=N=null,ef):jp(E=+te[0][0],S=+te[0][1],I=+te[1][0],N=+te[1][1]),ne()):null==E?null:[[E,S],[I,N]]},ie.scale=function(te){return arguments.length?(r=+te,ne()):r},ie.translate=function(te){return arguments.length?(c=+te[0],u=+te[1],ne()):[c,u]},ie.angle=function(te){return arguments.length?(C=St(m=te%360*Gt),y=Ot(m),ne()):m*on},ie.reflectX=function(te){return arguments.length?(f=te?-1:1,ne()):f<0},ie.reflectY=function(te){return arguments.length?(g=te?-1:1,ne()):g<0},ie.fitExtent=function(te,oe){return rg(ie,te,oe)},ie.fitSize=function(te,oe){return Xv(ie,te,oe)},ie.fitWidth=function(te,oe){return Qv(ie,te,oe)},ie.fitHeight=function(te,oe){return Jv(ie,te,oe)},ie},F.geoInterpolate=function Ix(r,c){var u=r[0]*Gt,f=r[1]*Gt,g=c[0]*Gt,m=c[1]*Gt,y=Ot(f),C=St(f),E=Ot(m),S=St(m),I=y*Ot(u),N=y*St(u),P=E*Ot(g),W=E*St(g),K=2*Wa(oa(Cb(m-f)+y*E*Cb(g-u))),J=St(K),Y=K?function(Q){var ne=St(Q*=K)/J,ie=St(K-Q)/J,te=ie*I+ne*P,oe=ie*N+ne*W,pe=ie*C+ne*S;return[qa(oe,te)*on,qa(pe,oa(te*te+oe*oe))*on]}:function(){return[u*on,f*on]};return Y.distance=K,Y},F.geoLength=Jb,F.geoMercator=function nT(){return N0(cf).scale(961/_a)},F.geoMercatorRaw=cf,F.geoNaturalEarth1=function uT(){return io(sm).scale(175.295)},F.geoNaturalEarth1Raw=sm,F.geoOrthographic=function hT(){return io(rm).scale(249.5).clipAngle(90+Wt)},F.geoOrthographicRaw=rm,F.geoPath=function Vx(r,c){let g,m,u=3,f=4.5;function y(C){return C&&("function"==typeof f&&m.pointRadius(+f.apply(this,arguments)),yr(C,g(m))),m.result()}return y.area=function(C){return yr(C,g(u0)),u0.result()},y.measure=function(C){return yr(C,g(x0)),x0.result()},y.bounds=function(C){return yr(C,g(tg)),tg.result()},y.centroid=function(C){return yr(C,g(m0)),m0.result()},y.projection=function(C){return arguments.length?(g=null==C?(r=null,ef):(r=C).stream,y):r},y.context=function(C){return arguments.length?(m=null==C?(c=null,new A0(u)):new b0(c=C),"function"!=typeof f&&m.pointRadius(f),y):c},y.pointRadius=function(C){return arguments.length?(f="function"==typeof C?C:(m.pointRadius(+C),+C),y):f},y.digits=function(C){if(!arguments.length)return u;if(null==C)u=null;else{const E=Math.floor(C);if(!(E>=0))throw new RangeError(`invalid digits: ${C}`);u=E}return null===c&&(m=new A0(u)),y},y.projection(r).digits(u).context(c)},F.geoProjection=io,F.geoProjectionMutator=Zv,F.geoRotation=Wb,F.geoStereographic=function fT(){return io(om).scale(250).clipAngle(142)},F.geoStereographicRaw=om,F.geoStream=yr,F.geoTransform=function Ux(r){return{stream:of(r)}},F.geoTransverseMercator=function pT(){var r=N0(lm),c=r.center,u=r.rotate;return r.center=function(f){return arguments.length?c([-f[1],f[0]]):[(f=c())[1],-f[0]]},r.rotate=function(f){return arguments.length?u([f[0],f[1],f.length>2?f[2]+90:90]):[(f=u())[0],f[1],f[2]-90]},u([0,0,90]).scale(159.155)},F.geoTransverseMercatorRaw=lm,F.gray=function Gu(r,c){return new is(r,0,0,c??1)},F.greatest=Ns,F.greatestIndex=function il(r,c=pi){if(1===c.length)return gi(r,c);let u,f=-1,g=-1;for(const m of r)++g,(f<0?0===c(m,m):c(m,u)>0)&&(u=m,f=g);return f},F.group=$r,F.groupSort=function td(r,c,u){return(2!==c.length?Jo(ed(r,c,u),([f,g],[m,y])=>pi(g,y)||pi(f,m)):Jo($r(r,u),([f,g],[m,y])=>c(g,y)||pi(f,m))).map(([f])=>f)},F.groups=ho,F.hcl=$d,F.hierarchy=cm,F.histogram=B,F.hsl=_s,F.html=fC,F.image=function cC(r,c){return new Promise(function(u,f){var g=new Image;for(var m in c)g[m]=c[m];g.onerror=f,g.onload=function(){u(g)},g.src=r})},F.index=function Dr(r,...c){return cn(r,Er,xe,c)},F.indexes=function sr(r,...c){return cn(r,Array.from,xe,c)},F.interpolate=$t,F.interpolateArray=function Gi(r,c){return(Rd(c)?Bd:Tl)(r,c)},F.interpolateBasis=Ju,F.interpolateBasisClosed=Ld,F.interpolateBlues=oA,F.interpolateBrBG=HS,F.interpolateBuGn=KS,F.interpolateBuPu=XS,F.interpolateCividis=function fA(r){return r=Math.max(0,Math.min(1,r)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-r*(35.34-r*(2381.73-r*(6402.7-r*(7024.72-2710.57*r)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+r*(170.73+r*(52.82-r*(131.46-r*(176.58-67.37*r)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+r*(442.36-r*(2482.43-r*(6167.24-r*(6614.94-2475.67*r)))))))+")"},F.interpolateCool=vA,F.interpolateCubehelix=Vf,F.interpolateCubehelixDefault=pA,F.interpolateCubehelixLong=Lo,F.interpolateDate=Sc,F.interpolateDiscrete=function Hf(r){var c=r.length;return function(u){return r[Math.max(0,Math.min(c-1,Math.floor(u*c)))]}},F.interpolateGnBu=QS,F.interpolateGreens=lA,F.interpolateGreys=cA,F.interpolateHcl=lh,F.interpolateHclLong=jr,F.interpolateHsl=Yg,F.interpolateHslLong=sh,F.interpolateHue=function _f(r,c){var u=xl(+r,+c);return function(f){var g=u(f);return g-360*Math.floor(g/360)}},F.interpolateInferno=kA,F.interpolateLab=function rh(r,c){var u=Wi((r=bl(r)).l,(c=bl(c)).l),f=Wi(r.a,c.a),g=Wi(r.b,c.b),m=Wi(r.opacity,c.opacity);return function(y){return r.l=u(y),r.a=f(y),r.b=g(y),r.opacity=m(y),r+""}},F.interpolateMagma=TA,F.interpolateNumber=Na,F.interpolateNumberArray=Bd,F.interpolateObject=Od,F.interpolateOrRd=JS,F.interpolateOranges=hA,F.interpolatePRGn=_S,F.interpolatePiYG=qS,F.interpolatePlasma=SA,F.interpolatePuBu=eA,F.interpolatePuBuGn=ZS,F.interpolatePuOr=WS,F.interpolatePuRd=tA,F.interpolatePurples=dA,F.interpolateRainbow=function mA(r){(r<0||r>1)&&(r-=Math.floor(r));var c=Math.abs(r-.5);return Sg.h=360*r-100,Sg.s=1.5-1.5*c,Sg.l=.8-.9*c,Sg+""},F.interpolateRdBu=VS,F.interpolateRdGy=US,F.interpolateRdPu=iA,F.interpolateRdYlBu=GS,F.interpolateRdYlGn=YS,F.interpolateReds=uA,F.interpolateRgb=ks,F.interpolateRgbBasis=Nd,F.interpolateRgbBasisClosed=na,F.interpolateRound=Sl,F.interpolateSinebow=function wA(r){var c;return r=(.5-r)*Math.PI,Ag.r=255*(c=Math.sin(r))*c,Ag.g=255*(c=Math.sin(r+bA))*c,Ag.b=255*(c=Math.sin(r+yA))*c,Ag+""},F.interpolateSpectral=jS,F.interpolateString=Hd,F.interpolateTransformCss=ih,F.interpolateTransformSvg=nh,F.interpolateTurbo=function CA(r){return r=Math.max(0,Math.min(1,r)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+r*(1172.33-r*(10793.56-r*(33300.12-r*(38394.49-14825.05*r)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+r*(557.33+r*(1225.33-r*(3574.96-r*(1073.77+707.56*r)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+r*(3211.1-r*(15327.97-r*(27814-r*(22569.18-6838.66*r)))))))+")"},F.interpolateViridis=xA,F.interpolateWarm=gA,F.interpolateYlGn=aA,F.interpolateYlGnBu=nA,F.interpolateYlOrBr=sA,F.interpolateYlOrRd=rA,F.interpolateZoom=Wd,F.interrupt=Fo,F.intersection=function ac(r,...c){r=new Hn(r),c=c.map(Et);e:for(const u of r)for(const f of c)if(!f.has(u)){r.delete(u);continue e}return r},F.interval=function Kg(r,c,u){var f=new Xr,g=c;return null==c?(f.restart(r,c,u),f):(f._restart=f.restart,f.restart=function(m,y,C){y=+y,C=null==C?Mc():+C,f._restart(function E(S){S+=g,f._restart(E,g+=y,C),m(S)},y,C)},f.restart(r,c,u),f)},F.isoFormat=wS,F.isoParse=TS,F.json=function uC(r,c){return fetch(r,c).then(dC)},F.lab=bl,F.lch=function Wg(r,c,u,f){return 1===arguments.length?ju(r):new xs(u,c,r,f??1)},F.least=function Bs(r,c=pi){let u,f=!1;if(1===c.length){let g;for(const m of r){const y=c(m);(f?pi(y,g)<0:0===pi(y,y))&&(u=m,g=y,f=!0)}}else for(const g of r)(f?c(g,u)<0:0===c(g,g))&&(u=g,f=!0);return u},F.leastIndex=tl,F.line=Hm,F.lineRadial=Yw,F.link=Lg,F.linkHorizontal=function WA(){return Lg(Xw)},F.linkRadial=function UA(){const r=Lg(HA);return r.angle=r.x,delete r.x,r.radius=r.y,delete r.y,r},F.linkVertical=function VA(){return Lg(Qw)},F.local=ke,F.map=function nc(r,c){if("function"!=typeof r[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof c)throw new TypeError("mapper is not a function");return Array.from(r,(u,f)=>c(u,f,r))},F.matcher=cr,F.max=Pn,F.maxIndex=gi,F.mean=function id(r,c){let u=0,f=0;if(void 0===c)for(let g of r)null!=g&&(g=+g)>=g&&(++u,f+=g);else{let g=-1;for(let m of r)null!=(m=c(m,++g,r))&&(m=+m)>=m&&(++u,f+=m)}if(u)return f/u},F.median=function nd(r,c){return Ia(r,.5,c)},F.medianIndex=function Ql(r,c){return Li(r,.5,c)},F.merge=el,F.min=Ps,F.minIndex=ms,F.mode=function Zl(r,c){const u=new ea;if(void 0===c)for(let m of r)null!=m&&m>=m&&u.set(m,(u.get(m)||0)+1);else{let m=-1;for(let y of r)null!=(y=c(y,++m,r))&&y>=y&&u.set(y,(u.get(y)||0)+1)}let f,g=0;for(const[m,y]of u)y>g&&(g=y,f=m);return f},F.namespace=ai,F.namespaces=go,F.nice=Ls,F.now=Mc,F.pack=function JT(){var r=null,c=1,u=1,f=Vc;function g(m){const y=dm();return m.x=c/2,m.y=u/2,r?m.eachBefore(Y0(r)).eachAfter(hm(f,.5,y)).eachBefore(j0(1)):m.eachBefore(Y0(QT)).eachAfter(hm(Vc,1,y)).eachAfter(hm(f,m.r/Math.min(c,u),y)).eachBefore(j0(Math.min(c,u)/(2*m.r))),m}return g.radius=function(m){return arguments.length?(r=dg(m),g):r},g.size=function(m){return arguments.length?(c=+m[0],u=+m[1],g):[c,u]},g.padding=function(m){return arguments.length?(f="function"==typeof m?m:pu(+m),g):f},g},F.packEnclose=function GT(r){return H0(r,dm())},F.packSiblings=function XT(r){return G0(r,dm()),r},F.pairs=function ec(r,c=La){const u=[];let f,g=!1;for(const m of r)g&&u.push(c(f,m)),f=m,g=!0;return u},F.partition=function ZT(){var r=1,c=1,u=0,f=!1;function g(y){var C=y.height+1;return y.x0=y.y0=u,y.x1=r,y.y1=c/C,y.eachBefore(function m(y,C){return function(E){E.children&&vf(E,E.x0,y*(E.depth+1)/C,E.x1,y*(E.depth+2)/C);var S=E.x0,I=E.y0,N=E.x1-u,P=E.y1-u;N<S&&(S=N=(S+N)/2),P<I&&(I=P=(I+P)/2),E.x0=S,E.y0=I,E.x1=N,E.y1=P}}(c,C)),f&&y.eachBefore(K0),y}return g.round=function(y){return arguments.length?(f=!!y,g):f},g.size=function(y){return arguments.length?(r=+y[0],c=+y[1],g):[r,c]},g.padding=function(y){return arguments.length?(u=+y,g):u},g},F.path=Ni,F.pathRound=function On(r=3){return new Fi(+r)},F.permute=Kl,F.pie=function FA(){var r=OA,c=RA,u=null,f=si(0),g=si(ql),m=si(0);function y(C){var E,I,N,Q,te,S=(C=Mg(C)).length,P=0,W=new Array(S),K=new Array(S),J=+f.apply(this,arguments),Y=Math.min(ql,Math.max(-ql,g.apply(this,arguments)-J)),ne=Math.min(Math.abs(Y)/S,m.apply(this,arguments)),ie=ne*(Y<0?-1:1);for(E=0;E<S;++E)(te=K[W[E]=E]=+r(C[E],E,C))>0&&(P+=te);for(null!=c?W.sort(function(oe,pe){return c(K[oe],K[pe])}):null!=u&&W.sort(function(oe,pe){return u(C[oe],C[pe])}),E=0,N=P?(Y-S*ie)/P:0;E<S;++E,J=Q)K[I=W[E]]={data:C[I],index:E,value:te=K[I],startAngle:J,endAngle:Q=J+(te>0?te*N:0)+ie,padAngle:ne};return K}return y.value=function(C){return arguments.length?(r="function"==typeof C?C:si(+C),y):r},y.sortValues=function(C){return arguments.length?(c=C,u=null,y):c},y.sort=function(C){return arguments.length?(u=C,c=null,y):u},y.startAngle=function(C){return arguments.length?(f="function"==typeof C?C:si(+C),y):f},y.endAngle=function(C){return arguments.length?(g="function"==typeof C?C:si(+C),y):g},y.padAngle=function(C){return arguments.length?(m="function"==typeof C?C:si(+C),y):m},y},F.piecewise=ch,F.pointRadial=Af,F.pointer=Ue,F.pointers=function Je(r,c){return r.target&&(r=$e(r),void 0===c&&(c=r.currentTarget),r=r.touches||[r]),Array.from(r,u=>Ue(u,c))},F.polygonArea=function gk(r){for(var f,c=-1,u=r.length,g=r[u-1],m=0;++c<u;)m+=(f=g)[1]*(g=r[c])[0]-f[0]*g[1];return m/2},F.polygonCentroid=function vk(r){for(var m,C,c=-1,u=r.length,f=0,g=0,y=r[u-1],E=0;++c<u;)E+=C=(m=y)[0]*(y=r[c])[1]-y[0]*m[1],f+=(m[0]+y[0])*C,g+=(m[1]+y[1])*C;return[f/(E*=3),g/E]},F.polygonContains=function wk(r,c){for(var E,S,u=r.length,f=r[u-1],g=c[0],m=c[1],y=f[0],C=f[1],I=!1,N=0;N<u;++N)E=(f=r[N])[0],(S=f[1])>m!=C>m&&g<(y-E)*(m-S)/(C-S)+E&&(I=!I),y=E,C=S;return I},F.polygonHull=function yk(r){if((u=r.length)<3)return null;var c,u,f=new Array(u),g=new Array(u);for(c=0;c<u;++c)f[c]=[+r[c][0],+r[c][1],c];for(f.sort(bk),c=0;c<u;++c)g[c]=[f[c][0],-f[c][1]];var m=ty(f),y=ty(g),C=y[0]===m[0],E=y[y.length-1]===m[m.length-1],S=[];for(c=m.length-1;c>=0;--c)S.push(r[f[m[c]][2]]);for(c=+C;c<y.length-E;++c)S.push(r[f[y[c]][2]]);return S},F.polygonLength=function Ck(r){for(var g,m,c=-1,u=r.length,f=r[u-1],y=f[0],C=f[1],E=0;++c<u;)g=y,m=C,g-=y=(f=r[c])[0],m-=C=f[1],E+=Math.hypot(g,m);return E},F.precisionFixed=vb,F.precisionPrefix=mb,F.precisionRound=bb,F.quadtree=kp,F.quantile=Ia,F.quantileIndex=Li,F.quantileSorted=Ir,F.quantize=function dh(r,c){for(var u=new Array(c),f=0;f<c;++f)u[f]=r(f/(c-1));return u},F.quickselect=Mr,F.radialArea=jw,F.radialLine=Yw,F.randomBates=Sk,F.randomBernoulli=$k,F.randomBeta=ay,F.randomBinomial=sy,F.randomCauchy=Mk,F.randomExponential=Ak,F.randomGamma=bm,F.randomGeometric=ny,F.randomInt=Tk,F.randomIrwinHall=iy,F.randomLcg=function Bk(r=Math.random()){let c=0|(0<=r&&r<1?r/ry:Math.abs(r));return()=>(c=1664525*c+1013904223|0,ry*(c>>>0))},F.randomLogNormal=kk,F.randomLogistic=Ik,F.randomNormal=mm,F.randomPareto=Ek,F.randomPoisson=Lk,F.randomUniform=xk,F.randomWeibull=Dk,F.range=ta,F.rank=function tc(r,c=pi){if("function"!=typeof r[Symbol.iterator])throw new TypeError("values is not iterable");let u=Array.from(r);const f=new Float64Array(u.length);2!==c.length&&(u=u.map(c),c=pi);const g=(C,E)=>c(u[C],u[E]);let m,y;return Uint32Array.from(u,(C,E)=>E).sort(c===pi?(C,E)=>Is(u[C],u[E]):rr(g)).forEach((C,E)=>{const S=g(C,void 0===m?C:m);S>=0?((void 0===m||S>0)&&(m=C,y=E),f[C]=y):f[C]=NaN}),f},F.reduce=function Eu(r,c,u){if("function"!=typeof c)throw new TypeError("reducer is not a function");const f=r[Symbol.iterator]();let g,m,y=-1;if(arguments.length<3){if(({done:g,value:u}=f.next()),g)return;++y}for(;({done:g,value:m}=f.next()),!g;)u=c(u,m,++y,r);return u},F.reverse=function $u(r){if("function"!=typeof r[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(r).reverse()},F.rgb=Eo,F.ribbon=function ft(){return ct()},F.ribbonArrow=function qt(){return ct(at)},F.rollup=ed,F.rollups=Xn,F.scaleBand=Cm,F.scaleDiverging=function uw(){var r=zl(kg()(Ya));return r.copy=function(){return Hl(r,uw())},Wo.apply(r,arguments)},F.scaleDivergingLog=function hw(){var r=km(kg()).domain([.1,1,10]);return r.copy=function(){return Hl(r,hw()).base(r.base())},Wo.apply(r,arguments)},F.scaleDivergingPow=Om,F.scaleDivergingSqrt=function DS(){return Om.apply(null,arguments).exponent(.5)},F.scaleDivergingSymlog=function fw(){var r=Sm(kg());return r.copy=function(){return Hl(r,fw()).constant(r.constant())},Wo.apply(r,arguments)},F.scaleIdentity=function uy(r){var c;function u(f){return null==f||isNaN(f=+f)?c:f}return u.invert=u,u.domain=u.range=function(f){return arguments.length?(r=Array.from(f,gg),u):r.slice()},u.unknown=function(f){return arguments.length?(c=f,u):c},u.copy=function(){return uy(r).unknown(c)},r=arguments.length?Array.from(r,gg):[0,1],zl(u)},F.scaleImplicit=ym,F.scaleLinear=function dy(){var r=Tm();return r.copy=function(){return mf(r,dy())},Js.apply(r,arguments),zl(r)},F.scaleLog=function vy(){const r=km(vg()).domain([1,10]);return r.copy=()=>mf(r,vy()).base(r.base()),Js.apply(r,arguments),r},F.scaleOrdinal=wm,F.scalePoint=function Rk(){return oy(Cm.apply(null,arguments).paddingInner(1))},F.scalePow=Em,F.scaleQuantile=function Ty(){var f,r=[],c=[],u=[];function g(){var y=0,C=Math.max(1,c.length);for(u=new Array(C-1);++y<C;)u[y-1]=Ir(r,y/C);return m}function m(y){return null==y||isNaN(y=+y)?f:c[ir(u,y)]}return m.invertExtent=function(y){var C=c.indexOf(y);return C<0?[NaN,NaN]:[C>0?u[C-1]:r[0],C<u.length?u[C]:r[r.length-1]]},m.domain=function(y){if(!arguments.length)return r.slice();r=[];for(let C of y)null!=C&&!isNaN(C=+C)&&r.push(C);return r.sort(pi),g()},m.range=function(y){return arguments.length?(c=Array.from(y),g()):c.slice()},m.unknown=function(y){return arguments.length?(f=y,m):f},m.quantiles=function(){return u.slice()},m.copy=function(){return Ty().domain(r).range(c).unknown(f)},Js.apply(m,arguments)},F.scaleQuantize=function ky(){var m,r=0,c=1,u=1,f=[.5],g=[0,1];function y(E){return null!=E&&E<=E?g[ir(f,E,0,u)]:m}function C(){var E=-1;for(f=new Array(u);++E<u;)f[E]=((E+1)*c-(E-u)*r)/(u+1);return y}return y.domain=function(E){return arguments.length?([r,c]=E,r=+r,c=+c,C()):[r,c]},y.range=function(E){return arguments.length?(u=(g=Array.from(E)).length-1,C()):g.slice()},y.invertExtent=function(E){var S=g.indexOf(E);return S<0?[NaN,NaN]:S<1?[r,f[0]]:S>=u?[f[u-1],c]:[f[S-1],f[S]]},y.unknown=function(E){return arguments.length&&(m=E),y},y.thresholds=function(){return f.slice()},y.copy=function(){return ky().domain([r,c]).range(g).unknown(m)},Js.apply(zl(y),arguments)},F.scaleRadial=function xy(){var f,r=Tm(),c=[0,1],u=!1;function g(m){var y=function Kk(r){return Math.sign(r)*Math.sqrt(Math.abs(r))}(r(m));return isNaN(y)?f:u?Math.round(y):y}return g.invert=function(m){return r.invert(Cy(m))},g.domain=function(m){return arguments.length?(r.domain(m),g):r.domain()},g.range=function(m){return arguments.length?(r.range((c=Array.from(m,gg)).map(Cy)),g):c.slice()},g.rangeRound=function(m){return g.range(m).round(!0)},g.round=function(m){return arguments.length?(u=!!m,g):u},g.clamp=function(m){return arguments.length?(r.clamp(m),g):r.clamp()},g.unknown=function(m){return arguments.length?(f=m,g):f},g.copy=function(){return xy(r.domain(),c).round(u).clamp(r.clamp()).unknown(f)},Js.apply(g,arguments),zl(g)},F.scaleSequential=function ow(){var r=zl(Tg()(Ya));return r.copy=function(){return Hl(r,ow())},Wo.apply(r,arguments)},F.scaleSequentialLog=function lw(){var r=km(Tg()).domain([1,10]);return r.copy=function(){return Hl(r,lw()).base(r.base())},Wo.apply(r,arguments)},F.scaleSequentialPow=Rm,F.scaleSequentialQuantile=function dw(){var r=[],c=Ya;function u(f){if(null!=f&&!isNaN(f=+f))return c((ir(r,f,1)-1)/(r.length-1))}return u.domain=function(f){if(!arguments.length)return r.slice();r=[];for(let g of f)null!=g&&!isNaN(g=+g)&&r.push(g);return r.sort(pi),u},u.interpolator=function(f){return arguments.length?(c=f,u):c},u.range=function(){return r.map((f,g)=>c(g/(r.length-1)))},u.quantiles=function(f){return Array.from({length:f+1},(g,m)=>Ia(r,m/f))},u.copy=function(){return dw(c).domain(r)},Wo.apply(u,arguments)},F.scaleSequentialSqrt=function $S(){return Rm.apply(null,arguments).exponent(.5)},F.scaleSequentialSymlog=function cw(){var r=Sm(Tg());return r.copy=function(){return Hl(r,cw()).constant(r.constant())},Wo.apply(r,arguments)},F.scaleSqrt=function jk(){return Em.apply(null,arguments).exponent(.5)},F.scaleSymlog=function yy(){var r=Sm(vg());return r.copy=function(){return mf(r,yy()).constant(r.constant())},Js.apply(r,arguments)},F.scaleThreshold=function Sy(){var u,r=[.5],c=[0,1],f=1;function g(m){return null!=m&&m<=m?c[ir(r,m,0,f)]:u}return g.domain=function(m){return arguments.length?(r=Array.from(m),f=Math.min(r.length,c.length-1),g):r.slice()},g.range=function(m){return arguments.length?(c=Array.from(m),f=Math.min(r.length,c.length-1),g):c.slice()},g.invertExtent=function(m){var y=c.indexOf(m);return[r[y-1],r[y]]},g.unknown=function(m){return arguments.length?(u=m,g):u},g.copy=function(){return Sy().domain(r).range(c).unknown(u)},Js.apply(g,arguments)},F.scaleTime=function AS(){return Js.apply(Bm(qy,Wy,no,Cg,mu,vu,yg,mg,Yo,F.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},F.scaleUtc=function ES(){return Js.apply(Bm(Hy,_y,ao,xg,bu,bf,wg,bg,Yo,F.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},F.scan=function ad(r,c){const u=tl(r,c);return u<0?void 0:u},F.schemeAccent=IS,F.schemeBlues=Bw,F.schemeBrBG=pw,F.schemeBuGn=Tw,F.schemeBuPu=kw,F.schemeCategory10=MS,F.schemeDark2=LS,F.schemeGnBu=Sw,F.schemeGreens=Rw,F.schemeGreys=Ow,F.schemeOrRd=Aw,F.schemeOranges=Hw,F.schemePRGn=gw,F.schemePaired=PS,F.schemePastel1=NS,F.schemePastel2=BS,F.schemePiYG=vw,F.schemePuBu=$w,F.schemePuBuGn=Ew,F.schemePuOr=mw,F.schemePuRd=Dw,F.schemePurples=Fw,F.schemeRdBu=bw,F.schemeRdGy=yw,F.schemeRdPu=Mw,F.schemeRdYlBu=ww,F.schemeRdYlGn=Cw,F.schemeReds=zw,F.schemeSet1=RS,F.schemeSet2=OS,F.schemeSet3=FS,F.schemeSpectral=xw,F.schemeTableau10=zS,F.schemeYlGn=Lw,F.schemeYlGnBu=Iw,F.schemeYlOrBr=Pw,F.schemeYlOrRd=Nw,F.select=ue,F.selectAll=function gt(r){return"string"==typeof r?new nn([document.querySelectorAll(r)],[document.documentElement]):new nn([pd(r)],xo)},F.selection=ys,F.selector=Fs,F.selectorAll=vo,F.shuffle=ku,F.shuffler=ic,F.some=function ld(r,c){if("function"!=typeof c)throw new TypeError("test is not a function");let u=-1;for(const f of r)if(c(f,++u,r))return!0;return!1},F.sort=Jo,F.stack=function wE(){var r=si([]),c=xu,u=Cu,f=bE;function g(m){var C,I,y=Array.from(r.apply(this,arguments),yE),E=y.length,S=-1;for(const N of m)for(C=0,++S;C<E;++C)(y[C][S]=[0,+f(N,y[C].key,S,m)]).data=N;for(C=0,I=Mg(c(y));C<E;++C)y[I[C]].index=C;return u(y,I),y}return g.keys=function(m){return arguments.length?(r="function"==typeof m?m:si(Array.from(m)),g):r},g.value=function(m){return arguments.length?(f="function"==typeof m?m:si(+m),g):f},g.order=function(m){return arguments.length?(c=null==m?xu:"function"==typeof m?m:si(Array.from(m)),g):c},g.offset=function(m){return arguments.length?(u=m??Cu,g):u},g},F.stackOffsetDiverging=function xE(r,c){if((E=r.length)>0)for(var u,g,m,y,C,E,f=0,S=r[c[0]].length;f<S;++f)for(y=C=0,u=0;u<E;++u)(m=(g=r[c[u]][f])[1]-g[0])>0?(g[0]=y,g[1]=y+=m):m<0?(g[1]=C,g[0]=C+=m):(g[0]=0,g[1]=m)},F.stackOffsetExpand=function CE(r,c){if((f=r.length)>0){for(var u,f,y,g=0,m=r[0].length;g<m;++g){for(y=u=0;u<f;++u)y+=r[u][g][1]||0;if(y)for(u=0;u<f;++u)r[u][g][1]/=y}Cu(r,c)}},F.stackOffsetNone=Cu,F.stackOffsetSilhouette=function TE(r,c){if((g=r.length)>0){for(var g,u=0,f=r[c[0]],m=f.length;u<m;++u){for(var y=0,C=0;y<g;++y)C+=r[y][u][1]||0;f[u][1]+=f[u][0]=-C/2}Cu(r,c)}},F.stackOffsetWiggle=function kE(r,c){if((y=r.length)>0&&(m=(g=r[c[0]]).length)>0){for(var g,m,y,u=0,f=1;f<m;++f){for(var C=0,E=0,S=0;C<y;++C){for(var I=r[c[C]],N=I[f][1]||0,W=(N-(I[f-1][1]||0))/2,K=0;K<C;++K){var J=r[c[K]];W+=(J[f][1]||0)-(J[f-1][1]||0)}E+=N,S+=W*N}g[f-1][1]+=g[f-1][0]=u,E&&(u-=S/E)}g[f-1][1]+=g[f-1][0]=u,Cu(r,c)}},F.stackOrderAppearance=A1,F.stackOrderAscending=E1,F.stackOrderDescending=function AE(r){return E1(r).reverse()},F.stackOrderInsideOut=function EE(r){var u,f,c=r.length,g=r.map($1),m=A1(r),y=0,C=0,E=[],S=[];for(u=0;u<c;++u)f=m[u],y<C?(y+=g[f],E.push(f)):(C+=g[f],S.push(f));return S.reverse().concat(E)},F.stackOrderNone=xu,F.stackOrderReverse=function $E(r){return xu(r).reverse()},F.stratify=function nk(){var u,r=tk,c=ik;function f(g){var E,S,I,N,P,W,K,J,m=Array.from(g),y=r,C=c,Y=new Map;if(null!=u){const Q=m.map((te,oe)=>function ak(r){let c=(r=`${r}`).length;return pm(r,c-1)&&!pm(r,c-2)&&(r=r.slice(0,-1)),"/"===r[0]?r:`/${r}`}(u(te,oe,g))),ne=Q.map(Q0),ie=new Set(Q).add("");for(const te of ne)ie.has(te)||(ie.add(te),Q.push(te),ne.push(Q0(te)),m.push(fm));y=(te,oe)=>Q[oe],C=(te,oe)=>ne[oe]}for(I=0,E=m.length;I<E;++I)W=m[I]=new Wc(S=m[I]),null!=(K=y(S,I,g))&&(K+="")&&(J=W.id=K,Y.set(J,Y.has(J)?X0:W)),null!=(K=C(S,I,g))&&(K+="")&&(W.parent=K);for(I=0;I<E;++I)if(K=(W=m[I]).parent){if(!(P=Y.get(K)))throw new Error("missing: "+K);if(P===X0)throw new Error("ambiguous: "+K);P.children?P.children.push(W):P.children=[W],W.parent=P}else{if(N)throw new Error("multiple roots");N=W}if(!N)throw new Error("no root");if(null!=u){for(;N.data===fm&&1===N.children.length;)N=N.children[0],--E;for(let Q=m.length-1;Q>=0&&(W=m[Q]).data===fm;--Q)W.data=null}if(N.parent=ek,N.eachBefore(function(Q){Q.depth=Q.parent.depth+1,--E}).eachBefore(O0),N.parent=null,E>0)throw new Error("cycle");return N}return f.id=function(g){return arguments.length?(r=dg(g),f):r},f.parentId=function(g){return arguments.length?(c=dg(g),f):c},f.path=function(g){return arguments.length?(u=dg(g),f):u},f},F.style=qi,F.subset=function nl(r,c){return Qn(c,r)},F.sum=function Su(r,c){let u=0;if(void 0===c)for(let f of r)(f=+f)&&(u+=f);else{let f=-1;for(let g of r)(g=+c(g,++f,r))&&(u+=g)}return u},F.superset=Qn,F.svg=pC,F.symbol=function eE(r,c){let u=null,f=kf(g);function g(){let m;if(u||(u=m=f()),r.apply(this,arguments).draw(u,+c.apply(this,arguments)),m)return u=null,m+""||null}return r="function"==typeof r?r:si(r||Pg),c="function"==typeof c?c:si(void 0===c?64:+c),g.type=function(m){return arguments.length?(r="function"==typeof m?m:si(m),g):r},g.size=function(m){return arguments.length?(c="function"==typeof m?m:si(+m),g):c},g.context=function(m){return arguments.length?(u=m??null,g):u},g},F.symbolAsterisk=Jw,F.symbolCircle=Pg,F.symbolCross=Zw,F.symbolDiamond=t1,F.symbolDiamond2=i1,F.symbolPlus=n1,F.symbolSquare=a1,F.symbolSquare2=s1,F.symbolStar=o1,F.symbolTimes=Vm,F.symbolTriangle=l1,F.symbolTriangle2=c1,F.symbolWye=d1,F.symbolX=Vm,F.symbols=u1,F.symbolsFill=u1,F.symbolsStroke=ZA,F.text=Tp,F.thresholdFreedmanDiaconis=function Zo(r,c,u){return Math.ceil((u-c)/(2*(Ia(r,.75)-Ia(r,.25))*Math.pow(Sr(r),-1/3)))},F.thresholdScott=function _i(r,c,u){return Math.ceil((u-c)*Math.cbrt(Sr(r))/(3.49*Qo(r)))},F.thresholdSturges=fo,F.tickFormat=cy,F.tickIncrement=vs,F.tickStep=wa,F.ticks=xt,F.timeDay=vu,F.timeDays=e2,F.timeFormatDefaultLocale=sw,F.timeFormatLocale=Vy,F.timeFriday=Iy,F.timeFridays=o2,F.timeHour=yg,F.timeHours=Jk,F.timeInterval=jn,F.timeMillisecond=gu,F.timeMilliseconds=Ay,F.timeMinute=mg,F.timeMinutes=Xk,F.timeMonday=yf,F.timeMondays=n2,F.timeMonth=Cg,F.timeMonths=g2,F.timeSaturday=Ly,F.timeSaturdays=l2,F.timeSecond=Yo,F.timeSeconds=$y,F.timeSunday=mu,F.timeSundays=Py,F.timeThursday=Gc,F.timeThursdays=r2,F.timeTickInterval=Wy,F.timeTicks=qy,F.timeTuesday=Dy,F.timeTuesdays=a2,F.timeWednesday=My,F.timeWednesdays=s2,F.timeWeek=mu,F.timeWeeks=Py,F.timeYear=no,F.timeYears=m2,F.timeout=sn,F.timer=Gd,F.timerFlush=$l,F.transition=Qd,F.transpose=Lr,F.tree=function dk(){var r=sk,c=1,u=1,f=null;function g(S){var I=function ck(r){for(var u,g,m,y,C,c=new fg(r,0),f=[c];u=f.pop();)if(m=u._.children)for(u.children=new Array(C=m.length),y=C-1;y>=0;--y)f.push(g=u.children[y]=new fg(m[y],y)),g.parent=u;return(c.parent=new fg(null,0)).children=[c],c}(S);if(I.eachAfter(m),I.parent.m=-I.z,I.eachBefore(y),f)S.eachBefore(E);else{var N=S,P=S,W=S;S.eachBefore(function(ne){ne.x<N.x&&(N=ne),ne.x>P.x&&(P=ne),ne.depth>W.depth&&(W=ne)});var K=N===P?1:r(N,P)/2,J=K-N.x,Y=c/(P.x+K+J),Q=u/(W.depth||1);S.eachBefore(function(ne){ne.x=(ne.x+J)*Y,ne.y=ne.depth*Q})}return S}function m(S){var I=S.children,N=S.parent.children,P=S.i?N[S.i-1]:null;if(I){!function ok(r){for(var m,c=0,u=0,f=r.children,g=f.length;--g>=0;)(m=f[g]).z+=c,m.m+=c,c+=m.s+(u+=m.c)}(S);var W=(I[0].z+I[I.length-1].z)/2;P?(S.z=P.z+r(S._,P._),S.m=S.z-W):S.z=W}else P&&(S.z=P.z+r(S._,P._));S.parent.A=function C(S,I,N){if(I){for(var te,P=S,W=S,K=I,J=P.parent.children[0],Y=P.m,Q=W.m,ne=K.m,ie=J.m;K=vm(K),P=gm(P),K&&P;)J=gm(J),(W=vm(W)).a=S,(te=K.z+ne-P.z-Y+r(K._,P._))>0&&(rk(lk(K,S,N),S,te),Y+=te,Q+=te),ne+=K.m,Y+=P.m,ie+=J.m,Q+=W.m;K&&!vm(W)&&(W.t=K,W.m+=ne-Q),P&&!gm(J)&&(J.t=P,J.m+=Y-ie,N=S)}return N}(S,P,S.parent.A||N[0])}function y(S){S._.x=S.z+S.parent.m,S.m+=S.parent.m}function E(S){S.x*=c,S.y=S.depth*u}return g.separation=function(S){return arguments.length?(r=S,g):r},g.size=function(S){return arguments.length?(f=!1,c=+S[0],u=+S[1],g):f?null:[c,u]},g.nodeSize=function(S){return arguments.length?(f=!0,c=+S[0],u=+S[1],g):f?[c,u]:null},g},F.treemap=function uk(){var r=ey,c=!1,u=1,f=1,g=[0],m=Vc,y=Vc,C=Vc,E=Vc,S=Vc;function I(P){return P.x0=P.y0=0,P.x1=u,P.y1=f,P.eachBefore(N),g=[0],c&&P.eachBefore(K0),P}function N(P){var W=g[P.depth],K=P.x0+W,J=P.y0+W,Y=P.x1-W,Q=P.y1-W;Y<K&&(K=Y=(K+Y)/2),Q<J&&(J=Q=(J+Q)/2),P.x0=K,P.y0=J,P.x1=Y,P.y1=Q,P.children&&(W=g[P.depth+1]=m(P)/2,K+=S(P)-W,J+=y(P)-W,(Y-=C(P)-W)<K&&(K=Y=(K+Y)/2),(Q-=E(P)-W)<J&&(J=Q=(J+Q)/2),r(P,K,J,Y,Q))}return I.round=function(P){return arguments.length?(c=!!P,I):c},I.size=function(P){return arguments.length?(u=+P[0],f=+P[1],I):[u,f]},I.tile=function(P){return arguments.length?(r=F0(P),I):r},I.padding=function(P){return arguments.length?I.paddingInner(P).paddingOuter(P):I.paddingInner()},I.paddingInner=function(P){return arguments.length?(m="function"==typeof P?P:pu(+P),I):m},I.paddingOuter=function(P){return arguments.length?I.paddingTop(P).paddingRight(P).paddingBottom(P).paddingLeft(P):I.paddingTop()},I.paddingTop=function(P){return arguments.length?(y="function"==typeof P?P:pu(+P),I):y},I.paddingRight=function(P){return arguments.length?(C="function"==typeof P?P:pu(+P),I):C},I.paddingBottom=function(P){return arguments.length?(E="function"==typeof P?P:pu(+P),I):E},I.paddingLeft=function(P){return arguments.length?(S="function"==typeof P?P:pu(+P),I):S},I},F.treemapBinary=function hk(r,c,u,f,g){var y,E,m=r.children,C=m.length,S=new Array(C+1);for(S[0]=E=y=0;y<C;++y)S[y+1]=E+=m[y].value;!function I(N,P,W,K,J,Y,Q){if(N>=P-1){var ne=m[N];return ne.x0=K,ne.y0=J,ne.x1=Y,void(ne.y1=Q)}for(var ie=S[N],te=W/2+ie,oe=N+1,pe=P-1;oe<pe;){var Ie=oe+pe>>>1;S[Ie]<te?oe=Ie+1:pe=Ie}te-S[oe-1]<S[oe]-te&&N+1<oe&&--oe;var Le=S[oe]-ie,Ke=W-Le;if(Y-K>Q-J){var Se=W?(K*Ke+Y*Le)/W:Y;I(N,oe,Le,K,J,Se,Q),I(oe,P,Ke,Se,J,Y,Q)}else{var Ce=W?(J*Ke+Q*Le)/W:Q;I(N,oe,Le,K,J,Y,Ce),I(oe,P,Ke,K,Ce,Y,Q)}}(0,C,r.value,c,u,f,g)},F.treemapDice=vf,F.treemapResquarify=pk,F.treemapSlice=pg,F.treemapSliceDice=function fk(r,c,u,f,g){(1&r.depth?pg:vf)(r,c,u,f,g)},F.treemapSquarify=ey,F.tsv=lC,F.tsvFormat=j1,F.tsvFormatBody=K1,F.tsvFormatRow=Q1,F.tsvFormatRows=X1,F.tsvFormatValue=J1,F.tsvParse=ib,F.tsvParseRows=Y1,F.union=function ud(...r){const c=new Hn;for(const u of r)for(const f of u)c.add(f);return c},F.unixDay=Lm,F.unixDays=i2,F.utcDay=bf,F.utcDays=t2,F.utcFriday=Ry,F.utcFridays=f2,F.utcHour=wg,F.utcHours=Zk,F.utcMillisecond=gu,F.utcMilliseconds=Ay,F.utcMinute=bg,F.utcMinutes=Qk,F.utcMonday=wf,F.utcMondays=c2,F.utcMonth=xg,F.utcMonths=v2,F.utcSaturday=Oy,F.utcSaturdays=p2,F.utcSecond=Yo,F.utcSeconds=$y,F.utcSunday=bu,F.utcSundays=Fy,F.utcThursday=jc,F.utcThursdays=h2,F.utcTickInterval=_y,F.utcTicks=Hy,F.utcTuesday=Ny,F.utcTuesdays=d2,F.utcWednesday=By,F.utcWednesdays=u2,F.utcWeek=bu,F.utcWeeks=Fy,F.utcYear=ao,F.utcYears=b2,F.variance=co,F.version="7.8.2",F.window=ur,F.xml=hC,F.zip=function rd(){return Lr(arguments)},F.zoom=function BE(){var I,N,P,r=ME,c=IE,u=NE,f=LE,g=PE,m=[0,1/0],y=[[-1/0,-1/0],[1/0,1/0]],C=250,E=Wd,S=Rs("start","zoom","end"),W=500,K=150,J=0,Y=10;function Q(me){me.property("__zoom",M1).on("wheel.zoom",Le,{passive:!1}).on("mousedown.zoom",Ke).on("dblclick.zoom",Se).filter(g).on("touchstart.zoom",Ce).on("touchmove.zoom",tt).on("touchend.zoom touchcancel.zoom",Pe).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function ne(me,Ee){return(Ee=Math.max(m[0],Math.min(m[1],Ee)))===me.k?me:new so(Ee,me.x,me.y)}function ie(me,Ee,De){var _e=Ee[0]-De[0]*me.k,lt=Ee[1]-De[1]*me.k;return _e===me.x&&lt===me.y?me:new so(me.k,_e,lt)}function te(me){return[(+me[0][0]+ +me[1][0])/2,(+me[0][1]+ +me[1][1])/2]}function oe(me,Ee,De,_e){me.on("start.zoom",function(){pe(this,arguments).event(_e).start()}).on("interrupt.zoom end.zoom",function(){pe(this,arguments).event(_e).end()}).tween("zoom",function(){var lt=this,dt=arguments,mt=pe(lt,dt).event(_e),At=c.apply(lt,dt),Ht=null==De?te(At):"function"==typeof De?De.apply(lt,dt):De,Ki=Math.max(At[1][0]-At[0][0],At[1][1]-At[0][1]),Ri=lt.__zoom,$i="function"==typeof Ee?Ee.apply(lt,dt):Ee,Kn=E(Ri.invert(Ht).concat(Ki/Ri.k),$i.invert(Ht).concat(Ki/$i.k));return function(Hi){if(1===Hi)Hi=$i;else{var zn=Kn(Hi),Ct=Ki/zn[2];Hi=new so(Ct,Ht[0]-zn[0]*Ct,Ht[1]-zn[1]*Ct)}mt.zoom(null,Hi)}})}function pe(me,Ee,De){return!De&&me.__zooming||new Ie(me,Ee)}function Ie(me,Ee){this.that=me,this.args=Ee,this.active=0,this.sourceEvent=null,this.extent=c.apply(me,Ee),this.taps=0}function Le(me,...Ee){if(r.apply(this,arguments)){var De=pe(this,Ee).event(me),_e=this.__zoom,lt=Math.max(m[0],Math.min(m[1],_e.k*Math.pow(2,f.apply(this,arguments)))),dt=Ue(me);if(De.wheel)(De.mouse[0][0]!==dt[0]||De.mouse[0][1]!==dt[1])&&(De.mouse[1]=_e.invert(De.mouse[0]=dt)),clearTimeout(De.wheel);else{if(_e.k===lt)return;De.mouse=[dt,_e.invert(dt)],Fo(this),De.start()}Ef(me),De.wheel=setTimeout(function mt(){De.wheel=null,De.end()},K),De.zoom("mouse",u(ie(ne(_e,lt),De.mouse[0],De.mouse[1]),De.extent,y))}}function Ke(me,...Ee){if(!P&&r.apply(this,arguments)){var De=me.currentTarget,_e=pe(this,Ee,!0).event(me),lt=ue(me.view).on("mousemove.zoom",function Ht(Ri){if(Ef(Ri),!_e.moved){var $i=Ri.clientX-mt,Kn=Ri.clientY-At;_e.moved=$i*$i+Kn*Kn>J}_e.event(Ri).zoom("mouse",u(ie(_e.that.__zoom,_e.mouse[0]=Ue(Ri,De),_e.mouse[1]),_e.extent,y))},!0).on("mouseup.zoom",function Ki(Ri){lt.on("mousemove.zoom mouseup.zoom",null),Ii(Ri.view,_e.moved),Ef(Ri),_e.event(Ri).end()},!0),dt=Ue(me,De),mt=me.clientX,At=me.clientY;Vt(me.view),Xm(me),_e.mouse=[dt,this.__zoom.invert(dt)],Fo(this),_e.start()}}function Se(me,...Ee){if(r.apply(this,arguments)){var De=this.__zoom,_e=Ue(me.changedTouches?me.changedTouches[0]:me,this),lt=De.invert(_e),mt=u(ie(ne(De,De.k*(me.shiftKey?.5:2)),_e,lt),c.apply(this,Ee),y);Ef(me),C>0?ue(this).transition().duration(C).call(oe,mt,_e,me):ue(this).call(Q.transform,mt,_e,me)}}function Ce(me,...Ee){if(r.apply(this,arguments)){var dt,mt,At,Ht,De=me.touches,_e=De.length,lt=pe(this,Ee,me.changedTouches.length===_e).event(me);for(Xm(me),mt=0;mt<_e;++mt)Ht=[Ht=Ue(At=De[mt],this),this.__zoom.invert(Ht),At.identifier],lt.touch0?!lt.touch1&&lt.touch0[2]!==Ht[2]&&(lt.touch1=Ht,lt.taps=0):(lt.touch0=Ht,dt=!0,lt.taps=1+!!I);I&&(I=clearTimeout(I)),dt&&(lt.taps<2&&(N=Ht[0],I=setTimeout(function(){I=null},W)),Fo(this),lt.start())}}function tt(me,...Ee){if(this.__zooming){var dt,mt,At,Ht,De=pe(this,Ee).event(me),_e=me.changedTouches,lt=_e.length;for(Ef(me),dt=0;dt<lt;++dt)At=Ue(mt=_e[dt],this),De.touch0&&De.touch0[2]===mt.identifier?De.touch0[0]=At:De.touch1&&De.touch1[2]===mt.identifier&&(De.touch1[0]=At);if(mt=De.that.__zoom,De.touch1){var Ki=De.touch0[0],Ri=De.touch0[1],$i=De.touch1[0],Kn=De.touch1[1],Hi=(Hi=$i[0]-Ki[0])*Hi+(Hi=$i[1]-Ki[1])*Hi,zn=(zn=Kn[0]-Ri[0])*zn+(zn=Kn[1]-Ri[1])*zn;mt=ne(mt,Math.sqrt(Hi/zn)),At=[(Ki[0]+$i[0])/2,(Ki[1]+$i[1])/2],Ht=[(Ri[0]+Kn[0])/2,(Ri[1]+Kn[1])/2]}else{if(!De.touch0)return;At=De.touch0[0],Ht=De.touch0[1]}De.zoom("touch",u(ie(mt,At,Ht),De.extent,y))}}function Pe(me,...Ee){if(this.__zooming){var dt,mt,De=pe(this,Ee).event(me),_e=me.changedTouches,lt=_e.length;for(Xm(me),P&&clearTimeout(P),P=setTimeout(function(){P=null},W),dt=0;dt<lt;++dt)mt=_e[dt],De.touch0&&De.touch0[2]===mt.identifier?delete De.touch0:De.touch1&&De.touch1[2]===mt.identifier&&delete De.touch1;if(De.touch1&&!De.touch0&&(De.touch0=De.touch1,delete De.touch1),De.touch0)De.touch0[1]=this.__zoom.invert(De.touch0[0]);else if(De.end(),2===De.taps&&(mt=Ue(mt,this),Math.hypot(N[0]-mt[0],N[1]-mt[1])<Y)){var At=ue(this).on("dblclick.zoom");At&&At.apply(this,arguments)}}}return Q.transform=function(me,Ee,De,_e){var lt=me.selection?me.selection():me;lt.property("__zoom",M1),me!==lt?oe(me,Ee,De,_e):lt.interrupt().each(function(){pe(this,arguments).event(_e).start().zoom(null,"function"==typeof Ee?Ee.apply(this,arguments):Ee).end()})},Q.scaleBy=function(me,Ee,De,_e){Q.scaleTo(me,function(){return this.__zoom.k*("function"==typeof Ee?Ee.apply(this,arguments):Ee)},De,_e)},Q.scaleTo=function(me,Ee,De,_e){Q.transform(me,function(){var lt=c.apply(this,arguments),dt=this.__zoom,mt=null==De?te(lt):"function"==typeof De?De.apply(this,arguments):De,At=dt.invert(mt),Ht="function"==typeof Ee?Ee.apply(this,arguments):Ee;return u(ie(ne(dt,Ht),mt,At),lt,y)},De,_e)},Q.translateBy=function(me,Ee,De,_e){Q.transform(me,function(){return u(this.__zoom.translate("function"==typeof Ee?Ee.apply(this,arguments):Ee,"function"==typeof De?De.apply(this,arguments):De),c.apply(this,arguments),y)},null,_e)},Q.translateTo=function(me,Ee,De,_e,lt){Q.transform(me,function(){var dt=c.apply(this,arguments),mt=this.__zoom,At=null==_e?te(dt):"function"==typeof _e?_e.apply(this,arguments):_e;return u(Hg.translate(At[0],At[1]).scale(mt.k).translate("function"==typeof Ee?-Ee.apply(this,arguments):-Ee,"function"==typeof De?-De.apply(this,arguments):-De),dt,y)},_e,lt)},Ie.prototype={event:function(me){return me&&(this.sourceEvent=me),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(me,Ee){return this.mouse&&"mouse"!==me&&(this.mouse[1]=Ee.invert(this.mouse[0])),this.touch0&&"touch"!==me&&(this.touch0[1]=Ee.invert(this.touch0[0])),this.touch1&&"touch"!==me&&(this.touch1[1]=Ee.invert(this.touch1[0])),this.that.__zoom=Ee,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(me){var Ee=ue(this.that).datum();S.call(me,this.that,new DE(me,{sourceEvent:this.sourceEvent,target:Q,type:me,transform:this.that.__zoom,dispatch:S}),Ee)}},Q.wheelDelta=function(me){return arguments.length?(f="function"==typeof me?me:zg(+me),Q):f},Q.filter=function(me){return arguments.length?(r="function"==typeof me?me:zg(!!me),Q):r},Q.touchable=function(me){return arguments.length?(g="function"==typeof me?me:zg(!!me),Q):g},Q.extent=function(me){return arguments.length?(c="function"==typeof me?me:zg([[+me[0][0],+me[0][1]],[+me[1][0],+me[1][1]]]),Q):c},Q.scaleExtent=function(me){return arguments.length?(m[0]=+me[0],m[1]=+me[1],Q):[m[0],m[1]]},Q.translateExtent=function(me){return arguments.length?(y[0][0]=+me[0][0],y[1][0]=+me[1][0],y[0][1]=+me[0][1],y[1][1]=+me[1][1],Q):[[y[0][0],y[0][1]],[y[1][0],y[1][1]]]},Q.constrain=function(me){return arguments.length?(u=me,Q):u},Q.duration=function(me){return arguments.length?(C=+me,Q):C},Q.interpolate=function(me){return arguments.length?(E=me,Q):E},Q.on=function(){var me=S.on.apply(S,arguments);return me===S?Q:me},Q.clickDistance=function(me){return arguments.length?(J=(me=+me)*me,Q):Math.sqrt(J)},Q.tapDistance=function(me){return arguments.length?(Y=+me,Q):Y},Q},F.zoomIdentity=Hg,F.zoomTransform=D1});var Soho=function(F){"use strict";var ro=Object.freeze({__proto__:null,enableConsoleLogging:!1,enableTimeLogging:!1,getComponents:function Ko(s){var t=(s?$(s):$("body")).find("*"),i=[];return t.each(function(n,a){var o=$(a).data();o&&Object.keys(o).length&&i.push({data:o,element:a})}),i},log:function Kc(s,e){},logTimeEnd:function Ul(s){},logTimeStart:function pi(s){}});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){for(var e=(this.document||this.ownerDocument).querySelectorAll(s),t=e.length;--t>=0&&e.item(t)!==this;);return t>-1}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}),window.MSInputMethodContext&&document.documentMode||(jQuery.event.special.touchstart={setup:function(e,t,i){t.includes("noPreventDefault")?this.addEventListener("touchstart",i,{passive:!1}):this.addEventListener("touchstart",i,{passive:!0})}},jQuery.event.special.touchmove={setup:function(e,t,i){this.addEventListener("touchmove",i,{passive:!0})}},jQuery.event.special.mousewheel={setup:function(e,t,i){this.addEventListener("mousewheel",i,{passive:!0})}});function Zc(s,e,t){if(co())return Reflect.construct.apply(null,arguments);var i=[null];return i.push.apply(i,e),new(s.bind.apply(s,i))}function co(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(co=function(){return!!s})()}function Qo(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function ca(s){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Qo(Object(t),!0).forEach(function(i){ea(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Qo(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function rt(s){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(s)}function ea(s,e,t){return(e=function Tu(s){var e=function bn(s,e){if("object"!=typeof s||!s)return s;var t=s[Symbol.toPrimitive];if(void 0!==t){var i=t.call(s,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(s)}(s,"string");return"symbol"==typeof e?e:e+""}(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function Mi(s){return function uo(s){if(Array.isArray(s))return $r(s)}(s)||function jl(s){if(typeof Symbol<"u"&&null!=s[Symbol.iterator]||null!=s["@@iterator"])return Array.from(s)}(s)||function Er(s,e){if(s){if("string"==typeof s)return $r(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);if("Object"===t&&s.constructor&&(t=s.constructor.name),"Map"===t||"Set"===t)return Array.from(s);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $r(s,e)}}(s)||function ho(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(s,e){(null==e||e>s.length)&&(e=s.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=s[t];return i}var Fe={stripHTML:function(e){return e?e.replace(/<\/?[^>]+(>|$)/g,""):""},stripTags:function(s,e){if(!s)return"";if("number"==typeof s)return s;var t=("".concat(e||"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return s.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(i,function(o,l){return t.indexOf("<"+l.toLowerCase()+">")>-1?o:""}).replace(i,function(o,l){return t.indexOf("<"+l.toLowerCase()+">")>-1?o:""}).replace(i,function(o,l){return t.indexOf("<"+l.toLowerCase()+">")>-1?o:""})},sanitizeConsoleMethods:function(s){var t=new RegExp("console\\.(".concat(["assert","clear","count","debug","dirxml","dir","error","exception","groupCollapsed","groupEnd","group","info","log","markTimeline","profileEnd","profile","table","timeEnd","timeStamp","time","trace","warn"].join("|"),")((\\s+)?\\(([^)]+)\\);?)?"),"igm");return"string"!=typeof s?s:s.replace(t,"")},sanitizeHTML:function(s){if(!s)return"";var e=s.replace(/\bon\w+=\S+?(?=(>|&|<| |"))/g,"");return e=(e=(e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/g,"")).replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"")).replace(/<iframe\b[^<]*(?:(?!>)<[^<]*)*>/gi,""),(e=this.sanitizeConsoleMethods(e)).replace(/<\/script>/g,"")},removeWhiteSpaceCharacters:function(s){if(!s)return"";var e=s[0].innerHTML;return e=e.replace(/\s+/g," ").trim(),s[0].innerHTML=e,s[0].innerHTML},ensureAlphaNumeric:function(s){return"number"==typeof s?s:this.stripTags(s).replace(/[^a-z0-9-]/gi,"","")},ensureAlphaNumericWithSpaces:function(s){return"number"==typeof s?s:this.stripTags(s).replace(/[^a-z0-9 ]/gi,"","")},toCamelCase:function(s){return"string"!=typeof s?s:(s=this.stripTags(s).replace(/[^a-z0-9 ]/gi,"","")).toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,function(e,t){return t.toUpperCase()})},escapeHTML:function(s){var e=s;if("string"==typeof e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","\\":"&bsol;"};return e.replace(/[&<>"'\\]/gi,function(n){return t[n]})}return e},unescapeHTML:function(s){if(""===s)return"";if("string"==typeof s){var e=function(n){return(s.match(n)||[""])[0]},t=(new DOMParser).parseFromString(s,"text/html");return"".concat(e(/^\s*|\\/)).concat(t.documentElement.textContent.trim()).concat(e(/\s*$|\\/))}return s},htmlEntities:function(s){return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&bsol;").replace(/"/g,"&quot;")},isUrlLocal:function(s){return!(""===s)&&("/"===s[0]&&(1===s.length||"/"!==s[1]&&"\\"!==s[1])||s.length>1&&"~"===s[0]&&"/"===s[1])||s.length>=1&&"#"===s[0]}},de={isValidElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement},getAttributes:function(e){return e&&(e instanceof HTMLElement||e instanceof SVGElement)?e.attributes:{}},hasAnyClass:function(e){var t=e.className;return t&&t.length>0},hasClass:function(e,t){var i=!1;if(null==e||!e?.getAttribute)return i;if("classList"in e)i=e.classList.contains(t);else{var n=e.getAttribute("class");i=!!n&&-1!==n.split(/\s+/).indexOf(t)}return i},addClass:function(e){if(e){for(var t="",i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];for(var o=0;o<n.length;o++)e.classList?e.classList.add(n[o]):de.hasClass(e,[o])||(t.length&&(t+=" "),t+=n[o]);t.length&&$(e).addClass(t)}},removeClass:function(e){if(e){for(var t="",i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];for(var o=0;o<n.length;o++)e.classList?e.classList.remove(n[o]):de.hasClass(e,[o])||(t.length&&(t+=" "),t+=n[o]);t.length&&$(e).removeClass(t)}},isElement:function(e){return!!(e instanceof HTMLElement||e instanceof SVGElement||e instanceof $&&e.length)},getDimensions:function(e){if(!de.isElement(e))return{};if(e instanceof $){if(!e.length)return{};e=e[0]}var t=e.getBoundingClientRect(),i={};for(var n in t)isNaN(t[n])||(i[n]=t[n]);return i},prepend:function(e,t,i){var n=e;e instanceof $&&e.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&n.insertAdjacentHTML("afterbegin",this.xssClean(t,i))},append:function(e,t,i){var n=e;e instanceof $&&e.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&n.insertAdjacentHTML("beforeend",this.xssClean(t,i))},after:function(e,t,i){var n=e;e instanceof $&&e.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&n.insertAdjacentHTML("afterend",this.xssClean(t,i))},remove:function(e){var t=e;e instanceof $&&e.length&&(t=t[0]),(t instanceof HTMLElement||t instanceof SVGElement)&&e.parentNode&&e.parentNode.removeChild(e)},setAttribute:function(e,t,i){var n=e;e instanceof $&&e.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&n.setAttribute("attribute",i)},xssClean:function(e,t){var i=e;return t&&"*"!==t&&(i=Fe.stripTags(e,t)),"*"===t&&(i=Fe.sanitizeHTML(e)),i},html:function(e,t,i){var n=e;e instanceof $&&e.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&(n.innerHTML=this.xssClean(t,i))},replaceHtml:function(e,t,i){var n=e,a=t;e instanceof $&&e.length&&(n=n[0]),t instanceof $&&e.length&&(a=t[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&n.replaceChildren(this.xssClean(a,i))},parents:function(e,t,i){var o,n=[];if(!de.isValidElement(e))return n;for(;e.parentNode&&(!i||!n.length);)(o=e=e.parentNode)!==document&&o.matches(t)&&n.push(o);return i?n[0]:n},getNextSibling:function(e,t){e instanceof $&&e.length&&(e=e[0]);var i=e.nextElementSibling;if(!t)return i;for(;i;){if(i.matches(t))return i;i=i.nextElementSibling}},getPreviousSibling:function(e,t){e instanceof $&&e.length&&(e=e[0]);var i=e.previousElementSibling;if(!t)return i;for(;i;){if(i.matches(t))return i;i=i.previousElementSibling}},getSiblings:function(e){return e instanceof $&&e.length&&(e=e[0]),[].slice.call(e.parentNode.children).filter(function(t){return t!==e})},getSimpleSelector:function(e){var t=e.tagName.toLowerCase(),i=e.id?"#".concat(e.id):"",n=e.className?".".concat(e.className.split(" ").join(".")):"";return"".concat(t).concat(i).concat(n)}},Jt={phone:320,slim:400,phablet:610,"phone-to-tablet":767,"wide-tablet":968,"tablet-to-desktop":1280,desktop:1024,"desktop-to-extralarge":1600},ed=Object.keys(Jt);function Xn(s,e,t){var i;return function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var d=this;i&&clearTimeout(i),i=setTimeout(function h(){s.apply(d,o),i=null},e||250)}}Jt.available=ed,Jt.current=function(){if(!window.getComputedStyle)return"";var s=!!window.getComputedStyle&&window.getComputedStyle(document.body,":after");return s?(s.getPropertyValue?s.getPropertyValue("content"):"").replace(/"/g,""):""},Jt.isAbove=function(e){var t=Jt[e];return!!t&&$(window).width()>t-1},Jt.isBelow=function(e){var t=Jt[e];return!!t&&$(window).width()<t},Jt.compare=function(){this.last||(this.last="");var e=this.current();this.last!==e&&($("body").triggerHandler("breakpoint-change",[{previous:this.last,current:e}]),this.last=e)},Jt.isHidden=function(s){if(!s||!de.isElement(s))return!1;var e=s.classList;if(!e.length)return!1;if(e.contains("hidden"))return!0;var n={phonedown:"xs",phone:"sm",tablet:"md",desktop:"lg",extralarge:"xl"}[this.current()],a="hidden-".concat(n),o="visible-".concat(n,"-");return!!e.contains(a)||(e.toString().indexOf(o),!1)},$.fn.isHiddenAtBreakpoint=function(){return!!this.length&&Jt.isHidden($(this).first()[0])};var Dr="debouncedResize";$.fn[Dr]=function(s){return s?this.bind("resize",Xn(s)):this.trigger(Dr)};var sr="environment",xe={browser:{},features:{resizeObserver:typeof ResizeObserver<"u",touch:"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},os:{},devicespecs:{},get rtl(){return"rtl"===$("html").attr("dir")},set:function(){$("html").attr("data-sohoxi-version","4.96.0"),this.viewport=document.querySelector("meta[name=viewport]"),this.viewport&&this.viewport.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0"),this.addBrowserClasses(),this.addGlobalResize(),this.addDeviceSpecs()},addBrowserClasses:function(){var e=navigator.userAgent||navigator.vendor||window.opera,t=navigator.platform,i=$("html"),n="";if(-1!==e.indexOf("Safari")&&-1===e.indexOf("Chrome")&&-1===e.indexOf("Android")&&(n+="is-safari ",this.browser.name="safari"),this.browser.isWKWebView=function(){return!1},"iP"===navigator.platform.substr(0,2)||xe.browser.isIPad()){var a=/constructor/i.test(window.HTMLElement),o=!!window.indexedDB;(window.webkit&&window.webkit.messageHandlers||!a||o)&&(this.browser.name="wkwebview",n+="is-safari is-wkwebview ",this.browser.isWKWebView=function(){return!0})}if(-1!==e.indexOf("Chrome")&&(n+="is-chrome ",this.browser.name="chrome"),e.indexOf("Firefox")>0&&(n+="is-firefox ",this.browser.name="firefox"),e.match(/Edg\//)&&(n+="ie-edge ",this.browser.name="edge",this.browser.version=navigator.appVersion.indexOf("Edge/18")>-1?"18":"17",n+="ie-edge".concat(this.browser.version)),e.match(/Trident/)&&(n+="ie ",this.browser.name="ie"),(navigator.appVersion.indexOf("MSIE 8.0")>-1||e.indexOf("MSIE 8.0")>-1||8===document.documentMode)&&(n+="ie8 ",this.browser.version="8"),navigator.appVersion.indexOf("MSIE 9.0")>-1&&(n+="ie9 ",this.browser.version="9"),navigator.appVersion.indexOf("MSIE 10.0")>-1?(n+="ie10 ",this.browser.version="10"):e.match(/Trident\/7\./)&&(n+="ie11 ",this.browser.version="11"),/iPhone|iPod|iPad/.test(e)||xe.browser.isIPad()){n+="ios ",this.os.name="ios";for(var l=["iPod","iPad","iPhone"],d=0;d<l.length;d++)new RegExp(l[d]).test(e)&&(n+="".concat(l[d].toLowerCase()," "),this.device=l[d])}["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)>-1&&!/Linux/.test(t)&&(n=n.replace("ios ",""),n+="is-mac ",this.os.name="mac"),/Android/.test(e)&&(n+="android ",this.os.name="android"),!this.os.name&&/Linux/.test(t)&&(this.os.name="linux"),i.addClass(n)},addDeviceSpecs:function(){var l,d,h,t=navigator.appVersion,i=navigator.userAgent,n=navigator.appName,a=" ".concat(parseFloat(navigator.appVersion)),o=parseInt(navigator.appVersion,10),p="";-1!==(d=i.indexOf("Opera"))&&(n="Opera",a=i.substring(d+6),-1!==(d=i.indexOf("Version"))&&(a=i.substring(d+8))),-1!==(d=i.indexOf("OPR"))?(n="Opera",a=i.substring(d+4)):-1!==(d=i.indexOf("Edg"))?(n="Microsoft Edge",a=i.substring(d+4)):-1!==(d=i.indexOf("MSIE"))?(n="Microsoft Internet Explorer",a=i.substring(d+5)):-1!==(d=i.indexOf("Chrome"))?(n="Chrome",a=i.substring(d+7),i.indexOf("Edg")>-1&&(p="Microsoft Edge"),Number(a.substring(0,3))>=108&&(a=a.substring(0,3))):-1!==(d=i.indexOf("Safari"))?(n="Safari",a=i.substring(d+7),-1!==(d=i.indexOf("Version"))&&(a=i.substring(d+8))):this.browser.isWKWebView()?(n="WKWebView",a="",o=""):-1!==(d=i.indexOf("Firefox"))?(n="Firefox",a=i.substring(d+8)):-1!==i.indexOf("Trident/")?(n="Microsoft Internet Explorer",a=i.substring(i.indexOf("rv:")+3)):(l=i.lastIndexOf(" ")+1)<(d=i.lastIndexOf("/"))&&(n=i.substring(l,d),a=i.substring(d+1),n.toLowerCase()===n.toUpperCase()&&(n=navigator.appName)),-1!==(h=a.indexOf(";"))&&(a=a.substring(0,h)),-1!==(h=a.indexOf(" "))&&(a=a.substring(0,h)),-1!==(h=a.indexOf(")"))&&(a=a.substring(0,h)),o=" ".concat(parseInt(a,10)),isNaN(o)&&(a=" ".concat(parseFloat(navigator.appVersion)),o=parseInt(navigator.appVersion,10));var v=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(t),b="-",w=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"UNIX",r:/UNIX/}];for(var T in w){var k=w[T];if(k.r.test(i)){b=k.s;break}}var A="-";switch(/Windows/.test(b)&&(A=/Windows (.*)/.exec(b)[1]),b){case"Windows 10":A="",b="Windows";break;case"Mac OS X":A="",b="Mac OS";break;case"Android":A=/Android ([\.\_\d]+)/.exec(i)[1];break;case"iOS":A=/OS (\d+)_?(\d+)?/.exec(i),A="".concat(A[1],".").concat(A[2],".").concat(0|A[3])}xe.browser.isIPad()&&(A=i.substr(i.indexOf("Version"),i.substr(i.indexOf("Version")).indexOf(" ")).replace("Version/",""),b="IOS"),this.devicespecs={currentBrowser:n,browserVersion:a.trim(),browserMajorVersion:o,isMobile:v||xe.browser.isIPad(),os:b,currentOSVersion:A,browserVersionName:p}},addGlobalResize:function(){$(window).debouncedResize(function(){$("body").triggerHandler("resize",[window]),Jt.compare()}),$(window).on("orientationchange load",function(){return Jt.compare()})},removeGlobalEvents:function(){$(window).off("scroll.".concat(sr)),$("body").off(["focusin.".concat(sr),"focusout.".concat(sr)].join(" "))}};function cn(s){return this.init(s)}function Kl(s,e,t){var i=$.Deferred();if(!de.isElement(s))return i.reject();if(s instanceof $&&s.length&&(s=s[0]),null==e)return i.resolve();if(isNaN(t)&&(t=0),e=Math.round(e),(t=Math.round(t))<0)return i.fail();if(0===t)return s.scrollLeft+=e,i.resolve();var n=Date.now(),a=n+t,o=s.scrollLeft,l=e,h=s.scrollLeft;return setTimeout(function p(){if(s.scrollLeft===h){var v=Date.now(),b=function d(v,b,w){if(w<=v)return 0;if(w>=b)return 1;var T=(w-v)/(b-v);return T*T*(3-2*T)}(n,a,v),w=Math.round(o+l*b);s.scrollLeft=w,v>=a?i.resolve():s.scrollLeft!==h||s.scrollLeft===w?(h=s.scrollLeft,setTimeout(p,0)):i.resolve()}else i.reject()},0),i}function Jo(s,e){return(typeof window.requestAnimationFrame<"u"?window.requestAnimationFrame:setTimeout)(s,e)}xe.browser.isEdge=function(){return"edge"===xe.browser.name},xe.browser.isIE11=function(){return"ie"===xe.browser.name&&"11"===xe.browser.version},xe.browser.isSafari=function(){return"safari"===xe.browser.name||"wkwebview"===xe.browser.name},xe.browser.isIE10=function(){return"ie"===xe.browser.name&&"10"===xe.browser.version},xe.browser.isFirefox=function(){return"firefox"===xe.browser.name},xe.browser.isIPad=function(){return!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&typeof navigator.standalone<"u")},xe.set(),cn.prototype={init:function(e){!this.element&&(e instanceof HTMLElement||e instanceof SVGElement)&&(this.element=e);var t=$(this.element),i=!1,n=!1,a=!1;if(t.is(".checkbox, .radio, .switch")){var o=t.next();o.is('[type="hidden"]')&&(o=o.next()),this.label=o[0],t.addClass("hide-focus").on("focusin.hide-focus",function(p){!i&&!n&&!a&&(t.removeClass("hide-focus"),t.triggerHandler("hidefocusremove",[p])),i=!1,n=!0,a=!1}).on("focusout.hide-focus",function(p){t.addClass("hide-focus"),a=o.is(a),i=!1,n=!1,t.triggerHandler("hidefocusadd",[p])}),o.on("mousedown.hide-focus",function(p){a=this,i=!0,t.addClass("hide-focus"),t.triggerHandler("hidefocusadd",[p])})}else{var l=function(v){i=!0,t.addClass("hide-focus"),t.triggerHandler("hidefocusadd",[v])},d=xe.features.touch,h=t;t.hasClass("accordion-header")&&(h=t.find("a")),h.on("mousedown.hide-focus",function(p){l(p)}),d&&h.on("touchstart.hide-focus",function(p){l(p)}),t.addClass("hide-focus"),t.on("focusin.hide-focus",function(p){i||(t.removeClass("hide-focus"),t.triggerHandler("hidefocusremove",[p])),i=!1,n=!0}).on("focusout.hide-focus",function(p){t.addClass("hide-focus"),i=!1,n=!1,t.triggerHandler("hidefocusadd",[p])}),t.is(h)||(this.separateEventTarget=h)}return this},updated:function(){return this.teardown().init()},teardown:function(){var e,t;this.label&&$(this.label).off("mousedown.hide-focus");var n=["focusin.hide-focus","focusout.hide-focus","mousedown.hide-focus","touchstart.hide-focus"].join(" ");return $(this.element).off(n),null!==(e=this.separateEventTarget)&&void 0!==e&&e?.length&&(this.separateEventTarget.off(n),this.separateEventTarget=null),null===(t=this.element)||void 0===t||t?.classList.remove("hide-focus"),this},destroy:function(){this.teardown(),$.removeData(this.element,"hidefocus")}},$.fn.hideFocus=function(){return this.each(function(){var s=$.data(this,"hidefocus");s?s.updated():s=$.data(this,"hidefocus",new cn(this))})},$.fn.smoothScroll=function(s,e){return Kl(this,s,e)},$.fn.bindFirst=function(s,e){this.on(s,e),this.each(function(){var t=$._data(this,"events")[s.split(".")[0]],i=t.pop();t.splice(0,0,i)})};var rr=[];function Is(s){return $.expr.filters.visible(s)&&!$(s).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}$.fn.cssPropSupport=function(s){if(!s)return null;var e=$("<div></div>")[0],t=s.toString(),i=["Moz","Webkit","O","ms"],n=t.charAt(0).toUpperCase()+t.substr(1);if(s in e.style)return $(e).remove(),s;for(var a=0;a<i.length;a++){var o=i[a]+n;if(o in e.style)return $(e).remove(),o}return $(e).remove(),null},$.fn.transitionEndName=function(){return{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"}[$.fn.cssPropSupport("transition")]||null},$.extend($.expr[":"],{focusable:function(e){return function td(s){var e,t,i,n=s.nodeName.toLowerCase(),a=!isNaN($.attr(s,"tabindex"));return"area"===n?(t=(e=s.parentNode).name,!(!s.href||!t||"map"!==e.nodeName.toLowerCase())&&!!(i=$("img[usemap=#".concat(t,"]"))[0])&&Is(i)):!!Is(s)&&(/input|select|textarea|button|object/.test(n)?!s.disabled:"a"===n&&void 0!==s.href||a)}(e,isNaN($.attr(e,"tabindex")))}}),$.fn.listEvents=function(){var s={};return this.each(function(){s=$._data(this,"events")}),s};var H={};function Xa(s){return"object"===rt(s)||"function"==typeof s}function Qa(s){return"function"==typeof s?s():s}H.uniqueId=function(s,e,t,i){var n=s.id;if(n&&$("#".concat(n)).length<2)return n;t=t?"".concat(t,"-"):"",i=i?"-".concat(i):"",e=e||H.getArrayFromList(s.classList).join("-"),rr[e]||(rr[e]=1);var a="".concat(t).concat(e,"-").concat(rr[e]).concat(i);return rr[e]+=1,a},H.parseSettings=function(e,t){var i={};if(!e||!(e instanceof HTMLElement)&&!(e instanceof $)||e instanceof $&&!e.length)return i;e instanceof $&&(e=e[0]);var n=e.getAttribute(t=t||"data-options");if(!n||"string"!=typeof n||-1===n.indexOf("{"))return i;function a(l){return l.replace(/'/g,'"')}try{i=JSON.parse(a(n))}catch{i=JSON.parse(function o(l){var d=/({|,)(?:\s*)(?:')?([A-Za-z_$\.][A-Za-z0-9_ \-\.$]*)(?:')?(?:\s*):/g;return a(l=(l=l.replace(d,'$1"$2":')).replace(d=/:(?:\s*)(?!(true|false|null|undefined))([A-Za-z_$\.#][A-Za-z0-9_ \-\.$]*)/g,':"$2"'))}(n))}return i},H.parseOptions=function(e,t){return H.parseSettings(e,t)},$.fn.parseOptions=function(s,e){var t=[],n=this;return s instanceof HTMLElement||s instanceof SVGElement||s instanceof $?n=$(s):(e=s,s=void 0),n.each(function(a,o){t.push({element:this,options:H.parseOptions(o,e)})}),1===t.length?t[0].options:t},H.coerceToBoolean=function(s){return!/^(false|0)$/i.test(s)&&!!s},H.coerceSettingsToBoolean=function(s,e){var t,i;for((!e||!Array.isArray(e))&&Object.keys(s).forEach(function(n){e.push(n)}),t=0,i=e.length;t<i;t++)s[e[t]]=H.coerceToBoolean(s[e[t]]);return s},$.fn.timer=function(s,e){var n,t=$(this),a=0;function d(){n=setInterval(function(){t.triggerHandler("update",[{counter:a+=10}]),a>e&&(t.triggerHandler("timeout"),s.apply(arguments),clearInterval(n),a=0)},10)}return d(),{event:this,cancel:function o(){t.triggerHandler("cancel"),clearInterval(n),a=0},pause:function l(){t.triggerHandler("pause"),clearInterval(n)},resume:function h(){t.triggerHandler("resume"),d()}}},$.copyToClipboard=function(s){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",s);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var e=document.createElement("textarea");e.textContent=s,e.style.position="fixed",document.body.appendChild(e),e.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(e)}}},$.fn.clearable=function(s){var e=this;this.element=$(this);var t="clearable";this.xButton=this.element.find(".icon.close").first(),(!this.xButton||!this.xButton.length)&&(this.xButton=$.createIconElement({classes:"close is-empty",icon:"close"}).icon()),null!=s&&s?.tabbable&&(this.xButton=$('<button type="button" class="btn-icon hide-focus close"></button>').append($.createIconElement({classes:"close",icon:"close"}).icon())),this.clear=function(){e.element.val("").trigger("change").focus().trigger("cleared"),e.checkContents()},this.handleKeydown=function(n){var a=n.key;("Enter"===a||n.altKey&&("Delete"===a||"Backspace"===a))&&(n.preventDefault(),e.clear())},this.checkContents=function(){var n=e.element.val();n&&n.length?this.xButton.removeClass("is-empty"):this.xButton.addClass("is-empty"),this.element.trigger("contents-checked")},this.xButton.insertAfter(e.element),this.xButton[0].tabIndex=null!=s&&s?.tabbable?0:-1,this.xButton[0].setAttribute("focusable",!0),this.xButton.off(["click.".concat(t),"keydown.".concat(t)].join(" ")).on("click.clearable",this.clear).on("keydown.clearable",this.handleKeydown),null!=s&&s?.tabbable&&this.xButton.hideFocus();var i=["blur.".concat(t),"change.".concat(t),"keyup.".concat(t)].join(" ");this.element.off(i).on(i,function(){e.checkContents()}),this.checkContents()},H.actualChar=function(s){var e=s.which,i={188:"44",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"},n={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",37:"%",38:"&",39:'"',44:"<",46:">",47:"?"};return Object.prototype.hasOwnProperty.call(i,e)&&(e=i[e]),e>=96&&e<=105&&(e-=48),!s.shiftKey&&e>=65&&e<=90?String.fromCharCode(e+32):!s.shiftKey&&e>=37&&e<=40?"":s.shiftKey&&Object.prototype.hasOwnProperty.call(n,e)?n[e]:String.fromCharCode(e)},$.actualChar=function(s){return H.actualChar(s)},H.equals=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},de.convertToHTMLElement=function(e){return e instanceof HTMLElement?e:e instanceof $?e=e.length?e[0]:void 0:void 0},de.focusableElems=function(e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=['button:not([disabled]):not([tabindex="-1"])','[href]:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','div.dropdown:not(.is-disabled):not([tabindex="-1"])','div.multiselect:not(.is-disabled):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','[focusable]:not([focusable="false"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","iframe"].concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(function(o){return-1===i.indexOf(o)});return Mi(e.querySelectorAll(n.join(", "))).filter(function(o){return"use"!==o.tagName.toLowerCase()})},H.isPlainObject=function(e){return!(!e||"[object Object]"!==Object.prototype.toString.call(e)||Object.getPrototypeOf(e)&&(null===e||"object"!==rt(e)||Object.getPrototypeOf(e)!==Object.prototype))},H.mergeByPosition=function(e,t){var i,n=Math.max((null===(i=e)||void 0===i?void 0:i?.length)||0,t?.length||0);if(e||(e=[]),0===n)return[];for(var a=0;a<n;a++)null!=t[a]&&(e[a]=t[a]);return e||[]},H.extend=function s(){var e=arguments[0]||{},t=!1,i=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],e=Array.isArray(arguments[1])?[]:{},i++);for(var n=function(o){for(var l in o){if(o.hasOwnProperty(l))if(o[l]instanceof jQuery)e[l]=$(o[l]);else if(t&&"[object Object]"===Object.prototype.toString.call(o[l])){var d=o[l],h=H.isPlainObject(d),p=Array.isArray(d)?[]:{};e[l]=h?s(!0,p,e[l],d):d}else Array.isArray(o[l])?e[l]=H.mergeByPosition(e[l],o[l]):void 0!==o[l]&&(e[l]=void 0===o[l]&&void 0!==e[l]?e[l]:o[l]);!o.hasOwnProperty(l)&&!e[l]&&"[object Function]"===Object.prototype.toString.call(o[l])&&(e[l]=o[l])}};i<arguments.length;i++)n(arguments[i]);return e},H.fixSVGIcons=function s(e){if(("ie"===xe.browser.name||"11"===xe.browser.version)&&void 0!==e){var t="http://www.w3.org/1999/xlink";if(e instanceof $){if(!e.length)return;if(1!==e.length)return void e.each(function(i,n){s(n)});e=e[0]}if(e instanceof NodeList)return void Array.prototype.forEach.call(e,function(i){s(i)});setTimeout(function(){for(var i=e.getElementsByTagName("use"),n=0;n<i.length;n++){var a=i[n].getAttributeNS(t,"href");i[n].setAttributeNS(t,"href","x"),i[n].setAttributeNS(t,"href",a)}},1)}},H.getViewportSize=function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},H.getContainerScrollDistance=function(e){if(!de.isElement(e))return[];var t=[];return $(e).parents([".scrollable",".scrollable-x",".scrollable-y",".modal",".card-content",".widget-content",".tab-panel",".datagrid-content"].join(", ")).each(function(){var n=this;t.push({element:n,left:n.scrollLeft,top:n.scrollTop})}),document.body.classList.contains("no-scroll")||t.push({element:document.body,left:document.body.scrollLeft,top:document.body.scrollTop}),t},H.getHiddenSize=function(e,t){var i={dims:{width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},parentElement:void 0,includeMargin:!1};if(!de.isElement(e))return i.dims;e=$(e),t=ca(ca({},i),t);var n=de.isElement(t.parentElement);n&&(e=e.clone().appendTo(t.parentElement));var a=t.dims,o=e.parents().add(e),l={transition:"none",webkitTransition:"none",mozTransition:"none",msTransition:"none",visibility:"hidden",display:"block"},d=[];return o.each(function(){var h=this,p={};Object.keys(l).forEach(function(b){h.style[b]&&(p[b]=h.style[b],h.style[b]=l[b])}),d.push(p)}),a.padding={bottom:e.css("padding-bottom"),left:e.css("padding-left"),right:e.css("padding-right"),top:e.css("padding-top")},a.width=e.width(),a.outerWidth=e.outerWidth(t.includeMargin),a.innerWidth=e.innerWidth(),a.scrollWidth=e[0].scrollWidth,a.height=e.height(),a.innerHeight=e.innerHeight(),a.outerHeight=e.outerHeight(t.includeMargin),a.scrollHeight=e[0].scrollHeight,o.each(function(h){var p=this,v=d[h];Object.keys(l).forEach(function(w){v[w]&&(p.style[w]=v[w])})}),n&&e.remove(),a},$.fn.getHiddenSize=function(s){return H.getHiddenSize(this,s)},H.isString=function(e){return"string"==typeof e||e instanceof String},H.isNumber=function(e){return"number"==typeof e&&void 0===e.length&&!isNaN(e)},H.safeSetSelection=function(e,t,i){!(e instanceof HTMLInputElement)||-1===["text","password","search","url","week","month"].indexOf(e.type)||(t&&void 0===i&&(i=t),document.activeElement===e&&("android"===xe.os.name?Jo(function(){e.setSelectionRange(t,i,"none")},0):e.setSelectionRange(t,i,"none")))},H.mergeSettings=function(e,t,i){return(!t||!Xa(t))&&(t=Xa(i)?i:{}),H.extend(!0,{},Qa(i),Qa(t),void 0!==e?H.parseSettings(e):{})},H.isHTML=function(s){return/(<([^>]+)>)/i.test(s)};var _n={convertDelayToFPS:function(e){if(isNaN(e))throw new Error("provided delay value is not a number");return e/16.7},convertFPSToDelay:function(e){if(isNaN(e))throw new Error("provided delay value is not a number");return 16.7*e},isFinite:function(e){return!("number"!=typeof e||e!=e||e===1/0||e===-1/0)}};H.forEach=function(e,t,i){for(var n=0;n<e.length;n++)t.call(i,e[n],n,e)},_n.sign=function(s){return Math.sign?Math.sign(s):0==(s=+s)||isNaN(s)?s:s>0?1:-1},H.getArrayFromList=function(s){return Function.prototype.call.bind(Array.prototype.slice)(s)},H.getScrollbarWidth=function(){var s=document.createElement("div");s.style.visibility="hidden",s.style.width="100px",document.body.appendChild(s);var e=s.offsetWidth;s.style.overflow="scroll";var t=document.createElement("div");t.style.width="100%",s.appendChild(t);var i=t.offsetWidth;return s.parentNode.removeChild(s),e-i},H.deepCopy=function(s){return H.extend(!0,Array.isArray(s)?[]:{},s)},H.isSubscribedTo=function(s,e,t,i){var n=$._data(s).events;for(var a in n)if(a===t&&(1!==n[a].length||n[a][0].namespace!==i))return!0;return!1},H.isInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},H.getSiblingsHeight=function(e){return de.getSiblings(e).map(function(i){return i.offsetHeight}).reduce(function(i,n){return i+n},0)},H.getParentAvailableHeight=function(e){return e.parentNode.offsetHeight-H.getSiblingsHeight(e)},H.clearSelection=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},H.toggleCompactMode=function(e){var t="form-layout-compact",i=e.classList.contains(t);i?e.classList.remove(t):e.classList.add(t);for(var n=e.querySelectorAll(".datagrid-container"),a=0;a<n.length;a++){var o=$(n[a]).data("datagrid");if(!o.rowHeight)return;i?o.rowHeight(o.oldRowHeight||"large"):(o.oldRowHeight=o.settings.rowHeight,o.rowHeight("extra-small"))}},H.addAttributes=function(e,t,i,n,a){if(i){var o=function(h,p){e[0]&&(a||!e[0].hasAttribute(h))&&e.attr(h,p+(n?"-".concat(n.toLowerCase()):""))};if(Array.isArray(i))return void i.forEach(function(d){var h="function"==typeof d.value?d.value(t):d.value;o(d.name,h)});var l="function"==typeof i.value?i.value(t):i.value;o(i.name,l)}},H.stringAttributes=function(e,t,i){var n="";if(!t)return n;if(Array.isArray(t))return t.forEach(function(o){var l="function"==typeof o.value?o.value(e):o.value;n+=" ".concat(o.name,'="').concat(l+(i?"-".concat(i):""),'"')}),n;var a="function"==typeof t.value?t.value(e):t.value;return n+=" ".concat(t.name,'="').concat(a+(i?"-".concat(i.toLowerCase()):""),'"')},H.getAttribute=function(e,t,i){var n;return"string"!=typeof t||!t.length||!Array.isArray(i)||i.forEach(function(a){!n&&a.name===t&&(n="function"==typeof a.value?a.value(e):a.value)}),n},H.waitForTransitionEnd=function(s,e){return new Promise(function(t){s.addEventListener("transitionend",function n(a){a.propertyName===e&&(s.removeEventListener("transitionend",n),t())})})},H.deepMergeObject=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=JSON.parse(JSON.stringify(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})),i=JSON.parse(JSON.stringify(e));return Object.keys(i).forEach(function(n){t[n]="object"!==rt(i[n])||Array.isArray(i[n])?i[n]:H.deepMergeObject(t[n],i[n])}),t};var Xl={isEmpty:function(s){return 0===Object.keys(s).length&&s.constructor===Object}},st={EMPTY:"",splice:function(e,t,i,n){return e.slice(0,t)+n+e.slice(t+Math.abs(i))},removeDuplicates:function(e){return e.split("").filter(function(t,i,n){return n.indexOf(t)===i}).join("")},containsHTML:function(e){return/<[a-z][\s\S]*>/i.test(e)},stripWhitespace:function(e){return e.replace(/\n/g,"").replace(/[\t ]+</g,"<").replace(/>[\t ]+</g,"><").replace(/>[\t ]+$/g,">")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},toBoolean:function(e){var t=+e;return isNaN(t)?!!String(e).toLowerCase().replace(!1,""):!!t},textWidth:function(e,t,i){var n=document.createElement("canvas");if(!n)return 0;var a=n.getContext("2d");if(!a)return 0;a.font=i||"14px arial";var o=a.measureText(e);return Math.round(o.width+(t||0))},padDate:function(e,t,i){return e+"0".concat(t+1).slice(-2)+"0".concat(i).slice(-2)},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},count:function(e,t){return e.split(t).length-1},isValidURL:function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}},qn={truncate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toString().split(".");return n[1]=n[1]?n[1].substr(0,t):"","".concat(n[0],".").concat(n[1])},round:function(e){return qn.toFixed(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:2)},fixTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t>10&&e.toString().indexOf(".")>-1?e.toLocaleString("en-US",{useGrouping:!1,minimumFractionDigits:t}):(+(Math.round(+(e+"e"+t))+"e"+-t)).toFixed(t)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=e.toString(),n=!1;"-"===i.substr(0,1)&&(n=!0,i=i.replace("-",""));var a="",o=i.split("."),l=[o[0].substr(0,10),o[0].substr(10),o[1]],d=l[0],h=l[1];if(a=this.fixTo((h||d)+(l[2]?".".concat(l[2]):""),t).toString(),h&&11===a.length&&"10000000000"===a&&(a="0000000000",d=(parseInt(d,10)+1).toString()),h&&"0"!==h.substr(0,1)&&(a=d+a),h&&"0"===h.substr(0,1))if(0===parseInt(h,10)){var p=a.split(".")[1];a="".concat(d).concat(h).concat(p?".".concat(p):"")}else a="".concat(d).concat(a);return n?"-".concat(a):a},decimalPlaces:function(e){return Math.floor(e)===e||-1===e.toString().indexOf(".")?0:e.toString().split(".")[1].length||0}},xt={};function vs(s){var e=Number(s).toString(16);return 1===e.length?"0".concat(e):e}xt.hexToRgba=function(e,t){var i;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3===(i=e.substring(1).split("")).length&&(i=[i[0],i[0],i[1],i[1],i[2],i[2]]),i="0x".concat(i.join("")),"rgba(".concat([i>>16&255,i>>8&255,255&i].join(","),",").concat(t.toString(),")")):""},xt.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},xt.rgbToHex=function(e,t,i){return"object"===rt(e)&&("number"==typeof e.r||"string"==typeof e.r)&&(t=e.g,i=e.b,e=e.r),"#".concat(vs(e)).concat(vs(t)).concat(vs(i))},xt.rgbToHsl=function(e,t,i){"object"===rt(e)&&("number"==typeof e.r||"string"==typeof e.r)&&(t=e.g,i=e.b,e=e.r),e=Number(e),t=Number(t),i=Number(i),e/=255,t/=255,i/=255;var n=Math.min(e,t,i),a=Math.max(e,t,i),o=a-n,l=0,d=0,h=0;return l=0===o?0:a===e?(t-i)/o%6:a===t?(i-e)/o+2:(e-t)/o+4,(l=Math.round(60*l))<0&&(l+=360),h=(a+n)/2,0!==o&&(d=o/(1-Math.abs(2*h-1))),{h:l,s:d=+(100*d).toFixed(1),l:h=+(100*h).toFixed(1)}},xt.hslToRgb=function(e,t,i){"object"===rt(e)&&("number"==typeof e.h||"string"==typeof e.h)&&(t=(e=e.h).s,i=e.l),e=Number(e),t=Number(t),i=Number(i),t/=100,i/=100;var n=(1-Math.abs(2*i-1))*t,a=n*(1-Math.abs(e/60%2-1)),o=i-n/2,l=0,d=0,h=0;return 0<=e&&e<60?(l=n,d=a,h=0):60<=e&&e<120?(l=a,d=n,h=0):120<=e&&e<180||180<=e&&e<240?(l=0,d=a,h=n):240<=e&&e<300?(l=a,d=0,h=n):300<=e&&e<360&&(l=n,d=0,h=a),{r:l=Math.round(255*(l+o)),g:d=Math.round(255*(d+o)),b:h=Math.round(255*(h+o))}},xt.getLuminousColorShade=function(e,t){e=this.validateHex(e).substr(1),t=t||0;var n,a,i="#";for(a=0;a<3;a++)n=parseInt(e.substr(2*a,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),i+="00".concat(n).substr(n.length);return i},xt.validateHex=function(e){return(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#".concat(e)},xt.getContrastColor=function(e,t,i){e=e?e.replace("#",""):"";var n=function(p){return parseInt(e.substr(p,2),16)};return(299*n(0)+587*n(2)+114*n(4))/1e3>=146?i||"black":t||"white"},xt.getDesaturatedColor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e=e?e.replace("#",""):"";var i=xt.hexToRgb(e),n=.3086*i.r+.6094*i.g+.082*i.b;return i.r=Math.round(i.r*t+n*(1-t)),i.g=Math.round(i.g*t+n*(1-t)),i.b=Math.round(i.b*t+n*(1-t)),xt.rgbToHex(i.r,i.g,i.b)},xt.isLighter=function(e,t){var i=xt.hexToRgb(e),n=xt.hexToRgb(t),a=xt.rgbToHsl(i),o=xt.rgbToHsl(n);return a.l<=o.l};var wa=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53914,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60647,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74585,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],Ls="",fo=!1;"object"===rt(window.SohoConfig)&&("string"==typeof window.SohoConfig.culturesPath&&(Ls=window.SohoConfig.culturesPath),"boolean"==typeof window.SohoConfig.minifyCultures&&(fo=window.SohoConfig.minifyCultures));var B={currentLocale:{name:"",data:{}},currentLanguage:{name:""},cultures:{},languages:{},dff:[],twoDigitYearCutoff:39,culturesPath:Ls,defaultLocales:[{lang:"af",default:"af-ZA"},{lang:"ar",default:"ar-EG"},{lang:"bg",default:"bg-BG"},{lang:"cs",default:"cs-CZ"},{lang:"da",default:"da-DK"},{lang:"de",default:"de-DE"},{lang:"el",default:"el-GR"},{lang:"en",default:"en-US"},{lang:"es",default:"es-ES"},{lang:"et",default:"et-EE"},{lang:"fi",default:"fi-FI"},{lang:"fr",default:"fr-FR"},{lang:"he",default:"he-IL"},{lang:"hi",default:"hi-IN"},{lang:"hr",default:"hr-HR"},{lang:"hu",default:"hu-HU"},{lang:"id",default:"id-ID"},{lang:"it",default:"it-IT"},{lang:"iw",default:"he-IL"},{lang:"ja",default:"ja-JP"},{lang:"ko",default:"ko-KR"},{lang:"lt",default:"lt-LT"},{lang:"lv",default:"lv-LV"},{lang:"ms",default:"ms-bn"},{lang:"nb",default:"no-NO"},{lang:"nn",default:"no-NO"},{lang:"nl",default:"nl-NL"},{lang:"no",default:"no-NO"},{lang:"pl",default:"pl-PL"},{lang:"pt",default:"pt-PT"},{lang:"ro",default:"ro-RO"},{lang:"ru",default:"ru-RU"},{lang:"sk",default:"sk-SK"},{lang:"sl",default:"sl-SI"},{lang:"sv",default:"sv-SE"},{lang:"th",default:"th-TH"},{lang:"tl",default:"tl-PH"},{lang:"tr",default:"tr-TR"},{lang:"uk",default:"uk-UA"},{lang:"vi",default:"vi-VN"},{lang:"zh",default:"zh-CN"}],supportedLocales:["af-ZA","ar-EG","ar-SA","bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-AU","en-GB","en-IN","en-NZ","en-US","en-ZA","es-AR","es-ES","es-419","es-MX","es-US","et-EE","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","lt-LT","lv-LV","ms-bn","ms-my","nb-NO","nn-NO","nl-NL","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sv-SE","th-TH","tl-PH","tr-TR","uk-UA","vi-VN","zh-CN","zh-Hans","zh-Hant","zh-TW"],translatedLocales:["fr-CA","fr-FR","pt-BR","pt-PT"],defaultLocale:"en-US",minify:fo,updateLanguageTag:function(e){var t=$("html");2===e.length&&(e=this.defaultLocales.filter(function(i){return i.lang===e})),t.attr("lang",e),this.isRTL()?t.attr("dir","rtl"):t.attr("dir","ltr"),B.flipIconsHorizontally(this.isRTL()),$("body").removeClass("busy-loading-locale")},getCulturesPath:function(){if(!this.culturesPath)for(var e=document.getElementsByTagName("script"),t=/sohoxi(.min){0,1}(.{0,1}[a-z0-9]*)\.js/,i=0;i<e.length;i++){var n=e[i].src,a=n.indexOf("?");if(""!==n&&a>-1&&(n=n.substr(0,a)),"sohoxi-script"===e[i].id)return"".concat(n.substring(0,n.lastIndexOf("/")),"/");n.match(t)&&(this.culturesPath="".concat(n.replace(t,""),"cultures/"))}return this.culturesPath},cultureInHead:function(){for(var e=!1,t=document.getElementsByTagName("script"),n=0;n<t.length;n++)t[n].src.indexOf("cultures")>-1&&(e=!0);return e},correctLocale:function(e){"in-ID"===e&&(e="id-ID"),"iw"===e.substr(0,2)&&(e="he-IL");var t=e.split("-")[0];if(-1===this.supportedLocales.indexOf(e)){if((e=this.defaultLocales.filter(function(i){return i.lang===t}))&&e[0])return e[0].default;e=this.defaultLocale}return e},correctLanguage:function(e){var t;"en-"===(null===(t=e)||void 0===t?void 0:t?.substr(0,3))&&(e=e.substr(0,2));var i=this.defaultLocales.filter(function(n){return n.lang===e});return i&&i[0]?this.remapLanguage(e):i=this.remapLanguage(e)},remapLanguage:function(e){var t=e;return"in"===e&&(t="id"),"iw"===e&&(t="he"),("nb"===e||"nn"===e||"nb-NO"===e||"nn-NO"===e)&&(t="no"),this.translatedLocales.indexOf(e)>-1?this.translatedLocales[this.translatedLocales.indexOf(e)]:t.substr(0,2)},addCulture:function(e,t,i){var n=this.remapLanguage(e);if(this.cultures[e]=t,this.cultures[e].name=e,t.messages)this.languages[n]={name:n,direction:t.direction||(i?i.direction:""),nativeName:t.nativeName||(i?i.nativeName:""),messages:t.messages||(i?i.messages:{})},this.languages[e]={name:e,direction:t.direction||(i?i.direction:""),nativeName:t.nativeName||(i?i.nativeName:""),messages:t.messages||(i?i.messages:{})};else if(!t.messages){var a=this.parentLocale(e);a.default&&a.default!==e&&!this.cultures[a.default]&&this.appendLocaleScript(a.default)}},parentLocale:function(e){var t=e.substr(0,2),n=this.defaultLocales.filter(function(a){return a.lang===t})[0]||[{default:"en-US"}];return this.translatedLocales.indexOf(e)>-1?{lang:"fr",default:"fr-CA"}:n},appendedLocales:[],appendLocaleScript:function(e,t,i,n){var a=this,o=document.createElement("script"),l=this.minify?".min":"";o.async=!1,!(this.appendedLocales.indexOf(e)>-1)&&(this.appendedLocales.push(e),o.src=n?"".concat(this.getCulturesPath()+n).concat(l,".js"):"".concat(this.getCulturesPath()+e).concat(l,".js"),o.onload=function(){t&&!i&&(a.setCurrentLocale(e,a.cultures[e]),a.dff[e].resolve(e)),i&&a.dff[i]&&(a.setCurrentLocale(e,a.cultures[e]),a.setCurrentLocale(i,a.cultures[i]),a.dff[i].resolve(i)),i&&a.dff[e]&&a.cultures[e]&&(a.setCurrentLocale(e,a.cultures[e]),a.dff[e].resolve(e)),!t&&!i&&a.dff[e]&&a.dff[e].resolve(e)},o.onerror=function(){a.dff[e]&&a.dff[e].reject()},"object"===rt(window.SohoConfig)&&"string"==typeof window.SohoConfig.nonce&&o.setAttribute("nonce",window.SohoConfig.nonce),document.head.appendChild(o))},set:function(e){var t=this;if(e=this.correctLocale(e),this.dff[e]=$.Deferred(),""===e)return t.dff.resolve(),this.dff.promise();this.cultures["en-US"]||this.appendLocaleScript("en-US","en-US"===e);var i=!1,n=this.parentLocale(e);return n.default&&n.default!==e&&!this.cultures[n.default]&&(i=!0),!i&&e&&!this.cultures[e]&&this.currentLocale.name!==e&&"en-US"!==e&&(this.setCurrentLocale(e),this.appendLocaleScript(e,!0)),i&&("en-US"!==n.default&&this.appendLocaleScript(n.default,!1),this.appendLocaleScript(e,!1,n.default)),e&&t.currentLocale.data&&t.currentLocale.dataName===e&&t.dff[e].resolve(t.currentLocale.name),t.setCurrentLocale(e,t.cultures[e]),t.cultures[e]&&this.cultureInHead()&&t.dff[e].resolve(t.currentLocale.name),this.dff[e].promise()},getLocale:function(e,t){if(!e)return null;if(e=this.correctLocale(e),this.dff[e]=$.Deferred(),""===e){var i=$.Deferred();return i.resolve(),i.promise()}return e&&"en-US"!==e&&!this.cultures["en-US"]&&this.appendLocaleScript("en-US",!1),e&&!this.cultures[e]&&this.currentLocale.name!==e&&"en-US"!==e&&this.appendLocaleScript(e,!1,!1,t),e&&this.currentLocale.data&&this.currentLocale.dataName===e&&this.dff[e].resolve(e),this.cultures[e]&&this.cultureInHead()&&this.dff[e].resolve(e),this.dff[e].promise()},setLanguage:function(e){var t=this,i=this.currentLocale.name;e=this.correctLanguage(e),this.languages[e]||this.set(e).done(function(){t.set(i),t.setLanguage(e)});var n=this.correctLocale(e);return this.languages[e]?(this.currentLanguage=this.languages[e],this.updateLanguageTag(e),this.dff[n]=$.Deferred(),this.dff[n].resolve()):(this.currentLanguage.name=e,this.dff[n])},setCurrentLocale:function(e,t){var i=this.remapLanguage(e);this.currentLocale.name=e;var a,o,l,d,h,n=void 0!==this.languages[i]&&void 0!==this.languages[e]&&this.languages[i].nativeName!==this.languages[e].nativeName?e:i;t&&(this.currentLocale.data=t,this.currentLocale.dataName=e,this.currentLanguage={},this.currentLanguage.name=i,this.languages[n]&&(this.currentLanguage=this.languages[n],this.currentLanguage.name=i,this.updateLanguageTag(e)),this.translatedLocales.indexOf(e)>-1&&(this.languages[n].direction=t.direction,this.languages[n].messages=t.messages,this.languages[n].name=i,this.languages[n].nativeName=t.nativeName,this.languages[e]={direction:t.direction,messages:t.messages,name:e,nativeName:t.nativeName}),"object"===(typeof d3>"u"?"undefined":rt(d3)))&&d3.formatDefaultLocale({decimal:(null==t||null===(a=t?.numbers)||void 0===a?void 0:a?.decimal)||".",thousands:(null==t||null===(o=t?.numbers)||void 0===o?void 0:o?.group)||",",grouping:(null==t||null===(l=t?.numbers)||void 0===l?void 0:l?.groupSizes)||[3],percent:(null==t||null===(d=t?.numbers)||void 0===d?void 0:d?.percentSign)||"%",currency:null!=t&&t?.currencySign?""===t.currencyFormat.split("\xa4")[0]?[t.currencySign,""]:["",t.currencySign]:["$",""],minus:(null==t||null===(h=t?.numbers)||void 0===h?void 0:h?.minusSign)||"-"})},formatDate:function(e,t){t||(t={date:"short"});var i=this.useLocale(t);if(e){if("0000"===e||"000000"===e||"00000000"===e)return"";if("string"==typeof e&&/T|Z/g.test(e)&&(e=this.newDateObj(e)),!(e instanceof Date)&&"string"==typeof e){var n=B.parseDate(e,t);isNaN(n)&&"datetime"===t.date&&"-"===e.substr(4,1)&&"-"===e.substr(7,1)&&(n=new Date(e.substr(0,4),e.substr(5,2)-1,e.substr(8,2),e.substr(11,2),e.substr(14,2),e.substr(17,2))),e=n}if(e instanceof Date||"number"!=typeof e||(e=new Date(e)),e){var o,l="",d=i.calendars?i.calendars[0]:null;t.date&&d&&(o=d.dateFormat[t.date]),t.pattern&&(o=t.pattern),"string"==typeof t&&""!==t&&(o=t),o||(o=d.dateFormat.short);var h=e instanceof Array?e[0]:e.getFullYear(),p=e instanceof Array?e[1]:e.getMonth(),v=e instanceof Array?e[2]:e.getDate(),b=e.getDay?e.getDay():"",w=e instanceof Array?e[3]:e.getHours(),T=e instanceof Array?e[4]:e.getMinutes(),k=e instanceof Array?e[5]:e.getSeconds(),A=e instanceof Array?e[6]:e.getMilliseconds();if(t.fromGregorian||t.toUmalqura){var M=this.gregorianToUmalqura(e);v=M[2],p=M[1],h=M[0]}if(t.toGregorian||t.fromUmalqura){var L=this.umalquraToGregorian(h,p,v);v=L.getDate(),p=L.getMonth(),h=L.getFullYear()}var z=(l=(l=(l=(l=(l=(o=(o=(o=(o=o.replace("de","nnnnn")).replace("ng\xe0y","nnnn")).replace("th\xe1ng","t1\xe1ng")).replace("den","nnn")).replace("dd",this.pad(v,2))).replace("d",v)).replace("yyyy",h)).replace("yy",h.toString().substr(2))).replace("y",h)).indexOf(" a")>-1||0===l.indexOf("a");if(z&&0===w&&(l=(l=l.replace("hh",12)).replace("h",12)),l=(l=(l=(l=(l=(l=(l=(l=(l=l.replace("hh",this.pad(w>12?w-12:w,2))).replace("h",w>12?w-12:w)).replace("HH",this.pad(w,2))).replace("H",w)).replace("mm",this.pad(T,2))).replace("ss",this.pad(k,2))).replace("SSS",this.pad(A,3))).replace("MMMM",d?d.months.wide[p]:null)).replace("MMM",d?d.months.abbreviated[p]:null),-1===o.indexOf("MMM")&&(l=(l=l.replace("MM",this.pad(p+1,2))).replace("M",p+1)),z&&d&&(0===(l=l.replace(" a"," ".concat(w>=12?d.dayPeriods[1]:d.dayPeriods[0]))).indexOf("a")&&(l=l.replace("a"," ".concat(w>=12?d.dayPeriods[1]:d.dayPeriods[0]))),l=l.replace("EEEE",d.days.wide[b])),d&&(l=l.replace("EEEE",d.days.wide[b])),d&&(l=l.replace("EEE",d.days.abbreviated[b])),d&&(l=l.replace("EE",d.days.narrow[b])),(l=(l=(l=(l=l.replace("nnnnn","de")).replace("nnnn","ng\xe0y")).replace("t1\xe1ng","th\xe1ng")).replace("nnn","den")).indexOf("zz")>-1){var q=new Date,O=this.getTimeZone(q,"short"),_=this.getTimeZone(q,"long");l=(l=l.replace("zzzz",_)).replace("zz",O)}return(l=l.replace(/&lrm;|\u200E/gi," ")).trim()}}},newDateObj:function(e){var t=new Date(e);if("safari"===xe.browser.name&&"string"==typeof e&&/T|Z/g.test(e)){var i=e.replace(/Z/,"").replace(/T|:/g,"-").split("-");i=i.map(function(n,a){return+(1===a?n-1:n)}),t=Zc(Date,Mi(i))}return t},formatHour:function(e,t){var i=this.calendar().dateFormat.timeSeparator,n=this.currentLocale.name;"object"===rt(t)&&(n=t.locale||n,i=t.timeSeparator||this.calendar(n).dateFormat.timeSeparator),"string"==typeof e&&-1===e.indexOf(i)&&(i=":");var a=new Date;if("number"==typeof e){var o=e.toString().split(".");a.setHours(o[0]),a.setMinutes(o[1]?60*parseFloat("0.".concat(o[1])):0)}else{var l=e.split(i);a.setHours(l[0]),a.setMinutes(l[1]||0)}var d={date:"hour"};return null!=t&&t?.pattern&&(d.pattern=t.pattern),this.formatDate(a,d)},formatHourRange:function(e,t,i){var n=this.currentLocale.name,a=this.calendar(n).dayPeriods,o=!1;"object"===rt(i)&&(a=this.calendar(n=i.locale||n).dayPeriods);var l="".concat(B.formatHour(e,i)," - ").concat(B.formatHour(t,i));return null!=i&&i?.keepPeriod||((l.indexOf(":00 AM -")>-1||l.indexOf(":00 PM -")>-1)&&(o=!0),st.count(l,a[0])>1&&(l=l.replace(a[0],"")),st.count(l,a[1])>1&&(l=l.replace(" ".concat(a[1]),""))),l=l.replace("  "," "),o&&(l=l.replace(":00 -"," -")),l},getTimeZone:function(e,t){var i=B.currentLocale.name||"en-US";if("ie"===xe.browser.name&&"11"===xe.browser.version)return e.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("");var n=e.toLocaleDateString(i),a=e.toLocaleDateString(i,{timeZoneName:"long"===t?"long":"short"}),o=a.indexOf(n);return o>=0?(a.substring(0,o)+a.substring(o+n.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):a},dateToTimeZone:function(e,t,i){return"ie"===xe.browser.name&&"11"===xe.browser.version?"".concat(e.toLocaleString(B.currentLocale.name)," ").concat(e.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")):e.toLocaleString(B.currentLocale.name,{timeZone:t,timeZoneName:i})},dateToUTC:function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()))},toLocaleString:function(e,t,i,n){if("number"!=typeof e)return"";var a={locale:t||B.currentLocale.name,options:i||void 0},o=e.toLocaleString(a.locale,a.options);if(!/undefined|null/.test(rt(n))){var l=this.getSeparator(a.locale,"group");"."!==l&&(o=o.replace(new RegExp(l,"g"),n.toString()))}return o},getSeparator:function(e,t){return Intl.NumberFormat(e).formatToParts(1000.1).find(function(n){return n.type===t}).value},convertNumberToEnglish:function(e){for(var t=["\u0660","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"],i=["\u0966","\u0967","\u0968","\u0969","\u096a","\u096b","\u096c","\u096d","\u096e","\u096f"],n=["\u96f6","\u58f9","\u8cb3","\u53c4","\u8086","\u4f0d","\u9678","\u67d2","\u634c","\u7396"],a=["\u96f6","\u58f9","\u8d30","\u53c1","\u8086","\u4f0d","\u9646","\u67d2","\u634c","\u7396"],o=["\u3007","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],l=0;l<=9;l++)e=(e=(e=(e=(e=(e=(e=e.replace(t[l],l)).replace("\u066c","")).replace(",","")).replace(i[l],l)).replace(n[l],l)).replace(a[l],l)).replace(o[l],l),0===l&&(e=e.replace("\u96f6",l));return parseFloat(e)},isValidDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},parseDate:function(e,t,i){if(e){var n=t,a=this.currentLocale.name,o=this.calendar();"object"===rt(t)&&(a=t.locale||a,n=t.dateFormat||this.calendar(a).dateFormat[n.date]),"object"===rt(t)&&t.pattern&&(n=t.dateFormat||t.pattern),"object"===rt(t)&&t.calendarName&&t.locale&&(o=this.calendar(t.locale,t.language,t.calendarName)),n||(n=this.calendar(a).dateFormat.short);var l=e;if("0000"!==e&&"000000"!==e&&"00000000"!==e){n.pattern&&(n=n.pattern);var d,h,w,T,p={},v=n.toLowerCase().indexOf("h")>-1,b=e.toLowerCase().indexOf("z")>-1,k=!!o.dayPeriods.filter(function(ci){return ci.indexOf(".")>-1}).length&&n.indexOf("a")>-1&&n.indexOf("ah")<0&&n.indexOf("H")<0,A=3===(n.match(/M/g)||[]).length&&o&&o.months&&o.months.abbreviated&&o.months.abbreviated.filter(function(ci){return/\./.test(ci)}).length;if(v){var M=B.getTimeZone(new Date,"short"),L=B.getTimeZone(new Date,"long");e=(e=e.replace(" ".concat(M),"")).replace(" ".concat(L),"");var z=A?/[T\s:-]/g:/[T\s:.-]/g;n=(n=n.replace(" zzzz","").replace(" zz","")).replace(z,"/").replace(/z/i,""),n=k?n.replace("//","/"):n,e=e.replace(k?/[T\s:-]/g:z,"/").replace(/z/i,"")}n=n.replace(" de "," "),e=e.replace(" de "," "),n=n.replace("ah","a/h"),e=e.replace("\u5348","\u5348/"),n=n.replace(",",""),e=e.replace(",","");var q=n.indexOf("Mdyyyy"),O=n.indexOf("dMyyyy"),_=-1,G=-1;if((q>-1||O>-1)&&(G=(_=q>-1?q:O>-1?O:0)+e.indexOf("/")>-1?e.indexOf("/"):e.length,e="".concat(e.substr(_,G-4),"/").concat(e.substr(G-4,e.length)),e="".concat(e.substr(_,e.indexOf("/")/2),"/").concat(e.substr(e.indexOf("/")/2,e.length))),q>-1&&(n=n.replace("Mdyyyy","M/d/yyyy")),O>-1&&(n=n.replace("dMyyyy","d/M/yyyy")),-1!==n.indexOf(" ")){var j=A?/[\s:]/g:/[\s:.]/g;n=n.replace(j,"/"),e=e.replace(j,"/")}if(n.indexOf("MMMM")>-1&&B.isRTL()&&n&&"MMMM/dd"!==n&&"dd/MMMM"!==n){var X=e.lastIndexOf("/");e=e.substr(0,X-1).replace("/"," ")+e.substr(X)}if(-1===n.indexOf(" ")&&-1===n.indexOf(".")&&-1===n.indexOf("/")&&-1===n.indexOf("-")){-1!==e.indexOf(" ")?e=e.split(" ").join(""):-1!==e.indexOf(".")?e=e.split(".").join(""):-1!==e.indexOf("/")?e=e.split("/").join(""):-1!==e.indexOf("-")&&(e=e.split("-").join(""));var fe=n[0],he="",we="";for(w=0,T=n.length;w<T;w++)we+=n[w]!==fe?"/".concat(e[w]):e[w],he+=n[w]!==fe?"/".concat(n[w]):n[w],w>1&&(fe=n[w]);e=we,n=he}d=n.split("/"),h=e.split("/"),1===d.length&&(d=n.split(".")),1===h.length&&(h=e.split(".")),1===d.length&&(d=n.split("-")),1===h.length&&(h=e.split("-")),1===d.length&&(d=n.split(" ")),1===h.length&&(h=e.split(" "));var re=this.getDatePart(d,h,"M","MM","MMM","MMMM"),Ne=this.getDatePart(d,h,"y","yy","yyyy"),le=!1,Te=!1,ge=o.dayPeriods[0],ce=o.dayPeriods[1];for(k||(ge=ge.replace(/\./g,""),ce=ce.replace(/\./g,"")),w=0,T=h.length;w<T;w++){var Be="".concat(d[w]),qe=h[w],Oe=parseInt(qe,10);le||(le=Be.toLowerCase().indexOf("d")>-1);var ot=void 0,He=void 0,Ae=void 0;switch(Be){case"d":if(ot=new Date(Ne,re,0).getDate(),Oe<1||Oe>31||Oe>ot)return;p.day=qe;break;case"dd":if(Oe<1||Oe>31||Oe<10&&"0"!==qe.substr(0,1))return;p.day=qe;break;case"M":if(Oe<1||Oe>12)return;p.month=qe-1;break;case"MM":if(Oe<1||Oe>12||Oe<10&&"0"!==qe.substr(0,1))return;p.month=qe-1;break;case"MMM":He=this.calendar(a).months.abbreviated;for(var We=0;We<He.length;We++)l.indexOf(He[We])>-1&&(p.month=We);break;case"MMMM":Ae=this.calendar(a).months.wide;for(var yt=0;yt<Ae.length;yt++)l.indexOf(Ae[yt])>-1&&(p.month=yt);break;case"yy":p.year=this.twoToFourDigitYear(qe);break;case"y":case"yyyy":p.year=2===qe.length?this.twoToFourDigitYear(qe):qe;break;case"h":if(Oe<0||Oe>12)return;p.h=Te?p.h:qe;break;case"hh":if(Oe<0||Oe>12)return;p.h=Te?p.h:1===qe.length?"0".concat(qe):qe;break;case"H":if(Oe<0||Oe>24)return;p.h=Te?p.h:qe;break;case"HH":if(Oe<0||Oe>24)return;p.h=Te?p.h:1===qe.length?"0".concat(qe):qe;break;case"ss":if(Oe<0||Oe>60){p.ss=0;break}p.ss=qe;break;case"SSS":p.ms=qe;break;case"mm":if(Oe<0||Oe>60){p.mm=0;break}p.mm=qe;break;case"a":!p.h&&d[w+1]&&"h"===d[w+1].toLowerCase().substr(0,1)&&(p.h=h[w+1],Te=!0),(qe.toLowerCase()===ge||qe.toUpperCase()===ge)&&(p.a="AM",p.h&&(12===p.h||"12"===p.h)&&(p.h=0)),(qe.toLowerCase()===ce||qe.toUpperCase()===ce)&&(p.a="PM",p.h&&p.h<12&&(p.h=parseInt(p.h,10)+12))}}var Dt=function(di){return di%4==0&&di%100!=0||di%400==0};if(p.return=void 0,p.leapYear=Dt(p.year),!v||p.h||p.mm){if(!p.year&&0!==p.year&&!i){for(p.isUndefindedYear=!0,w=0,T=d.length;w<T;w++)if(d[w].indexOf("y")>-1&&void 0!==h[w]){p.isUndefindedYear=!1;break}if(p.isUndefindedYear){var _t=29===parseInt(p.day,10)&&1===parseInt(p.month,10);if(p.year=_t?function(di){for(var ut=(new Date).getFullYear(),Xe=0;Xe<4&&!Dt(ut);Xe++)ut--;return ut}():(new Date).getFullYear(),"islamic-umalqura"===o.name){var ti=this.gregorianToUmalqura(new Date(p.year,0,1));p.year=ti[0]}}else delete p.year}if(p.year&&2===p.year.length&&(p.year="20".concat(p.year)),p.year=$.trim(p.year),p.day=$.trim(p.day),(""===p.year||p.year&&!(2==="".concat(p.year).length||4==="".concat(p.year).length))&&delete p.year,!p.month&&0!==p.month&&!i){for(p.isUndefindedMonth=!0,w=0,T=d.length;w<T;w++)if(d[w].indexOf("M")>-1&&void 0!==h[w]){p.isUndefindedMonth=!1;break}p.isUndefindedMonth&&(p.month=(new Date).getMonth())}if(!(p.day||0===p.day||i&&le)){for(p.isUndefindedDay=!0,w=0,T=d.length;w<T;w++)if(d[w].indexOf("d")>-1&&void 0!==h[w]){p.isUndefindedDay=!1;break}p.isUndefindedDay?p.day=1:delete p.day}return v?b?(void 0!==p.h&&(p.return=new Date(Date.UTC(p.year,p.month,p.day,p.h,p.mm))),void 0!==p.ss&&(p.return=new Date(Date.UTC(p.year,p.month,p.day,p.h,p.mm,p.ss))),void 0!==p.ms&&(p.return=new Date(Date.UTC(p.year,p.month,p.day,p.h,p.mm,p.ss,p.ms)))):(void 0!==p.h&&(p.return=new Date(p.year,p.month,p.day,p.h,p.mm)),void 0!==p.ss&&(p.return=new Date(p.year,p.month,p.day,p.h,p.mm,p.ss)),void 0!==p.ms&&(p.return=new Date(p.year,p.month,p.day,p.h,p.mm,p.ss,p.ms))):p.return=new Date(p.year,p.month,p.day),"islamic-umalqura"===o.name?[parseInt(p.year,10),parseInt(p.month,10),parseInt(p.day,10),parseInt(p.h||0,10),parseInt(p.mm||0,10),parseInt(p.ss||0,10),parseInt(p.ms||0,10)]:this.isValidDate(p.return)?p.return:void 0}}}},twoToFourDigitYear:function(e){return parseInt((e>this.twoDigitYearCutoff?"19":"20")+e,10)},getDatePart:function(e,t,i,n,a,o){var l=0;return $.each(t,function(d){(i===e[d]||n===e[d]||a===e[d]||o===e[d])&&(l=t[d])}),l},useLocale:function(e){var t=this.currentLocale.data;if(e&&e.locale&&this.cultures[e.locale]&&(t=this.cultures[e.locale]),e&&e.language&&this.languages[e.language]){var i=H.extend(!0,{},this.currentLocale.data);if(i.calendars)return i.calendars[0]=this.calendar(e.locale||this.currentLocale.name,e.language),i}return t.numbers||(t.numbers=this.numbers()),t},useLanguage:function(e){var t=this.languages[this.currentLanguage.name];if(e&&e.locale){var i=this.remapLanguage(e.locale);t=this.languages[i]}return e&&e.locale&&this.currentLanguage.name!==this.currentLocale.name&&this.languages[this.currentLanguage.name]&&(t=this.languages[this.currentLanguage.name]),e&&e.language&&this.languages[e.language]&&(t=this.languages[e.language]),t},formatNumber:function(e,t){var n,a,o,i=this.useLocale(t),l=t&&t.decimal?t.decimal:i.numbers.decimal,d=t&&void 0!==t.minimumFractionDigits?t.minimumFractionDigits:t&&t.style&&"currency"===t.style?2:t&&t.style&&"percent"===t.style?0:2,h=t&&void 0!==t.maximumFractionDigits?t.maximumFractionDigits:t&&t.style&&("currency"===t.style||"percent"===t.style)?2:t&&t.minimumFractionDigits?t.minimumFractionDigits:3;if(null!=e&&""!==e){if(t&&"integer"===t.style&&(h=0,d=0),t&&"currency"===t.style){var v=t&&t.currencyFormat?t.currencyFormat:i.currencyFormat;v||(v="\xa4#,##0.00"),a=v.replace("\xa4",t&&t.currencySign?t.currencySign:i.currencySign)}t&&"percent"===t.style&&(o=(o=i.numbers?i.numbers.percentFormat:"### %").replace("\xa4",i.numbers?i.numbers.percentSign:"%")),"string"==typeof e&&!1!==t?.parseNumber&&(e=B.parseNumber(e,t)),e.toString().indexOf("e")>-1&&(e=e.toFixed(h+1)),t&&"percent"===t.style&&(e=(100*e).toFixed(d));var w=this.truncateDecimals(e,d,h,t&&t.round).split("."),T=[3,3];i&&i.numbers&&i.numbers.groupSizes&&(T=i.numbers.groupSizes),t&&t.groupSizes&&(T=t.groupSizes);var A=this.expandNumber(w[0],T,t&&void 0!==t.group?t.group:i.numbers.group);w[0]=A,n=w.join(l);var M=i&&i.numbers&&i.numbers.minusSign?i.numbers.minusSign:"-",L=n.indexOf(M)>-1;n=n.replace(M,"");var z=function(_){return _.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},q="";return 0===d&&(q=new RegExp("(".concat(z(l),"[0-9]*?)0+$")),n=n.replace(q,"$1")),d>0&&(q=new RegExp("(".concat(z(l),".{").concat(d,"}[0-9]*?)0+$")),n=n.replace(q,"$1")),q=new RegExp("".concat(z(l),"$")),n=n.replace(q,""),t&&"currency"===t.style&&(n=a.replace("###",n)),t&&"percent"===t.style&&(n=o.replace("###",n)),L&&(n=M+n),n}},expandNumber:function(e,t,i){var n=e.length,a=!1;if("-"===e.substr(0,1)&&(n=(e=e.substr(1)).length,a=!0),n<=3||0===t[0])return(a?"-":"")+e;var o=e.substr(e.length-t[0]),l=e.substr(0,e.length-t[0]);if(0===t[1])return(a?"-":"")+l+(""===l?"":i)+o;var d=l.split("").reverse().join(""),h=new RegExp(".{1,".concat(t[1],"}"),"g");return(a?"-":"")+d.match(h).join(i).split("").reverse().join("")+i+o},truncateDecimals:function(e,t,i,n){var a=e;a=n?qn.round(e,i):qn.truncate(e,i);var o=qn.decimalPlaces(a);return o<t&&(a=a.toString()+new Array(t-o+1).join("0")),a.toString()},parseNumber:function(e,t){var a,i=this.useLocale(t),n=i.numbers;if(!(a=e))return NaN;"number"==typeof e&&(a=a.toString());var o=t&&void 0!==t.group?t.group:n?n.group:",",l=t&&t.decimal?t.decimal:n?n.decimal:".",d=t&&t.percentSign?t.percentSign:n?n.percentSign:"%",h=t&&t.currencySign?t.currencySign:i.currencySign||"$";a>Number.MAX_SAFE_INTEGER&&(a=BigInt(a).toString());var p=" "===o||""===o?new RegExp(/\s/g):new RegExp("\\".concat(o),"g");return(a=(a=(a=(a=(a=(a=a.replace(p,"")).replace(l,".")).replace(d,"")).replace(h,"")).replace("$","")).replace(" ",""))>Number.MAX_SAFE_INTEGER||a.indexOf(".")>-1&&a.length>17?a:parseFloat(a)},translate:function(e,t){var i=this.useLanguage(t),n=!1,a=!0;if("&nsbp;"===e)return"";if("boolean"==typeof t&&(n=t),"object"===rt(t)&&void 0!==t.showAsUndefined&&(n=t.showAsUndefined),"object"===rt(t)&&void 0!==t.showBrackets&&(a=t.showBrackets),void 0===i||void 0===i.messages)return n?void 0:"".concat(a?"[":"").concat(e).concat(a?"]":"");if(void 0===i.messages[e]){var o="en";return this.languages&&this.languages[o]&&this.languages[o].messages&&void 0!==this.languages[o].messages[e]?this.languages[o].messages[e].value:n?void 0:"".concat(a?"[":"").concat(e).concat(a?"]":"")}return i.messages[e].value},extendTranslations:function(e,t){this.languages[e]&&(this.languages[e].messages=H.extend(!0,this.languages[e].messages,t))},calendar:function(e,t,i){var n=[];if(this.currentLocale.data.calendars&&!e&&(n=this.currentLocale.data.calendars),t&&t.length>2&&(t=t.substr(0,2)),e&&this.cultures[e]&&(n=this.cultures[e].calendars),i&&n)for(var a=0;a<n.length;a++){var o=n[a];if(o.name===i)return o}if(!n[0])return{dateFormat:{separator:"/",timeSeparator:":",short:"M/d/yyyy",medium:"MMM d, yyyy",long:"MMMM d, yyyy",full:"EEEE, MMMM d, y",month:"MMMM d",year:"MMMM yyyy",timestamp:"h:mm:ss a",datetime:"M/d/yyyy h:mm a",dateTimestamp:"M/d/yyyy h:mm:ss a"},timeFormat:"h:mm:ss a",dayPeriods:["AM","PM"]};var l=H.extend(!0,{},n[0]);if(t&&e.substr(0,2)!==t){var d=this.defaultLocales.filter(function(p){return p.lang===t});if(d[0]){var h=this.cultures[d[0].default];l.days=h.calendars[0].days,l.months=h.calendars[0].months,l.dayPeriods=h.calendars[0].dayPeriods}}return l},numbers:function(){return this.currentLocale.data.numbers?this.currentLocale.data.numbers:{percentSign:"%",percentFormat:"### %",minusSign:"-",decimal:".",group:","}},pad:function(e,t,i){return i=i||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(i)+e},isRTL:function(){return!!this.currentLanguage&&"right-to-left"===this.currentLanguage.direction},isIslamic:function(e){var t;return"islamic-umalqura"===(null===(t=this.calendar(e))||void 0===t?void 0:t?.name)},toUpperCase:function(e){return"function"==typeof this.currentLocale.data.toUpperCase?this.currentLocale.data.toUpperCase(e):e.toLocaleUpperCase()},toLowerCase:function(e){return"function"==typeof this.currentLocale.data.toLowerCase?this.currentLocale.data.toLowerCase(e):e.toString().toLocaleLowerCase()},capitalize:function(e){return this.toUpperCase(e.charAt(0))+e.slice(1)},capitalizeWords:function(e){for(var t=e.split(" "),i=0;i<t.length;i++)t[i]=this.capitalize(t[i]);return t.join(" ")},gregorianToUmalqura:function(e){if("function"!=typeof e.getMonth)return null;var a=function(l){for(var d=l-24e5+.5,h=0,p=0;p<wa.length&&!(wa[p]>d);p++)h++;var v=h+15292,b=Math.floor((v-1)/12);return{year:b+1,month:v-12*b-1,day:d-wa[h-1]+1}}(function(l,d,h){l<0&&l++,d<3&&(d+=12,l--);var p=Math.floor(l/100),v=2-p+Math.floor(p/4);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(d+1))+h+v-1524.5}(e.getFullYear(),e.getMonth()+1,e.getDate()));return[a.year,a.month,a.day,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]},umalquraToGregorian:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;Array.isArray(e)&&(t=e[1],i=e[2]||0,n=e[3]||0,a=e[4]||0,o=e[5]||0,l=e[6]||0,e=e[0]);var d=function(k){return"number"==typeof k&&!isNaN(k)};if(!d(e)||!d(t)||!d(i))return null;var A,M,L,z,q,O,G,j,b=(A=Math.floor(i+wa[12*(e-1)+(t+1)-15292-1]-1+24e5-.5+.5),M=Math.floor((A-1867216.25)/36524.25),L=1524+(M=A+1+M-Math.floor(M/4)),z=Math.floor((L-122.1)/365.25),q=Math.floor(365.25*z),O=Math.floor((L-q)/30.6001),(j=z-((G=O-(O>13.5?13:1))>2.5?4716:4715))<=0&&j--,{year:j,month:G-1,day:L-q-Math.floor(30.6001*O)});return new Date(b.year,b.month,b.day,n,a,o,l)},flipIconsHorizontally:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=["attach","bottom-aligned","bullet-list","cancel","cart","collapse-app-tray","cut","document","drilldown","duplicate","expand-app-tray","export","first-page","folder","import","last-page","launch","left-align","left-text-align","left-arrow","new-document","next-page","number-list","paste","previous-page","quote","redo","refresh","right-align","right-arrow","right-text-align","save","search-folder","search-list","search","send","tack","tree-collapse","tree-expand","undo","unlocked","add-grid-record","add-grid-row","additional-help","bubble","bullet-steps","cascade","change-font","clear-screen","script","clockwise-90","close-cancel","close-save","contacts","copy-from","copy-mail","copy-url","counter-clockwise-90","create-report","delete-grid-record","delete-grid-row","display","employee-directory","export-2","export-to-pdf","generate-key","get-more-rows","group-selection","headphones","help","helper-list-select","history","invoice-released","language","logout","key","lasso","line-bar-chart","line-chart","new-expense-report","new-payment-request","new-time-sheet","new-travel-plan","no-attachment","no-comment","no-filter","overlay-line","pdf-file","phone","payment-request","pie-chart","queries","quick-access","refresh-current","restore-user","run-quick-access","save-close","save-new","search-results-history","select","send-submit","show-last-x-days","special-item","stacked","timesheet","unsubscribe","update-preview","zoom-100","zoom-in","zoom-out","caret-left","caret-right"];$("svg").each(function(){var i=$(this).getIconName();e&&i&&-1!==$.inArray(i,t)&&0===$(this).closest(".monthview").length?$(this).addClass("icon-rtl-rotate"):$(this).removeClass("icon-rtl-rotate")})}};function Pn(s){if("function"!=typeof s){if("string"==typeof s)return s;throw new Error("".concat(rt(s)," was provided where a function was expected."))}if("string"==typeof s.name)return"".concat(s.name,"()");var e=/^function\s+([\w$]+)\s*\(/.exec(s.toString());return e?"".concat(e[1],"()"):"(anonymous function)"}function gi(s,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("object"===(typeof console>"u"?"undefined":rt(console))){var i=Pn(s),n=Pn(e);t.length&&(t=" (".concat(t,")")),console.warn("IDS Enterprise".concat(t,': "').concat(n,'" is deprecated. Please use "').concat(i,'" instead.'))}}function Ps(s){"object"===(typeof console>"u"?"undefined":rt(console))&&console.warn('IDS Enterprise: "'.concat(s,'" is deprecated and will be later removed. Please adjust your code accordingly.'))}function ms(s,e){var t=function(){gi(s,e);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];s.apply(this,a)};return t.prototype=s.prototype,t}function Mr(s){return this.element=$(s),this}Mr.prototype={get url(){return window.location.href.replace(window.location.hash,"")},get href(){return this.element[0].getAttribute("href")},getCurrentURL:function(){return gi("url","getCurrentURL"),this.url},getBaseURL:function(e){return this.element.length&&this.href&&"/"!==this.href?e?0===e.indexOf("/")?e:(e=(-1===e.indexOf("#")?"#":"")+e,this.url+e):this.url:e||""}};var Ja=new Mr($("base[href]"));$.getBaseURL=function(s){return Ja.getBaseURL(s)};var Ns={noAutoStart:!1},Ia={};function Ir(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function Li(s){if(this.id=s.id,this.duration=s.duration||-1,this.duration<1&&("string"!=typeof this.id||!this.id.length))throw new Error("cannot build a RenderLoopItem with no duration and no namespace");return this.updateDuration=s.updateDuration||1,this.setFuncs(s),this.paused=!1,this.elapsedTime=0,this.startTime=Ir(),this}function Zo(s){return this.items=[],this.element=$("body"),this.settings=H.mergeSettings(null,s,Ns),!0!==this.settings.noAutoStart&&this.start(),this}"object"===rt(window.SohoConfig)&&"object"===rt(window.SohoConfig.renderLoop)&&(Ia=H.extend({},Ns,window.SohoConfig.renderLoop)),Li.prototype={setFuncs:function(e){if("function"!=typeof e.updateCallback&&"function"!=typeof e.timeoutCallback)throw new Error("cannot register callback to RenderLoop because callback is not a function");"function"==typeof e.updateCallback&&(this.updateCallback=e.updateCallback),"function"==typeof e.timeoutCallback&&(this.timeoutCallback=e.timeoutCallback)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},destroy:function(e){e&&(this.noTimeout=!0),this.doRemoveOnNextTick=!0}},Zo.prototype={start:function(){this.doLoop=!0,this.startTime=Ir();var i,n,e=this,t=Ir();!function a(){e.doLoop&&(i=Ir(),n=(i-t)/1e3,e.items.forEach(function(o){if(o.doRemoveOnNextTick)e.remove(o);else if(o.paused||o.elapsedTime++,"number"==typeof o.duration&&o.duration>-1&&(o.startTime||(o.startTime=i),o.elapsedTime>=o.duration))o.destroy();else if("function"==typeof o.updateCallback){if(o.updateDuration&&o.updateDuration>1&&(isNaN(o.timeUntilNextUpdate)&&(o.timeUntilNextUpdate=o.updateDuration),o.timeUntilNextUpdate>0))return void--o.timeUntilNextUpdate;o.updateCallback.apply(null,[o,{last:t,delta:n,now:i}])}}),t=i,requestAnimationFrame(a))}()},stop:function(){this.doLoop=!1},totalDuration:function(){return Ir()-this.startTime},queue:function(){return this.items},buildRenderLoopItem:function(e,t,i,n){var a="string"!=typeof n||!n.length;if("string"==typeof i)if(a)n=i,i=-1,a=!1;else{var o=Number(i);isNaN(o)||(i=o)}else"number"!=typeof i&&(i=-1);return("string"!=typeof n||!n.length)&&(n=""),new Li({id:n,updateCallback:e,timeoutCallback:t,duration:i})},register:function(e,t,i,n){return e instanceof Li||(e=this.buildRenderLoopItem(e,t,i,n)),this.items.push(e),e},unregister:function(e,t){if("function"!=typeof e&&"string"!=typeof e&&"string"!=typeof t)throw new Error("must provide either a callback function or a namespace string to remove an entry from the RenderLoop queue.");return"string"==typeof e&&(t=e,e=void 0),this.remove({cb:e,id:t})},getFromQueue:function(e,t){var i;return"string"==typeof callback&&(t=e,e=void 0),"function"==typeof callback?this.items.forEach(function(n){return"".concat(n.updateCallback)!=="".concat(e)||(i=n,!1)}):"string"==typeof t&&this.items.forEach(function(n){return n.id!==t||(i=n,!1)}),i},remove:function(e){var t;return e instanceof Li?(t=e,this.items=this.items.filter(function(i){return i!==e})):"function"==typeof e.updateCallback?this.items=this.items.filter(function(i){return"".concat(i.updateCallback)!=="".concat(e.updateCallback)||(t=i,!1)}):"string"==typeof e.id&&(this.items=this.items.filter(function(i){return i.id!==e.id||(t=i,!1)})),"function"==typeof t.timeoutCallback&&!t.noTimeout&&t.timeoutCallback.apply(null,t),this.element.triggerHandler("remove.renderLoop",[t]),t},pause:function(e,t){if("function"!=typeof e&&"string"!=typeof e&&"string"!=typeof t)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var i=this.getFromQueue(e,t);return i.pause(),i},resume:function(e,t){if("function"!=typeof e&&"string"!=typeof e&&"string"!=typeof t)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var i=this.getFromQueue(e,t);return i.resume(),i}};var _i=new Zo(Ia),id="keyboard";function nd(){this.pressedKeys=new Map,this.init()}nd.prototype={init:function(){var e=this;$(document).on("keydown.".concat(id),function(t){e.press(t.key),e.announceKeys()}).on("keyup.".concat(id),function(t){e.unpress(t.key),e.announceKeys()})},announceKeys:function(){var e=[];this.pressedKeys.forEach(function(t,i){e.push(i)}),$("body").triggerHandler("keys",[e])},press:function(e){return this.pressedKeys.set("".concat(e),!0)},unpress:function(e){return this.pressedKeys.delete("".concat(e))},isPressed:function(e){return this.pressedKeys.has("".concat(e))}};var Ql=new nd,Jl="modalmanager";function Zl(s){return void 0!==s&&s.element instanceof $&&"function"==typeof s.destroy}function ec(){return this.modals=[],this.handleEvents(),this}ec.prototype={get modalFadeDuration(){return 10},get currentlyOpen(){return this.modals.filter(function(s){return s.visible})},get currentlyActive(){var s;return this.modals.forEach(function(e){e.active&&(s=e)}),s},set currentlyActive(s){if(!Zl(s))throw new Error("Cannot set the provided Modal API to currently displayed.");this.modals.forEach(function(e,t){e.active=$(e.element).is(s.element),e.element[0].style.zIndex=e.active?"".concat(1020+t):e.visible?"".concat(920+t):""}),this.refresh()},get last(){var s,e=this.currentlyOpen,t=e.length;return t&&(s=e[t-1]),s},render:function(){var e=document.createDocumentFragment(),t=document.createElement("div"),i=document.createElement("div");t.id="ids-modal-root",t.classList.add("modal-page-container"),t.setAttribute("aria-hidden",!0),e.appendChild(t),i.classList.add("overlay"),i.setAttribute("aria-hidden",!0),t.appendChild(i),document.body.appendChild(t),this.rootElem=t,this.overlayElem=i},refresh:function(){var e=this.currentlyActive;e||(e=this.activateLast()),this.checkOverlayVisibility(),e?this.showContainers(e):this.hideContainers(e)},showContainers:function(){this.rootElem.removeAttribute("aria-hidden"),this.overlayElem.removeAttribute("aria-hidden"),$("body")[0].classList.add("modal-engaged")},hideContainers:function(){this.rootElem.setAttribute("aria-hidden",!0),this.overlayElem.setAttribute("aria-hidden",!0),$("body")[0].classList.remove("modal-engaged")},register:function(e){if(!Zl(e))throw new Error("The provided API is not a Modal API, and cannot be registered.");this.checkRootElements(),this.modals.filter(function(i){return $(i.element).is(e)})>0||this.modals.push(e)},unregister:function(e){if(!Zl(e))throw new Error("The provided API is not a Modal API, and cannot be unregistered.");this.checkRootElements(),this.modals=this.modals.filter(function(t){return!$(t.element).is(e.element)})},checkOverlayVisibility:function(){var e=0;this.currentlyActive&&(e=this.currentlyActive.settings.overlayOpacity),this.overlayElem.style.background="rgba(0, 0, 0, ".concat(e?"".concat(e):"",")")},checkRootElements:function(){var e=document.querySelector("#ids-modal-root");if(e instanceof HTMLElement){this.rootElem=e;var t=e.querySelector(".overlay");t instanceof HTMLElement&&(this.overlayElem=t)}else this.rootElem instanceof HTMLElement?document.body.appendChild(this.rootElem):this.render()},close:function(e){var i,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(i=e&&(e instanceof HTMLElement||e instanceof $&&e.length)?$(e).data("modal"):this.last)&&(t&&(i.isCancelled=!0),i.close())},closeAll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modals.forEach(function(t){e&&(t.isCancelled=!0),t.close(void 0,!0)}),this.refresh()},destroyAll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modals.forEach(function(t){(!e||t.capAPI)&&(t.close(void 0,!0),t.destroy())}),this.refresh()},closeLast:function(){this.close(void 0,arguments.length>0&&void 0!==arguments[0]&&arguments[0])},activateLast:function(){var e=this.last;return e&&(this.currentlyActive=e),e},findById:function(e){if(e)return this.modals.filter(function(i){return i.id===e})[0]||void 0},handleEvents:function(){var e=this;this.hasEstablishedEvents&&this.teardown(),$(document).on("keydown.".concat(Jl),function(i){var n=$(i.target).parents(".modal.is-active");switch(i.which||i.keyCode){case 27:e.close(n,!0);break;case 9:e.setModalFocus(i.shiftKey?"last":"first",i)}});var t=this;this.preRendered?this.checkRootElements():$(document).ready(function(){t.checkRootElements(),t.preRendered=!0}),this.hasEstablishedEvents=!0},setModalFocus:function(e,t){var i=this.currentlyActive;i&&(i.isFocused&&(!$(i.focusableElems.last).is(document.activeElement)||"first"!==e)&&(!$(i.focusableElems.first).is(document.activeElement)||"last"!==e)||(t.preventDefault(),i.setFocus(e)))},teardown:function(){$(document).off("keydown.".concat(Jl)),delete this.hasEstablishedEvents,this.preRendered&&(this.rootElem.parentNode.remove(this.rootElem),delete this.overlayElem,delete this.rootElem,delete this.preRendered)}};var La=new ec;function ta(s){return void 0!==s&&s.element instanceof $&&"function"==typeof s.destroy}function tc(){return this.notifications=[],this}tc.prototype={register:function(e){if(!ta(e))throw new Error("The provided object has no Notification API, and cannot be registered.");this.notifications.filter(function(i){return $(i.element).is(e)})>0||this.notifications.push(e)},unregister:function(e){if(!ta(e))throw new Error("The provided object has no Notification API, and cannot be registered.");var t=this.notifications.findIndex(function(i){return $(i.element).is(e)});t>=0&&this.notifications.splice(t,1)},closeById:function(e){if(this.notifications.length>0){var t=this.notifications.findIndex(function(i){return i.settings.id===e});t>=0&&(this.close(this.notifications[t]),this.notifications.splice(t,1))}},closeLatest:function(){this.notifications.length>0&&this.close(this.notifications.pop())},closeAll:function(){for(;this.notifications.length>0;)this.close(this.notifications.pop())},close:function(e){var t=e.element;e.close(),t&&this.notifications.length>0&&t.data("notification",this.notifications[0])}};var Bs=new tc,Et={currentTheme:{id:"theme-new-light",name:B.translate("NewLightTheme")},allColors:[{id:"theme-classic-light",colors:{themeName:"theme-classic",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-slate-40",value:"#888B94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535A"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1C1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1C1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#2578a9",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},error:{name:"ids-color-status-error",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"},info:{name:"ids-color-status-info",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"},status01:{name:"ids-color-status-status-01",value:"#e84f4f",paletteName:"#e84f4f"},status02:{name:"ids-color-status-status-02",value:"#e84f4f",paletteName:"#e84f4f"},status03:{name:"ids-color-status-status-03",value:"#ffd726",paletteName:"#ffd726"},status04:{name:"ids-color-status-status-04",value:"#80ce4d",paletteName:"#80ce4d"},status05:{name:"ids-color-status-status-05",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#368ac0"},alt:{name:"ids-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#f0f0f0"},font:{name:"body-color-primary-font",value:"#1a1a1a"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}}},{id:"theme-classic-dark",colors:{themeName:"theme-classic-dark",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-slate-40",value:"#888B94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535A"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1C1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1C1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#2578a9",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},error:{name:"ids-color-status-error",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"},info:{name:"ids-color-status-info",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"},status01:{name:"ids-color-status-status-01",value:"#e84f4f",paletteName:"#e84f4f"},status02:{name:"ids-color-status-status-02",value:"#e84f4f",paletteName:"#e84f4f"},status03:{name:"ids-color-status-status-03",value:"#ffd726",paletteName:"#ffd726"},status04:{name:"ids-color-status-status-04",value:"#80ce4d",paletteName:"#80ce4d"},status05:{name:"ids-color-status-status-05",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#888B94"},base:{name:"ids-color-brand-primary-base",value:"#50535A"},alt:{name:"ids-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#888B94"},base:{name:"ids-color-brand-secondary-base",value:"#656871"},alt:{name:"ids-color-brand-secondary-alt",value:"#414247"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#212224"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#313236"},font:{name:"body-color-primary-font",value:"#ffffff"}},secondary:{background:{name:"body-color-secondary-background",value:"#414247"}}}}}},{id:"theme-classic-contrast",colors:{themeName:"theme-classic-contrast",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-slate-40",value:"#888B94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535A"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1C1819"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1C1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#133c59",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},error:{name:"ids-color-status-error",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"},info:{name:"ids-color-status-info",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"},status01:{name:"ids-color-status-status-01",value:"#e84f4f",paletteName:"#e84f4f"},status02:{name:"ids-color-status-status-02",value:"#e84f4f",paletteName:"#e84f4f"},status03:{name:"ids-color-status-status-03",value:"#ffd726",paletteName:"#ffd726"},status04:{name:"ids-color-status-status-04",value:"#80ce4d",paletteName:"#80ce4d"},status05:{name:"ids-color-status-status-05",value:"#2578a9",paletteName:"{ids.color.palette.azure.70.value}"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#134d71"},alt:{name:"ids-color-brand-primary-alt",value:"#133c59"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#d8d8d8"},font:{name:"body-color-primary-font",value:"#000000"}},secondary:{background:{name:"body-color-secondary-background",value:"#d8d8d8"}}}}}},{id:"theme-new-light",colors:{themeName:"theme-new",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#F5F5F5"},20:{name:"ids-color-palette-slate-20",value:"#E0E0E1"},30:{name:"ids-color-palette-slate-30",value:"#C5C5C9"},40:{name:"ids-color-palette-slate-40",value:"#BBBBBF"},50:{name:"ids-color-palette-slate-50",value:"#8E8E95"},60:{name:"ids-color-palette-slate-60",value:"#6F6F76"},70:{name:"ids-color-palette-slate-70",value:"#525257"},80:{name:"ids-color-palette-slate-80",value:"#3B3B3F"},90:{name:"ids-color-palette-slate-90",value:"#28282A"},100:{name:"ids-color-palette-slate-100",value:"#161618"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#0066D4",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#FFD100",paletteName:"#FFD100"},danger:{name:"ids-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},error:{name:"ids-color-status-error",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"},info:{name:"ids-color-status-info",value:"#0064D4",paletteName:"#0064D4"},status01:{name:"ids-color-status-status-01",value:"#DA1217",paletteName:"#DA1217"},status02:{name:"ids-color-status-status-02",value:"#F98300",paletteName:"#F98300"},status03:{name:"ids-color-status-status-03",value:"#FFD100",paletteName:"#FFD100"},status04:{name:"ids-color-status-status-04",value:"#2AC371",paletteName:"#2AC371"},status05:{name:"ids-color-status-status-05",value:"#0064D4",paletteName:"#0064D4"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#0072ED"},alt:{name:"ids-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#BBBBBF"},base:{name:"ids-color-brand-secondary-base",value:"#6F6F76"},alt:{name:"ids-color-brand-secondary-alt",value:"#525257"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#28282A"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#ffffff"},font:{name:"body-color-primary-font",value:"#161618"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}}},{id:"theme-new-dark",colors:{themeName:"theme-new-dark",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#F5F5F5"},20:{name:"ids-color-palette-slate-20",value:"#E0E0E1"},30:{name:"ids-color-palette-slate-30",value:"#C5C5C9"},40:{name:"ids-color-palette-slate-40",value:"#BBBBBF"},50:{name:"ids-color-palette-slate-50",value:"#8E8E95"},60:{name:"ids-color-palette-slate-60",value:"#6F6F76"},70:{name:"ids-color-palette-slate-70",value:"#525257"},80:{name:"ids-color-palette-slate-80",value:"#3B3B3F"},90:{name:"ids-color-palette-slate-90",value:"#28282A"},100:{name:"ids-color-palette-slate-100",value:"#161618"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#6F6F76",paletteName:"{ids.color.brand.primary.base.value}"},caution:{name:"ids-color-status-caution",value:"#FFD100",paletteName:"#FFD100"},danger:{name:"ids-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},error:{name:"ids-color-status-error",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"},info:{name:"ids-color-status-info",value:"#0064D4",paletteName:"#0064D4"},status01:{name:"ids-color-status-status-01",value:"#DA1217",paletteName:"#DA1217"},status02:{name:"ids-color-status-status-02",value:"#F98300",paletteName:"#F98300"},status03:{name:"ids-color-status-status-03",value:"#FFD100",paletteName:"#FFD100"},status04:{name:"ids-color-status-status-04",value:"#2AC371",paletteName:"#2AC371"},status05:{name:"ids-color-status-status-05",value:"#0064D4",paletteName:"#0064D4"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#BBBBBF"},base:{name:"ids-color-brand-primary-base",value:"#6F6F76"},alt:{name:"ids-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#BBBBBF"},base:{name:"ids-color-brand-secondary-base",value:"#8E8E95"},alt:{name:"ids-color-brand-secondary-alt",value:"#525257"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#28282A"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#161618"},font:{name:"body-color-primary-font",value:"#F5F5F5"}},secondary:{background:{name:"body-color-secondary-background",value:"#3B3B3F"}}}}}},{id:"theme-new-contrast",colors:{themeName:"theme-new-contrast",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#F5F5F5"},20:{name:"ids-color-palette-slate-20",value:"#E0E0E1"},30:{name:"ids-color-palette-slate-30",value:"#C5C5C9"},40:{name:"ids-color-palette-slate-40",value:"#BBBBBF"},50:{name:"ids-color-palette-slate-50",value:"#8E8E95"},60:{name:"ids-color-palette-slate-60",value:"#6F6F76"},70:{name:"ids-color-palette-slate-70",value:"#525257"},80:{name:"ids-color-palette-slate-80",value:"#3B3B3F"},90:{name:"ids-color-palette-slate-90",value:"#28282A"},100:{name:"ids-color-palette-slate-100",value:"#161618"}},"classic-slate":{10:{name:"ids-color-palette-classic-slate-10",value:"#DEE1E8"},20:{name:"ids-color-palette-classic-slate-20",value:"#C8CBD4"},30:{name:"ids-color-palette-classic-slate-30",value:"#ABAEB7"},40:{name:"ids-color-palette-classic-slate-40",value:"#888B94"},50:{name:"ids-color-palette-classic-slate-50",value:"#656871"},60:{name:"ids-color-palette-classic-slate-60",value:"#50535A"},70:{name:"ids-color-palette-classic-slate-70",value:"#414247"},80:{name:"ids-color-palette-classic-slate-80",value:"#313236"},90:{name:"ids-color-palette-classic-slate-90",value:"#212224"},100:{name:"ids-color-palette-classic-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#003876",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#FFD100",paletteName:"#FFD100"},danger:{name:"ids-color-status-danger",value:"#7B0F11",paletteName:"#7B0F11"},error:{name:"ids-color-status-error",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"},info:{name:"ids-color-status-info",value:"#0064D4",paletteName:"#0064D4"},status01:{name:"ids-color-status-status-01",value:"#DA1217",paletteName:"#DA1217"},status02:{name:"ids-color-status-status-02",value:"#F98300",paletteName:"#F98300"},status03:{name:"ids-color-status-status-03",value:"#FFD100",paletteName:"#FFD100"},status04:{name:"ids-color-status-status-04",value:"#2AC371",paletteName:"#2AC371"},status05:{name:"ids-color-status-status-05",value:"#0064D4",paletteName:"#0064D4"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#004A99"},alt:{name:"ids-color-brand-primary-alt",value:"#003876"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#3B3B3F"},base:{name:"ids-color-brand-secondary-base",value:"#28282A"},alt:{name:"ids-color-brand-secondary-alt",value:"#161618"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#28282A"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#F5F5F5"},font:{name:"body-color-primary-font",value:"#28282A"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}}}],themes:function(){return[{id:"theme-classic-light",name:B.translate("ClassicLightTheme"),themeId:"theme-classic",modeId:"light",modeName:B.translate("Light")},{id:"theme-classic-dark",name:B.translate("ClassicDarkTheme"),themeId:"theme-classic",modeId:"dark",modeName:B.translate("Dark")},{id:"theme-classic-contrast",name:B.translate("ClassicHighContrastTheme"),themeId:"theme-classic",modeId:"contrast",modeName:B.translate("Contrast")},{id:"theme-new-light",name:B.translate("NewLightTheme"),themeId:"theme-new",modeId:"light",modeName:B.translate("Light")},{id:"theme-new-dark",name:B.translate("NewDarkTheme"),themeId:"theme-new",modeId:"dark",modeName:B.translate("Dark")},{id:"theme-new-contrast",name:B.translate("NewHighContrastTheme"),themeId:"theme-new",modeId:"contrast",modeName:B.translate("Contrast")}]},themeColors:function(){var e=this,t=this.allColors.filter(function(i){return i.id===e.currentTheme.id});return t[0]?t[0].colors:{palette:{},colors:{},brand:{}}},personalizationColors:function(){var e=this.themeColors().palette,t={},i={showBrackets:!1},n="#0066D4";switch(this.currentTheme.id){case"theme-new-light":case"theme-new-contrast":default:n="#fff";break;case"theme-new-dark":n="#28282A";break;case"theme-classic-light":n="#2578a9";break;case"theme-classic-contrast":n="#134d71";break;case"theme-classic-dark":n="#50535A"}return t.default={id:"default",name:B.translate("Default",i),backgroundColorClass:"primary-bg-color",value:n},t.alabaster={id:"alabaster",name:B.translate("Alabaster",i),backgroundColorClass:"alabaster",value:e.white.value},t.amber={id:"amber",name:B.translate("Amber",i),backgroundColorClass:"amber09",value:e.amber[90].value},t.amethyst={id:"amethyst",name:B.translate("Amethyst",i),backgroundColorClass:"amethyst06",value:e.amethyst[60].value},t.azure={id:"azure",name:B.translate("Azure",i),backgroundColorClass:"azure07",value:e.azure[70].value},t.emerald={id:"emerald",name:B.translate("Emerald",i),backgroundColorClass:"emerald08",value:e.emerald[80].value},t.graphite={id:"graphite",name:B.translate("Graphite",i),backgroundColorClass:"graphite06",value:e.graphite[60].value},t.ruby={id:"ruby",name:B.translate("Ruby",i),backgroundColorClass:"ruby09",value:e.ruby[90].value},t.slate={id:"slate",name:B.translate("Slate",i),backgroundColorClass:"slate06",value:e.slate[60].value},t.turquoise={id:"turquoise",name:B.translate("Turquoise",i),backgroundColorClass:"turquoise09",value:e.turquoise[90].value},t},setTheme:function(e){e=e.replace("soho","classic").replace("uplift","new");var t=this.themes().filter(function(i){return i.id===e});return 0===t.length?"":(this.currentTheme=t[0],t)},get uplift(){return this.currentTheme.id.indexOf("-uplift-")>-1||this.currentTheme.id.indexOf("-new-")>-1},get new(){return this.currentTheme.id.indexOf("-uplift-")>-1||this.currentTheme.id.indexOf("-new-")>-1}},Ca="personalize",nl={colors:"",theme:"",font:"",blockUI:!0,noInit:!1};function ud(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,nl),this.init()}ud.prototype={init:function(){return this.handleEvents(),this.settings.noInit||(this.setTheme(this.settings.theme?this.settings.theme:this.getThemeFromStylesheet()),this.settings.colors&&this.setColors(this.settings.colors),this.settings.font&&this.setFont(this.settings.font)),this},handleEvents:function(){var e=this;return this.element.off("updated.".concat(Ca)).on("updated.".concat(Ca),function(){e.updated()}),this},appendStyleSheet:function(e){var t=document.getElementById("soho-personalization");t&&t.parentNode.removeChild(t),(t=document.createElement("style")).setAttribute("id","soho-personalization"),t.appendChild(document.createTextNode(e)),document.head.appendChild(t)},getColorMap:function(e){var t=Et.themeColors(),i={amber:t.palette.amber[90].value,amethyst:t.palette.amethyst[60].value,azure:t.palette.azure[70].value,emerald:t.palette.emerald[80].value,graphite:t.palette.graphite[60].value,ruby:t.palette.ruby[90].value,slate:t.palette.slate[60].value,turquoise:t.palette.turquoise[90].value};return ea(ea(ea(ea(ea(ea(ea(ea({},i.amber,t.palette.amber[e].value),i.amethyst,t.palette.amethyst[e].value),i.azure,t.palette.azure[e].value),i.emerald,t.palette.emerald[e].value),i.graphite,t.palette.graphite[e].value),i.ruby,t.palette.ruby[e].value),i.slate,t.palette.slate[e].value),i.turquoise,t.palette.turquoise[e].value)},getColorStyleSheet:function(e){if(e||(e={}),"string"==typeof e&&(e={header:e}),!e||""===e)return this;var t={header:"2578A9"},i=Et.themeColors();e.theme={},e.theme.bg=i.components.body.primary.background.value,e.theme.altbg=i.components.body.secondary.background.value,e.theme.text=i.components.body.primary.font.value,e.theme.altText=i.components.body.secondary.background.value,e.theme.disabledText=i.brand.secondary.alt.value;var n=!1,a=!1,o=!1;i.themeName.indexOf("contrast")>-1&&(a=!0),i.themeName.indexOf("dark")>-1&&(n=!0),(i.themeName.indexOf("uplift")>-1||i.themeName.indexOf("new")>-1)&&(o=!0),e.theme.props={contrast:a,dark:n,newTheme:o};var l={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],azure:["#2578a9","#0563c2","#368AC0","#368ac0"],emerald:["#56932e","#1f9254"],graphite:["#5c5c5c","#808080"],ruby:["#941e1e","#7b0f11"],slate:["#50535a","#98949e"],turquoise:["#206b62","#297b7b"]},d=!1,h="".concat(e.header||t.header).toLowerCase();h=xt.validateHex(h),Object.keys(l).forEach(function(we){d=d||l[we].indexOf(h)>-1}),h=d?"white":null;var p=xt.validateHex(e.lightest||xt.getLuminousColorShade(e.header||t.header,.3));"white"===xt.getContrastColor(p,null,h)?(t.text="ffffff",t.subtext="f0f0f0"):(t.text="000000",t.subtext="292929"),e.header=xt.validateHex(e.header||t.header),e.text=xt.validateHex(e.text||t.text),e.subtext=xt.validateHex(e.subtext||t.subtext),e.btnColorHeader=xt.validateHex(e.btnColorHeader||xt.getLuminousColorShade(e.header,.3)),e.subheader=xt.validateHex(e.subheader||xt.getLuminousColorShade(e.header,.2)),e.verticalBorder=xt.validateHex(e.verticalBorder||xt.getLuminousColorShade(e.header,.1)),e.btnColorSubheader=xt.validateHex(e.btnColorSubheader||xt.getLuminousColorShade(e.header,-.1)),e.inactive=xt.validateHex(e.inactive||xt.getLuminousColorShade(e.header,-.2)),e.horizontalBorder=xt.validateHex(e.horizontalBorder||xt.getLuminousColorShade(e.header,-.3)),e.hover=xt.validateHex(e.hover||xt.getLuminousColorShade(e.header,-.5)),e.button=xt.validateHex(e.button||xt.getLuminousColorShade(e.text,-.8));var b={"#0066D4":i.palette.azure[60].value,"#BB5500":i.palette.amber[60].value,"#1F9254":i.palette.emerald[60].value,"#8D0B0E":i.palette.ruby[60].value,"#297B7B":i.palette.turquoise[60].value,"#535353":i.palette.graphite[50].value};e.header in b&&(e.header=b[e.header]),e.lightest=e.btnColorHeader,e.lighter=e.subheader,e.light=e.verticalBorder,e.base=e.header,e.contrast=e.text,e.dark=e.btnColorSubheader,e.darker=e.inactive,e.darkest=e.horizontalBorder,e.btnHoverColor=e.contrast,e.btnBgHoverColor="rgba(0, 0, 0, 0.10) !important",e.focusBoxShadow="0 0 0 0.5px ".concat(e.subtext,", 0 0 0 0.5px ").concat(e.subtext),e.btnFocusBorderColor=e.contrast,e.btnDisabledColor="rgba(255, 255, 255, 0.5) !important",e.btnOpacity=.8,e.btnPrimaryColor=e.base,e.btnPrimaryColorHover=e.darker,e.btnSecondaryColor=e.darkest,e.btnSecondaryBorderColor=e.base,e.btnTertiaryHoverColor=e.darker,e.btnLinkColor=e.darker,e.tabBottomBorderColor=e.base,e.btnActionsHoverColor=e.base,e.moduleTabsSelectedTextColor=i.palette.white.value,e.headerTabsSelectedTextColor=e.contrast,e.headerTabsTextColor=e.contrast,e.headerTextColor=e.contrast,e.headerIconColor=e.contrast,e.tabHoverColor=e.darkest,e.toolbarBtnHoverColor=e.darkest,e.tabVerticalHoverColor=i.palette.slate[20].value,e.tabHoverTextColor=i.palette.slate[100].value,e.tabTextWeight="400",e.tabTextSelectedWeight="600",e.tabBorderColor=e.darkest,e.tabSelectedColor=e.dark,e.tabHeaderColor=e.dark,e.tabColor=e.base,e.tabVerticalColor=i.palette.slate[10].value,e.headerTabBorder="transparent",e.verticalTabBorder=i.palette.slate[30].value,e.tabTextColor=i.palette.slate[100].value,e.tabSelectedTextColor=e.contrast,e.tabVerticalSelectedTextColor=e.base,e.tabVerticalSelectedColor=i.palette.white.value,e.tabDivider=e.darkest,e.tabTextColor=i.palette.white.value,e.toolbarBtnHoverColor=e.darker,e.tabFocusIndicator=e.contrast,e.tabFocusIndicatorVert=e.base,e.tabFocusBoxShadow="none",e.tabFocusBoxShadowVert="none",e.tabCloseInactiveColor="rgba(255, 255, 255, 0.85)",e.tabCloseHoverColor=i.palette.white.value,e.btnMenuColor=e.base,e.btnBoxShadow="0 0 0 0.5px ".concat(e.btnMenuColor,", 0 0 0 0.5px ").concat(e.btnMenuColor);var w="#ffffff"===e.header,T=this.currentTheme.indexOf("new-dark")>=0,k=this.currentTheme.indexOf("classic-dark")>=0,A=this.currentTheme.indexOf("new-contrast")>=0;e.btnTertiaryBgHoverColor=w?"#F5F5F5":e.lightest,e.btnTertiaryBgHoverColorHeader="rgba(0, 0, 0, 0.25)",e.btnTertiaryHoverColorHeader=i.palette.white.value,e.borderActiveSearchHeader=e.darkest,e.shadowActiveSearchHeader="none",e.borderActiveSearchMobile=e.contrast,(T||k)&&(e.btnLinkColor=e.lighter,e.btnTertiaryHoverColor=e.lighter,e.tabVerticalColor=i.palette.slate[90].value,e.tabVerticalSelectedColor=i.palette.slate[100].value,e.tabVerticalHoverColor=i.palette.slate[70].value,e.tabHoverTextColor=i.palette.white.value),w&&(e.tabTextColor=i.palette.slate[100].value,e.tabHoverColor=i.palette.slate[20].value,e.toolbarBtnHoverColor=i.palette.slate[20].value,e.text=i.palette.azure[60].value,e.darker=i.palette.azure[10].value,e.darkest=i.palette.slate[100].value,e.contrast=i.palette.slate[100].value,e.btnHoverColor=i.palette.azure[60].value,e.btnBgHoverColor=i.palette.slate[10].value,e.btnOpacity=1,e.borderActiveSearchHeader=i.palette.azure[60].value,e.shadowActiveSearchHeader="0 0 4px 3px rgba(54, 138, 192, 0.1)",e.focusBoxShadow="0 0 0 0.5px ".concat(i.palette.azure[60].value,", 0 0 0 0.5px ").concat(i.palette.azure[60].value),e.btnFocusBorderColor=i.palette.azure[60].value,e.borderActiveSearchMobile=i.palette.azure[60].value,e.btnDisabledColor="rgba(0, 0, 0, 0.15) !important",e.btnPrimaryColor=i.palette.azure[60].value,e.btnPrimaryColorHover="#0066D4",e.btnSecondaryColor=i.palette.azure[60].value,e.btnSecondaryBorderColor=i.palette.azure[60].value,e.btnTertiaryBgHoverColor=i.palette.slate[10].value,e.btnTertiaryHoverColor=i.palette.azure[60].value,e.btnTertiaryBgHoverColorHeader=i.palette.slate[10].value,e.btnTertiaryHoverColorHeader="#000000",e.btnLinkColor=i.palette.azure[60].value,e.tabBottomBorderColor=i.palette.slate[30].value,e.btnActionsHoverColor=i.palette.slate[100].value,e.moduleTabsSelectedTextColor=i.palette.azure[60].value,e.headerTabsSelectedTextColor=i.palette.azure[60].value,e.headerTextColor=i.palette.slate[100].value,e.headerIconColor=i.palette.slate[100].value,e.btnMenuColor=i.palette.azure[60].value,e.btnBoxShadow="0 0 0 0.5px ".concat(e.btnMenuColor,", 0 0 0 0.5px ").concat(e.btnMenuColor),e.tabFocusIndicator=i.palette.azure[60].value,e.tabFocusIndicatorVert=i.palette.azure[60].value,e.tabbtnMenuColor="0 0 4px 3px rgba(54, 138, 192, 0.2)",e.tabbtnMenuColorVert="0 0 4px 3px rgba(54, 138, 192, 0.2)",e.tabTextWeight="400",e.tabTextSelectedWeight="700",e.headerTabBorder=i.palette.slate[30].value,e.verticalTabBorder=i.palette.slate[30].value,e.tabDivider=i.palette.slate[30].value,e.tabHoverColor=i.palette.slate[20].value,e.toolbarBtnHoverColor=i.palette.slate[20].value,e.tabVerticalHoverColor=i.palette.slate[20].value,e.tabSelectedColor=i.palette.white.value,e.tabHeaderColor=i.palette.white.value,e.tabFocusColor=i.palette.slate[100].value,e.tabBorderColor=i.palette.white.value,e.tabColor=i.palette.slate[10].value,e.tabSelectedTextColor=i.palette.azure[60].value,e.tabVerticalSelectedTextColor=i.palette.azure[60].value,e.tabVerticalColor=i.palette.slate[10].value,e.tabVerticalSelectedColor=i.palette.white.value,e.tabCloseInactiveColor="rgb(111, 111, 118)",e.tabCloseHoverColor=e.contrast,o||(e.btnTertiaryBgHoverColor=i.palette.slate[30].value),T&&(e.tabTextColor=i.palette.slate[10].value,e.tabCloseInactiveColor="rgba(255, 255, 255, 0.85)",e.baseDisabledText="#fff",e.base=i.palette.slate[60].value,e.btnPrimaryColor=e.base,e.dark=e.base,e.contrast=i.palette.white.value,e.focusBoxShadow="0 0 0 0.5px ".concat(e.contrast,", 0 0 0 0.5px ").concat(e.contrast),e.darker=i.palette.slate[80].value,e.headerIconColor=i.palette.slate[10].value,e.btnHoverColor=i.palette.white.value,e.hyperlinkText=i.palette.white.value,e.lighter=i.palette.slate[70].value,e.btnDisabledColor="rgba(255, 255, 255, 0.4) !important",e.btnPrimaryColorHover=e.darker,e.btnSecondaryColor=e.darkest,e.btnSecondaryBorderColor=e.base,e.btnTertiaryBgHoverColor="rgba(255, 255, 255, 0.2)",e.btnTertiaryHoverColor=e.lightest,e.btnTertiaryBgHoverColorHeader=i.palette.slate[70].value,e.btnTertiaryHoverColorHeader=i.palette.white.value,e.btnLinkColor=e.lighter,e.btnBgHoverColor=i.palette.slate[80].value,e.tabBottomBorderColor=i.palette.slate[60].value,e.btnActionsHoverColor=i.palette.white.value,e.moduleTabsSelectedTextColor=i.palette.slate[10].value,e.headerTextColor=i.palette.slate[10].value,e.headerTabsTextColor=i.palette.slate[10].value,e.headerTabBorder=i.palette.slate[70].value,e.verticalTabBorder=i.palette.slate[60].value,e.tabFocusIndicator=i.palette.white.value,e.tabSelectedColor=i.palette.slate[90].value,e.tabHeaderColor=i.palette.slate[90].value,e.tabBorderColor=i.palette.slate[90].value,e.tabColor=i.palette.slate[80].value,e.tabHoverColor=i.palette.slate[70].value,e.toolbarBtnHoverColor=i.palette.slate[70].value,e.tabVerticalHoverColor=i.palette.slate[70].value,e.tabSelectedTextColor=i.palette.slate[10].value,e.tabVerticalSelectedTextColor=i.palette.slate[10].value,e.tabVerticalColor=i.palette.slate[90].value,e.tabVerticalSelectedColor=i.palette.slate[100].value,e.tabHoverTextColor=i.palette.white.value,e.tabCloseHoverColor=i.palette.white.value,e.tabDivider=i.palette.slate[100].value,e.headerTabsSelectedTextColor=i.palette.slate[10].value,e.tabFocusIndicatorVert=i.palette.white.value,e.tabbtnMenuColorVert="none"),k&&(e.base="#50535A",e.btnPrimaryColor=e.base,e.dark=e.base,e.contrast=i.palette.white.value,e.focusBoxShadow="0 0 0 0.5px ".concat(e.contrast,", 0 0 0 0.5px ").concat(e.contrast),e.darker="#313236",e.btnPrimaryColorHover=e.darker,e.btnHoverColor=i.palette.white.value,e.hyperlinkText=i.palette.white.value,e.lighter="#656871",e.btnDisabledColor="rgba(255, 255, 255, 0.4) !important",e.btnSecondaryColor=e.darkest,e.btnSecondaryBorderColor=e.base,e.btnTertiaryBgHoverColor=i.palette.slate[50].value,e.btnTertiaryHoverColor=i.palette.white.value,e.btnLinkColor=e.light,e.btnBgHoverColor="#313236",e.tabBottomBorderColor="#50535A",e.moduleTabsSelectedTextColor=i.palette.white.value,e.headerTextColor=i.palette.graphite[10].value,e.headerIconColor=i.palette.graphite[10].value,e.tabCloseInactiveColor=i.palette.graphite[10].value,e.tabCloseHoverColor=i.palette.white.value,e.tabVerticalHoverColor=i.palette.slate[80].value,e.tabHeaderColor=i.palette.slate[70].value,e.headerTabBorder=i.palette.slate[50].value,e.tabSelectedColor=i.palette.slate[70].value,e.tabColor=i.palette.slate[80].value,e.tabHoverColor=i.palette.slate[80].value,e.toolbarBtnHoverColor=i.palette.slate[80].value,e.tabBorderColor=i.palette.slate[70].value,e.tabSelectedTextColor=i.palette.white.value,e.tabVerticalSelectedTextColor=i.palette.white.value,e.tabHoverTextColor=i.palette.white.value,e.tabVerticalColor=i.palette.slate[70].value,e.tabVerticalSelectedColor=i.palette.slate[80].value),A&&(e.tabBorderColor=i.palette.white.value,e.tabHoverColor=i.palette.slate[20].value,e.toolbarBtnHoverColor=i.palette.slate[20].value,e.tabVerticalSelectedTextColor=i.palette.azure[90].value,e.headerTabsSelectedTextColor=i.palette.azure[90].value,e.moduleTabsSelectedTextColor=i.palette.azure[90].value));var M=this.getColorMap(100),L=this.getColorMap(a?20:10);e.darkestPalette=M[e.base]||e.subheader,e.lightestPalette=L[e.base]||e.subheader,w&&(e.lightestPalette=i.palette.slate[10].value,a&&(e.lightestPalette=i.palette.slate[20].value));var z={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],emerald:["#56932e","#1f9254"],slate:["#50535a","#98949e"]},q=!1,O=xt.validateHex("".concat(e.header||t.header).toLowerCase());Object.keys(z).forEach(function(we){q=q||z[we].indexOf(O)>-1});var _=e.light,G=q?.5:.7,j=q?.3:.5;o?(G=q?.6:.8,j=q?.6:.8,n?(_=e.darkest,G=.1):a&&(G=.8,j=.4)):n?(_=e.darkest,G=-.1):a&&(G=.3),k&&(e.btnTertiaryBgHoverColorHeader="rgba(0, 0, 0, 0.3)",e.btnBgHoverColor="rgba(0, 0, 0, 0.3)",e.btnTertiaryBgHoverColor="rgba(0, 0, 0, 0.3)");var X=xt.getLuminousColorShade(_,G);X=xt.getDesaturatedColor(X,j),e.baseDisabled=w?"#C5C5C9":X,e.baseDisabledText="#ffffff",e.hyperlinkText=w&&(T||k)?"#ffffff":e.text,e.hyperlinkTextHover=t.subtext,e.selection=t.subtext;var he=xt.getContrastColor(e.darkest);return t.tooltipText="white"===he?"ffffff":"000000",e.tooltipText=xt.validateHex(e.tooltipText||t.tooltipText),function Qn(s){var e=xt.hexToRgb(s.base),t=xt.hexToRgb(s.hyperlinkText);return"\n.is-personalizable ::selection {\n  background: ".concat(s.selection," !important;\n}\n\n.is-personalizable .header::selection {\n  background-color: ").concat(s.darker," !important;\n}\n\n.is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled),\n.btn-primary:not(:disabled):not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable {\n  background-color: ").concat(s.btnPrimaryColor,";\n  border-color: ").concat(s.btnPrimaryColor,";\n}\n\n.header.is-personalizable .buttonset .searchfield-wrapper.is-open button:not(.close) {\n  background-color: ").concat(s.contrast,";\n  color: ").concat(s.darkest," !important;\n}\n\n.header.is-personalizable .buttonset .searchfield-wrapper.is-open button.go-button:hover {\n  background-color: ").concat(s.secondaryButtonHover," !important;\n  color: ").concat(s.darkest," !important;\n}\n\n.header.is-personalizable {\n  --ids-color-background-default: ").concat(s.tabHeaderColor,";\n  --ids-breadcrumb-color-text-default: ").concat(s.contrast,";\n  --ids-breadcrumb-color-text-disabled: ").concat(s.btnDisabledColor,";\n\n  --ids-button-tertiary-color-text-default: ").concat(s.btnTertiaryHoverColorHeader,";\n  --ids-button-tertiary-color-text-hover: ").concat(s.btnTertiaryHoverColorHeader,";\n  --ids-button-tertiary-color-background-hover: ").concat(s.btnTertiaryBgHoverColorHeader,";\n  --ids-button-tertiary-color-border-hover: ").concat(s.btnTertiaryBgHoverColorHeader,";\n  --ids-button-menu-background-color-active: ").concat(s.btnTertiaryBgHoverColorHeader,";\n  --ids-button-menu-color-text-active: ").concat(s.btnTertiaryHoverColorHeader,";\n  --ids-button-tertiary-color-border-hover: transparent;\n  --ids-button-tertiary-color-background-pressed: ").concat(s.btnTertiaryBgHoverColorHeader,";\n  --ids-button-tertiary-color-border-pressed: transparent;\n  --ids-button-tertiary-color-text-pressed: ").concat(s.btnTertiaryHoverColorHeader,";\n  --ids-button-tertiary-shadow-focus: ").concat(s.btnBoxShadow,";\n  --ids-button-tertiary-color-border-focus: ").concat(s.contrast,";\n  --ids-hyperlink-color-text-default: ").concat(s.btnTertiaryHoverColorHeader,";\n  --ids-shadow-focus: ").concat(s.btnBoxShadow,";\n}\n\n.header.is-personalizable ids-hyperlink {\n  color: ").concat(s.contrast,";\n}\n\nhtml.theme-classic-dark .is-personalizable .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled {\n  color: #888B94 !important;\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) {\n  background-color: ").concat(s.lighter,";\n  border-color: ").concat(s.lighter,';\n}\n\nhtml[class*="new-"] .is-personalizable:not(.header) .btn-secondary:not(:disabled):not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane),\nhtml[class*="new-"] .is-personalizable:not(.header) .btn-secondary:not(:disabled):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane) svg.icon,\nhtml[class*="new-"] .is-personalizable:not(.header) .btn-secondary.btn-menu:not(:disabled):not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane),\nhtml[class*="new-"] .is-personalizable:not(.header) .btn-secondary.btn-menu:not(:disabled):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane) svg.icon  {\n  border-color: ').concat(s.btnSecondaryBorderColor,";\n  color: ").concat(s.btnSecondaryBorderColor,";\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) svg.icon {\n  border-color: ").concat(s.lighter,";\n  color: ").concat(s.lighter,";\n}\n\nhtml.theme-classic-dark .is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled {\n  background-color: ").concat(s.baseDisabled," !important;\n  border-color: ").concat(s.baseDisabled,' !important;\n}\n\nhtml[class*="theme-classic-"]:not(.theme-classic-dark) .is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled,\nhtml[class*="theme-classic-"]:not(.theme-classic-dark) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable:disabled {\n  color: ').concat(s.baseDisabledText,";\n  background-color: ").concat(s.baseDisabled,";\n  border-color: ").concat(s.baseDisabled,";\n}\n\n.is-personalizable:not(.header) .btn-tertiary:not(:disabled):hover {\n  background-color: ").concat(s.lightestPalette,";\n}\n\n.is-personalizable:not(.header) .btn-link:not(:disabled):hover {\n  background-color: ").concat(s.lightestPalette,';\n}\n\nhtml[class*="new-"] .is-personalizable:not(.header) .btn-link:not(:disabled):hover {\n  background-color: ').concat(s.btnTertiaryBgHoverColor,';\n}\n\nhtml[class*="new-"] .is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled):hover {\n  background-color: ').concat(s.btnTertiaryBgHoverColor,";\n}\n\n.is-personalizable:not(.header) .btn-link:not(:disabled),\n.btn-link.is-personalizable:not(:disabled),\n.is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled) {\n  color: ").concat(s.btnLinkColor,";\n}\n\n.is-personalizable:not(.header) .btn-link:not(:disabled) .icon,\n.btn-link.is-personalizable:not(:disabled) .icon,\n.is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled) .icon {\n  color: ").concat(s.btnLinkColor," !important;\n}\n\n.is-personalizable:not(.header) .btn-link:not(:disabled):hover .icon,\n.btn-link.is-personalizable:not(:disabled):hover .icon,\n.is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled):hover .icon {\n  color: ").concat(s.btnTertiaryHoverColor," !important;\n}\n\n.is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not(.hide-focus):focus {\n  box-shadow: ").concat(s.btnBoxShadow,";\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-link:not(:disabled),\nhtml.theme-new-dark .btn-link.is-personalizable:not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-link:not(:disabled) .icon,\nhtml.theme-new-dark .btn-link.is-personalizable:not(:disabled) .icon {\n  color: ").concat(s.btnLighter,";\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-link:not(:disabled):hover,\nhtml.theme-new-dark .btn-link.is-personalizable:not(:disabled):hover,\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-link:not(:disabled):hover .icon,\nhtml.theme-new-dark .btn-link.is-personalizable:not(:disabled):hover .icon,\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-menu.is-open:not(.btn-secondary):not([disabled]):not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled):hover,\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not([disabled]):not(:disabled):hover .icon {\n  color: ").concat(s.btnTertiaryHoverColor,";\n}\n\n.is-personalizable button.is-pressed,\nbutton.is-personalizable.is-pressed {\n  color: ").concat(s.base,";\n}\n\n.is-personalizable button.is-pressed .icon,\nbutton.is-personalizable.is-pressed .icon {\n  color: ").concat(s.base,";\n}\n\n.is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\n.btn-primary.is-personalizable:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(s.btnPrimaryColorHover,";\n  border-color: ").concat(s.btnPrimaryColorHover,";\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(s.lightest,";\n  border-color: ").concat(s.lightest,";\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .personalize-header.content .btn-primary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(s.darker,";\n  border-color: ").concat(s.darker,';\n}\n\nhtml[class*="new-"]:not(.theme-new-dark) .is-personalizable:not(.header) .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\nhtml[class*="new-"]:not(.theme-new-dark) .is-personalizable:not(.header) .btn-secondary.btn-menu.is-open:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) {\n  background-color: ').concat(s.lightestPalette,';\n}\n\n\nhtml[class*="new-"] .is-personalizable:not(.header) .personalize-header .btn-secondary:not(:disabled):not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane) {\n  color: ').concat("#ffffff"!==s.tabHeaderColor?"#ffffff":s.btnPrimaryColor,";\n  border-color: ").concat("#ffffff"!==s.tabHeaderColor?"#ffffff":s.btnPrimaryColor,";\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .personalize-header .btn-secondary:not(:disabled):not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover {\n  background-color: ").concat(s.btnBgHoverColor,';\n}\n\nhtml[class*="new-"]:not(.theme-new-dark) .is-personalizable:not(.header) .personalize-header .btn-secondary:not(:disabled):not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover {\n  background-color: ').concat("#ffffff"!==s.tabHeaderColor?s.light:s.darker,' !important;\n}\n\nhtml[class*="new-"] .is-personalizable:not(.header) .personalize-header .btn-tertiary:not(:disabled):not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane),\nhtml[class*="new-"] .is-personalizable:not(.header) .personalize-header .btn.btn-link:not(:disabled):not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane),\nhtml[class*="new-"] .is-personalizable:not(.header) .personalize-header .btn.btn-link:not(:disabled):not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane) svg {\n  color: ').concat("#ffffff"!==s.tabHeaderColor?"#ffffff":"#000000"," !important;\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu.is-open:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) {\n  color: #ffffff !important;\n  border-color: #ffffff !important;\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu.is-open:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) .icon {\n  color: ").concat(s.lightest," !important;\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu.is-open:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-secondary.btn-menu.is-open:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) {\n  background-color: #28282A;\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-secondary:not(.go-button):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) svg.icon {\n  color: ").concat(s.lightest,';\n}\n\nhtml[class*="new-"] .is-personalizable:not(.header):not(.hero-widget) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\nhtml[class*="new-"] .is-personalizable:not(.header):not(.hero-widget) .btn-link:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ').concat("#ffffff"!==s.tabHeaderColor?s.darker:s.btnBgHoverColor," !important;\n  color: ").concat("#ffffff"!==s.tabHeaderColor?s.btnHoverColor:s.btnTertiaryHoverColor,";\n}\n\nhtml.theme-new-dark .is-personalizable:not(.header):not(.hero-widget) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.header):not(.hero-widget) .btn-link:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(s.btnTertiaryBgHoverColor,";\n  color: ").concat(s.btnTertiaryHoverColor,";\n}\n\nhtml.theme-new-dark .is-personalizable:not(.hero-widget) .btn-tertiary:not:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) svg.icon,\nhtml.theme-new-dark .is-personalizable .btn-link:hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable .btn-link:hover:not(:disabled) svg.icon,\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) svg.icon,\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-link:hover:not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.header) .btn-link:hover:not(:disabled) svg.icon {\n  color: ").concat(s.lightest,';\n}\n\nhtml[class*="new-"] .is-personalizable .btn-tertiary:hover:not(:disabled):not(.close):not(.btn-filter):not(.personalize-actionable):not(.destructive) svg.icon {\n  color: ').concat(s.btnTertiaryHoverColor,";\n}\n\nhtml.theme-new-dark .is-personalizable:not(.hero-widget) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled),\nhtml.theme-new-dark .is-personalizable:not(.hero-widget) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) svg.icon {\n  color: ").concat(s.contrast," !important;\n}\n\nhtml.theme-new-dark .is-personalizable:not(.hero-widget) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) svg.icon {\n  color: ").concat(s.contrast," !important;\n}\n\nbutton.is-personalizable button:focus:not(.hide-focus),\n.is-personalizable a.btn:focus:not(.hide-focus),\na.btn.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-menu:focus:not(.hide-focus),\na.btn-menu.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-icon:focus:not(.hide-focus),\na.btn-icon.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-tertiary:focus:not(.hide-focus),\na.btn-tertiary.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-close:focus:not(.hide-focus),\na.btn-close.is-personalizable:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(s.base,",\n    0 0 4px 2px rgba(").concat(e.r,", ").concat(e.g,", ").concat(e.b,", 0.3) !important;\n}\n\n.is-personalizable:not(.hero-widget) .btn-menu:not(.btn-primary):not(.btn-secondary).is-open,\n.btn-menu:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open,\n.btn-actions:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open {\n  color: ").concat(s.btnMenuColor,";\n}\n\n.is-personalizable:not(.hero-widget) .btn-menu:not(.btn-primary):not(.btn-secondary).is-open .icon,\n.btn-menu:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open .icon,\n.btn-actions:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open .icon {\n  color: ").concat(s.btnMenuColor,";\n}\n\n.is-personalizable:not(.application-menu) .btn-actions:not(.btn-primary):not(.btn-secondary).is-open .icon {\n  color: ").concat(s.btnActionsHoverColor,";\n}\n\n.is-personalizable .hyperlink:not(.today),\n.hyperlink:not(.today).is-personalizable {\n  color: ").concat(s.hyperlinkText," !important;\n  opacity: 0.8;\n}\n\n.is-personalizable .hyperlink:not(.today):hover,\n.hyperlink:not(.today).is-personalizable:hover {\n  color: ").concat(s.hyperlinkTextHover," !important;\n}\n\n.is-personalizable .hyperlink:not(.today):focus:not(.hide-focus),\n.hyperlink:not(.today).is-personalizable:focus:not(.hide-focus) {\n  border-color: ").concat(s.hyperlinkText,";\n  box-shadow: 0 0 4px 3px rgba(").concat(t.r,", ").concat(t.g,", ").concat(t.b,", 0.3);\n}\n\n.is-personalizable button:not(.btn-monthyear-pane):not(.btn-editor) svg.ripple-effect,\nbutton:not(.btn-monthyear-pane):not(.btn-editor).is-personalizable svg.ripple-effect,\n.is-personalizable a svg.ripple-effect,\na.is-personalizable svg.ripple-effect {\n  background-color: ").concat(s.base," !important;\n}\n\n.is-personalizable .btn-primary svg.ripple-effect,\n.btn-primary.is-personalizable svg.ripple-effect,\n.is-personalizable .btn-secondary svg.ripple-effect,\n.btn-secondary.is-personalizable svg.ripple-effect {\n  background-color: ").concat(s.contrast," !important;\n  border-color: ").concat(s.contrast," !important;\n}\n\n.is-personalizable .count-container .instance-count svg.icon {\n  background-color: ").concat(s.base," !important;\n}\n\n.is-personalizable.has-more-button.tab-container.horizontal {\n  &::after {\n    background-image:\n      linear-gradient(to left,\n        rgba($header-bg-color, 1),\n        rgba($header-bg-color, 0));\n    height: 39px;\n  }\n}\n\n.tab-container.module-tabs.is-personalizable {\n  border-top: 1px solid ").concat(s.tabBorderColor,";\n  border-bottom: 1px solid ").concat(s.tabBorderColor,";\n}\n\n.tab-container.is-personalizable.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,\n.tab-container.personalize-header.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,\n.tab-container.is-personalizable.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled).is-selected,\n.tab-container.personalize-header.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled).is-selected,\n.header.is-personalizable .tab-container.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,\n.header.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected,\n.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  border-color: ").concat(s.headerTabsSelectedTextColor," !important;\n}\n\n.tab-container.is-personalizable.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,\n.tab-container.personalize-header.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,\n.header.is-personalizable .tab-container.header-tabs:not(.alternate) .tab-focus-indicator.is-visible,\n.personalize-header.tab-container.header-tabs:not(.alternate) .tab-focus-indicator.is-visible {\n  box-shadow: ").concat(s.tabFocusBoxShadow," !important;\n}\n\n.header.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled).is-selected {\n  box-shadow: none !important;\n}\n\n.tab-container.is-personalizable.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled),\n.tab-container.is-personalizable.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled),\n.header.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled):not(.is-selected),\n.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled) {\n  color: ").concat(s.contrast,";\n  background-color: ").concat(s.tabHoverColor,";\n  border-bottom: 4px solid ").concat(s.contrast,";\n}\n\n.module-tabs.is-personalizable .tab:not(:first-child) {\n  border-left: 1px solid ").concat(s.tabDivider," !important;\n}\n\n.module-tabs.is-personalizable {\n  background-color: ").concat(s.darker," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-selected {\n  background-color: ").concat(s.tabSelectedColor," !important;\n  color: ").concat(s.moduleTabsSelectedTextColor," !important;\n}\n\n.module-tabs.is-personalizable .tab:not(.is-selected),\n.module-tabs.is-personalizable .tab-more,\n.module-tabs.is-personalizable .tab-more .more-text,\n.module-tabs.is-personalizable .add-tab-button,\n.module-tabs.is-personalizable .toolbar {\n  background-color: ").concat(s.tabColor," !important;\n  color: ").concat(s.tabTextColor," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button svg.icon {\n  color: ").concat(s.headerIconColor," !important;\n}\n\n.tab-container.module-tabs.has-toolbar .tab-list-container + .toolbar .more .btn-actions:hover {\n  background-color: ").concat(s.toolbarBtnHoverColor," !important;\n}\n\n.module-tabs.is-personalizable .tab {\n  color: ").concat(s.contrast,";\n}\n\n.tab-container.module-tabs .tab-list .tab.dismissible:hover svg.icon.close {\n  color: ").concat(s.tabCloseInactiveColor,";\n}\n\n.tab-container.module-tabs.is-personalizable .tab.dismissible svg.close {\n  color: ").concat(s.tabCloseInactiveColor,";\n}\n\n.tab-container.module-tabs.is-personalizable .tab.dismissible svg.close:hover {\n  color: ").concat(s.tabCloseHoverColor,";\n}\n\n.is-personalizable.tab-container.module-tabs .tab-more,\n.is-personalizable.tab-container.module-tabs .add-tab-button {\n  color: ").concat(s.contrast,";\n}\n\n.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected {\n  background-color: ").concat(s.tabVerticalSelectedColor," !important;\n}\n\n.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab a {\n  font-weight: ").concat(s.tabTextWeight," !important;\n}\n\n.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected a {\n  color: ").concat(s.tabVerticalSelectedTextColor," !important;\n  font-weight: ").concat(s.tabTextSelectedWeight," !important;\n}\n\n.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab:not(.is-disabled):hover {\n  background-color: ").concat(s.tabVerticalHoverColor," !important;\n}\n\n.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected:hover {\n  background-color: ").concat(s.tabVerticalSelectedColor," !important;\n}\n\n.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab:not(.is-disabled):hover a {\n  color: ").concat(s.tabHoverTextColor," !important;\n}\n\n.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected:hover a {\n  color: ").concat(s.tabVerticalSelectedTextColor," !important;\n}\n\n.tab-container.module-tabs.is-personalizable .tab-focus-indicator.is-visible:is(.is-selected),\n.tab-container.vertical.is-personalizable .tab-focus-indicator.is-visible:is(.is-selected) {\n  border-color: transparent !important;\n  box-shadow: none !important;\n}\n\n.tab-container.module-tabs.is-personalizable .tab-focus-indicator.is-visible:not(.is-selected) {\n  border-color: ").concat(s.tabFocusIndicator," !important;\n  box-shadow: ").concat(s.tabFocusBoxShadow," !important;\n}\n\n.tab-container.vertical.is-personalizable .tab-focus-indicator.is-visible:not(.is-selected) {\n  border-color: ").concat(s.tabFocusIndicatorVert," !important;\n  box-shadow: ").concat(s.tabFocusBoxShadowVert," !important;\n}\n\n.builder-header.is-personalizable {\n  background-color: ").concat(s.lighter,";\n}\n\n.header.is-personalizable {\n  background-color: ").concat(s.tabHeaderColor,";\n  border-bottom: 1px solid ").concat(s.headerTabBorder,";\n}\n\n.is-personalizable .personalize-header,\n.is-personalizable.tab-container {\n  background-color: ").concat(s.tabHeaderColor,";\n  border-bottom: 1px solid ").concat(s.headerTabBorder,";\n}\n\n.scrollable-flex-header .breadcrumb {\n  background-color: ").concat(s.base,";\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) {\n  background-color: ").concat(s.tabHeaderColor,";\n}\n\n.header.is-personalizable .title {\n  color: ").concat(s.contrast," !important;\n}\n\n.header.is-personalizable h1,\n.header.is-personalizable h2,\n.header.is-personalizable h3 {\n  color: ").concat(s.headerTextColor," !important;\n}\n\n.object-count.personalize-text {\n  color: ").concat(s.contrast," !important;\n}\n\n.header.is-personalizable button svg.ripple-effect {\n  background-color: ").concat(s.contrast," !important;\n}\n\n.header.is-personalizable button:not(:disabled),\n.header.is-personalizable button:not(:disabled):not(.close) .icon,\n.header.is-personalizable button:not(:disabled) .app-header.icon > span,\n.subheader.is-personalizable button:not(:disabled):not(.searchfield-category-button),\n.subheader.is-personalizable button:not(:disabled):not(.searchfield-category-button) .icon,\n.subheader.is-personalizable button:not(:disabled):not(.searchfield-category-button) .app-header.icon > span,\n.is-personalizable .personalize-subheader button:not(:disabled),\n.is-personalizable .personalize-subheader button:not(:disabled):not(.close):not(.notification-close) .icon,\n.is-personalizable .personalize-subheader button:not(:disabled):not(.close):not(.notification-close) > span,\n.is-personalizable .personalize-subheader button:not(:disabled) .app-header.icon > span,\n.tab-container.module-tabs.is-personalizable .toolbar div:is(.more) [class^='btn']:not(.btn-menu) .icon  {\n  color: ").concat(s.headerIconColor," !important;\n}\n\n.header .flex-toolbar [class^='btn']:hover:not(:disabled):not(.close):not(.btn-filter):not(.personalize-actionable),\n.header .flex-toolbar [class^='btn']:hover:not(:disabled):not(.close):not(.btn-filter):not(.personalize-actionable) svg.icon {\n  color: ").concat(s.btnHoverColor,' !important;\n}\n\nhtml[class*="theme-new"] .header.is-personalizable button:not(.close):not(:disabled):hover .icon {\n  color: ').concat(s.btnTertiaryHoverColorHeader,' !important;\n}\n\nhtml[class*="-dark"] .is-personalizable .personalize-subheader button:not(:disabled),\nhtml[class*="-dark"] .is-personalizable .subheader button:not(:disabled),\nhtml[class*="-dark"] .is-personalizable .personalize-subheader button:not(:disabled) .icon,\nhtml[class*="-dark"] .is-personalizable .subheader button:not(:disabled) .icon {\n  color: #ffff !important;\n}\n\n.header.is-personalizable button:not(:disabled) .app-header.icon > span,\n.is-personalizable .personalize-subheader button:not(:disabled) .app-header.icon > span {\n  background-color: ').concat(s.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable:not(.has-alternate-tabs) .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled):hover {\n  border-bottom: 4px solid ").concat(s.contrast,';\n}\n\nhtml[class*="theme-new"] .header.is-personalizable:not(.has-alternate-tabs) .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled):hover {\n  border-bottom: 2px solid ').concat(s.headerTabsTextColor,';\n}\n\nhtml[class*="theme-new"] .header.is-personalizable:not(.has-alternate-tabs) .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:is(.is-selected):not(.is-disabled):hover {\n  background-color: transparent;\n}\n\n.header.is-personalizable .tab-container.horizontal > .tab-list-container .tab:not(.is-disabled):hover {\n  border-bottom: 4px solid ').concat(s.base,';\n}\n\nhtml[class*="theme-new-"] .header.is-personalizable button:not(:disabled):hover .app-header.icon > span,\nhtml[class*="theme-new-"] .header.is-personalizable .toolbar [class^=\'btn\']:hover:not(.go-button):not(.close):not(.searchfield-category-button):not([disabled]),\nhtml[class*="theme-new-"] .subheader.is-personalizable button:not(.go-button):not(.close):not(.searchfield-category-button):not(:disabled):hover,\nhtml[class*="theme-new-"] .subheader.is-personalizable button:not(:disabled):hover .app-header.icon > span,\nhtml[class*="theme-new-"] .subheader.is-personalizable .toolbar [class^=\'btn\']:hover:not(.go-button):not(.close):not(.searchfield-category-button):not([disabled]),\nhtml[class*="theme-new-"] .personalize-subheader button:not(.go-button):not(.close):not(.searchfield-category-button):not(:disabled):hover,\nhtml[class*="theme-new-"] .personalize-subheader button:not(:disabled):hover .app-header.icon > span,\nhtml[class*="theme-new-"] .personalize-subheader .toolbar [class^=\'btn\']:hover:not(.go-button):not(.close):not(.searchfield-category-button):not([disabled]) {\n  color: ').concat(s.btnTertiaryHoverColor," !important;\n  background-color: ").concat(s.btnTertiaryBgHoverColor,' !important;\n  opacity: 1;\n}\n\nhtml[class*="theme-new-"] .header.is-personalizable button:not(.go-button):not(.close):not(.searchfield-category-button):not(:disabled):hover {\n  background-color: ').concat(s.btnTertiaryBgHoverColorHeader," !important;\n  color: ").concat(s.btnTertiaryHoverColorHeader," !important;\n}\n\n.header .flex-toolbar [class^='btn'][disabled] {\n  color: ").concat(s.btnDisabledColor,";\n}\n\n.header.is-personalizable .buttonset .searchfield-wrapper.non-collapsible.toolbar-searchfield-wrapper.has-categories .btn-icon.close:hover {\n  background-color: ").concat(s.contrast," !important;\n}\n\nhtml.theme-new-dark .header.is-personalizable .buttonset .searchfield-wrapper.non-collapsible.toolbar-searchfield-wrapper.has-categories .btn-icon.close,\nhtml.theme-new-dark .header.is-personalizable .buttonset .searchfield-wrapper.non-collapsible.toolbar-searchfield-wrapper.has-categories .btn-icon.close svg.close,\nhtml.theme-classic-dark .header.is-personalizable .buttonset .searchfield-wrapper.non-collapsible.toolbar-searchfield-wrapper.has-categories .btn-icon.close,\nhtml.theme-classic-dark .header.is-personalizable .buttonset .searchfield-wrapper.non-collapsible.toolbar-searchfield-wrapper.has-categories .btn-icon.close svg.close {\n  background-color: transparent !important;\n}\n\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(s.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(s.lightest,";\n  border-color:").concat(s.lightest,";\n  color: ").concat(s.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected:not(.is-disabled),\n.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  color: ").concat(s.headerTabsSelectedTextColor," !important;\n  opacity: 1;\n  background-color: transparent;\n}\n\n.header.is-personalizable .flex-toolbar .has-collapse-button .collapse-button {\n  background-color: transparent;\n}\n\n.header.is-personalizable .flex-toolbar .has-collapse-button .collapse-button:focus:not(.hide-focus) {\n  box-shadow: none !important;\n  border-color: ").concat(s.borderActiveSearchHeader,";\n}\n\nhtml.theme-new-dark .header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  color: ").concat(s.contrast," !important;\n}\n\n.header.is-personalizable .tab-container.header-tabs:not(.alternate) .tab-more::before,\n.tab-container.is-personalizable.header-tabs:not(.alternate) .tab-more::before {\n  background-color: ").concat(s.contrast,";\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled),\n.header.is-personalizable .tab-container.header-tabs:not(.alternate) .tab-more svg.icon,\n.tab-container.is-personalizable .tab-more svg.icon,\n.is-personalizable.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled),\n.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled)  {\n  color: ").concat(s.contrast," !important;\n  opacity: .8;\n}\n\nhtml.theme-new-dark .personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled),\nhtml.theme-classic-dark .personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled) {\n  color: #fff !important;\n  opacity: .8;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab,\n.is-personalizable.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab,\n.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab {\n  color: ").concat(s.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled):not(.is-selected),\n.is-personalizable.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled),\n.personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:hover:not(.is-disabled) {\n  color: ").concat(s.contrast," !important;\n  opacity: 1;\n}\n\nhtml.theme-new-dark .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled),\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)  {\n  color: ").concat(s.contrast,' !important;\n  opacity: 1;\n}\n\nhtml[class*="theme-new-"] .header.is-personalizable.has-tabs .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled),\nhtml[class*="theme-new-"] .is-personalizable.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled),\nhtml[class*="theme-new-"] .personalize-header.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab:not(.is-disabled) {\n  opacity: 1;\n}\n\n.is-personalizable .count-container .instance-count .count {\n  border-color: ').concat(s.contrast," !important;\n  color: ").concat(s.contrast,' !important;\n}\n\nhtml[class*="theme-new-"] .is-personalizable .count-container .instance-count .title {\n  color: ').concat(s.contrast," !important;\n}\n\nhtml.theme-classic-dark .is-personalizable .count-container .instance-count .count {\n  border-color: ").concat(s.subtext," !important;\n  color: ").concat(s.subtext," !important;\n}\n\n.header.is-personalizable .page-title {\n  color: ").concat(s.contrast,";\n}\n\n.header.is-personalizable .flex-toolbar [class^='btn'][disabled] .icon,\n.header.is-personalizable .btn:not(.searchfield-category-button)[disabled] span {\n  color: ").concat(s.btnDisabledColor,";\n}\n\n.header.is-personalizable button:not(:disabled),\n.subheader.is-personalizable button:not(:disabled):not(.searchfield-category-button) {\n  color: ").concat(s.contrast,";\n}\n\n.header.is-personalizable  .flex-toolbar [class^='btn']:focus:not(.hide-focus) .icon {\n  color: ").concat(s.contrast," !important;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)::before {\n  background-color: ").concat(s.contrast,";\n}\n\n.header.is-personalizable.has-tabs .animated-bar {\n  background-color: ").concat(s.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-list-container .tab.is-selected:not(.is-disabled):hover::before {\n  background-color: ").concat(s.contrast," !important;\n}\n\n.header.is-personalizable .buttonset .toolbar-searchfield-wrapper:not(.is-open) svg.icon:not(.close),\n.header.is-personalizable .toolbar-searchfield-wrapper:not(.is-open) .icon:not(.close),\n.header .toolbar-searchfield-wrapper .searchfield,\n.masthead .toolbar-searchfield-wrapper .searchfield,\n.header.is-personalizable .toolbar [class^='btn']:focus .icon {\n  color: ").concat(s.contrast,";\n}\n\n.header .toolbar [class^='btn']:hover:not(.go-button):not(.close):not(.searchfield-category-button),\n.header .btn-icon:hover:not([disabled]) {\n  background-color: ").concat(s.btnBgHoverColor,";\n}\n\n.header .btn-actions:hover:not([disabled]) {\n  background-color: ").concat(s.btnBgHoverColor,";\n}\n\n.header.alabaster .toolbar [class^='btn']:hover:not(.go-button):not(.searchfield-category-button) {\n  background-color: #E6F1FD !important;\n}\n\n.personalize-subheader.scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink,\n.personalize-subheader..scrollable-flex-header .breadcrumb:not(.alternate) .breadcrumb-text,\n.personalize-subheader.scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink,\n.personalize-subheader.scrollable-flex-header .breadcrumb:not(.alternate) .breadcrumb-list li::after,\n.personalize-subheader.scrollable-flex-header .breadcrumb:not(.alternate) ol li::after {\n  color: ").concat(s.contrast,";\n}\n\n.personalize-subheader.scrollable-flex-header .breadcrumb .hyperlink:focus:not([disabled]) {\n  border: 1px solid ").concat(s.contrast,";\n}\n\n.personalize-subheader.scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink:hover:not([disabled]) {\n  border-bottom: 1px solid ").concat(s.contrast,";\n}\n\n.header .toolbar-searchfield-wrapper.active.has-focus .searchfield {\n  border-color: ").concat(s.borderActiveSearchHeader,';\n}\n\nhtml[class*="-dark"] .header .toolbar-searchfield-wrapper.active.has-focus .searchfield {\n  border-color: ').concat(s.contrast,";\n}\n\n.header.is-personalizable .btn-actions:not(.btn-primary):not(.btn-secondary).is-open .icon,\n.header.is-personalizable .wizard-header .tick,\n.header.is-personalizable .wizard-header .tick .label,\n.header.is-personalizable .wizard-header a.tick:hover:not(.current):not(.is-disabled):not([disabled]) .label {\n  color: ").concat(s.contrast,";\n}\n\n.header.is-personalizable .btn-menu.is-open,\n.header.is-personalizable .btn-actions.is-open {\n  opacity: 1;\n  background-color: ").concat(s.btnTertiaryBgHoverColorHeader," !important;\n  color: ").concat(s.btnTertiaryHoverColorHeader," !important;\n}\n\n.header.is-personalizable .wizard-header .tick:focus .label {\n  border-color: ").concat(s.lighter,";\n}\n\n.header.is-personalizable .wizard-header .tick.current::before {\n  border-color: ").concat(s.light,";\n  border-color: ").concat(s.contrast,";\n}\n\n.is-personalizable .personalize-text {\n  color: ").concat(s.contrast,";\n}\n\nhtml[class*='classic-contrast'] .is-personalizable .tab-container.header-tabs.alternate > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  border-color: ").concat(s.light,";\n}\n\n.is-personalizable .label + .personalize-text.data {\n  color: ").concat(s.contrast,";\n}\n\n.header.is-personalizable .wizard-header .tick::after {\n  background-color: ").concat(s.base,";\n  border: 2px solid ").concat(s.contrast,";\n}\n\n.header.is-personalizable .wizard-header .bar,\n.header.is-personalizable .wizard-header .tick.complete {\n  background-color: ").concat(s.darkest,";\n}\n\n.header.is-personalizable .wizard-header .tick.complete::after,\n.header.is-personalizable .wizard-header .completed-range {\n  background-color: ").concat(s.contrast,";\n}\n\n.header.is-personalizable .wizard-header .tick.complete .label {\n  color: ").concat(s.contrast,";\n}\n\n.header.is-personalizable .wizard-header .tick.current {\n  box-shadow: none;\n}\n.header.is-personalizable .wizard-header .tick.current::after {\n  background-color: ").concat(s.contrast,";\n  border-color: ").concat(s.contrast,";\n}\n\n.subheader.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(s.dark,";\n  border-color: ").concat(s.dark,";\n  color: ").concat(s.contrast,";\n}\n\n.subheader.is-personalizable .go-button.is-personalizable:not(.hide-focus) {\n  box-shadow: 0 0 0 1px #FAFAFA, 0 0 0 2px ").concat(s.darkest,", 0 0 4px 2px rgba(41, 41, 41, 0.3);\n}\n\n.is-personalizable .breadcrumb .hyperlink,\n.breadcrumb.is-personalizable .hyperlink {\n  color: ").concat(s.theme.text,";\n}\n.is-personalizable .breadcrumb .hyperlink:hover,\n.breadcrumb.is-personalizable .hyperlink:hover {\n  color: ").concat(s.theme.text,";\n}\n.is-personalizable .breadcrumb .hyperlink:focus:not(.hide-focus),\n.breadcrumb.is-personalizable .hyperlink:focus:not(.hide-focus) {\n  box-shadow: none;\n}\n.is-personalizable .breadcrumb .hyperlink[disabled],\n.breadcrumb.is-personalizable .hyperlink[disabled],\n.is-personalizable .breadcrumb .hyperlink[disabled]:hover,\n.breadcrumb.is-personalizable .hyperlink[disabled]:hover {\n  color: ").concat(s.theme.disabledText,";\n}\n\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate),\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) {\n  background-color: ").concat(s.base,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before,\n.scrollable-flex-header.is-personalizable .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before {\n  background-image: linear-gradient(to right, ").concat(s.base,", ").concat(xt.hexToRgba(s.base,0),");\n}\nhtml[dir='rtl'] .is-personalizable .scrollable-flex-header .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before,\nhtml[dir='rtl'] .scrollable-flex-header.is-personalizable .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before {\n  background-image: linear-gradient(to right, ").concat(xt.hexToRgba(s.base,0),", ").concat(s.base,");\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .hyperlink {\n  color: ").concat(s.contrast,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink:hover,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .hyperlink:hover  {\n  color: ").concat(s.contrast,";\n}\n\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .btn-actions.is-open .icon,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .btn-actions.is-open .icon {\n  color: ").concat(s.contrast,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .btn-actions:focus:not(.hide-focus),\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .btn-actions:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent, 0 0 0 1px ").concat(s.contrast,", 0 0 1px 2px ").concat(xt.hexToRgba(s.contrast,.3)," !important;\n}\n\n.module-tabs.is-personalizable .tab-more {\n  border-left-color: ").concat(s.tabDivider," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-open {\n  background-color: ").concat(s.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-selected {\n  background-color: ").concat(s.base," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield {\n  background-color: ").concat(s.hover," !important;\n  border-bottom-color: ").concat(s.hover," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield-category-button {\n  background-color: ").concat(s.hover," !important;\n  border-bottom-color: ").concat(s.hover," !important;\n}\n\n.subheader.is-personalizable {\n  background-color: ").concat(s.lighter," !important;\n}\n\n.builder .sidebar .header {\n  border-right: 1px solid ").concat(s.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab:not(.is-selected):hover,\n.module-tabs.is-personalizable .tab-more:hover {\n  background-color: ").concat(s.tabHoverColor," !important;\n  color: ").concat(s.contrast,";\n}\n\n.is-personalizable.tab-container.module-tabs .tab .icon {\n  color: ").concat(s.contrast,";\n}\n\n.module-tabs.has-toolbar.is-personalizable .tab-list-container + .toolbar {\n  border-left-color: ").concat(s.tabDivider,' !important;\n}\n\n.module-tabs.is-personalizable [class^="btn"] {\n  background-color: transparent;\n  color: ').concat(s.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled {\n  background-color: ").concat(s.darker," !important;\n  color: ").concat(s.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled > svg {\n  fill: ").concat(s.contrast," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button {\n  border-left-color: ").concat(s.tabDivider," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button:hover {\n  background-color: ").concat(s.toolbarBtnHoverColor," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > .searchfield {\n  color: ").concat(s.contrast,";\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > svg {\n  fill: ").concat(s.contrast," !important;\n}\n\n.header.is-personalizable .toolbar [class^='btn'][disabled],\n.header.is-personalizable .toolbar [class^='btn'][disabled] .icon,\n.header.is-personalizable .toolbar [class^='btn'][disabled] span {\n  color: ").concat(s.btnDisabledColor,";\n}\n\n.header .toolbar [class^='btn']:focus:not(.hide-focus):not(.collapse-button) {\n  border-color: ").concat(s.btnMenuColor,";\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::before,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to right, ").concat(s.tabHeaderColor," , ").concat(xt.hexToRgba(s.base,0),") !important;\n}\n\nhtml[dir='rtl'] .is-personalizable .tab-container.header-tabs:not(.alternate)::before,\nhtml[dir='rtl'] .is-personalizable.tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to left, ").concat(s.tabHeaderColor,", ").concat(xt.hexToRgba(s.base,0),") !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::after,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to right, ").concat(xt.hexToRgba(s.base,0),", ").concat(s.tabHeaderColor,") !important;\n}\n\nhtml[dir='rtl'] .is-personalizable .tab-container.header-tabs:not(.alternate)::after,\nhtml[dir='rtl'] .is-personalizable.tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to left, ").concat(xt.hexToRgba(s.base,0),", ").concat(s.tabHeaderColor,") !important;\n}\n\n.is-personalizable.header .section-title {\n  color: ").concat(s.contrast,";\n}\n\n.is-personalizable.header button.application-menu-trigger:hover:not(:disabled) .icon.app-header.go-back > span {\n  background-color: ").concat(s.contrast," !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate),\n.is-personalizable.tab-container.header-tabs:not(.alternate) {\n  border-bottom-color: ").concat(s.tabBottomBorderColor,";\n}\n\n.tab-container.is-personalizable.module-tabs .tab a {\n  font-weight: ").concat(s.tabTextWeight," !important;\n}\n\n.tab-container.is-personalizable.module-tabs .tab.is-selected a {\n  font-weight: ").concat(s.tabTextSelectedWeight,' !important;\n}\n\nhtml[class*="theme-new-"]:not(.theme-new-dark) .is-personalizable:not(.header) .btn-icon:not(.destructive):not(:disabled):hover {\n  background-color: ').concat(s.lightestPalette,';\n}\n\nhtml[class*="theme-new-"] .is-personalizable:not(.header) .content.personalize-header .btn-icon:not(.destructive):not(:disabled):hover {\n  background-color: ').concat("#ffffff"!==s.tabHeaderColor?s.darker:s.btnBgHoverColor,' !important;\n}\n\nhtml[class*="theme-new-"] .is-personalizable:not(.header) .btn-icon:not(.destructive):not(:disabled):hover .icon {\n  color: ').concat(s.btnTertiaryHoverColor,';\n}\n\nhtml[class*="-dark"] .is-personalizable .btn-tertiary:not(.destructive):not(:disabled):hover,\nhtml[class*="-dark"] .is-personalizable .btn-link:not(:disabled):hover,\nhtml[class*="-dark"] .is-personalizable:not(.header) .btn-menu:not(.btn-secondary):not(:disabled):hover,\nhtml[class*="-dark"] .is-personalizable:not(.header) .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ').concat(s.btnTertiaryBgHoverColor,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  border: 1px solid ').concat(s.lighter,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable button:focus:not(.hide-focus),\nhtml[class*="theme-new-"] .application-menu.is-personalizable .hyperlink:focus:not(.hide-focus)::after {\n  border-color: ').concat(s.contrast," !important;\n  box-shadow: none !important;\n}\n\n.application-menu.is-personalizable .accordion-header.has-filtered-children > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.has-filtered-children.is-focused {\n  color: ").concat(s.contrast," !important;\n}\n\nhtml[dir='rtl'] .application-menu.is-personalizable {\n  background-color: ").concat(s.lighter,";\n  border-left: ").concat(s.light,';\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable button svg.ripple-effect {\n  background-color: ').concat(s.contrast,' !important;\n}\n\nhtml[class*="theme-new"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused.is-expanded {\n  border-color: transparent !important;\n}\n\nhtml[class*="theme-new-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-focused::before {\n  border-color: ').concat(s.contrast," !important;\n}\n\n.is-personalizable.tab-container,\n.is-personalizable.tab-container .tab-list-container {\n  background-color: ").concat(s.tabColor," !important;\n}\n\n.is-personalizable.tab-container.vertical,\n.is-personalizable.tab-container.vertical > .tab-list-container {\n  background-color: ").concat(s.tabVerticalColor," !important;\n  min-width: 249px;\n  width: 249px;\n}\n\n.is-personalizable.tab-container.vertical {\n  border-right: 1px solid ").concat(s.verticalTabBorder,' !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate) > .tab-list-container .tab-list .tab.is-disabled,\n.is-personalizable.tab-container.header-tabs:not(.alternate) > .tab-list-container .tab-list .tab.is-disabled {\n  opacity: .7;\n}\n\nhtml[class*="theme-classic-"] .is-personalizable .tab-container .tab-list-container .tab-list .tab.is-disabled,\nhtml[class*="theme-classic-"] .tab-container.is-personalizable .tab-list-container .tab-list .tab.is-disabled {\n  opacity: .7 !important;\n}\n\n.is-personalizable .personalize-subheader {\n  background-color: ').concat(s.lighter," !important;\n  border-bottom: 1px solid ").concat(s.headerTabBorder,";\n}\n\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb {\n  background-color: ").concat(s.lighter,";\n}\n\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb.truncated .breadcrumb-list::before,\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb.truncated ol::before {\n  background-image: linear-gradient(to right, ").concat(s.lighter,", ").concat(s.lighter,"80);\n}\n\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .hyperlink,\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .btn-actions .icon,\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-overflow-container::after,\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-list li::after,\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb ol li::after  {\n  color: ").concat(s.contrast," !important;\n}\n\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .hyperlink:hover {\n  border-bottom: 1px solid ").concat(s.contrast,"\n}\n\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb {\n  background-color: ").concat(s.lighter,";\n}\n\n.is-personalizable .section-wizard {\n  background-color: ").concat(s.lighter," !important;\n}\n\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb.truncated .breadcrumb-list::before,\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb.truncated ol::before {\n  background-image: linear-gradient(to right, ").concat(s.lighter,", ").concat(s.lighter,"80);\n}\n\n.is-personalizable .section-wizard {\n  background-color: ").concat(s.lighter," !important;\n}\n\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .hyperlink,\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .btn-actions .icon,\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-overflow-container::after,\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-list li::after,\n.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb ol li::after  {\n  color: ").concat(s.contrast,";\n}\n\n.is-personalizable .section-wizard {\n  background-color: ").concat(s.lighter," !important;\n}\n\n.is-personalizable .personalize-subheader  p:not(.notification-text),\n.personalize-subheader.is-personalizable p:not(.notification-text) {\n  color: ").concat(s.contrast," !important;\n}\n\n.is-personalizable .personalize-subheader  h1,\n.personalize-subheader.is-personalizable h1,\n.is-personalizable .personalize-subheader h2,\n.personalize-subheader.is-personalizable h2 {\n  color: ").concat(s.contrast,' !important;\n}\n\nhtml[class*="-dark"] .is-personalizable .personalize-subheader h1,\nhtml[class*="-dark"] .is-personalizable .personalize-subheader h2 {\n  color: #fff !important;\n}\n\nhtml[class*="-dark"] .is-personalizable .subheader h1,\nhtml[class*="-dark"] .is-personalizable .subheader h2 {\n  color: #fff !important;\n}\n\n.is-personalizable .personalize-subheader button:not(.notification-close) .icon:not(.notification-icon),\n.personalize-subheader.is-personalizable button:not(.notification-close) .icon:not(.notification-icon) {\n  color: ').concat(s.contrast," !important;\n}\n\n.is-personalizable .personalize-subheader .toolbar-searchfield-wrapper.active.is-open *,\n.personalize-subheader.is-personalizable .toolbar-searchfield-wrapper.active.is-open * {\n  color: ").concat(s.theme.text," !important;\n}\n\n.is-personalizable .personalize-actionable,\n.is-personalizable .personalize-actionable svg,\n.is-personalizable .personalize-actionable .icon,\n.is-personalizable .personalize-header .personalize-chart-targeted .label,\n.is-personalizable .personalize-header .info-message .icon,\n.is-personalizable .personalize-header .info-message p,\n.is-personalizable .personalize-header .btn-icon .icon {\n  color: ").concat(s.contrast,' !important;\n}\n\nhtml[class*="theme-new-"] .is-personalizable .personalize-actionable:hover:not([disabled]):not(.personalize-actionable-disabled):not(a) ,\nhtml[class*="theme-new-"] .is-personalizable .personalize-actionable:hover:not([disabled]):not(.personalize-actionable-disabled) svg,\nhtml[class*="theme-new-"] .is-personalizable .personalize-actionable:hover:not([disabled]):not(.personalize-actionable-disabled) .icon  {\n  color: ').concat(s.btnHoverColor,' !important;\n  opacity: 1;\n}\n\nhtml[class*="theme-new-"] .is-personalizable .personalize-actionable:hover:not([disabled]):not(.personalize-actionable-disabled):not(a) {\n  color: ').concat(s.btnHoverColor," !important;\n  background-color: ").concat(s.btnBgHoverColor,';\n  opacity: 1;\n}\n\n.is-personalizable .btn-icon.personalize-actionable {\n  height: 34px;\n  width: 34px;\n}\n\nhtml[class*="theme-new-"] .is-personalizable .btn-icon.personalize-actionable:hover:not([disabled]) {\n  background-color: ').concat(s.btnBgHoverColor," !important;\n}\n\n.is-personalizable .personalize-actionable.is-focused:not(.hide-focus),\n.is-personalizable .personalize-actionable:focus:not(.hide-focus) {\n  border-color: ").concat(s.btnFocusBorderColor," !important;\n  box-shadow: 0 0 4px 3px rgba(255, 255, 255, 0.2);\n}\n\n.is-personalizable .personalize-actionable.hyperlink:focus:not(.hide-focus)::after {\n  border-color: ").concat(s.contrast," !important;\n  opacity: 1;\n  box-shadow: 0 0 4px 3px rgba(255, 255, 255, 0.2);\n}\n\n.is-personalizable .personalize-vertical-border {\n  border-color: ").concat(s.light,";\n}\n\n.is-personalizable .personalize-horizontal-top-border {\n  border-top: 1px solid: ").concat(s.darkest,";\n}\n\n.is-personalizable .personalize-chart-targeted .total.bar {\n  background-color: ").concat(s.btnDisabledColor,";\n}\n\n.is-personalizable .personalize-chart-targeted .chart-percent-text,\n.is-personalizable .personalize-chart-targeted .label {\n  color: ").concat(s.contrast,";\n}\n\n.is-personalizable .info-message,\n.is-personalizable .info-message .icon,\n.is-personalizable .info-message p {\n  color: ").concat(s.contrast," !important;\n}\n\n.is-personalizable .personalize-actionable-disabled,\n.is-personalizable .personalize-actionable-disabled:hover {\n  opacity: .4 !important;\n  cursor: default;\n}\n\n.subheader.is-personalizable .toolbar [class^='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus) {\n  box-shadow: ").concat(s.focusBoxShadow,";\n}\n\n.header.is-personalizable .toolbar [class^='btn']:focus:not(.hide-focus),\n.header.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus) {\n  box-shadow: ").concat(s.focusBoxShadow,'\n}\n\nhtml.theme-new-dark .header.alabaster.is-personalizable .flex-toolbar [class^=\'btn\']:focus:not(.hide-focus) .icon {\n  color: #fff !important;\n}\n\nhtml.theme-new-dark .header.alabaster.is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled),\nhtml.theme-new-dark .header.alabaster.is-personalizable .btn-tertiary:not(.destructive):not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):not(:disabled) svg.icon {\n  color: #fff !important;\n}\n\nhtml[class*="theme-new-"]:not(.theme-new-dark) .header.alabaster.is-personalizable button:not(:disabled) {\n  color: #000 !important;\n}\n\nhtml[class*="theme-new-"]:not(.theme-new-dark) .header.alabaster.is-personalizable .flex-toolbar [class^=\'btn\'][disabled] span,\nhtml[class*="theme-new-"]:not(.theme-new-dark) .header.alabaster.is-personalizable .flex-toolbar [class^=\'btn\'][disabled] .icon {\n  color: #C5C5C9 !important;\n}\n\nhtml[class*="theme-classic-"]:not(.theme-classic-dark) .header.alabaster.is-personalizable .flex-toolbar [class^=\'btn\'][disabled] span,\nhtml[class*="theme-classic-"]:not(.theme-classic-dark) .header.alabaster.is-personalizable .flex-toolbar [class^=\'btn\'][disabled] .icon {\n  color: #888B94 !important;\n}\n\nhtml[class*="theme-classic-"]:not(.theme-classic-dark) .header.alabaster.is-personalizable button:not(:disabled) {\n  color: #000 !important;\n}\n\nhtml[class*="theme-new-"]:not(.theme-new-dark) .alabaster.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .btn-actions .icon,\nhtml[class*="theme-new-"]:not(.theme-new-dark) .alabaster.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .hyperlink,\nhtml[class*="theme-new-"]:not(.theme-new-dark) .alabaster.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-overflow-container::after,\nhtml[class*="theme-new-"]:not(.theme-new-dark) .alabaster.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb .breadcrumb-list li::after,\nhtml[class*="theme-new-"]:not(.theme-new-dark) .alabaster.header.is-personalizable + .page-container .scrollable-flex-header.personalize-subheader .breadcrumb ol li::after {\n  color: #000 !important;\n}\n')}(e)},setFont:function(e){$("html").addClass("font-".concat(e))},setColors:function(e){var t;if(""===e||"default"===e||"default"===(null===(t=e)||void 0===t?void 0:t?.header))return this.setColorsToDefault(),this;if(!e)return this;var i=Et.personalizationColors();return void 0!==i[e]&&(e=i[e].value),this.appendStyleSheet(this.getColorStyleSheet(e)),this.settings.colors=e,this.element.triggerHandler("colorschanged",{colors:this.settings.colors.header||this.settings.colors||Et.themeColors().brand.primary.alt.value,isDefault:!1,theme:this.currentTheme||"theme-new-light"}),this},setColorsToDefault:function(){this.settings.colors="";var e=document.getElementById("soho-personalization");e&&e.parentNode.removeChild(e),this.element.triggerHandler("colorschanged",{colors:"default",isDefault:!0,theme:this.currentTheme||"theme-new-light"})},getThemeFromStylesheet:function(){var e=$("#stylesheet, #sohoxi-stylesheet"),t="";if(e.length>0){var i=e.attr("href"),n=(t=i.substring(i.lastIndexOf("/")+1)).lastIndexOf("?");n>-1&&(t=t.slice(0,n)),t=t.replace(".min","").replace(".css","")}return t},setTheme:function(e){var t=$("html");if(e){if(e=e.replace("soho","classic").replace("uplift","new"),this.currentTheme=e,Et.currentTheme.id===e)return void(t.hasClass(e)||t.addClass(e));["light","dark","high-contrast"].indexOf(e)>-1&&(e+="-theme"),t.removeClass(function(p,v){return v.split(" ").filter(function(T){return T.indexOf("theme")>-1}).join()}).addClass(e),this.blockUi();var n=this,a=$("#stylesheet, #sohoxi-stylesheet"),o=$('<link rel="stylesheet">'),l=a.attr("href");o.on("load",function(){a.remove(),n.unBlockUi(),n.triggerEvent(e)}).on("error",function(){n.unBlockUi()});var d=l?l.substring(0,l.lastIndexOf("/")):"",h=!!l&&l.indexOf(".min")>-1;o.attr({id:a.attr("id"),href:Fe.stripTags("".concat(d,"/").concat(e).concat(h?".min":"",".css"))}),a.removeAttr("id"),a.before(o),this.settings.theme=e,Et.setTheme(e),this.setColors(this.settings.colors)}},blockUi:function(){if(this.settings.blockUI){var t="#bdbdbd";switch(Et){case"light":default:t="#f0f0f0";break;case"dark":t="#313236";break;case"high-contrast":t="#d8d8d8"}this.pageOverlay=this.pageOverlay||$('<div class="personalize-overlay"></div>'),this.pageOverlay.css("background",t),$("body").append(this.pageOverlay)}},triggerEvent:function(e){this.element.triggerHandler("themechanged",{colors:this.settings.colors.header||this.settings.colors||Et.themeColors().brand.primary.alt.value,theme:e||"theme-new-light"}),$("body").trigger("resize")},unBlockUi:function(){var e=this;!e.settings.blockUI||!e.pageOverlay||e.pageOverlay.fadeOut(300,function(){e.pageOverlay.remove(),e.pageOverlay=void 0})},updated:function(e){if(!e)return this;var t=H.extend({},this.settings);return this.settings=H.mergeSettings(this.element[0],e,this.settings),this.settingsDidChange(t,"theme")&&this.setTheme(this.settings.theme),this.settingsDidChange(t,"colors")&&this.setColors(this.settings.colors),this.settingsDidChange(t,"font")&&this.setFont(this.settings.font),this},settingsDidChange:function(e,t){return this.settings[t]&&this.settings[t]!==e[t]},teardown:function(){return this.element.off("updated.".concat(Ca)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Ca)}};var hd={theme:"theme-new-light"};"object"===rt(window.SohoConfig)&&"object"===rt(window.SohoConfig.personalize)&&(hd=window.SohoConfig.personalize);var yn=new ud(document.documentElement,hd);function sc(s,e){var i,n,a,o,t=0;if(3===s.nodeType)i=s.data.toUpperCase().indexOf(e),(i-=s.data.substr(0,i).toUpperCase().length-s.data.substr(0,i).length)>=0&&((n=document.createElement("mark")).className="highlight",(a=s.splitText(i)).splitText(e.length),o=a.cloneNode(!0),n.appendChild(o),a.parentNode.replaceChild(n,a),t=1);else if(1===s.nodeType&&s.childNodes&&!/(script|style)/i.test(s.tagName))for(var l=0;l<s.childNodes.length;++l)l+=sc(s.childNodes[l],e);return t}$.fn.personalize=function(s){return this.each(function(){var e=$.data(this,Ca);e||(e=$.data(this,Ca,yn)),e.updated(s)})},$.fn.disable=function(){return $.each(this.data(),function(s,e){e instanceof jQuery||e&&e.disable&&e.disable()}),this.prop("disabled",!0),this.attr("disabled",!0).closest(".field").addClass("is-disabled"),this},$.fn.enable=function(){return $.each(this.data(),function(s,e){e instanceof jQuery||e&&e.enable&&e.enable()}),this.prop({disabled:!1,readonly:!1}),this.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this.closest(".field").find("button.trigger").removeAttr("disabled"),this},$.fn.readonly=function(){return $.each(this.data(),function(s,e){e instanceof jQuery||e&&e.readonly&&e.readonly()}),this.prop("readonly",!0),this},$.fn.revealText=function(s){if(!this)return this;var e=this;e.addClass("show"===s?.initialState?"input-show-text":"input-hide-text");var t=$('<span class="input-hideshow-text">'.concat(Soho.Locale.translate("show"===s?.initialState?"Hide":"Show"),"</span>"));e.after(t),e.hasClass("input-hide-text")&&e.attr("type","password");var i=function(){if(e.hasClass("input-hide-text"))return e.removeClass("input-hide-text").addClass("input-show-text"),e.attr("type","text"),void t.text(Soho.Locale.translate("Hide"));e.removeClass("input-show-text").addClass("input-hide-text"),e.attr("type","password"),t.text(Soho.Locale.translate("Show"))};return t.on("click",function(){i()}),e.on("keypress",function(n){18===n.keyCode&&n.ctrlKey&&i()}),this},$(function(){var s,e;$(".label-text").closest("label, .label").each(function(){e=$("input, textarea, select",this),s=e.attr("class"),$(this).addClass(function(){return"inline".concat(s?" inline-".concat(-1===s.indexOf(" ")?s:s.substr(0,s.indexOf(" "))):"")})})}),$(function(){$("input:radio").on("click.radios",function(){this.focus()})}),$(function(){var s=function(t,i){for(var n=0,a=t.length;n<a;n++)$(t[n]).parent().addClass(i)};s($(".field > input:checkbox, .field > .inline-checkbox"),"field-checkbox"),s($(".field > input:radio, .field > .inline-radio"),"field-radio"),s($(".field > input:checkbox ~ label.checkbox-label.hitbox"),"field-hitbox")}),$(function(){$(".field-checkbox input:checkbox ~ label.checkbox-label.hitbox").each(function(e,t){$(t).innerWidth()>44&&$(t).addClass("hitbox-padding")})}),$(function(){[].slice.call(document.body.querySelectorAll("label.required .label-text, .label.required .label-text, label:not(.inline).required, .label:not(.inline).required")).forEach(function(i){-1!==i.className.indexOf("accessible")&&(i.querySelector(".required-asterisk")||i.insertAdjacentHTML("beforeend",'<span class="required-asterisk" aria-hidden="true">*</span>'))});var t=[].slice.call(document.body.querySelectorAll("[data-validate]"));t.forEach(function(i){var n=i.getAttribute("data-validate");n&&n.indexOf("required")>-1&&i.setAttribute("aria-required",!0)}),(t=[].slice.call(document.body.querySelectorAll('input[type="hidden"]'))).forEach(function(i){var n=i.getAttribute("id");if(n){var a=document.body.querySelector('label[for="'.concat(n,'"]'));a&&a.setAttribute("aria-hidden",!0)}})}),$.fn.highlight=function(s){return this.length&&s&&s.length?this.each(function(){sc(this,s.toUpperCase())}):this},$.fn.unhighlight=function(){return this.find("mark.highlight").each(function(){var s=this.parentNode;s.replaceChild(this.firstChild,this),s.normalize()}).end()};var rc="arrange",xa={handle:null,itemsSelector:null,connectWith:!1,isVisualItems:!1,placeholder:null,placeholderCssClass:"arrange-placeholder",useItemDimensions:!1};function oc(s,e){this.settings=H.mergeSettings(s,e,xa),this.element=$(s),this.init()}oc.prototype={init:function(){this.isIe="ie"===xe.browser.name,this.handleEvents()},get isTouch(){return xe.features.touch||xe.devicespecs.isMobile},getElementByTouchInList:function(e,t,i){for(var n=!1,a=$(e),o=0,l=a.length;o<l;o++){var d=$(a[o]),h=d.offset();t<=h.left||t>=h.left+d.outerWidth()||i<=h.top||i>=h.top+d.outerHeight()||(n=d)}return n},dragTouchElement:function(e,t){var i=e.originalEvent.changedTouches;t&&t[0]&&i&&i[0]&&this.offset&&(t[0].style.top="".concat(i[0].pageY-this.offset.y,"px"),t[0].style.left="".concat(i[0].pageX-this.offset.x,"px"))},unbind:function(){return this.items.removeClass("draggable").removeAttr("draggable").off("selectstart.arrange ".concat(this.dragStart," ").concat(this.dragEnd," ").concat(this.dragWhileDragging)),$(this.handle,this.items).removeClass("draggable").off("mousedown.arrange mouseup.arrange touchstart.arrange touchend.arrange"),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,xa)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],rc)},getVisualIndex:function(e){var t=this.settings,i=null;if(t.isVisualItems){var n=this.element.children().not('[data-arrange-exclude="true"]');t.itemsSelector&&(n=$(t.itemsSelector,this.element).not('[data-arrange-exclude="true"]')),i=n.index(e)}return i},handleEvents:function(){var i,n,e=this,t=this.settings,a={},o=this.element.children().not('[data-arrange-exclude="true"]'),l=$("<".concat(/^(ul|ol)$/i.test(this.element[0].tagName)?"li":"div",">"));t.itemsSelector&&(o=$(t.itemsSelector,this.element).not('[data-arrange-exclude="true"]'),l=$("<".concat(o.first()[0].tagName," />"))),t.placeholder&&(l=$(t.placeholder)),this.dragStart="dragstart.arrange touchstart.arrange gesturestart.arrange",this.dragEnd="dragend.arrange touchend.arrange touchcancel.arrange gestureend.arrange",this.dragWhileDragging="dragover.arrange dragenter.arrange drop.arrange touchmove.arrange gesturechange.arrange",this.handle=t.handle||this.element.attr("data-arrange-handle"),this.connectWith=this.element.attr("data-arrange-connectWith"),this.placeholders=l,this.isTouch||this.placeholders.addClass("".concat(t.placeholderCssClass," draggable")),$(this.handle,o).addClass("draggable").on("mousedown.arrange touchstart.arrange",function(){n=!0}).on("mouseup.arrange touchend.arrange",function(){n=!1}),this.connectWith&&(o=o.add($(this.connectWith).children().not('[data-arrange-exclude="true"]')).data("connectWith",this.connectWith)),this.items=o,this.items.attr("draggable",!0).addClass(this.handle?"":"draggable").add([this,l]).not("a[href], img").on("selectstart.arrange",function(){return this.dragDrop&&this.dragDrop(),this.isIe}),this.items.add(l).each(function(){$(this).on(e.dragStart,function(d){if(e.handle&&!n)return!!e.isTouch&&void 0;n=!1,e.dragging=$(this),i=e.dragging.addClass("arrange-dragging").index();var h=t.isVisualItems?e.getVisualIndex(e.dragging):i;$.extend(a,{start:e.dragging,startIndex:h});var p=e.element.triggerHandler("beforearrange",a);if("boolean"==typeof p&&!p||"string"==typeof p&&"false"===p.toLowerCase())e.dragging=null;else{var b,v=e.dragging[0].getBoundingClientRect();if(t.useItemDimensions&&(l[0].style.width="".concat(v.width,"px"),l[0].style.height="".concat(v.height,"px"),(b=l[0].classList).add.apply(b,Mi(t.placeholderCssClass.split(" ")))),e.isTouch){var w=d.originalEvent.changedTouches;w&&w[0]&&(e.offset={x:w[0].pageX-v.left,y:w[0].pageY-v.top})}else{var T=d.originalEvent.dataTransfer,k={x:d.originalEvent.clientX-v.left,y:d.originalEvent.clientY-v.top};T.effectAllowed="move",T.setData("Text","sample"),T.setDragImage(e.dragging[0],k.x,k.y)}}}).on(e.dragEnd,function(){if(e.dragging){if(e.isTouch){var d,h={opacity:1};t.useItemDimensions&&(h.position=""),e.dragging.css(h),null===(d=e.placeholderTouch)||void 0===d||d?.remove()}if(e.element.removeClass("has-arrange-placeholder"),e.placeholders.filter(":visible").after(e.dragging),e.dragging.removeClass("arrange-dragging").show(),e.placeholders.detach(),i!==e.dragging.index()){var p=t.isVisualItems?e.getVisualIndex(e.dragging):e.dragging.index();$.extend(a,{end:e.dragging,endIndex:p}),e.element.triggerHandler("arrangeupdate",a)}e.dragging=null,e.placeholderTouch=null}}).on(e.dragWhileDragging,function(d){if(e.dragging){var p,h=this;if(d.stopPropagation(),e.isTouch&&!e.placeholderTouch&&(e.placeholderTouch=e.dragging.clone().addClass("is-touch").attr("id","arrange-placeholder-touch").insertBefore(e.dragging),e.dragTouchElement(d,e.placeholderTouch)),"drop"===d.type)return d.stopPropagation(),e.dragging.trigger("dragend.arrange"),!1;if(e.isTouch){var v=d.originalEvent.touches[0];h=e.getElementByTouchInList(o,v.pageX,v.pageY)||h}if(h=$(h),e.isTouch||(d.originalEvent.dataTransfer.dropEffect="move"),o.is(h)&&l.index()!==h.index()){if(e.isTouch){var b={opacity:0};t.useItemDimensions&&(b.position="fixed"),e.dragging.css(b)}else e.dragging.hide();var w;l.index()<h.index()?(l.insertAfter(h),p=h.index(),w=t.isVisualItems?e.getVisualIndex(h):p):(l.insertBefore(h),p=l.index(),w=t.isVisualItems?e.getVisualIndex(l):p),e.element.addClass("has-arrange-placeholder"),$.extend(a,{over:h,overIndex:w}),e.element.triggerHandler("draggingarrange",a),H.fixSVGIcons(h),e.placeholders.not(l).detach()}else e.placeholders.is(this)||(e.placeholders.detach(),e.element.append(l));return!!e.isTouch&&void e.dragTouchElement(d,e.placeholderTouch)}})})}},$.fn.arrange=function(s){return this.each(function(){var e=$.data(this,rc);e?e.updated(s):e=$.data(this,rc,new oc(this,s))})};var or="drag",Du={axis:null,clone:!1,cloneCssClass:"is-clone",clonePosIsFixed:!1,cloneAppendTo:null,containment:!1,obstacle:!1,underElements:!1,containmentOffset:{left:0,top:0}};function Br(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Du),this.init()}Br.prototype={init:function(){this.handleEvents()},finish:function(e,t){var i={top:t,left:e};this.element.off("mouseup.draggable"),$(document).off("mousemove.draggable mouseup.draggable"),this.settings.underElements&&(i.underElements=this.getElementsFromPoint(i.left,i.top)),i.offset=this.offset,i.clone=this.clone,this.element.trigger("dragend",i),this.element.removeClass("is-dragging"),this.clone&&("x"===this.settings.axis&&delete i.top,"y"===this.settings.axis&&delete i.left,this.clone.remove(),this.clone=null),this.obstacle&&(this.obstacle=null),this.upperYLimit&&(this.upperYLimit=null),this.upperXLimit&&(this.upperXLimit=null),$("body").removeClass("disable-select")},move:function(e,t){var n={left:e,top:t};if("x"===this.settings.axis&&delete n.top,"y"===this.settings.axis&&delete n.left,this.settings.containment&&(this.settings.containment instanceof jQuery?this.container=this.settings.containment:"parent"===this.settings.containment?this.container=this.element.parent():"window"===this.settings.containment?this.container=$(window):"container"===this.settings.containment?this.container=this.element.closest(".page-container"):"partial"===this.settings.containment?(this.container=$(document),0===this.settings.containmentOffset.top&&(this.settings.containmentOffset.top=this.element.outerHeight()/2),0===this.settings.containmentOffset.left&&(this.settings.containmentOffset.left=this.element.outerWidth()/2)):this.container=$(document),this.upperXLimit||(this.upperXLimit=this.container.width()-this.element.outerWidth()+this.settings.containmentOffset.left),this.upperYLimit||(this.upperYLimit=this.container.height()-this.element.outerHeight()+this.settings.containmentOffset.top),n.top>this.upperYLimit&&(n.top=this.upperYLimit),n.left>this.upperXLimit&&(n.left=this.upperXLimit),n.top<0&&(n.top=0),"partial"!==this.settings.containment&&n.left<0&&(n.left=0),"partial"===this.settings.containment&&n.left<-this.settings.containmentOffset.left&&(n.left=-this.settings.containmentOffset.left),"container"===this.settings.containment&&n.left<=1&&(n.left=1)),this.settings.obstacle){var a=this.clone?this.clone.offset():this.element.offset(),o=this.clone?this.clone.outerWidth():this.element.outerWidth(),l=n.left>a.left;if(!this.obstacle){this.obstacle=$(this.settings.obstacle).not(this.element);var d=$(this.obstacle).offset();this.constraints={top:d.top,left:d.left,bottom:d.top+this.obstacle.outerHeight(),right:d.left+this.obstacle.outerWidth()}}!l&&this.originalPos.left>this.constraints.left&&n.left<=this.constraints.right&&(n.left=this.constraints.right),l&&this.originalPos.left+o<=this.constraints.left&&n.left+o>=this.constraints.left&&(n.left=this.constraints.left-this.obstacle.outerWidth())}var h=function(v,b,w){typeof b[w]<"u"&&(v[0].style[w]="".concat(b[w],"px"))};h(this.clone||this.element,n,"top"),h(this.clone||this.element,n,"left"),this.settings.underElements&&(n.underElements=this.getElementsFromPoint(n.left,n.top)),n.offset=this.offset,n.clone=this.clone,this.element.trigger("drag",n)},getElementsFromPoint:function(e,t){var i=[];if(document.elementsFromPoint)i=document.elementsFromPoint(e,t);else if(document.msElementsFromPoint)i=document.msElementsFromPoint(e,t);else{for(var n,a,o,l,d=999,h=[];(l=document.elementFromPoint(e,t))&&-1===i.indexOf(l)&&null!==l&&d>-1;)d--,i.push(l),h.push({value:l.style.getPropertyValue("pointer-events")||"",priority:l.style.getPropertyPriority("pointer-events")}),l.style.setProperty("pointer-events","none","important");for(n=0,a=i.length;n<a;n++)i[n].style.setProperty("pointer-events",(o=h[n]).value,o.priority)}return i},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings))},destroy:function(){$.removeData(this.element[0],or),this.element.off("touchstart.draggable MSPointerDown.draggable pointerdown.draggable touchmove.draggable touchend.draggable touchcancel.draggable mousedown.draggable")},handleEvents:function(){var e=this;e.offset=null,e.element.attr("draggable",!xe.features.touch),"onpointerdown"in window||"onmspointerdown"in window||e.element.on("touchstart.draggable gesturestart.draggable",function(t){var i=$(this).position(),n=t.originalEvent;e.offset={x:n.changedTouches[0].pageX-i.left,y:n.changedTouches[0].pageY-i.top},e.originalPos=i,e.element.addClass("is-dragging"),i.offset=e.offset,i.clone=e.clone,e.element.trigger("dragstart",i)}).on("touchmove.draggable gesturechange.draggable",function(t){t.preventDefault();var i=t.originalEvent;i.targetTouches.length>1||e.move(i.changedTouches[0].pageX-e.offset.x,i.changedTouches[0].pageY-e.offset.y)}).on("touchend.draggable gestureend.draggable touchcancel.draggable",function(t){t.preventDefault();var i=t.originalEvent.changedTouches[0];e.finish(i.pageX-e.offset.x,i.pageY-e.offset.y)}),e.element.on("mousedown.draggable",function(t){t.preventDefault();var i=e.settings.clonePosIsFixed?e.element[0].getBoundingClientRect():e.element.position();e.offset={x:t.pageX-i.left,y:t.pageY-i.top},e.originalPos=i,$("body").addClass("disable-select"),$(document).on("mousemove.draggable",function(n){n.preventDefault(),e.move(n.pageX-e.offset.x,n.pageY-e.offset.y)}),$(document).on("mouseup.draggable",function(n){n.preventDefault(),e.finish(t.pageX-e.offset.x,n.pageY-e.offset.y)}),e.element.on("mouseup.draggable",function(n){n.preventDefault(),e.finish(n.pageX-e.offset.x,n.pageY-e.offset.y)}),!e.clone&&e.settings.clone&&(e.clone=e.element.clone(!0),"parent"===e.settings.cloneAppendTo&&(e.settings.cloneAppendTo=e.element.parent()),e.clone.addClass(e.settings.cloneCssClass).appendTo(e.settings.cloneAppendTo||"body")),e.element.addClass("is-dragging"),e.element.trigger("dragstart",[i,e.clone])})}},$.fn.drag=function(s){return this.each(function(){var e=$.data(this,or);e?e.updated(s):e=$.data(this,or,new Br(this,s))})};var da="place",ua={bleedFromContainer:!1,callback:null,container:null,parent:null,parentXAlignment:"center",parentYAlignment:"center",placement:"bottom",strategies:["nudge"]},lc=["nudge","clockwise","flip","shrink","shrink-x","shrink-y"],Mu=["top","left","right","bottom","center"],fd=["left","center","right"],Rs=["top","center","bottom"],Os=["x","y","container","containerOffsetX","containerOffsetY","callback","parent","parentXAlignment","parentYAlignment","useParentWidth","useParentHeight","placement","strategies"];function Rr(s){var e=this;return Os.forEach(function(t){if(null!==s[t]){if("x"===t||"y"===t)return e.setCoordinate(t,s[t]),void(e["original".concat(t)]=s[t]);e[t]=s[t]}}),this.modified=!1,this.sanitize()}function Or(s,e){this.settings=H.mergeSettings(s,e,ua),this.element=$(s),this.init()}Rr.prototype={isReasonableDefault:function(e,t){return $.inArray(e,t)>-1},sanitize:function(){var e=this;this.bleedFromContainer=!0===this.bleedFromContainer,this.callback="function"==typeof this.callback?this.callback:ua.callback,this.container=this.container instanceof $&&this.container.length?this.container:ua.container,this.containerOffsetX=isNaN(parseInt(this.containerOffsetX,10))?0:this.containerOffsetX,this.containerOffsetY=isNaN(parseInt(this.containerOffsetY,10))?0:this.containerOffsetY,this.parent=this.parent instanceof $&&this.parent.length?this.parent:ua.parent,this.parentXAlignment=this.isReasonableDefault(this.parentXAlignment,fd)?this.parentXAlignment:ua.parentXAlignment,this.parentYAlignment=this.isReasonableDefault(this.parentYAlignment,Rs)?this.parentYAlignment:ua.parentYAlignment,this.placement=this.isReasonableDefault(this.placement,Mu)?this.placement:ua.placement,this.useParentHeight=!0===this.useParentHeight,this.useParentWidth=!0===this.useParentWidth,(!$.isArray(this.strategies)||!this.strategies.length)&&(this.strategies=["nudge"]),this.strategies.forEach(function(t,i){e.strategies[i]=e.isReasonableDefault(t,lc)?t:e.strategies[i]})},setCoordinate:function(e,t){var i;this.isReasonableDefault(e,["x","y"])&&(isNaN(t)&&(t=0),this[e]=null!==(i=this.parent)&&void 0!==i&&i?.is(".dropdown")?Math.floor(t):Math.round(t))}},Or.prototype={init:function(){return this.build().handleEvents()},build:function(){this.element.hasClass("placeable")||this.element.addClass("placeable"),this.originalStyles={};var e=this.element[0].style.height,t=this.element[0].style.width;return e&&(this.originalStyles.height=e),t&&(this.originalStyles.width=t),this},handleEvents:function(){var e=this;return this.element.on("place.".concat(da),function(t,i,n){e.place(new Rr({x:i,y:n}))}).on("updated.".concat(da),function(){e.updated()}),this},render:function(e){var t=/(px|%)/i;this.element.offset({left:e.x,top:e.y}),e.height&&(this.element[0].style.height=e.height+(t.test("".concat(e.height))?"":"px")),e.width&&(this.element[0].style.width=e.width+(t.test("".concat(e.width))?"":"px"))},place:function(e){var t=[this.element[0].style.left,this.element[0].style.top];return this.element.trigger("beforeplace",[t])&&(e instanceof Rr||(e=new Rr(e)),null!=e.x||null!=e.y)?(this.clearOldStyles(),e.parent?this.placeWithParent(e):this.placeWithCoords(e)):t},placeWithParent:function(e){if(!e.parent||!e.parent.length)return[void 0,void 0];var a,t=this,i=this.getContainer(e),n=i.length&&i[0]===document.body;xe.rtl&&i.length&&(a=de.getDimensions(i[0]),this.element.css({left:"".concat(a.left,"px"),top:"".concat(a.right,"px")}));var o=de.getDimensions(e.parent[0]),l=n?$(window).scrollLeft():i.scrollLeft(),d=n?$(window).scrollTop():i.scrollTop();function p(v){var b=function h(v){var A,M,b=v.placement,w=v.parentXAlignment,T=v.parentYAlignment,k=de.getDimensions(t.element[0]);switch(b){case"top":M=o.top-k.height-v.y+(n?d:0);break;case"left":A=o.left-k.width-v.x+(n?l:0);break;case"right":A=o.right+v.x+(n?l:0);break;default:M=o.bottom+v.y+(n?d:0)}if("top"===b||"bottom"===b){var L=Math.round(n?document.body.offsetWidth:null);switch(w){case"left":A=n&&L<Math.round(k.left)+Math.round(k.width)?o.left+v.x+l:o.left-v.x+(n?l:0);break;case"right":A=n&&Math.round(k.right)-Math.round(k.width)<0?o.left-v.x+l:o.right-k.width+v.x+(n?l:0);break;default:A=o.left+(o.width-k.width)/2+v.x+(n?l:0)}}if("right"===b||"left"===b)switch(T){case"top":M=o.top-v.y+(n?d:0);break;case"bottom":M=o.bottom-k.height+v.y+(n?d:0);break;default:M=o.top+(o.height-k.height)/2+v.y+(n?d:0)}return v.parent.is(".datagrid-cell-wrapper")&&(M-=1),[A,M]}(v);return v.setCoordinate("x",b[0]),v.setCoordinate("y",b[1]),t.render(v),t.handlePlacementCallback(v)}return e.useParentWidth&&(e.width=o.width),e.useParentHeight&&(e.height=o.height),e.parent.is(".colorpicker")&&B.isRTL()&&(e.x+=30),$(e.parent).parent().is(".datagrid-cell-wrapper")&&!B.isRTL()&&(e.x+=30),(e=p(e)).strategies.forEach(function(v){(e=t.checkBleeds(e)).bleeds&&(e=function(){switch(v){case"nudge":return t.nudge(e);case"clockwise":return t.clockwise(e);case"flip":return(e=t.flip(e)).setCoordinate("x",e.originalx),e.setCoordinate("y",e.originaly),e=p(e);case"shrink":return t.shrink(e);case"shrink-x":return t.shrink(e,"x");case"shrink-y":return t.shrink(e,"y");default:return e}}(),t.render(e))}),e.element=this.element,this.element.trigger("afterplace",[e]),e},placeWithCoords:function(e){return this.render(e),e=this.handlePlacementCallback(e),this.render(e),(e=this.checkBleeds(e)).bleeds&&(e=this.nudge(e)),this.render(e),(e=this.checkBleeds(e)).bleeds&&(e=this.shrink(e)),this.render(e),this.element.trigger("afterplace",[e]),e},handlePlacementCallback:function(e){var t=e.callback||this.settings.callback;return e.element=this.element,t&&"function"==typeof t&&(e=t(e)),this.render(e),e},accountForScrolling:function(e){var t=e.container,i=window.getComputedStyle(this.element[0]).position;if("fixed"===i)return!1;if((!t||!t.length)&&(t=this.element.parents().filter(function(){return"absolute"===window.getComputedStyle(this).position||"fixed"===i})),!t||!t.length)return!0;if(t[0]===document.body)return!1;var n=window.getComputedStyle(t[0]);return!("fixed"===(i=n.position)||"absolute"===i&&"hidden"===n.overflow)},getContainer:function(e){if(e.container instanceof $&&e.container.length)return e.container;var t=this.element.parents(".modal");return t.length?t:$(document.body)},isParentElementinViewport:function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},checkBleeds:function(e){var t=!1===this.settings.bleedFromContainer?!this.isParentElementinViewport(this.element):this.settings.bleedFromContainer,i=this.getContainer(e),n=i.length&&i[0]===document.body,a=this.element[0].getBoundingClientRect(),o={},l=i?i[0].getBoundingClientRect():{},d=n?$(window).scrollLeft():i.scrollLeft(),h=n?$(window).scrollTop():i.scrollTop(),p=Math.max(document.documentElement.clientHeight,window.innerHeight||0),v=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function T(G){switch(G){case"top":return(t?0:l.top)-(n?-1*h:0);case"left":return(t?0:l.left)-(n?-1*d:0);case"right":return(t?v:l.right)-(n?-1*d:0);default:return(t?p:l.bottom)-(n?-1*h:0)}}o.width=a.width,o.height=a.height,o.top=a.top,o.right=a.right,o.bottom=a.bottom,o.left=a.left;var k=T("right");if(o.width>=k){var A=o.width-(o.width-k+20);e.width=A,this.element[0].style.width="".concat(A,"px"),o.width=A}var M=T("bottom");if(o.height>=M){var L=o.height-(o.height-M+20);e.height=L,this.element[0].style.height="".concat(L,"px"),o.height=L}var z=o.right>T("right"),q=o.left<T("left"),O=o.top<T("top"),_=o.bottom>T("bottom");return z||q||O||_?(e.bleeds={},e.bleeds.right=z?o.right-T("right"):null,e.bleeds.left=q?-(o.left-T("left")):null,e.bleeds.top=O?-(o.top-T("top")):null,e.bleeds.bottom=_?o.bottom-T("bottom"):null,e):(e.bleeds=void 0,e)},nudge:function(e){e.nudges||(e.nudges={x:0,y:0});var t=0;return e.bleeds.right&&(t=Math.abs(e.bleeds.right)+Math.abs(e.containerOffsetX),e.setCoordinate("x",e.x-t),e.nudges.x-=t),e.bleeds.left&&(t=Math.abs(e.bleeds.left)+Math.abs(e.containerOffsetX),e.setCoordinate("x",e.x+t),e.nudges.x+=t),e.bleeds.top&&(t=Math.abs(e.bleeds.top)+Math.abs(e.containerOffsetY),e.setCoordinate("y",e.y+t),e.nudges.y+=t),e.bleeds.bottom&&(t=Math.abs(e.bleeds.bottom)+Math.abs(e.containerOffsetY),e.setCoordinate("y",e.y-t),e.nudges.y-=t),e.wasNudged=!0,e.bleeds=void 0,e},flip:function(e){if(!e.bleeds[e.placement])return e;if(e.attemptedFlips||(e.attemptedFlips=[]),e.attemptedFlips.push(e.placement),e.attemptedFlips.length>3)return e=this.giveup(e);var t=this.accountForScrolling(e),i=["left","right"].indexOf(e.placement)>-1,n=this.settings.bleedFromContainer,a=this.getContainer(e),o=a.length&&a[0]===document.body,l=a?a[0].getBoundingClientRect():{},d=e.parent[0].getBoundingClientRect(),h=o?$(window).scrollLeft():a.scrollLeft(),p=o?$(window).scrollTop():a.scrollTop(),v=Math.max(document.documentElement.clientHeight,window.innerHeight||0),b=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function w(M){switch(M){case"left":return"right";case"right":return"left";case"top":return"bottom";default:return"top"}}function T(M){var L=0;switch(M){case"left":L=(n?0:l.left)-(t?h:0)-d.left+e.containerOffsetX;break;case"right":L=(n?b:l.right)-(t?h:0)-d.right-e.containerOffsetX;break;case"top":L=(n?0:l.top)-(t?p:0)-d.top+e.containerOffsetY;break;default:L=(n?v:l.bottom)-(t?p:0)-d.bottom-e.containerOffsetY}return Math.abs(L)}function k(M){return $.inArray(M,e.attemptedFlips)>-1}return e.placement=function A(M){var L=w(M),z=i?"top":"left",q=w(z),O=T(M),_=T(L);if(!k(L))return O>=_?M:(e.wasFlipped=!0,L);var G=e.originalx;e.originalx=e.originaly,e.originaly=G;var j=T(z),X=T(q);if(!k(z)){if(j>=X)return z;if(!k(q))return q}return M}(e.placement),e},clockwise:function(e){return e},shrink:function(e,t){var a=null==t||"x"===t,o=null==t||"y"===t,l=this.accountForScrolling(e),d=de.getDimensions(this.element[0]),h=this.settings.bleedFromContainer,p=this.getContainer(e),v=p?p[0].getBoundingClientRect():{},b=p.length&&p[0]===document.body,w=null===e.parent,T=b?$(window).scrollLeft():p.scrollLeft(),k=b?$(window).scrollTop():p.scrollTop(),A=Math.max(document.documentElement.clientHeight,window.innerHeight||0),M=Math.max(document.documentElement.clientWidth,window.innerWidth||0),L=(l?T:0)+(h?0:v.left)+e.containerOffsetX,z=(l?k:0)+(h?0:v.top)+e.containerOffsetY,q=(l?T:0)+(h?M:v.right)-e.containerOffsetX,O=(l?k:0)+(h?A:v.bottom)-e.containerOffsetY,_=q-L,G=O-z;if(!w){var j=de.getDimensions(e.parent[0]),X=j.top-z,fe=O-j.bottom,he=j.left-L,we=q-j.right;_=he>we?he:we,G=X>fe?X:fe}return a&&(d.width>_&&(e.width=_),d.left<L&&e.setCoordinate("x",e.x+(L-d.left))),o&&(d.height>G&&(e.height=G),d.top<z&&e.setCoordinate("y",e.y+(z-d.top))),e},giveup:function(e){return e.giveup=!0,e.strategy=this.settings.strategy,e.placement=this.settings.placement,e},clearOldStyles:function(){this.element[0].style.left="",this.element[0].style.top="",this.element[0].style.width="",this.element[0].style.height="";var e=this.originalStyles;return e&&(e.width&&(this.element[0].style.width=e.width),e.height&&(this.element[0].style.height=e.height)),this},setArrowPosition:function(e,t,i){var n=t.parent,a=i.find("div.arrow"),o=t.placement,l={},d=i[0].getBoundingClientRect(),h={},p={},v=!1;if(n&&n.length&&a.length){a[0].removeAttribute("style"),i.removeClass("top right bottom left").addClass(o),n.is(".colorpicker, .datepicker, .timepicker")&&(n=n.next(".trigger")),n.is(".btn-split-menu, .btn-menu, .btn-actions, .btn-filter, .tab, .tab-more")&&(n=n.find(".icon").last()),n.is(".searchfield-category-button")&&(n=n.find(".icon.icon-dropdown")),n.is(".colorpicker-editor-button")&&(n=n.find(".trigger .icon")),n.is(".fontpicker")&&(n=n.find(".icon.icon-dropdown")),n.length||(n=t.parent),l=n.length?n[0].getBoundingClientRect():l,h=a.length?a[0].getBoundingClientRect():h,p={};var T={};T[function b(k){return"right"===k||"left"===k?"margin-top":"margin-left"}(o)]=function w(){var M=0;return("left"===o||"right"===o)&&(p.top=h.top+(M=l.top+l.height/2-(h.top+h.height/2)),p.bottom=h.bottom+M,(p.top<=d.top||p.bottom>=d.bottom)&&(v=!0)),("top"===o||"bottom"===o)&&(p.left=h.left+(M=l.left+l.width/2-(h.left+h.width/2)),p.right=h.right+M,(p.left<=d.left||p.right>=d.right)&&(v=!0)),M}(),v&&(T.display="none"),a.css(T)}},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},teardown:function(){return this.clearOldStyles(),this.element.removeClass("placeable"),this.element.off("updated.".concat(da," place.").concat(da)),this.element.trigger("afterteardown"),this},destroy:function(){this.teardown(),$.removeData(this.element[0],da)}},$.fn.place=function(s){return this.each(function(){var e=$.data(this,da);e?e.updated(s):e=$.data(this,da,new Or(this,s))})};var Fr="icon",al={use:"user-profile",focusable:!1};function go(s,e){this.settings=H.mergeSettings(s,e,al),this.element=$(s),this.init()}go.prototype={init:function(){return this.getExistingUseTag(),this.render().handleEvents()},render:function(){if(this.element.addClass("icon"),!this.element.is("svg"))return this;var t=this.element[0].getElementsByTagName("use")[0];return t?(t.getAttribute("href")!==this.getBasedUseTag()&&t.setAttribute("href",this.getBasedUseTag()),this):this},getBasedUseTag:function(){return Ja.getBaseURL("#icon-".concat(this.settings.use))},getExistingUseTag:function(){if(!this.element.is("svg"))return this;var e=this.element.children("use");if(!e.length)return this;var t=e.attr("href");!t&&e.attr("xlink:href")&&(t=e.attr("xlink:href"));var i=Ja.url;return t&&Ja.element.length&&i.length&&(t=t.replace(i,"")),t=t.replace("#icon-",""),this.settings.use=t,this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(Fr),function(){e.updated()}),this},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat(Fr)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Fr)}},$.fn.icon=function(s){return this.each(function(){var e=$.data(this,Fr);e?e.updated(s):e=$.data(this,Fr,new go(this,s))})},function(){function s(e){var t={icon:"user-profile",classes:["icon"]};return"string"==typeof(e=e||$.extend({},t))&&(e=$.extend({},t,{icon:e.replace("icon-","")})),!e.classes&&e.class&&(e.classes=e.class,delete e.class),e.classes||(e.classes=[].concat(t.classes)),"string"==typeof e.classes&&(e.classes=e.classes.split(" ")),-1===e.classes.indexOf("icon")&&e.classes.push("icon"),e.icon||(e.icon=""),e}$.createIcon=function(t){return t=s(t),st.isValidURL(t.icon)?'<img\n        src="'.concat(t.icon,'"\n        alt="Icon"\n        class="icon custom-icon ').concat(t.classes.join(" "),'"\n        aria-hidden="true"\n        role="presentation"/>'):['<svg class="'.concat(t.classes.join(" "),'" focusable="false" aria-hidden="true" role="presentation">')+'<use href="#icon-'.concat(t.icon,'"></use>')+"</svg>"].join("")},$.createIconElement=function(t){return $($.createIcon(t))},$.createIconPath=function(t){return t=s(t),$.getBaseURL("#icon-".concat(t.icon.replace("icon-","")))},$.fn.changeIcon=function(e){e&&$(this).find("use").attr("href",$.createIconPath({icon:e}))},$.fn.getIconName=function(){var e=$(this),t=e.find("use");return 1===t.length&&t.attr("href")?t.attr("href").substr(t.attr("href").indexOf("#icon-")+6):1===t.length&&t.attr("xlink:href")?t.attr("xlink:href").substr(t.attr("xlink:href").indexOf("#icon-")+6):e.attr("data-icon")}}();var ai="tooltip",sl={content:null,offset:{top:10,left:10},placement:"top",trigger:"hover",showOnKeyboardFocus:!0,title:null,beforeShow:null,popover:null,closebutton:null,isError:!1,isErrorColor:!1,tooltipElement:null,parentElement:null,keepOpen:!1,isRangeDatepicker:!1,extraClass:null,contentAlignment:"center",placementOpts:{},maxWidth:null,initializeContent:!0,headerClass:null,delay:500,onHidden:null,attachToBody:!0,appendTo:'[role="main"]',attributes:null};function rl(s,e){this.settings=H.mergeSettings(s,e,sl),this.element=$(s),this.init()}rl.prototype={get componentName(){return this._componentName||(this._componentName=this.isPopover?"popover":ai),this._componentName},get isPopover(){return null!==this.settings.content&&"object"===rt(this.settings.content)||!0===this.settings.popover},get visible(){return this.tooltip.length&&!1===this.tooltip[0].classList.contains("hidden")&&!1===this.tooltip[0].classList.contains("is-hidden")},get canBeShown(){return!this.reopenDelay&&!de.hasClass(this.element[0],"hidden")&&!de.hasClass(this.element[0],"is-hidden")&&this.element.parents(".hidden, .is-hidden").length<1},get popupmenuAPI(){return this.element.data("popupmenu")},get isFocused(){var s=document.activeElement;return!!(this.activeElement.is($(s))||this.tooltip&&this.tooltip.length&&this.tooltip[0].contains(s))},init:function(){this.uniqueId=H.uniqueId(this.element,this.componentName),this.isTouch=xe.features.touch,this.setup(),this.appendTooltip(),"immediate"!==this.settings.trigger&&this.setContent(this.settings.content,!0),this.handleEvents()},setup:function(){this.activeElement=this.settings.parentElement instanceof $&&this.settings.parentElement.length?this.settings.parentElement:this.element,this.descriptionId=$(".tooltip-description").length+1,this.description=this.element.parent().find(".tooltip-description"),!this.description.length&&this.settings.isError&&(this.description=$('<span id="tooltip-description-'.concat(this.descriptionId,'" class="tooltip-description audible"></span>')).insertAfter(this.element)),this.settings.appendTo||(this.settings.appendTo='[role="main"]'),this.element.is(".dropdown, .multiselect")&&(this.activeElement=this.element.nextAll(".dropdown-wrapper:first").find(">.dropdown"));var e=this.element.attr("title");(!this.settings.popover&&e&&e.length||!this.settings.popover&&this.settings.title)&&(this.settings.content=this.settings.title?this.settings.title:e,this.element.removeAttr("title")),"hover"===this.settings.trigger&&this.isTouch&&this.element.addClass("longpress-target"),this.settings.closebutton=!(!this.settings.closebutton&&!this.element.data("closebutton")),this.element.data("extraClass")&&this.element.data("extraClass").length&&(this.settings.extraClass=this.element.data("extraClass")),Array.isArray(this.settings.attributes)&&H.addAttributes(this.element,this,this.settings.attributes,"trigger"),this.isRTL=B.isRTL(),de.addClass(this.element[0],"has-tooltip")},addAria:function(){if(this.content&&(this.description.text(this.content),this.content=this.addClassToLinks(this.content,"links-clickable"),this.isPopover||this.element.attr("aria-describedby",this.description.attr("id")),this.isPopover)){var e=this.element.prev("input.timepicker").length;if(!e&&"click"===this.settings.trigger&&this.element.attr("aria-haspopup",!0),e){var t=this.tooltip.attr("id"),i=this.element.prev("input.timepicker");i.attr("role","combobox"),i.attr("aria-haspopup","dialog"),i.attr("aria-owns",t),this.element.attr("role","button"),this.element.attr("aria-controls",t),this.tooltip.attr("role","dialog"),this.tooltip.attr("aria-label",B.translate("TimepickerPopup"))}}},addClassToLinks:function(e,t){if(e instanceof $&&e.length>0)return e;var n=$("<div/>").html(e);return $("a",n).addClass(t),n.html()},appendTooltip:function(){var e=this.settings.tooltipElement,t=this.isPopover?"popover":"tooltip";if(this.tooltip=e?$(e):$("#".concat(this.componentName)),!this.tooltip.length){var i=e?e.substring(1,e.length):this.componentName;this.tooltip=$('<div class="'.concat(t,' bottom is-hidden" id="').concat(i,'">\n        <div class="arrow"></div><div class="tooltip-content"></div></div>')),Fe.removeWhiteSpaceCharacters(this.tooltip)}this.tooltip.place({container:this.scrollparent,parent:this.activeElement,placement:this.settings.placement,strategy:"flip"}),$.data(this.tooltip[0],this.componentName,this),this.setTargetContainer(),this.addAria()},handleEvents:function(){var e=this,i=e.settings.delay/10;function n(){e.timer&&e.timer.destroy&&e.timer.destroy(!0)}function a(){n(),e.timer=new Li({duration:i,timeoutCallback:function(){e.show()}}),_i.register(e.timer)}function o(){n(),e.show()}function l(){n(),e.hide()}function d(){e.visible?l():o()}"hover"===this.settings.trigger&&!this.settings.isError&&((this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("mouseenter.".concat(ai),function(){e.isTouch||a()}).on("mouseleave.".concat(ai),function(){e.visible?l():n()}).on("click.".concat(ai),function(){e.isTouch||l()}).on("longpress.".concat(ai),function(){o()}).on("updated.".concat(ai),function(){e.updated()}),this.settings.showOnKeyboardFocus&&(this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("focus.".concat(ai),function(){e.isTouch&&!Ql.pressedKeys.get("Tab")||a()}).on("blur.".concat(ai),function(){e.settings.keepOpen||l()})),"click"===this.settings.trigger&&this.element.on("click.".concat(ai),function(){d()}),"immediate"===this.settings.trigger&&setTimeout(function(){d()},1),"focus"===this.settings.trigger&&this.element.on("focus.".concat(ai),function(){o()}).on("blur.".concat(ai),function(){e.settings.keepOpen||l()}),$(window).on("orientationchange.".concat(ai),function(){e.visible&&l()},!1)},setContent:function(e,t){var i=this,n=this.settings.content,a=null==e;function l(){!0!==t&&(i.addAria(),i.render())}if(a&&null==n)return!1;if("function"==typeof n&&(e=n),a&&(e=n),e===this.content)return l(),!0;if(e instanceof $&&e.length)return this.content=e.addClass("hidden"),l(),!0;if("string"==typeof e){if(!e.length)return!1;if(0===(e=B.translate(e,{showAsUndefined:!0})||e).indexOf("#")&&e.indexOf("/")<0){try{var d=$("".concat(e));if(d.length)return this.content=d,l(),!0}catch{this.content=Fe.sanitizeHTML(e)}return this.content=e,l(),!0}}else{if("function"!=typeof e)return!1;var h=e.call(this.element);if(!h||"string"!=typeof h||!h.length)return!1;e=h}return this.content=Fe.sanitizeHTML(e),this.content="".concat("left"===this.settings.contentAlignment?'<p class="align-text-left">':"<p>"," ").concat(this.content,"</p>"),l(),!0},render:function(){return this.isPopover?this.renderPopover():this.renderTooltip()},renderTooltip:function(){var e=this.tooltip[0].querySelectorAll(".tooltip-title")[0],t=this.tooltip[0].querySelectorAll(".tooltip-content")[0],i=this.settings.extraClass,n=this.content,a=this.tooltip[0],o="tooltip is-hidden";i&&(o+=" ".concat(i)),a.setAttribute("class",o),Array.isArray(this.settings.attributes)&&H.addAttributes(this.tooltip,this,this.settings.attributes),e&&(e.style.display="none"),t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains("arrow")&&t.insertAdjacentHTML("beforebegin",'<div class="arrow"></div>'),de.html(t,"string"==typeof this.content?n:n[0].innerHTML,"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>")},renderPopover:function(){var e=this,t=this,i=this.settings.extraClass,n=this.tooltip.find(".tooltip-content"),a=this.tooltip[0].querySelector(".tooltip-title"),o=this.content,l="popover is-hidden";i&&(l+=" ".concat(i)),this.tooltip[0].setAttribute("class",l),Array.isArray(this.settings.attributes)&&H.addAttributes(this.tooltip,this,this.settings.attributes);var d="ie"===xe.browser.name&&xe.browser.isIE11()&&o instanceof $&&o.length&&"hover"===this.settings.trigger;if("string"==typeof o)n.html(o),n.find(".hidden").removeClass("hidden");else if(d){var h=o[0].cloneNode(!0),p=h.id;p&&(h.id="".concat(p,"-").concat(this.uniqueId)),de.replaceHtml(n,h.outerHTML)}else de.replaceHtml(n,o);var v=n.width();this.settings.placementOpts||(this.settings.placementOpts={}),this.settings.placementOpts.parent||(this.settings.placementOpts.parent=this.element),d||n.find(".hidden").removeClass("hidden"),n[0].firstElementChild.classList.remove("hidden");var b=this.settings.placementOpts.parent.width();if(this.settings.placementOpts.parentXAlignment=B.isRTL()?b>v?"left":"right":b>v?"right":"left",null!==this.settings.title)if(a)a.style.display="",a.childNodes[0].nodeValue=this.settings.title;else{var w=document.createDocumentFragment();if(a=document.createElement("div"),de.html(a,this.settings.title,"*"),a.classList.add("tooltip-title"),this.settings.headerClass){var k=["amber","amethyst","azure","emerald","graphite","ruby","slate","turquoise"].filter(function(M){return e.settings.headerClass.indexOf(M)>-1}).length>0;de.addClass(a,this.settings.headerClass,"filled"),k||de.addClass(a,"default")}w.appendChild(a),this.tooltip[0].insertBefore(w,this.tooltip[0].firstChild)}else a&&(a.style.display="none");if(this.settings.closebutton&&a&&!a.firstElementChild){var A=$('<button type="button" class="btn-icon l-pull-right btn-close">'.concat($.createIcon({classes:["icon-close"],icon:"close"}),"<span>Close</span>")+"</button>").on("click",function(){t.hide(!0)});a.appendChild(A[0]),Array.isArray(this.settings.attributes)&&H.addAttributes(A,this,this.settings.attributes,"btn-close",!0)}this.settings.initializeContent&&(this.settings.initializeContent=!1,n.initialize())},open:function(){return this.show()},show:function(e,t){var i=this;if((!this.popupmenuAPI||!this.popupmenuAPI.isOpen)&&this.canBeShown){if(this.isInPopup=!1,e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.settings.beforeShow&&!t){var n=function(h){"boolean"!=typeof h?(i.content=h,i.show({content:h},!0)):h&&i.show(null,!0)};return"string"==typeof this.settings.beforeShow?void window[this.settings.beforeShow](n,this.element):void this.settings.beforeShow(n,this.element)}if(!1!==this.setContent(this.content)&&!1!==this.element.triggerHandler("beforeshow",[this.tooltip])){this.tooltip[0].removeAttribute("style"),this.tooltip[0].classList.add(this.settings.placement),this.tooltip[0].classList.add("is-open"),de.addClass(this.element[0],"has-open-tooltip"),(this.settings.isError||this.settings.isErrorColor)&&this.tooltip[0].classList.add("is-error"),this.position(),H.fixSVGIcons(this.tooltip),this.element.trigger("show",[this.tooltip]);var o=this.isTouch?"touchend":"mouseup";if(this.settings.popover)H.addAttributes(this.tooltip.find(".tooltip-title"),this,this.settings.attributes,"title",!0),H.addAttributes(this.tooltip.find(".btn-close"),this,this.settings.attributes,"btn-close",!0),this.element.attr("aria-expanded","true");else{var l=this.element.closest(".is-personalizable").length>0;this.tooltip[0].classList[l?"add":"remove"]("is-personalizable")}setTimeout(function(){var d,h,p,v;$(document).on("".concat(o,".").concat(ai,"-").concat(i.uniqueId),function(b){var w=$(b.target);if(!(i.settings.isError||"focus"===i.settings.trigger||w.is(i.element)&&w.is("svg.icon")||$("#editor-popup").length&&$("#colorpicker-menu").length||1===$("#editor-popup").length&&1===w.closest(".popupmenu").length)){1===w.closest(".popover").length&&w.closest(".popover").not(".monthview-popup").length&&i.element.prev().is(".datepicker")&&i.hide();var T=!1;0===w.closest(".popover").length&&0===w.closest(".dropdown-list").length&&(w.is("button")&&(w.siblings().hasClass("datepicker")||w.siblings().hasClass("timepicker"))&&i.element.get(0)===w.get(0)||i.element.get(0)===w.get(0)&&w.is("button")&&!w.is("button.trigger")||(i.hide(),T=!0)),0===w.closest(".popover").length&&w.is(".field")&&!T&&i.hide()}}).on("keydown.".concat(ai,"-").concat(i.uniqueId),function(b){(27===b.which||i.settings.isError)&&i.hide()}),i.settings.isError&&!i.element.is(":visible, .dropdown")&&i.element.is("[aria-describedby]")&&i.hide(),void 0===window.orientation&&$("body").on("resize.".concat(ai),function(){i.hide(),i.settings.keepOpen&&i.show()}),$("body").on("scroll.".concat(ai),function(){i.hide()}),null===(d=i.element)||void 0===d||d?.closest(".modal-body-wrapper").on("scroll.tooltip",function(){i.hide()}),null===(h=i.element)||void 0===h||h?.closest(".scrollable").on("scroll.tooltip",function(){i.hide()}),null===(p=i.element)||void 0===p||p?.closest(".datagrid-wrapper").on("scroll.tooltip",function(){i.hide()}),i.settings.isError&&i.tooltip.on("click.".concat(ai),function(){i.hide()}),null===(v=i.element)||void 0===v||v?.trigger("aftershow",[i.tooltip])},i.settings.delay)}}},setTargetContainer:function(){var e=$("body");this.isPopover&&(e=$(this.settings.appendTo)),e.length||(e=$("body"));var t=!1;this.scrollparent=this.element.closest(".page-container.scrollable"),this.scrollparent.length&&(e=this.scrollparent);var i=this.element.closest(".modal");this.settings.attachToBody?e=$("body"):(t=!0,e=i),this.settings.parentElement&&(e=this.settings.parentElement),t?this.tooltip.insertAfter(this.element):e[0].appendChild(this.tooltip[0])},handleAfterPlace:function(e,t){var i=this;this.tooltip.data("place").setArrowPosition(e,t,this.tooltip),setTimeout(function(){i.tooltip.triggerHandler("tooltipafterplace",[t])})},position:function(){this.setTargetContainer(),this.settings.isRangeDatepicker||this.tooltip[0].classList.remove("is-hidden"),this.settings.maxWidth&&$(this.tooltip).css("max-width",this.settings.maxWidth);var e=this,t=this.isPopover?20:10,i=this.settings.placementOpts||{},n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),o=this.tooltip[0].getBoundingClientRect(),l=$.extend({},{x:0,y:0,container:this.scrollparent,containerOffsetX:i.containerOffsetX||this.settings.offset.left,containerOffsetY:i.containerOffsetY||this.settings.offset.top,parent:i.parent||this.activeElement,placement:i.placement||this.settings.placement,strategies:["flip","nudge"]},i);return("left"===l.placement||"right"===l.placement)&&(l.x=l.x||t,l.y=0),("top"===l.placement||"bottom"===l.placement)&&(l.y=l.y||t,l.x=0),o.width>=n&&/left|right/g.test(l.placement)||o.height>=a&&/top|bottom/g.test(l.placement)?this.tooltip[0].classList.add("no-arrow"):this.tooltip[0].classList.remove("no-arrow"),this.tooltip.one("afterplace.tooltip",function(d,h){e.handleAfterPlace(d,h)}),this.tooltip.data("place")||this.tooltip.place(l),this.tooltip.data("place").place(l),this},close:function(){return this.hide()},hide:function(e){if((!this.settings.keepOpen||e)&&this.visible){if(this.isInPopup)return void this.settings.content.addClass("hidden");if(de.removeClass(this.element[0],"has-open-tooltip"),this.tooltip[0].classList.remove("is-personalizable"),this.tooltip[0].classList.remove("is-open"),this.tooltip[0].classList.add("is-hidden"),this.tooltip[0].style.left="",this.tooltip[0].style.top="",this.tooltip[0].style.maxWidth="",this.tooltip.find(".arrow").removeAttr("style"),this.detachOpenEvents(),0===$(".popover").not(".is-hidden").length&&($(document).off("mouseup.tooltip keydown.tooltip"),$("body").off("resize.tooltip")),this.element.removeAttr("aria-owns"),this.isPopover){var t=this.element.prev("input");t.length&&t.attr("aria-expanded","false").removeAttr("aria-describedby").removeAttr("aria-haspopup").removeAttr("aria-owns")}this.element.triggerHandler("hide",[this.tooltip]),this.settings.onHidden&&this.settings.onHidden({api:this,elem:this.tooltip})}},updated:function(e){e&&(this.settings=H.mergeSettings(this.element,e,this.settings));var t=this;return"immediate"===t.settings.trigger?setTimeout(function(){t.show()},100):t.setContent(),this},detachOpenEvents:function(){var e=this;this.tooltip.off("click.".concat(ai)),$(document).off(["keydown.".concat(ai,"-").concat(e.uniqueId),"mouseup.".concat(ai,"-").concat(e.uniqueId),"touchend.".concat(ai,"-").concat(e.uniqueId)].join(" ")),$("body").off(["resize.".concat(ai),"scroll.".concat(ai)].join(" ")),this.element.closest(".modal-body-wrapper").off("scroll.".concat(ai)),this.element.closest(".scrollable").off("scroll.".concat(ai)),this.element.closest(".datagrid-body").off("scroll.".concat(ai))},teardown:function(){return this.timer&&this.timer.destroy&&this.timer.destroy(!0),this.description.remove(),this.descriptionId=void 0,this.activeElement=void 0,this.tooltip.hasClass("is-hidden")||this.hide(),this.reopenDelay&&delete this.reopenDelay,this.tooltip&&this.tooltip.length&&(this.tooltip.data("place")&&this.tooltip.data("place").destroy(),this.tooltip.data(this.componentName)&&($.removeData(this.tooltip[0],this.componentName),delete this._componentName)),this.element.off(["mouseenter.".concat(ai),"mouseleave.".concat(ai),"longpress.".concat(ai),"click.".concat(ai),"updated.".concat(ai),"focus.".concat(ai),"blur.".concat(ai)].join(" ")),de.removeClass(this.element[0],"has-tooltip"),this.detachOpenEvents(),$(window).off("orientationchange.".concat(ai)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],this.componentName),delete this._componentName}},$.fn.tooltip=function(s){return this.each(function(){var e=$.data(this,ai);e?e.updated(s):e=$.data(this,ai,new rl(this,s))})};var Fs="notificationbadge",Pu={position:"upper-right",color:"alert",attribute:null};function vo(s,e){this.settings=H.mergeSettings(s,e,Pu),this.element=$(s),this.init()}vo.prototype={init:function(){return this.build().handleEvents()},build:function(){if(this.element.hasClass("btn-tertiary")||this.element.hasClass("btn-icon")&&!this.element.hasClass("application-menu-trigger")){var e=this.element.find("svg");this.notificationBadgeContainerEl=$('<span class="notification-badge-container"></span>'),this.notificationBadgeContainerEl.insertAfter(e)}else this.notificationBadgeContainerEl=this.element.append('<span class="notification-badge-container"></span>');var t='\n      <span class="notification-dot notification-dot-'.concat(this.settings.position," notification-dot-").concat(this.settings.color,'"></span>');return this.element.find(".notification-badge-container").append(t),H.addAttributes(this.element.find(".notification-badge-container"),this,this.settings.attributes,"container"),H.addAttributes(this.element.find(".notification-badge-container .notification-dot"),this,this.settings.attributes,"dot"),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(Fs),function(){e.updated()}),this},updated:function(){return this.teardown().init()},show:function(){this.element.find(".notification-dot").removeClass("is-disabled")},hide:function(){this.element.find(".notification-dot").addClass("is-disabled")},teardown:function(){return this.element.off("updated.".concat(Fs)),this},destroy:function(){this.teardown(),this.element&&(this.element.find(".notification-badge-container").remove(),$.removeData(this.element[0],Fs))}},$.fn.notificationbadge=function(s){return this.each(function(){var e=$.data(this,Fs);e?e.updated(s):e=$.data(this,Fs,new vo(this,s))})};var lr="button",ol=["default","btn","btn-primary","btn-secondary","btn-tertiary","btn-destructive","btn-generative"],cr=["default","btn-icon","btn-menu","btn-actions","btn-toggle","icon-favorite","btn-editor","input"],ll=["icon-favorite","btn-toggle"],gd={style:ol[0],type:cr[0],toggleOnIcon:null,toggleOffIcon:null,hideMenuArrow:null,replaceText:!1,ripple:!1,hitbox:!1,validate:!1,notificationBadge:!1,notificationBadgeOptions:{position:"upper-right",color:"alert"},attributes:null};function mo(s,e){this.element=$(s),this.settings=H.mergeSettings(s,e,gd),this.init()}mo.prototype={get tooltipAPI(){return this.element.data("tooltip")},get icon(){return this.element[0].querySelector("svg:not(.ripple-effect):not(.icon-dropdown)")},get disabled(){return this.element.parent().is(".spinbox-wrapper")?this.isDisabled(this.element.parent().find("input")):this.isDisabled(this.element)},set disabled(s){this.element[0].disabled=!0===s},init:function(){void 0!==this.settings.buttonsetAPI&&"function"==typeof this.settings.buttonsetAPI.render&&(this.buttonsetAPI=this.settings.buttonsetAPI,delete this.settings.buttonsetAPI),this.getSettingsFromElement(),this.render()},createNotificationBadge:function(){!this.settings.notificationBadge||this.element.find(".notification-badge-container").length>0||this.element.notificationbadge({position:this.settings.notificationBadgeOptions.position,color:this.settings.notificationBadgeOptions.color})},animateWithJS:function(e){var i=e[0].style,n="".concat(parseFloat(i.left)-100,"px"),a="".concat(parseFloat(i.top)-100,"px");e[0].style.opacity="0.4",e.animate({opacity:0,left:n,top:a,width:200,height:200},1e3)},createRipple:function(e){if(!(this.disabled||e&&(void 0!==e.which&&1!==e.which||-1===["click","touchstart"].indexOf(e.type)))){$("svg.ripple-effect",this.element).remove();var i,n,t=this.element.offset();e&&(e.originalEvent instanceof MouseEvent?(i=e.pageX-t.left,n=e.pageY-t.top):(e=e.originalEvent)&&e.touches&&1===e.touches.length&&(i=e.touches[0].pageX-t.left,n=e.touches[0].pageY-t.top)),i||(i=this.element.outerWidth()/2),n||(n=this.element.outerHeight()/2);var a=$('<svg class="ripple-effect" focusable="false" aria-hidden="true" role="presentation">\n      <circle r="0" class="ripple-circle"></circle>\n    </svg>');a[0].style.left="".concat(i,"px"),a[0].style.top="".concat(n,"px"),this.settings.hitbox?$(this.hitboxArea).prepend(a):this.element.prepend(a),!$.fn.cssPropSupport("animation")||xe.browser.isSafari&&!xe.features.touch||"firefox"===xe.browser.name?(a.removeClass("is-animation"),this.animateWithJS(a)):$("svg.ripple-effect",this.element).addClass("is-animation"),setTimeout(function(){a.remove()},1e3)}},render:function(){var e=this;this.renderAttributes(),this.createNotificationBadge();var t=this.element.prop("disabled");this.tertiaryGenerativeIcon='\n      <svg width="18" height="18" viewBox="0 0 18 18" fill="none" class="icon tertiary">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M6 2H4.5V6.25C4.5 6.80228 4.05228 7.25 3.5 7.25H2V8.75H3.5C4.05228 8.75 4.5 9.19772 4.5 9.75V14H6V9.75C6 9.19772 6.44772 8.75 7 8.75H8.5V7.25H7C6.44772 7.25 6 6.80228 6 6.25V2ZM15 3H13.5V4.25C13.5 4.80228 13.0523 5.25 12.5 5.25H11.5V6.75H12.5C13.0523 6.75 13.5 7.19772 13.5 7.75V9H15V7.75C15 7.19772 15.4477 6.75 16 6.75H17V5.25H16C15.4477 5.25 15 4.80228 15 4.25V3ZM10.5 11H12V11.75C12 12.3023 12.4477 12.75 13 12.75H13.5V14.25H13C12.4477 14.25 12 14.6977 12 15.25V16H10.5V15.25C10.5 14.6977 10.0523 14.25 9.5 14.25H9V12.75H9.5C10.0523 12.75 10.5 12.3023 10.5 11.75V11Z" fill="'.concat(t?"url(#paint-linear-disabled)":"url(#paint-linear)",'"></path>\n        <defs>\n          <linearGradient id="').concat(t?"paint-linear-disabled":"paint-linear",'" x1="14.6681" y1="-32.5625" x2="31.7256" y2="-26.8896" gradientUnits="userSpaceOnUse">\n          <stop offset="0.117757" stop-color="#254A92"></stop>\n          <stop offset="0.927091" stop-color="#10B7A6"></stop>\n          </linearGradient>\n        </defs>\n      </svg>\n    ');var i=this.element[0].classList;ol.indexOf(this.settings.style)>0&&i.add(this.settings.style),cr.indexOf(this.settings.type)>0&&i.add(this.settings.type),this.element.parent().is(".buttonset")&&(this.element.find("span").is(".audible")||this.element.addClass("has-text"));var n=this.buttonsetAPI,a=!1;if(n&&("modal"===n.settings.style&&(a=!0),["default","btn","btn-modal"].indexOf(this.settings.style)>-1&&(i[a?"remove":"add"]("btn"),i[a?"add":"remove"]("btn-modal")),["btn-primary","btn-modal-primary"].indexOf(this.settings.style)>-1&&(i[a?"remove":"add"]("btn-primary"),i[a?"add":"remove"]("btn-modal-primary")),["btn-secondary","btn-modal-secondary"].indexOf(this.settings.style)>-1&&(i[a?"remove":"add"]("btn-secondary"),i[a?"add":"remove"]("btn-modal-secondary"))),this.settings.isDefault&&(this.settings.style="btn-primary",i.remove("btn-primary"),i.add("btn-modal-primary"),delete this.settings.isDefault),"string"==typeof this.settings.cssClass&&(this.element[0].className+=Fe.stripHTML(" ".concat(this.settings.cssClass))),this.settings.hitbox&&(this.element.addClass("hitbox"),this.hitboxArea=document.createElement("span"),this.hitboxArea.classList.add("hitbox-area"),this.element.prepend(this.hitboxArea)),this.settings.forceDisable&&(this.disabled=this.settings.disabled,delete this.settings.disabled,delete this.settings.forceDisable),this.element.hasClass("btn-tertiary")&&this.element.hasClass("btn-generative")&&this.element.find("span").after(this.tertiaryGenerativeIcon),this.settings.disabled&&(this.disabled=!0===this.settings.disabled,delete this.settings.disabled),this.settings.text){var p=this.element[0].querySelector("span"),v=p instanceof HTMLElement;v||(p=this.element);var b=this.settings.text||$(p).text().trim();b=Fe.stripHTML(b),v||(this.element[0].innerText="",p=document.createElement("span"),this.element.append($(p)),(this.settings.audible||["btn-icon","btn-actions"].indexOf(this.settings.type)>-1)&&p.classList.add("audible")),p.innerText=b}var T,w=this.icon;this.settings.icon?T=this.settings.icon:"btn-toggle"===this.settings.type?T=this.pressed?this.settings.toggleOnIcon:this.settings.toggleOffIcon:"icon-favorite"===this.settings.type?T=this.pressed?"icon-star-filled":"icon-star-outlined":"btn-actions"===this.settings.type&&(T="icon-more");var k=0!==this.element.closest(".card").length,A=0!==this.element.closest(".widget").length;if(T&&(T=Fe.stripHTML(T),w instanceof SVGElement||w instanceof HTMLElement?k||A?this.element.prepend($(w)):w.querySelector("use").setAttribute("href","#".concat(T)):(w=$.createIconElement({icon:T.replace("icon-","")}),this.element.prepend($(w)))),this.element.hasClass("btn-menu")&&!this.element.hasClass("btn-icon")&&!this.element.hasClass("btn-actions")){var M=this.element.children("svg.icon"),L=M.find("use"),z=!1;if(M.length>0&&L.length>=1){var q=L.last().attr("href");!q&&L.last().attr("xlink:href")&&(q=L.last().attr("xlink:href")),z=q.indexOf("#icon-dropdown")>-1}z||(M=$.createIconElement({icon:"dropdown",classes:["icon-dropdown"]}),this.element.append(M)),M.hasClass("icon-dropdown")||M.addClass("icon-dropdown"),this.settings.replaceText&&this.element.on("selected.content",function(_,G){$(this).find("span").text(G.text())}),this.settings.hideMenuArrow&&M.remove()}if(ll.indexOf(this.settings.type)>-1&&(this.element.on("click.favorite",function(){e.toggle()}),this.pressed=this.pressed),this.element.hasClass("btn-actions")&&!this.element.parents(".field").length&&!this.element.parents(".toolbar").length&&!this.tooltipAPI){if(!this.element.attr("title")){var O=B.translate("More");return void this.element.attr("title",O).tooltip({content:O})}(!this.settings.title||""===this.element.attr("title"))&&this.tooltipAPI.destroy()}i[this.settings.ripple?"remove":"add"]("no-ripple"),this.settings.ripple&&this.element.on("touchstart.button click.button",function(_){e.createRipple(_)}),this.element.data("hidefocus")||this.element.hideFocus()},renderAttributes:function(){Array.isArray(this.settings.attributes)&&H.addAttributes(this.element,this,this.settings.attributes)},getSettingsFromElement:function(){var a,e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i={},n=this.element.parents(".buttonset, .modal-buttonset");n.length&&(a=n.data("buttonset"))&&(this.buttonsetAPI=a);var o=this.element[0].classList||"";if(ol.forEach(function(b){"default"!==b&&o.contains(b)&&(i.style=b)}),this.buttonsetAPI&&"modal"===this.buttonsetAPI.settings.style){var l={"btn-modal":"btn","btn-modal-primary":"btn-primary","btn-modal-secondary":"btn-secondary"};Object.keys(l).forEach(function(b){o.contains(b)&&(i.style=l[b])})}cr.forEach(function(b){"default"!==b&&o.contains(b)&&(i.type=b)}),this.settings.disabled||(i.disabled=this.disabled);var d=this.element[0].getAttribute("aria-pressed");void 0!==d&&(i.pressed=!0===d,"icon-favorite"===i.type&&(i.toggleOnIcon="icon-star-filled",i.toggleOffIcon="icon-star-outlined"));var h=this.element[0].id;"string"==typeof h&&h.length&&(i.id=h);var p=this.element[0].title;return"string"==typeof p&&p.length&&(i.title=p),o.contains("no-ripple")&&(i.ripple=!1),this.element[0].querySelector("span.audible")&&(i.audible=!0),t||Object.keys(i).forEach(function(b){e.settings[b]=i[b]}),i},performAnimation:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.renderGenerativeStyles(),t&&(this.generativeAnimation=setTimeout(function(){e.removeGenerativeStyles()},t))},startAnimation:function(){this.performAnimation()},stopAnimation:function(){clearTimeout(this.generativeAnimation),this.generativeAnimation=void 0,this.removeGenerativeStyles()},renderGenerativeStyles:function(){var e=this.element;e.find("svg").replaceWith('\n      <div class="dot-flashing-container">\n        <div class="dot"></div>\n        <div class="dot"></div>\n        <div class="dot"></div>\n      </div>\n    '),e.addClass("loading"),e.css("pointer-events","none")},removeGenerativeStyles:function(){var e=this.element;e.hasClass("btn-tertiary")&&e.hasClass("btn-generative")?e.find(".dot-flashing-container").replaceWith(this.tertiaryGenerativeIcon):e.find(".dot-flashing-container").replaceWith('\n      <svg role="presentation" aria-hidden="true" focusable="false" class="icon">\n        <use href="#icon-insights-smart-panel"></use>\n      </svg>\n    '),e.removeClass("loading"),e.css("pointer-events","")},toData:function(e){var t=this,i={};return Object.keys(this.settings).forEach(function(n){i[n]=t.settings[n]}),i.pressed=this.pressed,e&&(i.element=this.element[0]),i},get pressed(){return-1!==ll.indexOf(this.settings.type)&&"true"===this.element[0].getAttribute("aria-pressed")},set pressed(s){var n,e=!0===s,t=this.settings.toggleOffIcon&&this.settings.toggleOnIcon,i=$(this.icon);switch(this.element[0].setAttributeNS(null,"aria-pressed","x"),this.element[0].setAttributeNS(null,"aria-pressed",e),this.element[0].classList[e?"add":"remove"]("is-pressed"),this.settings.type){case"icon-favorite":n=e?"icon-star-filled":"icon-star-outlined";break;case"btn-toggle":t&&(n=e?this.settings.toggleOnIcon:this.settings.toggleOffIcon)}0===i.length||"string"!=typeof n||(i.changeIcon(n),H.fixSVGIcons(i))},toggle:function(){this.pressed=!this.pressed},isDisabled:function(e){return(e=e instanceof jQuery?e:$(e)).is("[disabled]")&&!e.is('[disabled="false"]')},teardown:function(){this.element.off(["click.".concat(lr),"touchstart.".concat(lr)].join(" "));var e=this.tooltipAPI;this.element.hasClass("btn-actions")&&e&&e.destroy();var t=this.element.data("hidefocus");t&&t.destroy();var i=this.element.data("notificationbadge");return i&&i.destroy(),this},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.render(),this},destroy:function(){this.teardown(),this.buttonsetAPI&&delete this.buttonsetAPI,$.removeData(this.element[0],lr)}},$.fn.button=function(e){return this.each(function(){var t=$.data(this,lr);t?t.updated(e):t=$.data(this,lr,new mo(this,e))})};var dc="buttonset",Bu={buttons:[],detectHTMLButtons:!1,style:"default"};function dr(s,e){if(!(s instanceof HTMLElement))throw new Error("ButtonSet component needs an HTMLElement as a base element.");this.element=s,this.settings=H.mergeSettings(s,e,Bu),this.init()}dr.prototype={set disabled(s){this.element.classList[(s=!0===s)?"add":"remove"]("is-disabled"),this.buttons&&this.buttons.forEach(function(e){e.disabled=s})},init:function(){this.build(),this.render()},build:function(e){var t=this;(!this.buttons||!e)&&this.reset(),Array.isArray(this.settings.buttons)&&this.settings.buttons.length?this.settings.buttons.forEach(function(i){t.add(i)}):this.detectHTMLButtons()},render:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.element.classList,n={default:"buttonset",modal:"modal-buttonset"};Object.keys(n).forEach(function(a){e.settings.style!==a&&i.remove(n[a])}),i.add(n[this.settings.style]),t||this.buttons.forEach(function(a){a.render()})},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"object"!==rt(e))throw new Error("Settings object is required to add a new button to the ButtonSet");var i=e.element,n=i instanceof HTMLElement;n||(i=document.createElement("button"));var a=Fe.stripHTML(e.id);"string"==typeof a&&a.length>0&&(i.id=a);var o=$(i);(t||!n)&&$(this.element).append(o),e.buttonsetAPI=this,o.button(e);var l=o.data("button");this.buttons.push(l)},remove:function(){var i,n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)throw new Error("No Button API, HTMLElement, or ID string provided");if(void 0!==e&&"function"==typeof e.destroy)n=e.element;else if(e instanceof HTMLElement?i=e:"string"==typeof e&&(i=$(this.element).find("#".concat(e.replace("#","")))),n=$(i),void 0===(e=$(i).data("button"))||"function"!=typeof e.destroy)throw new Error("The provided Button API did not match a button existing in this ButtonSet.");e.destroy(),t&&n.remove(),this.buttons=this.buttons.filter(function(a){return a!==e})},removeAll:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.buttons.forEach(function(i){e.remove(i,t)})},reset:function(){this.buttons=[]},at:function(){return this.buttons[arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1]},detectHTMLButtons:function(){var e=this;this.settings.detectHTMLButtons&&(this.reset(),(H.getArrayFromList(this.element.querySelectorAll("button"))||[]).forEach(function(i){var n=$(i).data("button");n||($(i).button(),n=$(i).data("button"));var a=n.getSettingsFromElement(!0);a.element=i,e.add(a)}))},toData:function(){var e=H.extend({},this.settings);return this.buttons.forEach(function(t){e.buttons.push(t.toData())}),e},teardown:function(e){return this.removeAll(e),this.reset(),this},updated:function(e){var t=this.settings.buttons;return e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),Array.isArray(e.buttons)&&t!==e.buttons?(this.settings.buttons=e.buttons,this.teardown(!0),this.init()):(this.render(!0),this.buttons.forEach(function(i){i.updated()})),this},destroy:function(){this.teardown(!0),$.removeData(this.element,dc)}},$.fn.buttonset=function(e){return this.each(function(){var t=$.data(this,dc);t?t.updated(e):t=$.data(this,dc,new dr(this,e))})};var cl="hyperlink",uc={};function hc(s,e){return this.init(s,e)}hc.prototype={init:function(e,t){return!this.element&&e instanceof HTMLElement&&(this.element=e),"object"===rt(t)&&(this.settings=H.mergeSettings(this.element,t,this.settings||uc)),this.element.classList.add("hyperlink"),this.focusBehavior||(this.focusBehavior=new cn(this.element)),this},handleEvents:function(){return this},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return this}},$.fn.hyperlink=function(s){return this.each(function(){var e=$.data(this,cl);e?e.updated(s):(e=$.data(this,cl,new hc(this,s))).destroy=function(){this.teardown(),$.removeData(this.element,cl),$.removeData(this.element,"hidefocus")}})};var bt={EMPTY_STRING:"",PLACEHOLDER_CHAR:"_",CARET_TRAP:"[]",NON_DIGITS_REGEX:/[^\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/g,DIGITS_REGEX:/[\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/,ALPHAS_REGEX:/[\u00C0-\u017Fa-zA-Z]/,ANY_REGEX:/[\u00C0-\u017Fa-zA-Z0-9]/,DEFAULT_API_OPTIONS:{locale:"en-US",pattern:void 0,pipe:void 0}};bt.LEGACY_DEFS={"#":bt.DIGITS_REGEX,0:bt.DIGITS_REGEX,x:bt.ALPHAS_REGEX,"*":bt.ANY_REGEX,"?":/./,"~":/[-0-9]/,a:/[APap]/,m:/[Mm]/},bt.DEFAULT_CONFORM_OPTIONS={caretTrapIndexes:[],guide:!0,previousMaskResult:bt.EMPTY_STRING,placeholderChar:bt.PLACEHOLDER_CHAR,placeholder:bt.EMPTY_STRING,selection:{start:0},keepCharacterPositions:!0};var Ru={prefix:bt.EMPTY_STRING,suffix:bt.EMPTY_STRING,allowThousandsSeparator:!0,symbols:{currency:"$",decimal:".",negative:"-",thousands:","},allowDecimal:!0,decimalLimit:2,locale:"",requireDecimal:!1,allowNegative:!1,allowLeadingZeros:!1,integerLimit:null};function D(s){return s.split(bt.EMPTY_STRING).map(function(e){return bt.DIGITS_REGEX.test(e)?bt.DIGITS_REGEX:e})}function V(s,e){var t={any:bt.ANY_REGEX,digits:bt.DIGITS_REGEX,alphas:bt.ALPHAS_REGEX};t[e]||(e="any");for(var i=s.toString().length,n=[];i>0;)n.push(t[e]),i-=1;return n}bt.numberMask=function(e,t){(!(t=H.mergeSettings(void 0,t,Ru)).locale||!t.locale.length)&&(t.locale=B.currentLocale.name),t.allowLeadingZeroes&&(gi("allowLeadingZeros","allowLeadingZeroes","Number Mask"),t.allowLeadingZeros=t.allowLeadingZeroes,t.allowLeadingZeroes=void 0);var i=t.prefix,n=t.suffix,a=t.symbols.decimal,o=t.symbols.thousands,l=i&&i.length||0,d=n&&n.length||0,h=o&&o.length||0;function p(v){"string"!=typeof v&&(v=bt.EMPTY_STRING);var b=v.length;if(v===bt.EMPTY_STRING||v[0]===i[0]&&1===b)return i.split(bt.EMPTY_STRING).concat([bt.DIGITS_REGEX]).concat(n.split(bt.EMPTY_STRING));if(v===a&&t.allowDecimal)return i.split(bt.EMPTY_STRING).concat(["0",bt.CARET_TRAP,a,bt.CARET_TRAP,bt.DIGITS_REGEX]).concat(n.split(bt.EMPTY_STRING));var A,M,L,w=v.lastIndexOf(a),T=-1!==w,k=v[0]===t.symbols.negative&&t.allowNegative;if(v.slice(-1*d)===n&&(v=v.slice(0,-1*d)),T?(A=v.slice(v.slice(0,l)===i?l:0,w),M=D((M=v.slice(w+1,b)).replace(bt.NON_DIGITS_REGEX,bt.EMPTY_STRING))):A=v.slice(0,l)===i?v.slice(l):v,t.integerLimit&&"number"==typeof t.integerLimit){var z="."===o?"[.]":"".concat(o),q=(A.match(new RegExp(z,"g"))||[]).length;A=A.slice(0,t.integerLimit+(k?1:0)+q*h)}return A=A.replace(bt.NON_DIGITS_REGEX,bt.EMPTY_STRING),t.allowLeadingZeros||(A=A.replace(/^0+(0$|[^0])/,"$1")),A=t.allowThousandsSeparator?function R(s,e,t,i){if(""===s||isNaN(s))return s;var n=B.toLocaleString(Number(s),t.locale,i,e);if(t&&t.allowLeadingZeros&&0===s.indexOf("0")){var a=function x(s){return"".concat(s).match(/^0*/)[0].length}(s);for(0===n.indexOf("0")&&(n=n.substring(1));a>0;)a-=1,n="0".concat(n)}return n}(A,o,t,{maximumFractionDigits:t.decimalLimit,style:"decimal",useGrouping:!0}):A,L=D(A),(T&&t.allowDecimal||!0===t.requireDecimal)&&(v[w-1]!==a&&L.push(bt.CARET_TRAP),L.push(a,bt.CARET_TRAP),M&&("number"==typeof t.decimalLimit&&(M=M.slice(0,t.decimalLimit)),L=L.concat(M)),!0===t.requireDecimal&&v[w-1]===a&&L.push(bt.DIGITS_REGEX)),l>0&&(L=i.split(bt.EMPTY_STRING).concat(L)),k&&(L.length===l&&L.push(bt.DIGITS_REGEX),L=[/-/].concat(L)),n.length>0&&(L=L.concat(n.split(bt.EMPTY_STRING))),{mask:L}}return p.instanceOf="createNumberMask",p(e)},bt.rangeNumberMask=function(s,e){(e=e||{}).delimeter=e.delimeter||"-";var t=B.currentLocale.data.numbers.minusSign,i=function(b){return new RegExp("".concat(b),"g")},a=function(b,w){return(b.match(w)||[]).length},o=s.split(")".concat(e.delimeter,"(")),l=function(b){var w=b.substr(-1),T_start=a(b,/[\u0028]/g),k=(a(b,/[\u0029]/g),[]);if(1===T_start){var A=e.allowNegative&&b.substr(1,1)===t;(k=bt.numberMask(A?b.substr(1):b,e)).splice(0,0,/[\u0028]/g),")"===w?k.push(/[\u0029]/g):w===e.delimeter&&(k.push(/[\u0029]/g),k.push(i("[".concat(e.delimeter,"]"))))}return k};"number"==typeof e.integerLimit&&(e.integerLimit*=2,e.integerLimit+=e.delimeter.length+4);var b,d=[],h=[];if("("===s.substr(0,1)&&o.length)if(2===a(s,/[\u0028]/g)&&2===a(s,/[\u0029]/g)&&1===a(s,i("\\u0029".concat(e.delimeter,"\\u0028")))&&o[1].indexOf(")")!==o[1].length-1){var p=o[1].substr(0,o[1].indexOf(")")+1);d=l("".concat(o[0],")")),h=[i("[".concat(e.delimeter,"]"))].concat(Mi(l("(".concat(p))))}else(d=l(2===o.length?"".concat(o[0],")"):o[0])).length&&2===o.length&&(b="".concat(o[0],")"),/^\u0028.+\u0029$/g.test(b))&&(h=[i("[".concat(e.delimeter,"]"))].concat(Mi(l("(".concat(o[1])))));return{mask:[].concat(Mi(d),Mi(h))}},bt.adjustRangeNumber=function(s,e,t){if("rangeNumber"===t.settings.process){var i,n,a,o,l,d,h=t&&null!==(i=t.settings)&&void 0!==i&&null!==(i=i?.patternOptions)&&void 0!==i&&i?.delimeter?t.settings.patternOptions.delimeter:"-",p=e&&(null===(n=e.previousMaskResult)||void 0===n?void 0:n?.substr(-1))===h;e&&1===(null===(a=e.selection)||void 0===a?void 0:a?.start)&&1===(null===(o=e.selection)||void 0===o?void 0:o?.end)&&"("!==s?(s="(".concat(s),e.selection.start++,e.selection.end++):e&&1!==(null===(l=e.selection)||void 0===l?void 0:l?.start)&&1!==(null===(d=e.selection)||void 0===d?void 0:d?.end)&&")"===s.substr(-1)&&1===(s.match(/\u0028/g)||[]).length&&!p&&(s="".concat(s).concat(h,"("),e.selection.start+=2,e.selection.end+=2)}return{rawValue:s,opts:e}};var Z={format:"M/d/yyyy",symbols:{timeSeparator:":",dayPeriodSeparator:" ",dateSeparator:"/"}},ee={dd:31,d:31,MMM:void 0,MM:12,M:12,y:9999,yy:99,yyyy:9999,h:12,hh:12,H:24,HH:24,mm:60,ss:60,a:void 0};function ye(s){return this.configure(s),this}bt.dateMask=function(e,t){t=H.mergeSettings(void 0,t,Z);var i=[],n=bt.DIGITS_REGEX,a=t.format,o=st.removeDuplicates(a.replace(/[dMyHhmsa]+/g,"")),l=function ae(s){var t=s.split("").map(function(i){return" "===i&&(i="\\s"),"-"===i&&(i="\\-"),i});return new RegExp("[(".concat(t.join("|"),")]+"))}(o),d=a.match(/(d{1,2}|M{1,4}|y{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|a{1}|z{1,4}|E{1,4})/g),h=e.split(l),p=ee;return d.forEach(function(v,b){var T,w=p[v];if("a"===v||"ah"===v){var k="AM",A="PM";if(B.calendar()){k=B.calendar().dayPeriods[0],A=B.calendar().dayPeriods[1];for(var M=[],L=0;L<k.length;L++)k[L]&&A[L]&&k[L].toLowerCase()===A[L].toLowerCase()?M.push(k[L].toLowerCase()):M.push(k[L].toLowerCase()+(A[L]?A[L].toLowerCase():""));for(var z=0;z<M.length;z++)i.push(new RegExp("[".concat(M[z],"]"),"i"))}else i.push(/[aApP]/,/[Mm]/);if("ah"===v){var q=h[b].replace(k,"").replace(A,"");i=i.concat(V(q,"digits"))}}else if(w)if(h[b]){var O=h[b].toString(),_=parseInt(O.substr(0,1),10),G=parseInt(p[v].toString().substr(0,1),10);1===v.length&&_>G||"0"!==O&&1===O.length&&_<=G&&void 0!==h[b+1]&&"HH"!==v.toUpperCase()?i.push(n):i=i.concat(V(w,"digits"))}else for(T=w.toString().length;T>0;)i.push(n),T-=1;else i=i.concat(V(v,"alphas"));var j=d[b+1];if(void 0!==j){var X=v.toString().length,fe=a.indexOf(v)+X,he=a.indexOf(j),we=a.substring(fe,he).split(bt.EMPTY_STRING),re=[bt.CARET_TRAP].concat(we.concat(bt.CARET_TRAP));i=i.concat(re)}}),{mask:i,literals:o.split(""),literalRegex:l}},bt.rangeDateMask=function(s,e){var t=s.split(e.delimeter),i=e.delimeter.split(""),n=bt.dateMask(t[0],e),a=[];return t[1]&&(a=bt.dateMask(t[1],e)),{mask:n.mask.concat(i.concat(a.mask)),literals:i,literalRegex:a.literalRegex}},bt.autocorrectedDatePipe=function(e,t){t.dateFormat||(t.dateFormat=B.calendar().dateFormat.short);var i=[],n=t.dateFormat.split(/[^dMy]+/),a={d:31,M:12,yy:99,yyyy:9999},o={d:1,M:1,yy:0,yyyy:1},l=e.conformedValue.split("");n.forEach(function(b){var w=t.dateFormat.indexOf(b),T=parseInt(a[b].toString().substr(0,1),10);parseInt(l[w],10)>T&&(l[w+1]=l[w],l[w]=0,i.push(w))});var d=new RegExp("[^".concat(e.placeholderChar,"]")),h=e.placeholder.split(d),p=e.conformedValue.split(/\D/g);return!n.some(function(b,w){var T=h[w].length>b.length?h[w].length:b.length,k=p[w]||"",A=parseInt(k,10);return A>a[b]||k.length===T&&A<o[b]})&&{value:l.join(""),characterIndexes:i}},ye.prototype={configure:function(e){if(this.settings||(this.settings={}),!e)return this;if(e.locale&&(this.locale=e.locale),e.pattern)if(Array.isArray(e.pattern)||"function"==typeof e.pattern)this.pattern=e.pattern;else if("string"==typeof e.pattern){var t=H.mergeSettings(void 0,e.definitions||{},bt.LEGACY_DEFS);this.pattern=this._convertPatternFromString(e.pattern,t)}return e.patternOptions&&(this.patternOptions=e.patternOptions),this},process:function(e,t){if("string"!=typeof e)throw new Error("No string provided");var i={},n={originalValue:e,caretPos:t.selection.start,maskResult:!1};if("function"==typeof this.pattern){t.patternOptions||(t.patternOptions={});var a=H.extend({},this.patternOptions,t.patternOptions,{caretPos:t.selection.start,previousMaskResult:t.previousMaskResult});i=this.pattern(e,a),Array.isArray(i)&&(i={mask:i});var o=this._processCaretTraps(i.mask);i.mask=o.maskWithoutCaretTraps,i.caretTrapIndexes=o.indexes,t.caretTrapIndexes=o.indexes}else i={mask:this.pattern};if(!1===i.mask)return n;try{n=this._conformToMask(e,i,t)}catch{return n}if(t.patternOptions&&t.patternOptions.delimeter&&n.conformedValue&&n.conformedValue!==e&&(n.caretPos=n.conformedValue.length),"function"==typeof t.pipe){var l={};try{l=t.pipe(n,t)}catch{l=!1}!1===l?(n.pipeResult=!1,n.pipedValue=t.previousMaskResult):H.isString(l)?(n.pipeResult=!0,n.pipedValue=l,n.pipedCharIndexes=[]):n=H.extend({},n,{pipeResult:l.result,pipedValue:l.value,pipedCharIndexes:l.characterIndexes})}return n},_conformToMask:function(e,t,i){(i=H.mergeSettings(void 0,i,bt.DEFAULT_CONFORM_OPTIONS)).placeholder=this._convertMaskToPlaceholder(t.mask,i.placeholderChar);var n=!1,a=!1===i.guide&&void 0!==i.previousMaskResult,o=e.length,l=i.previousMaskResult.length,d=this.pattern.length,h=i.placeholder.length||0,p=i.placeholderChar,v=i.selection.start,b=bt.EMPTY_STRING,w=o-l,T=w>0,k=v+(T?-w:0),A=k+Math.abs(w);if(!0===i.keepCharacterPositions&&!T){for(var M=bt.EMPTY_STRING,L=k;L<A;L++)i.placeholder[L]===p&&(M+=p);e=e.slice(0,k)+M+e.slice(k,o)}for(var q=e.split(bt.EMPTY_STRING).map(function z(ot,He){return{char:ot,isNew:He>=k&&He<A}}),O=o-1;O>=0;O--){var _=q[O];_!==i.placeholderChar&&_===i.placeholder[O>=k&&l===d?O-w:O]&&q.splice(O,1)}e:for(var j=0;j<h;j++){var X=i.placeholder[j];if(X===p){if(q.length>0)for(;q.length>0;){var fe=q.shift(),he=e.slice(j,j+1);if(fe.char===p&&!0!==a){b+=p;continue e}if(t.literalRegex&&t.literalRegex.test(fe.char)&&he&&(he===fe.char||he===p)){if(T&&t.literals.indexOf(e[j-1])>-1){v++;continue e}var we=new RegExp("(".concat(fe.char,")"),"g"),re=i.placeholder.match(we).length;e.match(we).length<=re&&(b+=fe.char);for(var le=i.placeholder.slice(j).indexOf(fe.char);le>0;)j++,le--;continue e}if(t.mask[j].test(fe.char)){if(!0===i.keepCharacterPositions&&!1!==fe.isNew&&i.previousMaskResult!==bt.EMPTY_STRING&&!1!==i.guide&&T){for(var Te=q.length,ge=null,ce=0;ce<Te;ce++){var Be=q[ce];if(Be.char!==p&&!1===Be.isNew)break;if(Be.char===p){ge=ce;break}}null!==ge?(b+=fe.char,q.splice(ge,1)):j--}else b+=fe.char;continue e}n=!0}!1===a&&(b+=i.placeholder.substr(j,h));break}b+=X}if(a&&!1===T){for(var qe=null,Oe=0;Oe<b.length;Oe++)i.placeholder[Oe]===p&&(qe=Oe);null!==qe?b=b.substr(0,qe+1):""!==e&&b.indexOf(e)>-1?v+=e.length:b=bt.EMPTY_STRING}return{caretPos:v,caretTrapIndexes:i.caretTrapIndexes,conformedValue:b,charactersRejected:n,placeholder:i.placeholder,placeholderChar:p,maskResult:!0}},_processCaretTraps:function(e){for(var t=[],i=e.indexOf(bt.CARET_TRAP);-1!==i;)t.push(i),e.splice(i,1),i=e.indexOf(bt.CARET_TRAP);return{maskWithoutCaretTraps:e,indexes:t}},_convertMaskToPlaceholder:function(e,t){if(Array.isArray(e)||(e=[]),t||(t=bt.PLACEHOLDER_CHAR),-1!==e.indexOf(t))throw new Error("".concat("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is:").concat(JSON.stringify(t),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map(function(n){return n instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(n)?t:n}).join(bt.EMPTY_STRING)},adjustCaretPosition:function(e){if(0===e.caretPos)return 0;function t(Be){return Be!==t}var n=e.previousMaskResult.length,a=e.placeholder?e.placeholder.length:0,o=e.conformedValue?e.conformedValue.length:0,l=e.rawValue.length-n,d=l>0;if(l>1&&!d&&0!==n)return e.caretPos;var w,T,b=0;if(!d||e.previousMaskResult!==e.conformedValue&&e.conformedValue!==e.placeholder){var k=e.conformedValue.toLowerCase(),L=e.rawValue.toLowerCase().substr(0,e.caretPos).split(bt.EMPTY_STRING).filter(function(Be){return-1!==k.indexOf(Be)});T=L[L.length-1];var z=e.previousPlaceholder.substr(0,L.length).split(bt.EMPTY_STRING).filter(t).length,q=e.placeholder.substr(0,L.length).split(bt.EMPTY_STRING).filter(t).length;!d&&(q!==z||void 0!==e.previousPlaceholder[L.length-1]&&void 0!==e.placeholder[L.length-2]&&e.previousPlaceholder[L.length-1]!==e.placeholderChar&&e.previousPlaceholder[L.length-1]!==e.placeholder[L.length-1]&&e.previousPlaceholder[L.length-1]===e.placeholder[L.length-2])&&z>0&&e.placeholder.indexOf(T)>-1&&void 0!==e.rawValue[e.caretPos]&&(w=!0,T=e.rawValue[e.caretPos]);var G=[];e.indexesOfPipedChars&&(G=e.indexesOfPipedChars.map(function(Be){return k[Be]}));for(var j=G.filter(function(Be){return Be===T}).length,X=L.filter(function(Be){return Be===T}).length,he=e.placeholder.substr(0,e.placeholder.indexOf(e.placeholderChar)).split(bt.EMPTY_STRING).filter(function(Be,qe){return Be===T&&e.rawValue[qe]!==Be}).length+X+j+(w?1:0),we=0,re=0;re<o&&(b=re+1,k[re]===T&&we++,!(we>=he));re++);}else b=e.caretPos-l;if(d){for(var le=b,Te=b;Te<=a;Te++)if(!e.placeholder||(e.placeholder[Te]===e.placeholderChar&&(le=Te),e.placeholder[Te]===e.placeholderChar||-1!==e.caretTrapIndexes.indexOf(Te)||Te===a))return le}else if(w){for(var ge=b-1;ge>=0;ge--)if(e.conformedValue[ge]===T||-1!==e.caretTrapIndexes.indexOf(ge)||0===ge)return ge}else for(var ce=b;ce>=0;ce--)if(e.placeholder[ce-1]===e.placeholderChar||-1!==e.caretTrapIndexes.indexOf(ce)||0===ce)return ce},_convertPatternFromString:function(e,t){for(var l,d,i=[],n=Object.keys(t),o=0;o<e.length;o++)i.push((void 0,(d=n.indexOf(l=e[o]))>-1&&(l=t[n[d]]),l));return i}};var ve="mask",Me={definitions:void 0,guide:!1,keepCharacterPositions:!1,maskAPI:ye,locale:null,pattern:void 0,patternOptions:{},placeholderChar:"_",pipe:void 0,process:void 0,processOnBlur:!0,processOnInitialize:!0};function ze(s,e){return this.element=s,this.settings=H.mergeSettings(this.element,e,Me),this.init()}ze.prototype={get type(){return this.element.type},init:function(){this.setLocale()},build:function(){if(this._replaceLegacySettings(),"string"==typeof this.settings.process)switch(this.settings.patternOptions.locale||(this.settings.patternOptions.locale=this.settings.locale),this.settings.process){case"number":this.settings.pattern=bt.numberMask,this.element.classList.add("is-number-mask");break;case"rangeNumber":this.settings.pattern=bt.rangeNumberMask,this.element.classList.add("is-range-number-mask");break;case"date":var t=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&!this.settings.patternOptions&&!this.settings.patternOptions.format&&(this.settings.patternOptions.format=t.settings.dateFormat),this.settings.pattern=bt.dateMask;break;case"rangeDate":var i=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions.format=i.settings.dateFormat),this.settings.pattern=bt.rangeDateMask;break;default:this.element.classList.remove(["is-number-mask"].join(" "))}return this.mask=new this.settings.maskAPI(this.settings),this.state={previousMaskResult:""},this.handleEvents(),this.settings.processOnInitialize&&this.process(),this},setLocale:function(){var e=this;this.locale=B.currentLocale,this.settings.locale?B.getLocale(this.settings.locale).done(function(t){e.locale=B.cultures[t],e.build()}):this.build()},handleEvents:function(){var e=this;return this.element.addEventListener("keydown",function(t){"Insert"===t.key&&(e.insertOn=!0)}),this.element.addEventListener("keyup",function(t){"Insert"===t.key&&(e.insertOn=!1)}),this.changeEventHandler=function(){e.hasTriggeredChangeEvent=!0},this.element.addEventListener("change",this.changeEventHandler),this.focusEventHandler=function(){e.state.previousMaskResult=e.element.value,e.state.initialValue=e.element.value},this.element.addEventListener("focus",this.focusEventHandler),this.inputEventHandler=function(t){return e.hasTriggeredChangeEvent=!1,e.process(t)},this.element.addEventListener("input",this.inputEventHandler),this.blurEventHandler=function(t){if(!0===this.processingJustHappenedOnInput)return t.preventDefault(),!1;if(e.settings.processOnBlur){if(e.element.readOnly)return t.preventDefault(),!1;e._hasChangedValue()&&(e._isEdgeIE()||!e.hasTriggeredChangeEvent)&&($(e.element).trigger("change"),e.hasTriggeredChangeEvent=!0)}return delete e.state.initialValue,e.process(t)},this.element.addEventListener("blur",this.blurEventHandler),this},process:function(e){if(!this.settings.pattern)return!0;var t=this.mask,i=this.settings.patternOptions||{},n=".";this.locale&&this.locale.data&&this.locale.data.numbers&&this.locale.data.numbers.decimal&&(n=this.locale.data.numbers.decimal),i.symbols&&i.symbols.decimal&&(n=i.symbols.decimal),t.pattern||t.configure({pattern:this.settings.pattern,patternOptions:i});var a=this.element.value,o=!1;if(e&&"input"===e.type&&"insertText"===e.inputType&&(""===a?(a=this.state.previousMaskResult,o=!0):e.data===n&&a.indexOf(n)>-1&&(o=!0)),a===this.state.previousMaskResult)return o&&(this.element.value="",this.element.value="".concat(a)),!1;var l=this.element.selectionStart||0,d=this.element.selectionEnd||0;if(this._isAndroid()&&""===this.state.previousMaskResult&&l!==d&&(H.safeSetSelection(a.length,a.length),l=a.length,d=a.length),(this.insertOn||this.settings.useInsert)&&l<a.length){var h=!1,p=this.settings.patternOptions;if("number"===this.settings.process){var v=p.integerLimit;p.allowThousandsSeparator&&(v+=Math.floor(p.integerLimit-3<=0?0:(p.integerLimit-3)/3)),p.allowDecimal&&a.includes(p.symbols.decimal)&&(v+=p.decimalLimit+1),p.allowNegative&&(v+=1),a.length>v&&(h=!0)}else("string"==typeof this.settings.pattern&&a.length>this.settings.pattern.length||this.settings.state&&a.length>this.settings.state.previousPlaceholder.length)&&(h=!0);h&&(/^[!@#$%^&*()_+\-=\\[\]{};':"\\|,.<>\\/?]*$/.test(a.charAt(l))?(a=a.slice(0,l-1)+a.charAt(l)+a.charAt(l-1)+a.slice(l+2),l++,d++):a=a.slice(0,l)+a.slice(l+1))}a=this._getSafeRawValue(a);var w={guide:this.settings.guide,keepCharacterPositions:this.settings.keepCharacterPositions,patternOptions:this.settings.patternOptions,placeholderChar:this.settings.placeholderChar,previousMaskResult:this.state.previousMaskResult,selection:{start:l,end:d}};l!==d&&(w.selection.contents=a.substring(l,d)),"function"==typeof this.settings.pipe&&(w.pipe=this.settings.pipe);var T=bt.adjustRangeNumber(a,w,this),k=t.process(a=T.rawValue,w=T.opts);if(!k.maskResult)return k.maskResult;var A=k.pipedValue?k.pipedValue:k.conformedValue;""!==A&&i&&i.suffix&&A.indexOf(i.suffix)<0&&(A+=this.settings.patternOptions.suffix),w.patternOptions&&w.patternOptions.delimeter&&A&&A!==a&&(a=A);var M={previousMaskResult:this.state.previousMaskResult||"",previousPlaceholder:this.state.previousPlaceholder||"",conformedValue:A,placeholder:k.placeholder,rawValue:a,caretPos:k.caretPos,placeholderChar:this.settings.placeholderChar};k.pipedCharIndexes&&(M.indexesOfPipedChars=k.pipedCharIndexes),k.caretTrapIndexes&&(M.caretTrapIndexes=k.caretTrapIndexes),k.caretPos=t.adjustCaretPosition(M);var L=this.state.previousMaskResult;return this.state.previousMaskResult=A,this.state.previousPlaceholder=k.placeholder,"firefox"===xe.browser.name?this.element.value!==A&&(this.element.value=A):this.element.value=A,H.safeSetSelection(this.element,k.caretPos),L!==A&&($(this.element).trigger("write.mask",[A]),k.maskResult)},_isAndroid:function(){return"android"===(xe&&xe.os&&xe.os.name?xe.os.name:"")},_isEdgeIE:function(){var e=xe&&xe.browser&&xe.browser.name?xe.browser.name:"";return"ie"===e||"edge"===e},_hasChangedValue:function(){return!(this.state&&this.state.previousMaskResult||""===this.state.previousMaskResult)||this.state.previousMaskResult!==this.state.initialValue},_getSafeRawValue:function(e){if(H.isString(e))return e;if(H.isNumber(e))return String(e);if(null==e)return"";throw new Error("".concat('The "value" provided to the Masked Input needs to be a string or a number. The value received was:\n\n').concat(JSON.stringify(e)))},_replaceLegacySettings:function(){var e=["group","number","date","time"];this.settings.patternOptions=this.settings.patternOptions||{},this.settings.patternOptions.symbols=this.settings.patternOptions.symbols||{};var t=this.element.getAttribute("data-mask")||!1;"string"==typeof t&&t.length&&(this.settings.pattern=t);var i=this.element.getAttribute("data-mask-mode")||!1;if(i&&e.indexOf(i)>-1&&(this.settings.mode=i),this.settings.mode&&(-1===e.indexOf(this.settings.mode)&&delete this.settings.mode,this.settings.process="group"===this.settings.mode?void 0:"date"===this.settings.mode?"date":this.settings.mode,delete this.settings.mode),"number"===this.settings.process){this.settings.thousandsSeparator&&(this.settings.patternOptions.allowThousandsSeparator=this.settings.thousandsSeparator,delete this.settings.thousandsSeparator);var n=this.element.getAttribute("data-thousands")||!1;if(n&&(this.settings.patternOptions.allowThousandsSeparator="true"===n),"string"==typeof this.settings.pattern){var a=-1!==this.settings.pattern.indexOf("-");a&&(this.settings.patternOptions.allowNegative=a,this.settings.patternOptions.symbols.negative="-");var l=this.settings.patternOptions&&this.settings.patternOptions.symbols&&this.settings.patternOptions.symbols.thousands?this.settings.patternOptions.symbols.thousands:B.currentLocale.data.numbers?B.currentLocale.data.numbers.group:",",d=-1!==this.settings.pattern.indexOf(l);this.settings.patternOptions.allowThousandsSeparator=d,d&&(this.settings.patternOptions.symbols.thousands=l);var h="string"==typeof this.settings.patternOptions.symbols.decimal?this.settings.patternOptions.symbols.decimal:".",p=this.settings.pattern.split(h);void 0===this.settings.patternOptions.symbols.decimal&&(this.settings.patternOptions.symbols.decimal=B.currentLocale.data.numbers.decimal),this.settings.patternOptions.integerLimit=p[0].replace(/[^#0]/g,"").length,p[1]&&(this.settings.patternOptions.allowDecimal=!0,this.settings.patternOptions.decimalLimit=p[1].toString().replace(/[^#0]/g,"").length,this.settings.patternOptions.symbols.decimal||(this.settings.patternOptions.symbols.decimal=h))}}var b=this.element.getAttribute("data-must-complete")||!1;b&&(this.settings.mustComplete=b),this.element.getAttribute("data-show-currency")&&(this.settings.showSymbol="currency");var A,j,T=this.settings.showSymbol;if(["currency","percent"].indexOf(T)>-1){A="currency"===(j=this.settings.showSymbol)?{char:B.currentLocale.data.currencySign,format:B.currentLocale.data.currencyFormat}:"percent"===j?{char:B.currentLocale.data.numbers.percentSign,format:B.currentLocale.data.numbers.percentFormat}:{};var q,O,G,M="currency"===T?"\xa4":A.char,z=new RegExp(M,"g").exec(A.format),_=-1;if(z&&z.length){if(0===(_=A.format.indexOf(z[0])))G="prefix",q=new RegExp("[^".concat(M,"]\\S"),"g"),O=A.format.replace(q,"");else if(_>0){for(G="suffix",q=new RegExp("\\S[^".concat(M,"]"),"g");/\s/.test(A.format.charAt(_-1));)--_;O=A.format.substr(_).replace(q,"")}"currency"===T&&(O=O.replace("\xa4",A.char)),this.settings.patternOptions[G]=O}}},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return"number"===this.settings.process&&this.element.classList.remove("is-number-mask"),"rangeNumber"===this.settings.process&&this.element.classList.remove("is-range-number-mask"),this.element.removeEventListener("focus",this.focusEventHandler),delete this.focusEventHandler,this.element.removeEventListener("input",this.inputEventHandler),delete this.inputEventHandler,this.blurEventHandler&&(this.element.removeEventListener("blur",this.blurEventHandler),delete this.blurEventHandler),this.changeEventHandler&&(this.element.removeEventListener("change",this.changeEventHandler),delete this.changeEventHandler),this}},$.fn.maskinput=function(s){return this.each(function(){var e=$.data(this,ve);e?e.updated(s):(e=$.data(this,ve,new ze(this,s))).destroy=function(){this.teardown(),$.removeData(this.element,ve)}})},$.fn.maskedinput=$.fn.maskinput,$.fn.mask=$.fn.maskinput;var nt="popupmenu",Ye={menu:null,trigger:"click",autoFocus:!0,mouseFocus:!0,attachToBody:!0,removeOnDestroy:!1,beforeOpen:null,ariaListbox:!1,eventObj:void 0,returnFocus:!0,showArrow:null,triggerSelect:!0,placementOpts:new Rr({containerOffsetX:10,containerOffsetY:"ios"===xe.os.name?25:15,strategies:["flip","shrink"]}),offset:{x:0,y:0},predefined:$(),duplicateMenu:null,stretchToWidestMenuItem:!1,attributes:null,cssClass:null};function Mt(s,e){this.settings=H.mergeSettings(s,e,Ye),this.addDefaultOffset(s,e),this.element=$(s),this.init()}Mt.prototype={init:function(){this.isFirefox="firefox"===xe.browser.name,this.setup(),this.addMarkup(),this.handleEvents(),this.iconFilteringSetup(),"immediate"===this.settings.trigger&&this.open(this.settings.eventObj),this.menu.find(".submenu").length&&this.menu.addClass("has-submenu")},addDefaultOffset:function(e,t){if((void 0===t||0===Object.keys(t).length)&&(e.classList.contains("btn-menu")||e.classList.contains("btn-actions"))){var i=null!==e.closest(".masthead");this.settings.offset={x:0,y:i?0:8}}},isRTL:function(){return xe.rtl},get idString(){if(this.id)return this.id.charAt(0).match(/\d/)?"popupmenu-".concat(this.id):"".concat(this.id)},get isOpen(){return de.hasClass(this.element[0],"is-open")||de.hasClass(this.menu[0],"is-open")},get isFocused(){var s=document.activeElement,e=this.element.is(s),t=this.menu&&this.menu.length&&this.menu[0].contains(s);return!(!e&&!t)},setup:function(){this.element[0].getAttribute("data-popupmenu")&&!this.settings.menu&&(this.settings.menu=this.element[0].getAttribute("data-popupmenu").replace(/#/g,"")),this.settings.menuId&&(this.settings.menu=this.settings.menuId,this.id=this.settings.menuId,this.settings.menuId=void 0),this.id||(this.id=(parseInt($(".popupmenu-wrapper").length,10)+1).toString()),this.predefinedItems=$().add(this.settings.predefined)},setMenuOrgContainment:function(e){if(e&&e.length){var t=e.parent();t.is("body")||(this.menuOrgContainment={parent:t,index:t.children().index(e)},this.menu.data("containment",this.menuOrgContainment))}},insertAtContainment:function(e,t){var i=function(d){return d&&d.length};if(t=t||this.menuOrgContainment||{},i(e)&&i(t.parent)){var n=t.index,a=t.parent,o=a.children().length;n<0&&(n=Math.max(0,o+1+n)),n<o?a.children().eq(n).before(e):a.append(e)}},addMarkup:function(){var e,t,i;if(!this.menu||!this.menu.length)switch(rt(this.settings.menu)){case"string":e=this.settings.menu||this.idString,this.menu=$("#".concat(e)),this.settings.duplicateMenu&&this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.menu.data("trigger",this.element),i=this.menu.data("trigger")[0].id,t=this.menu.clone(),this.setMenuOrgContainment(t),t.detach().appendTo("body"),t.attr("data-trigger",i),this.menu.attr("data-trigger",i));break;case"object":this.menu=null===this.settings.menu?this.element.next(".popupmenu, .popupmenu-wrapper"):$(this.settings.menu),(!(e=this.menu.attr("id"))||""===e)&&(this.menu.attr("id",this.idString),e=this.menu.attr("id")),i=this.element.attr("id")}if(this.menu.is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu,this.menu=this.wrapper.children(".popupmenu").first()),this.menu.parent().is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu.parent()),0!==this.menu.length){this.settings.attributes&&(H.addAttributes(this.element,this,this.settings.attributes,"trigger"),H.addAttributes(this.menu,this,this.settings.attributes,"menu"));var n=this.menu.parent().not(".popupmenu-wrapper, body");this.settings.attachToBody&&n.length>0&&(this.originalParent=this.menu.prev(),this.setMenuOrgContainment(this.menu),this.menu.detach().appendTo("body"),this.settings.duplicateMenu&&this.menu.attr("id","".concat(this.settings.menu,"-original"))),this.menu.is(".popupmenu")||this.menu.addClass("popupmenu").attr("role",this.settings.ariaListbox?"listbox":"menu").attr("aria-labelledby",i),this.menu.data("trigger",this.element),this.wrapper=this.menu.parent(".popupmenu-wrapper"),this.wrapper.length||(this.menu.wrap('<div class="popupmenu-wrapper"></div>'),this.wrapper=this.menu.parent(".popupmenu-wrapper"));var a=this.settings.cssClass;a&&"string"==typeof a&&this.wrapper.addClass(a),this.wrapper.find("svg").each(function(){$(this).data("icon")||$(this).icon()}),0===this.wrapper.parents().filter(function o(){var T=this?this.style.overflow:null;return"auto"!==T&&"visible"!==T&&"scroll"!==T}).length&&(this.wrapper[0].style.position="absolute"),this.menu.find(".popupmenu").each(function(T,k){var A=$(k);A.parent().hasClass("wrapper")||A.wrap('<div class="wrapper"></div>')});var l=!1,d=this.element.parent().attr("class");if(!0===this.settings.showArrow)l=!0;else if(null===this.settings.showArrow){var h=this.element.closest(".toolbar"),p=this.element.closest(".masthead");(this.element.hasClass("btn-menu")||this.element.hasClass("btn-actions")||this.element.hasClass("btn-icon")&&"#icon-more"===this.element.find("use").attr("href")||h.length>0&&!h.is(".formatter-toolbar")||p.length>0||"colorpicker-menu"===this.settings.menu||this.element.is(".searchfield-category-button")||d&&d.indexOf("more")>=0||d&&d.indexOf("btn-group")>=0)&&(l=!0)}if(l){var v=$('<div class="arrow"></div>'),b=this.menu.parent(".popupmenu-wrapper");0===b.find(".arrow").length&&b.addClass("bottom").append(v)}var w=this.element.closest(".field-short").length>0;this.menu[w?"addClass":"removeClass"]("popupmenu-short"),this.element.closest(".masthead").not(".search-results .masthead").length>0&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.element.attr("aria-haspopup",!0),this.element.attr("aria-controls",e),this.markupItems(),this.menu.is(".hidden")&&this.menu.removeClass("hidden"),this.settings.stretchToWidestMenuItem&&this.element.width(parseInt(this.getMaxMenuWidth(),10))}},renderItem:function(e){if(void 0===e)return"";var t=this;function i(z){var q="";return z.forEach(function(O){q+=t.renderItem(O)}),q}if(Array.isArray(e)){var n=i(e),a='<ul class="popupmenu">'.concat(n,"</ul>");return st.stripWhitespace(a)}var o="",l="";if(void 0!==e.separator)return e.heading&&(o+='<li class="heading">'.concat(e.heading,"</li>")),"single"===e.nextSectionSelect?l=" single-selectable-section":"multiple"===e.nextSectionSelect&&(l=" multi-selectable-section"),st.stripWhitespace('\n        <li class="separator'.concat(l,'"></li>\n        ').concat(o,"\n      "));if(e.menu){var d="";e.menuId&&(d=' id="'.concat(e.menuId,'"'));var h="";e.hasIcons&&(h+=" has-icons");var p="";return Array.isArray(e.menu)&&(p=i(e.menu)),e.noMenuWrap?p:st.stripWhitespace("\n        <ul".concat(d,' class="popupmenu').concat(h,'">\n          ').concat(p,"\n        </ul>\n      "))}var v="",b="",w="",T="",k="",A="",M="",L="";return e.disabled&&(v+=" is-disabled"),!1===e.visible&&(b+=" hidden"),e.id&&(T=' id="'.concat(e.id,'"')),"single"===e.selectable&&(k+=" is-selectable"),"multiple"===e.selectable&&(k+=" is-multiselectable"),e.icon&&(w='<svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-'.concat(e.icon,'"></use>\n      </svg>')),Array.isArray(e.submenu)&&(A+=" submenu",M+=this.renderItem(e.submenu),L+='<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-dropdown"></use>\n      </svg>'),st.stripWhitespace('<li class="popupmenu-item'.concat(v).concat(b).concat(k).concat(A,'">\n      <a').concat(T,' href="#">').concat(w,"<span>").concat(e.text,"</span>\n        ").concat(L,"\n      </a>\n      ").concat(M,"\n    </li>"))},toData:function(e){var t={},i=[],n=this;(e=e||{}).contextElement||(e.contextElement=this.menu),e.contextElement instanceof HTMLElement&&(e.contextElement=$(e.contextElement)),e.contextElement.is(".popupmenu-wrapper")&&(e.contextElement=e.contextElement.children("ul"));var a=e.contextElement.attr("id");a&&a.length&&(t.menuId="".concat(a));var l,d,o=e.contextElement.hasClass("has-icons");function h(v){var b=$(v),w={};if(!b.hasClass("heading")){if(b.hasClass("separator")){w.separator=!0,b.hasClass("single-selectable-section")&&(l=!0,w.nextSectionSelect="single"),b.hasClass("multi-selectable-section")&&(d=!0,w.nextSectionSelect="multiple");var T=b.next();return T.hasClass("heading")&&(w.heading=T.text().trim()),w}var k=b.children("a"),A=k.children(".icon:not(.close):not(.icon-dropdown):not(.image-user-status .icon)"),M=k.attr("id");w.text=k.text().trim(),w.disabled=b.hasClass("is-disabled"),w.visible=!b.hasClass("hidden"),"string"==typeof M&&M.length&&(w.id=M),A.length&&A[0]instanceof SVGElement&&(w.icon=A[0].querySelector("use").getAttribute("href").replace("#icon-",""));var L=!l&&!d,z=!n.hasSelectableSeparator(b);w.selectable&&L&&z&&("single"===w.selectable?l=!0:"multiple"===w.selectable&&(d=!0),t.selectable=w.selectable);var q=b.find(".popupmenu");return q.length&&(w.submenu=[],q.first().children().each(function(O,_){var G=h(_);G&&w.submenu.push(G)})),w}}return t.hasIcons=o,e.contextElement.children("li").each(function(v,b){var w=h(b);w&&i.push(w)}),e.noMenuWrap?t=i:t.menu=i,t},markupItems:function(e){var t=this,i=this;e?e instanceof HTMLElement&&(e=$(e)):e=this.menu;var n=e.find("li:not(.heading):not(.separator)");function a(o){var l=$(o),d=l.parents("li"),h=[];return l.add(d).each(function(p,v){h.push($(v).parent().children("li:not(.heading):not(.separator)").index(v))}),h.join("-")}e[0].setAttribute("role","menu"),e[0].setAttribute("aria-labelledby",this.element.attr("id")),n.each(function(o,l){var d=$(l).children("a")[0],h=$(d),p=$(l),v=h.children("span")[0],b=p.children("ul")[0],w=p.children(".wrapper")[0];if(l.setAttribute("role","none"),d){if(d.setAttribute("role",i.settings.ariaListbox?"option":"menuitem"),d.setAttribute("tabindex","-1"),i.settings.attributes){var k=t.element.parents(".flex-toolbar")?"option-".concat(a(l),"-menu-item"):"option-".concat(a(l));H.addAttributes(h,i,i.settings.attributes,k)}if(p.hasClass("is-disabled")?(p.addClass("is-disabled"),d.setAttribute("aria-disabled","true"),d.setAttribute("disabled",!0)):(p.removeClass("is-disabled"),h.removeAttr("aria-disabled"),d.removeAttribute("disabled")),b instanceof HTMLElement&&b.classList.add("popupmenu"),w instanceof HTMLElement&&(l.className+="".concat(de.hasAnyClass(l)?" ":"","submenu"),(b=$(w).children("ul")[0])instanceof HTMLElement&&b.classList.add("popupmenu"),i.element.parent(".datagrid-cell-wrapper").length>0&&$(l).children("div.wrapper").length>0&&($(l).addClass("has-selectable-submenu"),$(l).find(".popupmenu").children().addClass("is-selectable"))),de.hasClass(l,"submenu")&&(v||(d.innerHTML="<span>".concat(d.innerHTML,"</span>"),v=h.children("span")[0]),0===h.find("svg.arrow").length&&h.append($.createIconElement({classes:["arrow","icon-dropdown"],icon:"dropdown"})),d.setAttribute("aria-haspopup","true")),de.hasClass(l,"is-checked")&&(d.setAttribute("role","menuitemcheckbox"),d.setAttribute("aria-checked",!0),!i.hasSelectableSeparator(l))){var A="is-selectable";i.menu.is(".is-multiselectable")&&(A="is-multiselectable"),i.getAdjacentSelectables(l).addClass(A)}de.hasClass(l,"is-not-checked")&&(l.className=l.className.replace("is-not-checked",""),d.setAttribute("role","menuitemcheckbox"),d.removeAttribute("aria-checked"))}}),i.refreshHasIcons(e)},refreshHasIcons:function(e){e||(e=this.menu);var i=e.find("li:not(.heading):not(.separator):not(.hidden)").filter(function(n,a){return $(a).find(".icon:not(.close):not(.icon-dropdown):not(.image-user-status .icon)").length>0}).length>0;e.toggleClass("has-icons",i)},refreshMenuItem:function(e,t,i){if(e&&e instanceof HTMLElement&&t&&$(this.menu)[0].contains(e)){var o,n=e.querySelector("a"),a=e.querySelector(".icon:not(.close):not(.icon-dropdown)");if(t.text&&n.innerText.trim()!==t.text&&(n.innerText="".concat(t.text)),!0===t.disabled?-1===e.className.indexOf("hidden")&&e.classList.add("is-disabled"):e.className.indexOf("is-disabled")>-1&&e.classList.remove("is-disabled"),!0===t.visible?e.className.indexOf("hidden")>-1&&e.classList.remove("hidden"):-1===e.className.indexOf("hidden")&&e.classList.add("visible"),t.icon?a&&((o=a.querySelector("use"))&&o.getAttribute("href").replace("#icon-","")!==t.icon&&a.remove(),o.setAttribute("href","#icon-".concat(t.icon))):a&&a.remove(),t.submenu){e.classList.add("submenu");var l=e.querySelector(".popupmenu");if(l)for(var d=l.children,h=0;h<t.submenu.length;h++)t.submenu[h].isSubmenuItem=!0,this.refreshMenuItem(d.item(h),t.submenu[h],i)}"function"==typeof i&&i.apply(this,[e,t])}},handleEvents:function(){var e=this,t="rightClick"!==this.settings.trigger;function n(l){return l.stopPropagation(),l.preventDefault(),!1}function o(l,d){if(e.keydownThenClick)delete e.keydownThenClick;else if(!(l.button>(!0===d?0:2)||e.element.is(":disabled"))){if(["android","ios"].indexOf(xe.os.name)>-1&&(e.holdingDownClick=!0),d&&e.isOpen)return void e.close();!function a(l){if(e.element.hasClass("is-disabled"))return l.stopPropagation(),void l.preventDefault();var d="rightClick"===e.settings.trigger;if(l.stopPropagation(),l.preventDefault(),d&&e.menu.hasClass("is-open"))return e.close(),void e.open(l);e.menu.add(e.element).hasClass("is-open")?e.close():e.open(l)}(l)}}"immediate"===this.settings.trigger||(t&&this.element.off("click.popupmenu").on("click.popupmenu",function(l){o(l,!0)}),t||(this.menu.parent().on("contextmenu.popupmenu",n),xe.features.touch?this.element.on("touchstart.popupmenu",function(l){"ios"===xe.os.name&&"INPUT"!==l.target.tagName&&l.preventDefault(),$(l.target).addClass("longpress-target")}).on("touchend.popupmenu",function(l){$(l.target).removeClass("longpress-target")}).on("longpress.popupmenu",function(l,d){l.stopPropagation(),e.openedWithTouch=!0,o(d)}):this.element.on("contextmenu.popupmenu",function(l){n(l),o(l)}))),this.menu.off("dragstart.popupmenu").on("dragstart.popupmenu","a",function(){return!1}),this.element.not(".autocomplete, ul").on("keydown.popupmenu",function(l){switch(l.which){case 13:case 32:"click"===e.settings.trigger&&(e.keydownThenClick=!0,e.open(l));break;case 121:l.shiftKey&&e.open(l)}}).on("updated.popupmenu",function(l,d){l.stopPropagation(),e.updated(d)})},handleKeys:function(){var e=this;this.menu.on("click.popupmenu","li",function(i){var n=$(this).find("a");e.handleItemClick(i,n)}),this.menu.on("click.btn-menu.".concat(this.id),function(i){i.target.closest(".switch")||i.preventDefault()});var t="li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled):not(.is-placeholder)";this.settings.mouseFocus&&this.menu.on("mouseenter.popupmenu","li",function(){e.highlight($(this).children("a"))}),setTimeout(function(){$(document).off("keydown.popupmenu.".concat(this.id)).on("keydown.popupmenu.".concat(this.id),function(i){var n=i.which;if(27===n)return i.stopPropagation(),i.stopImmediatePropagation(),e.close(!0),!1;if(9===n&&(i.stopPropagation(),e.close(!0)),32===n){i.stopPropagation();var a=$(i.target),o=a.find("input:checkbox");if(o.length)return o.trigger("click"),!0;var l=$();if(a.is(".tab")||a.parent().is(".tab")||a.is(".tab-more"))return i.preventDefault(),!0;if(a.is("li")&&(l=a.children("a")),a.is("a")&&(l=a),l.length)return l.trigger("click"),!0}var d=e.menu.find(":focus");d[0]||(d=$(e.menu[0].querySelector(".is-focused a")));var v,b,w,T,h="colorpicker-menu"===e.settings.menu,p=e.element.is(".autocomplete");37===n&&!p&&(i.stopPropagation(),i.preventDefault(),d.closest(".popupmenu")[0]!==e.menu[0]&&d.closest(".popupmenu").length>0&&(d.closest(".popupmenu").removeClass("is-open").parent().parent().removeClass("is-submenu-open"),e.highlight(d.closest(".popupmenu").parent().prev("a")))),v=function(_){var j;return _.parent().prevAll(t).each(function(){if(!j){var X=$(this),fe=X.children("a");X.is(".is-disabled")||!0===fe.prop("disabled")||(j=fe)}}),j||T(_)},T=function(_){var G=_.parent().prevAll(t).last(),j=G.children("a");return G.is(".is-disabled")||!0===j.prop("disabled")?b(j):j},b=function(_){var j;return _.parent().nextAll(t).each(function(){if(!j){var X=$(this),fe=X.children("a");X.is(".is-disabled")||!0===fe.prop("disabled")||(j=fe)}}),j||T(_)},w=function(_){var G=_.parent().nextAll(t).last(),j=G.children("a");return G.is(".is-disabled")||!0===j.prop("disabled")?v(j):j};for(var k=0,A=e.menu.children(t),M=A.length,L=0,z=0;z<M;z++){var q=A[z];if(0===L&&(L=q.offsetTop),q.offsetTop!==L)break;k++}if(!h&&38===n||h&&n===(B.isRTL()?39:37)){if(i.stopPropagation(),i.preventDefault(),0===d.parent().prevAll(t).length)return void e.highlight(0===d.length?e.menu.children(t).last().find("a"):w(d));e.highlight(v(d))}if(h&&38===n&&(i.stopPropagation(),i.preventDefault(),d.parent().prevAll(t).length>0&&e.highlight($(d.parent().prevAll(t)[k-1]).find("a"))),39===n&&!p&&(i.stopPropagation(),i.preventDefault(),d.parent().hasClass("submenu")&&(e.openSubmenu(d.parent()),e.highlight(d.parent().find(".popupmenu a:first")))),!h&&40===n||h&&n===(B.isRTL()?37:39)&&!p){if(i.stopPropagation(),i.preventDefault(),0===d.parent().nextAll(t).length)return void e.highlight(0===d.length?e.menu.children(t).first().find("a"):T(d));e.highlight(b(d))}h&&40===n&&(i.stopPropagation(),i.preventDefault(),d.parent().nextAll(t).length>0&&e.highlight($(d.parent().nextAll(t)[k-1]).find("a")))})},1)},handleItemClick:function(e,t){var i=t.attr("href"),n=[t];return!(!e&&!t||!t.length||t.hasClass("no-results")||(t.parent().is(".submenu, .hidden, .is-disabled")||t[0].disabled?(e.preventDefault(),1):t.find("input[checkbox]").length>0||(this.element.hasClass("btn-filter")&&(this.iconFilteringUpdate(t),e.preventDefault()),this.isSelectable(t.parent())&&(n=this.select(t)),t.parent().hasClass("is-toggleable")&&t.parent().toggleClass("is-checked"),e&&this.settings.triggerSelect&&(1===n.length&&n.push(void 0),n.push(!0),this.element.triggerHandler("selected",n)),!(this.menu.hasClass("is-multiselectable")||this.isInMultiselectSection(t)||(this.close(),this.element.is(".autocomplete")))&&(i&&"#"!==i.charAt(0)?("_blank"===t.attr("target")?window.open(i,"_blank"):window.location.href=i,0):(e&&(e.preventDefault(),e.stopPropagation()),0)))))},iconFilteringSetup:function(e){if(this.element.hasClass("btn-filter")){var t=this.element.find("svg.icon-dropdown"),i=e||$("li.is-checked a",this.menu)||$("li:first a",this.menu),n=i.find("span").text();1===t.length&&this.element.append($.createIconElement({classes:"icon-dropdown",icon:"dropdown"})),t.first().changeIcon(i.find("svg").getIconName()),this.element.find(".audible").text(n)}},iconFilteringUpdate:function(e){if(this.element.hasClass("btn-filter")){var t=e||$("li.is-checked a",this.menu)||$("li:first a",this.menu),i=t.find("span").text();this.element.find(".audible").text(i),this.element.find("svg:not(.ripple-effect):first").changeIcon(t.find("svg").getIconName())}},getPositionFromEvent:function(e){var t=0,i=0;if(e||(e=window.event),!e)return{};if(e.changedTouches){var n=e.changedTouches[0];t=n.pageX,i=n.pageY}else e.pageX||e.pageY?(t=e.pageX,i=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);return{x:t,y:i}},position:function(e){var t=this,i=this.element,n=this.isRTL(),a=this.menu.parent(".popupmenu-wrapper"),o=this.getPositionFromEvent(e),l_width=this.menu[0].offsetWidth;if(a.length){var d=this.element[0].offsetWidth;"click"===this.settings.trigger&&d>l_width&&this.menu.width(d),i.is("svg, .icon")&&i.closest(".tab").length&&(i=i.closest(".tab")),a.find(".arrow").removeAttr("style");var p=$.extend({},this.settings.placementOpts),v=["flip"];v.push("shrink-y"),p.strategies=v,"immediate"===this.settings.trigger&&this.settings.eventObj||"rightClick"===this.settings.trigger?(p.x=h(0,"x")-(n?l_width:0)+(n?-1:1)*this.settings.offset.x,p.y=h(0,"y")+this.settings.offset.y,0===p.x&&0===p.y&&(p.x=this.settings.offset.x||0,p.y=this.settings.offset.y||0,p.parent=this.element,p.placement="bottom",p.parentXAlignment=n?"right":"left")):(p.x=this.settings.offset.x||0,p.y=this.settings.offset.y||0,p.parent=this.element,p.placement="bottom",p.strategies.push("nudge"));var b=i.parents(".toolbar"),w=b.length>0,T=i.parents(".title").length>0,k=w&&b.children(".buttonset, .title").length>1,A=i.parents(".pager-pagesize").length>0;b.parents(".header").length>0&&(p.y+=5),i.is(".btn-menu")?A?L():w?!k||T?M():L():M():i.is(".btn-actions")||i.is(".tab-more")?L():i.is(".btn-split-menu, .tab, .searchfield-category-button")&&!i.parent(".pager-pagesize").length&&M(),i.parents(".masthead").length>0&&function z(){p.y+=15}();var q=this.element.parents(".page-container:not(.tab-container)");q.length&&(p.container=q.first()),a.one("afterplace.popupmenu",function(O,_){t.handleAfterPlace(O,_)}),this.wrapperPlace=new Or(a,p),this.wrapperPlace.place(p)}function h(O,_){return o[_="x"===_||"y"===_?_:"x"]}function M(){p.parentXAlignment=n?"right":"left"}function L(){p.parentXAlignment=n?"left":"right"}},handleAfterPlace:function(e,t){var i=this.menu.parent(".popupmenu-wrapper");return this.wrapperPlace.setArrowPosition(e,t,i),t.height<this.menu[0].offsetHeight&&this.menu[0].classList.contains("colorpicker")&&this.menu[0].classList.add("has-scrollbar"),t.height&&(i[0].style.height="",this.menu[0].style.height=t.height+(/(px|%)/i.test("".concat(t.height))?"":"px")),t.width&&(i[0].style.width="",this.menu[0].style.width=t.width+(/(px|%)/i.test("".concat(t.width))?"":"px")),i.triggerHandler("popupmenuafterplace",[t]),t},callSource:function(e,t,i,n){if("function"==typeof this.settings.beforeOpen){var a=this,o=this.menu;if(!(de.isElement(i)&&$(i).is(".popupmenu, .submenu")&&(o=$(i),i.hasClass("is-open")))){var l=function(p){if(o.children().filter(function(T,k){return-1===a.predefinedItems.index(k)}).off().remove(),!1===p)return!1;var b=$(p);o.append(b);var w=o.parent(".wrapper, .popupmenu-wrapper");return w.length||(w=o.wrap('<div class="wrapper">').parent()),w.removeAttr("style"),a.markupItems(o),t&&(o.is(a.menu)?a.open(e,!0):a.openSubmenu(w.parent("li"),!0)),!0},d={};if(o.is(this.menu)||(d.contextElement=o),d.element=this.element,d.isSubmenu=n,"string"==typeof this.settings.beforeOpen)return void window[this.settings.beforeOpen](l,d);this.settings.beforeOpen(l,d)}}},getMaxMenuWidth:function(){if(!(this.menu instanceof $))return 0;var e=!this.isOpen;e&&(this.wrapper.css({left:"-999999px"}),this.menu.addClass("is-open"));var t=this.menu.width();return e&&(this.wrapper.css({left:""}),this.menu.removeClass("is-open")),t},open:function(e,t,i){var n=this;if(this.menu&&this.menu.length&&(this.element.hasClass("autocomplete")||!1!==this.element.triggerHandler("beforeopen",[this.menu,this]))&&(t||(this.callSource(e,!0),!this.settings.beforeOpen))){if(!i&&"ios"===xe.os.name)return void setTimeout(function(){n.open(e,t,!0)},400);$(".popupmenu.is-open").filter(function(){return 0===$(this).parents(".popupmenu").length}).not(this.menu).each(function(){var T=$(this).data("trigger");if(T&&T.length){var k=$(this).data("trigger").data("popupmenu");k&&"function"==typeof k.close&&k.close()}});var l=this.element.data("tooltip");l&&l.visible&&l.hide();var d=$(".dropdown.is-open");if(d.length>0){var h=d.parent().prev().data("dropdown");h&&h.closeList("cancel")}var p=document.querySelector(".application-menu.is-open");p instanceof HTMLElement&&!p.contains(this.element[0])&&!p.contains(this.menu[0])&&$(document).triggerHandler("dismiss-applicationmenu"),this.element.addClass("is-open"),this.menu.addClass("is-open").attr("aria-hidden","false"),this.element.hasClass("inverse")&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.position(e),H.fixSVGIcons(this.menu),this.element.closest(".header").length>0&&(this.menu.parent()[0].style.zIndex="9001"),this.menu.find("a").each(function(){var T=$(this),k=T.parent();k.hasClass("is-disabled")?(k.addClass("is-disabled"),T.attr("aria-disabled","true"),T.attr("disabled","disabled")):(k.removeClass("is-disabled"),T.removeAttr("aria-disabled"),T.removeAttr("disabled"))}),setTimeout(function(){$(document).on("touchend.popupmenu.".concat(n.id," click.popupmenu.").concat(n.id),function(T){var k="colorpicker-menu"===n.settings.menu;if(2!==T.button){if(n.holdingDownClick)return void delete n.holdingDownClick;$(T.target).is(n.element)&&!k&&"rightClick"!==n.settings.trigger||(0===$(T.target).closest(".popupmenu").length&&n.close(!0,"rightClick"===n.settings.trigger),$(T.target).hasClass("swatch")&&setTimeout(function(){n.close()},150))}}),void 0===window.orientation&&$("body").on("resize.popupmenu",function(){n.handleCloseEvent()}),$(window).on("scroll.popupmenu",function(){setTimeout(function(){n.close()},150)}),$(".datagrid-wrapper").on("scroll.popupmenu",function(){setTimeout(function(){n.close()},150)}),$(".scrollable, .modal.is-visible .modal-body-wrapper").on("scroll.popupmenu",function(){setTimeout(function(){n.close()},150)}),n.element.triggerHandler("open",[n.menu])},300),$("iframe").each(function(){var T=$(this);T.ready(function(){try{T.contents().find("body").on("click.popupmenu",function(){n.close()})}catch{}})}),this.handleKeys();var b,w,v=0;n.menu.find(".popupmenu").removeClass("is-open"),n.menu.on("mouseenter.popupmenu touchend.popupmenu",".submenu:not(.is-disabled)",function(T){if(!$(T.target).hasClass("popupmenu")){var k=$(this);b=T.pageX,clearTimeout(n.submenuOpenTimeout),n.submenuOpenTimeout=setTimeout(function(){n.openSubmenu(k)},300),$(document).on("mousemove.popupmenu.".concat(this.id),function(A){v=A.pageX})}}).on("mouseleave.popupmenu",".submenu",function(){$(document).off("mousemove.popupmenu.".concat(this.id));var k=((w=$(this).find("ul")).parent(".wrapper").length>0?parseInt(w.parent(".wrapper")[0].style.left,10):0)<0,A=w.parents(".submenu").length>0,M=v-b<3.5;k&&(M=v-b>=0),(M||A)&&(w.removeClass("is-open").removeAttr("style"),w.parent(".wrapper").removeAttr("style"),w.parent().parent().removeClass("is-submenu-open"),w=null),clearTimeout(n.submenuOpenTimeout)}),n.settings.autoFocus&&setTimeout(function(){var T=":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)",k=n.menu.children(T).find(".is-selected").children("a");k.length||(k=n.menu.children(T).first().children("a")),n.highlight(k),n.element.triggerHandler("afteropen",[n.menu])},1)}},handleCloseEvent:function(){this.holdingDownClick||this.close()},openSubmenu:function(e,t){if(!de.hasClass(e,"is-disabled")&&!e[0].disabled){var i=e.children(".wrapper, .popupmenu");i.length&&i.is(".wrapper")&&(i=i.children(".popupmenu"));var n=this.element.triggerHandler("beforeopen",[i,this]);!1!==n&&(!t&&(n=this.callSource(null,!0,i,!0),this.settings.beforeOpen)||this.showSubmenu(e))}},showSubmenu:function(e){this.element.triggerHandler("show-submenu",[e]);var t=e.children(".wrapper").filter(":first"),i=this.isRTL();if(0===t.length){var a=e.children("ul").filter(":first");a.wrap('<div class="wrapper"></div>'),t=a.parent()}var d,o=t.children(".popupmenu"),l=e.position().left+e.outerWidth();e.parent().find(".popupmenu").removeClass("is-open").removeAttr("style"),t.children(".popupmenu").addClass("is-open"),d=t.outerWidth(),i&&(l=e.position().left-d),t[0].style.left="".concat(l,"px"),t[0].style.top="".concat(parseInt(e.position().top,10)-5,"px");var h=o.outerWidth();if((t.offset().left+h>$(window).width()+$(document).scrollLeft()||i&&t.offset().left<0)&&(t[0].style.left="-9999px",h=o.outerWidth(),l=e.position().left-h,i&&(l=t.closest(".popupmenu").outerWidth()-4),t[0].style.left="".concat(l,"px"),(t.offset().left<0||i&&t.offset().left+h>$(window).width()+$(document).scrollLeft())&&(l=e.position().left-h+Math.abs(t.offset().left)+40,i&&(l=e.position().left-h-30),t[0].style.left="".concat(l,"px"),h=o.outerWidth()),t.offset().left+h>$(window).width()+$(document).scrollLeft()||i&&t.offset().left<0)){var v=t.offset().left+h-($(window).width()+$(document).scrollLeft());o[0].style.width="".concat(h-=v,"px")}var b=o.outerHeight(),w=this.settings.placementOpts.containerOffsetY;if(t.offset().top+b>window.innerHeight-w+$(document).scrollTop()){var k=t.offset().top+b-(window.innerHeight+$(document).scrollTop());if(t[0].style.top="".concat(t.position().top-k-w,"px"),t.offset().top+b>window.innerHeight+$(document).scrollTop()){var A=e.parents(".popupmenu-wrapper:first").offset().top;t[0].style.top="".concat(window.innerHeight+$(document).scrollTop()-b-A,"px")}if(t.offset().top-$(document).scrollTop()<0&&(t[0].style.top=0,t[0].style.top="".concat(-1*t.offset().top,"px"),b=o.outerHeight()),t.offset().top+b>window.innerHeight+$(document).scrollTop()){var M=t.offset().top+b-(window.innerHeight+$(document).scrollTop());o[0].style.height="".concat(b=b-M-32,"px")}}e.parent().find(".is-submenu-open").removeClass("is-submenu-open"),e.addClass("is-submenu-open")},highlight:function(e){if(e&&e.length){var t=e.parent();t.parent().children("li").removeClass("is-focused"),t.addClass("is-focused"),this.element.is(".autocomplete")&&(t.parent().children("li").removeClass("is-selected"),t.addClass("is-selected")),e&&e.focus(),t.closest(".header").scrollTop(0)}},select:function(e){var t=this.menu.is(".is-selectable"),i=this.menu.is(".is-multiselectable"),n=this.isInSingleSelectSection(e),a=this.isInMultiselectSection(e),o=e.parent(),l=[e];return o.hasClass("is-selectable")&&!e.find(".icon").length||t||n?(o.prevUntil(".heading, .separator").add(o.nextUntil(".heading, .separator")).removeClass("is-checked"),o.addClass("is-checked"),l.push("selected"),l):o.hasClass("is-multiselectable")||i||a?o.hasClass("is-checked")?(o.removeClass("is-checked"),l.push("deselected"),l):(o.addClass("is-checked"),l.push("selected"),l):l},getSelected:function(){return this.element.is(".popupmenu")&&this.element.is(".is-selectable, .is-multiselectable")?this.element.children(".is-checked").children("a"):this.menu.is(".is-selectable, .is-multiselectable")?this.menu.children(".is-checked").children("a"):$()},isSelectable:function(e){return $(e).is(".is-selectable, .is-multiselectable")||this.hasSelectableSeparator(e)||this.menu.hasClass("is-selectable")||this.menu.hasClass("is-multiselectable")},getSelectableSeparator:function(e){return $(e).prevAll(".separator.single-selectable-section, .separator.multi-selectable-section").first()},hasSelectableSeparator:function(e){var t=this.getSelectableSeparator(e);return t&&t.length},getAdjacentSelectables:function(e){var t=this.getSelectableSeparator(e),i=":not(.heading):not(.separator):not(.submenu)";return t&&t.length?$(t).nextUntil(".separator").filter(i):$(e).parent().children("li".concat(i))},isInSelectableSection:function(e){gi("hasSelectableSeparator()","isInSelectableSection()");var t=e.parent().prevAll().filter(".separator").first();return t.hasClass("multi-selectable-section")||t.hasClass("single-selectable-section")},isInSingleSelectSection:function(e){return e.parent().prevAll().filter(".separator").first().hasClass("single-selectable-section")},isInMultiselectSection:function(e){return e.parent().prevAll().filter(".separator").first().hasClass("multi-selectable-section")},detach:function(){var e=this;$(document).off("touchend.popupmenu.".concat(this.id," click.popupmenu.").concat(this.id," keydown.popupmenu")),$(window).off("scroll.popupmenu orientationchange.popupmenu"),$(".datagrid-wrapper").off("scroll.popupmenu"),$("body").off("resize.popupmenu"),$(".scrollable").off("scroll.popupmenu"),this.menu&&this.menu.length&&this.menu.off("click.popupmenu touchend.popupmenu touchcancel.popupmenu dragstart.popupmenu"),setTimeout(function(){e.menu&&e.menu.length&&e.menu.off("click.btn-menu.".concat(e.id))},1),$("iframe").each(function(){var t=$(this);try{t.contents().find("body").off("click.popupmenu touchend.popupmenu touchcancel.popupmenu")}catch{}})},close:function(e,t){if((!e||void 0===e)&&(e=!1),this.menu&&this.isOpen){var i=this.menu.parent(".popupmenu-wrapper"),n=this.menu.find(".popupmenu");if(this.menu.removeClass("is-open").attr("aria-hidden","true"),this.menu[0]&&(this.menu[0].style.height="",this.menu[0].style.width=""),i[0]&&(i[0].style.left="-999px",i[0].style.height="",i[0].style.width=""),this.menu.find(".submenu").off(["mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),this.menu.find(".is-submenu-open").removeClass("is-submenu-open"),this.submenuOpenTimeout&&(clearTimeout(this.submenuOpenTimeout),delete this.submenuOpenTimeout),n[0]&&(n[0].style.left="",n[0].style.top="",n[0].style.height="",n[0].style.width=""),this.menu.find(".is-focused").removeClass("is-focused"),$(document).off(["keydown.popupmenu.".concat(this.id),"click.popupmenu.".concat(this.id),"mousemove.popupmenu.".concat(this.id),"touchend.popupmenu.".concat(self.id)].join(" ")),this.menu.off(["click.popupmenu","touchend.popupmenu","touchcancel.popupmenu","mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),this.menu.find("li").off("click.popupmenu"),delete this.keydownThenClick,delete this.holdingDownClick,this.element.is("ul.popupmenu")&&this.element.closest(".popupmenu-wrapper").prev("button").removeClass("is-open"),this.menu.find(".popupmenu.is-open").removeClass("is-open"),this.element.removeClass("is-open").triggerHandler("close",[e]),this.detach(),"immediate"===this.settings.trigger&&this.destroy(),"INPUT"===this.element[0].tagName&&this.openedWithTouch)return this.element.removeClass("longpress-target"),void delete this.openedWithTouch;delete this.openedWithTouch;var a=!1;if(this.element.is(".colorpicker-editor-button")){var o=this.element.data("toolbaritem")||this.element.data("toolbarflexitem"),l=o?o.toolbarAPI:null;l&&l.overflowedItems.forEach(function(d){"colorpicker"===d.type&&(a=!0)})}if(!t&&this.settings.returnFocus&&!xe.features.touch&&!a){if("function"==typeof this.settings.returnFocus)return void this.settings.returnFocus(this,{triggerElement:this.element[0],menuElement:this.menu[0]});document.activeElement&&"INPUT"===document.activeElement.tagName||this.element&&this.element.focus()}}},teardown:function(){var e,t=this;if(!this.menu||!this.menu.length||!this.menu.parent())return this;var i=this.menu.parent(".popupmenu-wrapper");this.ajaxContent&&this.ajaxContent.off().remove(),this.predefinedItems=$();var a=null===(e=this.menu[0])||void 0===e?void 0:e?.id,o=$('[aria-controls="'.concat(a,'"]')).not(this.element);if(!o.length||"immediate"===this.settings.trigger){var l=this.menu.parent();l.find(".arrow").remove(),l.off("contextmenu.popupmenu"),this.element.hasClass("btn-actions")&&l.removeClass("bottom"),!this.preExistingWrapper&&this.menu.parent().is(".popupmenu-wrapper")&&!o.length&&this.menu.unwrap();var d=this.element.parent().children(".searchfield"),h=this.menu.data("containment");d.length?this.menu.insertAfter(d.first()):this.menuOrgContainment?this.insertAtContainment(this.menu):h?this.insertAtContainment(this.menu,h):this.menu.insertAfter(this.element),this.menu.find(".submenu").children("a").each(function(p,v){var w=$(v).find("span").text()||$(v).text();$(v).find("span, svg").remove(),$(v).text(w)}),this.menu.find(".submenu").removeClass("submenu"),this.menu.find(".popupmenu").each(function(){!function n(p){p.parent().is(".popupmenu-wrapper, .wrapper")&&p.unwrap()}($(this))}),t.wrapperPlace&&(t.wrapperPlace.destroy(),delete t.wrapperPlace),i.off().remove()}return this.menu&&this.menu.length&&this.menu.data("trigger")&&$.removeData(this.menu[0],"trigger"),this.detach(),this.element.removeAttr("aria-controls").removeAttr("aria-haspopup").off("touchend.popupmenu touchcancel.popupmenu click.popupmenu keydown.popupmenu keypress.popupmenu contextmenu.popupmenu updated.popupmenu"),this},updated:function(e){return this.settings=H.mergeSettings(this.element[0],e,this.settings),this.teardown().init()},destroy:function(){var e;this.menu&&(this.close(),this.teardown(),null===(e=this.menu)||void 0===e||e?.triggerHandler("destroy"),this.settings.removeOnDestroy&&this.menu&&this.menu.length&&(this.menu.off().remove(),delete this.menu),$.removeData(this.element[0],nt))}},$.fn.popupmenu=function(s){return this.each(function(){var e=$.data(this,nt);e?e.updated(s):e=$.data(this,nt,new Mt(this,s))})};var Xt="about",Pt={appName:"Infor Application Name",content:void 0,copyrightYear:(new Date).getFullYear(),deviceSpecs:!0,productName:void 0,useDefaultCopyright:!0,version:void 0,showCopyButton:!0};function un(s,e){this.settings=H.mergeSettings(s,e,Pt),this.element=$(s),this.init()}un.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var e=this.element.attr("data-appname");this.isBody=$(this.element).is("body"),this.settings.appName=void 0!==e?e.toString():this.settings.appName;var t=this.element.attr("data-about-content");this.settings.content=void 0!==t?t.toString():this.settings.content;var i=this.element.attr("data-copyright-year");this.settings.copyrightYear=void 0!==i?i.toString():this.settings.copyrightYear;var n=this.element.attr("data-device-specs");n&&(this.settings.deviceSpecs="true"===n);var a=this.element.attr("data-product-name");this.settings.productName=void 0!==a?a.toString():this.settings.productName;var o=this.element.attr("data-use-default");void 0!==o&&(this.settings.useDefaultCopyright="true"===o);var l=this.element.attr("data-version");return this.settings.version=void 0!==l?l.toString():this.settings.version,this.defaultCopyright="".concat(B.translate("AboutText"),' <a class="hyperlink" href="http://www.infor.com" target="_blank">www.infor.com</a>.'),this.defaultCopyright=this.defaultCopyright.replace("{0}",this.settings.copyrightYear),this},build:function(){var e=this;this.modal=$('<div class="modal about" id="about-modal"></div>'),$('<div class="modal-content"></div>').appendTo(this.modal);var t=$('<div class="modal-header"></div>').appendTo(this.modal.find(".modal-content"));$('<div class="close-container"></div>').append($('<button name="close" type="button" class="btn-icon btn-close hide-focus"></button>').append($.createIconElement({icon:"close",classes:"icon-close"})).append("<span>".concat(B.translate("Close"),"'</span>"))).appendTo(t),$.createIconElement({icon:"logo",classes:["icon","about-logo"]}).attr({viewBox:"0 0 44 44"}).appendTo(t),this.title=$('<h1 class="title"></h1>').text(this.settings.appName).appendTo(this.modal.find(".modal-header"));var i=$('<div class="modal-body"></div>').appendTo(this.modal.find(".modal-content"));if(this.settings.version||this.settings.productName){var n=this.settings.productName?"".concat(this.settings.productName," ").concat(this.settings.version):"".concat(this.settings.version);$("<p></p>").text(n).appendTo(i)}if(this.settings.content&&$('<div class="additional-content"></div>').html(this.settings.content).appendTo(i),(this.settings.useDefaultCopyright||!this.settings.content)&&$("<p></p>").html(this.defaultCopyright).appendTo(i),this.settings.deviceSpecs){var o="fr-FR"===B.currentLocale.name||"fr-CA"===B.currentLocale.name?" :":":",l=this.getDeviceSpecs(),d='<span class="platform">'.concat(B.translate("Platform")).concat(o," ").concat(l.os,'</span><br>\n        <span class="locale">').concat(B.translate("Locale")).concat(o," ").concat(B.currentLocale.name,'</span><br>\n        <span class="locale">').concat(B.translate("Language")).concat(o," ").concat(B.currentLanguage.name,'</span><br>\n        <span class="browser">').concat(B.translate("Browser")).concat(o," ".concat(xe.devicespecs.browserVersionName)," ").concat(xe.devicespecs.currentBrowser," (").concat(xe.devicespecs.browserVersion,')</span><br>\n        <span class="locale">').concat(B.translate("BrowserLanguage")).concat(o," ").concat(l.locale,'</span><br>\n        <span class="cookiesEnabled">').concat(B.translate("CookiesEnabled")).concat(o," ").concat(l.cookiesEnabled,'</span><br>\n        <span class="version">').concat(B.translate("Version")).concat(o," ").concat($("html").attr("data-sohoxi-version"),"</span><br>");$("<p".concat(B.isRTL()?' dir="rtl"':"","></p>")).html(d).appendTo(i)}return this.buttons=this.modal.find("button"),this.modal.find(".hide-focus").one("blur",function(){$(this).removeClass("hide-focus")}),this.element.attr("data-modal","about-modal"),$(".modal-body",this.modal)[0].tabIndex=0,this.modal.appendTo("body"),this.modal.modal({trigger:this.isBody?"immediate":"click",attributes:this.settings.attributes}),this.settings.showCopyButton&&$('<button type="button" class="btn-icon" id="copy-to-clipboard" title="'.concat(B.translate("CopyToClipboard"),'">\n          <span>').concat(B.translate("CopyToClipboard"),'</span>\n          <svg role="presentation" aria-hidden="true" focusable="false" class="icon">\n            <use href="#icon-copy"></use>\n          </svg>\n        </button>')).prependTo(this.modal.find(".modal-body-wrapper")).on("click",function(){e.copyToClipBoard()}).tooltip(),this.modal.data("modal").aboutAPI=this,this},copyToClipBoard:function(){var e=document.createElement("div");e.innerHTML=this.modal.find(".modal-body").html(),e.style.position="fixed",e.style.pointerEvents="none",e.style.opacity=0,document.body.appendChild(e),window.getSelection().removeAllRanges();var t=document.createRange();t.selectNode(e),window.getSelection().addRange(t),document.execCommand("copy"),document.body.removeChild(e)},getDeviceSpecs:function(){var i,n,a,e="Microsoft Internet Explorer"===navigator.appName?navigator.userLanguage:navigator.language;return{browser:(i=navigator.userAgent,n=[],a=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(a[1])?(n=/\brv[ :]+(\d+)/g.exec(i)||[],"IE '".concat(n[1])):"Chrome"===a[1]&&null!=(n=i.match(/\b(OPR|Edge)\/(\d+)/))?n.slice(1).join(" ").replace("OPR","Opera"):(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(n=i.match(/version\/(\d+)/i))&&a.splice(1,1,n[1]),a.join(" "))),os:navigator.platform,cookiesEnabled:navigator.cookieEnabled,locale:e}},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),this},close:function(){if(this.isBody)this.destroy();else{this.element.trigger("close.about");var e=this.modal.data("modal");e&&e.close(),this.element.trigger("afterclose.about")}},destroy:function(e){if(this.buttons.off(),this.element.off("open.about"),!0!==e){var t=this.modal.data("modal");t&&(t.element.off("beforeopen.about"),t.aboutAPI=null,t.destroy())}this.element.length>0&&$.removeData(this.element[0],Xt)},handleEvents:function(){var e=this;return this.element.on("open.about",function(t){t.stopPropagation(),e.element.trigger("click")}),this.buttons.filter('[name="done"], [name="close"]').on("click.about",function(){e.close()}),this.element.trigger("beforeopen.about"),this.modal.data("modal").element.on("beforeopen.about",function(){e.modal.find(".modal-body").scrollTop(0)}),this}},$.fn.about=function(s){return this.each(function(){var e=$.data(this,Xt);e?e.updated(s):e=$.data(this,Xt,new un(this,s))})};var gn={direction:"vertical",distance:"auto",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateOpen=function(s){var e=$.fn.transitionEndName();return s=H.mergeSettings(void 0,s,gn),this.each(function(){var l,t=this,i=$(this),n="horizontal"===s.direction?"width":"height",a=n.charAt(0).toUpperCase()+n.slice(1),o=isNaN(s.distance)?"auto":"".concat(parseInt(s.distance,10),"px");function d(){l&&clearTimeout(l),i.data("ignore-animation-once")&&$.removeData(i[0],"ignore-animation-once"),i.data("is-animating")&&$.removeData(i[0],"is-animating"),i.off("".concat(e,".animateopen")),t.style.transition="",t.style[n]=o,i.trigger("animateopencomplete")}i.one("animateopenstart.animation",function(v){v.stopPropagation(),i.off("".concat(e,".animateopen"))}),i.trigger("animateopenstart"),e&&i.one("".concat(e,".animateopen"),d),i.data("is-animating",!0);var h=this.style[n];this.style[n]=o;var p=getComputedStyle(this)[n];this.style[n]=h,"offset".concat(a),this.style.transition="".concat(n," ").concat(s.timing,"ms ").concat(s.transition),l=setTimeout(d,s.timing),this.style[n]=p,(i.is(":hidden")||i.is(".no-transition")||i.data("ignore-animation-once"))&&d()})};var ha={direction:"vertical",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateClosed=function(s){var e=$.fn.transitionEndName();return s=H.mergeSettings(void 0,s,ha),this.each(function(){var o,t=this,i=$(this),n="horizontal"===s.direction?"width":"height",a=n.charAt(0).toUpperCase()+n.slice(1);function l(){o&&clearTimeout(o),i.data("ignore-animation-once")&&$.removeData(i[0],"ignore-animation-once"),i.data("is-animating")&&$.removeData(i[0],"is-animating"),i.off("".concat(e,".animatedclosed")),t.style.transition="",t.style[n]="0px",i.trigger("animateclosedcomplete")}i.one("animateclosedstart",function(d){d.stopPropagation(),i.off("".concat(e,".animatedclosed"))}),i.trigger("animateclosedstart"),e&&i.one("".concat(e,".animatedclosed"),l),i.data("is-animating",!0),this.style[n]=getComputedStyle(this)[n],"offset".concat(a),this.style.transition="".concat(n," ").concat(s.timing,"ms ").concat(s.transition),o=setTimeout(l,s.timing),this.style[n]="0px",(i.is(":hidden")||i.is(".no-transition")||i.data("ignore-animation-once"))&&l()})},$.fn.isAnimating=function(){return this.each(function(){return!0===$(this).data("is-animating")})};var Pi="accordion",jt=["classic","plus-minus","chevron"],ia={accordionFocusCallback:function(e,t){return t()},allowOnePane:!0,expanderDisplay:jt[0],enableTooltips:!0,rerouteOnLinkClick:!0,notificationBadge:!1,source:null,selected:null,tooltipStyle:"light"};function vi(s){return void 0!==s.displayChevron&&(gi("expanderDisplay setting","displayChevron setting"),s.expanderDisplay=!1===s.displayChevron?jt[1]:jt[0],delete s.displayChevron),s}function Xi(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,ia),this.settings=vi(this.settings),this.init()}Xi.prototype={init:function(e){this.build(e).handleEvents(e).setupTooltips()},build:function(e,t){var n,a,o,i=this,l=this,d=!0;e&&e instanceof jQuery?(n=e.children("a"),o=(a=e.next(".accordion-pane")).children(".accordion-content"),d=!1,this.headers=this.headers.add(e),this.anchors=this.anchors.add(n),this.panes=this.panes.add(a),this.contentAreas=this.contentAreas.add(o)):(this.headers=this.element.find(".accordion-header"),e=this.element.find(".accordion-header"),this.anchors=e.children("a"),n=this.anchors,this.panes=e.next(".accordion-pane"),this.contentAreas=(a=this.panes).children(".accordion-content"),o=this.contentAreas);var h=$(".accordion-content").find("textarea");h&&h.parents(".accordion-pane").attr("style","display: block");var p=!1;if(e.each(function(){var w=$(this),T=!1,k=w.parent(),A=k.is(".accordion");function M(){if(!A){if(!T)return void w.addClass("no-icon");k.addClass("has-icons")}}k.is(".accordion-section")&&(k=k.parentsUntil(".accordion"),A=!0),w.children("a").find("svg").detach().insertBefore(w.children("a"));var L=w.children(".icon, svg");if(L.addClass("icon").attr({role:"presentation","aria-hidden":"true",focusable:"false"}),A&&L.length&&(p=!0),(w.is(".list-item")||!A&&w.find("button").length||!A&&w.find("svg").length)&&(T=!0),w.hasClass("is-disabled")&&w.children("a, button").attr("tabindex","-1"),w.next(".accordion-pane").length){T=!0;var z=w.children(".btn");if(!z.length){z=$('<button class="btn" type="button" tabindex="-1"></button>');var q="insertBefore";"plus-minus"!==l.settings.expanderDisplay&&A&&(w.addClass("has-chevron"),q="insertAfter"),z[q](w.children("a")),w.data("addedExpander",z)}L.length&&"plus-minus"===l.settings.expanderDisplay&&L.appendTo(z);var O=z.children(".icon, .svg, .plus-minus");if(!O.length){if("classic"===l.settings.expanderDisplay&&A||"chevron"===l.settings.expanderDisplay)O=$.createIconElement({icon:"caret-down",classes:["chevron"]});else{var _=l.isExpanded(w)?" active":"";O=$('<span class="icon plus-minus'.concat(_,'" aria-hidden="true" role="presentation"></span>'))}O.appendTo(z)}var G={role:"presentation","aria-hidden":"true"};O.is("span")||(G.focusable="false"),O.attr(G),O.is(".chevron")&&A?(w.addClass("has-chevron"),z.insertAfter(w.children("a"))):(w.removeClass("has-chevron"),z.insertBefore(w.children("a"))),"plus-minus"===l.settings.expanderDisplay&&A&&(p=!0),M()}else M()}),p&&this.element.addClass("has-icons"),d&&!this.element.data("updating")){var v=e.filter(".is-selected, .is-expanded");v.next(".accordion-pane").addClass("no-transition"),this.settings.allowOnePane?(v=v.first(),this.expand(v)):v.each(function(b){i.expand($(v[b]))}),this.select(this.settings.selected?this.settings.selected:v.last()),v.next(".accordion-pane").removeClass("no-transition")}return a.each(function(){var w=$(this),T=w.prev(".accordion-header");T.children("a").attr({"aria-haspopup":"true",role:"button"});var k=w.children(),A=!0;if(k.each(function(L,z){$(z).is(".accordion-header, .accordion-content")&&!$(z).hasClass("filtered")&&(A=!1)}),w[A?"addClass":"removeClass"]("all-children-filtered"),A&&(w.data("ignore-animation-once",!0),l.collapse(T,!1)),!t){var M="0px";l.isExpanded(T)&&(M="auto"),w.attr("style","height: ".concat(M))}}),t||(this.currentlyFiltered=$()),this.createNotificationBadge(),this},createNotificationBadge:function(){this.settings.notificationBadge&&this.element.find(".accordion-header").each(function(e,t){var i=$(t);if(i.children(".notification-badge-container").length<1){var n=i.data();i.notificationbadge({position:n.options.position,color:n.options.color});var a=i.find(".icon"),o=i.find(".notification-badge-container");o.prepend(a),i.prepend(o)}})},handleHeaderClick:function(e,t){if(!t||!t.length||this.isDisabled(t)||this.isFiltered(t)||t.data("is-animating"))e.preventDefault();else{if(!$(e.target).is('[class^="btn"]')){var i=t.children("a");return this.handleAnchorClick(e,i)}e.preventDefault()}},handleAnchorClick:function(e,t){var i=this,n=t.parent(".accordion-header"),a=n.next(".accordion-pane"),o=t.attr("ng-reflect-href");return e&&!o&&!n.is(".module-nav-settings-btn")&&e.preventDefault(),!(!n.length||this.isDisabled(n)||this.isFiltered(n))&&(!1!==this.element.triggerHandler("beforeselect",[t])?(this.originalSelection=t,this.select(t),n.is(".module-nav-settings-btn")||this.closePopups(e),function d(){var h=t.attr("href");return!(!h||""===h||"#"===h||(i.settings.rerouteOnLinkClick&&(window.location.href=h),0))}()?(this.element.trigger("followlink",[t]),!0):a.length?(i.toggle(n),i.focusOriginalType(n),!0):(this.isControllingDetails?a.length||i.element.trigger("drilldown",[n[0]]):(i.orignalSelection=t,i.focusOriginalType(n)),this.element.trigger("selected",n),!0)):void 0)},closePopups:function(e){$(".popupmenu.is-open").length&&this.element.find('.accordion-header[aria-haspopup="true"]').each(function(){return $(this).data("popupmenu").close(),void 0!==e&&(e.stopPropagation(),e.stopImmediatePropagation()),!1})},handleExpanderClick:function(e,t){var i=t.parent(".accordion-header");if(i.length&&!this.isDisabled(i)&&!this.isFiltered(i)&&!i.data("is-animating"))return this.originalSelection=t,e&&e.stopPropagation(),this.closePopups(),i.next(".accordion-pane").length?(this.toggle(i),this.select(i),void this.focusOriginalType(i)):this.handleAnchorClick(e,i.children("a"))},handleKeys:function(e){var t=this,i=e.which,n=$(e.target),a=n.parent(),o=a.children('[class^="btn"]').first(),l=a.children("a"),d=document.querySelectorAll(".accordion-pane");function h(b){b||(b=n),t.originalSelection||(t.originalSelection=b)}if(9===i){this.headers.removeClass("is-selected");var p=Mi(d).filter(function(b){return!b.classList.contains("is-expanded")});Mi(d).filter(function(b){return b.classList.contains("is-expanded")}).forEach(function(b){Mi(b.children).forEach(function(w){$(w).hasClass("is-disabled")||($(w).find("a").removeAttr("tabindex"),$(w).find("button").attr("tabindex","-1"))})}),p.forEach(function(b){Mi(b.children).forEach(function(w){$(w).find("a").attr("tabindex","-1"),$(w).find("button").attr("tabindex","-1")})}),n.is("a")&&o.length?h(o):h(l)}return 32===i?(e.preventDefault(),n.is('[class^="btn"]')&&(e.stopPropagation(),e.stopImmediatePropagation(),$("html").hasClass("is-firefox"))?void 0:o.length?(h(o),this.handleExpanderClick(null,n)):(h(l),this.handleAnchorClick(null,n))):37===i||38===i?(e.preventDefault(),h(),e.shiftKey?this.ascend(a):this.prevHeader(a)):39===i||40===i?(e.preventDefault(),h(),e.shiftKey?this.descend(a):this.nextHeader(a)):void 0},toData:function(e,t){var i=[],n=this.element.children(".accordion-header");function a(d,h,p,v){var b=$(d),w=$(d).next(".accordion-pane"),T=d.classList.contains("accordion-content"),k={index:"".concat(void 0!==p?"".concat(p,"."):"").concat(h),type:T?"content":"header"};t&&(k.element=d),d.getAttribute("id")&&(k.id=d.getAttribute("id")),T?(k.content="".concat(b.html()),k.contentText="".concat(b.text().trim().replace(/\n|\s{2,}/g," "))):k.text=b.children("a, span").text().trim();var A=b.children(".icon");if(A.length&&(k.icon="svg"===A[0].tagName.toLowerCase()?A[0].getElementsByTagName("use")[0].getAttribute("href"):""),b.hasClass("is-disabled")&&(k.disabled=!0),w.length){var M=w.children(".accordion-header, .accordion-content"),L=[];if(M.length){var z=L;e&&(z=v),M.each(function(q,O){a(O,q,k.index,z)}),k.children=L}}v.push(k)}return n.length||this.element.find(".accordion-section").each(function(d,h){var p=function o(d,h,p){var v={index:"".concat("").concat(h),type:"section"};t&&(v.element=d),d.getAttribute("id")&&(v.id=d.getAttribute("id"));var b=$(d).children(".accordion-header"),w=[];return b.length&&b.each(function(T,k){a(k,T,h,w)}),v.children=w,e?w:v}(h,d);e?i=i.concat(p):i.push(p)}),n.each(function(d,h){a(h,d,void 0,i)}),i},select:function(e){if(e&&e.length){var t=e,i=t.parent();e.is(".accordion-header")&&(t=(i=e).children("a")),t.is('[class^="btn"]')&&(t=e.next("a")),this.isDisabled(i)||this.isFiltered(i)||(this.deselectAll(),i.addClass("is-selected"),i.parentsUntil(this.element,".accordion-pane").prev(".accordion-header").addClass("child-selected"))}},deselect:function(e){if(e&&e.length){var t=e,i=t.parent();e.is(".accordion-header")&&(t=(i=e).children("a")),t.is('[class^="btn"]')&&(t=e.next("a")),i.removeClass("is-selected"),i.parentsUntil(this.element,".accordion-pane").prev(".accordion-header").each(function(a,o){$(o).find(".is-selected").length||$(o).removeClass("child-selected")})}},deselectAll:function(){var e;null===(e=this.headers)||void 0===e||e?.removeClass("child-selected").removeClass("is-selected")},getSelected:function(){return this.element.find(".is-selected")},isDisabled:function(e){return!!this.element.hasClass("is-disabled")||!!e&&e.hasClass("is-disabled")},isFiltered:function(e){if(!e||!e.length)return!1;var t=e[0].classList;return t.contains("filtered")&&!t.contains("has-filtered-children")},isExpanded:function(e){if(e&&e instanceof Element&&(e=$(e)),e&&e.length)return"true"===e.children("a").attr("aria-expanded")||e.hasClass("is-expanded")},toggle:function(e){var t=this;if(e&&e.length&&!this.isDisabled(e)&&!this.isFiltered(e)&&!this.isAnimating){if(this.isAnimating=!0,setTimeout(function(){t.isAnimating=!1},500),this.isExpanded(e))return void this.collapse(e);this.expand(e)}},expand:function(e,t){if("string"==typeof e&&(e=this.element.find("#".concat(e)).first()),e&&e.length){var i=this,n=e.next(".accordion-pane"),a=e.children("a"),o=$.Deferred();return!1===this.element.triggerHandler("beforeexpand",[a])?o.reject():(this.callSource(a,d)||d.apply(this),o)}function d(){if(!(n=e.next(".accordion-pane"))||!n.length)return o.reject();var h=e.children(".btn");h.length&&(h.children(".plus-minus, .chevron").addClass("active"),h.children(".audible").text(B.translate("Collapse")));var p=e.parentsUntil(i.element).filter(".accordion-pane").prev(".accordion-header").add(e),v=[];i.settings.allowOnePane&&!t&&i.headers&&i.headers.not(p).each(function(){var T=$(this);i.isExpanded(T)&&v.push(i.collapse(T))});var b=[];function w(T){var k;T&&T.stopPropagation(),(k=$).when.apply(k,b.concat(v)).done(function(){o.resolve()}),n.triggerHandler("afterexpand",[a]),n.css("height","auto"),i.element.trigger("afterexpand",[a])}p&&p.not(e).each(function(){var T=$(this);i.isExpanded(T)||b.push(i.expand(T))}),e.add(n).addClass("is-expanded"),e.children("a").attr("aria-expanded","true"),i.element.trigger("expand",[a]),n.hasClass("no-transition")||this.element.hasClass("no-transition")?w():n.one("animateopencomplete",w).animateOpen()}},expandAll:function(){var e;if(!0!==this.settings.allowOnePane){var t=this,i=$.Deferred(),n=[];return this.headers.each(function(){var a=$(this);t.isExpanded(a)||n.push(t.expand(a))}),(e=$).when.apply(e,n).always(function(){i.resolve()}),i}},collapse:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"==typeof e&&(e=this.element.find("#".concat(e)).first()),e&&e.length){var i=this,n=e.next(".accordion-pane"),a=e.children("a"),o=$.Deferred();if(!1===this.element.triggerHandler("beforecollapse",[a]))return o.reject();var d=e.children(".btn");return d.length&&(d.children(".plus-minus, .chevron").removeClass("active"),d.children(".audible").text(B.translate("Expand"))),t&&n.closeChildren&&n.closeChildren(),i.element.trigger("collapse",[a]),n.hasClass("no-transition")||this.element.hasClass("no-transition")?h():n.one("animateclosedcomplete",h).animateClosed(),o}function h(p){p&&p.stopPropagation(),e.add(n).removeClass("is-expanded"),a.attr("aria-expanded","false"),n.triggerHandler("aftercollapse",[a]),i.element.trigger("aftercollapse",[a]),o.resolve()}},collapseAll:function(){var e,t=this,i=$.Deferred(),n=[];return this.headers.each(function(){var a=$(this);t.isExpanded(a)&&n.push(t.collapse(a))}),(e=$).when.apply(e,n).always(function(){i.resolve()}),i},callSource:function(e,t){if(!this.settings.source||"function"!=typeof this.settings.source)return!1;var i=this,n=e.parent(),a=n.next(".accordion-pane");return this.settings.source({anchor:e,header:n,pane:a},function l(d,h){!0!==d&&i.updated(h),setTimeout(function(){t.apply(i)},1)})},getElements:function(e){var i,n,a,o,t=$(e),l=null;return t.is(".accordion-header")&&(i=t,a=t.children('[class^="btn"]'),n=t.children("a")),t.is(".btn")&&(n=(i=(a=t).parent()).children("a")),t.is("a")&&(a=(i=(n=t).parent()).children(".btn")),o=i.next(".accordion-pane"),i.parent(".accordion-section")&&(l=i.parent(".accordion-section")),{header:i,expander:a,anchor:n,pane:o,section:l}},prevHeader:function(e,t){var i=this.getElements(e),n=i.header.parent().children(),a=n.index(i.header),o=$(n.get(Fe.ensureAlphaNumeric(a)-1));if(!n.length||0===a){if(i.header.parent(".accordion-pane").length)return this.ascend(i.header);if(i.header.is(":first-child")&&i.section){var d,l=i.section.prev(".accordion-section");(l.length||(l=i.section.parent().children().last(".accordion-section")).length)&&(d=l.children(),o=$(d[d.length-1]))}o.length||(o=n.last())}for(;o.is(".accordion-content")||this.isDisabled(o)||this.isFiltered(o);){if(o.is(":only-child")||o.is(":first-child"))return this.ascend(i.header);o=o.prev()}if(o.is(".accordion-pane")){var h=o.prev(".accordion-header");if(this.isExpanded(h)&&h.next(".accordion-pane").children(":not(.accordion-content)").length&&!t)return this.descend(h,-1);if(!(o=h).length){var v;if(i.header.parent(".accordion-pane").length)return this.ascend(i.header);var b=null===(v=i.header.parent(".accordion-section"))||void 0===v?void 0:v?.prev(".accordion-section");for(b.length&&(o=$(b.children()[0])),o.length||(o=n.last());o.is(".accordion-content")||this.isDisabled(o)||this.isFiltered(o);)o=o.prev()}}this.focusOriginalType(o)},nextHeader:function(e,t){var i=this.getElements(e),n=i.header.parent().children(),a=n.index(i.header),o=$(n.get(Fe.ensureAlphaNumeric(a)+1));if(!n.length||a===n.length-1){if(i.header.parent(".accordion-pane").length)return this.ascend(i.header,-1);if(i.header.is(":last-child")&&i.section){var l=i.section.next(".accordion-section");(l.length||(l=i.section.parent().children().first(".accordion-section")).length)&&(o=$(l.children()[0]))}o.length||(o=n.first())}for(;o.is(".accordion-content")||this.isDisabled(o)||this.isFiltered(o);){if(o.is(":only-child")||o.is(":last-child"))return this.ascend(i.header);o=o.next()}if(o.is(".accordion-pane")){var d=o.prev(".accordion-header");if(this.isExpanded(d)&&d.next(".accordion-pane").children(":not(.accordion-content)").length&&!t)return this.descend(d);if(!(o=$(n.get(Fe.ensureAlphaNumeric(a)+2))).length){var p;if(i.header.parent(".accordion-pane").length)return this.ascend(i.header,-1);var v=null===(p=i.header.parent(".accordion-section"))||void 0===p?void 0:p?.next(".accordion-section");for(v.length&&(o=$(v.children()[0])),o.length||(o=n.first());o.is(".accordion-content")||this.isDisabled(o)||this.isFiltered(o);)o=o.next()}}this.focusOriginalType(o)},ascend:function(e,t){t||(t=0);var i=e.parent(".accordion-pane"),n=i.prev();if(-1===t&&!(n=i.next(".accordion-header")).length)return i.parent(".accordion").length?this.nextHeader(i.prev().children("a"),!0):this.ascend(i.prev(),-1);this.focusOriginalType(n)},descend:function(e,t){t||(t=0);var i=e.next(".accordion-pane"),n=i.children(".accordion-header").first();return-1===t&&(n=i.children(".accordion-header").last()),n.length?this.isExpanded(n)?this.descend(n,-1):void this.focusOriginalType(n):this.focusOriginalType(e)},focusOriginalType:function(e){var t=this,i=function(){var a=e.children('[class*="btn"]');t.headers.not(e).removeClass("is-focused"),t.originalSelection.is('[class*="btn"]')&&a.length?a.first()[0].focus():e.is(".searchfield-wrapper")?(e.find("input")[0].focus(),e.addClass("is-focused")):(e.children("a")[0].focus(),e.addClass("is-focused"))};"function"!=typeof this.settings.accordionFocusCallback?i():this.settings.accordionFocusCallback(e,i)},filter:function(e){var t,i=this;if(e){var n=this,a=this.headers.parents().find(".module-nav-accordion");null===(t=this.headers)||void 0===t||t?.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),a.find(".empty-message").remove(),a.find(".module-nav-separator").show(),this.contentAreas.removeClass("filtered"),this.currentlyFiltered=$();var o=e.not(this.currentlyFiltered),l=[],d=$();this.headers.add(this.contentAreas).not(o).not(".module-nav-settings-btn").addClass("filtered");var h=this.headers.parents().find(".module-nav-footer");if(h&&1===h.closest(".pinned-optional").length){var v=this.headers.parents().find(".module-nav-footer");v.find(".filtered").removeClass("filtered").addClass("pinned"),v.prev(".module-nav-separator").addClass("pinned")}o.each(function(T,k){var A=$(k).is(".accordion-content"),M=$(k).parents(".accordion-pane");A&&(d.push($(k)),$(M[0]).prev(".accordion-header").each(function(z,q){return l.indexOf(q)<0&&l.push(q),l})),M.length&&M.prev(".accordion-header").each(function(z,q){return l.indexOf(q)<0&&l.push(q),l})});var b=$(l);b.addClass("has-filtered-children");var w=this.expand(b,!0);$.when(w).done(function(){i.currentlyFiltered=o,n.build(void 0,!0)}),a.find(".module-nav-separator").not(".pinned").hide(),1===a.length&&this.headers.not(".module-nav-settings-btn").not(".pinned").length===this.headers.not(".module-nav-settings-btn").not(".pinned").filter(".filtered").length&&a.find(".module-nav-search-container").append('<div class="empty-message">\n              <div class="card-empty-icon">\n          <svg class="icon-empty-state is-slate" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-empty-search-data-new"></use>\n          </svg>\n        </div>\n        <div class="card-empty-title">\n          '.concat(B.translate("NoResultsFound"),"\n        </div>\n      </div>"))}},unfilter:function(e,t){var i,n=this;if(this.currentlyFiltered.length||t){(!e||!e.length)&&(e=this.currentlyFiltered);var a=[];null===(i=this.headers)||void 0===i||i?.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered");var o=this.headers.parents().find(".module-nav-accordion");o.find(".empty-message").remove(),o.find(".module-nav-separator").show(),e.each(function(h,p){var v=$(p).parents(".accordion-pane");v.length&&v.prev(".accordion-header").each(function(b,w){return a.indexOf(w)<0&&a.push(w),a})});var l=$(a);l.removeClass("has-filtered-children");var d=[this.collapse(e),this.collapse(l)];$.when(d).done(function(){n.currentlyFiltered=n.currentlyFiltered.not(e)})}},disable:function(){this.element.addClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).attr("tabindex","-1")},enable:function(){this.element.removeClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).removeAttr("tabindex")},updated:function(e,t){this.element.data("updating",!0),t&&(this.settings=H.mergeSettings(this.element[0],t,this.settings),this.settings=vi(this.settings));var i=$(document.activeElement);return $.contains(this.element[0],i[0])||(i=void 0),e&&e instanceof jQuery?this.teardown(e).init(e):this.teardown().init(),i&&i.length&&i.focus(),$.removeData(this.element[0],"updating"),this},teardown:function(e){var t=!1,i=e;return this.currentlyFiltered&&this.unfilter(this.currentlyFiltered),(!e||!(e instanceof jQuery))&&(i=this.headers,t=!0),i&&i.length&&(i.off("touchend.accordion click.accordion focusin.accordion focusout.accordion keydown.accordion mousedown.accordion mouseup.accordion").each(function(){var a=$(this),o=a.children(".icon"),l=a.data("hidefocus");if(l&&l.destroy(),o.length){var d=o.data("icon");d&&d.destroy()}var h=a.data("addedExpander");h&&(h.remove(),$.removeData(this,"addedExpander"))}),i.not(".accordion-content").find("a").off("touchend.accordion keydown.accordion click.accordion"),i.children('[class^="btn"]').off("touchend.accordion click.accordion keydown.accordion")),t&&(this.element.off("updated.accordion selected.accordion"),delete this.anchors,delete this.headers,delete this.panes,delete this.contentAreas),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"accordion")},handleEvents:function(e){var t=this,i=null,n=e,a=!1;function l(h,p){var v=function o(h){var p="Header";return h.is("a")&&(p="Anchor"),h.is("button")&&(p="Expander"),p}(p);return p.is(".module-nav-settings-btn")||$("body").children().not(".application-menu, .modal-page-container, .module-nav, .page-container, .resize-app-menu-container").closeChildren(),t["handle".concat(v,"Click")](h,p)}(!e||!(e instanceof jQuery))&&(n=this.headers,a=!0);var d=!1;return n.addClass("hide-focus").off("click.accordion focusin.accordion focusout.accordion keydown.accordion mousedown.accordion mouseup.accordion").on("click.accordion",function(h){return l(h,$(this))}).on("focusin.accordion",function(h){var p=$(h.target);t.originalSelection||(t.originalSelection=p),d?d=!1:(n.not($(this)).removeClass("is-focused"),p.is(":not(.btn)")&&$(this).addClass("is-focused").removeClass("hide-focus"))}).on("focusout.accordion",function(){(!$.contains(this,i)||$(this).is($(i)))&&($(this).removeClass("is-focused"),$(this).addClass("hide-focus"))}).on("keydown.accordion",function(h){t.handleKeys(h)}).on("mousedown.accordion",function(h){d=!0,$(this).addClass("is-focused"),i=h.target}).on("mouseup.accordion",function(){i=null}),n.children('[class^="btn"]').off("click.accordion keydown.accordion").on("click.accordion",function(h){return l(h,$(this))}).on("keydown.accordion",function(h){t.handleKeys(h)}),a&&this.element.off("selected.accordion updated.accordion").on("selected.accordion",function(h){h.stopPropagation()}).on("updated.accordion",function(h,p){h.stopPropagation(),t.updated(p)}),this},hideTooltip:function(){var e=this,t=window;t.tooltip&&(this.removeTooltipData(t.tooltip),t.tooltip.classList.add("is-hidden"),t.tooltip.classList.remove("content-tooltip")),$("body, .scrollable").off("scroll.spantooltip",function(){e.hideTooltip()})},removeTooltipData:function(e){(e=e instanceof jQuery?e:$(e)).data("spantooltip")&&$.removeData(e[0],"spantooltip")},setupTooltips:function(){var e=this;if(this.settings.enableTooltips){var a,t=this,i=".accordion-header a span";this.element.off("mouseenter.spantooltip",i).on("mouseenter.spantooltip",i,function(){var h;(h=this).style.width="auto",h.offsetWidth>h.parentElement.offsetWidth-parseInt($(h).parent().css("padding-left"),10)&&(h.style.width="",a=setTimeout(function(){$(h).tooltip({trigger:"immediate",content:"".concat(h.innerText),extraClass:"light"===e.settings.tooltipStyle?"tooltip-accordion-style":""})},400))}).off("mouseleave.spantooltip click.spantooltip",i).on("mouseleave.spantooltip click.spantooltip",i,function(){var h;(h=this).style.width="auto",h.offsetWidth>h.parentElement.offsetWidth-parseInt($(h).parent().css("padding-left"),10)&&(h.style.width="",t.hideTooltip(),clearTimeout(a))})}}},$.fn.accordion=function(s){return this.each(function(){var e=$.data(this,Pi);e?e.updated(s):e=$.data(this,Pi,new Xi(this,s))})};var zr="actionsheet",ur="ids-actionsheet-root",fr={actions:[],attributes:[],autoFocus:!0,breakpoint:"phone-to-tablet",displayAsActionSheet:"responsive",overlayOpacity:.7,onSelect:null,onCancel:null,tray:!1,trayOpts:{text:null,icon:null,backgroundColor:"slate"},showCancelButton:!0};function Wn(s,e){return this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,fr),this.init()}Wn.prototype={init:function(){this.render(),this.handleEvents()},render:function(){var e=this,t=document.querySelector("#".concat(ur));t||this.renderRootElems(),t&&void 0===this.rootElem&&(document.getElementById("ids-actionsheet-root").remove(),this.renderRootElems());var n=this.element[0];if(n.classList.add("ids-actionsheet-trigger"),H.addAttributes(this.element,this,this.settings.attributes,"trigger"),("BUTTON"===n.tagName||n.className.includes("btn"))&&this.element.button(),!this.actionSheetElem){var a="",o=!1;this.settings.actions.forEach(function(d,h){var p="",v=H.stringAttributes(e,e.settings.attributes,"action-".concat(h));d.icon&&(o=!0,p=$.createIcon({icon:d.icon}));var b='<button class="btn-tertiary ids-action" data-index="'.concat(h,'" ').concat(v,">\n          ").concat(p,'\n          <span class="ids-action-text">').concat(d.text,"</span>\n        </button>");a+=b}),this.settings.showCancelButton&&(a+='<div class="separator"></div>\n        <button class="btn-secondary btn-cancel ids-action">\n          <span>Cancel</span>\n        </button>'),this.actionSheetElem=document.createElement("div"),this.actionSheetElem.setAttribute("role","dialog"),H.addAttributes($(this.actionSheetElem),this,this.settings.attributes,"sheet");var l=this.actionSheetElem.classList;l.add("ids-actionsheet"),o&&l.add("has-icons"),this.actionSheetElem.insertAdjacentHTML("afterbegin",a),this.rootElem.append(this.actionSheetElem),$(this.actionSheetElem).find("button").button(),this.settings.tray&&this.renderTrayElement()}},trayBreakpoint:function(){this.trayContainer.style.visibility=Jt.isAbove("phone-to-tablet")?"hidden":""},trayTransform:function(){this.trayContainer.style.transform="translate(0, -".concat(this.actionSheetElem.offsetHeight-40,"px)")},renderRootElems:function(){var e=document.createDocumentFragment(),t=document.createElement("div"),i=document.createElement("div");t.id=ur,t.classList.add("ids-actionsheet-container"),t.setAttribute("aria-hidden",!0),e.appendChild(t),i.classList.add("overlay"),i.setAttribute("aria-hidden",!0),t.appendChild(i),document.body.appendChild(t),this.rootElem=t,this.overlayElem=i},renderTrayElement:function(){var e=document.createElement("div"),t=document.createElement("button"),i=document.createElement("span");this.settings.trayOpts.icon&&(t.innerHTML=$.createIcon({icon:this.settings.trayOpts.icon}));var n=t.firstChild;i.innerHTML=this.settings.trayOpts.text,e.classList.add("ids-actionsheet-tray-container",this.settings.trayOpts.backgroundColor),t.classList.add("ids-actionsheet-tray-btn"),i.classList.add("ids-actionsheet-tray-btn-text"),e.appendChild(t),t.appendChild(i),this.rootElem.insertBefore(e,this.rootElem.childNodes[1]),this.trayContainer=e,this.trayBtn=t,this.trayIconElem=n,this.trayTextElem=i,this.trayBreakpoint()},handleEvents:function(){var e=this;this.element.add($(this.trayBtn)).on("click.trigger",function(){e.visible||(e.open(),e.trayContainer&&e.trayTransform())}),$("body").on("resize",function(){e.settings.tray&&(e.trayBreakpoint(),e.visible?e.trayTransform():e.trayContainer.style.removeProperty("transform"))})},get visible(){return this.popupmenuAPI?this.hasOpenPopupMenu:this.rootElem.classList.contains("engaged")},get actionElems(){return Mi(this.actionSheetElem.querySelectorAll("button")).filter(function(s){return!s.classList.contains("btn-cancel")})},open:function(){var e=this;if(!this.visible){if(!this.currentlyNeedsActionSheet)return void this.openPopupMenu();this.rootElem.classList.add("engaged"),this.overlayElem.removeAttribute("hidden"),window.requestAnimationFrame(function(){e.setOverlayVisibility(),e.addActionSheetOpenEvents(),e.element[0].removeAttribute("aria-hidden"),e.focus()})}},openPopupMenu:function(){var e=this,t=H.stringAttributes(this,this.settings.attributes,"menu"),i="<ul ".concat(t,">");this.settings.actions.forEach(function(a,o){var l="";a.icon&&(l=$.createIcon({icon:a.icon}));var d='<li class="ids-action-menu-item" data-index="'.concat(o,'">\n        <a>\n          ').concat(l,'\n          <span class="ids-action-text">').concat(a.text,"</span>\n        </a>\n      </li>");i+=d}),i+="</ul>";var n=$(i).insertAfter(this.element);this.element.popupmenu({autoFocus:this.settings.autoFocus,attributes:this.settings.attributes,menu:n,offset:{y:10},trigger:"immediate",removeOnDestroy:!0}),this.hasPopupmenuEvents=!0,$(this.element).on("selected.popupmenu",function(a,o){var l=parseInt($(o.parent()).attr("data-index"),10);if(!isNaN(l)){var d=e.actionSheetElem.children[l];d&&e.doSelect(d,null,!0)}}).on("afteropen.popupmenu",function(){e.focus()}).on("close.popupmenu",function(a,o){o?e.doCancel(null,!1,o):e.close()})},get popupmenuAPI(){return $(this.element).data("popupmenu")},get hasOpenPopupMenu(){var s;return null===(s=this.popupmenuAPI)||void 0===s?void 0:s?.isOpen},close:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.hasPopupmenuEvents)return this.closePopupMenu(t),void(i&&this.focus());this.visible&&(this.removeActionSheetOpenEvents(),this.element[0].setAttribute("aria-hidden","true"),this.rootElem.classList.remove("engaged"),this.trayContainer&&this.trayContainer.style.removeProperty("transform"),this.setOverlayVisibility(),H.waitForTransitionEnd(this.overlayElem,"opacity").then(function(){e.overlayElem.setAttribute("hidden",""),e.triggerCloseEvent(t),i&&e.focus()}))},closePopupMenu:function(e){this.removePopupmenuEvents(),this.triggerCloseEvent(e)},removePopupmenuEvents:function(){this.hasPopupmenuEvents&&($(this.element).off("selected.popupmenu close.popupmenu afteropen.popupmenu"),delete this.hasPopupmenuEvents)},cancel:function(){this.close("cancel",arguments.length>0&&void 0!==arguments[0]&&arguments[0])},triggerCloseEvent:function(){var t;t="cancel"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")?jQuery.Event("cancelled"):jQuery.Event("close"),this.element.trigger(t,[$(this.actionSheetElem)])},focus:function(){if(this.settings.autoFocus){if(this.hasOpenPopupMenu){var e=this.popupmenuAPI.menu[0].querySelector("a");return void(e&&(e.focus(),this.popupmenuAPI.highlight($(e))))}if(this.visible){var t=this.actionSheetElem.querySelector("button");return void(t&&(t.focus(),this.resetFocusState(t)))}this.element[0].focus()}},get currentlyNeedsActionSheet(){var e=this.settings.displayAsActionSheet;return"always"===e||"responsive"===e&&Jt.isBelow(this.settings.breakpoint)},addActionSheetOpenEvents:function(){var e=this;$(document).on("click.disengage",function(t){t.target.closest(".ids-actionsheet")||e.doCancel(null,!1,!1)}),$(this.actionSheetElem).on("click.action","button",function(t){var i=t.currentTarget;i.classList.contains("btn-cancel")?e.doCancel(i,!1,!0):e.doSelect(i,!0),e.focus()}).on("keyup.action",function(t){t.target.closest(".ids-actionsheet")&&"Escape"===t.key&&e.doCancel(null,!1,!1)}).on("focusin.action","button",function(t){e.resetFocusState(t.target.closest(".ids-action"))}).on("focusout.action","button",function(t){e.resetFocusState(t.target.closest(".ids-action"))})},doSelect:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=$(e);"function"==typeof this.settings.onSelect&&this.settings.onSelect(n),this.close(null,i),t&&$(this.element).trigger("selected",[n,null,!0])},doCancel:function(e,t,i){var n=$(e);"function"==typeof this.settings.onCancel&&this.settings.onCancel(n),this.cancel(i),t&&$(this.element).trigger("cancelled",[n])},resetFocusState:function(e){var t=$(e);t.data("hide-focus")||t.hideFocus(),t.addClass("hide-focus")},removeActionSheetOpenEvents:function(){$(document).off("click.disengage"),$(this.actionSheetElem).off("click.action keyup.action")},setOverlayVisibility:function(){var e=0;this.visible&&(e=this.settings.overlayOpacity),this.overlayElem.style.opacity=e?"".concat(e):""},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init()},teardown:function(){this.visible&&this.close(),this.element.add($(this.trayBtn)).off("click.trigger"),this.actionSheetElem&&$(this.actionSheetElem).find("button").destroy&&($(this.actionSheetElem).find("button").destroy(),this.actionSheetElem.remove()),this.element[0].classList.remove("ids-actionsheet-trigger")},destroy:function(){this.teardown(),$.removeData(this.element[0],"actionsheet")}},$.fn.actionsheet=function(s){return this.each(function(){var e=$.data(this,zr);return e?e.updated(s):e=$.data(this,zr,new Wn(this,s)),e})};var qi={};function bs(s,e){var t=function Ta(s){return s&&!(s instanceof jQuery)}(s);return!!t&&null!=s[e]}function bo(s,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=[];return"string"==typeof e&&(e=[e]),$.each(s,function(a,o){$.each($(o).data(),function(l,d){t.length&&-1===t.indexOf(l)||e.forEach(function(h){(i&&function pr(s,e){return!!function vd(s,e){return bs(s,e)&&"function"==typeof s[e]}(s,e)&&(s[e](),!0)}(d,h)||bs(d,h))&&n.push({elem:$(o),control:d})})})}),n}function mi(s,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(s&&e){var n=bo((s=$(s)).find("*").add(s).not(t.join(", ")),e,void 0,!0);return s.trigger("sift-".concat(e,"-complete"),[n]),s}}qi.attachFilter=function(s,e){if(this.element.length){var t=this;"applicationmenu"===s&&(this.searchfield=this.element.find(".searchfield, .searchfield-wrapper"),this.searchfield.is(".searchfield-wrapper")&&(this.searchfield=this.searchfield.find(".searchfield")));var i=$(t.searchEl);i.is(".searchfield-wrapper")&&(i=i.find(".searchfield")),i&&"function"==typeof $.fn.searchfield&&(e instanceof HTMLElement&&e.classList.add("has-searchfield"),$(i).searchfield({clearable:!0,filterMode:t.settings.filterMode,source:function(a,o,l){var d;o(a,null===(d=t.accordionAPI)||void 0===d?void 0:d?.toData(!0,!0),l)},searchableTextCallback:function(a){return a.text||a.contentText||""},resultIteratorCallback:function(a){return a.highlightTarget="text",a},clearResultsCallback:function(){var l,a=$(t.searchEl.querySelector(".searchfield")||t.searchEl).data("searchfield"),o=!0;"applicationmenu"===s&&!a.isFocused&&(o=!1),a&&o&&(null===(l=t.accordionAPI)||void 0===l||l?.unfilter())},displayResultsCallback:function(a,o){return qi.filterResultsCallback.apply(t,[i,t.accordionAPI,a,o])}}))}},qi.attachFilterEvents=function(s){var e=this;!0===this.settings.filterable&&this.searchEl&&($(this.searchEl).on("complete.".concat(s),function(t){e.handleSearchfieldInputEvent(t)}),$(this.searchEl).on("cleared.".concat(s),function(){var t;null===(t=e.accordionAPI)||void 0===t||t?.unfilter(null,!0)}))},qi.filterResultsCallback=function(s,e,t,i){if(!t)return e?.unfilter(),void i();var n=$(t.map(function(a){return a.element}));e?.filter(n,!0),$(s).triggerHandler("filtered",[t]),i()},qi.handleSearchfieldInputEvent=function(){var s;if(this.searchEl){var e=$(this.searchEl).val();(!e||""===e)&&(null===(s=this.accordionAPI)||void 0===s||s?.unfilter(null,!0))}},qi.teardownFilter=function(s){var e;this.searchEl&&($(this.searchEl).off(["cleared.".concat(s),"complete.".concat(s)].join(" ")),null===(e=this.searchAPI)||void 0===e||e?.destroy())};var zs=[".expandable-card",".expandable-area",".accordion","[soho-busyindicator]",".busy-indicator-container"],fc=[];$.fn.destroy=function(){return mi($(this),"destroy")},$.fn.closeChildren=function(){return mi($(this),"close",zs)},$.fn.handleResize=function(){return mi($(this),"handleResize",fc)};var Hr="expandablearea",Ou={trigger:null,bottomBorder:!1,animationSpeed:300,attributes:null};function _r(s,e){this.settings=H.mergeSettings(s,e,Ou),this.element=$(s),this.init()}_r.prototype={init:function(){this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),(!this.id||void 0===this.id)&&(this.id="expandable-area-".concat($("body").find(".expandable-area").index(this.element))),this.element.prev(".expandable-area-trigger").length>0&&(this.expander=this.element.prev(".expandable-area-trigger"),this.settings.trigger=this.expander.attr("id")||"expandable-area-trigger-".concat($("body").find(".expandable-area").index(this.element))),this.header=this.settings.trigger?this.element:this.element.children(".expandable-header"),this.footer=this.element.children(".expandable-footer"),this.content=this.element.children(".expandable-pane"),this.isCard=this.element.is(".card, .widget"),this},build:function(){var e=this,t=this.element.hasClass("is-expanded");return(this.expander||this.header).attr({"aria-expanded":"".concat(t),"aria-controls":"".concat(this.id,"-content")}),this.header.attr({id:"".concat(this.id,"-header")}),this.content.attr({id:"".concat(this.id,"-content"),role:"region","aria-labelledby":"".concat(this.id,"-header")}),!this.isCard&&!this.footer.length&&!this.settings.trigger&&(this.footer=$('<div class="expandable-footer"></div>').appendTo(this.element)),this.expander=function n(a,o){var l;return!0===o?((l=a.header.find("expandable-expander")).length||(l=$("".concat('<a href="#" target="_self" role="button" class="btn-expander"><svg class="chevron icon" focusable="false" aria-hidden="true" role="presenation"><use href="#icon-caret-down"></use></svg><span class="audible">').concat(B.translate("ShowMore"),"</span>")+"</a>").appendTo(a.header)),l):((l=a.footer.find(".expandable-expander")).length||(l=$("".concat('<a href="#" target="_self" role="button" class="expandable-expander hyperlink"><span data-translated="true">').concat(B.translate("ShowMore"),"</span>")+"</a>").prependTo(a.footer)),l)}(this,this.isCard),this.expander.attr("href","#").hideFocus(),this.expander.attr("role","button"),0===this.expander.length&&(this.expander="string"==typeof this.settings.trigger?$("#".concat(this.settings.trigger)):this.settings.trigger instanceof jQuery?this.settings.trigger:$(this.settings.trigger)),this.settings.bottomBorder&&this.element.addClass("has-bottom-border"),t&&(this.content.addClass("no-transition"),this.element.one("afterexpand.expandable-area",function(){e.content.removeClass("no-transition")}),this.open()),t||(this.content.addClass("no-transition"),this.element.one("aftercollapse.expandable-area",function(){e.content.removeClass("no-transition")}),this.close()),this.resize(),H.addAttributes(this.element,this,this.settings.attributes,"",!0),H.addAttributes(this.header,this,this.settings.attributes,"header",!0),H.addAttributes(this.content,this,this.settings.attributes,"content",!0),H.addAttributes(this.expander,this,this.settings.attributes,"expander",!0),H.addAttributes(this.footer,this,this.settings.attributes,"footer",!0),this},isDisabled:function(){return this.element.hasClass("is-disabled")},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},open:function(){var e=this;!1!==this.element.triggerHandler("beforeexpand",[this.element])&&(this.element.addClass("is-expanded"),(this.expander||this.header).attr("aria-expanded","true"),this.expander.addClass("active"),this.element.triggerHandler("expand",[this.element]),this.expander.find('span[data-translated="true"]').text(B.translate("ShowLess")?B.translate("ShowLess"):"Show Less"),this.isCard&&this.expander.find(".icon").addClass("active"),this.content[0]&&(this.content[0].style.display="block"),this.content.one("animateopencomplete",function(){e.element.triggerHandler("afterexpand",[e.element])}).animateOpen({timing:this.settings.animationSpeed}),this.applyIE11Fix())},close:function(){var e=this;!1!==this.element.triggerHandler("beforecollapse",[this.element])&&(this.expander.removeClass("active"),this.element.triggerHandler("collapse",[this.element]),this.expander.find('span[data-translated="true"]').text(B.translate("ShowMore")?B.translate("ShowMore"):"Show More"),this.isCard&&this.expander.find(".icon").removeClass("active"),this.content.one("animateclosedcomplete",function(){e.element.removeClass("is-expanded"),(e.expander||e.header).attr("aria-expanded","false"),e.element.triggerHandler("aftercollapse",[e.element]),e.content[0].style.display="none"}).animateClosed({timing:this.settings.animationSpeed}),this.applyIE11Fix())},applyIE11Fix:function(){var e=this,t=$("html").hasClass("ie11");setTimeout(function(){t&&e.element.hasClass("is-expanded")?e.element.css("min-height",e.element.children(".expandable-pane").outerHeight(!0)+e.element.children(".expandable-footer").outerHeight(!0)):t&&!e.element.hasClass("is-expanded")&&e.element.css("min-height","auto")},300)},resize:function(){var e=this;$("body").on("resize.expandablearea",function(){e.applyIE11Fix()})},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},destroy:function(){var e;(this.expander||this.header).removeAttr("aria-controls").removeAttr("aria-expanded"),this.header.children("a").off(),null===(e=this.header)||void 0===e||e?.off(),this.header.removeAttr("id"),this.content.removeAttr("id").removeClass("no-transition"),$.removeData(this.element[0],Hr)},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),this},handleEvents:function(){var e=this;return this.expander.on("click.expandablearea",function(t){e.isDisabled()||(t.preventDefault(),e.toggleExpanded())}),this}},$.fn.expandablearea=function(s){return this.each(function(){var e=$.data(this,Hr);e?e.updated(s):e=$.data(this,Hr,new _r(this,s))})};var pc=["startsWith","contains","keyword","wordStartsWith","phraseStartsWith"],bd={caseSensitive:!1,filterMode:pc[3],searchableTextCallback:void 0};function yo(s){this.settings=H.mergeSettings(void 0,s,bd),this.init()}yo.prototype={init:function(){for(var t=[{setting:this.settings.filterMode,limits:pc,preset:bd.filterMode}],i=0;i<t.length;i++)n=t[i].setting,o=t[i].preset,-1===$.inArray(n,t[i].limits)&&(n=o);var n,o;return this.settings.filterMode===pc[0]&&gi("wordStartsWith (filter)","startsWith (filter)"),this},filter:function(e,t,i){if(!(e&&($.isArray(e)||e instanceof jQuery)&&t&&"string"==typeof t&&t.length))return!1;var n=this,a=[],o=!1;this.settings.caseSensitive||(t=t.toLowerCase()),$.isArray(e)||(e instanceof jQuery||"object"===rt(e))&&(e=$.makeArray(e),o=!0);var l=["node","_isFilteredOut"];return e.forEach(function p(v){var b=function h(v){var w,b=!0;if("function"==typeof n.settings.searchableTextCallback)return n.settings.searchableTextCallback(v);"string"==typeof v?w=v:v instanceof $?w=$(v).text():v instanceof HTMLElement?(b=!1,w=v.innerText):w=function d(v){var b="";return Object.keys(v).forEach(function(T){i&&l.indexOf(T)>0||(b+="".concat(b.length?" ":"").concat(v[T]))}),b}(v);var T=w;return b&&(T=Fe.sanitizeHTML(w)),T}(v);n.settings.caseSensitive||(b=b.toLowerCase().trim());var w=!1;if(["startsWith","wordStartsWith"].indexOf(n.settings.filterMode)>-1&&(w=function md(s,e){for(var t=s.split(" "),i=0;i<t.length;i++)if(0===t[i].indexOf(e))return!0;return 0===s.indexOf(e)||e.indexOf(" ")>0&&s.indexOf(e)>0}(b,t)),"phraseStartsWith"===n.settings.filterMode&&0===b.indexOf(t)&&(w=!0),"contains"===n.settings.filterMode&&b.indexOf(t)>=0&&(w=!0),"keyword"===n.settings.filterMode)for(var k=t.split(" "),A=0;A<k.length;A++)if(b.indexOf(k[A])>=0){w=!0;break}null===n.settings.filterMode&&(w=!0),w&&a.push(v)}),o&&(a=$(a)),!(!o&&!a.length)&&a},updated:function(e){return this.settings=H.mergeSettings(void 0,e,this.settings),this.teardown().init()},teardown:function(){return this},destroy:function(){return this.teardown()}};var hn={compile:function s(e,t,i,n){var l,a=s,o="";function d(p,v){var b=v;return p=p[(v=v.pop?v:v.split(".")).shift()]||p[b],0 in v?d(p,v):p}t=Array.isArray(t)?t:t?[t]:[],t=n?0 in t?[]:[1]:t;var h=function(){var w,v="",b=0,T="object"===rt(t[l])?t[l]:{};(T=H.extend({},i,T))[""]={"":t[l]},e.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,function(k,A,M,L,z,q,O){b?v+=b&&!z||b>1?k:A:(o+=A.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,function(_,G,j,X,fe,he){return G?d(T,G):X?d(T,he):fe?a(d(T,he),T):j?"":new Option(d(T,he)).innerHTML}),w=q),z?--b||(O=d(T,O),/^f/.test(rt(O))?o+=O.call(T,v,function(_){return a(_,T)}):o+=a(v,O,T,w),v=""):++b})};for(l=0;l<t.length;l++)h();return o}},bi="autocomplete",_u={source:[],sourceArguments:{},template:void 0,filterMode:"wordStartsWith",caseSensitive:!1,delay:300,width:null,offset:null,autoSelectFirstItem:!1,highlightMatchedText:!0,highlightCallback:function(e,t){var i=e,n=!1;if("string"==typeof t.alias&&void 0!==e[t.alias]&&(n=!0,i=e[t.alias]),"contains"===t.filterMode)i=i.replace(new RegExp("("+st.escapeRegExp(t.term)+")","ig"),"<i>$1</i>");else if("keyword"===t.filterMode)for(var a=t.term.split(" "),o=0;o<a.length;o++){var l=a[o];l&&(i=i.replace(new RegExp("("+st.escapeRegExp(l)+")","ig"),"<i>$1</i>"))}else{var d=i,h="".concat(d);t.caseSensitive||(h=B.toLowerCase(h));var p=st.escapeRegExp(t.term),v=h.indexOf(p);v>0?i=d.substr(0,v)+"<i>"+d.substr(v,p.length)+"</i>"+d.substr(p.length+v):0===v&&(i="<i>"+d.substr(0,p.length)+"</i>"+d.substr(p.length))}return n?e[t.alias]=i:e=i,e},resultIteratorCallback:function(e,t){var i="string"==typeof e,n={highlightTarget:"label",index:t,listItemId:"ac-list-option".concat(t)};return i?n.label=e:n=H.extend({},n,e),n.hasValue=void 0!==e.value,n.hasValue&&(n.value=e.value),n},clearResultsCallback:void 0,displayResultsCallback:void 0,searchableTextCallback:function(e){return"string"==typeof e?e:e.label}};function qr(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,_u),this.init()}qr.prototype={init:function(){var e=this.element.attr("data-autocomplete");e&&"source"!==e&&(this.settings.source=e,this.element.removeAttr("data-autocomplete"));var t={filterMode:this.settings.filterMode,caseSensitive:this.settings.caseSensitive,highlightMatchedText:this.settings.highlightMatchedText,searchableTextCallback:this.settings.searchableTextCallback};this.listFilter?this.listFilter.updated(t):this.listFilter=new yo(t),this.addMarkup(),this.handleEvents()},get isFocused(){var s=document.activeElement,t=this.list,i=this.element[0].isEqualNode(s),n=t&&t.length&&t[0].contains(s),o=void 0!==$(this.element).data("clearable")&&this.element.parent().find(s);return i||n||o},addMarkup:function(){this.element.addClass("autocomplete").attr({role:"combobox",autocomplete:"off"}),H.addAttributes(this.element,this,this.settings.attributes)},isLoading:function(){return this.element.hasClass("is-loading")&&this.element.hasClass("is-blocked")},openList:function(e,t){var i=this;if(!this.element.is("[disabled], [readonly]")&&!this.isLoading()){if(!this.element.hasClass("searchfield")&&!1===this.element.triggerHandler("beforeopen.autocomplete",{elem:this.element,value:this.element.val()}))return;var a=this;this.settings.caseSensitive||(e=B.toLowerCase(e)),this.list=$("#autocomplete-list"),0===this.list.length&&(this.list=$('<ul id="autocomplete-list" aria-expanded="true"></ul>').appendTo("body")),H.addAttributes(this.list,this,this.settings.attributes,"list"),a.settings.attributes&&setTimeout(function(){i.list.find("li a").each(function(p){var v=$(this);H.addAttributes(v,a,a.settings.attributes,"list-option".concat(p))})}),this.list[0].style.height="auto",this.list[0].style.width="".concat(this.element.outerWidth(),"px"),this.list.addClass("autocomplete"),this.list.empty(),this.settings.width&&(this.list[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px"));var o=$(this.element.attr("data-tmpl"));this.tmpl=$(o).length?$(o).text():"string"==typeof o?o:$(this.settings.template).length?$(this.settings.template).text():"string"==typeof this.settings.template?this.settings.template:'<li id="{{listItemId}}" data-index="{{index}}" {{#hasValue}}data-value="{{value}}"{{/hasValue}} role="listitem">\n <a href="#" tabindex="-1">\n   <span>{{{label}}}</span>\n </a>\n</li>';var l=this.listFilter.filter(t,e),d=[];if(!1!==l&&l.forEach(function(h,p){"string"==typeof h&&(h={label:h,value:h});var v=H.extend(!0,{},h);if(v=a.settings.resultIteratorCallback(v,p),a.settings.highlightMatchedText){var b={filterMode:a.settings.filterMode,caseSensitive:a.settings.caseSensitive,term:e};v.highlightTarget&&(b.alias=v.highlightTarget),a.settings.displayResultsCallback||(v=a.settings.highlightCallback(v,b))}d.push(v)}),this.currentDataSet=d,"function"==typeof this.settings.displayResultsCallback)return void this.settings.displayResultsCallback(d,function(){a.element.trigger("listopen",[d])},e);this.handleListResults(e,t,d)}},handleListResults:function(e,t,i){var n=this;i.forEach(function(T){if(typeof hn<"u"){var k=hn.compile(n.tmpl,T);de.append(n.list,k,"*")}}),this.element.trigger("beforepopulated",[i]);var o={menuId:"autocomplete-list",ariaListbox:!0,mouseFocus:!1,trigger:"immediate",attachToBody:!0,autoFocus:!1,returnFocus:!1,triggerSelect:!1,placementOpts:{parent:this.element,callback:function(k){return!0===k.wasFlipped&&(n.list.add(n.element).addClass("is-ontop"),k.y+=1),k}}};if(this.previouslyOpened){var l=this.element.data("popupmenu");l&&l.position()}else this.element.addClass("is-open").popupmenu(o).one("close.autocomplete",function(){n.closeList(!0)});var d=n.list.find("li"),h=$(d[0]).find("span").outerWidth()+20;if(h>parseInt(this.element.outerWidth(),10)){for(var p=0;p<d.length;p++)d.width(h+"px");this.maxWidth=h}if(n.settings.autoSelectFirstItem&&n.list.children().filter(":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)").first().addClass("is-selected"),this.noSelect=!0,this.element.trigger("populated",[i]).focus(),!this.previouslyOpened){n.list.on("touchend.".concat(bi," click.").concat(bi),"a",function(T){n.select(T)}).on("focusout.".concat(bi),function(){n.checkActiveElement()});var v=n.list.find("a").on("focus.".concat(bi," touchend.").concat(bi),function(){n.highlight($(this),v)});if(this.settings.offset){var b=this.list.parent()[0];this.settings.offset.left&&(b.style.left="".concat(parseInt(b.style.left,10)+this.settings.offset.left,"px")),this.settings.offset.top&&(b.style.top="".concat(parseInt(b.style.top,10)+this.settings.offset.top,"px"))}}var w=H.getArrayFromList(document.querySelectorAll("#ac-is-arialive"));w&&w.forEach(function(T){T.parentNode.removeChild(T)}),de.append(n.list.parent(".popupmenu-wrapper"),'<span id="ac-is-arialive" aria-live="polite" class="audible">'.concat($.trim(this.list.find(">li:first-child").text()),"</span>"),"<div><span><a><small><img><svg><i><b><use><br><strong><em>"),this.noSelect=!0,this.previouslyOpened=!0,this.element.trigger("listopen",[i])},closeList:function(e){if(this.list){if(this.list.off(["click.".concat(bi),"keydown.".concat(bi),"touchend.".concat(bi),"focusout.".concat(bi)].join(" ")),this.list.find("a").off("focus.".concat(bi," touchend.").concat(bi)),this.element.trigger("listclose"),"function"==typeof this.settings.clearResultsCallback)return void this.settings.clearResultsCallback();var t=this.element.data("popupmenu");t&&(e||t.close(),$("#autocomplete-list").parent(".popupmenu-wrapper").remove(),$("#autocomplete-list").remove(),this.element.add(this.list).removeClass("is-open is-ontop"),delete this.previouslyOpened)}},listIsOpen:function(){return this.list instanceof $&&this.list.length&&this.list.is(":visible")},handleAutocompleteKeydown:function(e){var t=this;if(this.isLoading())return e.preventDefault(),!1;if(!this.listIsOpen())return null;function n(h){h.removeClass("is-selected is-focused")}function a(h){h.addClass("is-selected").find("a").focus()}var l=this.list.find("li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)"),d=function i(h){var p=h.filter(".is-selected");return 0===p.length&&(p=h.filter(".is-focused")),p}(l);return 40===e.keyCode&&this.listIsOpen()&&d.length&&(t.noSelect=!0,n(d),a(l.eq(l.index(d)+1)),e.preventDefault(),e.stopPropagation()),38===e.keyCode&&this.listIsOpen()&&d.length&&(t.noSelect=!0,n(d),a(l.eq(l.index(d)-1)),e.preventDefault(),e.stopPropagation()),(9===e.keyCode||13===e.keyCode)&&this.listIsOpen()&&(d.length?(e.stopPropagation(),e.preventDefault(),t.noSelect=!0,t.select(d)):t.isFocused||t.closeList()),null},handleAutocompleteInput:function(e){var t=this;return t.isLoading()?(e.preventDefault(),!1):(this.getDataFromSource().done(function(n,a){t.currentDataSet=a,t.openList(n,a)}),null)},checkActiveElement:function(){var e=this;setTimeout(function(){var t=document.activeElement;e.listIsOpen()&&$.contains(e.list[0],t)||e.element.is(t)||e.element.trigger("safe-blur")},0)},getDataFromSource:function(){var e=this;if(e.isLoading())return!1;var n,t=this.element,i=$.Deferred();function a(l,d){e.element.triggerHandler("complete"),e.element.trigger("requestend",[l,d])}function o(l,d,h){return e.lastTerm!==l||(a(l,d),!1===h)?i.reject(l):i.resolve(Fe.stripTags(l),d)}return clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout(function(){if(!e.isLoading()&&e.isFocused){if(""===(n=t.val()))return e.element.data("popupmenu")&&e.element.data("popupmenu").close(),void a();var l=rt(e.settings.source);if(e.element.triggerHandler("start"),e.element.trigger("requeststart",[n]),e.lastTerm=n,"function"===l)e.settings.source(n,o,e.settings.sourceArguments);else if("object"===l){var d=$.isArray(e.settings.source)?e.settings.source:[e.settings.source];o(n,d,!0)}else if(e.settings.source)if("keyword"===e.settings.filterMode){var h=[],p=function(q){if(0===h.length)h=q;else for(var O=0;O<q.length;O++){for(var _=q[O],G=!1,j=0;j<h.length;j++)for(var X=h[j],fe=0;fe<Object.getOwnPropertyNames(X).length;fe++)if(_[Object.getOwnPropertyNames(_)[fe]]===X[Object.getOwnPropertyNames(X)[fe]]){G=!0;break}G||h.push(_)}},v=function(q){p(q),o(n,h,!0)},b=n.split(" ");""===b[b.length-1]&&b.splice(-1,1);for(var w=0;w<b.length;w++){var T=b[w];if(T.length>0){var k=e.settings.source.toString(),A=$.getJSON(k+T);w<b.length-1?A.done(p).fail(p):A.done(v).fail(v)}}}else{var M=e.settings.source.toString();$.getJSON(M+n).done(function(z){o(n,z,!0)}).fail(function(){o(n,[],!1)})}else i.reject(n)}},e.settings.delay),i},resetFilters:function(){this.openList("",this.currentDataSet)},handleAutocompleteFocus:function(){this.noSelect?this.noSelect=!1:this.element.select()},highlight:function(e,t){var i=this.element.val(),n=e.text().trim();e.find(".display-value").length>0&&(n=e.find(".display-value").text().trim()),t&&t.length&&t.parent("li").removeClass("is-selected"),e.hasClass("no-results")||(e.parent("li").addClass("is-selected"),this.element.val(n).focus()),this.noSelect=!0,i!==n&&this.element.triggerHandler("change")},select:function(e,t){var i,n,a={},o=!1;if(e instanceof $.Event?(o=!0,i=$(e.currentTarget)):i=e,!i.hasClass("no-results")){i.is("li")&&(n=i,i=i.children("a"));var l=(n=i.parent("li")).attr("data-index"),d=n.attr("data-value");if(this.element.attr("aria-activedescendant",n.attr("id")),(!t||!t.length)&&(t=this.currentDataSet),l)a=t[parseInt(l,10)];else if(d)for(var p,h=0;h<t.length;h++)(p="object"===rt(t[h])&&void 0!==t[h].value?t[h].value.toString():t[h].toString())===d&&("object"===rt(t[h])&&(a=t[h]),a.value=p);return(!a.value||0===!a.value.length)&&(a.value=i.text().trim()),this.highlight(i),this.noSelect=!0,a.label=Fe.stripHTML(a.label),a.highlightTarget||(a.highlightTarget="label",a.index=parseInt(l,10),a.listItemId="ac-list-option"+a.index,a.hasValue=!0),this.element.trigger("selected",[i,a]),o&&e.preventDefault(),this.closeList(),this.element.focus(),a}},handleAfterListOpen:function(){var e=this;return this.element.offset().left>this.list.offset().left&&this.list.width(this.list.width()+1),this.list.on("keydown.".concat(bi),function(t){"Enter"===t.key&&e.handleAutocompleteKeydown(t)}),this},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),e&&e.source&&(this.settings.source=e.source),this.teardown().init(),this},enable:function(){this.element.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0)},teardown:function(){var e=this.element.data("popupmenu");return e&&e.destroy(),this.element.off(["focus.".concat(bi),"focusout.".concat(bi),"input.".concat(bi),"keydown.".concat(bi),"listopen.".concat(bi),"requestend.".concat(bi),"resetfilter.".concat(bi),"updated.".concat(bi)].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],bi)},handleEvents:function(){var e=this;this.element.on("updated.".concat(bi),function(){e.updated()}).on("keydown.".concat(bi),function(t){e.handleAutocompleteKeydown(t)}).on("input.".concat(bi),function(t){e.handleAutocompleteInput(t)}).on("focus.".concat(bi),function(){e.handleAutocompleteFocus()}).on("focusout.".concat(bi),function(){e.checkActiveElement()}).on("listopen.".concat(bi),function(){e.handleAfterListOpen()}).on("resetfilter.".concat(bi),function(){e.resetFilters()})}},$.fn.autocomplete=function(s){return this.each(function(){var e=$.data(this,bi);if("string"==typeof e){var t="".concat(e),i=H.extend({},s,{source:t||s.source});e=$.data(this,bi,new qr(this,i))}else e?e.updated(s):e=$.data(this,bi,new qr(this,s))})};var ka="searchfield",Za=[!1,"mobile",!0],yd={resultsCallback:void 0,allResultsCallback:void 0,showAllResults:!0,showGoButton:!1,goButtonCopy:void 0,goButtonAction:void 0,categories:void 0,categoryMultiselect:!1,showCategoryText:!1,source:void 0,template:void 0,clearable:!1,collapsible:Za[0],collapseSize:void 0,tabbable:!0,autocompleteAttribute:"off"};function vc(s,e){this.element=$(s),this.toolbarParent&&!this.isContainedByFlexToolbar&&void 0!==e&&(void 0===e.clearable&&(e.clearable=!0),void 0===e.collapsible&&(e.collapsible=!0,e.tabbable=!1)),this.settings=H.mergeSettings(s,e,yd),this.settings.collapsible&&(this.settings.tabbable=!1),this.init()}vc.prototype={get toolbarParent(){var s=this.element.parents(".toolbar"),e=this.element.parents(".flex-toolbar");if(!(s.add(e).length<1))return e.length>0?e.first()[0]:s.first()[0]},get buttonsetElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".buttonset")},get titleElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".title")},get containmentParent(){var s=this.element.closest(".module-tabs");return s.length?s.first()[0]:this.toolbarParent},get input(){return this.element[0]},get categoryButton(){return this.wrapper.find(".searchfield-category-button")},get isCollapsible(){return!1!==this.settings.collapsible},get isCurrentlyCollapsible(){return!0===this.settings.collapsible||"mobile"===this.settings.collapsible&&Jt.isBelow("phone-to-tablet")},get isContainedByFlexToolbar(){return!!this.containmentParent&&this.containmentParent.className.indexOf("flex-toolbar")>-1},get toolbarFlexItem(){var s;return this.isContainedByFlexToolbar&&(s=$(this.element).data("toolbarflexitem")),s},get autocompleteAPI(){return $(this.element).data("autocomplete")},get isContextSearch(){return this.wrapper[0].className.indexOf("context")>-1},init:function(){this.coerceBooleanSettings(),this.build(),this.setupEvents()},build:function(){this.id||(this.id=H.uniqueId(this.element,ka)),this.label=this.element.prev("label, .label"),this.inlineLabel=this.element.closest("label"),this.isInlineLabel=this.element.parent().is(".inline");var e=this.element.attr("data-autocomplete");e&&"source"!==e&&(this.settings.source=e,this.element.removeAttr("data-autocomplete"),$.removeData(this.element,"autocomplete")),this.settings.source&&(this.autocomplete=this.element.data("autocomplete"),this.autocomplete?this.autocomplete.updated(this.settings):(this.element.autocomplete(this.settings),this.autocomplete=this.element.data("autocomplete"))),this.settings.placeholder&&this.element.attr("placeholder",this.settings.placeholder);var t=this.settings.autocompleteAttribute;"string"==typeof t&&t.length?this.element.attr("autocomplete","".concat(Fe.ensureAlphaNumeric(t))):this.element.hasAttr("autocomplete")&&this.element.removeAttr("autocomplete");var i=this.element.attr("placeholder")||this.element.prev("label, .label").text().trim();(!i||""===i)&&(i=B.translate("Keyword")),this.element.attr({"aria-label":i}),this.wrapper=this.element.parent(".searchfield-wrapper"),(!this.wrapper||!this.wrapper.length)&&(this.wrapper=this.isInlineLabel?this.inlineLabel.addClass("searchfield-wrapper"):this.element.wrap('<span class="searchfield-wrapper"></span>').parent()),this.checkContents();var n="remove";this.settings.collapsible&&this.settings.collapseSize&&(n="add"),this.wrapper[0].classList[n]("has-custom-collapse-size"),this.toolbarParent&&(this.label.prependTo(this.wrapper),this.setInitalWidth());for(var o,a=["context","alternate"],l=0;l<a.length;l++)this.element.hasClass(a[l])&&(this.wrapper.addClass(o=a[l]),this.element.removeClass(o));!0===this.settings.collapsibleOnMobile&&(this.settings.collapsible=Za[1]),this.wrapper[0].classList[this.isCurrentlyCollapsible?"remove":"add"]("non-collapsible"),this.wrapper[0].classList[this.toolbarParent?"add":"remove"]("toolbar-searchfield-wrapper"),H.addAttributes(this.element,this,this.settings.attributes,"",!0),H.addAttributes(this.wrapper,this,this.settings.attributes,"wrapper",!0),this.toolbarParent&&!this.isContainedByFlexToolbar&&this.element.add(this.wrapper).addClass("no-transition no-animation");var d=this.wrapper.find(".icon:not(.icon-dropdown)");if((!d||!d.length)&&(d=$.createIconElement("search")),d[this.wrapper.hasClass("context")||this.wrapper.hasClass("has-categories")?"insertBefore":"insertAfter"](this.element).icon(),this.hasCategories()){this.wrapper.addClass("has-categories"),this.categoryButton.length||$('<button type="button" class="btn searchfield-category-button"></button>').insertBefore(this.element),d.appendTo(this.categoryButton),d=this.categoryButton,this.settings.showCategoryText&&this.wrapper.addClass("show-category");var p=d.find(".icon-dropdown");if(p.length||(p=$.createIconElement({classes:"icon-dropdown",icon:"dropdown"}).icon()),p.appendTo(d),this.categoryButton.data("popupmenu"))this.setCategories(this.settings.categories);else{this.list=this.wrapper.find("ul.popupmenu"),(!this.list||!this.list.length)&&(this.list=$('<ul class="popupmenu"></ul>')),this.list.addClass(this.settings.categoryMultiselect?"is-multiselectable":"is-selectable");var w="is-selectable";this.settings.categoryMultiselect||(w="is-multiselectable"),this.list.removeClass(w),this.setCategories(this.settings.categories),this.list.insertAfter(this.element);var T=this;this.categoryButton.popupmenu({menu:this.list,offset:{y:10},returnFocus:function(){T.isFocused&&T.element.focus()}})}this.setCategoryButtonText()}this.isContainedByFlexToolbar?((!this.collapseButton||!this.collapseButton.length)&&(this.collapseButton=$('\n          <button class="btn-icon collapse-button" type="button">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n              <use href="#icon-exit-fullview"></use>\n            </svg>\n            <span class="audible">'.concat(B.translate("Collapse"),"</span>\n          </button>\n        "))),this.wrapper[0].classList.add("has-collapse-button"),this.element.after(this.collapseButton)):this.wrapper[0].classList.remove("has-collapse-button");var k=this.wrapper.next(".go-button");k.length||(k=this.wrapper.find(".go-button")),k.length&&(this.settings.showGoButton=!0,this.goButton=k,this.element.after(this.goButton)),this.settings.showGoButton?((!this.goButton||!this.goButton.length)&&(this.goButton=$('\n          <button class="btn-secondary go-button">\n            <span>'.concat(this.settings.goButtonCopy||B.translate("Go",{showBrackets:!1}),"</span>\n          </button>\n        "))),this.goButton[0].setAttribute("id",H.uniqueId(this.goButton,"searchfield-go-button-")),this.wrapper.addClass("has-go-button"),this.element.after(this.goButton),this.goButton.button()):this.wrapper.removeClass("has-go-button"),this.settings.clearable&&this.makeClearable(),this.settings.button&&(this.wrapper.addClass("has-custom-button"),this.customButton=$('<button class="btn-icon custom-button"></button>'),this.customButton.append($.createIconElement(this.settings.button.icon)),this.element.after(this.customButton));var A=this,M=new Li({duration:1,updateCallback:function(){},timeoutCallback:function(){A.calculateSearchfieldWidth()}});_i.register(M);var L=0;return $("body").on("resize.".concat(this.id),function(){A.wrapper.parents(".splitter-container").length>0&&(A.wrapper.width()>=A.wrapper.parent().width()||L>=A.wrapper.parent().width()?A.wrapper.width("".concat(A.wrapper.parent().width()-.1*A.wrapper.parent().width(),"px")):A.wrapper.css("width","")),A.calculateSearchfieldWidth()}),!1===this.settings.collapsible&&this.expand(!0),L=A.wrapper.width(),this},simpleAdjustOnBreakpoint:function(){this.shouldBeFullWidth()?!this.isFocused&&(this.settings.collapsible||this.isContainedByFlexToolbar)&&this.wrapper[0].classList.remove("is-open"):this.wrapper[0].classList.add("is-open")},adjustOnBreakpoint:function(){if(this.wrapper[0].classList[this.isCurrentlyCollapsible?"remove":"add"]("non-collapsible"),this.shouldBeFullWidth()){if(this.wrapper.removeAttr("style"),this.input.removeAttribute("style"),this.isFocused){if(this.appendToParent(),this.calculateOpenWidth(),this.setOpenWidth(),this.isExpanded)return;return void this.expand(!0)}return this.isCurrentlyCollapsible&&this.isExpanded&&this.collapse(),this.isContainedByFlexToolbar&&this.wrapper[0].classList.remove("is-open"),void this.setInitalWidth()}this.appendToButtonset(),this.isFocused||"mobile"===this.settings.collapsible?this.isExpanded||this.expand(!0):(this.isExpanded&&this.collapse(),this.setInitalWidth())},saveFocus:function(){this.isFocused&&(this.focusElem=document.activeElement)},restoreFocus:function(){if(this.focusElem){var e=this,t=new Li({duration:1,updateCallback:function(){},timeoutCallback:function(){e.focusElem&&(e.focusElem.focus(),delete e.focusElem)}});_i.register(t)}},appendToParent:function(){!this.containmentParent||this.wrapper.parent().is($(this.containmentParent))||this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper=this.wrapper.prev(),$(this.containmentParent).find(".buttonset").prepend(this.wrapper),H.fixSVGIcons(this.wrapper),this.restoreFocus())},appendToButtonset:function(){!this.containmentParent||!this.wrapper.parent().is($(this.containmentParent))||this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper instanceof $&&this.elemBeforeWrapper.length?(this.wrapper.insertAfter(this.elemBeforeWrapper),this.elemBeforeWrapper=null):this.wrapper.prependTo($(this.buttonsetElem)),$(this.toolbarParent).triggerHandler("scrollup"),H.fixSVGIcons(this.wrapper),this.restoreFocus())},shouldBeFullWidth:function(){var e=this.wrapper.closest(".header"),t=!1;return e.length&&(t=e.width()<Jt.phone),t||Jt.isBelow("phone-to-tablet")},shouldExpandOnMobile:function(){return!0!==this.settings.collapsible&&("mobile"===this.settings.collapsible||this.shouldBeFullWidth())},coerceBooleanSettings:function(){this.settings=H.coerceSettingsToBoolean(this.settings,["showAllResults","categoryMultiselect","showCategoryText","clearable"])},hasCategories:function(){return this.settings.categories&&$.isArray(this.settings.categories)&&this.settings.categories.length>0},hasGoButton:function(){return this.settings.showGoButton&&this.goButton&&this.goButton.length},hasCustomButton:function(){return this.settings.button&&this.customButton&&this.customButton.length},setupEvents:function(){var e=this,t=this;return t.element.on("updated.".concat(this.id),function(i,n){t.updated(n)}).on("focus.".concat(this.id),function(i){t.handleFocus(i)}).on("blur.".concat(this.id),function(i){t.isContainedByFlexToolbar&&t.handleSafeBlur(i)}).on("click.".concat(this.id),function(i){t.handleClick(i)}).on("keydown.".concat(this.id),function(i){t.handleKeydown(i)}).on("beforeopen.".concat(this.id),function(i,n){t.handlePopupBeforeOpen(i,n)}).on("safe-blur.".concat(this.id),function(){t.handleSafeBlur()}).on("listclose.".concat(this.id),function(){t.handleSafeBlur()}).on("input.".concat(this.id),function(){t.checkContents()}),t.wrapper.on("mouseenter.".concat(this.id),function(){$(this).addClass("is-hovered")}).on("mouseleave.".concat(this.id),function(){$(this).removeClass("is-hovered")}),this.hasCategories()&&this.categoryButton.on("selected.".concat(this.id),function(i,n){t.handleCategorySelected(i,n)}).on("focus.".concat(this.id),function(i){t.handleCategoryFocus(i)}).on("blur.".concat(this.id),function(){t.handleSafeBlur()}).on("close.".concat(this.id),function(){t.handleSafeBlur()}).on("beforeopen.".concat(this.id),function(i,n){t.handlePopupBeforeOpen(i,n)}),t.hasGoButton()&&t.goButton.on("click.".concat(this.id),function(i){return t.handleGoButtonClick(i)}).on("click.".concat(this.id),function(i){return t.handleGoButtonFocus(i)}).on("blur.".concat(this.id),function(){return t.handleSafeBlur()}),t.hasCustomButton()&&this.customButton.on("click.".concat(this.id),function(i){return t.settings.button.click(i,t.element.val())}).on("blur.".concat(this.id),function(){return t.handleSafeBlur()}),this.isCollapsible?(this.wrapper.on("focusin.".concat(this.id),function(i){t.handleFocus(i)}).on("focusout.".concat(this.id),function(i){t.handleBlur(i)}).on("keydown.".concat(this.id),function(i){t.handleKeydown(i)}).on("collapse.".concat(this.id),function(){t.collapse()}),$("body").on("breakpoint-change.".concat(this.id),function(){t.adjustOnBreakpoint()}),t.adjustOnBreakpoint()):($("body").on("breakpoint-change.".concat(this.id),function(){t.simpleAdjustOnBreakpoint()}),t.simpleAdjustOnBreakpoint()),this.collapseButton&&this.collapseButton.length&&this.collapseButton.on("keydown.".concat(this.id),function(i){t.collapseResponsive(i)}).on("click.".concat(this.id),function(i){t.collapseResponsive(i)}).on("blur.".concat(this.id),function(){return t.handleSafeBlur()}),this.toolbarParent&&$(this.toolbarParent).on("navigate.".concat(this.id),function(){t.isFocused||!t.isCurrentlyCollapsible||t.collapse()}).on("rendered.".concat(this.id),function(){t.element.removeClass("no-transition no-animation"),t.wrapper.removeClass("no-transition no-animation")}),t.element.on("beforepopulated.".concat(this.id),function(i,n){n.length>0?t.settings.showAllResults&&t.addMoreLink():t.addNoneLink()}),t.settings.clearable&&(t.element.on("cleared.".concat(this.id),function(){t.autocomplete&&t.autocomplete.closeList(),delete t.settings.value}),t.xButton.on("blur.".concat(this.id),function(i){t.xButton.hasClass("collapsed")||t.handleSafeBlur(i)})),t.element.on("listopen.".concat(this.id),function(){var i=$("#autocomplete-list");t.wrapper.addClass("popup-is-open"),t.element.on("selected.".concat(e.id),function(n,a,o){if(a.hasClass("more-results")){var d=t.settings.allResultsCallback;d&&"function"==typeof d&&d(o)}}),i.find(".more-results, .no-results").on("focus.".concat(e.id),function(){var n=$(this);i.find("li").removeClass("is-selected"),n.hasClass("no-results")||(n.parent("li").addClass("is-selected"),t.element.val(""))})}).on("listclose.".concat(this.id),function(){var i=$("#autocomplete-list");t.element.off("selected.".concat(e.id)),i.off("focus.".concat(e.id))}),xe.browser.isSafari()&&this.xButton&&(this.xButton.on("mouseover.clearable",function(){e.closeButtonHover=!0}),this.xButton.on("mouseleave.clearable",function(){e.closeButtonHover=!1})),this},setAsActive:function(e,t){var i=this;if(e||!this.wrapper.hasClass("active")){this.addDocumentDeactivationEvents();var n=["has-focus","active"];(this.isCurrentlyCollapsible||this.isContainedByFlexToolbar)&&(this.expand(!0),this.isContainedByFlexToolbar&&n.push("is-open")),n.forEach(function(a){i.wrapper[0].classList.add(a)}),this.toolbarParent&&this.toolbarParent.classList.add("searchfield-active"),!this.isExpanded&&!0===t&&this.element.focus()}},get isFocused(){var s=document.activeElement,e=this.wrapper[0];if(this.settings.tabbable&&e.contains(s)&&$(s).is("button.close")||xe.browser.isSafari()&&this.closeButtonHover&&!$(s).is("button.close")||e.contains(s))return!0;if(this.autocomplete){var t=this.autocomplete.list;if(t&&t[0].contains(s))return!0}return!!(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(s).length)||!!(this.xButton&&this.xButton.length&&this.xButton.has(s).length||this.customButton&&this.customButton.length&&this.customButton.has(s).length)},hasFocus:function(){return gi("isFocused","hasFocus"),this.isFocused},handleFocus:function(){this.setAsActive(!0)},handleBlur:function(){this.handleSafeBlur()},handleSafeBlur:function(){var e=this;this.blurTimer&&this.blurTimer.destroy(!0),this.blurTimer=new Li({duration:1,updateCallback:function(){},timeoutCallback:function t(){e.isFocused?delete e.settings.value:(e.settings.value=$(e.element).val(),e.removeDocumentDeactivationEvents(),e.clearResponsiveState(),e.isCurrentlyCollapsible?e.collapse():e.isContainedByFlexToolbar&&(e.settings.collapsible||Jt.isBelow("phone-to-tablet"))?e.wrapper[0].classList.remove("is-open"):e.wrapper[0].classList.remove("has-focus","active"))}}),_i.register(this.blurTimer)},clearResponsiveState:function(){this.toolbarParent&&this.toolbarParent.classList.remove("searchfield-active")},handleClick:function(){this.setAsActive()},addDocumentDeactivationEvents:function(){if(!0!==this.hasDeactivationEvents){var e=this;$(document).on("click.".concat(this.id),function(t){e.handleOutsideClick(t)}).on("keydown.".concat(this.id),function(t){e.handleOutsideKeydown(t)}),this.hasDeactivationEvents=!0}},removeDocumentDeactivationEvents:function(){$(document).off("click.".concat(this.id," keydown.").concat(this.id)),this.hasDeactivationEvents=!1},handleOutsideClick:function(e){this.isSearchfieldElement(e.target)||this.handleSafeBlur()},handleKeydown:function(e){var t,i=e.which,n=e.key;27===i&&xe.browser.isIE11()&&e.preventDefault(),e.ctrlKey&&8===i&&this.element.val(""),9===i&&this.handleSafeBlur(),this.isContainedByFlexToolbar&&(null===(t=this.toolbarFlexItem)||void 0===t||null===(t=t?.toolbarAPI)||void 0===t||null===(t=t?.items)||void 0===t?void 0:t?.length)>1&&["ArrowUp","Up","ArrowDown","Down"].indexOf(n)>-1&&this.collapse()},handleOutsideKeydown:function(e){9===e.which&&!this.isSearchfieldElement(e.target)&&this.handleSafeBlur()},handlePopupBeforeOpen:function(e,t){if(this.isCollapsible&&(this.isExpanding||!this.isExpanded)||!t)return!1;var i=this.wrapper.hasClass("context")?"addClass":"removeClass",n=this.wrapper.hasClass("alternate")?"addClass":"removeClass";return t[i]("context"),t[n]("alternate"),!!this.isExpanded||(this.categoryButton.focus(),!1)},handleGoButtonClick:function(e){var t=this.settings.goButtonAction;if("function"==typeof t){var n,i=this.element.val();return this.hasCategories()&&(n=this.getCategoryData()),t(e,i,n)}},handleGoButtonFocus:function(){this.setAsActive(!0)},setCategoryButtonText:function(e){if(this.settings.showCategoryText&&this.categoryButton.length){var t="",i=this.wrapper.find(".btn"),n=i.find("span");if((!n||!n.length)&&(n=$('<span class="category"></span>').insertAfter(i.find(".icon").first())),n.empty(),"string"==typeof e&&e.length)return void n.text(e.trim());var a=this.getSelectedCategories();a.length&&(t=a.length>1?"".concat(a.length," ").concat(B.translate("Selected")):a.text().trim(),n.text(t))}},isSearchfieldElement:function(e){return!!$.contains(this.wrapper[0],e)||!!(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(e).length)},getFillSize:function(e,t){var i,n;function a(h){if(!h)return 0;if(!isNaN(parseInt(h,10)))return parseInt(h,10);if(h instanceof jQuery){if(!h.length)return 0;h.is(".title")&&(h=h.next(".buttonset")),h=h[0]}return h}function o(h,p){if(!isNaN(h))return h??0;(!p||"string"!=typeof p)&&(p="left");var b,v=["left","right"];return-1===$.inArray(p,v)&&(p=v[0]),(h instanceof HTMLElement||h instanceof SVGElement)&&(b=h.getBoundingClientRect()),b[p]}if(e=a(e),t=a(t),i=o(e),n=o(t,function l(){var h="left";return(e===t||$(t).length&&$(t).is(".buttonset"))&&(h="right"),h}()),!i&&!n)return 280;var d=n-i;return d<=280?280:d>=450?450:d},setClosedWidth:function(){return this.setInitalWidth()},setOpenWidth:function(){var e=0,t=this.wrapper;if(this.wrapper[0]&&(this.wrapper[0].style.width=this.openWidth),this.hasCategories()){var i=window.getComputedStyle(this.categoryButton[0]);e+=this.categoryButton.width()+(parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10))+2*parseInt(i.borderLeftWidth,10),1===this.element.parents(".header").length&&Jt.isBelow("phone-to-tablet")&&(e+=40)}if(this.hasGoButton()){var l=window.getComputedStyle(this.goButton[0]);e+=this.goButton.width()+parseInt(l.borderRightWidth,10)}if(e>0){var p=t.hasClass("alternate")?2:0;this.input.style.width="calc(100% - ".concat(e+p,"px)")}delete this.openWidth},calculateOpenWidth:function(){var i,e=this.element.parents(".toolbar").children(".buttonset"),t=this.wrapper.next();if(e.length){if(t.is(".title")&&(t=e),this.shouldBeFullWidth()){var n="100%";return Jt.isBelow("desktop")&&(n="90%"),i=n,$(this.toolbarParent).closest(".tab-container.module-tabs").length&&(i="calc(".concat(n," - 1px)")),void(this.openWidth=i)}var a=e.offset().left+10,o=t;o.length||(o=e.offset().left+10+e.outerWidth(!0)),i=this.getFillSize(a,o),this.openWidth="".concat(i-6,"px")}},calculateSearchfieldWidth:function(){var a,e=this.element[0].getAttribute("style"),t=this.element.parents(".field-short").length>0,i="100%",n=0;e&&this.element[0].removeAttribute("style");var l,o=window.getComputedStyle(this.element[0]);o.width&&!this.isContextSearch&&(i=o.width),this.hasCategories()&&!t&&(n+=this.categoryButton.outerWidth(!0),1===this.element.parents(".header").length&&Jt.isBelow("phone-to-tablet")&&(n+=40)),this.hasGoButton()&&(n+=this.goButton.outerWidth(!0)),n>0&&(l=null!=this.element[0].parentElement&&(this.element[0].parentElement.classList.contains("alternate")||this.isContainedByFlexToolbar),a="calc(".concat(l?"100%":i," - ").concat(n,"px)")),a&&(this.element[0].style.width=a)},handleCategorySelected:function(e,t){this.element.trigger("selected",[t]),this.settings.showCategoryText&&(this.setCategoryButtonText(e,t.text().trim()),this.calculateSearchfieldWidth(),this.settings.categoryMultiselect||this.setAsActive(!0,!0))},handleCategoryFocus:function(){this.saveFocus(),this.setAsActive(!0)},getCategories:function(){return this.list.children("li:not(.separator)")},getSelectedCategories:function(){return this.getCategories().filter(".is-checked")},getCategoryData:function(e){var t=this.getCategories(),i=[];return t.each(function(){var a=this.classList.contains("is-checked");if(!0!==e||!1!==a){var o={name:this.innerText,checked:a};this.id&&(o.id=this.id);var l=this.getAttribute("data-value");void 0!==l&&(o.value=l),i.push(o)}}),i},updateCategories:function(e){this.settings.categories=e,this.setCategories(this.settings.categories)},setCategories:function(e){this.list.empty();var t=this,i=["string","number"],n=!1;e.forEach(function(o){if("string"==typeof o&&(o={name:o}),o.name){var l="";"string"==typeof o.id&&o.id.length&&(l=' id="'.concat(o.id,'"'));var d="";i.indexOf(rt(o.value))>-1&&(d=' data-value="'.concat(o.value,'"'));var h="";!0===o.checked&&!0!==n&&(h=' class="is-checked"',t.settings.categoryMultiselect||(n=!0)),t.list.append("<li".concat(h).concat(l).concat(d,'><a href="#">').concat(o.name,"</a></li>"))}});var a=this.categoryButton.data("popupmenu");a&&"function"==typeof a.updated&&a.updated()},expand:function(e){var t=this,i=this;return new Promise(function(a){if(i.isExpanded||i.isExpanding||i.isCollapsing)a();else{var o=!i.shouldBeFullWidth();i.isExpanding=!0,o||i.appendToParent(),i.wrapper.removeAttr("style"),i.input.removeAttribute("style");var l=0;i.buttonsetElem&&(l=parseInt(window.getComputedStyle(i.buttonsetElem).width,10));var h={buttonset:l+280};t.isContainedByFlexToolbar||t.wrapper[0].classList.add("is-open"),t.calculateOpenWidth(),t.setOpenWidth(),(!e||"ios"===xe.os.name||i.isFocused&&document.activeElement!==i.input)&&(i.focusElem&&(i.focusElem=i.input),i.element.parents(".flex-toolbar").length||i.input.focus());var p=[];h&&p.push(h),i.element.trigger("beforeexpand"),$(i.toolbarParent).triggerHandler("recalculate-buttons",p);var v=new Li({duration:10,updateCallback:function(){},timeoutCallback:function(){$(i.toolbarParent).triggerHandler("recalculate-buttons",p),i.element.trigger("expanded"),delete i.isExpanding,i.isExpanded=!0,i.settings.clearable&&i.xButton.removeClass("collapsed"),i.isCurrentlyCollapsible&&!i.isFocused&&!i.focusElem&&i.handleSafeBlur()}});_i.register(v)}})},collapse:function(){var e=this,t=this;return new Promise(function(n){if(t.isExpanded||!t.isExpanding||t.isCollapsing){t.isCollapsing=!0,t.wrapper.removeAttr("style"),t.appendToButtonset(),t.checkContents(),t.toolbarParent&&t.setInitalWidth(),t.clearResponsiveState(),t.wrapper.removeClass("is-open"),t.wrapper.removeClass("active"),xe.browser.isIE11&&t.wrapper[0].classList.remove("is-open"),setTimeout(function(){(e.isContainedByFlexToolbar||!e.isFocused)&&t.wrapper[0].classList.remove("has-focus")},300),t.categoryButton&&t.categoryButton.length&&t.categoryButton.data("popupmenu").close(!1,!0),t.element.trigger("beforecollapse"),delete t.isExpanded,delete t.isExpanding;var a=new Li({duration:10,updateCallback:function(){},timeoutCallback:function(){delete t.isCollapsing,$(t.toolbarParent).triggerHandler("recalculate-buttons"),t.element.trigger("collapsed"),t.settings.clearable&&t.xButton.addClass("collapsed"),n()}});_i.register(a)}else n()})},collapseResponsive:function(e){if(this.previouslyCollapsedByKey&&"click"===e.type)delete this.previouslyCollapsedByKey;else{var n,t=this,i=1;e&&!e.key&&(i=0,this.toolbarFlexItem&&null!==(n=this.toolbarFlexItem)&&void 0!==n&&n?.focused&&(i=1)),"keydown"===e.type&&(this.previouslyCollapsedByKey=!0),this.collapse().then(function(){t.wrapper.trigger("collapsed-responsive",[i])})}},get hasText(){return""!==(this.input.value?this.input.value.trim():"")},checkContents:function(){return this.wrapper[0].classList[this.hasText?"add":"remove"]("has-text")},setInitalWidth:function(){if(this.settings.collapsible&&!this.shouldBeFullWidth()&&this.hasText){var e;if(this.settings.collapseSize&&(e="function"==typeof this.settings.collapseSize?this.settings.collapseSize(this):parseInt(this.settings.collapseSize,10)),isNaN(e))return void(this.wrapper[0]&&(this.wrapper[0].style.width=""));this.wrapper[0]&&(this.wrapper[0].style.width="".concat(e,"px"))}},addMoreLink:function(){var e=$("#autocomplete-list"),t=this.element.val();if(!($(".more-results",e).length>0)){var i=$('<li class="separator" role="presentation"></li>').appendTo(e),n=$('<li role="presentation"></li>').appendTo(e);this.moreLink=$('<a href="#" class="more-results" tabindex="-1" role="menuitem"></a>').html("<span>".concat(B.translate("AllResults"),' "').concat(Fe.ensureAlphaNumericWithSpaces(t),'"</span>')).appendTo(n),this.autocomplete.maxWidth&&i.width("".concat(this.autocomplete.maxWidth,"px"))}},addNoneLink:function(){var e=$("#autocomplete-list");if(!($(".no-results",e).length>0)){var t=$('<li role="presentation" class="is-placeholder"></li>').appendTo(e);this.noneLink=$('<a href="#" class="no-results" disabled="disabled" tabindex="-1" role="menuitem" aria-disabled="true"></a>').html("<span>".concat(B.translate("NoResults"),"</span>")).appendTo(t)}},updated:function(e){e&&(this.settings=H.mergeSettings(this.element,e,this.settings),Object.prototype.hasOwnProperty.call(e,"collapseSize")&&void 0===e.collapseSize&&(this.settings.collapseSize=e.collapseSize)),this.teardown().init()},disable:function(){this.wrapper.addClass("is-disabled"),this.element.prop("disabled",!0)},enable:function(){this.wrapper.removeClass("is-disabled"),this.element.prop("disabled",!1)},teardown:function(){if(this.element.off(["updated.".concat(this.id),"focus.".concat(this.id),"blur.".concat(this.id),"click.".concat(this.id),"keydown.".concat(this.id),"beforeopen.".concat(this.id),"input.".concat(this.id),"listopen.".concat(this.id),"listclose.".concat(this.id),"safe-blur.".concat(this.id),"selected.".concat(this.id),"populated.".concat(this.id),"cleared.".concat(this.id)].join(" ")),this.wrapper.off(["mouseenter.".concat(this.id),"mouseleave.".concat(this.id),"focusin.".concat(this.id),"focusout.".concat(this.id),"keydown.".concat(this.id),"collapse.".concat(this.id)].join(" ")),this.toolbarParent&&$(this.toolbarParent).off("navigate.toolbarsearchfield"),this.goButton&&this.goButton.length&&(this.goButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.goButton),this.customButton&&this.customButton.length&&(this.customButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.customButton),this.categoryButton&&this.categoryButton.length){var e=this.categoryButton.data("popupmenu");e&&(e.destroy(),e.wrapper.off().remove()),this.categoryButton.off().remove(),delete this.categoryButton}return this.collapseButton&&this.collapseButton.length&&(this.collapseButton.off().remove(),delete this.collapseButton,delete this.previouslyCollapsedByKey),this.removeDocumentDeactivationEvents(),$("body").off("resize.".concat(this.id)),$("body").off("breakpoint-change.".concat(this.id)),this.autocomplete&&this.autocomplete.destroy(),this.wrapper.hasClass("context")&&this.element.addClass("context"),this.element.next(".icon").remove(),this.element.parent().hasClass("searchfield-wrapper")&&(this.element.parent().find("ul").remove(),this.element.parent().find(".icon").remove()),this.xButton&&this.xButton.length&&(this.xButton.off("blur.".concat(this.id)),xe.browser.isSafari()&&(this.xButton.off("mouseover.clearable"),this.xButton.off("mouseleave.clearable")),this.xButton.remove()),this},makeClearable:function(){var e=this;this.element.clearable({tabbable:this.settings.tabbable}),this.wrapper.addClass("has-close-icon-button"),this.xButton=this.wrapper.children(".icon.close").length>0?this.wrapper.children(".icon.close"):this.wrapper.children("button.close"),this.settings.tabbable||this.xButton[0].setAttribute("tabindex","-1"),this.element.on("cleared",function(){return e.checkContents()}),H.addAttributes(this.xButton,this,this.settings.attributes,"btn-close",!0),H.addAttributes(this.element.xButton,this,this.settings.attributes,"btn-close",!0)},clear:function(){this.xButton&&this.xButton.click(),this.element.xButton&&this.element.xButton.click()},destroy:function(){this.teardown(),$.removeData(this.element[0],ka)}},$.fn.searchfield=function(s){return this.each(function(){var e=$.data(this,ka);e?e.updated(s):e=$.data(this,ka,new vc(this,s))})};var ii="applicationmenu",dl={breakpoint:"phone-to-tablet",dismissOnClickMobile:!1,filterable:!1,filterMode:"contains",resizable:!1,savePosition:!1,openOnLarge:!1,triggers:[".application-menu-trigger"],onExpandSwitcher:null,onCollapseSwitcher:null};function pa(s,e){return this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,dl),this.init()}pa.prototype={get accordionEl(){return this.accordion[0]},get searchEl(){return this.element[0].querySelector(".searchfield")},get searchAPI(){return this.searchEl?$(this.searchEl).data("searchfield"):void 0},get searchfieldAPI(){return this.searchAPI},init:function(){this.setup().handleEvents()},setup:function(){this.hasTrigger=!1,this.isAnimating=!1,this.element.find(".application-menu-footer").length&&this.element.addClass("has-menu-footer"),this.hasTriggers()||(this.triggers=$()),this.menu=this.element;var e=this.element.attr("data-open-on-large");this.settings.openOnLarge=void 0!==e?"true"===e:this.settings.openOnLarge;var t=this.element.attr("data-breakpoint");this.settings.breakpoint=void 0!==Jt[t]?t:this.settings.breakpoint,this.modifyTriggers(this.settings.triggers,!1,!0),this.scrollTarget=this.menu.parents(".header");var i=this.menu.prevAll(".masthead"),n=this.menu.prevAll(".module-tabs");i.length>0&&(this.scrollTarget=i,this.menu.addClass("short")),n.length>0&&(this.scrollTarget=n),this.element.find(".application-menu-switcher-panel .accordion").accordion(),this.accordion=this.menu.find(".accordion").last(),this.accordion.addClass("panel").addClass("inverse");var a=this.accordion.data("accordion");a||(this.accordion.accordion(),a=this.accordion.data("accordion")),this.accordionAPI=a,this.attachFilter(),this.renderResizableAppMenu(),this.isOpen()?this.openMenu(!1,!1,!0):this.adjustHeight();var o=this.element.find(".application-menu-switcher-trigger");return o.length>0&&(this.switcherTrigger=o,this.switcherPanel=o.next(".expandable-area"),this.switcherPanel.data("expandablearea")||this.switcherPanel.expandablearea({trigger:o})),this},getAdjacentContainerElement:function(){var e=this.element.next(".page-container");return e.length||(e=$("body")),e},handleTriggerEvents:function(){var e=this;this.triggers.length&&this.triggers.off("click.applicationmenu").on("click.applicationmenu",function t(i){return!$(i.currentTarget).find(".icon.app-header").hasClass("go-back")&&!e.isAnimating&&(e.menu.hasClass("is-open")?e.closeMenu(!0):e.openMenu(void 0,!0),!0)}),this.element.find(".searchfield").on("keydown.applicationmenu",function(i){e.handleKeyDown(i)})},handleKeyDown:function(e){return!(121===e.which&&!e.shiftKey&&(e.preventDefault(),this.isOpen()?(this.closeMenu(!0),this.triggers.length&&this.triggers.eq(0).focus()):this.openMenu(),1))},notify:function(e,t){if(e&&void 0!==e&&(e instanceof HTMLElement&&(e=$(e)),e.is("a"))){var i=e.find(".tag");return t&&void 0!==t&&0!==parseInt(t,10)?(i.length||(i=$('<span class="tag"></span>').appendTo(e)),i.text(t.toString()),i):void(i.length&&i.remove())}},adjustHeight:function(){var e=this.scrollTarget.is(".is-sticky"),i=this.scrollTarget.outerHeight(!0)-(e?0:$(window).scrollTop());this.scrollTarget.prev().is(".masthead")&&(i+=this.scrollTarget.prev().outerHeight(!0)),this.menu[0].style.height=i>0?"calc(100% - ".concat(i,"px)"):"100%"},toggleScrollClass:function(){if("ie"===xe.browser.name&&"11"===xe.browser.version){var e=this.element[0];e&&e.classList.contains("has-menu-footer")&&(e.scrollHeight>e.clientHeight?e.classList.add("has-scrollbar"):e.classList.remove("has-scrollbar"))}},isLargerThanBreakpoint:function(){return Jt.isAbove(this.settings.breakpoint)},isOpen:function(){return this.menu[0].classList.contains("is-open")},testWidth:function(){if(this.isOpen()){if(Jt.isAbove(this.settings.breakpoint))return void this.element[0].classList.remove("show-shadow");if(this.element[0].classList.add("show-shadow"),this.isAnimating)return;this.userOpened||this.closeMenu()}else Jt.isBelow(this.settings.breakpoint)||this.userClosed||!this.settings.openOnLarge||this.isAnimating||this.openMenu(!0)},attachFilter:function(){qi.attachFilter.apply(this,[ii])},attachFilterEvents:function(){qi.attachFilterEvents.apply(this,[ii])},renderResizableAppMenu:function(){if(this.settings.resizable){this.openMenu(!1,!1,!1),this.element.after('<div class="resizer"></div>'),$("#application-menu, .resizer").wrapAll('<div class="resize-app-menu-container" />'),$(".page-container").wrapAll('<div class="resize-page-container" />'),$(".resize-page-container").insertAfter(".resizer");var e=document.querySelector(".resizer"),t=document.querySelector("#application-menu"),i=$(".tab-panel-container.page-container"),n=$(".page-container");if(e.addEventListener("mousedown",function(d){d.preventDefault(),window.addEventListener("mousemove",a),window.addEventListener("mouseup",o)}),localStorage&&localStorage.navMenuWidth&&this.settings.savePosition&&(t.style.flexBasis=localStorage.navMenuWidth),this.settings.savePosition&&(n.css("width","calc(100% - ".concat(localStorage.navMenuWidth,")")),i&&i.css("width","calc(100% - ".concat(localStorage.navMenuWidth,")"))),$("html.is-safari")&&this.settings.resizable&&$(".resize-app-menu-container").css("display","flex"),!localStorage.navMenuWidth){var l=$(".resizer").position();n.css("width","calc(100% - ".concat(l.left<300?300:l.left,"px)"))}}function a(d){t.style.flexBasis="".concat((d.pageX<300?300:d.pageX)-t.getBoundingClientRect().left,"px"),$(".page-container").css("width","calc(100% - ".concat(d.pageX<300?300:d.pageX,"px)"))}function o(){window.removeEventListener("mousemove",a,!1),localStorage&&(localStorage.navMenuWidth=t.style.flexBasis)}},openMenu:function(e,t,i){if(!0!==this.isAnimating){var n=this,a=$.fn.transitonEndName;if(i||(this.isAnimating=!0),this.adjustHeight(),this.settings.resizable){var l=parseInt(this.element[0].style.flexBasis,10);(l<300||isNaN(l))&&(l=300),this.settings.savePosition?$(".page-container").css("width","calc(100% - ".concat(localStorage.navMenuWidth,")")):$(".page-container").css("width","calc(100% - ".concat(l,"px)"))}this.triggers.each(function(){var h=$(this);h.attr({"aria-expanded":!0}),(h.parents(".header").length>0||h.parents(".masthead").length>0)&&(h.find(".icon.app-header").removeClass("go-back"),h.trigger("icon-change"))}),i||(this.menu.off("".concat(a,".applicationmenu")),this.menu[0].style.display="",this.menu.addClass("is-open"),xe.features.touch&&$("body").addClass("is-open-touch")),Jt.isBelow(this.settings.breakpoint)&&this.menu.addClass("show-shadow"),(!e||!0!==e)&&this.menu.find(".is-selected > a").focus(),"ios"===xe.os.name&&this.getAdjacentContainerElement().addClass("ios-click-target"),i?o():(this.menu.one("".concat(a,".applicationmenu"),o),this.timeout=setTimeout(o,300)),setTimeout(function(){$(document).on("click.applicationmenu",function(h){$(h.target).parents(".application-menu").length<1&&!n.isLargerThanBreakpoint()&&n.closeMenu(!0)})},0)}function o(){null!==n.timeout&&(clearTimeout(n.timeout),n.timeout=null),t&&(n.userOpened=!0,n.userClosed=void 0),i||(n.isAnimating=!1,n.element.trigger("applicationmenuopen"),$("body").triggerHandler("resize")),n.toggleScrollClass(),n.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}},closeMenu:function(e){if(!0!==this.isAnimating){var t=this,i=$.fn.transitionEndName();this.isAnimating=!0,this.triggers.each(function(){var o=$(this);o.attr({"aria-expanded":!1}),(o.parents(".header").length>0||o.parents(".masthead").length>0)&&(o.find(".icon.app-header"),o.trigger("icon-change"))}),"ios"===xe.os.name&&this.getAdjacentContainerElement().removeClass("ios-click-target"),this.menu.one("".concat(i,".applicationmenu"),n),this.timeout=setTimeout(n,300),this.menu.removeClass("is-open show-shadow").find("[tabindex]"),$(document).off("click.applicationmenu"),this.settings.resizable&&$(".page-container").css("width","100%"),xe.features.touch&&$("body").removeClass("is-open-touch")}function n(){null!==t.timeout&&(clearTimeout(t.timeout),t.timeout=null),t.menu.off("".concat(i,".applicationmenu")),t.menu[0].style.display="none",t.isAnimating=!1,e&&(t.userOpened=void 0,t.userClosed=!0),t.element.trigger("applicationmenuclose"),$("body").triggerHandler("resize")}},hasTriggers:function(){return void 0!==this.triggers&&this.triggers instanceof $&&this.triggers.length},modifyTriggers:function(e,t,i){var n=this;if(e&&e.length){var a=$(),o=!this.element.is(":visible");$.each(e,function(l,d){a=a.add($(d))}),this.triggers=this.triggers[t?"not":"add"](a),this.handleTriggerEvents(),this.triggers.each(function(l,d){var h,p=$(d);p.attr("aria-controls","application-menu"),p.attr("aria-expanded","".concat(n.isOpen()));var v=null===(h=d.textContent)||void 0===h?void 0:h?.length,b=p.find(".audible");if(!v){var w=B.translate("AppMenuTriggerTextAlt");b.length?b.text(w):d.insertAdjacentHTML("beforeend",'<span class="audible">'.concat(w,"</span>"))}}),(!i||!0!==i)&&(this.updated(),o&&this.element.css("display","none"))}},handleSearchfieldInputEvent:function(){qi.handleSearchfieldInputEvent.apply(this,[ii])},handleDismissOnClick:function(){this.settings.dismissOnClickMobile&&(this.userOpened=!1,!this.isLargerThanBreakpoint()&&this.closeMenu())},closeSwitcherPanel:function(){if(this.switcherPanel){var e=this.switcherPanel.data("expandablearea");if(e&&(e.close(),this.settings.dismissOnClickMobile)){if(this.userOpened=!1,this.isLargerThanBreakpoint())return;this.closeMenu()}}},teardown:function(){var e,t,i;(this.menu.off("animateopencomplete animateclosedcomplete").removeClass("short").removeAttr("style"),$(window).off("scroll.applicationmenu"),$("body").off("resize.applicationmenu"),$(document).off(["click.applicationmenu","open-applicationmenu","close-applicationmenu","dismiss-applicationmenu","keydown.applicationmenu","input.applicationmenu"].join(" ")),this.element.find(".expandable-area").off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","keydown.".concat(ii,"-switcher")].join(" ")),this.accordion.off(["blur.applicationmenu","selected.applicationmenu","followlink.applicationmenu","afterexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.element.find(".application-menu-toolbar").off("click.".concat(ii)),this.accordionAPI&&"function"==typeof(null===(e=this.accordionAPI)||void 0===e?void 0:e?.destroy))&&(this.isFiltered&&(null===(i=this.accordionAPI)||void 0===i||i?.collapse()),null===(t=this.accordionAPI)||void 0===t||t?.destroy());return this.switcherPanel&&(this.switcherPanel.off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","afterexpand.".concat(ii)].join(" ")),delete this.switcherTrigger,delete this.switcherPanel),this.teardownFilter(),this.hasTriggers()&&this.triggers.off("click.applicationmenu"),this},teardownFilter:function(){qi.teardownFilter.apply(this,[ii])},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element[0],ii)},handleEvents:function(){var e=this,t=this;return this.handleTriggerEvents(),this.menu.on("notify.applicationmenu",function(i,n,a){t.notify(n,a)}).on("updated.applicationmenu",function(){t.updated()}),"ie"===xe.browser.name&&"11"===xe.browser.version&&t.element.find(".expandable-area").on("beforeexpand.applicationmenu",function(){t.element[0].classList.remove("has-scrollbar")}).on("aftercollapse.applicationmenu",function(){t.toggleScrollClass()}),this.accordion.on("blur.applicationmenu",function(){t.closeMenu()}).on("selected.applicationmenu",function(){t.handleDismissOnClick()}).on("followlink.applicationmenu",function(){t.handleDismissOnClick()}).on("afterexpand.applicationmenu aftercollapse.applicationmenu",function(){t.toggleScrollClass()}),this.switcherPanel&&this.switcherPanel.on("beforeexpand.applicationmenu",function(){var i=e.element.height();t.element.addClass("has-open-switcher"),t.switcherPanel.find(".content").height(i-71),t.settings.onExpandSwitcher&&t.settings.onExpandSwitcher(t,t.element,t.settings),t.element.on("keydown.".concat(ii,"-switcher"),function(a){var o=a.key;"Escape"===o&&t.element[0].classList.contains("has-open-switcher")&&(a.preventDefault(),t.closeSwitcherPanel()),"Tab"===o&&(t.keyboardChangedFocus=!0)}),t.switcherPanel.one("afterexpand.".concat(ii),function(){e.keyboardChangedFocus||function n(){var a=de.focusableElems(t.switcherPanel[0]);a[0].classList.remove("hide-focus"),a[0].focus()}()})}).on("aftercollapse.applicationmenu",function(){e.element.removeClass("has-open-switcher"),e.settings.onCollapseSwitcher&&e.settings.onCollapseSwitcher(e,e.element,e.settings),e.element.off("keydown.".concat(ii,"-switcher")),e.switcherPanel.off("afterexpand.".concat(ii)),delete e.keyboardChangedFocus}),this.element.find(".application-menu-toolbar").on("click.".concat(ii),"button",function(i){i.defaultPrevented||e.handleDismissOnClick()}),$(document).on("open-applicationmenu",function(i,n,a){t.openMenu(n,a)}).on("close-applicationmenu",function(i,n){t.closeMenu(n)}).on("dismiss-applicationmenu",function(){t.handleDismissOnClick()}),$(window).on("scroll.applicationmenu",function(){t.adjustHeight()}),$("body").on("resize.applicationmenu",function(){t.testWidth(),t.toggleScrollClass()}),this.attachFilterEvents(),this.settings.openOnLarge&&this.isLargerThanBreakpoint()&&(this.menu.addClass("no-transition"),$(".page-container").addClass("no-transition")),this.testWidth(),setTimeout(function(){t.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")},800),this}},$.fn.applicationmenu=function(s){return this.each(function(){var e=$.data(this,ii);return e?e.updated(s):e=$.data(this,ii,new pa(this,s)),e})};var tn="blockgrid",mc={dataset:[],selectable:!1,paging:!1,withImage:!0,pagerSettings:{pagesize:25,pagesizes:[10,25,50,75],showFirstButton:!1,showLastButton:!1},attributes:null};function bc(s,e){return e&&(e.dataset&&(s.dataset=e.dataset),e.pagesize&&(gi("`pagerSettings.pagesize` setting","`pagesize` setting"),s.pagerSettings.pagesize=e.pagesize,delete s.pagesize),e.pagesizes&&(gi("`pagerSettings.pagesizes` setting","`pagesizes` setting"),s.pagerSettings.pagesizes=e.pagesizes,delete s.pagesizes)),s}function yc(s,e){this.element=$(s),this.settings=H.mergeSettings(s,e,mc),this.settings=bc(this.settings,e),this.init()}yc.prototype={get pagerAPI(){return this.element.data("pager")},init:function(){return this.selectedRows=[],this.handlePaging(),this.build().handleEvents()},build:function(){return this.settings.paging&&this.element.empty(),this.render(),this},handleEvents:function(){var e=this,t=this;return this.element.on("click.".concat(tn),".block",function(i){var n=$(i.currentTarget),a=$(i.target),o=a.is(".checkbox-label")||a.is(".checkbox");setTimeout(function(){t.select(n,o)},0),i.stopPropagation(),i.preventDefault()}),this.element.on("focus.".concat(tn),".checkbox",function(i){$(i.currentTarget).parent().addClass("has-focus")}),this.element.on("blur.".concat(tn),".checkbox",function(i){$(i.currentTarget).parent().removeClass("has-focus")}),this.element.on("keypress.".concat(tn),".block",function(i){if(32===i.which){var n=$(i.target);t.select(n,!1)}}),this.element.on("updated.".concat(tn),function(){t.updated()}),this.pagerAPI&&this.element.on("page.".concat(tn),function(){e.previousFocusedElement=!0,e.build()}).on("pagesizechange.".concat(tn),function(){e.previousFocusedElement=!0,e.build()}),this},handlePaging:function(){if(this.settings.paging){var e=H.extend({},this.settings.pagerSettings,{componentAPI:this,dataset:this.settings.dataset});this.element.addClass("paginated"),this.element.pager(e)}},selectBlock:function(e,t){return ms(this.select,this.selectBlock).apply(this,[e,t])},select:function(e,t){var i=this.element.find(".block"),n=this.element.find(".checkbox"),a=e.find(".checkbox"),o=a.is(":checked"),l="",d=Number(a.data("idx"));if("single"===this.settings.selectable&&(this.selectedRows=[],i.removeClass("is-selected").removeAttr("aria-selected"),n.prop("checked",!1)),"multiple"===this.settings.selectable&&o||"mixed"===this.settings.selectable&&t&&o){e.removeClass("is-selected").removeAttr("aria-selected"),a.prop("checked",!1);for(var h=0;h<this.selectedRows.length;h++)d===this.selectedRows[h].idx&&this.selectedRows.splice(h,1);this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}])}else{if(!1!==this.settings.selectable&&!("mixed"===this.settings.selectable&&!t)&&(o||(e.addClass("is-selected").attr("aria-selected","true"),a.prop("checked",!0)),this.selectedRows.push({idx:d,data:this.settings.dataset[d],elem:e}),l=o?"deselected":"selected"),"mixed"===this.settings.selectable&&!t){var p=e.hasClass("is-activated");return i.removeClass("is-activated"),void(p?(e.removeClass("is-activated"),this.element.triggerHandler("deactivated",[{row:d,item:this.settings.dataset[d]}])):(e.addClass("is-activated"),this.element.triggerHandler("activated",[{row:d,item:this.settings.dataset[d]}])))}this.element.triggerHandler(o?"deselected":"selected",[{selectedRows:this.selectedRows,action:l}])}},render:function(){var e=this,t=this.settings,i=B?B.translate("Select"):"Select",n="",a=t.dataset;if(this.pagerAPI){var o=this.pagerAPI.state;if(o.pages>1){var l=o.activePage>0?o.activePage-1:0,d=o.pagesize*l;if((a=a.slice(d,o.pagesize*(l+1))).length!==t.dataset.length)for(var p=0;p<a.length&&!a[p].id;p++)a[p].id=d+p}}var v=[];this.selectedRows.forEach(function(M){v.push(M.idx)});for(var b=function(){var _,L=a[w],z="mixed"===t.selectable?"0":"-1",q="",O="";if(v.indexOf(L.id)>-1&&(q=" is-selected",O=" checked"),t.withImage){var G=L.imgAlt||L.imageAlt||"".concat(L.maintxt||L.title," ").concat(B.translate("Image"));_='<div class="block is-selectable'.concat(q,'" role="listitem" tabindex="0">\n          <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox').concat(w,'" tabindex="').concat(z,'" data-idx="').concat(L.id||w,'"').concat(O,'>\n          <label for="checkbox').concat(w,'" class="checkbox-label">\n            <span class="audible">').concat(i,'</span>\n          </label>\n          <img alt="').concat(G,'" src="').concat(L.img||L.image,'" class="image-round">\n          <p> ').concat(L.maintxt||L.title," <br> ").concat(L.subtxt||L.subtitle," </p>\n        </div>")}else{var j="";L.content&&L.content.forEach(function(X){j+="<br>".concat(X)}),_='<div class="block text-block is-selectable'.concat(q,'" role="listitem" tabindex="0">\n        <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox').concat(w,'" tabindex="').concat(z,'" data-idx="').concat(L.id||w,'"').concat(O,'>\n        <label for="checkbox').concat(w,'" class="checkbox-label text-block">\n          <span class="audible">').concat(i,"</span>\n        </label>\n        <p><b>").concat(L.title,"</b>").concat(j,"</p>\n        </div>")}n+=_},w=0;w<a.length;w++)b();if(this.element.attr("role","list").append(n),t.attributes)for(var T=0;T<a.length;T++){var k=this.element.find("#checkbox".concat(T)),A=this.element.find('.checkbox-label[for="checkbox'.concat(T,'"]'));H.addAttributes(k,this,t.attributes,"blockgrid-checkbox".concat(T)),H.addAttributes(A,this,t.attributes,"blockgrid-checkbox-label".concat(T))}this.previousFocusedElement&&setTimeout(function(){e.element.find(".block").first().focus(),delete e.previousFocusedElement},0)},renderBlock:function(){return ms(this.render,this.renderBlock).apply(this)},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),this.settings=bc(this.settings,e),this.teardown(),this.init(),this},teardown:function(){return this.element.off("updated.".concat(tn)),this.element.off("click.".concat(tn)),this.element.empty(),this.selectedRows=[],this},destroy:function(){this.teardown(),$.removeData(this.element[0],tn)}},$.fn.blockgrid=function(s){return this.each(function(){var e=$.data(this,tn);e?e.updated(s):e=$.data(this,tn,new yc(this,s))})};var qu={attributes:null,callback:void 0,content:"",current:!1,disabled:!1,href:void 0,id:void 0};function ul(s){return this.settings=H.mergeSettings(null,s,qu),this.init()}ul.prototype={init:function(){return this.settings.element instanceof HTMLElement&&this.getSettingsFromElement(),this.settings.callback="function"==typeof this.settings.callback?this.settings.callback:null,this.settings.content="string"==typeof this.settings.content?Fe.stripHTML(this.settings.content):"",this.settings.current=!0===this.settings.current,this.settings.disabled=!0===this.settings.disabled,this.settings.id="string"==typeof this.settings.id?Fe.stripHTML(this.settings.id):void 0,this.settings.href="string"==typeof this.settings.href?Fe.stripHTML(this.settings.href):void 0,this},render:function(){var t,i,e=this.element;return e||(e=document.createElement("li"),this.settings.href?(t=document.createElement("a"),e.appendChild(t)):(i=document.createElement("span"),e.appendChild(i)),this.element=e),e.classList.add("breadcrumb-item"),e},refresh:function(){var e=this.element,t=e.querySelector("a"),i=e.querySelector("span:not(.audible)"),n=t?$(t):void 0;if(this.disabled=this.settings.disabled,this.current=this.settings.current,(t||e).id="string"==typeof this.settings.id?this.settings.id:"",(t||i||e).innerHTML="string"==typeof this.settings.content?this.settings.content:"",t){if("string"==typeof this.settings.href){var a="string"==typeof this.settings.href?Fe.stripHTML(this.settings.href):void 0;t.href=a,t.setAttribute("href",a)}else t.href=void 0,t.removeAttribute("href");n.hyperlink()}return i&&i.parentNode.isEqualNode(e)&&i.classList.add("breadcrumb-text"),Array.isArray(this.settings.attributes)&&H.addAttributes(n||$(e),this,this.settings.attributes),e},checkFocus:function(){var e=this.a;if(e){var t=this.overflowed;(xe.browser.isIE11||xe.browser.isEdge)&&(t=!1),e.tabIndex=t||this.disabled?-1:0,e.setAttribute("tabindex",e.tabIndex)}},get a(){return this.element.querySelector("a")},set current(s){var e=!0===s;this.settings.current=e,this.element.classList[e?"add":"remove"]("current")},get current(){return this.settings.current},set disabled(s){var e=!0===s;this.settings.disabled=e,this.element.classList[e?"add":"remove"]("is-disabled");var t=this.a;t&&(t.disabled=e,e?(t.setAttribute("disabled",e),t.setAttribute("aria-disabled",e)):(t.removeAttribute("disabled"),t.removeAttribute("aria-disabled")))},get disabled(){var s,e=null===(s=this.a)||void 0===s?void 0:s?.getAttribute("disabled"),t=this.element.getAttribute("is-disabled");return e||t},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},get overflowed(){var s=this.element,e=s.querySelector("a"),t=s.querySelector("span"),i=(e||t||s).getBoundingClientRect(),n=this.element.parentNode.getBoundingClientRect();return xe.rtl?n.right<i.right:n.left>i.left},callback:function(e){if("function"!=typeof this.settings.callback)return!1;for(var t=this.settings.callback,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];var o=t.apply(this,[e].concat(n));return o||e.preventDefault(),o},get index(){for(var s=this.element,e=0;null!==s.previousSibling;)s=s.previousSibling,e++;return e},getSettingsFromElement:function(){var e=this.settings.element,t=e.querySelector("a");function i(o){return o=o.replace('<span class="audible">Current</span>',""),Fe.stripHTML(o)}t?(this.settings.content=i(t.innerHTML),this.settings.href=t.href,this.settings.id=t.id):(this.settings.content=i(e.innerHTML),e.id&&(this.settings.id=e.id));var n=!0===e.classList.contains("current"),a=t&&!0===t.classList.contains("current");this.settings.current=n||a,this.settings.disabled=!0===e.classList.contains("is-disabled"),this.element=e,this.fromElement=!0,delete this.settings.element},destroy:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.element&&this.element.parentNode){if(!this.fromElement){var t=this.a;if(t){var i=$(t);i.off(),i.data("hyperlink").destroy()}}(e||!this.fromElement)&&(this.element.parentNode.removeChild(this.element),delete this.element)}}};var ga="breadcrumb",Hs=["default","alternate"],wd={breadcrumbs:[],style:Hs[0],truncate:!0};function Wr(s,e){if(!(s instanceof HTMLElement))throw new Error("`element` argument must be of type `HTMLElement`");return this.element=s,this.settings=H.mergeSettings(s,e,wd),this.init(),this}Wr.prototype={init:function(){var e=this;Array.isArray(this.breadcrumbs)||(this.breadcrumbs=[]);var t=this.element.querySelector("ol"),i=H.getArrayFromList(this.element.querySelectorAll("li"));t&&(this.list=t),i.length&&i.forEach(function(n){e.add({element:n})}),Array.isArray(this.settings.breadcrumbs)||(this.settings.breadcrumbs=[]),this.settings.breadcrumbs.forEach(function(n){e.add(n)}),this.element.classList.contains(Hs[1])&&(this.settings.style=Hs[1]),-1===Hs.indexOf(this.settings.style)&&(this.settings.style=Hs[0]),this.render()},render:function(){var e;this.list?(this.teardownEvents(),this.teardownBreadcrumbs()):(this.list=document.createElement("ol"),this.element.appendChild(this.list));var t=document.createDocumentFragment();if(this.breadcrumbs.forEach(function(h){if(!h.fromElement||!h.element){var p=h.render();t.appendChild(p)}}),this.canDetectResize){if(!this.overflowBtn){var a=document.createElement("div"),o=document.createElement("button"),l=document.createElement("ul"),d=document.createElement("span");a.classList.add("breadcrumb-overflow-container"),o.classList.add("btn-actions"),o.classList.add("overflow-btn"),d.innerText="More Breadcrumbs",d.classList.add("audible"),o.insertAdjacentHTML("afterbegin",$.createIcon({icon:"more"})),o.appendChild(d),a.appendChild(o),a.appendChild(l),this.overflowContainerElem=a,this.overflowBtn=o,this.overflowMenu=l}this.element.insertBefore(this.overflowContainerElem,this.list),$(this.overflowBtn).popupmenu({menu:$(this.overflowMenu),beforeOpen:function i(h){var p="";this.overflowed.forEach(function(v,b){var w="",T="";v.settings.disabled&&(w=" is-disabled",T=" disabled");var k='<li class="'.concat(w,'">\n          <a href="').concat(v.settings.href||"#",'" data-breadcrumb-index="').concat(b,'"').concat(T,">").concat(v.settings.content||"","</a>\n        </li>");p+=k}),h(p)}.bind(this)})}null!==(e=t.childNodes)&&void 0!==e&&e?.length&&this.list.appendChild(t),this.list.setAttribute("aria-label","Breadcrumb"),this.element.classList.add("breadcrumb"),this.list.classList.add("breadcrumb-list"),this.refresh(),this.handleEvents()},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("Settings for a new breadcrumb item must be provided.");this.breadcrumbs.forEach(function(a){if(e.id&&a.id===e.id)throw new Error("New breadcrumbs must have a unique ID attribute.")});var n=new ul(e);this.breadcrumbs.push(n),i&&this.settings.breadcrumbs.push(e),t&&(this.render(),!0===n.settings.current&&this.makeCurrent(n))},remove:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getBreadcrumbItemAPI(e);n.api.destroy(!0),this.breadcrumbs.splice(n.i,1),i&&this.settings.breadcrumbs.splice(n.i,1),t&&this.render()},removeAll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.breadcrumbs.forEach(function(i){i.destroy(!0)}),this.breadcrumbs=[],t&&(this.settings.breadcrumbs=[]),e?this.render():this.refresh()},makeCurrent:function(e){var t=this.getBreadcrumbItemAPI(e);this.breadcrumbs.forEach(function(i){i.current=i.element.isEqualNode(t.api.element)})},get current(){var s,e;return this.breadcrumbs.forEach(function(t){!s&&t.current&&(e=(s=t).element)}),e},set disabled(s){var e=!0===s;this.element.classList[e?"add":"remove"]("is-disabled"),this.breadcrumbs.forEach(function(t){t.disabled=e})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},get overflowed(){return this.breadcrumbs.filter(function(s){return s.overflowed})},get canDetectResize(){return this.settings.truncate&&xe.features.resizeObserver},handleEvents:function(){var e=this,t=this;$(this.list).on("click.".concat(ga),"li",function(i){var n=e.getBreadcrumbItemAPI(i.currentTarget);if(n&&n.api){for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];n.api.callback(i,o)}}),this.canDetectResize&&(this.previousSize=this.list.getBoundingClientRect(),this.ro=new ResizeObserver(function(){e.detectCheck&&e.detectCheck.destroy(!0),e.detectCheck=new Li({duration:1,timeoutCallback:function(){var n=t.list.getBoundingClientRect();n.width!==t.previousSize.width&&(t.previousSize=n,t.refresh(),delete t.detectCheck)}}),_i.register(e.detectCheck)}),this.ro.observe(this.list)),this.overflowBtn&&$(this.overflowBtn).on("selected.".concat(ga),function(i){var a=(arguments.length<=1?void 0:arguments[1])[0].getAttribute("data-breadcrumb-index"),o=e.overflowed[Number(a)];$(o.element).trigger("click")}),this.hasEvents=!0},getBreadcrumbItemAPI:function(e){var t,i,n,a=!1;if(e instanceof ul?(t=e,i=e.element,n=this.breadcrumbs.indexOf(e)):e instanceof HTMLAnchorElement?i=e.parentNode:e instanceof HTMLLIElement?i=e:!isNaN(e)&&e>-1&&(a=!0,i=(t=this.breadcrumbs[n=e]).element),i&&!t&&!n&&this.breadcrumbs.forEach(function(d,h){d.element.isEqualNode(i)&&(t=d,n=h)}),!t){var l=a?n:i;throw new Error("No matching Breadcrumb was found by ".concat(a?"at index ":" with matching HTML List Item",' "').concat(l,'"'))}return{api:t,li:i,i:n}},refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.teardownEvents(),this.breadcrumbs.forEach(function(t){t.refresh()}),this.element.classList["alternate"===this.settings.style?"add":"remove"]("alternate"),this.canDetectResize?this.element.classList[this.overflowed.length||this.element.scrollHeight>55?"add":"remove"]("truncated"):(this.element.classList.remove("truncated"),this.element.classList.add("no-truncate")),this.breadcrumbs.forEach(function(t){t.checkFocus()}),e&&this.handleEvents()},teardown:function(){if(this.teardownEvents(),this.teardownBreadcrumbs(),this.breadcrumbs=[],this.overflowContainerElem){var e=$(this.overflowBtn).data("popupmenu");e&&e.destroy(),this.overflowContainerElem.parentNode&&this.element.removeChild(this.overflowContainerElem)}return this},teardownEvents:function(){this.hasEvents&&(this.ro&&(this.ro.disconnect(),delete this.ro),this.overflowBtn&&$(this.overflowBtn).off(["beforeopen.".concat(ga),"selected.".concat(ga)].join(" ")),$(this.list).off(),$(this.element).off(),delete this.hasEvents)},teardownBreadcrumbs:function(){this.breadcrumbs.forEach(function(e){e.destroy()})},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init(),this},destroy:function(){this.teardown(),$.removeData(this.element,ga)}},$.fn.breadcrumb=function(e){return this.each(function(){var t=$.data(this,ga);t?t.updated(e):t=$.data(this,ga,new Wr(this,e))})};var Vr="busyindicator",wc={blockUI:!0,text:null,displayDelay:1e3,timeToComplete:0,transparentOverlay:!1,overlayOnly:!1,attributes:null};function xo(s,e){this.settings=H.mergeSettings(s,e,wc),this.element=$(s),this.init()}xo.prototype={init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.setup().handleEvents()},setup:function(){var e=this.element.attr("data-block-ui"),t=this.element.attr("data-display-delay"),i=this.element.attr("data-completion-time");this.blockUI=void 0!==e?e:this.settings.blockUI,this.settings.overlayOnly||(this.loadingText=this.settings.text?this.settings.text:B.translate("Loading"),this.label&&this.label.text(this.loadingText));var n=void 0!==t&&!isNaN(t)&&parseInt(t,10)>20,a=!isNaN(this.settings.displayDelay)&&this.settings.displayDelay>=20?this.settings.displayDelay:20;return this.delay=n?t:a,this.completionTime=void 0===i||isNaN(i)?this.settings.timeToComplete:parseInt(i,10),this},activate:function(){var e=this;if(!e.isActive()){if(this.container)return e.closeTimeout&&clearTimeout(e.closeTimeout),this.label.remove(),this.settings.overlayOnly||(this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container),this.element.is("input, .dropdown, .multiselect, .busy-xs, .busy-sm")&&this.label.addClass("audible")),void this.container.removeClass("is-hidden").trigger("afterstart");this.container=$('<div class="busy-indicator-container is-hidden"></div>').attr({"aria-live":"polite",role:"status"}),this.loader=$('<div class="busy-indicator active"></div>').appendTo(this.container),this.settings.overlayOnly||($('<div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div>').appendTo(this.loader),this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container));var t="";if(this.blockUI&&(this.settings.transparentOverlay&&(t=" transparent"),this.originalPositionProp=this.element[0].style.position,"absolute"!==window.getComputedStyle(this.element[0],null).getPropertyValue("position")&&(this.element[0].style.position="relative"),this.overlay=$('<div class="overlay busy is-hidden'.concat(t,'"></div>')).appendTo(this.element),this.container.addClass("blocked-ui")),this.label&&this.element.is(".busy-xs, .busy-sm")&&this.label.addClass("audible"),this.element.is("input, .dropdown, .multiselect")){var n;if(this.element.addClass("is-loading"),this.blockUI&&this.element.addClass("is-blocked"),this.label&&this.label.addClass("audible"),this.element.is("input"))n=this.element,this.container.insertAfter(this.isInlineLabel?this.inlineLabel:this.element);else{var a=this.element.data("dropdown");this.container.appendTo((n=a.pseudoElem).parent())}this.overlay&&this.overlay.insertAfter(this.container);for(var o=n.position(),l=n.outerHeight(),d=n.outerWidth(),h=this.container.add(this.overlay),p=function(T,k,A){T.style[k]="".concat(A,"px")},v=0,b=h.length;v<b;v++)p(h[v],"left",o.left),p(h[v],"top",o.top),p(h[v],"bottom",o.bottom),p(h[v],"right",o.right),p(h[v],"height",l),p(h[v],"width",d)}else this.container.appendTo(this.element);setTimeout(function(){e.container&&e.container.removeClass("is-hidden"),e.overlay&&e.overlay.removeClass("is-hidden"),e.blockUI&&e.addScrollParent()},e.delay),this.element.trigger("afterstart"),$.fn.cssPropSupport("animation")||(e.isAnimating=!0,e.animateWithJS()),this.completionTime>0&&setTimeout(function(){e.element.trigger("complete")},e.completionTime),H.addAttributes(this.container,this,this.settings.attributes),H.addAttributes(this.container.find(".busy-indicator.active"),this,this.settings.attributes,"busyindicator"),H.addAttributes(this.container.find("span"),this,this.settings.attributes,"text"),H.addAttributes(this.overlay,this,this.settings.attributes,"overlay")}},close:function(e){var t=this;t.isActive()&&(this.removeScrollParent(),e&&(this.element.removeClass("is-loading"),this.element.removeClass("is-blocked")),this.container&&this.container.addClass("is-hidden"),this.overlay&&this.overlay.addClass("is-hidden"),t.closeTimeout=setTimeout(function(){clearTimeout(t.closeTimeout),t.container&&t.container.remove(),t.container=void 0,t.loader=void 0,t.label=void 0,t.overlay&&(t.overlay.remove(),t.element[0].style.position=t.originalPositionProp,t.originalPositionProp=void 0),t.overlay=void 0,t.element.trigger("aftercomplete.busyindicator"),t.element.off("complete.busyindicator"),t.element.trigger("hide.busyindicator")},600))},animateWithJS:function(){var e=this,t=this.container.find(".bar.one"),i=this.container.find(".bar.two"),n=this.container.find(".bar.three"),a=this.container.find(".bar.four"),o=this.container.find(".bar.five"),l=0;setInterval(function h(){e.isAnimating?(1===(l+=1)&&t.addClass("half"),13===l&&(t.removeClass("half").addClass("full"),i.addClass("half")),26===l&&(t.removeClass("full").addClass("half"),i.removeClass("half").addClass("full"),n.addClass("half")),39===l&&(t.removeClass("half"),i.removeClass("full").addClass("half"),n.removeClass("half").addClass("full"),a.addClass("half")),51===l&&(i.removeClass("half"),n.removeClass("full").addClass("half"),a.removeClass("half").addClass("full"),o.addClass("half")),64===l&&(n.removeClass("half"),a.removeClass("full").addClass("half"),o.removeClass("half").addClass("full")),77===l&&(a.removeClass("half"),o.removeClass("full").addClass("half")),90===l&&o.removeClass("half"),103===l&&(l=0)):clearInterval(null)},10)},addScrollParent:function(){var e=this;if(this.blockUI){var t=this.element[0];this.scrollParent=$(this.getScrollParent(t));var a,i=this.scrollParent[0],n=i?i.offsetHeight:0;this.overlay&&this.overlay[0]&&(a=window.getComputedStyle(this.overlay[0],null).getPropertyValue("position"));var o="absolute"===a;if(n&&this.container&&n<=t.offsetHeight){var l=window.innerHeight||document.documentElement.clientHeight,h=n/2-58,p=function(){if(o&&e.element.is(i)){var b=t.scrollTop;e.overlay.css({top:b}),e.container.css({top:h+b})}else if(H.isInViewport(i)&&function(b){return b.scrollHeight>=b.clientHeight&&b.clientHeight<l-60}(i))e.container[0].offsetHeight&&e.container.css({top:h+i.scrollTop});else{var T=0,k=0,A=t.getBoundingClientRect();if(A.top<0){var M=A.height+A.top;T=M>l?l:M,k=A.top}else T=l-A.top;e.container.css({top:(T-85)/2-k})}};p(),this.scrollParent.off("scroll.parent.busyindicator").on("scroll.parent.busyindicator",function(){e.container&&p()})}}},removeScrollParent:function(){this.scrollParent&&(this.scrollParent.off("scroll.parent.busyindicator"),delete this.scrollParent)},getScrollParent:function(e){var t=["overflow","overflow-x","overflow-y"],a=/(auto|scroll)/,o=function(h){return a.test(function(h){return t.reduce(function(p,v){return p+function(h,p){return getComputedStyle(h,null).getPropertyValue(p)}(h,v)},0)}(h))};return function(h){for(var p=!1,v=h;!p&&v&&v.tagName&&"body"!==v.tagName.toLowerCase();){if(o(v)){p=!0;break}v=v.parentNode}return p?v:null}(e)},updated:function(e){return null!=e&&e?.text&&(e.text=Fe.unescapeHTML(e.text)),this.settings=H.mergeSettings(this.element,e,this.settings),this.setup()},isActive:function(){return!!this.container&&this.container.children(".busy-indicator").is(".active")},destroy:function(){this.removeScrollParent(),this.close(!0),this.element.off("start.busyindicator complete.busyindicator afterstart.busyindicator aftercomplete.busyindicator updated.busyindicator"),$.removeData(this.element[0],Vr)},handleEvents:function(){var e=this;return this.element.on("start.busyindicator",function(i){i.stopPropagation(),e.activate()}).on("afterstart.busyindicator",function(){e.element.on("complete.busyindicator",function(i){i.stopPropagation(),e.close(!0)})}).on("updated.busyindicator",function(){e.close(!0),e.updated()}),this}},$.fn.busyindicator=function(s){return this.each(function(){var e=$.data(this,Vr);e?e.updated(s):e=$.data(this,Vr,new xo(this,s))})},$.fn.selectable=function(){var s=this;return s.hideFocus(),s.on("click",function(e){s.removeClass("is-selected"),$(e.currentTarget).toggleClass("is-selected")}),this};var nn="cards",ys={bordered:null,noHeader:!1,contentPaddingX:null,contentPaddingY:null,noShadow:!1,dataset:[],template:null,selectable:!1,expandableHeader:!1,verticalButtonAction:!1,detailRefId:void 0,attributes:null};function To(s,e){this.settings=H.mergeSettings(s,e,ys),this.element=$(s),this.init()}To.prototype={init:function(){this.selectedRows=[],this.showCardDetailFlag=!1,this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),(!this.id||void 0===this.id)&&(this.id="expandable-card-".concat($("body").find(".card, .widget").index(this.element)),this.element.attr("id",this.id)),this.settings.expandableHeader&&(this.element.addClass("expandable-card"),this.expandableCardHeader=this.element.children(".card-header, .widget-header").addClass("expandable-card-header")),this.cardHeader=this.element.children(".card-header, .widget-header"),this.cardContentPane=this.element.children(".card-pane, .widget-pane"),this.cardFooter=this.element.children(".card-footer"),this.buttonAction=this.cardHeader.children(".btn-actions"),!1!==this.settings.selectable&&(this.cards=this.element),1===this.cardFooter.length&&this.element.addClass("has-footer"),this},build:function(){var w,T,e=this,t=this.element,i=this.element.hasClass("is-expanded"),n=B?B.translate("Select"):"Select",a="single"===this.settings.selectable,o=!0===this.settings.bordered,l=!1===this.settings.bordered,d=this.element.find(".card-header-section.custom-action, .widget-header-section.custom-action").length>0,h=this.settings,p=h.contentPaddingX,v=h.contentPaddingY;if(this.renderTemplate(),!1!==this.settings.selectable&&(this.cards.find(".card").addClass("is-selectable"),this.cards.addClass(a?"single":"multiple"),this.element.attr("role","list"),this.element.find(".card, .widget").attr({role:"listitem",tabindex:"0"})),"multiple"===this.settings.selectable&&this.cards.find(".card, .widget").each(function(M){$(this).find(".card-content, .widget-content").prepend('\n          <input type="checkbox" id="checkbox-'.concat(M,'" aria-hidden="true" tabindex="0" role="presentation"\n            class="checkbox">\n            <label for="checkbox-').concat(M,'" class="checkbox-label">\n              <span class="audible">').concat(n,"</span>\n            </label>\n        "))}),this.cardContentPane.attr({id:"".concat(this.id,"-content"),role:"region","aria-labelledby":"".concat(this.id,"-header")}),this.settings.expandableHeader&&this.expandableCardHeader&&(null===(w=this.expandableCardHeader)||void 0===w||w?.attr("role","button")),this.buttonAction.length>0&&this.settings.verticalButtonAction&&this.buttonAction.addClass("vertical"),i&&(this.cardContentPane.addClass("no-transition"),this.element.one("afterexpand.expandable-card",function(){e.cardContentPane.removeClass("no-transition")}),this.open()),i||(this.cardContentPane.addClass("no-transition"),this.element.one("aftercollapse.expandable-card",function(){e.cardContentPane.removeClass("no-transition")}),this.close()),this.settings.expandableHeader||H.addAttributes(this.cardHeader,this,this.settings.attributes,"header",!0),H.addAttributes(this.element,this,this.settings.attributes,"card",!0),H.addAttributes(this.element.find(".card .card-content"),this,this.settings.attributes,"card-content",!0),H.addAttributes(this.element,this,this.settings.attributes,"widget",!0),H.addAttributes(this.element.find(".card .card-content"),this,this.settings.attributes,"widget-content",!0),this.settings.selectable||(this.expandableCardHeader&&H.addAttributes(this.expandableCardHeader,this,this.settings.attributes,"expander",!0),H.addAttributes(this.buttonAction,this,this.settings.attributes,"action",!0),H.addAttributes(this.cardContentPane,this,this.settings.attributes,"content",!0)),o&&t.addClass("bordered"),l&&t.addClass("border-less"),this.settings.noHeader&&(t.addClass("no-header"),null===(T=this.cardHeader)||void 0===T||T?.remove()),this.settings.noShadow&&t.addClass("no-shadow"),null!==p||null!==v){var k=t.find(".card-content, .widget-content");null!==p&&k.addClass("padding-x-".concat(p)),null!==v&&k.addClass("padding-y-".concat(v))}if(d&&t.addClass("show-buttons"),"multiple"===this.settings.selectable){var A=this;setTimeout(function(){e.cards.find(".card, .widget").each(function(L){var z=$(this);H.addAttributes(z.find(".checkbox-label"),A,A.settings.attributes,"checkbox-label-".concat(L),!0),H.addAttributes(z.find(".card-content .checkbox"),A,A.settings.attributes,"checkbox-".concat(L),!0)})},1)}return B.isRTL()&&this.removeInfoIconTooltip(),this.resizeButtonset(),this},removeInfoIconTooltip:function(){if(this.element.hasClass("card")){var e=Jt.isBelow("slim");this.cardHeader.find("> .icon").css("display","".concat(e?"none":""))}},select:function(e){var t=this.element.find(".card"),i=e.find(".checkbox"),n=e.hasClass("is-selected"),a="";if("single"===this.settings.selectable&&(this.selectedRows=[],t.removeClass("is-selected").removeAttr("aria-selected")),"multiple"===this.settings.selectable&&n)return e.removeClass("is-selected").removeAttr("aria-selected"),i.prop("checked",!1),void this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}]);!1!==this.settings.selectable&&(e.addClass("is-selected").attr("aria-selected","true"),"multiple"===this.settings.selectable&&i.prop("checked",!0),this.selectedRows.push({data:this.settings.dataset,elem:e}),a=n?"deselected":"selected"),this.element.triggerHandler(n?"deselected":"selected",[{selectedRows:this.selectedRows,action:a}])},renderTemplate:function(){if(this.settings.template){var e=this.settings;"object"===rt(hn)&&e.dataset&&this.settings.template&&(this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):"string"==typeof this.settings.template&&(st.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())));var t=hn.compile(this.settings.template,{dataset:e.dataset});e.dataset.length>0?this.cards.html(t):0===e.dataset.length&&this.cards.html(t||'<div class="cards auto-height"></div>')}},resizeButtonset:function(){var e=this.element.find(".card-buttonset");if(0!==e.length&&this.element.parent().is("li")){for(var t=this.element.width()<=360,i=function(q,O,_){var G;if(q.hasClass("is-overflowed")){var j=q.find(".card-content-action");j?G=q.find(".card-content-action button"):(j=$('<div class="card-content-action"></div>'),G=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(B.translate("MoreActions"),"</span>")).attr("title",B.translate("More")),j.append(G),q.append(j))}else{q.addClass("is-overflowed");var X=$('<div class="card-content-action"></div>');G=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(B.translate("MoreActions"),"</span>")).attr("title",B.translate("More")),X.append(G),q.append(X)}var he,fe=G.data("popupmenu");fe?he=fe.settings.menu:(he=$('<ul class="popupmenu"></ul>')).insertAfter(G);for(var we=function(){var Te=O[re],ge=$(Te.innerHTML),ce=$('<li><a href="#"></a></li>');ce.find("a").append(ge),ce.data("originalButton",Te),ce.on("click",function(){return $(Te).triggerHandler("click")}),ce.find(".audible").removeClass("audible"),he.prepend(ce),$(Te).hide()},re=O.length-1,Ne=0;re>=0&&Ne<_;re--,Ne++)we();fe?fe.updated({menu:he}):G.popupmenu({menu:he})},n=e.children(":visible:not(.card-content-action)"),a=0,o=0,l=0,d=0;d<n.length;d++){var h=$(n.get(d)).hasClass("btn-icon")?1:2;if(o+h>4)break;if(1===h){if(h+l>3)break;l++}o+=h,a=d}if(a++,t)i(e,n,n.length);else if(n.length>a)i(e,n,n.length-a);else if(e.hasClass("is-overflowed")&&o<3){var p=this.element.find(".card-content-action button"),v=p.data("popupmenu"),b=p.parent();if(v&&v.settings.menu){for(var w=v.settings.menu.children(),T=0,k=0;k<w.length;k++){var A=$($($(w).get(k)).data("originalButton")),M=A.hasClass("btn-icon")?1:2;if(o+M>4)break;if(1===M){if(M+l>3)break;l++}A.show(),o+=M,T=k}T++;for(var L=0;L<T;L++)$(w).get(L).remove();0===$(v.settings.menu.children()).length?(v.destroy(),p.remove(),b.remove(),e.removeClass("is-overflowed")):v.updated()}}}},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),this},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},isDisabled:function(){return this.element.hasClass("is-disabled")},open:function(){var e,t=this;!1!==this.element.triggerHandler("beforeexpand",[this.element])&&(this.element.addClass("is-expanded"),null===(e=this.expandableCardHeader)||void 0===e||e?.attr("aria-expanded","true"),this.element.triggerHandler("expand",[this.element]),this.cardContentPane[0]&&(this.cardContentPane[0].style.display="block"),this.cardContentPane.one("animateopencomplete",function(){t.element.triggerHandler("afterexpand",[t.element])}).animateOpen({timing:300}))},close:function(){var e=this;!1!==this.element.triggerHandler("beforecollapse",[this.element])&&(this.element.triggerHandler("collapse",[this.element]),this.cardContentPane.one("animateclosedcomplete",function(){var i;e.element.removeClass("is-expanded"),null===(i=e.expandableCardHeader)||void 0===i||i?.attr("aria-expanded","false"),e.element.triggerHandler("aftercollapse",[e.element]),e.cardContentPane[0].style.display="none"}).animateClosed({timing:300}))},showCardDetail:function(){this.showCardDetailFlag=!0,this.showCardDetailFlag&&this.element.addClass("show-card-detail"),this.addBackButton()},hideCardDetail:function(){this.showCardDetailFlag=!1,this.element.removeClass("show-card-detail"),this.cardHeader.removeClass("has-back-button"),this.cardHeader.find(".go-back-button").remove()},addBackButton:function(){this.cardHeader&&(this.cardHeader.addClass("has-back-button"),this.cardHeader.prepend('\n      <div class="widget-header-section go-back-button">\n        <button id="go-back" class="btn-icon go-back btn-system" type="button">\n          <span class="audible">Show navigation</span>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-arrow-left"></use>\n          </svg>\n        </button>\n      </div>\n      '))},handleEvents:function(){var e,t=this,i=this,n=$(i.element).find(".card-content, .widget-content"),a="#".concat(i.settings.detailRefId);null===(e=this.expandableCardHeader)||void 0===e||e?.on("click.cards",function(l){i.isDisabled()||(l.preventDefault(),i.toggleExpanded())}),!1!==this.settings.selectable&&this.element.on("click.".concat(nn),".card",function(l){var d=$(l.currentTarget),p=$(l.target).is(".checkbox");setTimeout(function(){i.select(d,p)},0),l.stopPropagation(),l.preventDefault()}),n.find(a).on("click",function(l){l.stopPropagation(),i.showCardDetail();var d=i.element.find(".card-header, .widget-header").find(".go-back");$(d).on("click",function(h){h.stopPropagation(),i.hideCardDetail()})}),$("body").on("resize.card",function(){B.isRTL()&&t.removeInfoIconTooltip(),setTimeout(function(){t.resizeButtonset()},300)});var o=this.element.find(".card-header, .widget-header");return this.element.find(".card-content, .widget-content").children().on("scroll.card",function(l){var d=l.target,h=$(d).siblings(".listview-search, .widget-search"),p=$(d).siblings(".card-search, .widget-search").find(".searchfield-wrapper");d.scrollTop>0?h.length>0?h.addClass("is-scrolling"):p.length>0?p.addClass("is-scrolling"):o.addClass("is-shadow-scrolling"):(h.removeClass("is-scrolling"),p.removeClass("is-scrolling"),o.removeClass("is-shadow-scrolling"))}),this},teardown:function(){var e,t;return $("html").off("themechanged.".concat(nn)),this.element.off("click.".concat(nn)),null===(e=this.expandableCardHeader)||void 0===e||e?.off("click.cards"),this.expandableCardHeader=null,$("body").off("resize.card"),$(this.element.find(".card-content, .widget-content").find("#".concat(this.settings.detailRefId,", .is-selected"))).off(),$(null===(t=this.element.find(".card-header, .widget-header"))||void 0===t?void 0:t?.find(".go-back")).off(),this.selectedRows=[],this.cardContentPane.off(),this.element.find(".card-content").children().off("scroll.card"),this.cardContentPane=null,this},destroy:function(){this.teardown(),$.removeData(this.element[0],nn)}},$.fn.cards=function(s){var e=$(this),t=e.attr("data-dataset"),i=e.attr("data-tmpl"),n=H.parseOptions(this)||{};n.dataset=n.dataset||t,n.template=n.template||i,window[n.dataset]&&(n.dataset=window[n.dataset]),n.template&&n.template.length&&(n.template=$("#".concat(n.template)).html());var a=H.extend({},s,n);return this.each(function(){var o=$.data(this,nn);o?o.updated(a):o=$.data(this,nn,new To(this,a))})},$.fn.popover=function(s){return this.each(function(){var e=$.data(this,"popover");e?e.updated(s):e=$.data(this,"popover",new rl(this,s))})};var ue={destroy:function(e){var t,i;null===(t=e[0])||void 0===t||(i=t?.classList).remove.apply(i,["line-chart","bar-chart","bar-chart-stacked","bar-chart-grouped","bubble","column-chart","completion-chart","chart-completion-target-padding","chart-pie","has-right-legend"])},tooltip:{}};ue.isIE="ie"===xe.browser.name,ue.isIEEdge="edge"===xe.browser.name,ue.tooltipSize=function(e){var t;return null!==(t=this.tooltip)&&void 0!==t&&t?.find||this.appendTooltip(),de.html(this.tooltip.find(".tooltip-content"),e,"*"),{height:this.tooltip.outerHeight(),width:this.tooltip.outerWidth()}},ue.formatToSettings=function(e,t){var i=e.data?e.data:e,n=t.formatter&&".0f"!==t.formatter?d3.format(t.formatter)(i.percent):"".concat(isNaN(i.percentRound)?0:i.percentRound,"%");return"value"===t.show?t.formatter?d3.format(t.formatter)(i.value):i.value:"label"===t.show?i.name:"label (percent)"===t.show?"".concat(i.name," (").concat(n,")"):"label (value)"===t.show?"".concat(i.name," (").concat(t.formatter?d3.format(t.formatter)(i.value):i.value,")"):"percent"===t.show?n:"function"==typeof t.show?t.show(i):i.value},ue.appendTooltip=function(e){var t=this;this.tooltip=$("#svg-tooltip"),0===this.tooltip.length&&(e=e?" ".concat(e):"",this.tooltip=$('<div id="svg-tooltip" class="tooltip right is-hidden'.concat(e,'">\n      <div class="arrow"></div>\n        <div class="tooltip-content">\n          <p><b>32</b> Element</p>\n        </div>\n      </div>')).appendTo("body"),this.isTouch&&(this.tooltip[0].style.pointerEvents="auto",this.tooltip.on("touchend.svgtooltip",function(){t.hideTooltip()})))},ue.hideTooltip=function(){var e=this;d3.select("#svg-tooltip").classed("is-personalizable",!1).classed("is-hidden",!0).style("left","-999px"),$("body, .scrollable").off("scroll.chart-tooltip",function(){e.hideTooltip()})},ue.removeTooltip=function(){this.tooltip&&this.tooltip.remove&&this.tooltip.remove()},ue.colorRange=function(){var s=Et.themeColors().palette;return Et.new?[s.azure[80].value,s.turquoise[40].value,s.amethyst[60].value,s.graphite[40].value,s.amber[40].value,s.emerald[70].value,s.ruby[60].value,s.azure[30].value,s.amber[70].value,s.graphite[60].value,s.turquoise[60].value,s.emerald[90].value,s.amethyst[30].value,s.azure[50].value,s.ruby[30].value,s.amethyst[80].value,s.emerald[30].value,s.turquoise[80].value,s.graphite[20].value,s.amber[90].value]:[s.azure[70].value,s.turquoise[30].value,s.amethyst[30].value,s.graphite[60].value,s.amber[50].value,s.emerald[60].value,s.ruby[60].value,s.azure[30].value,s.amber[90].value,s.turquoise[80].value,s.ruby[20].value,s.graphite[50].value,s.emerald[50].value,s.azure[50].value,s.amethyst[80].value,s.emerald[30].value,s.turquoise[50].value,s.amber[70].value,s.graphite[20].value,s.azure[20].value]},ue.colorNameRange=function(){return Et.new?["azure08","turquoise04","amethyst06","graphite04","amber04","emerald07","ruby06","azure03","amber07","graphite06","turquoise06","emerald09","amethyst03","azure05","ruby03","amethyst08","emerald03","turquoise08","graphite02","amber09"]:["azure07","turquoise03","amethyst03","graphite06","amber05","emerald06","ruby06","azure03","amber09","turquoise08","ruby02","graphite05","emerald05","amethyst03","azure05","amethyst08","emerald03","turquoise06","amber07","graphite02"]},ue.chartColor=function(e,t,i){var n=ue.colorRange(),a=i&&i.color?i.color:null;if(a){if("error"===a)return Et.themeColors().status.danger.value;if("alert"===a)return Et.themeColors().status.warning.value;if("alertYellow"===a)return Et.themeColors().status.caution.value;if("good"===a)return Et.themeColors().status.success.value;if("neutral"===a)return Et.themeColors().palette.graphite[30].value;if("info"===a)return Et.themeColors().palette.azure[70].value;if(a){if(0===a.indexOf("#"))return i.color;var o=a.slice(-2);if(/\d/.test(o)){var l=a.slice(0,a.length-2);return Et.themeColors().palette[l][10*parseInt(o,10)].value}}}function d(){var h=e;return e>=n.length&&(h=e-n.length),h}return/^(pie|donut)$/.test(t)?n[d()]:/^(bar-single|column-single)$/.test(t)?n[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(t)?n[d()]:""},ue.chartColorName=function(e,t,i){var n=this,a=i&&i.color?i.color:null;if(a)return"error"===a?"alert01":"alert"===a?"alert02":"alertYellow"===a?"alert03":"good"===a?"alert04":"neutral"===a?"graphite03":"info"===a?"azure07":i.color;function o(){var l=e;return e>=n.colorNameRange().length&&(l=e-n.colorNameRange().length),l}return/^(pie|donut)$/.test(t)?this.colorNameRange()[o()]:/^(bar-single|column-single)$/.test(t)?this.colorNameRange()[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(t)?this.colorNameRange()[o()]:""},ue.showTooltip=function(s,e,t,i,n){var a,o,l=this;s<0&&(s=2),this.tooltip[0].style.left="".concat(s,"px"),this.tooltip[0].style.top="".concat(e,"px"),de.html(this.tooltip.find(".tooltip-content"),t,"*"),this.tooltip.removeClass("bottom top left right").addClass(i),this.tooltip.css("max-width",(null==n||null===(a=n?.tooltip)||void 0===a?void 0:a?.maxWidth)||""),this.tooltip.find(".arrow").css("left",(null==n||null===(o=n?.arrow)||void 0===o?void 0:o?.left)||""),this.tooltip.removeClass("is-hidden"),$("body").off("scroll.chart-tooltip").on("scroll.chart-tooltip",function(){l.hideTooltip()}),$(".scrollable").off("scroll.chart-tooltip").on("scroll.chart-tooltip",function(){l.hideTooltip()})},ue.addLegend=function(s,e,t,i){var n,o,a=this;if(0!==s.length){var d,p,l=0,h=0;for(this.hasLegendPopup=!1,o=0;o<s.length;o++)d=s[o].name?6*s[o].name.length:6,l=s[o].name&&d>l?d:l,(h+=d)/$(i).width()*100<=45&&(p=o+1);var w=(l+=55)/$(i).width()*100>45,T=s[0].placement&&"bottom"===s[0].placement||!0===t.forceLegendPopup;T&&w||(p=s.length),T&&$(i).hasClass("has-right-legend")&&$(i).removeClass("has-right-legend");var k=s[0].display&&"twocolumn"===s[0].display,A=k?$('<div class="chart-legend '.concat(s[0].placement&&!T?"is-".concat(s[0].placement):"is-bottom",'"></div>')):$('<div class="chart-legend"></div>');for(("pie"===e||"donut"===e)&&t.showMobile&&(A=$('<div class="chart-legend"><div class="container"></div></div>')),o=0;o<p;o++)if(s[o].name){var M="";(k||s[o].display&&"block"===s[o].display)&&(M+=" lg"),"column-positive-negative"===t.type&&s[o].option&&(M+=" ".concat(s[o].option));var L='<span index-id="chart-legend-'.concat(o,'" class="chart-legend-item').concat(M,'" tabindex="').concat(null!=t&&t?.selectable?0:-1,'" role="button"></span>'),z=ue.chartColor(o,e||(1===s.length?"bar-single":"bar"),s[o]),q=ue.chartColorName(o,e||(1===s.length?"bar-single":"bar"),s[o]),O="";"#"===q.substr(0,1)?(O=$('<span class="chart-legend-color"></span>'),s[o].pattern||O.css("background-color",z)):O=$('<span class="chart-legend-color '.concat(s[o].pattern?"":q,'"></span>')),"scatterplot"===e&&(O=$('<span class="chart-legend-color"></span>'));var _=$('<span class="chart-legend-item-text">'.concat(Fe.stripTags(s[o].name),"</span>"));if(s[o].pattern&&(O.append('<svg width="12" height="12"><rect height="12" width="12" mask="url(#'.concat(s[o].pattern,')"/></svg>')),O.find("rect").css("fill",z)),s[o].percent){var G=$('<span class="chart-legend-percent"></span>').text(s[o].percent);_.append(G)}s[o].display&&"block"===s[o].display&&(L='<span class="chart-legend-item'.concat(M,'" tabindex="').concat(t.selectable?0:-1,'" role="button"></span>')),k&&(L=w&&T?'<span index-id="chart-legend-'.concat(o,'" class="chart-legend-item').concat(M,' is-one-line" tabindex="').concat(t.selectable?0:-1,'" role="button"></span>'):'<span index-id="chart-legend-'.concat(o,'" class="chart-legend-item').concat(M,' is-two-column" tabindex="').concat(t.selectable?0:-1,'" role="button"></span>')),(L=$(L)).append(O,'<span class="audible">'.concat(B.translate("Highlight"),"</span>"),_);var X,fe,he,j="legend-".concat(o);H.addAttributes(L,s[o],t.attributes?t.attributes:null===(X=s[o])||void 0===X||null===(X=null==(fe=X)?void 0:fe.data)||void 0===X||null==(he=X)?void 0:he.attributes,j,!0),"pie"!==e&&"donut"!==e||!t.showMobile?A.append(L):A.find(".container").append(L),(s[o].display&&"block"===s[o].display||k&&w&&T)&&L.css({float:"none",display:"block",margin:"0 auto",width:"".concat(l+15,"px")}),"scatterplot"===e&&(self.svg=d3.select(O[0]).append("svg").attr("width","24").attr("height","24").append("path").attr("class","symbol").attr("transform","translate(10, 10)").attr("d",d3.symbol().size("80").type(function(){return d3.symbols[o]})).style("fill",z)),innerWidth<=480&&s[o].data&&s[o].data.legendAbbrName&&_.replaceWith('<span class="chart-legend-item-text">'.concat(s[o].data.legendAbbrName,"</span>")),innerWidth>=481&&innerWidth<=768&&s[o].data&&s[o].data.legendShortName&&_.replaceWith('<span class="chart-legend-item-text">'.concat(s[o].data.legendShortName,"</span>"))}var we=null===(n=t.dataset[0])||void 0===n?void 0:n?.legendTitle;if(("pie"===e||"donut"===e)&&we&&"right"===t.legendPlacement){var re='<span class="chart-legend-title">'.concat(we,"</span>");A.prepend(re)}if(A instanceof $){var Ne=/^chart-legend-(.+)/;if(A.on("click.chart",".chart-legend-item",function(){var zt=$(this).attr("index-id").match(Ne)[1];ue.handleElementClick(zt,this,s,t,i)}).on("keypress.chart",".chart-legend-item",function(zt){if(13===zt.which||32===zt.which){var _t=$(this).attr("index-id").match(Ne)[1];ue.handleElementClick(_t,this,s,t,i)}}),T&&w&&s.length>p||null!=t&&t?.forceLegendPopup){var le=$('\n      <button class="btn-actions list-button" type="button">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation" style="min-height: 0">\n          <use href="#icon-bullet-steps"></use>\n        </svg>\n      </button>\n      ');this.hasLegendPopup=!0;for(var Te=$('<ul class="popupmenu"></ul>'),ge=0;ge<s.length;ge++){var ce=$("<li ".concat(0===ge?'class="is-hidden"':"",'><a index-id="chart-legend-').concat(ge,'" href="#"><div class="chart-popup-menu"></div></a></li>')),Be=$('<span class="chart-popup-menu-text">'.concat(Fe.stripTags(s[ge].name),"</span>")),qe=ue.chartColor(ge,e||(1===s.length?"bar-single":"bar"),s[ge]),Oe=ue.chartColorName(ge,e||(1===s.length?"bar-single":"bar"),s[ge]),ot=void 0,He="";"#"===Oe.substr(0,1)?(He=$('<span class="chart-popup-menu-color"></span>'),ot=s[o].pattern,s[o].pattern||(He.css("background-color",qe),ot=qe)):(He=$('<span class="chart-popup-menu-color '.concat(s[o].pattern?"":Oe,'"></span>')),ot=Oe),s[ge].color=ot,ce.find("div").append(He,Be),Te.append(ce)}A.css({"min-height":"40px","max-height":"50px",display:"flex"}),$(i).addClass("auto-height"),A.append(le),$(i).append(A),Te.insertAfter(le),le.popupmenu({menu:Te});var Ae=$(i).parents(".widget").height(),We=$($(i).parents(".widget").children().get(0)).height(),yt=$($(i).parents(".widget").children().get(1)).height();A.css("padding-top","".concat((Ae-(We+yt))/2,"px")),le.on("selected",function(zt,_t){var ti=$(_t[0]).attr("index-id").match(Ne)[1];ue.handleElementClick(ti,a,s,t,i)})}else $(i).append(A)}}},ue.handleElementClick=function(s,e,t,i,n){var a;if(i.selectable){var p,o=$(null==i||null===(a=i?.svg)||void 0===a?void 0:a?.node()).closest(".chart-container").data("chart"),l=o?.initialSelectCall,d=t[s],h=t[0].display&&"twocolumn"===t[0].display;if("radar"===i.type&&(p=d3.select(i.svg.selectAll(".chart-radar-area").nodes()[s])),"pie"===i.type||"donut"===i.type?p=d3.select(i.svg.selectAll(".slice").nodes()[s]):/positive-negative/.test(i.type)?p=i.svg.select(!d.option||d.option&&"target"===d.option?".target-bar":".bar.".concat(d.option)):-1!==["column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type)&&(i.isGrouped||i.isSingle?p=i.svg.select(".series-".concat(s)):i.isStacked&&!i.isSingle&&(p=d3.select(i.svg.selectAll("bar"===i.type||"bar-stacked"===i.type||"bar-normalized"===i.type?".series-group":".g").nodes()[s]).select(".bar"))),-1!==["radar","pie","donut","column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type)&&null!=i&&i?.selectable){var b=$(e),w="true"===b.attr("aria-pressed");ue.clickedLegend=!0,p.dispatch("click"),b.parent().find("[aria-pressed]").removeAttr("aria-pressed"),w||b.attr("aria-pressed","true")}if(d.selectionObj&&null!=i&&i?.selectable&&ue.selectElement(d3.select(d.selectionObj.nodes()[s]),d.selectionInverse,d.data,void 0,i.dataset,l),h&&this.hasLegendPopup){var T="donut"===i.type?"pie":i.type,k=ue.chartColor(s,T||(1===t.length?"bar-single":"bar"),t[s]),A=ue.chartColorName(s,T||(1===t.length?"bar-single":"bar"),t[s]),M="";"#"===A.substr(0,1)?(M=$('<span class="chart-legend-color"></span>'),d.pattern||M.css("background-color",k)):M=$('<span class="chart-legend-color '.concat(d.pattern?"":A,'"></span>'));var L=$('<span class="chart-legend-item-text">'.concat(Fe.stripTags(d.name),"</span>")),z=n.find(".chart-legend-item");z.empty(),z.append(M,'<span class="audible">'.concat(B.translate("Highlight"),"</span>"),L),z.attr("index-id","chart-legend-".concat(s)),n.find(".list-button").data("popupmenu").menu.children().removeClass("is-hidden"),$(n.find(".list-button").data("popupmenu").menu.children().get(s)).addClass("is-hidden")}}},ue.selected=[],ue.clearSelected=function(s){if(s){var e=function(n){Object.prototype.hasOwnProperty.call(n,"selected")&&delete n.selected};!function i(n){Array.isArray(n)&&n.forEach(function(a){e(a),a.data&&i(a.data)}),e(n)}(s)}},ue.selectElement=function(s,e,t,i,n,a){var o=s.node()&&s.classed("is-selected");ue.clearSelected(n),o||(t.selected=!0);var l=[{elem:s.nodes(),data:o?{}:t}];e.classed("is-selected",!1).classed("is-not-selected",!o),s.classed("is-not-selected",!1).classed("is-selected",!o),ue.selected=$.isEmptyObject(l[0].data)?[]:l,a||$(i).triggerHandler("selected",[l])},ue.setSelectedElement=function(s){var _,e=s.dataset,t=/positive-negative/.test(s.type),i=/^(bar|bar-stacked|bar-grouped|bar-normalized)$/.test(s.type),n="pie"===s.type||"donut"===s.type,a=/^(column|column-grouped|column-stacked|column-positive-negative|positive-negative)$/.test(s.type),o=s.svg,l=s.isSingle,d=s.isGrouped,h=s.isStacked,p="selected"===s.task,v=d3.select(s.selector),b=v.classed("positive"),w=s.svg.selectAll(".axis.x .tick"),T=s.svg.selectAll(".axis.y .tick"),k=s.svg.selectAll(".bartext.positive, .target-bartext.positive"),A=s.svg.selectAll(".bartext.negative, .target-bartext.negative"),M=s.svg.selectAll(".target-bartext.positive, .target-bartext.negative"),L=d3.select(s.selector.parentNode),z=parseInt(L.node()?L.attr("data-group-id"):0,10),q=[],O=[];if(e=h||n?e||null:e&&e[z]?e[z].data||e[z]:null,w.style("font-weight","normal"),T.style("font-weight","normal"),k.style("font-weight","normal"),A.style("font-weight","normal"),o.selectAll(".is-selected").classed("is-selected",!1),ue.clearSelected(s.dataset),n&&o.selectAll(".is-not-selected").classed("is-not-selected",!1),t&&Object.prototype.hasOwnProperty.call(s.dataset[0],"targetBarsSelected")&&delete s.dataset[0].targetBarsSelected,p)if(o.selectAll(".bar, .target-bar").style("opacity",.6),ue.clickedLegend&&!n)t?(s.isTargetBar?(s.svg.selectAll(".target-bar").classed("is-selected",!0).style("opacity",1),M.style("font-weight","bolder"),s.dataset[0].targetBarsSelected=!0):(s.svg.selectAll(b?".bar.positive, .target-bar.positive":".bar.negative, .target-bar.negative").classed("is-selected",!0).style("opacity",1),(b?k:A).style("font-weight","bolder")),o.selectAll(".bar").each(function(qe,Oe){var ot=d3.select(this);if(ot.classed("is-selected")){var He=e?e[Oe]:qe;He.selected=!0,O.push({elem:ot.node(),bardata:He})}}),q=O):(a||i)&&(d||l?s.svg.selectAll(".series-"+s.i).classed("is-selected",!0).style("opacity",1):L.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),o.selectAll(".bar.is-selected").each(function(qe,Oe){var ot=d3.select(this);(_=s.dataset)||(_=qe),i&&!h?d?_=s.dataset[Oe].data[s.i]:(_[Oe][s.i]&&(_=_[Oe][s.i]),_[s.i]&&_[s.i][Oe]&&(_=_[s.i][Oe]),_[Oe]&&_[Oe][s.i]&&(_=_[Oe][s.i])):h&&!l?(_[z]&&_[z].data[Oe]&&(_=_[z].data[Oe]),i&&(s.dataset[z].selected=!0)):(_[Oe].data[s.i]&&(_=_[Oe].data[s.i]),_[s.i]&&_[s.i].data[Oe]&&(_=_[s.i].data[Oe]),_[Oe]&&_[Oe].data[s.i]&&(_=_[Oe].data[s.i])),_.selected=!0,O.push({elem:ot.node(),data:_})}),q=O);else if(l&&h&&a)_=e[0]&&e[0].data?e[0].data:s.d,v.classed("is-selected",!0).style("opacity",1),q.push({elem:v.nodes(),data:_[s.i]});else if(!l&&!d||h||!a&&!i){if(a||i){var j="bar"===s.type?"g[role=listitem]:nth-child(".concat(s.i+1,") .bar"):".bar:nth-child(".concat(s.i+1,")");o.selectAll("".concat(a?".axis.x":".axis.y"," .tick:nth-child(").concat(s.i+2,")")).style("font-weight","bolder"),o.selectAll("".concat(j)).classed("is-selected",!0).style("opacity",1),o.selectAll(".bar.is-selected").each(function(qe,Oe){var ot=d3.select(this),He=qe;e&&(He=i&&h&&typeof e[Oe][s.i]<"u"?e[Oe][s.i]:e[Oe].data[s.i]),He.selected=!0,O.push({elem:ot.nodes(),data:He,index:s.i})}),q=O}else if(n){o.selectAll(".slice").classed("is-selected",!1).classed("is-not-selected",!0).attr("transform","");var X=e&&e[0]&&e[0].data?e[0].data[s.i]:s.d?s.d.data:s.d;if((X=X||{}).selected=!0,v.classed("is-selected",!0).classed("is-not-selected",!1).attr("transform","scale(1.025, 1.025)"),q.push({elem:v.nodes(),data:X,index:s.i}),void 0===s.i){var fe=o.selectAll(".slice")._groups[0];s.i=0;for(var he=0;he<fe.length;he++)if($(fe[he]).attr("class").includes("is-selected")){s.i=he;break}}if(s.series[0].display&&"twocolumn"===s.series[0].display&&this.hasLegendPopup){var re=s.series[s.i],Ne="donut"===s.settings.type?"pie":s.settings.type,le=ue.chartColor(s.i,Ne||(1===s.series.length?"bar-single":"bar"),s.series[s.i]),Te=ue.chartColorName(s.i,Ne||(1===s.series.length?"bar-single":"bar"),s.series[s.i]),ge="";"#"===Te.substr(0,1)?(ge=$('<span class="chart-legend-color"></span>'),re.pattern||ge.css("background-color",le)):ge=$('<span class="chart-legend-color '.concat(re.pattern?"":Te,'"></span>'));var ce=$('<span class="chart-legend-item-text">'.concat(Fe.stripTags(re.name),"</span>")),Be=s.container.find(".chart-legend-item");Be.empty(),Be.append(ge,'<span class="audible">'.concat(B.translate("Highlight"),"</span>"),ce),Be.attr("index-id","chart-legend-".concat(s.i)),s.container.find(".list-button").data("popupmenu").menu.children().removeClass("is-hidden"),$(s.container.find(".list-button").data("popupmenu").menu.children().get(s.i)).addClass("is-hidden")}}}else{if(o.selectAll("".concat(a?".axis.x":".axis.y"," .tick:nth-child(").concat((d?z:s.i)+2,")")).style("font-weight","bolder"),v.classed("is-selected",!0).style("opacity",1),t){var G=s.isTargetBar?s.i:s.i-s.dataset[0].data.length;o.select(".target-bar.series-".concat(G)).classed("is-selected",!0).style("opacity",1),o.select(".bar.series-".concat(G)).classed("is-selected",!0).style("opacity",1),d3.select(o.selectAll(".bartext").nodes()[G]).style("font-weight","bolder"),d3.select(o.selectAll(".target-bartext").nodes()[G]).style("font-weight","bolder")}(d||t||a)&&((!t&&!a||a&&d)&&L.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),L.selectAll(".bar").each(function(qe,Oe){var ot=d3.select(this);if(ot.classed("is-selected")){var He=e?e[Oe]:qe;He.selected=!0,O.push({elem:ot.nodes(),data:He,index:Oe})}}),d?q.push({groupIndex:z,groupElem:L.nodes()[0],groupItems:O}):q=O)}else o.selectAll(".bar, .target-bar").style("opacity",1),k.style("font-weight","bolder"),A.style("font-weight","bolder"),n&&v.classed("is-selected",!1).style("stroke","#fff").style("stroke-width","1px").attr("transform","");ue.clickedLegend&&(ue.clickedLegend=!1),ue.selected=q,s.isTrigger&&$(s.container).triggerHandler(p?"selected":"unselected",[q])},ue.setSelected=function(s,e,t){if(s){var d,h,p,v,i=0,n=H.equals,a=t.isPie?t.svg.node().nextSibling:t.svg.node().parentNode.nextSibling,o=d3.select(a),l=o.node()&&o.classed("chart-legend"),b=function(k){var A=!!k;(k=A?d3.select(k):t.svg).selectAll(".bar").each(function(M,L){M&&i<1&&(typeof s.fieldName<"u"&&typeof s.fieldValue<"u"&&s.fieldValue===M[s.fieldName]||typeof s.index<"u"&&s.index===L||s.data&&n(s.data,t.chartData[M.index].data[L])||s.elem&&$(this).is(s.elem))&&(i++,h=d3.select(this),d=L,A&&!t.isStacked&&(p=!0))})};t.isGrouped||t.isStacked&&!t.isSingle?(t.chartData.forEach(function(T,k){i<1&&(v=$(t.svg.select('[data-group-id="'+k+'"]').node()),(typeof s.groupName<"u"&&typeof s.groupValue<"u"&&s.groupValue===T[s.groupName]||typeof s.groupIndex<"u"&&s.groupIndex===k||s.data&&n(s.data,T)||s.elem&&v.is(s.elem))&&typeof s.fieldName>"u"&&typeof s.fieldValue>"u"&&typeof s.index>"u"&&(i++,h=t.svg.select('[data-group-id="'+k+'"]').select(".bar"),d=k,t.isStacked&&!t.isGrouped&&(p=!0)))}),i<1&&(k=t.svg.selectAll(".series-group")).nodes().length&&k.each(function(){b(this)})):b(),i>0&&(e||!h.classed("is-selected"))&&(p?l&&$(o.selectAll(".chart-legend-item").nodes()[d]).trigger("click.chart"):h.dispatch("click"))}var k},ue.labelsColide=function(s){var e=s.selectAll(".x text"),t=!1;return e.each(function(i,n){var o,a=this.getBoundingClientRect();e.each(function(l,d){n!==d&&(o=this.getBoundingClientRect(),!(a.right<o.left||a.left>o.right||a.bottom<o.top||a.top>o.bottom)&&(t=!0))})}),t},ue.applyAltLabels=function(s,e,t,i,n){s.selectAll(i||".x text").each(function(o,l){var d=e[l]?e[l][t]:"";d=d||(n?d3.select(this).text().substring(0,1):"".concat(d3.select(this).text().substring(0,6),"...")),d3.select(this).text(d)})},ue.triggerContextMenu=function(s,e,t,i){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation();var n=$.Event("contextmenu");n.target=e,n.pageX=i.pageX,n.pageY=i.pageY,$(s).trigger(n,[e,t])},ue.calculateTextRenderWidth=function(s,e){var t,i;e=H.mergeSettings(void 0,e,{soho:"700 12px arial",uplift:"600 14px arial",classic:"700 12px arial",new:"600 14px arial"});var a=((null==Et||null===(t=Et?.currentTheme)||void 0===t?void 0:t?.id)||"").match(/soho|uplift|new|classic/);if(a=a?a[0]:"new",this.canvas=this.canvas||(this.canvas=document.createElement("canvas")),!this.canvas)return 0;var o=null===(i=this.canvas)||void 0===i?void 0:i?.getContext("2d");return null!=o&&o?.font?(o.font=e[a],o.measureText(s).width):0},ue.calculatePercentage=function(s,e){return 100*s/e},ue.getPercentage=function(s,e){return s*e/100},ue.trimText=function(s,e){return s.length<=e?s:"".concat(s.substr(0,e),"...")},ue.getLabel=function(s,e){var t=s.name;return e.xxsmall||e.xsmall||e.small?t=s.shortName||s.abbrName||s.name:e.medium&&(t=s.abbrName||s.name),t},ue.wrap=function(s,e,t){t||(t=1.27),e||(t=60),s.each(function(){var i=d3.select(this),n=i.text().split(/\s+/).reverse(),a="",o=[],l=0;if(!(n.length<=1))for(var d=t,h=i.attr("y"),p=i.attr("x"),v=parseFloat(i.attr("dy")),b=i.text(null).append("tspan").attr("x",p).attr("y",h).attr("dy","".concat(v,"em"));a=n.pop();)o.push(a),b.text(o.join(" ")),b.node().getComputedTextLength()>e&&(o.pop(),b.text(o.join(" ")),o=[a],b=i.append("tspan").attr("x",p).attr("y",h).attr("dy","".concat(++l*d+v,"em")).text(a))})};var se="bullet",be={dataset:[],animate:!1,redrawOnResize:!0,format:{ranges:null,difference:null}};function ke(s,e){this.settings=H.mergeSettings(s,e,be),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(s),this.init()}ke.prototype={init:function(){return this.namespace=H.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var e=this,t=this.settings.dataset[0],i=this.element.closest(".is-personalizable").length>0;this.element.addClass("bullet-chart");var n=0,a=[],o=t.data[0]?t.data[0].tooltip:[],l=!1,d=this.element.parent(),p=d.width()-40-35,v=d.height()-30-35-30;v=v<0?50:v;for(var b=d3.select(this.element[0]).append("svg").attr("width",p+40+35).attr("height",v+30+35).append("g").attr("transform","translate(".concat(40,",").concat(30,")")),T=function(q,O,_){function G(j,X,fe){var he=j(X,fe);return typeof he<"u"?he:X}return t.format&&"function"==typeof t.format[q]?G(t.format[q],O,_):t.format&&"string"==typeof t.format[q]?d3.format(t.format[q])(O):e.settings.format&&"function"==typeof e.settings.format[q]?G(e.settings.format[q],O,_):e.settings.format&&"string"==typeof e.settings.format[q]?d3.format(e.settings.format[q])(O):O},k={ranges:function(q,O){return T("ranges",q,O)},difference:function(q){return T("difference",q)}},A=1===t.data.length,M=function(q){var O=e.settings.animate?400:0,G=e,j=t.data[q],X=j.ranges.slice().sort(d3.descending),fe=j.markers?j.markers.slice().sort(d3.descending):[],he=j.measures?j.measures.slice().sort(d3.descending):[],we=j.ranges.slice().sort(d3.ascending),re=j.markers?j.markers.slice().sort(d3.ascending):[],Ne=j.measures?j.measures.slice().sort(d3.ascending):[],le=A?"":"-group".concat(q);0===fe.length&&(fe=he,re=Ne,l=!0);var Te=b.append("g").attr("class","bullet").attr("transform","translate(0, ".concat(70*q,")"));Te.append("g").append("text").attr("class","title").attr("dy","-10px").text(function(){return j.title}).call(function(ut){H.addAttributes($(ut._groups[0][0]),t,t.attributes,"title".concat(le))}).append("tspan").attr("class","subtitle").attr("dx","15px").text(function(){return j.subtitle}).call(function(ut){H.addAttributes($(ut._groups[0][0]),t,t.attributes,"subtitle".concat(le))});var Be=Math.max(X[0],fe[0],he[0]),qe=Math.min(we[0],re[0],Ne[0]);qe=qe<0?qe:0;var Oe=d3.scaleLinear().domain([qe,Be]).range([0,p]).nice(),ot=function w(z){var q=z(0);return function(O){return Math.abs(z(O)-q)}}(Oe),He=Te.selectAll("rect.range").data(X),We=!1,yt=0;G.element.off("dblclick.".concat(G.namespace)).on("dblclick.".concat(G.namespace),"*",function(ut){ut.stopImmediatePropagation()}),He.enter().append("rect").call(function(ut){ut._groups.forEach(function(Xe){Xe.forEach(function(Lt,Tt){H.addAttributes($(Lt),t,t.attributes,"range".concat(Tt).concat(le))})})}).attr("class",function(ut,Xe){return"range s".concat(Xe)}).attr("data-idx",q).attr("width",0).attr("x",function(ut){return Oe(ut<0?ut:0)}).style("fill",function(ut,Xe){return t.barColors?t.barColors[Xe]:""}).attr("height",20).on("click.".concat(G.namespace),function(){var ut=d3.select(this);yt=setTimeout(function(){We||G.element.trigger("selected",[ut,t.data[ut.attr("data-idx")]]),We=!1},200)}).on("dblclick.".concat(G.namespace),function(){var ut=d3.select(this);clearTimeout(yt),We=!0,G.element.trigger("dblclick",[ut,t.data[ut.attr("data-idx")]])}).on("mouseenter.".concat(G.namespace),function(ut,Xe,Lt){var Tt=d3.select(this),Ji=t.data[Tt.attr("data-idx")],yi=this.getBoundingClientRect(),Nt="<p>".concat(k.ranges(Xe,Lt),"</p>"),Ai=function(){var ri=ue.tooltipSize(Nt),Yn=yi.left+yi.width-ri.width/2,Gs=yi.top-ri.height+$(window).scrollTop()-5;""!==Nt&&(ue.tooltip&&ue.tooltip.length&&ue.tooltip[i?"addClass":"removeClass"]("is-personalizable"),ue.showTooltip(Yn,Gs,Nt,"top"))};if(Ji.tooltip&&Ji.tooltip[Lt]&&(Nt=Ji.tooltip[Ji.tooltip.length-Lt-1]),o&&"function"==typeof o&&!a[Lt]){Nt="";var Jn=!0;n=setInterval(function(){Jn&&(Jn=!1,o(function(vn){Nt=vn,a[q]=vn})),""!==Nt&&(clearInterval(n),Ai())},10)}else o="object"===rt(o)?"":o,Nt=a[q]||o||Nt||"",Ai()}).on("mouseleave.".concat(G.namespace),function(){clearInterval(n),ue.hideTooltip()}).on("contextmenu.".concat(G.namespace),function(ut,Xe){ue.triggerContextMenu(G.element,d3.select(this).nodes()[0],Xe,ut)}).merge(He).transition().duration(O).attr("width",ot);var Dt=Te.selectAll("rect.measure").data(he);Dt.enter().append("rect").call(function(ut){ut._groups.forEach(function(Xe){Xe.forEach(function(Lt,Tt){H.addAttributes($(Lt),t,t.attributes,"measure".concat(Tt).concat(le))})})}).attr("class",function(ut,Xe){return"measure s".concat(Xe)}).attr("width",0).attr("height",3).attr("x",function(ut){return Oe(ut<0?ut:0)}).style("fill",function(ut,Xe){return t.lineColors?t.lineColors[Xe]:""}).attr("y",8.5).merge(Dt).transition().duration(O).attr("width",ot);var zt=1===fe.length,_t=Te.selectAll("line.marker").data(fe);_t.enter().append("line").call(function(ut){ut._groups.forEach(function(Xe){Xe.forEach(function(Lt,Tt){var Ji=zt?"marker".concat(le):"marker".concat(Tt).concat(le);H.addAttributes($(Lt),t,t.attributes,Ji)})})}).attr("class",l?"hidden":"marker").attr("x1",0).attr("x2",0).style("stroke",function(ut,Xe){return t.markerColors?t.markerColors[Xe]:""}).attr("y1",20/6).attr("y2",100/6).merge(_t).transition().duration(O).attr("x1",Oe).attr("x2",Oe).attr("y1",20/6).attr("y2",100/6);var ti=(fe[0]>he[0]?"-":"+")+Math.abs(fe[0]-he[0]);0!==Math.abs(fe[0]-he[0])&&_t.enter().append("text").call(function(ut){H.addAttributes($(ut._groups[0][0]),t,t.attributes,"difference".concat(le))}).attr("class","inverse").attr("text-anchor","middle").attr("y",14).attr("dx",ue.isRTL?"-20px":"20px").attr("x",0).text(k.difference(ti)).merge(_t).transition().duration(O).attr("x",function(){var ut=0;return Te.selectAll(".measure").each(function(Xe){var Lt=ot(Xe),Tt=Oe(Xe);Lt>ut&&(ut=Lt),Tt>ut&&(ut=Tt)}),ue.isRTL?-ut:ut}).style("opacity",1);var di=Te.selectAll("g.tick").data(Oe.ticks(8)).enter().append("g").attr("class","tick").attr("transform","translate(0,0)").style("opacity",0);di.append("line").attr("y1",20).attr("y2",Math.round(140/4.7)),di.append("text").attr("text-anchor","middle").attr("dy","1.1em").attr("y",Math.round(140/4.7)).attr("class",function(ut){return ut<0?"negative-value":"positive-value"}).text(function(ut,Xe){return k.ranges(ut,Xe)}),di.transition().duration(O).attr("transform",function(ut){return"translate(".concat(Oe(ut),",0)")}).style("opacity",1),ue.isRTL&&ue.isIE&&b.selectAll("text").attr("transform","scale(-1, 1)")},L=0;L<t.data.length;L++)M(L);return ue.appendTooltip(),this.element.trigger("rendered"),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".range").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),ue.removeTooltip(),this.element&&(this.element.empty().removeClass("bullet-chart"),$.removeData(this.element[0],se),$.removeData(this.element[0],"chart"))}};var je="completion-chart",$e={dataset:[]};function Ue(s,e){this.settings=H.mergeSettings(s,e,$e),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(s),this.init()}Ue.prototype={init:function(){return this.build().handleEvents(),this},build:function(){var e=this,t=this.settings.dataset[0];0===this.settings.dataset.length&&((t={}).data=[{name:{text:B?B.translate("NoData"):"No data available"},completed:{value:0}}]);var i=t.data[0],n="completion-target"===this.settings.type,a="targeted-achievement"===this.settings.type;this.element.addClass("completion-chart").addClass("".concat("targeted-achievement"===this.settings.type?" chart-targeted-achievement":"")).attr("role","image"),i.total=$.extend({},{value:100},i.total);var G,o=function(Ae){return typeof Ae>"u"},l=function(Ae,We){var yt=We?0:"";return o(Ae)?yt:Ae},h=function(Ae,We){return We=We||i,Math.round(Ae/l(We.total.value,!0)*100)},p=function(Ae){return B.formatNumber(Ae/100,{style:"percent",maximumFractionDigits:0})},b=function(Ae,We){var yt=Ae.toString();return-1!==yt.indexOf("%")?function(Ae,We){return Ae/100*l((We=We||i).total.value,!0)}(yt.replace(/%/g,""),We):Ae},w=function(Ae,We,yt,Dt){var zt=h(We,Dt),_t=(zt=zt<0?0:zt)>100?100:zt;if(Ae[0].style.width="".concat(_t,"%"),yt>0){var ti=h(yt,Dt);Ae[0].style.left="".concat(ti,"%")}0===_t&&(Ae[0].className+="is-empty")},k=function(Ae,We,yt){var Dt=yt?Ae._value:Ae.value;return Ae&&!o(Dt)&&Ae.format?function(Ae,We,yt){return".0%"===We?p(h(Ae,yt)):d3.format(We||"m")(Ae)}(b(Dt,We),Ae.format,We):Ae?b(Dt,We):0},A=this,O=$.extend({},{show:!1,color1:"",color2:"inverse"},i.percentText);!o(O.color)&&""===O.color1&&(O.color1=O.color);var Ae,We,we={body:$('<div class="total bar" />')},re=(We={},(Ae=Ae||i).info&&!o(Ae.info.color)&&0===i.info.color.indexOf("#")&&(We.info=!0),Ae.completed&&!o(Ae.completed.color)&&0===Ae.completed.color.indexOf("#")&&(We.completed=!0),Ae.remaining&&!o(Ae.remaining.color)&&0===Ae.remaining.color.indexOf("#")&&(We.remaining=!0),Ae.targetline&&!o(Ae.targetline.color)&&0===Ae.targetline.color.indexOf("#")&&(We.targetline=!0),We);if(n||a){var le,Ne=function(Ae){var We,yt={};return(Ae=Ae||i).total.difference&&(yt.value=Ae.total.value-Ae.completed.value,yt.format=i.total.format),We=(Ae.total.textOnly?"":k(Ae.total.difference?yt:Ae.total))+(Ae.total.text||""),a&&Ae.remaining?(Ae.remaining.textOnly?"":k(Ae.remaining))+(Ae.remaining.text||""):We}();we.body.addClass("chart-completion-target".concat(a?" chart-targeted-achievement":"")),le=i.completed.color&&"error"===i.completed.color&&i.completed.iconTooltip?i.completed.iconTooltip:"Critical",we.label='<span class="label">\n        <span class="name">'.concat(l(i.name.text)," ").concat(i.completed.color&&"error"===i.completed.color?'<svg class="icon-error icon" focusable="true" role="presentation" title="'.concat(le,'"><use href="#icon-error"></use></svg>'):"",'</span>\n        <span class="l-pull-right total value">').concat(Ne,"</span>\n      </span>"),$("svg[title]").tooltip()}else{we.body.addClass("chart-completion");var Te=l(i.name.text),ge=l(i.completed.color),ce=l(i.info.color),Be=i.info.color&&!re.info?ce:"",qe=l(i.info.text);re.completed||(Be=ge);var Oe="";i.info.color&&re.info&&(Oe=ce),re.completed&&(Oe=ge);var ot=i.info&&!o(i.info.value)?l(i.info.value):k(i.completed);we.label='<b class="label name">'.concat(Te,'</b>\n      <b class="label info ').concat(Be,' colored">\n      <span class="value ').concat(Be,'" ').concat(Oe?'style="color:'.concat(Oe):"",'">').concat(ot,'</span>\n      <span class="text ').concat(Be,'" ').concat(Oe?'style="color:'.concat(Oe):"",'">').concat(qe,"</span>\n      </b>")}return we.remaining=i.remaining?"".concat('<div class="target remaining bar').concat(re.remaining?"":" ".concat(l(i.remaining.color)),'"').concat(re.remaining?' style="color:'.concat(i.remaining.color,";background-color:").concat(i.remaining.color,';"'):"",'">').concat(a?"":"<span".concat(n||a?"":' class="audible"',">")+'<span class="value'.concat(re.remaining?"":" ".concat(l(i.remaining.color)),'"').concat(re.remaining?' style="color:'.concat(i.remaining.color,';"'):"",'">').concat(k(i.remaining),"</span><br />")+'<span class="text'.concat(re.remaining?"":" ".concat(l(i.remaining.color)),'"').concat(re.remaining?' style="color:'.concat(i.remaining.color,';"'):"",'">').concat(l(i.remaining.text),"</span>")+"</span>","</div>"):'<div class="target remaining bar" style="opacity: 0"></div>',i.completed&&a&&(function(Ae){O._value=(Ae=Ae||i).completed?Ae.completed.value:0,O.percent=h(l(O._value,!0),Ae),O.format=".0%",O._text=typeof O.text<"u"?O.text:typeof O.value<"u"?p(O.value):k(O,Ae,!0),O.color=O[O.percent>55?"color2":"color1"]}(),re.percentText=0===O.color.indexOf("#"),we.completed="".concat('<div class="completed bar').concat(re.completed?"":" ".concat(l(i.completed.color)),'"').concat(re.completed?' style="color:'.concat(i.completed.color,";background-color:").concat(i.completed.color,';"'):"",'"></div>').concat(O.show?'<div class="chart-percent-text'.concat(re.percentText||""===O.color?"":" ".concat(O.color),'"').concat(re.percentText?' style="color:'.concat(O.color,';"'):"",">").concat(O._text,"</div>"):"",'<span class="completed-label"').concat(n||a?"":' class="audible"',">")+'<span class="text">'.concat(l(i.completed.text),"</span>")+"</span>"),(i.completed.text||i.completed.format&&!a)&&this.element.addClass("chart-completion-target-padding"),i.completed&&!a&&(we.completed="".concat('<div class="completed bar').concat(re.completed?"":" ".concat(l(i.completed.color)),'"').concat(re.completed?' style="color:'.concat(i.completed.color,";background-color:").concat(i.completed.color,';"'):"",">")+"<span".concat(n||a?"":' class="audible"',">")+'<span class="value'.concat(re.completed?"":" ".concat(l(i.completed.color)),'"').concat(re.completed?' style="color:'.concat(i.completed.color,';"'):"",'">').concat(k(i.completed),"</span><br />")+'<span class="text'.concat(re.completed?"":" ".concat(l(i.completed.color)),'"').concat(re.completed?' style="color:'.concat(i.completed.color,';"'):"",'">').concat(l(i.completed.text),"</span>")+"</span></div>"),i.targetline&&(we.targetline="".concat('<div class="target-line targetline bar').concat(re.targetline?"":" ".concat(l(i.targetline.color)),'"').concat(re.targetline?' style="color:'.concat(i.targetline.color,";background-color:").concat(i.targetline.color,';"'):"",'">')+"<span".concat(n||a?"":' class="audible"',">")+'<span class="value'.concat(re.targetline?"":" ".concat(l(i.targetline.color)),'"').concat(re.targetline?' style="color:'.concat(i.targetline.color,';"'):"",'">').concat(k(i.targetline),"</span><br />")+'<span class="text'.concat(re.targetline?"":" ".concat(l(i.targetline.color)),'"').concat(re.targetline?' style="color:'.concat(i.targetline.color,';"'):"",'">').concat(l(i.targetline.text),"</span>")+"</span></div>"),de.append(we.body,(we.remaining||"")+(we.completed||"")+(we.targetline||""),"<a><use><svg><div><span><br>"),de.append(this.element,we.label+we.body.prop("outerHTML"),"<a><use><svg><div><span><br>"),G={name:$(".name",e.element),info:{value:$(".info .value",e.element),text:$(".info .text",e.element)},plainInfo:{value:$(">.value",e.element),text:$(">.text",e.element)},completed:{bar:$(".completed.bar",e.element),value:$(".completed .value",e.element),text:$(".completed .text, .completed-label .text",e.element)},remaining:{bar:$(".remaining.bar",e.element),value:$(".remaining .value",e.element),text:$(".remaining .text",e.element)},targetline:{bar:$(".targetline",e.element),value:$(".targetline .value",e.element),text:$(".targetline .text",e.element)},total:{bar:$(".total.bar",e.element),value:$(".total.value",e.element)},percentText:$(".chart-percent-text",e.element)},function(){if(t.attributes){var We=function(Dt,zt){return H.addAttributes(Dt,t,t.attributes,zt)};We(G.name,"name"),We(G.info.value,"info-value"),We(G.info.text,"info-text"),We(G.plainInfo.value,"info-value"),We(G.plainInfo.text,"info-text"),We(G.completed.bar,"completed-bar"),We(G.completed.value,"completed-value"),We(G.completed.text,"completed-text"),We(G.remaining.bar,"remaining-bar"),We(G.remaining.value,"remaining-value"),We(G.remaining.text,"remaining-text"),We(G.targetline.bar,"targetline-bar"),We(G.targetline.value,"targetline-value"),We(G.targetline.text,"targetline-text"),We(G.total.bar,"total-bar"),We(G.total.value,"total-value"),We(G.percentText,"percent-text")}}(),function(Ae){G.name.data("jsonData",{name:(Ae=Ae||i).name}),G.info.value.add(G.info.text).data("jsonData",{info:Ae.info}),G.completed.bar.add(G.completed.value).add(G.completed.text).data("jsonData",{completed:Ae.completed}),G.remaining.bar.add(G.remaining.value).add(G.remaining.text).data("jsonData",{remaining:Ae.remaining}),G.targetline.bar.add(G.targetline.value).add(G.targetline.text).data("jsonData",{targetline:Ae.targetline}),G.total.bar.add(G.total.value).data("jsonData",{total:Ae.total}),G.percentText.data("jsonData",{percentText:Ae.percentText})}(),function(Ae){var We;if((Ae=Ae||i).completed){We=b(Ae.completed.value,Ae),w(G.completed.bar,We,0,Ae);var Dt,yt=G.completed.bar.data("tooltip");Dt=Ae.completed.tipText?Ae.completed.tipText:"string"==typeof Ae.completed.value?Ae.completed.value:"".concat(Math.round(Ae.completed.value/Ae.total.value*100),"%"),yt?yt.setContent(Dt,!1):G.completed.bar.tooltip({content:Dt})}if(Ae.remaining){We=b(Ae.remaining.value,Ae),w(G.remaining.bar,We,b(Ae.completed.value,Ae),Ae),n&&!a&&setTimeout(function(){var Ae=$(".remaining",A.element),We=$(".total",A.element),yt=$(".completed .value",A.element)[0].getBoundingClientRect(),Dt=Ae.find(".value")[0].getBoundingClientRect();Ae.add(We)[yt.right>Dt.left-20?"addClass":"removeClass"]("overlap")},500);var _t,zt=G.remaining.bar.data("tooltip");_t=Ae.remaining.tipText?Ae.remaining.tipText:"string"==typeof Ae.remaining.value?Ae.remaining.value:"".concat(Math.round(Ae.remaining.value/Ae.total.value*100),"%"),zt?zt.setContent(_t,!1):G.remaining.bar.tooltip({content:_t})}Ae.targetline&&(We=b(Ae.targetline.value,Ae),function(Ae,We){Ae[0].style.left="".concat(We>100?100:We<0?0:We,"%")}(G.targetline.bar,We))}(),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(je),function(){e.updated()}),this},updated:function(e){var t=e.type||this.settings.type;return this.settings=e,this.settings.type=t,e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat(je)),this},destroy:function(){this.element.empty().removeClass("completion-chart"),ue.removeTooltip(),this.teardown(),$.removeData(this.element[0],je),$.removeData(this.element[0],"chart")}};var Je="sparkline",gt={dataset:[],colors:null,isDots:!1,isPeakDot:!1,isMinMax:!1,isMedianRange:!1};function pt(s,e){this.settings=H.mergeSettings(s,e,gt),this.element=$(s),this.init()}pt.prototype={init:function(){if(!this.settings.colors){var e=Et.themeColors().palette;this.settings.colors=[],this.settings.colors[0]=e.azure[Et.uplift||Et.new?"80":"70"].value,this.settings.colors[1]=e.slate[40].value,this.settings.colors[2]=e.slate[30].value,this.settings.colors[3]=e.slate[20].value}return this.namespace=H.uniqueId({classList:[this.settings.type,"chart"]}),this.sparklineColors=d3.scaleOrdinal().range(this.settings.colors),this.build().handleEvents()},build:function(){var n,a,b,e=this,t=this,i=this.element.closest(".is-personalizable").length>0,o=[],l=[],d=t.settings.tooltip,h=0,p=0,v=0,w=this.calculateAspectRatioFit({srcWidth:385,srcHeight:65,maxWidth:this.element.width(),maxHeight:600}),T=w.width>300?4:3,k=t.settings.dataset;for(b=0;b<k.length;b++)p=d3.min([d3.min(k[b].data),p]),h=d3.max([d3.max(k[b].data),h]),v=d3.max([k[b].data.length,v]);var M=w.width,L=w.height,z=d3.scaleLinear().domain([0,v]).range([10,M-10]),q=d3.scaleLinear().domain([p,h]).range([L-10,10]),O=d3.line().x(function(Te,ge){return z(ge)}).y(function(Te){return q(Te)});ue.appendTooltip();var _=d3.select(this.element[0]).append("svg").attr("height",L).attr("width",M);if(t.settings.isMedianRange){h=d3.max(k[0].data),p=d3.min(k[0].data);var j=M-45,X=d3.median(k[0].data),fe=h-p,he=d3.scaleLinear().domain([p,h]).range([0,L]),we=L-he(X>fe?X:fe),re=L-he(X<fe?X:fe),Ne=$("html").is('[class*="dark"]')?"#F0F0F0":"#525257";_.append("g").attr("class","medianrange").attr("transform",function(){return"translate(".concat(10,",").concat(we,")")}).append("rect").attr("width",j).attr("height",re).style("opacity","0.06").style("fill",Ne).call(function(Te){Te._groups.forEach(function(ge){ge.forEach(function(ce){var Be=k[0];H.addAttributes($(ce),Be,Be.attributes,"medianrange")})})}).on("mouseenter.".concat(t.namespace),function(){var Te=this.getBoundingClientRect(),ge='<p class="sparkline-tooltip">'+B.translate("Median")+": <b>"+X+"</b><br>"+B.translate("Range")+": <b>"+fe+"</b>"+(t.settings.isPeakDot?"<br>"+B.translate("Peak")+": <b>"+h+"</b>":"")+"</p>",ce=function(){var Oe=ue.tooltipSize(ge),ot=Te.left+(Te.width-Oe.width)/2,He=Te.top-Oe.height-5;""!==ge&&(ue.tooltip&&ue.tooltip.length&&ue.tooltip[i?"addClass":"removeClass"]("is-personalizable"),ue.showTooltip(ot,He,ge,"top"))};if(d&&"function"==typeof d&&!o[b]){ge="";var Be=!0;n=setInterval(function(){Be&&(Be=!1,d(function(qe){ge=qe,o[b]=qe})),""!==ge&&(clearInterval(n),ce())},10)}else d="object"===rt(d)?"":d,ge=o[b]||d||k[0].tooltip||ge||"",ce()}).on("mouseleave.".concat(t.namespace),function(){clearInterval(n),ue.hideTooltip()})}var le=function(){var ge=k[b];_.append("g").append("path").attr("d",O(ge.data)).attr("stroke",t.settings.isMinMax?"#999999":e.sparklineColors(b)).attr("class","team connected-line").call(function(Be){Be._groups.forEach(function(qe){qe.forEach(function(Oe){H.addAttributes($(Oe),ge,ge.attributes,"connected-line")})})})};for(b=0;b<k.length;b++)le();return p=d3.min(k[0].data),_.selectAll(".point").data(k[0].data).enter().append("circle").attr("r",function(Te){return t.settings.isMinMax&&h===Te||t.settings.isMinMax&&p===Te?T+1:t.settings.isDots||t.settings.isPeakDot&&h===Te?T:0}).attr("class",function(Te){return t.settings.isPeakDot&&h===Te&&!t.settings.isMinMax?"point peak":t.settings.isMinMax&&h===Te?"point max":t.settings.isMinMax&&p===Te?"point min":"point"}).style("fill",function(Te){return t.settings.isPeakDot&&h===Te&&!t.settings.isMinMax?"#ffffff":t.settings.isMinMax&&h===Te?"#56932E":t.settings.isMinMax&&p===Te?"#941E1E":t.sparklineColors(0)}).style("stroke",function(Te){return t.settings.isPeakDot&&h===Te&&!t.settings.isMinMax?t.sparklineColors(0):t.settings.isMinMax&&h===Te||t.settings.isMinMax&&p===Te?"none":"#ffffff"}).style("cursor","pointer").attr("cx",function(Te,ge){return z(ge)}).attr("cy",function(Te){return q(Te)}).call(function(Te){Te._groups.forEach(function(ge){ge.forEach(function(ce,Be){var qe=k[0];H.addAttributes($(ce),qe,qe.attributes,"point-".concat(Be))})})}).on("mouseenter.".concat(t.namespace),function(Te,ge){var ce=this.getBoundingClientRect(),Be="<p>".concat(k[0].name?"".concat(k[0].name,"<br> ").concat(t.settings.isMinMax&&h===ge?"".concat(B.translate("Highest"),": "):t.settings.isMinMax&&p===ge?"".concat(B.translate("Lowest"),": "):t.settings.isPeakDot&&h===ge?"".concat(B.translate("Peak"),": "):""):"","<b>").concat(ge,"</b></p>"),qe=function(){var He=ue.tooltipSize(Be),Ae=ce.left-He.width/2+6,We=ce.top-He.height-8;""!==Be&&(ue.tooltip&&ue.tooltip.length&&ue.tooltip[i?"addClass":"removeClass"]("is-personalizable"),ue.showTooltip(Ae,We,Be,"top"))};if(d&&"function"==typeof d&&!l[b]){Be="";var Oe=!0;a=setInterval(function(){Oe&&(Oe=!1,d(function(ot){Be=ot,l[b]=ot})),""!==Be&&(clearInterval(a),qe())},10)}else d="object"===rt(d)?"":d,Be=l[b]||d||k[0].tooltip||Be||"",qe();d3.select(this).attr("r",t.settings.isMinMax&&h===ge||t.settings.isMinMax&&p===ge?T+2:T+1)}).on("mouseleave.".concat(t.namespace),function(Te,ge){clearInterval(a),ue.hideTooltip(),d3.select(this).attr("r",t.settings.isMinMax&&h===ge||t.settings.isMinMax&&p===ge?T+1:T)}).on("contextmenu.".concat(t.namespace),function(Te,ge){var ce={value:ge,name:k[0].name||""};t.settings.isMinMax&&h===ge&&(ce.highest=!0),t.settings.isMinMax&&p===ge&&(ce.lowest=!0),t.settings.isPeakDot&&h===ge&&(ce.peak=!0),ue.triggerContextMenu(t.element,d3.select(this).nodes()[0],ce,Te)}),this.element.trigger("rendered",_),this},calculateAspectRatioFit:function(e){var t=Math.min(e.maxWidth/e.srcWidth,e.maxHeight/e.srcHeight);return{width:e.srcWidth*t,height:e.srcHeight*t}},handleEvents:function(){var e=this;return this.element.on("updated.".concat(Je),function(t,i){e.updated(i)}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.element.empty(),this.teardown().init()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".medianrange").off(t(["mouseenter","mouseleave"])),this.element.find(".point").off(t(["mouseenter","mouseleave","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),ue.removeTooltip(),this.element&&(this.element.empty().removeClass("sparkline"),$.removeData(this.element[0],Je),$.removeData(this.element[0],"chart"))}};var Bt="emptymessage",Ft={title:null,info:null,icon:null,button:null,height:null,color:"slate",attributes:null};function Rt(s,e){this.settings=H.mergeSettings(s,e,Ft),this.element=$(s),this.init()}Rt.prototype={init:function(){this.setup().build()},setup:function(){return this.element.addClass("empty-message"),this},build:function(){var e,t=this.settings,i="small"===t.height;if(null!=t&&null!==(e=t?.button)&&void 0!==e&&e?.isPrimary&&(this.settings.color="azure"),t.icon&&"null"!==t.icon&&null!=t.icon&&!i&&$('<div class="empty-icon">\n          <svg class="icon-empty-state is-'.concat(this.settings.color,'" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#').concat(t.icon,'"></use>\n          </svg></div>')).appendTo(this.element),t.title&&("[NoData]"===t.title&&(t.title=B?B.translate("NoData"):"No data available"),$('<div class="empty-title">'.concat(t.title,"</div>")).appendTo(this.element)),t.info&&!i&&$('<div class="empty-info">'.concat(t.info,"</div>")).appendTo(this.element),t.button&&!i){var n='<div class="empty-actions">\n          <button type="button" class="'.concat(t.button.isPrimary?"btn-primary":"btn-secondary"," ").concat(t.button.cssClass,' hide-focus" ').concat(t.button.id?'id="'.concat(t.button.id,'"'):"",">\n            <span>").concat(t.button.text,"</span>\n          </button>\n        </div>");$(n).appendTo(this.element),t.button.click&&this.element.off("click").on("click","button",t.button.click)}return H.addAttributes(this.element,this,t.attributes,"",!0),H.addAttributes(this.element.find(".empty-actions button"),this,t.attributes,"btn",!0),this},updated:function(e){this.settings=H.mergeSettings(this.element,e,this.settings),this.element.empty(),this.build()},destroy:function(){$.removeData(this.element[0],Bt),this.element.empty(),this.element.removeClass("empty-message")}},$.fn.emptymessage=function(s){return this.each(function(){var e=$.data(this,Bt);e?e.updated(s):e=$.data(this,Bt,new Rt(this,s))})};var Vt="line",Ii={dataset:[],isArea:!1,isBubble:!1,isScatterPlot:!1,showLegend:!0,selectable:!0,hideDots:!1,animate:!0,redrawOnResize:!0,fitHeight:!0,emptyMessage:{title:B?B.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function It(s,e){this.settings=H.mergeSettings(s,e,Ii),this.element=$(s),ue.destroy(s),this.init()}It.prototype={init:function(){return this.namespace=H.uniqueId({classList:[this.settings.type,"chart"]}),this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var e,t,i,n,a,o=this,l=this.settings,d=this.element.closest(".is-personalizable").length>0,p="line-chart";p+=l.isBubble?" bubble":"",this.element.addClass(p+=l.isScatterPlot?" scatterplot":"");var v=0===l.dataset.length;if(!v){var b=0;l.dataset.forEach(function(et){0===et.data.length&&b++}),v=b===l.dataset.length}if(v)return o.element.emptymessage(l.emptyMessage),this;var w={radius:5,radiusOnHover:7,strokeWidth:2,class:"dot"};l.isBubble&&(w.radius=0,w.radiusOnHover=0,w.strokeWidth=0),l.isScatterPlot&&(w.radius=0,w.strokeWidth=50),$.extend(!0,w,l.dots),o.dots=w,this.isRTL=B.isRTL();var T,M,L,k=[],A=l.tooltip,z={},q={atLeastOne:!1},O=["left","top","right","bottom"];if(l.axisLabels&&$.extend(!0,z,l.axisLabels),!$.isEmptyObject(z))for(M=0,L=O.length;M<L;M++){var _=z[O[M]];_&&"string"==typeof _&&""!==$.trim(_)&&(q[O[M]]=!0,q.atLeastOne=!0)}var G="",j=0,X=l.dataset,fe=l.hideDots,he=this.element.parent(),we=!!$(".widget-chart-action",he).length,re=he.width()<450,Ne=function(Yt){return typeof Yt<"u"&&"function"!=typeof Yt&&null!==Yt?"boolean"==typeof Yt?Yt?"-45":null:Yt:null},le={large:Ne(null===(e=l.xAxis)||void 0===e?void 0:e?.rotate),small:Ne(null===(t=l.xAxis)||void 0===t?void 0:t?.rotateOnSmallView)},Te=!!le.large;Te&&(le.use=le.large),re&&le.small&&(Te=!0,le.use=le.small),we&&(l.fitHeight=!1);var ge=function(Yt,kt){return d3.max(Yt.data,function(en){return kt?en.value[kt]:en.value})};if(Te){X[0].data.forEach(function(et){et.name.length>G.length&&(G=et.name)});var ce=Math.abs(le.use);ce=isNaN(ce)?0:ce,j=G.length*(ce>50?5:2)}var Be={top:q.top?we?15:40:we?5:30,right:q.right?65:55,bottom:q.bottom?Te?60:50:j+35,left:q.left?75:65},qe=H.getParentAvailableHeight(o.element[0]),Oe=l.fitHeight?qe:parseInt(he.height(),10),ot=he.width()-Be.left-Be.right,He=Oe-Be.top-Be.bottom-30;we&&(He-=42),o.svg=d3.select(this.element[0]).append("svg").attr("width",ot+Be.left+Be.right).attr("height",He+Be.top+Be.bottom).append("g").attr("transform","translate(".concat(Be.left,",").concat(Be.top,")"));var Ae=X[0].data.map(function(et){return et.name}),We={};X[0]&&X[0].valueFormatterString&&$.extend(!0,We,X[0].valueFormatterString);var yt=function(Yt,kt){return!$.isEmptyObject(We)&&Yt?d3.format(Yt)("0.0%"===Yt?kt/100:kt):kt},Dt={name:"Name",value:{x:"Value.x",y:"Value.y",z:"Value.z"}};X[0]&&X[0].labels&&$.extend(!0,Dt,X[0].labels);var zt,_t=(l.xAxis&&l.xAxis.scale?l.xAxis.scale:d3.scaleLinear()).range([0,ot]),ti=d3.scaleLinear().range([He,0]),ci=d3.scaleLinear().range([1,25]);zt=l.isBubble?{x:X.map(function(et){return ge(et,"x")}),y:X.map(function(et){return ge(et,"y")}),z:X.map(function(et){return ge(et,"z")})}:l.isScatterPlot?{x:X.map(function(et){return ge(et,"x")}),y:X.map(function(et){return ge(et,"y")})}:X.map(function(et){return ge(et)});var yi,Nt,di=d3.max(X.map(function(et){return et.data.length})),ut=di<=1?di:di-1,Xe=_t.domain(l.xAxis&&l.xAxis.domain?l.xAxis.domain:[0,l.isBubble||l.isScatterPlot?d3.max(zt.x):ut]),Lt=ti.domain([0,d3.max(l.isBubble||l.isScatterPlot?zt.y:zt)]).nice(),Tt=ci.domain([0,d3.max(l.isBubble?zt.z:l.isScatterPlot?zt.y:zt)]).nice(),Ji=ut;l.xAxis&&l.xAxis.ticks&&(Ji="auto"===l.xAxis.ticks?Math.max(ot/85,2):l.xAxis.ticks,(l.isBubble||l.isScatterPlot&&re)&&(Ji=Math.round(ut/2))),re&&null!==(yi=l.xAxis)&&void 0!==yi&&yi?.numTicksOnSmallView&&(Ji=null===(Nt=l.xAxis)||void 0===Nt?void 0:Nt?.numTicksOnSmallView);var Yt,Ai=d3.axisBottom(Xe).ticks(Ji).tickPadding(10).tickSize(l.isBubble||l.isScatterPlot?-(He+10):0).tickFormat(function(et,Yt){var kt,en;return"function"==typeof(null===(kt=l.xAxis)||void 0===kt?void 0:kt?.formatter)?l.xAxis.formatter(et,Yt):"auto"===(null===(en=l.xAxis)||void 0===en?void 0:en?.ticks)?Ae[et]:l.isBubble||l.isScatterPlot?et:Ae[et]}),Jn=d3.axisLeft(Lt).ticks(8).tickSize(-(ot+20)).tickPadding(o.isRTL?-18:20);if(null!==(i=l.yAxis)&&void 0!==i&&i?.formatter&&Jn.tickFormat(function(et,Yt){return"function"==typeof l.yAxis.formatter?l.yAxis.formatter(et,Yt):et}),null!==(n=l.yAxis)&&void 0!==n&&n?.ticks&&Jn.ticks(l.yAxis.ticks.number,l.yAxis.ticks.format),q.atLeastOne){var vn=o.svg.append("g").attr("class","axis-labels"),ri={top:"translate(".concat(ot/2,",").concat(-10,")"),right:"translate(".concat(ot+28,",").concat(He/2,")rotate(90)"),bottom:"translate(".concat(ot/2,",").concat(He+40,")"),left:"translate(".concat(-40,",").concat(He/2,")rotate(-90)")},Yn={top:"rotate(0deg) scaleX(-1) translate(-".concat(ot/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(He/2+5,"px, -").concat(ot+28,"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(ot/2,"px, ").concat(He+40,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(He/2-5,"px, ",55,"px)")};for(M=0,L=O.length;M<L;M++)q[Yt=O[M]]&&vn.append("text").attr("class","axis-label-".concat(Yt)).attr("text-anchor","middle").attr("transform",o.isRTL?"":ri[Yt]).style("font-size","1.25em").style("transform",o.isRTL?Yn[Yt]:"").text(z[Yt])}if(o.svg.append("g").attr("class","x axis").attr("transform","translate(0,".concat(He,")")).call(Ai),o.svg.append("g").attr("class","y axis").call(Jn),o.svg.selectAll(".tick line").attr("x1","-10"),l.isBubble||l.isScatterPlot){o.svg.selectAll(".x.axis .tick line, .y.axis .tick line").style("opacity",0);var Cn=o.svg.select(".x.axis .tick line");Cn.attr("x2","-10"),(!l.xAxis||l.xAxis&&!l.xAxis.hideLine)&&Cn.style("opacity",1),(!l.yAxis||l.yAxis&&!l.yAxis.hideLine)&&o.svg.select(".y.axis .tick line").style("opacity",1)}if(o.isRTL&&(o.svg.selectAll("text").attr("transform","scale(-1, 1)"),o.svg.selectAll(".y.axis text").style("text-anchor","end")),Te){var rs=o.isRTL?"scale(-1, 1) rotate(".concat(le.use,"deg)"):"rotate(".concat(le.use,"deg)");o.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",function(){return o.isRTL?-10:-(this.getBBox().width+10)}).attr("dy","1em").attr("style","text-anchor: start; transform: ".concat(rs," !important;"))}l.xAxis&&l.xAxis.formatText&&o.svg.selectAll(".x.axis .tick text").each(function(et){var Yt=d3.select(this),kt=d3.select(this).text(),en=l.xAxis.formatText(kt,et);de.html(Yt.node(),en,"<tspan><text><glyph>")});var Fi=d3.line().x(function(et,Yt){var kt;return Xe("function"==typeof(null===(kt=l.xAxis)||void 0===kt?void 0:kt?.parser)?l.xAxis.parser(et,Yt):l.isBubble||l.isScatterPlot?et.value.x:Yt)}).y(function(et){return Lt(l.isBubble||l.isScatterPlot?et.value.y:et.value)}),Ni={line:{delay:200,prevent:!1,timer:0},dot:{delay:200,prevent:!1,timer:0},symbol:{delay:200,prevent:!1,timer:0}};o.element.off("dblclick.".concat(o.namespace)).on("dblclick.".concat(o.namespace),"*",function(et){et.stopImmediatePropagation()}),X.forEach(function(et,Yt){var kt=o.svg.append("g").attr("data-group-id",Yt).attr("class","line-group");if(l.isArea){var en=d3.area().x(function(at,ct){return Xe(ct)}).y0(He).y1(function(at){return Lt(l.isBubble||l.isScatterPlot?at.value.y:at.value)});kt.append("path").datum(et.data).attr("fill",function(){return ue.chartColor(Yt,"line",et)}).style("opacity",".2").attr("class","area").attr("d",en).call(function(at){at._groups.forEach(function(ct){ct.forEach(function(ft){H.addAttributes($(ft),et,et.attributes,"area")})})})}var En=kt.append("path").datum(et.data).attr("d",Fi(et.data)).attr("stroke",function(){return l.isBubble||l.isScatterPlot?"":ue.chartColor(Yt,"line",et)}).attr("stroke-width",2).attr("fill","none").attr("class","line").call(function(at){at._groups.forEach(function(ct){ct.forEach(function(ft){H.addAttributes($(ft),et,et.attributes,"line")})})}).on("click.".concat(o.namespace),function(){var at=this;o.settings.selectable&&(Ni.line.timer=setTimeout(function(){Ni.line.prevent||ue.selectElement(d3.select(at.parentNode),o.svg.selectAll(".line-group"),et,o.element,X,o.initialSelectCall,o.settings.selectable),Ni.line.prevent=!1},Ni.line.delay))}).on("dblclick.".concat(o.namespace),function(){clearTimeout(Ni.line.timer),Ni.line.prevent=!0,o.element.triggerHandler("dblclick",[[{elem:[this.parentNode],data:et}]])}).on("contextmenu.".concat(o.namespace),function(at){ue.triggerContextMenu(o.element,d3.select(this).nodes()[0],et,at)}),Ze=En.node().getTotalLength?En.node().getTotalLength():0;En.attr("stroke-dasharray","".concat(Ze," ").concat(Ze)).attr("stroke-dashoffset",Ze).transition().duration(l.animate?600:0).ease(d3.easeCubic).attr("stroke-dashoffset",0);var it=function(ct,ft,qt){var Ei=ct.getBoundingClientRect(),Vi="<p><b>".concat(qt.name," </b> ").concat(function(Yt){return d3.format(l.formatterString||",")(Yt)}(qt.value),"</p>"),sa=function(){var Ys=ue.tooltipSize(Vi),Ui=Ei.left-Ys.width/2+6,js=Ei.top-Ys.height-18;Ui=l.isBubble||l.isScatterPlot?Ei.left+Ei.width/2-Ys.width/2:Ui,""!==Vi&&(ue.tooltip&&ue.tooltip.length&&ue.tooltip[d?"addClass":"removeClass"]("is-personalizable"),ue.showTooltip(Ui,js,Vi,"top"))};if(l.isBubble||l.isScatterPlot){for(var hi in Vi='<div class="chart-swatch line"><div class="swatch-caption"><span class="indicator-box"></span>\n            <b>'.concat(qt.name,"</b></div>"),qt)if(qt.hasOwnProperty(hi))if("object"!==rt(qt[hi]))Dt[hi]&&(Vi+="".concat('<div class="swatch-row"><span>').concat(Dt[hi],"</span>")+"<b>".concat(et.name,"</b>")+"</div>");else{var xn=qt[hi];for(var Ea in xn)xn.hasOwnProperty(Ea)&&Dt[hi]&&(Vi+="".concat('<div class="swatch-row"><span class="text-capitalize">').concat(Dt[hi][Ea],"</span>")+"<b>".concat(yt(We[Ea],xn[Ea]),"</b>")+"</div>")}Vi+="</div>"}if(A&&"function"==typeof A&&!k[M]){Vi="";var os=!0;T=setInterval(function(){os&&(os=!1,A(function(As){Vi=As,k[M]=As})),""!==Vi&&(clearInterval(T),sa())},10)}else{A="object"===rt(A)?"":A,Vi=k[M]||A||qt.tooltip||et.tooltip||Vi||"",sa();for(var ls=document.querySelectorAll("#svg-tooltip .swatch-caption span"),Fn=0;Fn<ls.length;Fn++)ls[Fn].style.backgroundColor=ue.chartColor(l.isBubble||l.isScatterPlot?qt.lineIdx:Fn,"line",qt)}d3.select(this).attr("r",function(As){return l.isBubble?2+Tt(As.value.z):w.radiusOnHover})};fe||(l.isScatterPlot||kt.selectAll("circle").data(et.data).enter().append("circle").attr("class",w.class).call(function(at){at._groups.forEach(function(ct){ct.forEach(function(ft){var qt=ft.__data__;H.addAttributes($(ft),qt,qt.attributes,"dot")})})}).attr("cx",function(at,ct){return Xe(l.xAxis&&l.xAxis.parser?l.xAxis.parser(at,ct):l.isBubble||l.isScatterPlot?at.value.x:ct)}).attr("cy",function(at){return Lt(l.isBubble||l.isScatterPlot?0:at.value)}).attr("r",w.radius).style("stroke-width",w.strokeWidth).style("cursor",o.settings.selectable?"pointer":"inherit").style("fill",function(){return ue.chartColor(Yt,"line",et)}).style("opacity",l.isBubble||l.isScatterPlot?".7":"1").on("mouseenter.".concat(o.namespace),function(at,ct){ct.lineIdx=Yt,it(this,0,ct)}).on("mouseleave.".concat(o.namespace),function(){clearInterval(T),ue.hideTooltip(),d3.select(this).attr("r",function(at){return l.isBubble?Tt(at.value.z):w.radius})}).on("click.".concat(o.namespace),function(at,ct){var ft=this;o.settings.selectable&&(Ni.dot.timer=setTimeout(function(){Ni.dot.prevent||ue.selectElement(d3.select(ft.parentNode),o.svg.selectAll(".line-group"),ct,o.element,X,o.initialSelectCall,o.settings.selectable),Ni.dot.prevent=!1},Ni.dot.delay))}).on("dblclick.".concat(o.namespace),function(at,ct){clearTimeout(Ni.dot.timer),Ni.dot.prevent=!0,o.element.triggerHandler("dblclick",[[{elem:[this.parentNode],data:ct}]])}).on("contextmenu.".concat(o.namespace),function(at,ct){ue.triggerContextMenu(o.element,d3.select(this).nodes()[0],ct,at)}),l.isScatterPlot&&kt.selectAll(".symbol").data(et.data).enter().append("path").attr("class","symbol").call(function(at){at._groups.forEach(function(ct){ct.forEach(function(ft){var qt=ft.__data__;H.addAttributes($(ft),qt,qt.attributes,"symbol")})})}).attr("transform",function(at){return"translate(".concat(Xe(at.value.x),",").concat(Lt(at.value.y),")")}).attr("d",d3.symbol().size(w.strokeWidth).type(function(){return d3.symbols[Yt]})).style("opacity",0).style("fill",function(){return ue.chartColor(Yt,"line",et)}).on("mouseenter.".concat(o.namespace),function(at,ct){ct.lineIdx=Yt,it(this,0,ct)}).on("mouseleave.".concat(o.namespace),function(){clearInterval(T),ue.hideTooltip(),d3.select(this).attr("r",function(){return w.radius})}).on("click.".concat(o.namespace),function(at,ct){var ft=this;o.settings.selectable&&(Ni.symbol.timer=setTimeout(function(){Ni.symbol.prevent||ue.selectElement(d3.select(ft.parentNode),o.svg.selectAll(".line-group"),ct,o.element,X,o.initialSelectCall,o.settings.selectable),Ni.symbol.prevent=!1},Ni.symbol.delay))}).on("dblclick.".concat(o.namespace),function(at,ct){clearTimeout(Ni.symbol.timer),Ni.symbol.prevent=!0,o.element.triggerHandler("dblclick",[[{elem:[this.parentNode],data:ct}]])}).on("contextmenu.".concat(o.namespace),function(at,ct){ue.triggerContextMenu(o.element,d3.select(this).nodes()[0],ct,at)}),l.isBubble&&kt.selectAll("circle").attr("cy",function(at){return Lt(at.value.y)}).transition().duration(l.animate?750:0).ease(d3.easeCubic).attr("r",function(at){return Tt(at.value.z)}),l.isScatterPlot&&kt.selectAll(".symbol").transition().duration(l.animate?750:0).ease(d3.easeCubic).style("opacity",1))}),o.svg.selectAll(".y.axis .tick").attr("class",function(et){return"tick".concat(0===et?" tick0":"")});var On=X.map(function(et){return{color:et.color,name:et.name,selectionObj:o.svg.selectAll(".line-group"),selectionInverse:o.svg.selectAll(".line-group"),data:et}});if(l.showLegend&&ue.addLegend(On,l.isScatterPlot?"scatterplot":"line",l,this.element),ue.appendTooltip(),!Te&&!l.xAxis&&(null===(a=o.settings.xAxis)||void 0===a||!a?.rotate)&&ue.labelsColide(o.svg)){var Oa=[];X.forEach(function(et){Oa=Oa.concat(et.data)}),ue.applyAltLabels(o.svg,Oa,"shortName"),ue.labelsColide(o.svg)&&ue.applyAltLabels(o.svg,Oa,"abbrName"),ue.labelsColide(o.svg)&&ue.applyAltLabels(o.svg,Oa,null,null,!0)}return ue.setSelected=function(et,Yt){var En,Ze,it,kt=0,en=H.equals,at=function(ft,qt,Ei,Vi){Ei?(it=o.svg.select('[data-group-id="'.concat(qt,'"]')).select(".dot:nth-child(".concat(Vi+2,")")),("number"==typeof et.groupIndex&&typeof et.fieldName<"u"&&typeof et.fieldValue<"u"&&et.groupIndex===qt&&et.fieldValue===Ei[et.fieldName]||typeof et.index<"u"&&"number"==typeof et.groupIndex&&et.groupIndex===qt&&et.index===Vi||et.elem&&$(it.node()).is(et.elem)||et.data&&en(et.data,Ei))&&(kt++,Ze=Ei,En=o.svg.select('[data-group-id="'.concat(qt,'"]')))):(it=o.svg.select('[data-group-id="'.concat(qt,'"]')),(typeof et.groupName<"u"&&typeof et.groupValue<"u"&&et.groupValue===ft[et.groupName]||typeof et.groupIndex<"u"&&et.groupIndex===qt||et.elem&&$(it.node()).is(et.elem)||et.data&&en(et.data,ft))&&(kt++,Ze=ft,En=it))};X.forEach(function(ct,ft){kt<1&&ct&&ct.data&&(ct.data.forEach(function(qt,Ei){kt<1&&qt&&at(ct,ft,qt,Ei)}),kt<1&&at(ct,ft))}),kt>0&&(Yt||!En.classed("is-selected"))&&o.settings.selectable&&ue.selectElement(En,o.svg.selectAll(".line-group"),Ze,o.element,X,o.initialSelectCall)},o.svg._groups.forEach(function(et){et.forEach(function(Yt){var kt=$(Yt).find("g.y.axis .tick"),en=$(Yt).find("g.line-group"),En=$(Yt).find("g.y.axis"),Ze=kt.attr("transform"),it=o.getTransformYAxisValue(Ze);kt.length<2&&En.add(en).attr("transform","translate(0,".concat(it,")"))})}),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},getTransformYAxisValue:function(e){if(e){var t=e.split(",");return t.splice(0,1).join(""),t.join(",").slice(0,-1)}return"0"},setInitialSelected:function(){var i,n,e=this,t=0,a=function(l,d,h){l.selected&&t<1&&(t++,i=d3.select(e.svg.selectAll(".line-group").nodes()[h]),n=d)};this.settings.dataset.forEach(function(o,l){o&&a(o,o,l)}),this.settings.dataset.forEach(function(o,l){(o||o.data)&&o.data.forEach(function(d){a(d,o,l)})}),t>0&&e.settings.selectable&&(e.initialSelectCall=!0,ue.selectElement(i,e.svg.selectAll(".line-group"),n,e.element,e.settings.dataset,e.initialSelectCall)),e.initialSelectCall=!1},setTextValues:function(){var e,t,i,n=this,a=this,o={el:this.element[0].querySelector(".line-chart .axis.y")},l={el:o.el.querySelector(".tick line")},d=[].slice.call(o.el.querySelectorAll(".tick text")),h=null===(e=this.settings)||void 0===e||null===(e=e?.axisLabels)||void 0===e?void 0:e?.left,p="string"==typeof h&&""!==h.trim(),v={maxWidth:this.element.width(),boxWidth:p?23:43,transMatrix:null===(t=this.svg)||void 0===t||null===(t=t?.node())||void 0===t||null===(t=t?.transform)||void 0===t||null===(t=t?.baseVal)||void 0===t||null===(t=t?.consolidate())||void 0===t?void 0:t?.matrix};if(v.transY=(null===(i=v.transMatrix)||void 0===i?void 0:i?.f)||30,v.customCss=function(){return{tooltip:{maxWidth:"".concat(v.maxWidth,"px")},arrow:{left:n.isRTL?"calc(100% - 20px)":"20px"}}},o.width=o.el.getBBox?o.el.getBBox().width:0,l.width=l.el&&l.el.getBBox?l.el.getBBox().width:0,v.xDiff=o.width-l.width,this.settings.selectable||this.element.find(".line").css("cursor","inherit"),d.forEach(function(T,k){var A=T.textContent,M=ue.calculateTextRenderWidth(A),L=T.parentNode;if(M>=v.boxWidth){if(v.elem=T,xe.browser.isIE11())T.textContent=ue.trimText(A,5);else{T.classList.add("hidden"),d3.select(L).append("foreignObject").attr("overflow","visible").attr("width","".concat(v.boxWidth)).attr("height","16").attr("class","foreign-object tick-y".concat(k)).attr("x","-".concat(v.boxWidth+(n.isRTL?12:16))).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml"></div>');var q=L.querySelector(".text.ellipsis");if(q){var O=document.createTextNode(A);q.appendChild(O)}v.elem=L.querySelector(".text")}d3.select(v.elem).on("mouseover.".concat(a.namespace),function(){var G,j,X,fe,_=(G=this.getBoundingClientRect(),j=Math.ceil(M/v.maxWidth),X=(X=G.left)<0?30:X,fe=((fe=G.top)<0?30:fe)-36,j>1&&(fe-=.5*(j-1)*33),n.isRTL&&(X=G.left-M+5),{x:X,y:fe});ue.showTooltip(_.x,_.y,A,"top",v.customCss())}).on("mouseout.".concat(n.namespace),function(){return ue.hideTooltip()})}}),!p){o.width=o.el.getBBox?o.el.getBBox().width:0,l.width=l.el&&l.el.getBBox?l.el.getBBox().width:0,v.xDiff=o.width-l.width;var w=[{min:0,max:23,val:62},{min:23,max:26,val:65},{min:26,max:30,val:67},{min:30,max:32,val:69},{min:32,max:34,val:70},{min:34,max:38,val:71},{min:38,max:42,val:73},{min:42,max:47,val:77},{min:47,max:55,val:78}].filter(function(T){return v.xDiff>=T.min&&v.xDiff<T.max});w.length&&(v.newX=w[0].val,d3.select(this.svg.node()).attr("transform","translate(".concat(v.newX,",").concat(v.transY,")")),xe.browser.isIE11()&&this.isRTL&&d3.selectAll(".line-chart .axis.y .tick text").attr("x",v.boxWidth+3))}},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},width:0,getSelected:function(){return ue.selected},setSelected:function(e,t){ue.setSelected(e,t,{svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1})},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout(function(){return t()},300):t()},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),this.element.empty(),e&&e.dataset&&(this.settings.dataset=e.dataset),this.build()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".line-group .line").off(t(["click","dblclick","contextmenu"])),this.element.find(".line-group .symbol").off(t(["mouseenter","mouseleave","click","dblclick","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),this.dots&&this.element&&(this.element.find(".line-group .".concat(this.dots.class)).off(t(["mouseenter","mouseleave","click","dblclick","contextmenu"])),delete this.dots),delete this.namespace,this},destroy:function(){this.teardown(),ue.removeTooltip(),this.element&&(this.element.empty().removeClass("line-chart"),$.removeData(this.element[0],Vt),$.removeData(this.element[0],"chart"))}};var Qi="column",Vn={dataset:[],isStacked:!1,showLegend:!0,animate:!0,selectable:!0,format:null,redrawOnResize:!0,useLine:!1,hideDots:!1,ticks:9,fitHeight:!0,emptyMessage:{title:B?B.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function Un(s,e){this.settings=H.mergeSettings(s,e,Vn),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(s),this.init()}Un.prototype={init:function(){return this.namespace=H.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var e,t,i,n,h,a=this,o=this.settings,l=this.element.closest(".is-personalizable").length>0,d=function(Ge){return d3.format(a.settings.formatterString||",")(Ge)},p=this.settings.dataset;if(this.dataset=p,0===p.length)return a.element.emptymessage(a.settings.emptyMessage),this;var v="",b=0,w=this.element.parent();$(".widget-chart-action",w);var T=w.width()<450,k=function(Ge){return typeof Ge<"u"&&"function"!=typeof Ge&&null!==Ge?"boolean"==typeof Ge?Ge?"-45":null:Ge:null},A={large:k(null===(e=this.settings.xAxis)||void 0===e?void 0:e?.rotate),small:k(null===(t=this.settings.xAxis)||void 0===t?void 0:t?.rotateOnSmallView)},M=!!A.large;if(M&&(A.use=A.large),T&&A.small&&(M=!0,A.use=A.small),M){p[0].data.forEach(function(Ve){Ve.name.length>v.length&&(v=Ve.name)});var L=Math.abs(A.use);L=isNaN(L)?0:L,b=v.length*(L>50?5:2)}var z,q,O={},_={atLeastOne:!1},G=["left","top","right","bottom"];if(o.axisLabels&&$.extend(!0,O,o.axisLabels),!$.isEmptyObject(O))for(z=0,q=G.length;z<q;z++){var j=O[G[z]];j&&"string"==typeof j&&""!==$.trim(j)&&(_[G[z]]=!0,_.atLeastOne=!0)}var X=B.isRTL(),fe="column-positive-negative"===this.settings.type||"positive-negative"===this.settings.type,he=1===p.length;this.isSingle=he;var we=!(he||!he&&a.settings.isStacked);this.isGrouped=we;var Be,qe,Oe,ot,He,Ae,We,yt,Dt,re_bottom=he&&void 0===p[0].name?a.settings.isStacked?20:M?b+35:50:35,le=H.getParentAvailableHeight(a.element[0]),Te=o.fitHeight?le:parseInt(w.height(),10),ge=w.width()-45-40-10,ce=Te-40-re_bottom-(he&&void 0===p[0].name?a.settings.isStacked||fe?30:0:40),zt=d3.min(p,function(Ve){return d3.min(Ve.data,function(Ge){return Ge.value})}),_t=d3.max(p,function(Ve){return d3.max(Ve.data,function(Ge){return Ge.value})});fe&&(Be=d3.min(p,function(Ve){return d3.min(Ve.data,function(Ge){return Ge.target})}),qe=d3.max(p,function(Ve){return d3.max(Ve.data,function(Ge){return Ge.target})}),zt=d3.min([zt,Be]),_t=d3.max([_t,qe]),He={target:null,positive:null,negative:null},yt={target:"Target",positive:"Positive",negative:"Negative"},Ae={target:"neutral",positive:"good",negative:"error"},We={},p[0]&&(p[0].attributes&&$.extend(!0,He,p[0].attributes),p[0].colors&&$.extend(!0,Ae,p[0].colors),p[0].legends&&$.extend(!0,yt,p[0].legends),p[0].patterns&&$.extend(!0,We,p[0].patterns)),Dt=[],$.each(yt,function(Ve,Ge){var vt={name:Ge,color:Ae[Ve],pattern:We[Ve],option:Ve};He[Ve]&&(vt.data={attributes:He[Ve]}),Dt.push(vt)})),this.element.addClass("column-chart");var ti,ci=[],di=a.settings.tooltip,ut=d3.scaleBand().range([0,ge]).round(!0).padding("column-grouped"===this.settings.type?.1:0),Xe=d3.scaleBand(),Lt=d3.scaleLinear().range([ce,0]),Tt=null,Ji=null;if(a.settings.isStacked){var yi={y1:[],y2:[]};h=he?p[0].data.map(function(Ve,Ge){var vt=0;return 0===Ge?(yi.y1.push(Ve.value),yi.y2.push(0)):(vt=yi.y1[0]+yi.y2[0],yi.y1[0]=Ve.value,yi.y2[0]=vt),[$.extend({},Ve,{y0:vt,y:Ve.value,x:Ve.name,color:Ve.color,pattern:Ve.pattern,parentName:Ve.name,tooltip:Ve.tooltip})]}):p.map(function(Ve,Ge){return Ve.data.map(function(vt,Ut){var Kt=0;return 0===Ge?(yi.y1.push(vt.value),yi.y2.push(0)):(Kt=yi.y1[Ut]+yi.y2[Ut],yi.y1[Ut]=vt.value,yi.y2[Ut]=Kt),$.extend({},vt,{y0:Kt,y:vt.value,x:vt.name,color:vt.color,pattern:vt.pattern,parentName:Ve.name,tooltip:Ve.tooltip})})}),d3.stack()(h),Tt=d3.scaleBand().domain(d3.range(h[0].length)).rangeRound([0,ge],.05),he&&a.settings.isStacked&&Tt.paddingInner(.095),Ji=d3.scaleLinear().domain([0,d3.max(h,function(Ve){return d3.max(Ve,function(Ge){return Ge.y0+Ge.y})})]).range([0,ce])}var Ai=p[0].data.map(function(Ve){return Ve.name}),Jn=d3.axisBottom(ut).tickSize(0).tickPadding(12),vn=d3.axisLeft(Lt).tickSize(-ge).tickPadding(X?-12:12).ticks(a.settings.ticks||9,d3.format(a.settings.format||"s"));a.settings.yAxis&&(a.settings.yAxis.formatter&&vn.tickFormat(function(Ve,Ge){return"function"==typeof a.settings.yAxis.formatter?a.settings.yAxis.formatter(Ve,Ge):Ve}),a.settings.yAxis.ticks&&a.settings.yAxis.ticks.number>1&&a.settings.yAxis.ticks.format&&vn.ticks(a.settings.yAxis.ticks.number,a.settings.yAxis.ticks.format));var ri=d3.select(this.element[0]).append("svg").attr("width",ge+45+40).attr("height",ce+40+re_bottom+(_.atLeastOne?12:0)).append("g").attr("transform","translate(".concat(X?50:_.atLeastOne?56:45,"\n        ,").concat(40-(_.atLeastOne?5:0),")"));this.svg=ri;var Gs,Ge,Yn=p.map(function(Ve){return Ve.name}),Cn=p.map(function(Ve){return d3.max(Ve.data,function(Ge){return fe?Ge.target:Ge.value})});if(a.settings.isStacked&&(Gs=h.map(function(Ve){return d3.max(Ve,function(Ge){return Ge.y+Ge.y0})})),he&&(Yn=p[0].data.map(function(Ve){return Ve.name})),fe&&(zt+=zt/Lt.ticks().length,Cn[0]+=Cn[0]/(Lt.ticks().length/2)),function(){if(a.settings.isStacked&&he)Oe=p[0].data;else for(var Ve,Ge=p.length-1;Ge>-1;Ge--)Ve=p[Ge].data.map(function(Ut){return Ut}),$.extend(!0,Oe,Ve),Oe=$.map(Oe,function(Ut){return Ut})}(),a.settings.isStacked&&!he&&(ot=Yn.map(function(Ve,Ge){return p[Ge]})),ut.domain(a.settings.isStacked?Ai:Yn),Xe.domain(Ai).rangeRound([0,he||a.settings.isStacked?ge:ut.bandwidth()]),Lt.domain([zt<0?zt:a.settings.minValue||0,d3.max(a.settings.isStacked?Gs:Cn)]).nice(),(!he||he&&!a.settings.isStacked)&&ri.append("g").attr("class","x axis").attr("transform","translate(0,".concat(ce+(fe?10:0),")")).call(Jn),ri.append("g").attr("class","y axis").call(vn),X&&zt<0){var Fi,rs=0;ri.selectAll(".axis.y text").attr("class",function(Ve){return Fi=d3.select(this).text().length,rs=Fi>rs?Fi:rs,Ve<0?"negative-value":"positive-value"}).attr("x",function(Ve){return rs*(Ve<0?9:5)})}if(_.atLeastOne){var Ni=a.svg.append("g").attr("class","axis-labels"),On=ge-45,Oa={top:"translate(".concat(On/2,",").concat(-10,")"),right:"translate(".concat(On+53,",").concat(ce/2,")rotate(90)"),bottom:"translate(".concat(On/2,",").concat(ce+47,")"),left:"translate(".concat(-35,",").concat(ce/2,")rotate(-90)")},et={top:"rotate(0deg) scaleX(-1) translate(-".concat(On/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(ce/2+5,"px, -").concat(On+(X?55:28),"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(On/2,"px, ").concat(ce+47,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(ce/2-5,"px, ").concat(X?35:55,"px)")};for(z=0,q=G.length;z<q;z++)_[Ge=G[z]]&&Ni.append("text").attr("class","axis-label-".concat(Ge)).attr("text-anchor","middle").attr("transform",X?"":Oa[Ge]).style("font-size","1.25em").style("transform",X?et[Ge]:"").text(O[Ge])}var kt=[];p.forEach(function(Ve){kt.push($.extend({},Ve,{values:Ve.data}))}),he&&(kt=[],Yn=p[0].data.forEach(function(Ve){kt.push(Ve)}));var en,En,at=ge/kt.length>35*((kt[0]&&kt[0].values?kt[0].values.length:0)+1),ct=function(Ge){return ue.chartColor(0,"",{color:Ge})},ft=function(Ge,vt){var Ut;Ge.empty()?vt():(Ut=Ge.size(),Ge.on("end.".concat(a.namespace),function(){0==--Ut&&vt()}))},qt=function(Ge){var vt;if(Ge=fe&&Ge,he||fe){var Ut=Ge?"target-bar":"bar";vt=a.svg.selectAll("rect.".concat(Ut)).data(a.settings.isStacked?h:kt).enter().append("rect").call(function(Qe){Qe._groups.forEach(function(wt){wt.forEach(function(oi){var ji=oi.__data__;H.addAttributes($(oi),ji,ji.attributes,Ut)})})}).attr("class",function(Qe,wt){var oi="bar series-".concat(wt);return fe&&(oi=(Ge?"target-bar series-".concat(wt):oi)+(Qe.value>0?" positive":" negative")),oi}).attr("width",Math.min.apply(null,[Xe.bandwidth()-2,35])).attr("x",function(Qe){return a.settings.isStacked?Tt(0):Xe(Qe.name)+(Xe.bandwidth()-35)/2}).attr("y",function(){return Lt(0)>ce?ce:Lt(0)}).attr("height",function(){return 0}).attr("mask",function(Qe){return fe?Ge?We.target?"url(#".concat(We.target,")"):null:Qe.value<0?We.negative?"url(#".concat(We.negative,")"):null:We.positive?"url(#".concat(We.positive,")"):null:null}).attr("data-index",function(Qe,wt){return wt}).style("cursor",a.settings.selectable?"pointer":"inherit").style("fill",function(Qe){return fe?ct(Ge?Ae.target:Qe.value<0?Ae.negative:Ae.positive):null}),fe&&ri.selectAll(Ge?".target-bartext":".bartext").data(kt).enter().append("text").attr("class",function(Qe){return(Ge?"target-bartext":"bartext")+(Qe.value>0?" positive":" negative")}).attr("text-anchor","middle").attr("x",function(Qe){return(Xe(Qe.name)+Xe.bandwidth()/2)*(X?-1:1)}).attr("y",function(Qe){return Ge?Lt(Qe.target)-6:Lt(Qe.value>0?0:Qe.value)+12}).style("opacity",0).style("fill",function(Qe){return Ge?"":ct(Qe.value<0?Ae.negative:Ae.positive)}).style("font-weight","bold").text(function(Qe){return d(Ge?Qe.target:Qe.value)}),vt.transition().duration(a.settings.animate?1e3:0).call(ft,function(){ri.selectAll(".target-bartext, .bartext").transition().duration(a.settings.animate?300:0).style("opacity",1)}).attr("y",function(Qe){var wt=a.settings.isStacked?ce-Ji(Qe[0].y)-Ji(Qe[0].y0):Lt(Qe.value<0?0:Qe.value);return Ge?Lt(Qe.target):Qe.value<0?wt:wt>ce-3?ce-2:wt}).attr("height",function(Qe){var wt;return wt=a.settings.isStacked?Ji(Qe[0].y):Qe.value<0?ce-Lt(0)-(ce-Lt(Qe.value)):ce-Lt(Qe.value)-(ce-Lt(0)),wt=Qe.value<0?wt:wt<3?2:wt>ce?ce-Lt(Qe.value):wt,Ge?ce-Lt(Qe.target)-(ce-Lt(0)):wt})}else{if(vt=ri.selectAll(".x-value").data(a.settings.isStacked?h:kt).enter().append("g").attr("class","series-group g").attr("data-group-id",function(Qe,wt){return wt}).attr("transform",function(Qe){var wt=ut(a.settings.isStacked?Ai[0]:Qe.name),oi=ut.bandwidth();if(!a.settings.isStacked&&at&&oi>35*kt.length*2&&(wt+=oi/2/kt.length/2),a.isGrouped&&!a.settings.isStacked&&(2===Qe.data.length?oi<120?wt-=13.5:wt=ut(Qe.name):wt-=35/(oi>150?2:4)),a.settings.isStacked&&ge<290&&oi<40){var ki,Xs=(null===(ki=kt[0])||void 0===ki||null===(ki=ki?.data)||void 0===ki?void 0:ki?.length)||0;wt=(ge-oi*Xs)/Xs/2}return"translate(".concat(wt,",0)")}).selectAll("rect").data(function(Qe){return a.settings.isStacked?Qe:Qe.values}).enter().append("rect").call(function(Qe){Qe._groups.forEach(function(wt){wt.forEach(function(oi){var ji=oi.__data__;H.addAttributes($(oi),ji,ji.attributes,"bar")})})}).attr("class",function(Qe,wt){return"series-".concat(wt," bar")}).attr("width",Math.min.apply(null,[Xe.bandwidth()-2,35])).attr("x",function(Qe,wt){var oi=Math.min.apply(null,[Xe.bandwidth()-2,35]);return a.settings.isStacked?Tt(wt):Xe.bandwidth()/2+(oi+2)*wt-(1===kt[0].values.length||5===kt[0].values.length||4===kt[0].values.length?oi/2:0)}).attr("y",function(){return Lt(0)>ce?ce:Lt(0)}).attr("height",function(){return 0}),a.settings.useLine&&p.length===p.map(function(Qe){return Qe.line}).length){var Tn=d3.scaleBand().rangeRound([0,ge]).domain(p.map(function(Qe){return Qe.name})),mn=d3.scaleLinear().range([ce,0]).domain([0,d3.max(Cn)]).nice(),fn=d3.line().x(function(Qe){return Tn(Qe.name)+Tn.bandwidth()/2}).y(function(Qe){return mn(Qe.line.value)}),us=ri.append("g").attr("class","line-group"),ra=p.map(function(Qe){return Qe.line}).filter(function(Qe){return Qe?.attributes}),Fa="dark"===Et.currentTheme.modeId&&Et.new,fi="dark"===Et.currentTheme.modeId&&!Et.new;us.append("path").call(function(Qe){Qe._groups.forEach(function(wt){wt.forEach(function(oi){var ji;H.addAttributes($(oi),ra[0],null===(ji=ra[0])||void 0===ji?void 0:ji?.attributes)})})}).datum(p).attr("d",fn(p)).attr("class","line").style("opacity",0).attr("stroke",fi?"#BDBDBD":Fa?"#C5C5C9":Et.new&&"dark"!==Et.currentTheme.modeId?"#3B3B3F":"#313236").attr("stroke-width",2).attr("fill","none"),a.settings.hideDots||us.selectAll("circle").data(p).enter().append("circle").call(function(Qe){Qe._groups.forEach(function(wt){wt.forEach(function(oi,ji){H.addAttributes($(oi),ra[0],ra[0].attributes,"dot-".concat(ji+1))})})}).attr("class","dot").style("opacity",0).attr("cx",function(Qe){return Tn(Qe.name)+Tn.bandwidth()/2}).attr("cy",function(Qe){return mn(Qe.line.value)}).attr("r",5).style("fill",fi?"#BDBDBD":Fa?"#C5C5C9":Et.new&&"dark"!==Et.currentTheme.modeId?"#3B3B3F":"#313236").style("stroke-width",2).style("cursor","default").on("mouseenter.".concat(a.namespace),function(Qe,wt){!function(wt,oi){var Ho,iu,Bl,ji=wt.getBoundingClientRect(),ki="<p><b>".concat(oi.name,"</b> ").concat(oi.value,"</p>");Ho=ue.tooltipSize(ki),iu=ji.left-Ho.width/2+6,Bl=ji.top-Ho.height-18,""!==ki&&(ue.tooltip&&ue.tooltip.length&&ue.tooltip[l?"addClass":"removeClass"]("is-personalizable"),ue.showTooltip(iu,Bl,ki,"top"))}(this,wt.line)}).on("mouseleave.".concat(a.namespace),function(){ue.hideTooltip()})}vt.transition().duration(a.settings.animate?600:0).call(ft,function(){if(a.settings.useLine){var Qe=ri.select(".line"),wt=Qe.node().getTotalLength();Qe.style("opacity",1).attr("stroke-dasharray","".concat(wt," ").concat(wt)).attr("stroke-dashoffset",wt).transition().duration(a.settings.animate?300:0).ease(d3.easeCubic).attr("stroke-dashoffset",0).call(ft,function(){ri.selectAll(".dot").transition().duration(a.settings.animate?100:0).style("opacity",1)})}}).attr("y",function(Qe){var wt=a.settings.isStacked?ce-Ji(Qe.y)-Ji(Qe.y0):Lt(Qe.value<0?0:Qe.value);return Qe.value<0?wt:wt>ce-3?ce-2:wt}).attr("height",function(Qe){var wt;if(a.settings.isStacked)wt=Ji(Qe.y);else{if(Qe.value<=0)return ce-Lt(0)-(ce-Lt(Qe.value));wt=ce-Lt(Qe.value)-(ce-Lt(0))}return Qe.value<0?wt:wt<3?2:wt>ce?ce-Lt(Qe.value):wt})}return vt};fe&&(en=qt(!0));var Ei=qt();fe&&(En=d3.selectAll([].concat(Mi(en.nodes()),Mi(Ei.nodes())))),fe||(a.settings.isStacked?a.settings.isStacked&&!he?Ei.style("cursor",a.settings.selectable?"pointer":"inherit").style("fill",function(){var Ve=d3.select(this.parentNode).attr("data-group-id");return ue.chartColor(Ve,"bar",p[Ve])}).attr("mask",function(){var Ve=d3.select(this.parentNode).attr("data-group-id");return p[Ve].pattern?"url(#".concat(p[Ve].pattern,")"):null}):a.settings.isStacked&&he&&Ei.style("fill",function(Ve,Ge){return ue.chartColor(Ge,"bar",Ve[0])}).attr("mask",function(Ve){return Ve[0].pattern?"url(#".concat(Ve[0].pattern,")"):null}):Ei.style("fill",function(Ve,Ge){return he?ue.chartColor(Ge,"column-single",p[0].data[Ge]):ue.chartColor(Ge,"bar",Oe[Ge])}).style("cursor",a.settings.selectable?"pointer":"inherit").attr("mask",function(Ve,Ge){return he?p[0].data[Ge].pattern?"url(#".concat(p[0].data[Ge].pattern,")"):null:Oe[Ge].pattern?"url(#".concat(Oe[Ge].pattern,")"):null})),$.extend(ue.settings,{svg:ri,chartType:"Column",isSingle:he,isGrouped:we,isStacked:a.settings.isStacked});var sa=!1,hi=0;if(a.element.off("dblclick.".concat(a.namespace)).on("dblclick.".concat(a.namespace),"*",function(Ve){Ve.stopImmediatePropagation()}),(fe?En:Ei).on("mouseenter.".concat(a.namespace),function(Ve,Ge){var Ut,Kt,Ti,Tn,mn,fn,us,vt=$(this).index(),Ks=this,Fa=$(this),fi="",Qe=null,wt=Ve.pageY,oi=function($n,rn){return $n&&rn?"".concat('<svg width="12" height="12"><rect style="fill: ').concat(rn,'" mask="url(#').concat($n,')" height="12" width="12" />')+"</svg>":""},ji=vt,ki=null;a.isGrouped&&((ki={elem:d3.select(this.parentNode)}).data=ki.elem.datum().values,ki.items=ki.elem.selectAll(".bar"),ki.idx=parseInt(ki.elem.attr("data-group-id"),10),ji=ki.idx*ki.data.length+vt);var Xs=function($n){fn=ue.tooltipSize(fi);var rn=ue.tooltip.outerHeight(),Bi=null;de.isValidElement(Qe)?(Bi=Qe.getBoundingClientRect(),Ut=Bi.left-fn.width/2+Bi.width/2,Qe!==ki.elem.node()?Kt=Bi.top-fn.height-10:(Kt=wt-rn-25,$n?(Kt+=rn+50)>Bi.bottom+10&&(Kt=Bi.bottom+10):Kt=Bi.top-rn+25)):(Bi=Fa[0].getBoundingClientRect(),Ut=Bi.left-fn.width/2+Fa.attr("width")/2,a.settings.isStacked?Kt=Bi.top-fn.height-10:(Bi=Ks.parentNode.getBoundingClientRect(),Kt=wt-rn-25,p.length>1&&(Ut=Bi.left-fn.width/2+Bi.width/2,$n?(Kt+=rn+50)>Bi.bottom+10&&(Kt=Bi.bottom+10):Kt=Bi.top-rn+25))),""!==fi&&(ue.tooltip&&ue.tooltip.length&&ue.tooltip[l?"addClass":"removeClass"]("is-personalizable"),ue.showTooltip(Ut,Kt,fi,$n?"bottom":"top"))},Ho=function(){"string"==typeof fi?fi=function($n,rn,Bi){if(typeof Bi>"u"||null===Bi?Bi=/{{(\w+)}}/g:"string"==typeof Bi&&(Bi=new RegExp(Bi,"g")),"string"==typeof $n&&Bi instanceof RegExp)for(var Oc=9999;Bi.test($n)&&Oc>0;)$n=$n.replace(Bi,function(Gh,$s){return rn(0,$s)}),Oc--;return $n}(fi,function($n,rn){var Bi=d(Ge[rn]);return isNaN(Bi)?Ge[rn]:Bi}):"number"==typeof fi&&(fi=fi.toString())},iu=function($n){fi="";var rn={elem:Ks,index:vt,data:Ge};a.isGrouped&&(rn.groupElem=ki.elem.node(),rn.groupItems=ki.items.nodes(),rn.groupIndex=ki.idx,rn.groupData=ki.data);var Bi=function($s,Yh){("string"==typeof $s||"number"==typeof $s)&&(fi=$s,Qe=Yh,Ho())},Oc=!0;ti=setInterval(function(){Oc&&(Oc=!1,$n(Bi,rn)),""!==fi&&(clearInterval(ti),Xs())},10)};if(a.settings.isStacked){if(he)fi="<p><b>".concat(d(Ge[0].value),"</b> ").concat(Ge[0].name,"</p>");else{for(fi="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(h[0][vt].name,"</b></div>"),Ti=h.length-1,Tn=0;Ti>=Tn;Ti--)mn=ue.chartColor(Ti,"bar",p[Ti]),fi+="".concat('<div class="swatch-row"><div style="background-color:').concat(p[Ti].pattern?"transparent":mn,';">').concat(oi(p[Ti].pattern,mn),"</div>")+"<span>".concat(h[Ti][vt].parentName,"</span><b>").concat(d(h[Ti][vt].value),"</b>")+"</div>";fi+="</div>"}fn=ue.tooltipSize(fi),Ut=Fa[0].getBoundingClientRect().left-fn.width/2+Fa.attr("width")/2,Kt=Fa[0].getBoundingClientRect().top-fn.height-10}else{if(fe)fi="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(Ge.name,"</b></div>")+'<div class="swatch-row">'+'<div style="background-color:'.concat(We.target?"transparent":ct(Ae.target),';">').concat(oi(We.target,ct(Ae.target)),"</div>")+"<span>".concat(yt.target,"</span><b>").concat(d(Ge.target),"</b>")+'</div><div class="swatch-row">'+'<div style="background-color:'.concat(Ge.value<0?We.negative?"transparent":ct(Ae.negative):We.positive?"transparent":ct(Ae.positive),';">').concat(Ge.value<0?oi(We.negative,ct(Ae.negative)):oi(We.positive,ct(Ae.positive)),"</div>")+"<span>".concat(yt[Ge.value<0?"negative":"positive"],"</span><b>").concat(d(Ge.value),"</b>")+"</div></div>";else if(1===p.length)fi="<p><b>".concat(d(Ge.value),"</b> ").concat(Ge.name,"</p>");else{var Bl=d3.select(this.parentNode).datum().values;for(fi='<div class="chart-swatch">',Ti=0,Tn=Bl.length;Ti<Tn;Ti++)mn=ue.chartColor(Ti,"bar",Oe[Ti]),fi+="".concat('<div class="swatch-row"><div style="background-color:').concat(Oe[Ti].pattern?"transparent":mn,';">').concat(oi(Oe[Ti].pattern,mn),"</div>")+"<span>".concat(Bl[Ti].name,"</span><b>").concat(d(Bl[Ti].value),"</b>")+"</div>";fi+="</div>",us=Bl.length>6}fn=ue.tooltipSize(fi),Ut=Fa[0].getBoundingClientRect().left-fn.width/2+Fa.attr("width")/2,Kt=wt-ue.tooltip.outerHeight()-25,p.length>1&&(Ut=this.parentNode.getBoundingClientRect().left-fn.width/2+this.parentNode.getBoundingClientRect().width/2,Kt=this.parentNode.getBoundingClientRect().top-ue.tooltip.outerHeight()+25)}di&&"function"==typeof di&&typeof Ge.tooltip>"u"&&!ci[ji]?iu(di):(fi=ci[ji]||di||fi||"",!ci[ji]&&!1!==Ge.tooltip&&typeof Ge.tooltip<"u"&&null!==Ge.tooltip&&("function"==typeof Ge.tooltip?iu(Ge.tooltip):(fi=Ge.tooltip.toString(),Ho(),ci[ji]=fi)),"string"==typeof fi&&""!==fi&&Xs(us))}).on("mouseleave.".concat(a.namespace),function(){clearInterval(ti),ue.hideTooltip()}).on("contextmenu.".concat(a.namespace),function(Ve,Ge){ue.triggerContextMenu(a.element,d3.select(this).nodes()[0],Ge,Ve)}).on("click.".concat(a.namespace),function(Ve,Ge,vt,Ut){var Kt=this;a.settings.selectable&&(hi=setTimeout(function(){sa||(vt=o.isSingle||o.isPositiveNegative?$(Kt).data("index"):$(Kt).index(),a.doClickAction(Ve,Ge,vt,Kt,Ut)),sa=!1},200))}).on("dblclick.".concat(a.namespace),function(Ve,Ge,vt){clearTimeout(hi),sa=!0,vt=$(this).index(),a.doDoubleClickAction(Ge,vt,this)}),a.settings.isGrouped=we,a.settings.isSingle=he,a.settings.svg=this.svg,a.settings.showLegend){var xn,Ea=p.map(function(Ve){return Ve.line});if(he&&p[0].name)ue.addLegend(p,"column-single",a.settings,a.element);else if(fe)ue.addLegend(Dt,a.settings.type,a.settings,a.element);else if(a.settings.isStacked&&he)ue.addLegend(Oe,a.settings.type,a.settings,a.element);else if(!he){var os=a.settings.isStacked?ot:Oe;a.settings.useLine&&(xn=Ea.filter(function(Ve){return Ve.name}),os.push(xn[0])),os=os.map(function(Ve){var Ge;return Ve.attributes&&!(null!==(Ge=Ve.data)&&void 0!==Ge&&Ge?.attributes)&&(Ve.data?Ve.data.attributes=Ve.attributes:Ve.data={attributes:Ve.attributes}),Ve}),ue.addLegend(os,a.settings.type,a.settings,a.element)}if(a.settings.useLine&&Ea.length){var ls=$(".chart-legend-item-text");xn[0].name===ls.last().text()&&($(".chart-legend-color").last().addClass("dark"===Et.currentTheme.modeId?"slate03":"slate08"),a.element.find(".chart-legend-item").last().attr("style","pointer-events: none"))}}if(M&&a.settings.xAxis&&null!==(i=a.settings.xAxis)&&void 0!==i&&i?.rotate){var Fn=X?"scale(-1, 1) rotate(".concat(A.use,"deg)"):"rotate(".concat(A.use,"deg)");a.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",function(){return X?-10:-(this.getBBox().width+10)}).attr("dy","1em").attr("style","text-anchor: start; transform: ".concat(Fn," !important;"))}if(a.settings.xAxis&&a.settings.xAxis.formatText&&(a.svg.selectAll(".x.axis .tick text").each(function(Ve){var Ge=d3.select(this),vt=d3.select(this).text(),Ut=a.settings.xAxis.formatText(vt,Ve);de.html(Ge.node(),Ut,"<tspan>")}),a.element.find(".chart-legend").addClass("m-top-0"),a.element.find(".chart-legend .chart-legend-color").each(function(Ve,Ge){Ge.classList.add("m-bottom-0")})),a.settings.isStacked&&a.element.find(".x.axis").length>0){var As=$(".tick"),Ys=$(".x.axis > g"),Ui=$(".series-group.g"),js=$("g.x.axis > g text").find("tspan").length>1,Jr=As.attr("transform").replace("translate(","").replace(")","").split(","),ma=Jr?Jr[0]:0,Es=Ys[0].getBBox().width,cs=Ui.find("rect")[0].getBBox().width,tu=Math.round(ma-(js?14:10)+Es/2-cs/2);Ui.each(function(){var Ge=this.getAttribute("transform").replace(/translate\(\d+/,"translate(".concat(tu));this.setAttribute("transform",Ge)})}return ue.isRTL&&ue.isIE&&(ri.selectAll("text").attr("transform","scale(-1, 1)"),ri.selectAll(".y.axis text").style("text-anchor","start"),fe&&ri.selectAll(".negative-value").style("text-anchor","end")),ri.selectAll(".y.axis .tick").attr("class",function(Ve){return"tick".concat(0===Ve?" tick0":"")}),ue.appendTooltip(),!M&&!a.settings.xAxis&&!(null!==(n=a.settings.xAxis)&&void 0!==n&&n?.rotate)&&(ue.labelsColide(ri)&&ue.applyAltLabels(ri,kt,"shortName"),ue.labelsColide(ri)&&ue.applyAltLabels(ri,kt,"abbrName"),ue.labelsColide(ri)&&(ue.applyAltLabels(ri,kt,null,null,!0),fe&&ri.selectAll(".target-bartext, .bartext").attr("x",function(){return+d3.select(this).attr("x")-(X?-6:6)}))),ue.setSelected=function(Ve,Ge){var mn,fn,us,ra,Qe,vt=0,Ut=H.equals,Kt=ri.node().parentNode.nextSibling,Ti=d3.select(Kt),Tn=Ti.node()&&Ti.classed("chart-legend"),Ks=function(Qe,wt){var oi=!!Qe;Qe=oi?d3.select(Qe):ri,wt=typeof wt<"u"?wt:0,Qe.selectAll(".bar").each(function(ji,ki){ji&&vt<1&&(typeof Ve.fieldName<"u"&&typeof Ve.fieldValue<"u"&&Ve.fieldValue===(he&&a.settings.isStacked?ji[0][Ve.fieldName]:ji[Ve.fieldName])||typeof Ve.index<"u"&&Ve.index===ki||Ve.data&&Ut(Ve.data,p[wt].data[ki])||Ve.elem&&$(this).is(Ve.elem))&&(vt++,fn=d3.select(this),mn=ki,oi&&!a.settings.isStacked&&(us=!0))})};we||a.settings.isStacked&&!he&&!we?(p.forEach(function(fi,Qe){vt<1&&(ra=$(ri.select('[data-group-id="'.concat(Qe,'"]')).node()),(typeof Ve.groupName<"u"&&typeof Ve.groupValue<"u"&&Ve.groupValue===fi[Ve.groupName]||typeof Ve.groupIndex<"u"&&Ve.groupIndex===Qe||Ve.data&&Ut(Ve.data,fi)||Ve.elem&&ra.is(Ve.elem))&&typeof Ve.fieldName>"u"&&typeof Ve.fieldValue>"u"&&typeof Ve.index>"u"&&(vt++,fn=ri.select('[data-group-id="'.concat(Qe,'"]')).select(".bar"),mn=Qe,a.settings.isStacked&&!we&&(us=!0)))}),vt<1&&(Qe=ri.selectAll(".series-group")).nodes().length&&Qe.each(function(wt,oi){Ks(this,oi)})):Ks(),vt>0&&(Ge||!fn.classed("is-selected"))&&(us?Tn&&$(Ti.selectAll(".chart-legend-item")[0][mn]).trigger("click.chart"):d3.select(fn.node()).dispatch("click"))},this.setInitialSelected(),this.element.trigger("rendered"),this},setInitialSelected:function(){var d,h,p,v,e=this,t=/positive-negative/.test(e.settings.type),i=e.svg.node().parentNode.nextSibling,n=d3.select(i),a=n.node()&&n.classed("chart-legend"),o=!1,l=0,b=function(M){(M=M?d3.select(M):e.svg).selectAll(".bar").each(function(L,z){L&&(e.isSingle&&e.settings.isStacked?L[0]:L).selected&&l<1&&(l++,h=d3.select(this),d=z)})};if(t){var T=function(M){o=!0,d=M,l++};if(e.dataset[0].targetBarsSelected)T(0);else{var k={selected:0,i:-1};e.dataset[0].data.forEach(function(A,M){A.selected&&(k.selected++,k.i=M)}),k.selected>1&&(k.elem=e.svg.select(".target-bar.series-".concat(k.i)),T(k.elem.classed("positive")?1:2))}}o||!e.isGrouped&&(!e.settings.isStacked||e.isSingle||e.isGrouped)?b():(e.dataset.forEach(function(A,M){A.selected&&l<1&&(l++,h=e.svg.select('[data-group-id="'.concat(M,'"]')).select(".bar"),d=M,e.settings.isStacked&&!e.isSingle&&!e.isGrouped&&(v=!0))}),l<1&&function(){var M=e.svg.selectAll(".series-group");if(M.nodes().length){var L=function(_){return _.reduce(function(G,j){return j.selected?G+1:G},0)},z={groups:[],itemsInGroup:0};if(M.each(function(O,_){b(this),((p=Array.isArray(O))||null!=O&&O?.data&&Array.isArray(O?.data))&&(z.itemsInGroup=(p?O:O.data).length,l>0&&z.groups.push({i:_,totalSel:L(p?O:O.data)}))}),z.gLen=z.groups.length,!o&&(p&&z.gLen&&z.groups[0].totalSel>1||z.gLen===M.size()&&!p)){var q=z.groups.filter(function(O){return O?.totalSel>1}).length;o=p?!!q:!q,p&&(d=z.groups[0].i)}}}()),l>0&&(v||o?a&&(this.initialSelectCall=!0,$(n.node()).find(".chart-legend-item").eq(d).trigger("click.chart")):(this.initialSelectCall=!0,d3.select(h.node()).dispatch("click"))),this.initialSelectCall=!1},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},getSelected:function(){return ue.selected},setSelected:function(e,t){ue.setSelected(e,t,{svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1})},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout(function(){return t()},300):t()},doClickAction:function(e,t,i,n,a){var o=this,l=n&&d3.select(n).classed("target-bar"),d=n&&d3.select(n).classed("is-selected"),h=parseInt(d3.select(n.parentNode).attr("data-group-id"),10);if(l)for(var p=o.svg.selectAll(".bar").nodes(),v=p.length,b=0;b<v;b++)if(d3.select(p[b]).classed("is-selected")){d=!1;break}ue.setSelectedElement({task:d?"unselected":"selected",container:o.element,selector:n,isTrigger:!o.initialSelectCall&&!d,isTargetBar:l,triggerGroup:o.isGrouped,d:t,i,type:o.settings.type,dataset:o.dataset,isSingle:o.isSingle,isGrouped:o.isGrouped,isStacked:o.settings.isStacked,svg:o.svg,clickedLegend:!0===a}),d&&!o.initialSelectCall&&o.element.triggerHandler("selected",[d3.select(n).nodes(),{},o.isGrouped?h:i])},doDoubleClickAction:function(e,t,i){var o,n=this;if(this.settings.isGrouped){var l=d3.select(i.parentNode),d=parseInt(l?.attr("data-group-id"),10),h=[];l.selectAll(".bar").each(function(b,w){h.push({elem:this,data:b,index:w})}),o=[{groupElem:l.node(),groupIndex:d,groupItems:h}]}else if(n.isSingle&&n.settings.isStacked){var p,v=n.dataset&&null!==(p=n.dataset[0])&&void 0!==p&&p?.data&&n.dataset[0].data[t]?n.dataset[0].data[t]:e;o=[{data:v,index:t,elem:[i]}]}else n.settings.isStacked?(o=[],n.svg.selectAll(".series-group").each(function(){var b=d3.select(this).selectAll(".bar").nodes()[t];o.push({elem:b,data:d3.select(b).datum(),index:t})})):o=[{data:e,index:t,elem:i}];n.element.triggerHandler("dblclick",[o])},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build()},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".target-bartext, .bartext").off("end.".concat(self.namespace)),this.element.find(".bar, .target-bar").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),ue.removeTooltip(),this.element&&(this.element.empty().removeClass("column-chart"),$.removeData(this.element[0],Qi),$.removeData(this.element[0],"chart"))}};var xi="bar",ko={dataset:[],isStacked:!0,isNormalized:!1,isGrouped:!1,showLegend:!0,animate:!0,longText:!1,format:null,redrawOnResize:!0,tooltip:null,useLogScale:!1,ticks:null,selectable:!0,defaultTickCount:5,showLines:!0,labelFactor:1.27,wrapWidth:60,fitHeight:!0,emptyMessage:{title:B?B.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function es(s,e){this.settings=H.mergeSettings(s,e,ko),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(s),ue.destroy(s),this.init()}es.prototype={init:function(){return this.namespace=H.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.tickCountFlag=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var t,i,n,w,T,k,M,L,z,q,O,_,G,e=this,a=this,o=this.settings,l=this.element.parent(),d=this.element.closest(".is-personalizable").length>0,h=!!o.formatterString,p=function(it){return d3.format(a.settings.formatterString||",")(it)},v="bar-stacked"===o.type,b="bar-normalized"===o.type,A=[],j=[],X=o.tooltip,fe=0,he=30,Ne=l.width()<450,le=o.dataset;this.isRTL=B.isRTL(),this.dataset=le,this.allZeroValues(this.dataset)&&this.dataset.forEach(function(Ze){Ze.data.forEach(function(it){it.value=e.settings.defaultTickCount,e.tickCountFlag=!0})});var ge=window.innerWidth;this.viewport={xxsmall:ge<=380,xsmall:ge>=381&&ge<=450,small:ge>=451&&ge<=480,medium:ge>=481&&ge<=992,large:ge>992};var ce={top:20,left:30,right:30,bottom:1===le.length?5:30};if(o.isGrouped&&1===le.length&&(ce.bottom=30,fe=2),this.element.addClass("bar-chart"),o.isGrouped&&this.element.addClass("bar-chart-grouped"),o.isStacked&&this.element.addClass("bar-chart-stacked"),0===le.length)return a.element.emptymessage(o.emptyMessage),this;var Be,qe,Oe={},ot={atLeastOne:!1},He=["left","top","right","bottom"];if(o.axisLabels&&$.extend(!0,Oe,o.axisLabels),!$.isEmptyObject(Oe))for(Be=0,qe=He.length;Be<qe;Be++){var Ae=Oe[He[Be]];Ae&&"string"==typeof Ae&&""!==$.trim(Ae)&&(ot[He[Be]]=!0,ot.atLeastOne=!0)}var We=le.map(function(Ze){return{name:Ze.name,color:Ze.color,pattern:Ze.pattern,attributes:Ze.attributes}});this.ellipsis={use:!1,percentageWidth:25,threshold:12},this.viewport.xxsmall?(this.ellipsis.percentageWidth=37,this.ellipsis.threshold=10):this.viewport.xsmall?(this.ellipsis.percentageWidth=28,this.ellipsis.threshold=10):this.viewport.small&&(this.ellipsis.percentageWidth=35);var yt={y1:[],y2:[]};le=le.map(function(Ze,it){return Ze.data.map(function(at,ct){var ft=0;return 0===it?(yt.y1.push(at.value),yt.y2.push(0)):(ft=yt.y1[ct]+yt.y2[ct],yt.y1[ct]=at.value,yt.y2[ct]=ft),$.extend({},at,{y0:ft,y:at.value,x:ue.getLabel(at,a.viewport),color:at.color,pattern:at.pattern})})}),w=0,T="",le=le.map(function(Ze,it){if(!o.isStacked&&We[it]){var at=ue.getLabel(We[it],a.viewport),ct=at.length;T=ct>w?at:T,w=ct>w?ct:w}return Ze.map(function(ft){if(o.isStacked){var qt=ft.x.length;T=qt>w?ft.x:T,w=qt>w?qt:w}return $.extend({},ft,{x:ft.y,y:ft.x,x0:ft.y0,color:ft.color,pattern:ft.pattern})})});var Dt=H.getParentAvailableHeight(a.element[0]),zt=o.fitHeight?Dt:parseInt(l.height(),10),_t=zt-ce.top-ce.bottom-30,ti=1===(null===(t=le)||void 0===t?void 0:t?.length)&&!o.isGrouped,ci=parseInt(l.width(),10)-ce.left,di=zt-ce.bottom-(o.isStacked?0:15)-(ti?30:0),ut=ue.calculateTextRenderWidth(T);ut<200&&(ut+=26),ue.calculatePercentage(ut,ci)>55&&(ut=ue.getPercentage(ci,this.ellipsis.percentageWidth),this.ellipsis.use=!0),null!=o&&null!==(i=o?.axisLabels)&&void 0!==i&&i?.bottom&&""===We[0].name&&(di+=30),o.isStacked&&(di-=v||b?10:0);var Xe=o.isStacked?We:A,Lt=o.showLegend&&Xe.length>0&&Xe[0].attributes&&(null===(n=Xe[0].data)||void 0===n||!n?.attributes)?0:15;a.svg=d3.select(this.element[0]).append("svg").attr("width",ci+(ot.atLeastOne?20:0)).attr("height",di+(ot.atLeastOne?5:0)).append("g").attr("class","group").attr("aria-label","".concat(o.dataset[0].name?o.dataset[0].name:"Name Group")).attr("transform","translate(".concat(ut,",").concat(ce.top-(ot.atLeastOne?3:Lt),")")),"bar"===a.settings.type&&(a.svg.append("title"),a.svg.append("title").text("Bar Chart"));var Tt=d3.min(le,function(Ze){return d3.min(Ze,function(it){return o.isStacked?it.x+it.x0:it.x})}),Ji=d3.max(le,function(Ze){return d3.max(Ze,function(it){return o.isStacked?it.x+it.x0:it.x})});if(o.isStacked&&o.isNormalized){var yi=[];le.forEach(function(Ze){Ze.forEach(function(it,at){yi[at]=(void 0===yi[at]?0:yi[at])+it.x})}),le.forEach(function(Ze){Ze.forEach(function(it,at){var ct=yi[at]/100;it.x/=ct,it.x0/=ct})}),Ji=100}var Ai,Nt=ci-ut-ce.left;Ai=o.useLogScale?d3.scaleLog().domain([Tt>0?Tt:1,Ji]).range([1,Nt]).nice():d3.scaleLinear().domain([Tt<0?Tt:0,Ji]).range([0,Nt]).nice(),o.isStacked?(k=le[0].map(function(Ze){return Ze.y}),_=.32):(k=We.map(function(Ze){return Ze.name}),function(){for(var Ze,it=le.length-1;it>-1;it--)Ze=le[it].map(function(ct){return ct}),$.extend(!0,A,Ze),A=$.map(A,function(ct){return ct})}(),M=0,_=(z=_t/k.length)/(L=A.length),O=z-(q=L>1?z-.6*_:he),he=q/L,_=0);var Jn=d3.scaleBand().domain(k).rangeRound([0,_t]).padding(_,_),vn=d3.axisBottom().scale(Ai).tickSize(-_t);Ne&&vn.ticks(ut<100?5:3),o.isStacked&&o.isNormalized&&vn.tickFormat(function(Ze){return"".concat(Ze,"%")}),o.useLogScale&&(vn.ticks(10,",.1s"),!1===o.showLines&&vn.tickSize(0)),o.ticks&&!o.useLogScale&&(a.viewport.small?vn.ticks(o.ticks.smallNumber,o.ticks.format):a.viewport.medium?vn.ticks(o.ticks.mediumNumber,o.ticks.format):a.viewport.large&&vn.ticks(o.ticks.largeNumber,o.ticks.format));var ri=d3.axisLeft().scale(Jn).tickPadding(15).tickSize(0);a.svg.append("g").attr("class","axis x").attr("transform","translate(0,".concat(_t,")")).call(vn),a.svg.append("g").attr("class","axis y").call(ri);var Yn=a.svg.selectAll("g.group").data(le).enter().append("g").attr("class","series-group").attr("role","list").attr("title","".concat(o.type)).attr("tabindex",0).attr("data-group-id",function(Ze,it){return it});o.isGrouped=a.svg.selectAll(".series-group").nodes().length>1&&!o.isStacked||o.isGrouped&&1===le.length,o.isSingle=1===a.svg.selectAll(".series-group").nodes().length&&o.isStacked;var Cn=!1,rs=0,Fi=Yn.selectAll("rect").data(function(Ze,it){return Ze.forEach(function(at){at.index=it,o.isStacked||(at.gindex=M++)}),Ze}).enter();if(this.settings.isSingle&&(Fi=Fi.append("g").attr("role","listitem")),Fi.append("rect").call(function(Ze){Ze._groups.forEach(function(it){it.forEach(function(at){var ct=at.__data__;H.addAttributes($(at),ct,ct.attributes,"bar")})})}).attr("class",function(Ze,it){return"bar series-".concat(it)}).attr("aria-hidden",!0).style("fill",function(Ze,it){return o.isStacked?1===We.length?ue.chartColor(it,"bar-single",Ze):ue.chartColor(Ze.index,"bar",We[Ze.index]):ue.chartColor(it,"bar",A[it])}).attr("mask",function(Ze,it){return 1===le.length&&le[0][it].pattern?"url(#".concat(le[0][it].pattern,")"):o.isStacked&&We[Ze.index].pattern?"url(#".concat(We[Ze.index].pattern,")"):!o.isStacked&&A[it]&&A[it].pattern?"url(#".concat(A[it].pattern,")"):""}).attr("x",function(Ze){return o.useLogScale?0:o.isStacked&&!o.isSingle?Ai(Ze.x0)+1:Ai(0)+1}).attr("y",function(Ze){return o.isStacked?Jn(Ze.y):(z-q)/2+(Ze.gindex*he+Ze.gindex*fe)+Ze.index*O}).attr("height",function(){return o.isStacked?Jn.bandwidth():he}).attr("width",0).on("mouseenter.".concat(a.namespace),function(Ze,it){var ft,qt,Ei,at=this,ct=Fi.select("rect").nodes().indexOf(this),Vi=0,sa=[],hi="",xn=null,os=d3.select(this),ls=this.parentNode,Fn=d3.select(ls).datum(),As=Math.round(Fn.length/2),Ys=function(vt,Ut){return vt&&Ut?'<svg width="12" height="12"><rect mask="url(#'.concat(vt,')" height="12" width="12" /></svg>'):""},Ui=null;o.isGrouped&&((Ui={elem:d3.select(ls)}).data=Fn,Ui.items=Ui.elem.selectAll(".bar"),Ui.idx=parseInt(ls.getAttribute("data-group-id"),10));var js=function(){var vt=!o.isStacked&&Fn.length>6,Kt=$(".series-".concat(As),ls)[0],Ti=(de.isValidElement(xn)?xn===Ui.elem.node()?Kt:xn:o.isGrouped?Kt:os.node()).getBoundingClientRect(),Tn=$(window),mn=Ti.top+Tn.scrollTop(),fn=Ti.left+Tn.scrollLeft(),us=ue.tooltipSize(hi),ra=fn+Ti.width/2-us.width/2,Ks=vt?mn:mn-us.height-13;""!==hi&&(ue.tooltip&&ue.tooltip.length&&ue.tooltip[d?"addClass":"removeClass"]("is-personalizable"),ue.showTooltip(ra,Ks,hi,vt?"bottom":"top"))},ma=function(){"string"==typeof hi?hi=function(vt,Ut,Kt){if(typeof Kt>"u"||null===Kt?Kt=/{{(\w+)}}/g:"string"==typeof Kt&&(Kt=new RegExp(Kt,"g")),"string"==typeof vt&&Kt instanceof RegExp)for(var Ti=9999;Kt.test(vt)&&Ti>0;)vt=vt.replace(Kt,function(Tn,mn){return Ut(0,mn)}),Ti--;return vt}(hi,function(vt,Ut){var Kt=p(it[Ut]);return isNaN(Kt)?it[Ut]:Kt}):"number"==typeof hi&&(hi=hi.toString())},Es=function(vt){hi="";var Ut={elem:at,index:ct,data:it};o.isGrouped&&(Ut.groupElem=Ui.elem.node(),Ut.groupItems=Ui.items.nodes(),Ut.groupIndex=Ui.idx,Ut.groupData=Ui.data);var Kt=function(mn,fn){("string"==typeof mn||"number"==typeof mn)&&(hi=mn,xn=fn,ma())},Ti=!0;G=setInterval(function(){Ti&&(Ti=!1,vt(Kt,Ut)),""!==hi&&(clearInterval(G),js())},10)};if(1===le.length)hi="<p><b>".concat(it.y," </b>").concat(it.x,"</p>");else{if(hi='<div class="chart-swatch">',o.isStacked){var cs=Array.from(this.parentElement.children).indexOf(this);for(ft=0,qt=le.length;ft<qt;ft++){Vi=0,Ei=ue.chartColor(ft,"bar",We[ft]);for(var ds=0,Uh=le.length;ds<Uh;ds++)o.isNormalized?(Vi+=le[ds][cs].value,sa[ds]=le[ds][cs].value):(Vi+=le[ds][cs].x,sa[ds]=le[ds][cs].x);hi+='<div class="swatch-row">\n                  <div class="swatch-color">'.concat(Ys(We[ft].pattern,Ei),"</div>\n                  <span>").concat(We[ft].name,"</span>\n                  <b> ").concat(h?p(sa[ft]):"".concat(Math.round(sa[ft]/Vi*100),"%")," </b>\n                </div>")}}else for(ft=0,qt=Fn.length;ft<qt;ft++)Ei=ue.chartColor(ft,"bar",A[ft]),hi+='<div class="swatch-row">\n                    <div class="swatch-color">'.concat(Ys(A[ft].pattern,Ei),"</div>\n                  <span>").concat(Fn[ft].name,"</span><b>").concat(p(Fn[ft].value),"</b>\n                </div>");hi+="</div>"}if(Vi>0&&(hi='<span class="chart-tooltip-value"><b>'.concat(o.isStacked?sa[it.index]:it.value,'</b> Value</span><span class="chart-tooltip-total"><b>').concat(Math.round(Vi),"</b> ").concat(B.translate("Total"),"</span>").concat(hi)),X&&"function"==typeof X&&!j[ct])Es(X);else if(hi=j[ct]||X||hi||"",!j[ct]&&!1!==it.tooltip&&typeof it.tooltip<"u"&&null!==it.tooltip&&("function"==typeof it.tooltip?Es(it.tooltip):(hi=it.tooltip.toString(),ma(),j[ct]=hi)),"string"==typeof hi&&""!==hi&&js(),o.isStacked)for(ft=0,qt=le.length;ft<qt;ft++){Ei=ue.chartColor(ft,"bar",We[ft]);var tu=$("#svg-tooltip").find(".swatch-row").eq(ft);We[ft].pattern||tu.find("div").css("background-color",Ei),tu.find("rect").css("fill",Ei)}else for(ft=0,qt=Fn.length;ft<qt;ft++){Ei=ue.chartColor(ft,"bar",A[ft]);var Ve=$("#svg-tooltip").find(".swatch-row").eq(ft);A[ft].pattern||Ve.find("div").css("background-color",Ei),Ve.find("rect").css("fill",Ei)}}).on("mouseleave.".concat(a.namespace),function(){clearInterval(G),ue.hideTooltip()}).on("contextmenu.".concat(a.namespace),function(Ze,it){ue.triggerContextMenu(a.element,d3.select(this).nodes()[0],it,Ze)}).on("click.".concat(a.namespace),function(Ze,it){var at=Fi.select("rect").nodes().indexOf(this),ct=this;rs=setTimeout(function(){if(!Cn&&a.settings.selectable){var ft=Array.from(ct.parentElement.children).indexOf(ct);a.doClickAction(it,o.isStacked&&!o.isSingle||o.isGrouped?ft:at,ct)}Cn=!1},200)}).on("dblclick.".concat(a.namespace),function(Ze,it){clearTimeout(rs),Cn=!0;var ct=Fi.select("rect").nodes().indexOf(this),ft=Array.from(this.parentElement.children).indexOf(this);a.doDoubleClickAction(it,o.isStacked&&!o.isSingle?ft:ct,this)}),$(Fi._parents).each(function(Ze,it){var at=$(it),ct=Ze;at.attr("aria-label","".concat(o.dataset[Ze].name?o.dataset[Ze].name:"Name Label")),at.children(".bar").each(function(ft,qt){var Ei=o.dataset[ct].name;$(qt).attr("aria-label","".concat(o.dataset[ct].data[ft].value?"".concat(Ei," ").concat(o.dataset[ct].data[ft].value):"Name Label"))})}),a.settings.isSingle&&a.svg.selectAll(".series-group g").append("text").attr("class","audible").text(function(Ze,it){var at,ct;return"".concat(null===(at=o.dataset[0].data[it])||void 0===at?void 0:at?.name," ").concat(null===(ct=o.dataset[0].data[it])||void 0===ct?void 0:ct?.value)}).attr("x",function(Ze){return o.useLogScale?0:o.isStacked&&!o.isSingle?Ai(Ze.x0)+1:Ai(0)+1}).attr("y",function(Ze){return o.isStacked?Jn(Ze.y):(z-q)/2+(Ze.gindex*he+Ze.gindex*fe)+Ze.index*O}).lower(),a.element.off("dblclick.".concat(a.namespace)).on("dblclick.".concat(a.namespace),"*",function(Ze){Ze.stopImmediatePropagation()}),a.svg.selectAll(".axis.y text").attr("aria-hidden",!0).attr("x",function(){return a.isRTL?ot.atLeastOne?5:15:ot.atLeastOne?-5:-15}),a.svg.selectAll(".axis.x text").attr("aria-hidden",!0).attr("class",function(Ze){return Ze<0?"negative-value":"positive-value"}),a.isRTL&&(ue.isIE||ue.isIEEdge)&&(a.svg.selectAll("text").attr("transform","scale(-1, 1)"),a.svg.selectAll(".y.axis text").style("text-anchor","last")),ot.atLeastOne){var Ni=a.svg.append("g").attr("class","axis-labels"),On=ci-95,Oa=_t-60,et=$('html[class*="classic-"]').length>0,Yt=function(it){if(ot[it]){var at;a.svg.selectAll(".axis.y text")._groups[0].forEach(function(qt){qt.innerHTML.length>=5&&(at=!0)});var ct={top:"translate(".concat(On/2,",").concat(-4,")"),right:"translate(".concat(at?On+35:On+50,",").concat(_t/2,")rotate(90)"),bottom:"translate(".concat(On/2,",").concat(Oa+89,")"),left:"translate(".concat(at?-50:-35,",").concat(_t/2,")rotate(-90)")},ft={top:"rotate(0deg) scaleX(-1) translate(-".concat(On/2,"px, ").concat(-4,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(_t/2+5,"px, -").concat(On+(e.isRTL&&!at?45:28),"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(On/2,"px, ").concat(Oa+89,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(_t/2-5,"px, ").concat(e.isRTL&&!at?45:!et&&e.isRTL?60:55,"px)")};Ni.append("text").attr("class","axis-label-".concat(it)).attr("text-anchor","middle").attr("transform",a.isRTL?"":ct[it]).style("font-size","1.2em").style("transform",a.isRTL?ft[it]:"").text(Oe[it])}};for(Be=0,qe=He.length;Be<qe;Be++)Yt(He[Be])}if(Ne&&o.useLogScale){var kt=d3.selectAll(".x .tick text"),en=!1;kt.attr("class",function(Ze,it){var at=Math.round(kt.size()/2);it>=at&&!en&&Ze.toString().startsWith("1")&&(en=!0,at=Ze),0!==it&&it!==kt.size()-1&&(o.useLogScale?Ze!==at:it!==at)&&d3.select(this).remove()})}if(a.svg.selectAll(".x.axis .tick").attr("class",function(Ze){return"tick".concat(0===Ze?" tick0":"")}),this.setBarWidthToZero(),a.svg.selectAll(".bar").transition().duration(o.animate?600:0).attr("width",function(Ze){var it=Ai(Ze.x),at=Ai(0);return(isNaN(it)||!_n.isFinite(it))&&(it=0),(isNaN(at)||!_n.isFinite(at))&&(at=0),Math.abs(it-at)}).attr("x",function(Ze){return o.useLogScale?0:o.isStacked&&!o.isSingle?Ai(Ze.x0)+1:Ze.x<0?Ai(Ze.x)+1:Ai(0)+1}),o.svg=a.svg,o.showLegend){var En=o.isStacked?We:A;En=En.map(function(Ze){var it;return Ze.attributes&&!(null!==(it=Ze.data)&&void 0!==it&&it?.attributes)&&(Ze.data?Ze.data.attributes=Ze.attributes:Ze.data={attributes:Ze.attributes}),Ze}),ue.addLegend(En,o.type,o,this.element)}return ue.appendTooltip(),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setTextValues:function(){var e,t=this,i=null===(e=this.settings)||void 0===e?void 0:e?.dataset;if(i&&(!i||i.constructor===Array)){var o,n=this.element[0].querySelectorAll(".bar-chart .axis.y .tick text"),a={};this.ellipsis.use&&(a.maxWidth=this.element.width(),a.transX=(null===(o=this.svg)||void 0===o||null===(o=o?.node())||void 0===o||null===(o=o?.transform)||void 0===o||null===(o=o?.baseVal)||void 0===o||null===(o=o?.consolidate())||void 0===o||null===(o=o?.matrix)||void 0===o?void 0:o?.e)||1,a.customCss=function(){return{tooltip:{maxWidth:"".concat(a.maxWidth,"px")},arrow:{left:t.isRTL?"calc(100% - 20px)":"20px"}}});var l=function(h,p){var v;if(t.ellipsis.use){if("..."===(v=ue.trimText(h.name,t.ellipsis.threshold)).substr(-3)){var b=ue.calculateTextRenderWidth(h.name),w=ue.calculateTextRenderWidth(v),T=n[p].parentNode;if(!xe.browser.isIE11()){v=h.name,n[p].classList.add("hidden"),d3.select(T).append("foreignObject").attr("overflow","visible").attr("width","".concat(a.transX)).attr("height","16").attr("class","foreign-object tick-y".concat(p)).attr("x","-".concat(a.transX)).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml"></div>');var A=T.querySelector(".text.ellipsis");if(A){var M=document.createTextNode(h.name);A.appendChild(M)}}d3.select(T).on("mouseover.".concat(t.namespace),function(){var z,q,O,_,L=(z=T.getBoundingClientRect(),q=Math.ceil(b/a.maxWidth),O=((O=a.transX-w)<0?30:O)+20,_=((_=z.top)<0?30:_)-36,q>1&&(_-=.5*(q-1)*33),t.isRTL&&(O=z.left-b+a.transX),{x:O,y:_});ue.showTooltip(L.x,L.y,h.name,"top",a.customCss())}).on("mouseout.".concat(t.namespace),function(){return ue.hideTooltip()})}}else v=ue.getLabel(h,t.viewport);return v};this.settings.selectable||this.element.find(".bar").css("cursor","inherit"),i.forEach(this.settings.isGrouped?function(d,h){n[h].textContent=l(d,h)}:function(d){var h=Object.keys(d).map(function(v){return v});Object.keys(d).map(function(v){return d[v]}).forEach(function(v,b){v&&v.constructor===Array&&v.forEach(function(w,T){"attributes"!==h[b]&&void 0!==n[T]&&(n[T].textContent=l(w,T))})})})}},setInitialSelected:function(){var l,d,h,e=this,t=e.svg.node().parentNode.nextSibling,i=d3.select(t),n=i.node()&&i.classed("chart-legend"),a=!1,o=0,p=function(w){(w=w?d3.select(w):e.svg).selectAll(".bar").each(function(T,k){T&&T.selected&&o<1&&(o++,d=d3.select(this),l=k)})};e.settings.isGrouped||e.settings.isStacked&&!e.settings.isSingle?(e.settings.dataset.forEach(function(b,w){b.selected&&o<1&&(o++,d=e.svg.select('[data-group-id="'.concat(w,'"]')).select(".bar"),l=w,e.settings.isStacked&&!e.settings.isGrouped&&(h=!0))}),o<1&&function(){var w=e.svg.selectAll(".series-group");if(w.nodes().length){var T,k=function(q){return q.reduce(function(O,_){return _.selected?O+1:O},0)},A={groups:[],itemsInGroup:0};if(w.each(function(z,q){p(this),Array.isArray(z)&&(A.itemsInGroup=z.length,o>0&&A.groups.push({i:q,d:z,totalSel:k(z)}))}),A.gLen=A.groups.length,!a&&e.settings.isGrouped&&A.gLen===w.size()&&1===(null===(T=A.groups[0])||void 0===T?void 0:T?.totalSel)){a=!0;for(var M=0,L=A.groups[0].d;M<L;M++)if(A.groups[0].d[M].selected){l=M;break}}}}()):p(),o>0&&(h||a?n&&(this.initialSelectCall=!0,$(i.node()).find(".chart-legend-item").eq(l).trigger("click.chart")):(this.initialSelectCall=!0,d.dispatch("click"))),this.initialSelectCall=!1},setBarWidthToZero:function(){this.tickCountFlag&&($(".bar").css("width","0"),$(".bar").attr("width","0"))},allZeroValues:function(e){return e.every(function(t){return t.data.every(function(i){return 0===i.value})})},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize(),e.setBarWidthToZero()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize(),e.setBarWidthToZero()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated(),e.setBarWidthToZero()}),this},getSelected:function(){return ue.selected},setSelected:function(e,t){ue.setSelected(e,t,{svg:this.svg,chartData:this.settings.dataset,isStacked:this.settingsisStacked,isGrouped:this.settings.isGrouped,isSingle:this.settings.isSingle})},toggleSelected:function(e){this.setSelected(e,!0)},doClickAction:function(e,t,i){var n=this,a=this.settings,o=i&&d3.select(i).classed("is-selected"),l=parseInt(d3.select(i.parentNode).attr("data-group-id"),10);ue.setSelectedElement({task:o?"unselected":"selected",container:n.element,selector:i,isTrigger:!n.initialSelectCall&&!o,triggerGroup:a.isGrouped,d:e,i:t,type:a.type,dataset:a.dataset,isSingle:a.isSingle,isGrouped:a.isGrouped,isStacked:a.isStacked,svg:n.svg,clickedLegend:a.clickedLegend}),o&&!n.initialSelectCall&&n.element.triggerHandler("selected",[d3.select(i).nodes(),{},a.isGrouped?l:t])},doDoubleClickAction:function(e,t,i){var o,a=this.settings;if(a.isGrouped){var l=d3.select(i.parentNode),d=parseInt(l?.attr("data-group-id"),10),h=[];l.selectAll(".bar").each(function(p,v){h.push({elem:this,data:p,index:v})}),o=[{groupElem:l.node(),groupIndex:d,groupItems:h}]}else"bar-stacked"===a.type?(o=[],this.svg.selectAll(".series-group").each(function(){var p=d3.select(this).selectAll(".bar").nodes()[t];o.push({elem:p,data:d3.select(p).datum(),index:t})})):o=[{data:e,index:t,elem:i}];this.element.triggerHandler("dblclick",[o])},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout(function(){return t()},300):t()},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".group .series-group .bar").off(t(["mouseenter","mouseleave","click","dblclick","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),ue.removeTooltip(),this.element&&(this.element.empty().removeClass("bar-chart"),$.removeData(this.element[0],xi),$.removeData(this.element[0],"chart"))}};var dn="pie",So={dataset:[],isDonut:!1,redrawOnResize:!0,hideCenterLabel:!1,showLines:!0,showLinesMobile:!1,selectable:!0,lines:{show:"value",formatter:".0f"},showLegend:!0,legendPlacement:"right",forceLegendPopup:!1,legend:{show:"label (percent)",formatter:".0f"},showTooltips:!0,tooltip:{show:"label (value)",formatter:".0f"},showCenterTooltip:!1,fitHeight:!0,emptyMessage:{title:B?B.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function ws(s,e){this.settings=H.mergeSettings(s,e,So),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(s),ue.destroy(s),this.init()}ws.prototype={init:function(){return this.namespace=H.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.isFirefox="firefox"===xe.browser.name,0===this.settings.dataset.length?(this.element.emptymessage(this.settings.emptyMessage),this):(this.initialSelectCall=!1,this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this)},build:function(){var e=this,t=this.settings;this.element.data("emptymessage")&&t.dataset.length>0&&this.element.data("emptymessage").destroy(),e.svg=d3.select(this.element[0]).append("svg"),e.mainGroup=e.svg.append("g"),e.mainGroup.append("g").attr("class","slices"),e.mainGroup.append("g").attr("class","labels"),e.mainGroup.append("g").attr("class","lines"),this.element.addClass("chart-pie"),(t.showMobile||t.forceLegendPopup)&&(t.legendPlacement="bottom"),t.legendPlacement&&this.element.addClass("has-".concat(t.legendPlacement,"-legend"));var i=this.element.parents(".widget").hasClass("bordered"),n=parseInt(this.element.width(),10),a=this.element.height()<320?320:parseInt(this.element.height(),10),o={height:a,width:n};o.isSmallView=o.width-(i?2:0)<400;var l="bottom"===t.legendPlacement&&o.isSmallView&&!t.showMobile;l&&(this.element.closest(".widget-content").css({height:"","min-height":""}),a=parseInt(this.element.height(),10),o.height=a),!l&&t.fitHeight&&o.isSmallView&&(a=H.getParentAvailableHeight(e.element[0]),o.height=a),("label"===t.lines.show&&"bottom"===t.legendPlacement||"label"===t.lines.show&&"false"===t.showLegend)&&e.mainGroup.attr("transform","translate(".concat(.67777*o.width,", ").concat(o.height/2,")")),"right"===t.legendPlacement&&(o.width=.75*n),t.showMobile&&(o.height=.8*a,this.element.addClass("is-mobile"));var d=0;if(l){d=35,this.element.closest(".widget-content").css({height:"auto","min-height":"auto"});var h=o.height-(23+25*Math.round(t.dataset[0].data.length/2)),p=this.element.closest(".auto-height ");p.length>0&&!p.hasClass("has-bottom-legend")&&(h+=78),t.fitHeight&&(h-=H.getSiblingsHeight(e.element[0])),$(this.svg.node()).css({"min-height":h}),o.height=parseInt(this.element.height(),10)+d}o.radius=Math.min(o.width,o.height)/2,e.dims=o,e.pie=d3.pie().sort(null).value(function(M){return M.value}),e.arc=d3.arc().outerRadius(.75*o.radius).innerRadius(t.isDonut?.5*o.radius:0),e.outerArc=d3.arc().innerRadius(.75*o.radius).outerRadius(.75*o.radius+20),e.svg.attr("width","right"===t.legendPlacement?"75%":"100%").attr("height",t.showMobile?"80%":"100%"),e.mainGroup.attr("transform","translate(".concat(o.width/2,",").concat((o.height-d)/2,")")),o.isSmallView?(l||(e.svg.attr("height","".concat(o.height,"px")),this.element.css({height:"auto"})),t.fitHeight||(this.element.closest(".widget-content").css({height:""}),this.element.css({height:"auto"}))):"auto"===this.element[0].style.height&&this.element.css({height:""}),o.center={x:o.width/2,y:o.height/2},e.key=function(M){return M.data.name};var v=!t.dataset||0===t.dataset.length;this.chartData=v?[]:t.dataset[0].data,this.sum=d3.sum(this.chartData,function(M){return M.value});var b=this.chartData.map(function(M){return M.value/e.sum*100}),w=this.roundLargestRemainer(b);this.chartData=this.chartData.map(function(M,L){return M.percent=M.value/e.sum,M.percentRound=w[L],M});var T=0;if(this.chartData.map(function(M){T+=M.percentRound}),v||0===T||isNaN(T)){var k=Et.themeColors().palette;this.chartData.push({data:{},color:k.slate[30].value,name:"Empty-Pie",value:100,percent:1,percentRound:100})}if(e.updateData(e.chartData),(t.showTooltips||t.showCenterTooltip)&&ue.appendTooltip("is-pie"),t.showLegend){var A=e.chartData.map(function(M){var L=ue.formatToSettings(M,t.legend);return t.legendFormatter&&(L="".concat(M.name," (").concat(d3.format(t.legendFormatter)(M.value),")")),"Empty-Pie"===M.name&&(L=""),{name:L,display:"twocolumn",placement:t.legendPlacement,color:M.color,data:M}});this.series=A,t.svg=e.svg,ue.addLegend(A,"pie",t,this.element)}return this.setInitialSelected(),this.addCenterLabel(),this.element.trigger("rendered"),this},randomize:function(e){var t=this;this.chartData=this.chartData.map(function(a){return a.value=e?0:Math.random(),a}),this.sum=d3.sum(this.chartData,function(a){return a.value});var i=this.chartData.map(function(a){return a.value/t.sum*100}),n=this.roundLargestRemainer(i);return this.chartData=this.chartData.map(function(a,o){return a.percent=a.value/t.sum,a.percentRound=n[o],a}),this.chartData},addCenterLabel:function(){var e=this;if(e.settings.isDonut&&!e.settings.hideCenterLabel){var t=e.settings.dataset[0].centerLabel,i=e.svg.selectAll(".slices");if(i.append("text").attr("dy",".35em").style("text-anchor","middle").attr("class","chart-donut-text").html(t),ue.isIE&&!ue.isIEEdge)if(H.isHTML(t)){var n=i.select(".chart-donut-text"),a=document.createElement("text");a.innerHTML=t,Array.prototype.slice.call(a.childNodes).forEach(function(l){n.append("tspan").attr("style",l.getAttribute&&l.getAttribute("style")).attr("x",l.getAttribute&&l.getAttribute("x")).attr("dy",l.getAttribute&&l.getAttribute("dy")).text(l.textContent)})}else i.select(".chart-donut-text").text(t)}},updateData:function(e){var t,i,o,n=this,a=this.element.closest(".is-personalizable").length>0,l=!n.settings.dataset||0===n.settings.dataset.length,d=n.svg.select(".slices").selectAll("path.slice").data(n.pie(e),n.key),h={str:null,isTooltip:(null===(t=n.settings.tooltip)||void 0===t?void 0:t?.formatter)&&n.settings.tooltip.formatter!==So.tooltip.formatter,isLines:(null===(i=n.settings.lines)||void 0===i?void 0:i?.formatter)&&n.settings.lines.formatter!==So.lines.formatter};h.isTooltip?h.str=n.settings.tooltip.formatter:h.isLines&&(h.str=n.settings.lines.formatter);var p=function(O){var G,_=document.body;if(n.isFirefox&&0===n.settings.dotSize){var j=d3.select(O);j.attr("r",2),G=O.getBoundingClientRect(),j.attr("r",n.settings.dotSize)}else G=O.getBoundingClientRect();return{top:G.top+_.scrollTop,left:G.left+_.scrollLeft}};n.isRTL=B.isRTL();var b=!1,w=0;if(setTimeout(function(){var q;null!==(q=n.settings)&&void 0!==q&&q?.showCenterTooltip&&(n.element.find(".chart-donut-text").off("mouseenter.text").on("mouseenter.text",function(){var O,_=n.element.find(".slices").get(0),G=p(_),j=null===(O=n.settings.dataset[0])||void 0===O?void 0:O?.centerTooltip,X=G.left,fe=G.top+15;$(".is-pie").addClass("is-center"),ue.showTooltip(X,fe,j,"top")}),n.element.find(".chart-donut-text").off("mouseleave.text").on("mouseleave.text",function(){ue.hideTooltip(),$(".is-pie").removeClass("is-center")})),n.settings.attributes&&(H.addAttributes(n.element.find(".chart-donut-text"),n,n.settings.attributes,"text",!0),H.addAttributes(n.element.find(".slices"),n,n.settings.attributes,"slices",!0),H.addAttributes(n.element.find(".labels"),n,n.settings.attributes,"labels",!0),H.addAttributes(n.element.find(".labels").children(),n,n.settings.attributes,"label",!0),H.addAttributes(n.element.find(".lines"),n,n.settings.attributes,"lines",!0),H.addAttributes(n.element.find(".lines").children("polyline"),n,n.settings.attributes,"polyline",!0),H.addAttributes(n.element.find(".lines").children(".circles"),n,n.settings.attributes,"circle",!0))},100),n.element.off("dblclick.".concat(n.namespace)).on("dblclick.".concat(n.namespace),"*",function(q){q.stopImmediatePropagation()}),d.enter().insert("path").style("fill",function(q,O){return ue.chartColor(O,"pie",q.data)}).attr("class","slice").call(function(q){q._groups.forEach(function(O){O.forEach(function(_,G){var j=_.__data__,X="slice-".concat(G);H.addAttributes($(_),j,n.settings.attributes?n.settings.attributes:j.data.attributes,X,!0)})})}).on("contextmenu.".concat(n.namespace),function(q,O){ue.triggerContextMenu(n.element,d3.select(this).nodes()[0],O,q)}).on("click.".concat(n.namespace),function(q,O){var _=this;n.settings.selectable&&(w=setTimeout(function(){b||n.doClickAction(O,O.index,_,o),b=!1},200))}).on("dblclick.".concat(n.namespace),function(q,O){clearTimeout(w),b=!0,n.doDoubleClickAction(O,O.index,this,o)}).on("mouseenter.".concat(n.namespace),function(q,O){if(n.settings.showTooltips){var _=n.svg.selectAll("circle").nodes()[O.index],G=p(_),j=n.midAngle(O),X=j<=Math.PI/4&&j>=0||j>7*Math.PI/4,fe=j<=3*Math.PI/4&&j>=Math.PI/4,he=j<=5*Math.PI/4&&j>=3*Math.PI/4,we=j<=7*Math.PI/4&&j>=5*Math.PI/4,re="",le=ue.formatToSettings(O,n.settings.tooltip),Te={value:h.str&&!h.isTooltip?d3.format(h.str)(O.value):le,percent:h.str?d3.format(h.str)(O.data.percent):"".concat(isNaN(O.data.percentRound)?0:O.data.percentRound,"%")};-1===(re=(re=(re=(re=(re=O.data.tooltip||Te.value).replace("{{percent}}","".concat(Te.percent))).replace("{{value}}",O.value)).replace("%percent%","".concat(Te.percent))).replace("%value%",O.value)).indexOf("<b>")&&(re=(re=re.replace("(","<b>")).replace(")","</b>")),null!=o&&clearTimeout(o),o=setTimeout(function(){!function(){if(""!==re){var ce=ue.tooltipSize(re),Be=G.left,qe=G.top;ue.tooltip&&ue.tooltip.length&&(X||fe||he||we)&&ue.tooltip[a?"addClass":"removeClass"]("is-personalizable"),X&&ue.showTooltip(Be-=ce.width/2,qe-=ce.height-5,re,"top"),fe&&ue.showTooltip(Be,qe-=ce.height/2,re,"right"),he&&ue.showTooltip(Be-=ce.width/2,qe,re,"bottom"),we&&ue.showTooltip(Be-=ce.width-5,qe-=ce.height/2,re,"left")}}()},300)}}).on("mouseleave.".concat(n.namespace),function(){clearTimeout(o),ue.hideTooltip()}).merge(d).transition().duration(n.settings.animationSpeed).attrTween("d",function(q){this.current=this.current||q;var O=d3.interpolate(this.current,q);return this.current=O(0),function(_){return n.arc(O(_))}}),d.exit().remove(),!l){var T=n.element.parent().width()<520,k=n.settings.showLines;if(!n.settings.showLinesMobile&&k&&(k=!T),n.settings.dotSize=k?2:0,k){var M=n.svg.select(".labels").selectAll("text").data(n.pie(e),n.key);M.enter().append("text").attr("dy",".35em").text(function(q){return T?q.data.shortName:ue.formatToSettings(q,n.settings.lines)}).merge(M).transition().duration(n.settings.animationSpeed).attrTween("transform",function(q){this.current=this.current||q;var O=d3.interpolate(this.current,q);return this.current=O(0),function(_){var G=O(_),j=n.outerArc.centroid(G);return j[0]=n.dims.radius*(n.midAngle(G)<Math.PI?1:-1),j[0]-=n.midAngle(G)<Math.PI?20:-20,"translate(".concat(j,")")}}).styleTween("text-anchor",function(q){this.current=this.current||q;var O=d3.interpolate(this.current,q);return this.current=O(0),function(_){var G=O(_);return n.isRTL?n.midAngle(G)>Math.PI?"start":"end":n.midAngle(G)<Math.PI?"start":"end"}}),M.exit().remove();var L=n.svg.select(".lines").selectAll("polyline").data(n.pie(e),n.key);L.enter().append("polyline").merge(L).transition().duration(n.settings.animationSpeed).attrTween("points",function(q){this.current=this.current||q;var O=d3.interpolate(this.current,q);return this.current=O(0),function(_){var G=O(_),j=n.outerArc.centroid(G);return j[0]=.85*n.dims.radius*(n.midAngle(G)<Math.PI?1:-1),[n.outerArc.centroid(G),n.outerArc.centroid(G),j]}}),L.exit().remove()}var z=n.svg.select(".lines").selectAll("circle").data(n.pie(e),n.key);z.enter().append("circle").attr("class","circles").attr("r",n.settings.dotSize).merge(z).transition().duration(n.settings.animationSpeed).attrTween("transform",function(q){this.current=this.current||q;var O=d3.interpolate(this.current,q);return this.current=O(0),function(_){var G=O(_);return"translate(".concat(n.outerArc.centroid(G)," )")}}),z.exit().remove()}},setInitialSelected:function(){var i,e=this,t=0;this.svg.selectAll(".slice").each(function(n,a){!n||!n.data||n.data.selected&&t<1&&(t++,e.initialSelectCall=!0,(i=d3.select(this)).on("click.".concat(e.namespace)).call(i.node(),i.datum(),a))}),this.initialSelectCall=!1},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},getSelected:function(){return ue.selected},setSelected:function(e,t){var n,a,i=this,o=0,l=H.equals;this.svg.selectAll(".slice").each(function(d,h){!d||!d.data||o<1&&(typeof e.fieldName<"u"&&typeof e.fieldValue<"u"&&e.fieldValue===d.data[e.fieldName]||typeof e.index<"u"&&e.index===h||e.data&&l(e.data,i.chartData[h].data)||e.elem&&$(this).is(e.elem))&&(o++,n=d3.select(this),a=h)}),o>0&&(t||!n.classed("is-selected"))&&n.on("click.".concat(i.namespace)).call(n.node(),n.datum(),a)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout(function(){return t()},300):t()},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},roundLargestRemainer:function(e){for(var t=0,n=0,o=[],l=0;l<e.length;l++)t+=parseInt(e[l],10),o[l]=l;var d=100-t;o.sort(function(b,w){return n=e[b]-parseInt(e[b],10),e[w]-parseInt(e[w],10)-n}),e.sort(function(b,w){return n=b-parseInt(b,10),w-parseInt(w,10)-n});for(var h=0;h<e.length;h++)e[h]=h<d?parseInt(e[h],10)+1:parseInt(e[h],10);for(var p=[],v=0;v<e.length;v++)p[o[v]]=e[v];return p},doClickAction:function(e,t,i,n){var a=this;clearTimeout(n);var o=i&&d3.select(i).classed("is-selected");ue.setSelectedElement({task:o?"unselected":"selected",container:a.element,selector:i,isTrigger:!a.initialSelectCall&&!o,d:e.data,i:t,settings:a.settings,series:a.series,type:a.settings.type,dataset:a.settings.dataset,svg:a.svg}),o&&!a.initialSelectCall&&a.element.triggerHandler("selected",[d3.select(i).nodes(),{},t])},doDoubleClickAction:function(e,t,i,n){var a;clearTimeout(n);var l=this.settings.dataset,d=l&&null!==(a=l[0])&&void 0!==a&&a?.data?l[0].data[t]:e.data||e;d=d||{};var h=[{elem:d3.select(i).nodes(),data:d,index:t}];this.element.triggerHandler("dblclick",[h])},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".slice").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},midAngle:function(e){return e.startAngle+(e.endAngle-e.startAngle)/2},destroy:function(){this.teardown(),ue.removeTooltip(),this.element&&(this.element.empty().removeClass("pie-chart"),$.removeData(this.element[0],dn),$.removeData(this.element[0],"chart"))}};var gr="radar",hl={dataset:[],redrawOnResize:!0,margin:{top:0,right:0,bottom:0,left:0},levels:4,maxValue:0,labelFactor:1.27,wrapWidth:60,opacityArea:.2,dotRadius:3,opacityCircles:0,strokeWidth:1,selectable:!0,roundStrokes:!0,showCrosslines:!0,showAxisLabels:!0,colors:null,showTooltips:!0,tooltip:{show:"value",formatter:".0%"},axisFormatter:".0%",showLegend:!0,legendPlacement:"right",emptyMessage:{title:B?B.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function Ur(s,e){this.settings=H.mergeSettings(s,e,hl),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(s),this.init()}Ur.prototype={init:function(){return this.namespace=H.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.setupColors().build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.updateData(this.settings.dataset),this.setInitialSelected(),this},setupColors:function(){return(!this.settings.colors||this.useBuiltInColors)&&(this.settings.colors=ue.colorRange(),this.useBuiltInColors=!0),this},updateData:function(e){var t=this,i=this.settings,n=this.element.closest(".is-personalizable").length>0;if(this.element.addClass("chart-radar"),0!==e.length){var a=this.element.parent(),o={w:a.width(),h:a.height(),extra:.957};"right"===i.legendPlacement&&(o.w*=.75),(Et.uplift||Et.new)&&o.w>=420&&(o.extra-=.12),i.showLegend&&o.w<420&&!i.margin.bottom&&(o.h-=(420-o.w)*(o.w>405?5:o.w>390?3:o.w>350?.9:.5)),o.transform={x:o.w/2+(i.margin.left+i.margin.right)/2,y:o.h/2*o.extra+(i.margin.top+i.margin.bottom)/2};var h,p=d3.scaleOrdinal(i.colors),v=Math.max(i.maxValue,d3.max(e,function(le){return d3.max(le.data.map(function(Te){return Te.value}))})),b=e[0].data.map(function(le){return Te=le,469,ce="",o.w<=328?ce=Te.shortName||Te.abbrName||Te.name||"":o.w>=329&&o.w<=469?ce=Te.abbrName||Te.name||"":o.w>469&&(ce=Te.name||""),ce;var Te,ce}),T=2*Math.PI/b.length,k=Math.min(o.w/3,o.h/3)*o.extra,A=d3.scaleLinear().range([0,k]).domain([0,v]),M=this.element[0];d3.select(M).select("svg").remove();var L=d3.select(M).append("svg").attr("width",o.w+(i.margin.left+i.margin.right)).attr("height",o.h+(i.margin.top+i.margin.bottom)).attr("class","chart-radar");this.svg=L;var z=L.append("g").attr("transform","translate(".concat(o.transform.x,",").concat(o.transform.y,")"));if(i.opacityCircles>0){var q=z.append("defs").append("filter").attr("id","glow");q.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur");var O=q.append("feMerge");O.append("feMergeNode").attr("in","coloredBlur"),O.append("feMergeNode").attr("in","SourceGraphic")}var _=z.append("g").attr("class","chart-radar-axis-wrapper");_.selectAll(".levels").data(d3.range(1,i.levels+1).reverse()).enter().append("circle").attr("class","chart-radar-grid-circle").attr("r",function(le){return k/i.levels*le}).style("fill-opacity",i.opacityCircles).style("filter",i.opacityCircles>0?"url(#glow)":""),i.showAxisLabels&&_.selectAll(".axis-label").data(d3.range(1,i.levels+1).reverse()).enter().append("text").attr("class","axis-label").attr("x",4).attr("y",function(le){return-le*k/i.levels}).attr("dy","0.4em").style("font-size",Et.uplift||Et.new?"12px":"10px").attr("fill","#737373").text(function(le){var ge=Math.round(10*v)/10;return i.axisFormatter.indexOf("%")>-1?d3.format(i.axisFormatter)(ge*le/i.levels):d3.format(i.axisFormatter)(le/i.levels)});var G=_.selectAll(".axis").data(b).enter().append("g").attr("class","axis");i.showCrosslines&&G.append("line").attr("x1",0).attr("y1",0).attr("x2",function(le,Te){return A(1.05*v)*Math.cos(T*Te-Math.PI/2)}).attr("y2",function(le,Te){return A(1.05*v)*Math.sin(T*Te-Math.PI/2)}).attr("class","chart-radar-crossline").style("stroke-width","1px"),G.append("text").attr("class","legend").style("font-size",Et.uplift||Et.new?"14px":"12px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(le,Te){return A(v*i.labelFactor)*Math.cos(T*Te-Math.PI/2)}).attr("y",function(le,Te){return A(v*i.labelFactor)*Math.sin(T*Te-Math.PI/2)}).text(function(le){return le}),this.element[o.w<420?"addClass":"removeClass"]("is-small"),o.w>456&&L.selectAll(".chart-radar-axis-wrapper .axis .legend").each(function(){ue.wrap(d3.select(this),i.wrapWidth,i.labelFactor)});var j=d3.lineRadial().curve(d3.curveBasisClosed).radius(function(le){return A(le.value)}).angle(function(le,Te){return Te*T});i.roundStrokes&&j.curve(d3.curveCardinalClosed);var X=z.selectAll(".radarWrapper").data(e.map(function(le){return le.data})).enter().append("g").attr("class","chart-radar-wrapper"),he=!1,we=0;if(t.element.off("dblclick.".concat(t.namespace)).on("dblclick.".concat(t.namespace),"*",function(le){le.stopImmediatePropagation()}),X.append("path").attr("class","chart-radar-area").call(function(le){le._groups.forEach(function(Te){Te.forEach(function(ge,ce){var Be=e[ce];H.addAttributes($(ge),Be,Be.attributes,"area")})})}).attr("d",function(le){return j(le)}).style("fill",function(le,Te){return p(Te)}).style("fill-opacity",i.opacityArea).style("cursor",t.settings.selectable?"pointer":"inherit").on("contextmenu.".concat(t.namespace),function(le,Te){ue.triggerContextMenu(t.element,d3.select(this).nodes()[0],Te,le)}).on("click.".concat(t.namespace),function(le,Te){var ge=this;t.settings.selectable&&(we=setTimeout(function(){he||t.doClickAction(Te,$(ge).index(),ge,h,L),he=!1},200))}).on("dblclick.".concat(t.namespace),function(le,Te){clearTimeout(we),he=!0,t.doDoubleClickAction(Te,$(this).index(),this)}),X.append("path").attr("class","chart-radar-stroke").call(function(le){le._groups.forEach(function(Te){Te.forEach(function(ge,ce){var Be=e[ce];H.addAttributes($(ge),Be,Be.attributes,"stroke")})})}).attr("d",function(le){return j(le)}).style("stroke-width","".concat(i.strokeWidth,"px")).style("stroke",function(le,Te){return p(Te)}).style("cursor",t.settings.selectable?"pointer":"inherit").style("fill","none").style("filter",i.opacityCircles>0?"url(#glow)":""),X.selectAll(".chart-radar-circle").data(function(le){return le}).enter().append("circle").call(function(le){le._groups.forEach(function(Te){Te.forEach(function(ge){var ce=ge.__data__;H.addAttributes($(ge),ce,ce.attributes,"circle")})})}).attr("class","chart-radar-circle").attr("r",i.dotRadius).attr("cx",function(le,Te){return A(le.value)*Math.cos(T*Te-Math.PI/2)}).attr("cy",function(le,Te){return A(le.value)*Math.sin(T*Te-Math.PI/2)}).style("fill",function(){return p($(this.parentNode).index()-1)}).style("fill-opacity",.6),z.selectAll(".radar-circle-wrapper").data(e.map(function(le){return le.data})).enter().append("g").attr("class","radar-circle-wrapper").selectAll(".radar-invisible-circle").data(function(le){return le}).enter().append("circle").call(function(le){le._groups.forEach(function(Te){Te.forEach(function(ge){var ce=ge.__data__;H.addAttributes($(ge),ce,ce.attributes,"invisible-circle")})})}).attr("class","radar-invisible-circle").attr("r",1.5*i.dotRadius).attr("cx",function(le,Te){return A(le.value)*Math.cos(T*Te-Math.PI/2)}).attr("cy",function(le,Te){return A(le.value)*Math.sin(T*Te-Math.PI/2)}).style("fill","none").style("pointer-events","all").on("mouseenter.".concat(t.namespace),function(le,Te){if(i.showTooltips){var ge=$(this).offset(),ce=ue.formatToSettings(Te,i.tooltip);-1===ce.indexOf("<b>")&&(ce=(ce=ce.replace("(","<b>")).replace(")","</b>"));var Be=ue.tooltipSize(ce),qe=ge.left,Oe=ge.top;qe-=Be.width/2-6,Oe-=Be.height+6,null!=h&&clearTimeout(h),h=setTimeout(function(){ue.tooltip&&ue.tooltip.length&&ue.tooltip[n?"addClass":"removeClass"]("is-personalizable"),ue.showTooltip(qe,Oe,ce,"top")},300)}}).on("mouseleave.".concat(t.namespace),function(){clearTimeout(h),ue.hideTooltip()}).on("contextmenu.".concat(t.namespace),function(le,Te){ue.triggerContextMenu(t.element,d3.select(this).nodes()[0],Te,le)}),i.showTooltips&&ue.appendTooltip("is-pie"),i.showLegend){i.legendPlacement&&this.element.addClass("has-".concat(i.legendPlacement,"-legend"));var Ne=i.dataset.map(function(le,Te){var ge={name:le.name,display:"twocolumn",placement:i.legendPlacement,color:p(Te)};return le.attributes&&(ge.data={attributes:le.attributes}),ge});i.svg=t.svg,ue.addLegend(Ne,"pie",i,this.element)}}else t.element.emptymessage(i.emptyMessage)},setInitialSelected:function(){var e=this.settings;if(Array.isArray(e.dataset))for(var t=0,i=e.dataset.length;t<i;t++)if(e.dataset[t].selected){var n=this.svg.selectAll(".chart-radar-area").nodes(),a=d3.select(n[t]);this.svg.selectAll(".is-selected").classed("is-selected",!1),this.svg.selectAll(".is-not-selected").classed("is-not-selected",!1),this.svg.selectAll(".chart-radar-area").classed("is-not-selected",!0),a.classed("is-selected",!0).classed("is-not-selected",!1),a.style("fill-opacity",e.opacityArea);break}},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),function(){e.handleResize()}),this.element.on("resize.".concat(this.namespace),function(){e.handleResize()})),$("html").on("themechanged.".concat(this.namespace),function(){e.updated()}),this},getSelected:function(){return ue.selected},setSelected:function(e,t){var i,n=0,a=this;this.svg.selectAll(".chart-radar-area").each(function(o,l){var d=a.settings.dataset[l];!d||!d.data||n<1&&(typeof e.fieldName<"u"&&typeof e.fieldValue<"u"&&e.fieldValue===d[e.fieldName]||typeof e.index<"u"&&e.index===l||e.elem&&$(this).is(e.elem))&&(n++,i=d3.select(this))}),n>0&&(t||!i.classed("is-selected"))&&d3.select(i.node()).dispatch("click")},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},doClickAction:function(e,t,i,n,a){clearTimeout(n);var o=this.settings,l=d3.select(i),d=l.classed("is-selected");a.selectAll(".is-selected").classed("is-selected",!1),a.selectAll(".is-not-selected").classed("is-not-selected",!1),ue.clearSelected(o.dataset),d||(a.selectAll(".chart-radar-area").classed("is-not-selected",!0),l.classed("is-selected",!0).classed("is-not-selected",!1),l.style("fill-opacity",o.opacityArea),o.dataset[t].selected=!0);var h={elem:l.nodes(),data:e,index:t};this.element.triggerHandler(d?"deselected":"selected",h),ue.selected=d?[]:h},doDoubleClickAction:function(e,t,i){this.element.triggerHandler("dblclick",{elem:[i],data:e,index:t})},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),e&&e.dataset?(this.element.find(".chart-legend").remove(),this.settings.dataset=e.dataset,this.updateData(this.settings.dataset),this):(this.element.empty(),this.setupColors().build())},teardown:function(){var e=this,t=function(n){return"".concat(n.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".chart-radar-area").off(t(["click","contextmenu"])),this.element.find(".radar-invisible-circle").off(t(["mouseenter","mouseleave","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),ue.removeTooltip(),this.element&&(this.element.empty().removeClass("radar-chart"),$.removeData(this.element[0],gr),$.removeData(this.element[0],"radar"))}},$.fn.chart=function(s){var e=null;switch(this.empty(),s.type){case"targeted-achievement":case"completion":case"completion-target":if(e=this.data(s.type))return e.updated(s),this;var t=new Ue(this,s);this.data(je,t),this.data("chart",t),this.data(s.type,t);break;case"bullet":if(e=this.data(se))return e.updated(s),this;var i=new ke(this,s);this.data(se,i),this.data("chart",i);break;case"radar":if(e=this.data(gr))return e.updated(s),this;var n=new Ur(this,s);this.data(gr,n),this.data("chart",n);break;case"sparkline":if(e=this.data(Je))return e.updated(s),this;var a=new pt(this,s);this.data(Je,a),this.data("chart",a);break;case"sparkline-dots":if(s.isDots=!0,e=this.data(Je))return e.updated(s),this;var o=new pt(this,s);this.data(Je,o),this.data("chart",o);break;case"sparkline-peak":if(s.isPeakDot=!0,e=this.data(Je))return e.updated(s),this;var l=new pt(this,s);this.data(Je,l),this.data("chart",l);break;case"sparkline-dots-n-peak":if(s.isPeakDot=!0,s.isDots=!0,e=this.data(Je))return e.updated(s),this;var d=new pt(this,s);this.data(Je,d),this.data("chart",d);break;case"sparkline-minmax":if(s.isMinMax=!0,e=this.data(Je))return e.updated(s),this;var h=new pt(this,s);this.data(Je,h),this.data("chart",h);break;case"sparkline-medianrange":if(s.isMedianRange=!0,e=this.data(Je))return e.updated(s),this;var p=new pt(this,s);this.data(Je,p),this.data("chart",p);break;case"sparkline-medianrange-n-peak":if(s.isMedianRange=!0,s.isPeakDot=!0,e=this.data(Je))return e.updated(s),this;var v=new pt(this,s);this.data(Je,v),this.data("chart",v);break;case"line":if(e=this.data(Vt))return e.updated(s),this;var b=new It(this,s);this.data(Vt,b),this.data("chart",b);break;case"area":if(s.isArea=!0,e=this.data(Vt))return e.updated(s),this;var w=new It(this,s);this.data(Vt,w),this.data("chart",w);break;case"bubble":if(s.isBubble=!0,e=this.data(Vt))return e.updated(s),this;var T=new It(this,s);this.data(Vt,T),this.data("chart",T);break;case"scatterplot":if(s.isScatterPlot=!0,e=this.data(Vt))return e.updated(s),this;var k=new It(this,s);this.data(Vt,k),this.data("chart",k);break;case"column":case"column-grouped":case"positive-negative":case"column-positive-negative":if(e=this.data(Qi))return e.updated(s),this;var A=new Un(this,s);this.data(Qi,A),this.data("chart",A);break;case"column-stacked":if(s.isStacked=!0,e=this.data(Qi))return e.updated(s),this;var M=new Un(this,s);this.data(Qi,M),this.data("chart",M);break;case"bar":if(s.isStacked=!0,e=this.data(xi))return e.updated(s),this;var L=new es(this,s);this.data(xi,L),this.data("chart",L);break;case"bar-stacked":if(s.isStacked=!0,e=this.data(xi))return e.updated(s),this;var z=new es(this,s);this.data(xi,z),this.data("chart",z);break;case"bar-normalized":if(s.isNormalized=!0,e=this.data(xi))return e.updated(s),this;var q=new es(this,s);this.data(xi,q),this.data("chart",q);break;case"bar-grouped":if(s.isStacked=!1,s.isGrouped=!0,e=this.data(xi))return e.updated(s),this;var O=new es(this,s);this.data(xi,O),this.data("chart",O);break;case"pie":if(e=this.data(dn))return e.updated(s),this;var _=new ws(this,s);this.data(dn,_),this.data("chart",_);break;case"donut":if(s.isDonut=!0,e=this.data(dn))return e.updated(s),this;var G=new ws(this,s);this.data(dn,G),this.data("chart",G);break;default:e=null}return this};var Zt={isToday:function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},firstDayOfWeek:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.getDay(),a=new Date(e),o=n>=t||i?n-t:6-n;return a.setDate(e.getDate()-o),a.setHours(0,0,0,0),a},lastDayOfWeek:function(e){var i=this.firstDayOfWeek(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);return i.setDate(i.getDate()+6),i.setHours(23,59,59,999),i},dateDiff:function(s,e,t){return Math.round((e-s)/(36e5*(t?1:Math.abs((new Date).getTimezoneOffset()))))},monthDiff:function(s,e){var t;return t=12*(e.getFullYear()-s.getFullYear()),t-=s.getMonth(),(t+=e.getMonth())<=0?0:t},add:function(s,e,t){var i=null,n=s instanceof Date?new Date(s.toISOString()):new Date(s);return"days"===t&&(i=new Date(n.setDate(n.getDate()+e))),i},subtract:function(s,e,t){var i=null,n=s instanceof Date?new Date(s.toISOString()):new Date(s);return"days"===t&&(i=new Date(n.setDate(n.getDate()-e))),i},isDaylightSavingTime:function(s){var e=new Date(s.getFullYear(),0,1).getTimezoneOffset(),t=new Date(s.getFullYear(),6,1).getTimezoneOffset();return Math.max(e,t)!==s.getTimezoneOffset()},isWithinRange:function(s,e,t){return s<=t&&t<=e},hoursTo24:function(s,e){var t=e>=0;return 12===s&&t?0===e?0:s:s+12*(t?e:0)}},Oi={addCalculatedFields:function(e,t,i,n){var a=function(O,_){return B.formatDate(O,H.extend(!0,{locale:t.name},_))},o={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:t.name},l=function(O){var _=B.parseDate(O,o);return B.isIslamic(t.name)&&(_=new Date(_[0],_[1],_[2],_[3],_[4],_[5],_[6])),_},d=function(O){return B.translate(O,{locale:t.name,language:i})};e.color=this.getEventTypeColor(e,n),e.borderColor=this.getEventTypeBorderColor(e,n),e.duration=Math.abs(Zt.dateDiff(new Date(e.ends),new Date(e.starts),!1));var h=new Date,p=Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),v=new Date(e.starts),b=Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()),w="".concat(v.getDate(),"-").concat(v.getMonth()+1,"-").concat(v.getFullYear()),T="".concat(h.getDate(),"-").concat(h.getMonth()+1,"-").concat(h.getFullYear());e.durationUnits=d(e.duration>1?"Days":"Day"),e.daysUntil=e.starts?Zt.dateDiff(b,p):0;var O,_,k=(new Date(e.ends)-new Date(e.starts))/36e5;if(e.durationHours=k>0&&k<.5?1:Math.round(k),e.isDays=!0,p>b&&w!==T&&(e.daysUntil=1),void 0===e.isAllDay&&(e.isAllDay=!0),e.durationHours<24&&(e.isDays=!1,e.isAllDay=!1,e.durationUnits=d(e.durationHours>1?"Hours":"Hour")),"true"===e.isAllDay.toString()&&(e.duration=(O=new Date(e.starts),_=new Date(e.ends),Math.abs(Math.round((_-O)/864e5))||1),e.durationUnits=d(e.duration>1?"Days":"Day"),e.isDays=!0,delete e.durationHours),e.starts){var M=l(e.starts);e.startsLocale=a(M),B.isIslamic(t.name)&&(e.startsLocale=a(B.gregorianToUmalqura(M))),e.startsHourLocale=a(M,{date:"hour"}),e.startsHour=Array.isArray(M)?parseFloat(M[3]+M[4]/60):parseFloat(M.getHours()+M.getMinutes()/60)}if(e.ends){var L=l(e.ends);e.endsLocale=a(L),B.isIslamic(t.name)&&(e.endsLocale=a(B.gregorianToUmalqura(L))),e.endsHourLocale=a(L,{date:"hour"}),e.endsHour=Array.isArray(L)?parseFloat(L[3]+L[4]/60):parseFloat(L.getHours()+L.getMinutes()/60)}if(e.eventTypes=n,e.isAllDay=e.isAllDay.toString(),"false"===e.isAllDay.toString()&&delete e.isAllDay,!e.isAllDay&&e.durationHours>=24&&(e.isAllDay=!1,e.durationUnits=d("Hours"),e.isDays=!1,delete e.duration),e.starts&&e.ends){var z=this.timeDiffInSeconds(l(e.starts),l(e.ends));e.durationInTime=this.timeBySeconds(z)}else e.durationInTime&&delete e.durationInTime;return e},timeDiffInSeconds:function(e,t){var i=Math.abs(t.getTime()-e.getTime());return Math.ceil(i/1e3)},timeBySeconds:function(e){return e=Number(e),{days:Math.floor(e/86400),hours:Math.floor(e%86400/3600),minutes:Math.floor(e%3600/60),seconds:Math.floor(e%60)}},formateTimeString:function(e,t,i){if(e.durationInTime){var n=function(b){return B.translate(b,{locale:t.name,language:i})},a=e.durationInTime,o="";if(a.days){var l=n(a.days>1?"Days":"Day");o+="".concat(a.days," ").concat(l)}if(a.hours){var d=n(a.hours>1?"Hours":"Hour");a.days&&(o+="".concat(a.minutes||a.seconds?", ":" ".concat(n("And")," "))),o+="".concat(a.hours," ").concat(d)}if(a.minutes){var h=n(a.minutes>1?"Minutes":"Minute");(a.days||a.hours)&&(o+="".concat(a.seconds?", ":" ".concat(n("And")," "))),o+="".concat(a.minutes," ").concat(h)}if(a.seconds){var p=n(a.seconds>1?"Seconds":"Second");o+="".concat(a.days||a.hours||a.minutes?" ".concat(n("And")," "):""),o+="".concat(a.seconds," ").concat(p)}""!==o&&(e.duration="",e.durationUnits="",e.durationHours=o)}},getEventTypeColor:function(e,t){var i,n,a=["amber","amethyst","azure","emerald","graphite","ruby","slate","turquoise"],o="azure";if(!e.type&&!e.color)return o;var l=t.filter(function(b){return b.id===e.type});if(0===l.length)for(var d=0;d<t.length;d++)if(t[d].children&&(l=t[d].children.filter(function(b){return b.id===e.type})).length>0){l[0].color=t[d].color||"azure";break}if("#"===(null===(i=e.color)||void 0===i?void 0:i?.substr(0,1))&&void 0!==e.color)return e.color;if(void 0!==e.color&&e.color.indexOf("-")>-1){var h,p=null===(h=e.color)||void 0===h?void 0:h?.split("-");if(a.filter(function(b){return b===p[0]}).length>0){var v=.1*p[1];return.1*p[1]!=10&&(v="0".concat(v)),p[0]+v}}return-1===(null===(n=e.color)||void 0===n?void 0:n?.indexOf("-"))&&a.filter(function(b){var w;return(null===(w=e.color)||void 0===w?void 0:w?.indexOf(b))>-1}).length>0||void 0!==e.color&&1===l.length&&l[0].color!==e.color?e.color:(1===l.length&&(o=l[0].color||"azure"),o)},getEventTypeBorderColor:function(e,t){var i,n="",a=t.filter(function(o){return o.id===e.type});return void 0!==e.borderColor&&1===a.length&&a[0].borderColor!==e.borderColor&&(n=a[0].borderColor),"#"===(null===(i=e.borderColor)||void 0===i?void 0:i?.substr(0,1))&&void 0!==e.borderColor||void 0!==e.borderColor&&"#"!==e.borderColor.substr(0,1)?e.borderColor:(1===a.length&&(n=a[0].borderColor||a[0].color||"azure"),n)},cleanEventData:function(e,t,i,n,a,o,l){var d={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:n.name},h=function(z){return B.formatDate(z,d)},p=function(z,q){return B.parseDate(z,H.extend(!0,{locale:n.name},q))},v="on"===e.isAllDay||"true"===e.isAllDay||e.isAllDay,b=new Date(i),w=b,T=b;if(e.startsLocale&&e.endsLocale&&(w=new Date(p(e.startsLocale)),T=new Date(p(e.endsLocale))),"string"==typeof e.starts&&!e.startsLocale&&(w=new Date(e.starts)),"string"==typeof e.ends&&!e.endsLocale&&(T=new Date(e.ends)),B.isValidDate(w)||(w=b),B.isValidDate(T)||(T=b),v)w.setHours(0,0,0,0),e.starts=h(new Date(w)),T.setHours(23,59,59,999),e.ends=h(new Date(T)),e.duration=e.starts===e.ends?1:null,e.isAllDay=!0;else{if(w===T)T.setHours(T.getHours()+parseInt(e.durationHours,10)),e.ends=h("safari"===xe.browser.name?T:T.toISOString()),e.duration=null;else if(e.endsHourLocale&&e.startsHourLocale){var k=p(e.startsHourLocale,{date:"hour"}),A=p(e.endsHourLocale,{date:"hour"});w.setHours(k.getHours(),k.getMinutes(),k.getSeconds(),k.getMilliseconds()),T.setHours(A.getHours(),A.getMinutes(),A.getSeconds(),A.getMilliseconds()),"safari"===xe.browser.name?(e.starts=h(w),e.ends=h(T)):(e.starts=h(w.toISOString()),e.ends=h(T.toISOString())),e.duration=Zt.dateDiff(new Date(e.starts),new Date(e.ends))}else e.ends=h(new Date(T));e.starts=h(new Date(w)),e.isAllDay=!1}if(void 0===e.comments&&t&&(e.comments=B.translate("NoCommentsEntered",{locale:n.name,language:a}),e.noComments=!0),!e.subject&&t&&(e.subject=B.translate("NoTitle",{locale:n.name,language:a})),e.type||(e.type=l[0].id),void 0===e.id&&t){var M=0===o.length?0:parseInt(o[o.length-1].id,10);e.id=(M+1).toString()}"NewEvent"===e.title&&(e.title=B.translate("NewEvent",{locale:n.name,language:a}))}},Vu=["default","neutral","secondary","error","alert","good","info"],Df={audibleContent:void 0,clickable:!1,clickHandler:void 0,content:" ",disabled:!1,dismissible:!1,dismissHandler:void 0,href:void 0,id:void 0,parent:void 0,style:Vu[0],value:void 0};function Ao(s,e){var t;if(this.settings=H.mergeSettings(s,e,Df),s instanceof HTMLElement?s.querySelector(".tag-content")?t=s:((t=document.createElement("span")).className+="".concat(s.className),s.id&&s.id.length?(t.id=s.id,s.removeAttribute("id")):"string"==typeof this.settings.id&&this.settings.id.length&&(t.id=this.settings.id,delete this.settings.id),s.insertAdjacentElement("beforebegin",t),t.appendChild(s),t.classList.add("tag"),s.className="",s.classList.add("tag-content")):((t=document.createElement("span")).classList.add("tag"),this.settings&&this.settings.parent instanceof HTMLElement&&this.settings.parent.appendChild(t),"string"==typeof this.settings.id&&this.settings.id.length&&(t.id=this.settings.id,delete this.settings.id)),s){var i=s.querySelector(".audible");i&&t.insertAdjacentElement("afterbegin",i)}this.element=t,this.getSettingsFromElement(),this.init()}Ao.prototype={init:function(){this.render(),this.handleEvents()},get contentElement(){return this.element.querySelector(".tag-content")},render:function(){var e=this.element.classList,t=H.getArrayFromList(this.element.classList),i=this.settings.style;t.forEach(function(w){Vu.indexOf(w)>-1&&e.remove(w)}),-1===this.element.className.indexOf(i)&&"default"!==i&&e.add(i),this.settings.disabled&&e.add("is-disabled");var n="";this.settings.audibleContent&&(n='<span class="audible">'.concat(Fe.stripHTML(this.settings.audibleContent),"</span>"));var a="span",o="",l="",d="",h=this.settings.href&&this.settings.href.length;(h||this.originallyAnchor)&&(a="a",this.settings.disabled&&(d=' tabIndex="-1"')),h&&(o=' href="'.concat(this.settings.href,'"')),(this.settings.clickable||"function"==typeof this.settings.clickHandler)&&(e.add("is-linkable"),l='<button class="btn-linkable" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("caret-right"),'\n        <span class="audible">').concat(B.translate("Link"),"</span>\n      </button>"));var p=0===this.settings.content.length?this.contentElement.textContent:this.settings.content,v="<".concat(a,' class="tag-content"').concat(o).concat(d,">").concat(Fe.sanitizeHTML(p),"</").concat(a,">"),b="";this.settings.dismissible&&(e.add("is-dismissible"),b='<button class="btn-dismissible" focusable="false" tabindex="-1" type="button">\n        '.concat($.createIcon("close"),'\n        <span class="audible">').concat(B.translate("Close"),"</span>\n      </button>")),this.element.innerHTML="".concat(n).concat(v).concat(l).concat(b),$(this.element).hideFocus()},get dismissibleBtn(){return this.element.querySelector(".btn-dismissible")},getSettingsFromElement:function(){var e=this.element.className,t="";Vu.forEach(function(v){e.indexOf(v)>-1&&(t=v)}),t&&(this.settings.style=t),this.settings.disabled=this.disabled;var i=this.dismissibleBtn,n=this.element.className.indexOf("is-dismissible")>-1;(i||n)&&(this.settings.dismissible=!0);var a=this.element.querySelector("a"),o=this.element.className.indexOf("is-linkable")>-1,l=this.element.querySelector(".btn-linkable");if(a||o||l){this.originallyAnchor=!0;var d=a.getAttribute("href");d&&d.length&&(d=Fe.stripTags(d),this.settings.href=d)}(o||l)&&(this.settings.clickable=!0);var h=this.element.querySelector(".audible");h instanceof HTMLElement&&(this.settings.audibleContent=Fe.stripHTML(h.innerText));var p=this.contentElement;p&&(this.settings.content=Fe.sanitizeHTML(p.innerText))},remove:function(){var e=this.element,t=e.parentNode;this.settings.parentAPI&&(t=this.settings.parentAPI.element),$(t).triggerHandler("beforetagremove",[this]),this.destroy(),e.remove(),$(t).triggerHandler("aftertagremove",[this])},dismiss:function(e){if(!this.disabled){this.remove(e),"function"==typeof this.settings.dismissHandler&&this.settings.dismissHandler(this);var t=this.settings.parentAPI;t&&t.focusPreviousElement(this.element)}},get disabled(){return this.element.className.indexOf("is-disabled")>-1},disable:function(){this.disabled||("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=-1),this.settings.disabled=!0,this.element.classList.add("is-disabled"))},enable:function(){this.disabled&&("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=0),this.settings.disabled=!1,this.element.classList.remove("is-disabled"))},teardown:function(){var e=$(this.element);e.off(["focusin.tag","focusout.tag","keydown.tag","click.tag"].join(" "));var t=this.dismissibleBtn;t&&t.parentNode.removeChild(t);var i=e.data("hidefocus");return i&&"function"==typeof i.destroy&&i.destroy(),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,Df)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element,"tag")},handleEvents:function(){var e=this;$(this.element).on("focusin.tag",function(){e.element.classList.add("is-focused")}).on("focusout.tag",function(){e.element.classList.remove("is-focused")});var t=this;$(this.element).on("click.tag","a, .btn-linkable",function(i){var n;return"function"==typeof t.settings.clickHandler&&(n=t.settings.clickHandler(t)),!(!1===n||t.settings.href&&"#"===t.settings.href)||(i.preventDefault(),!1)}),this.settings.dismissible&&($(this.element).on("click.tag",".btn-dismissible",function(i){e.dismiss(i)}),$(this.element).on("keydown.tag","a",function(i){8===i.keyCode&&e.dismiss(i)}))}};var Cd="taglist",_g={tags:[]};function xd(s,e){var t=this;if(!(s instanceof HTMLElement))throw new Error("TagList base element must be defined");this.settings=H.mergeSettings(s,e,_g),this.element=s;var i=H.getArrayFromList(this.element.querySelectorAll(".tag"));i.length&&(this.settings.tags=[],i.forEach(function(n){t.settings.tags.push(new Ao(n))})),this.init()}xd.prototype={get length(){return this.tags.length},get elements(){return this.tags.map(function(s){return s.element})},init:function(){var e=this;this.tags=[],Array.isArray(this.settings.tags)&&this.settings.tags.forEach(function(t){e.add(t)}),this.render()},getTargetProp:function(){return"content"},add:function(e){var i,t=this;if(!e)throw new Error("No object was provided");if(Array.isArray(e)){var n=[];return e.forEach(function(a){n.push(t.add(a))}),n}if(Xl.isEmpty(e))throw new Error("Provided object has no unique keys to use for creation of a Tag.");return e instanceof Ao?(i=e,e.settings.parentAPI=this):(e.parent=this.element,e.parentAPI=this,i=new Ao(void 0,e)),-1===this.tags.indexOf(i)&&this.tags.push(i),i},remove:function(e,t){e instanceof Ao&&(e=e.settings);var n,i=this.getTargetProp(e),a=this.tags.filter(function(o){return o.settings[i]===e[i]||(n=o,!1)});return a.length<this.tags.length&&(this.tags=a),t&&n.remove(),n},removeAll:function(){this.tags.forEach(function(e){e.remove()}),this.tags=[]},render:function(){var e=this;this.tags.forEach(function(t){0===$(e.element).has(t.element).length?($(e.element).append(t.element),t.init()):t.render()}),this.element.classList[this.tags.length?"remove":"add"]("empty")},focusByIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.elements,n=t.length;e<0&&(e=0),e>n&&(e=n);var a=t[e],o=a.querySelector("a");return o&&o.focus(),a},focusPreviousElement:function(e){if(!(e instanceof HTMLElement))throw new Error("".concat(e," is not an HTMLElement"));var t=this.elements.indexOf(e);if(!(t>-1))throw new Error("".concat(e," does not exist within this TagList"));return this.focusByIndex(t-1)},updated:function(e){e&&(this.settings=H.mergeSettings(this.element,e,this.settings),Array.isArray(e.tags)&&(this.settings.tags=e.tags)),this.removeAll(),this.init()},destroy:function(){this.tags.forEach(function(t){t.remove()}),delete this.tags,$(this.element).data(Cd)&&$.removeData(this.element,Cd)}};var Cc="virtual-scroll",Uu={height:300,itemHeight:50,bufferSize:20,data:[],scrollTop:0,itemCount:0,itemTemplate:null,startIndex:0};function Td(s,e){this.settings=H.mergeSettings(s,e,Uu),this.element=$(s),this.init()}Td.prototype={init:function(){return this.container=this.element.find(".ids-virtual-scroll")[0],this.stringTemplate='<div class="ids-virtual-scroll-item">${productName}</div>',this.itemCount=this.settings.data.length,this.itemTemplate=this.settings.itemTemplate||this.itemTemplate,this.handleEvents(),this.applyHeight(),this.renderItems(!1),this},handleEvents:function(){var e=this;return this.timeout=null,this.scrollHandler=function(t){e.handleScroll(t)},this.container.addEventListener("scroll",this.scrollHandler,{passive:!0}),this},handleScroll:function(e){var t=this;this.timeout&&cancelAnimationFrame(this.timeout);var i=e.target;this.timeout=requestAnimationFrame(function(){t.scrollTop=i.scrollTop})},renderItems:function(e){var t=this;if(this.settings.data&&(e||0!==this.data.length)){var i=this.startIndex,n=this.startIndex+this.visibleItemCount();if(this.lastStart!==i||this.lastEnd!==n){this.lastStart=i,this.lastEnd=n;var a=this.settings.data.slice(i,n),o="";a.map(function(l,d){var h=t.itemTemplate(l,d);return o+=h,h}),this.itemContainer.style.transform="translateY(".concat(this.offsetY,"px)"),this.itemContainer.innerHTML=o,this.element.trigger("afterrendered",this,{elem:this,startIndex:i,endIndex:n})}}},applyHeight:function(){this.container.style.height="".concat(this.settings.height,"px"),this.container.querySelector(".ids-virtual-scroll-viewport").style.height="".concat(this.viewPortHeight,"px"),this.itemContainer=this.element.find(".contents")[0],this.itemContainer.style.transform="translateY(".concat(this.offsetY,"px)"),this.isTable=this.element.find(".ids-data-grid-container").length>0,this.isTable&&(this.element.find(".ids-virtual-scroll")[0].style.overflow="inherit")},visibleItemCount:function(){var e=Math.ceil(this.height/this.itemHeight)+2*this.bufferSize;return Math.min(Number(this.itemCount)-this.startIndex,e)},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,Uu)),this.unbind().init()},unbind:function(){this.container.removeEventListener("scroll",this.scrollHandler),$.removeData(this.element[0],Cc)},destroy:function(){this.unbind(),$.removeData(this.element[0],Cc)},set height(s){this.settings.height=s},get height(){return 0===this.data.length?0:this.settings.height},set itemHeight(s){this.settings.itemHeight=s},get itemHeight(){return this.settings.itemHeight},set bufferSize(s){this.settings.bufferSize=s},get bufferSize(){return this.settings.bufferSize||20},set scrollTop(s){this.container.scrollTop===s?(this.settings.scrollTop=s,this.renderItems(!1)):this.container.scrollTop=s},get scrollTop(){return this.settings.scrollTop||0},scrollTo:function(e){this.scrollTop=Number(e)*this.itemHeight},get viewPortHeight(){return Number(this.itemCount)*Number(this.itemHeight)},set itemCount(s){this.settings.itemCount=s},get itemCount(){return this.settings.itemCount},get offsetY(){return Number(this.startIndex)*Number(this.itemHeight)},get startIndex(){var s=Math.floor(Number(this.scrollTop)/Number(this.itemHeight))-Number(this.bufferSize);return Math.max(0,s)},itemTemplate:function(e){return this.injectTemplate(this.stringTemplate,e)},injectTemplate:function(e,t){return e.replace(/\${(.*?)}/g,function(i,n){return t[n]})},set data(s){if(s)return this.settings.data=s,this.itemCount=s.length,this.lastStart=null,this.lastEnd=null,this.scrollTop=0,this.applyHeight(),void this.renderItems(!0);this.settings.data=null},get data(){var s;return null==this||null===(s=null==this?void 0:this.settings)||void 0===s?void 0:s?.data}};var Nn="dropdown",Mf=["none","all","group"],If={closeOnSelect:!0,cssClass:null,dropdownIcon:"dropdown",extraListWrapper:!1,filterMode:"contains",virtualScroll:!1,maxSelected:void 0,moveSelected:"none",moveSelectedToTop:void 0,multiple:!1,noSearch:!1,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,showSearchUnderSelected:!1,source:void 0,sourceArguments:{},reload:"none",empty:!1,delay:300,maxWidth:null,placementOpts:null,onKeyDown:null,tagSettings:{},tagListMaxHeight:120,allTextString:null,selectedTextString:null,selectAllFilterOnly:!0,appendTo:'[role="main"]',attributes:null,width:void 0,widthTarget:void 0,noResultsTextString:"NoResultsFound",noMarginWrapper:!1};function fl(s,e){this.settings=H.mergeSettings(s,e,If),this.element=$(s),this.init()}fl.prototype={get value(){var e=this.settings.multiple;if("typeahead"===this.settings.reload)return e?this.selectedValues:this.element.val();for(var n,t=[],i=this.element[0].options,a=0;a<i.length;a++)(n=i[a]).selected&&t.push(n.value||n.text);return e||1!==t.length?t:t[0]},get overflowed(){if(!this.isMobile()||this.isMobile()&&!this.isOpen()){var s=this.pseudoElem.find("span").css("max-width","");if(Math.round(s.width())>Math.round(this.pseudoElem.width()))return s.css("max-width","100%"),!0}return!1},get isFocused(){var s=document.activeElement,e=this.pseudoElem.length&&this.pseudoElem.is($(s)),t=this.list&&this.list.length&&this.list[0].contains(s),i=this.tagListAPI&&this.tagListAPI.element.contains(s);return!!(e||t||i)},get isShortField(){return this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0},get selectedValues(){return this.selectedOptions.map(function(s){return s.value})},get selectedOptions(){return H.getArrayFromList(this.element[0].querySelectorAll("option")).filter(function(s){return s.selected})},init:function(){var e=this,t=this.element.attr("id");t=t?Fe.stripTags(t):"",this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.timer=null,this.filterTerm="",this.keydownFlag=!1,t||(t=H.uniqueId(this.element,"dropdown"),de.setAttribute(this.element[0],"id",t),de.setAttribute(this.element.parent().find("label").first()[0],"for",t)),("ios"===xe.os.name||"android"===xe.os.name)&&(this.settings.noSearch=!0),this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled");var i=this.element[0].classList;0===i.length&&(this.element[0].classList="dropdown");var o,n=i.contains("dropdown-xs")?"dropdown input-xs":i.contains("dropdown-sm")?"dropdown input-sm":i.contains("dropdown-lg")?"dropdown input-lg":"dropdown",a=this.element.attr("style");this.isHidden=a&&a.indexOf("display: none")>=0,this.isInlineLabel?o=this.inlineLabel.next(".dropdown-wrapper"):(o=this.element.parent(".dropdown-wrapper")).length||(o=this.element.next(".dropdown-wrapper")),this.wrapper=o,this.isWrapped=this.wrapper.length>0,this.isWrapped||(this.wrapper=$('<div class="dropdown-wrapper '.concat(this.settings.noMarginWrapper?"no-margin":"",'"></div>')).insertAfter(this.element)),this.isWrapped?(this.pseudoElem=this.wrapper.find(".".concat(n)),this.trigger=this.wrapper.find(".trigger")):this.pseudoElem=$("div#".concat(t,"-shdo")),i.contains("text-align-reverse")?n+=" text-align-reverse":i.contains("text-align-center")&&(n+=" text-align-center"),this.label=$('label[for="'.concat(Fe.stripTags(t),'"]')),this.pseudoElem.length?this.pseudoElem[0].setAttribute("class",n):this.pseudoElem=$('<div class="'.concat(n,'">')),!this.isWrapped&&!B.isRTL()&&this.pseudoElem.append($("<span></span>"));var d=de.getAttributes(this.element[0]),h=this.getDataAttributes(d,["data-validate"]);this.pseudoElem.attr(h.obj).attr({role:"combobox","aria-haspopup":"listbox","aria-autocomplete":"list","aria-expanded":"false"}),this.renderPseudoElemLabel(),this.settings.attributes&&H.addAttributes(this.pseudoElem,this,this.settings.attributes,"dropdown",!0),function p(O){var _=O.element.prop("disabled"),G=O.element.prop("readonly");_?O.disable():G?O.readonly():O.enable()}(this),this.isWrapped||this.wrapper.append(this.pseudoElem,this.trigger),this.icon=this.wrapper.find(".trigger").find(".icon"),this.icon.length||(this.icon=$.createIconElement({icon:this.settings.dropdownIcon||"dropdown"}),this.wrapper.append(this.icon)),this.element.prop("multiple")&&!this.settings.multiple&&(this.settings.multiple=!0),this.settings.multiple&&!this.element.prop("multiple")&&this.element.prop("multiple",!0),this.settings.showTags&&(this.settings.showSearchUnderSelected=!0,this.pseudoElem[0].classList.add("has-tags"),this.renderTagList());var v=this.element.attr("data-source");v&&"source"!==v&&(this.settings.source=v);var b=this.element.attr("data-maxselected");function w(O,_){switch(O){case!_||"true":return"all";case!!_&&"false":return"none";default:return Mf.indexOf(O)>-1?O:"none"}}b&&!isNaN(b)&&(this.settings.maxSelected=parseInt(b,10)),void 0!==this.settings.moveSelectedToTop&&(this.settings.moveSelected=this.settings.moveSelectedToTop);var T=this.element.attr("data-move-selected");this.settings.moveSelected=T?w(T,!0):w(this.settings.moveSelected),this.settings.reloadSourceOnOpen&&(this.settings.reload="open",delete this.settings.reloadSourceOnOpen);var k=this.element.attr("data-close-on-select");k&&!this.settings.closeOnSelect&&(this.settings.closeOnSelect="true"===k);var A=this.element.attr("data-no-search");A&&!this.settings.noSearch&&(this.settings.noSearch="true"===A);for(var M=["-xs","-sm","-mm","-md","-lg"],L=this.element.attr("class"),z=null,q=0;q<M.length;q++)L.match(z=M[q])&&this.pseudoElem.addClass("dropdown".concat(z));return this.dataset=[],this.listfilter=new yo({filterMode:this.settings.filterMode}),this.setListIcon(),this.setDisplayedValues(),this.setInitial(),this.setWidth(),setTimeout(function(){e.toggleTooltip()},0),this.element.triggerHandler("rendered"),this.handleEvents()},renderTagList:function(){var e=this;function t(o){e.settings.dismissHandler&&e.settings.dismissHandler(o);var l=e.selectedOptions.filter(function(d){return Fe.stripHTML(d.value)===o.settings.value});l.length&&e.deselect(l[0]),e.tagListAPI.element.classList[e.selectedOptions.length?"remove":"add"]("empty"),e.isOpen()&&e.updateList()}var i=this.toTagData();i.forEach(function(o){o.dismissHandler=t,e.settings.clickHandler&&(o.clickHandler=e.settings.clickHandler),e.isDisabled()&&(o.disabled=!0)});var n=this.pseudoElem.children("span")[0];n||(this.pseudoElem.append("<span></span>"),n=this.pseudoElem.children("span")[0]),this.tagListAPI?this.tagListAPI.updated({tags:i}):(this.tagListAPI=new xd(n,{tags:i}),n.classList.add("tag-list")),this.tagListAPI.element.classList[this.selectedOptions.length?"remove":"add"]("empty"),isNaN(this.settings.tagListMaxHeight)||(n.classList.add("scrollable"),n.style.maxHeight=i.length?"".concat(this.settings.tagListMaxHeight,"px"):""),this.pseudoElem[0].classList[n.scrollHeight>n.clientHeight?"add":"remove"]("has-scrollbar"),this.isOpen()&&this.position()},renderPseudoElemLabel:function(){var e,t=this.element.prev(),i=this.element.parent().find(".error-message .message-text"),n=null===(e=this.pseudoElem)||void 0===e?void 0:e?.hasClass("error"),a=i.text(),o="";this.selectedOptions.forEach(function(l){o.length&&(o+=", "),o+=$(l).text().trim()}),this.pseudoElem.attr({"aria-label":"".concat(t.text(),", ").concat(n?a:o)})},inputTimer:function(){if(this.inputTimeout)return!1;var e=this;return this.inputTimeout=setTimeout(function(){clearTimeout(e.inputTimeout),e.inputTimeout=null},200),!0},setWidth:function(){var e=this.element[0].style;e.width&&(this.pseudoElem[0].style.width=e.width),"absolute"===e.position&&(this.pseudoElem[0].style.position="absolute",this.pseudoElem[0].style.left=e.left,this.pseudoElem[0].style.top=e.top,this.pseudoElem[0].style.bottom=e.bottom,this.pseudoElem[0].style.right=e.right)},setItemIcon:function(e){if(!e.icon)return e.isIcon=!1,e.html="",void this.listIcon.items.push(e);"object"===rt(e.icon)&&(e.obj=e.icon,e.icon=e.icon.icon,e.obj.color?0===e.obj.color.indexOf("#")?e.specColor=e.obj.color:e.classList=" ".concat(e.obj.color):e.obj.class&&(0===e.obj.class.indexOf("#")?e.specColor=e.obj.class:e.classList=" ".concat(e.obj.class)),e.obj.colorOver?0===e.obj.colorOver.indexOf("#")?e.specColorOver=e.obj.colorOver:e.classListOver=" ".concat(e.obj.colorOver):e.obj.classOver&&(0===e.obj.classOver.indexOf("#")?e.specColorOver=e.obj.classOver:e.classListOver=" ".concat(e.obj.classOver))),e.isIcon=e.icon&&e.icon.length,e.classList&&e.classList.length&&(e.isClassList=!0),e.classListOver&&e.classListOver.length&&(e.isClassListOver=!0),"swatch"===e.icon?(e.isSwatch=!0,e.html='<span class="swatch '.concat(e.isClassList?e.classList:"",'"></span>')):e.html=$.createIcon({icon:e.isIcon?e.icon:"",class:"listoption-icon ".concat(e.isClassList?" ".concat(e.classList):"")}),this.listIcon.items.push(e)},setListIcon:function(){var e=this,t=!e.settings.multiple&&e.element.find("[data-icon]").length>0,i=t?this.element.find("option"):[];if(e.listIcon={hasIcons:t,items:[]},t){var n=0;i.each(function(o,l){var d=$(this).attr("data-icon"),h=null;if("string"==typeof d&&d.length&&"{}"!==d&&!((h=0!==d.indexOf("{")?d:$.fn.parseOptions(this,"data-icon"))instanceof Object&&""===h.icon)){e.setItemIcon({html:"",icon:h,value:l.value||null});var p=e.listIcon.items.filter(function(v){return(v.icon===h||v.icon===h.icon)&&v.value===l.value});(e.listIcon.items[o]&&e.listIcon.items[o].isIcon||p.length>0)&&n++}}),t=n>0}if(t){var a=$.createIconElement({icon:"",class:"listoption-icon"});e.pseudoElem.prepend(a),e.listIcon.pseudoElemIcon=a,e.listIcon.idx=-1}e.listIcon.hasIcons=t},toggleTooltip:function(){this.overflowed?this.setTooltip():this.tooltipApi&&this.removeTooltip()},setTooltip:function(){var e=this,t=$(this.element[0].selectedOptions),i=this.getOptionText(t);this.tooltipApi=this.pseudoElem.find("span").tooltip({content:Fe.escapeHTML(i),trigger:this.isMobile()?"immediate":"hover"}).on("blur.dropdowntooltip",function(){e.removeTooltip()}).data("tooltip")},removeTooltip:function(){this.tooltipApi&&(this.tooltipApi.element.off("blur.dropdowntooltip"),this.tooltipApi.destroy(),this.tooltipApi=null)},setItemIconOverColor:function(e){var t=this;if(t.listIcon.hasIcons){var i=e?e.find(".listoption-icon"):null;t.list.find("li").each(function(n){var a=$(this),o=a.find(".listoption-icon"),l=t.listIcon.items[n];l&&(a.is(".is-focused")&&l.isClassListOver&&o.removeClass(l.classListOver).addClass(l.classList),i&&a.is(e)&&l.isClassListOver&&(i.removeClass(l.classList),i.addClass(l.classListOver)))})}},updateItemIcon:function(e){var t=this;if(t.listIcon.hasIcons){var i=t.pseudoElem.find(".listoption-icon"),n=e.index(),a=t.listIcon.items[n],o=e[0],l=t.listIcon.items.filter(function(h){return h?.value===o?.value});if(i.each(function(h,p){return p.remove()}),0===l.length)return t.listIcon.pseudoElemIcon="",void(t.listIcon.idx=n);if(!a)return t.listIcon.pseudoElemIcon="",void(t.listIcon.idx=n);var d=$.createIconElement({icon:a.icon,class:["listoption-icon"]});t.pseudoElem.prepend(d),t.listIcon.pseudoElemIcon=d,a.isClassList&&d.addClass(a.classList)}},updateList:function(e){var t=this,i=this.settings,n=t.isMobile(),a=null!=t.list&&t.list.length>0,o="",l="",d=0,h=this.element.find("optgroup").length,p="",v=!0===this.settings.multiple,b="".concat(this.settings.moveSelected),w=!0===this.settings.showSelectAll,T={all:B.translate("All"),selected:B.translate("Selection"),labelText:t.isInlineLabel?t.inlineLabelText.text():this.label.text()};T.all="string"==typeof i.allTextString&&""!==i.allTextString?t.settings.allTextString:"".concat(T.all),T.selected="string"==typeof i.selectedTextString&&""!==i.selectedTextString?t.settings.selectedTextString:"".concat(T.selected);var k=this.settings.extraListWrapper?'<div class="dropdown-list-wrapper">':"",A=this.settings.extraListWrapper?"</div>":"",M=H.getAttribute(this,"id",this.settings.attributes),L="".concat(M?"".concat(M,"-"):"","dropdown-list"),z="".concat(M?"".concat(M,"-"):"","listbox"),q=' role="listbox"';this.element[0].classList.contains("text-align-reverse")?p=" text-align-reverse":this.element[0].classList.contains("text-align-center")&&(p=" text-align-center"),a?(this.list.attr("id",L),this.listUl.attr("id","".concat(z))):(o='<div class="dropdown-list'.concat(p).concat(n?" mobile":"").concat(this.settings.multiple?" multiple":"",'" id="').concat(L,'" ').concat(this.settings.multiple?'aria-multiselectable="true"':"",'>\n        <label for="dropdown-search" class="audible">').concat(B.translate(this.settings.noSearch?"PressDown":"TypeToFilter"),'</label>\n        <input type="text" class="dropdown-search').concat(p,'" ').concat(this.settings.noSearch?'aria-readonly="true"':"",' id="dropdown-search" autocomplete="off" />\n        <span class="trigger">').concat(n?$.createIcon({icon:"close",classes:["close"]}):$.createIcon({icon:this.settings.dropdownIcon||"dropdown"}),"</span>"),o+=this.settings.virtualScroll?'<div class="virtual-scroll-container">\n            <div class="ids-virtual-scroll">\n              <div class="ids-virtual-scroll-viewport">\n                <ul id="'.concat(z,'"').concat(q,' class="contents" aria-label="').concat(B.translate("Dropdown"),'"></ul>\n              </div>\n            </div>\n          </div>'):"".concat(k,'<ul id="').concat(z,'"').concat(q,' aria-label="').concat(B.translate("Dropdown"),'">'));var O=this.element.find("option"),_=this.element.find("optgroup"),G=function(Ne,le){return le.selected},j=[];"typeahead"===this.settings.reload&&(G=function(Ne,le){return!!t.selectedValues&&t.selectedValues.indexOf(le.value)>-1});var X=O.filter(G);if("typeahead"===this.settings.reload&&X.prop("selected",!0),v&&w&&O.length){var fe=O.not("[disabled], .hidden").length===X.not("[disabled], .hidden").length;l+='<li role="none" class="dropdown-select-all-list-item'.concat(fe?" is-selected":"",'">')+'<a role="option" href="#" id="dropdown-select-all-anchor" class="dropdown-select-all-anchor">'.concat(B.translate("SelectAll"),"</a>")+"</li>"}if("group"===b&&(_&&_.length?_.each(function(re,Ne){var le=X.filter(function(){return $.contains(Ne,this)});j.push(le)}):b="all"),"all"===b&&(O=O.not(X),X.length>0&&(l+=t.buildLiHeader(T.selected)),X.each(function(re){l+=t.buildLiOption(this,re,e),d++}),!h&&O.length>0&&(l+=t.buildLiHeader(T.all))),this.settings.virtualScroll?l="":O.each(function(re){var ce,Ne=re+d,le=$(this),Te=le.parent();Te.is("optgroup")&&_.length&&(ce=Te.index(),_.index(Te)>-1&&(_=_.not(Te),l+=t.buildLiHeader("".concat(Te.attr("label"))),"group"===b&&j[ce].each(function(Be){l+=t.buildLiOption(this,Be,e),d++}))),("none"===b||!le.is(":selected"))&&(l+=t.buildLiOption(this,Ne,e))}),a?(this.listUl.html(l),t.settings.attributes&&this.listUl.find(".dropdown-option a").each(function(re){var Ne=$(this);H.addAttributes(Ne,t,t.settings.attributes,"option-".concat(re),!0)})):(o+=this.settings.virtualScroll?"".concat(l,"</div>"):"".concat(l,"</ul>").concat(A,"</div>"),this.list=$(o),this.listUl=this.list.find("ul"),this.searchInput=this.list.find("#dropdown-search")),("ios"===xe.os.name||"android"===xe.os.name)&&this.searchInput.attr("readonly","readonly"),this.virtualScrollElem=this.listUl.closest(".virtual-scroll-container"),this.opts=O,this.listIcon.hasIcons&&""!==this.listIcon.pseudoElemIcon){this.list.addClass("has-icons");var we=this.listIcon.pseudoElemIcon.clone();we.addClass("listoption-icon"),we.appendTo(this.list)}h&&this.listUl.addClass("has-groups"),this.hasTooltips=this.listUl.find("[title]").length>0||this.element.find("[title]").length>0,this.isOpen()&&(this.position(),this.highlightOption(this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)").first()))},buildLiHeader:function(e){return'<li role="none" class="group-label" focusable="false">\n      '.concat(e,"\n    </li>")},buildLiOption:function(e,t,i){var n=this,a="",o=e.innerHTML,l=de.getAttributes(e),d=l.getNamedItem("value"),h=l.getNamedItem("title"),p=h?' title="'.concat(h.value,'"'):"",v=l.getNamedItem("data-badge"),b=l.getNamedItem("data-badge-color"),w="",T=e.selected?" is-selected":"",k=e.disabled?" is-disabled":"",A=e.className?" ".concat(e.className.value):"",M=A.indexOf("clear")>-1?' class="clear-selection"':"",L=' tabIndex="'.concat(t&&0===t?0:-1,'"'),q=" ".concat(n.getDataAttributes(l,["data-badge","data-badge-color","data-val","data-icon"]).str),O=(d&&"value"in d?d.value:o).replace(/"/g,"/quot/"),_="",G=n.listIcon.items.filter(function(X){return X.value===e.value});if(n.listIcon.hasIcons&&G.length>0&&(_=G[0].html)," "===q&&(q=""),v&&(w='<span class="badge '.concat(b?b.value:"azure07",'">').concat(v.value,"</span>")),A.indexOf("clear")>-1&&""===o&&(o=B.translate("ClearSelection")),i&&i.length>0){var j=n.getSearchRegex(i);o=o.replace(j,'<span class="dropdown-highlight">$1</span>').trim()}return n.listIcon.hasIcons&&n.listIcon.items[t]&&n.listIcon.items[t].isSwatch&&(A+=" is-swatch"),a+'<li class="dropdown-option'.concat(T).concat(k).concat(A,'" data-val="').concat(O,'" ').concat(q).concat(p,' role="none">\n      <a id="list-option-').concat(t,'" href="#" ').concat(M,' role="option" ').concat(T?'aria-selected="true"':'aria-selected="false"').concat(L,">").concat(_).concat(o).concat(w,"</a></li>")},setDisplayedValues:function(){var e=$(this.element[0].selectedOptions),t=this.getOptionText(e);if(e.hasClass("clear")&&(t=""),this.settings.showTags&&this.tagListAPI)this.renderTagList();else{if(this.settings.empty&&0===e.length){var i=this.pseudoElem.find("span").first();return de.html(i,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),i=$("#".concat(this.element.attr("id"))).next().find("span").first(),de.html(i,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),this.setPlaceholder(t),void this.scrollRelease(this.listUl)}var n=this.element.attr("maxlength");n&&(t=t.substr(0,n)),t=t.trim();var a=this.pseudoElem.find("span");a.length>0&&(a[0].innerHTML='<span class="audible">'.concat(this.label.text()," </span>").concat(Fe.escapeHTML(t))),this.settings.showSearchUnderSelected||this.setPlaceholder(t)}this.previousActiveDescendant=e.first().val(),this.renderPseudoElemLabel(),this.updateItemIcon(e),this.setBadge(e)},copyClass:function(e,t,i){e.hasClass(i)&&t.addClass(i)},setInitial:function(){this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.isHidden&&(this.pseudoElem.hide().prev("label").hide(),this.pseudoElem.next(".icon").hide())},setPlaceholder:function(e){if(this.placeholder=this.placeholder||{text:this.element.attr("placeholder")},this.placeholder.text){var t="string"!=typeof e||"string"==typeof e&&""===e;this.placeholder.elem=this.placeholder.elem||this.pseudoElem.find("span:not(.audible)"),this.placeholder.elem.attr("data-placeholder-text",t?this.placeholder.text:"")}else delete this.placeholder},ignoreKeys:function(e,t){var i=t.which;return t.altKey&&38===i||i>111&&i<124&&!this.settings.onKeyDown?(t.stopPropagation(),t.preventDefault(),!1):e.is(":disabled")||e.hasClass("is-readonly")?void 0:!t.ctrlKey||!this.settings.onKeyDown||!1!==this.settings.onKeyDown(t)||(t.stopPropagation(),t.preventDefault(),!1)},handleSearchEvents:function(){var e=this;this.filterTerm||(this.searchKeyMode=!1);var n,t=this.searchInput[0].value;"ie"===xe.browser.name&&"11"===xe.browser.version||(n=String.fromCodePoint(8)),("."===t||t===n)&&(this.searchInput[0].value=""),this.searchInput.on("keydown.".concat(Nn),function(a){var o=$(e);return e.handleKeyDown(o,a)}).on("input.".concat(Nn),function(a){e.isFiltering=!0,e.handleAutoComplete(a)})},filterList:function(e){var t,i=this,n=!1;this.settings.source&&"typeahead"===this.settings.reload&&(n=!0,this.callSource());var a=this,o=!1;null===(t=a.listUl)||void 0===t||t?.find(".no-results").remove();var h,l=$(".dropdown-option",this.listUl),d=$(".group-label",this.listUl);if(l.length&&this.list&&(!this.list||this.list.length)){e||(e="");var p=function(){if(h=!n&&e&&e.length?i.listfilter.filter(l,e):l,i.list.addClass("search-mode"),i.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),i.searchInput.removeAttr("aria-activedescendant"),i.unhighlightOptions(),h&&(h.length||e)){if(h.removeClass("hidden"),l.not(h).add(d).addClass("hidden"),i.filteredItems=l.filter(h),i.filteredItems.each(function(A){var M=$(this);M.children("a").attr("tabindex",0===A?"0":"-1"),o||(a.highlightOption(M),o=!0),a.highlightSearchTerm(M,e)}),d.each(function(){var A=$(this).nextUntil(".group-label, .selector").not(".hidden");(a.settings.showEmptyGroupHeaders||A.length)&&$(this).removeClass("hidden")}),0===h.length){var b='<li class="dropdown-option is-disabled is-placeholder no-results" role="presentation"><svg class="listoption-icon icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-search"></use></svg><span>'.concat(B.translate(i.settings.noResultsTextString),"</span></li>");a.listUl.append(b)}e="";var w=document.body.scrollHeight;window.scrollY+window.innerHeight>=w?a.position():a.shrinkTop(a)}else i.resetList()};if(this.settings.virtualScroll)return $(this.virtualScroller.element).one("afterrendered",function(){l=$(".dropdown-option",i.listUl),p()}),this.virtualScroller.data=this.listfilter.filter(this.opts,e),void(l=$(".dropdown-option",this.listUl));p()}},shrinkTop:function(e){if(e.list&&e.list[0].classList.contains("is-ontop")){var t=parseInt(e.list[0].offsetHeight,10),i=parseInt(e.searchInput[0].offsetHeight,10);e.list[0].style.top="".concat(e.wrapper[0].offsetParent.offsetTop+(t-i)+4,"px")}},resetList:function(){if(this.settings.source&&"typeahead"===this.settings.reload)return this.filterTerm="",this.searchKeyMode=!1,void this.callSource(null,!0);if(this.list&&(!this.list||this.list.length)){this.list.removeClass("search-mode");var e=this.listUl.find("li");e.removeAttr("style").each(function(){var t=$(this).children("a"),i=$(this),n=Fe.escapeHTML(t.text()),a=0!==i.children("a").find("svg").length?(new XMLSerializer).serializeToString(i.children("a").find("svg")[0]):"",o=i.children("a").find(".swatch");t[0]&&(t[0].innerHTML=(0!==o.length?o[0].outerHTML:"")+a+n)}),this.list[0].style.top=this.list.hasClass("is-ontop")?"".concat(this.pseudoElem.offset().top-this.list.height()+this.pseudoElem.outerHeight()-2,"px"):"",delete this.filteredItems,this.settings.multiple&&this.updateList(),this.settings.virtualScroll&&(this.virtualScroller.data=this.opts),e.removeClass("hidden"),this.position(),2===this.list.find("svg").length&&this.list.find("svg").last().remove()}},selectBlank:function(){var e=this.element.find("option").filter(function(){return!this.value||0===$.trim(this.value).length});e.length&&(e[0].selected=!0,e[0].setAttribute("selected",!0),this.element.triggerHandler("updated"),this.element.trigger("change").triggerHandler("selected"))},handleKeyDown:function(e,t){var h,i=this,n=this.element[0].selectedIndex||-1,a=this.element[0].options,o=t.which,l=this;if(!this.ignoreKeys(e,t))return!1;if(this.isLoading())return!0;if(l.settings.onKeyDown&&!1===l.settings.onKeyDown(t))return t.stopPropagation(),t.preventDefault(),!1;if(l.isOpen()){a=l.settings.virtualScroll?this.opts:this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)"),n=-1,$(a).each(function(M){($(this).is(".is-focused")||l.settings.virtualScroll&&$(this).is(":selected"))&&(n=M)});var v="mac"===xe.os.name;if((!v&&"Delete"===t.key||v&&"Backspace"===t.key||"Backspace"===t.key)&&this.settings.noSearch){var b=$(a[0]);this.highlightOption(b),"Backspace"===t.key&&(t.stopPropagation(),t.preventDefault())}}switch(o){case 37:case 8:case 46:if(!l.isOpen())return l.selectBlank(),t.stopPropagation(),t.preventDefault(),!1;break;case 9:return l.isOpen()?(1===l.filterTerm.length?l.selectStartsWith(l.filterTerm):!this.settings.multiple&&a.length&&n>-1&&l.selectOption(this.correctValue($(a[n]))),l.closeList("tab"),this.activate()):1===l.filterTerm.length&&l.selectStartsWith(l.filterTerm),!0;case 27:if(l.isOpen()){l.element.closest(".modal.is-visible").data("listclosed",!0);var w=l.pseudoElem?l.pseudoElem.parents("td"):null;return l.closeList("cancel"),l.activate(),w&&w.focus(),t.stopPropagation(),!1}break;case 32:case 13:if(l.isOpen()){if(32===o&&!0===l.searchKeyMode)break;if(t.preventDefault(),a.length&&n>-1){var T=$(a[n]);l.selectListItem(T)}}return t.stopPropagation(),!1;case 38:return!!t.shiftKey||(this.searchKeyMode=!1,this.keydownFlag=!0,n>0&&(h=$(a[n-1]),this.highlightOption(h),l.setItemIconOverColor(h),h.parent().find(".is-focused").removeClass("is-focused"),h.addClass("is-focused")),this.settings.virtualScroll&&$(this.virtualScroller.element).one("afterrendered",function(){i.highlightOption(h)}),t.stopPropagation(),t.preventDefault(),!1);case 40:return!!t.shiftKey||(this.searchKeyMode=!1,this.keydownFlag=!0,n<a.length-1&&(h=$(a[n+1]),this.highlightOption(h),l.setItemIconOverColor(h),h.parent().find(".is-focused").removeClass("is-focused"),h.addClass("is-focused")),this.settings.virtualScroll&&$(this.virtualScroller.element).one("afterrendered",function(){i.highlightOption(h)}),t.stopPropagation(),t.preventDefault(),!1);case 35:this.searchKeyMode=!1;var k=$(a[a.length-1]);return this.highlightOption(k),t.stopPropagation(),!1;case 36:this.searchKeyMode=!1;var A=$(a[0]);return this.highlightOption(A),t.stopPropagation(),!1}return l.isOpen()?!0===this.settings.noSearch&&!l.isControl(o)&&this.handleAutoComplete(t):!l.isControl(o)&&!this.settings.source&&!this.settings.noSearch&&(l.isFiltering=!0,l.filterTerm=$.actualChar(t),l.searchInput&&l.searchInput.length&&l.searchInput.val($.actualChar(t)),l.toggle()),this.searchKeyMode=!0,l.searchInput&&l.searchInput.attr("aria-activedescendant",""),!0},handlePseudoElemKeydown:function(e){var t=$(e.target),i=e.key;if(t.is(".is-readonly"))return!0;var n="Esc"===i||"Escape"===i;if(["Alt","Shift","Control","Meta"].indexOf(i)>-1||!this.ignoreKeys(t,e))return!1;if(this.settings.onKeyDown&&!1===this.settings.onKeyDown(e))return e.stopPropagation(),e.preventDefault(),!1;if(["ArrowDown","ArrowUp","Down","Up","Enter","Spacebar"," "].indexOf(i)>-1)return this.isOpen()||this.open(),this.settings.noSearch&&!e.ctrlKey&&this.handleKeyDown(t,e),!1;var d="mac"===xe.os.name;return!d&&"Delete"===i||d&&"Backspace"===i||"Backspace"===i&&this.settings.noSearch?(this.selectBlank(),"Backspace"===i&&(e.stopPropagation(),e.preventDefault()),!0):n||"Tab"===i?!(1===this.filterTerm.length||this.settings.noSearch&&this.isOpen())||this.handleKeyDown(t,e):(this.handleAutoComplete(e),!0)},handleAutoComplete:function(e){var t=this;if(!this.isLoading()){var i=this;if(this.timer&&clearTimeout(this.timer),"input"===e.type)this.filterTerm=i.settings.noSearch?this.searchInput.val().toLowerCase():this.searchInput.val();else{if(this.filterTerm+=$.actualChar(e).toLowerCase(),""===this.filterTerm)return;e.key!==this.filterTerm&&e.key.toLowerCase()===this.filterTerm&&!i.settings.noSearch&&(this.filterTerm=e.key)}this.timer=setTimeout(function(){var a,o;if(i.settings.noSearch&&""!==i.filterTerm)return i.isOpen()?i.highlightStartsWith(i.filterTerm):i.selectStartsWith(i.filterTerm),void(i.filterTerm="");(i.searchKeyMode=!0,i.isOpen()||""===i.filterTerm)?(0===(null===(a=t.list)||void 0===a?void 0:a?.find("ul li.hidden").length)&&(null===(o=t.list)||void 0===o||o?.find(" > svg.listoption-icon:not(.swatch)").changeIcon("icon-empty-circle")),n()):i.open(n)},i.settings.delay)}function n(){""===i.filterTerm?i.resetList():i.filterList(i.filterTerm.toLowerCase())}},isControl:function(e){return e>7&&e<48||e>90&&e<94||e>111&&e<146},activate:function(e){var t=this,i=this.pseudoElem;e&&(i=this.searchInput),this.currentlyScrolledPos&&(this.listUl.scrollTop(this.currentlyScrolledPos),delete this.currentlyScrolledPos),e&&i&&(i.hasClass("is-readonly")||!0===i.prop("readonly"))||(function n(){t.isMobile()||t.filterTerm||!i||(i[0].setSelectionRange?i[0].setSelectionRange(0,i[0].value.length):"INPUT"===i[0].tagName&&i[0].select())}(),i&&"INPUT"!==document.activeElement.tagName&&i[0].focus())},getSearchRegex:function(e){var t;try{t=new RegExp("(".concat(st.escapeRegExp(e),")"),"i")}catch{t=/[\s\S]*/i}return t},getOptionText:function(e){var t="";return e||(e=this.element.find("option:selected")),e.each(function(){t.length>0&&(t+="".concat(B.currentLocale.data.punctuation.comma," ")),t+=$(this).text().trim()}),t},open:function(e){var t=this;function i(){t.isMobile()&&$(".tooltip:not(.is-hidden)").hide(),t.updateList(),t.openList(),e&&"function"==typeof e&&e.call(this)}!this.inputTimer()||this.element.is(":disabled")||this.pseudoElem.hasClass("is-disabled")||this.pseudoElem.hasClass("is-readonly")||t.callSource(i)||i()},openList:function(){var a,e=this,t=this.list.find(this.previousActiveDescendant?'.dropdown-option[data-val="'.concat(this.previousActiveDescendant.replace(/"/g,"/quot/"),'"]'):".is-selected"),i=this;if(this.touchPrevented=!1,this.scrollLock(this.listUl),$("select").each(function(){var ge=$(this).data();ge.dropdown&&ge.dropdown.closeList("cancel")}),$(".popupmenu.is-open").filter(function(){return 0===$(this).parents(".popupmenu").length}).each(function(){var ge=$(this).data("trigger");if(ge&&ge.length){var ce=$(this).data("trigger").data("popupmenu");ce&&"function"==typeof ce.close&&ce.close()}}),this.isOpen()||this.list.appendTo("body"),this.list.show(),this.list.attr("data-element-id",this.element.attr("id")),this.isShortField&&this.list[0].classList.add("dropdown-short"),i.settings.attributes){H.addAttributes(this.list.find("input"),this,this.settings.attributes,"search",!0),this.list.find("label").attr("for",this.list.find("input").attr("id")),H.addAttributes(this.list.find("label"),this,this.settings.attributes,"search-label"),H.addAttributes(this.list.find(".trigger svg"),this,this.settings.attributes,"trigger",!0),H.addAttributes(this.listUl,this,this.settings.attributes,"listbox",!0),H.addAttributes(this.list,this,this.settings.attributes,"list"),this.list.find(".dropdown-option a").each(function(ge){var ce=$(this);H.addAttributes(ce,i,i.settings.attributes,"option-".concat(ge),!0)});var d=H.getAttribute(this,"id",this.settings.attributes);this.pseudoElem.attr("aria-controls",d?"".concat(d,"-listbox"):"dropdown-list"),this.pseudoElem.attr("aria-expanded")}if(this.pseudoElem.attr("aria-expanded","true").addClass("is-open"),this.searchInput.attr("aria-activedescendant",t.children("a").attr("id")),this.searchInput.prop("readonly",this.settings.noSearch),this.settings.showSearchUnderSelected&&this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.isInGrid=1===this.pseudoElem.closest(".datagrid-row").length,this.pseudoElem.parent().hasClass("is-inline")&&(this.isInGrid=!1),this.isInGrid){var h=this.pseudoElem.closest(".datagrid").attr("class").replace("datagrid","");this.list.addClass("datagrid-dropdown-list ".concat(h))}1===this.pseudoElem.closest(".datagrid-filter-wrapper").length&&this.list.addClass("datagrid-filter-dropdown");var p=this.settings.cssClass;if(p&&"string"==typeof p&&this.list.addClass(p),this.position(),this.list.hasClass("datagrid-filter-dropdown")&&null!==document.querySelector(".datagrid-container")){var v=document.querySelector(".datagrid-container").getBoundingClientRect();void 0!==this.dropdownParent&&(v=this.dropdownParent.closest(".datagrid-container").getBoundingClientRect());var b=document.querySelector(".datagrid-filter-dropdown").getBoundingClientRect(),T=document.querySelector(this.settings.appendTo).getBoundingClientRect().right-v.right,k=document.querySelector(".datagrid-filter-dropdown").getBoundingClientRect(),A=!1;B.isRTL()&&k.left+20<0&&(A=!0),k.right+20>(window.innerWidth||document.documentElement.clientWidth)&&(A=!0),v.right<b.right&&A&&(this.list[0].style.right="".concat(T,"px"),this.list[0].style.left=""),B.isRTL()&&b.left<0&&(this.list[0].style.left="".concat(v.left,"px"))}if(this.settings.virtualScroll){var M=-1,L=null;this.opts.toArray().filter(function(ge,ce){return ge.selected?(M=ce,L=ge,ge):null}),this.virtualScroller=new Td(this.virtualScrollElem,{height:304,itemHeight:32,itemTemplate:function(ce,Be){var qe=i.buildLiOption(Be,ce);return Be.selected&&(L=Be,t=$(L)),i.highlightSearchTerm($(qe),i.filterTerm)},data:this.opts}),setTimeout(function(){$(e.virtualScroller.element).on("afterrendered",function(){e.highlightOption($(L))}),e.virtualScroller.scrollTo(M)})}if(this.setListWidth(),(this.settings.maxWidth||this.settings.width)&&this.position(),"string"==typeof this.filterTerm&&this.filterTerm.length>0)this.searchInput.val(this.filterTerm);else if(!this.settings.showSearchUnderSelected){var z=$(this.selectedOptions),q=this.getOptionText(z);this.searchInput.val(q)}if(this.highlightOption(t,this.settings.multiple),this.settings.multiple&&this.listUl.find(".is-selected").length>0&&(this.highlightOption(this.listUl.find(".dropdown-option").eq(0)),setTimeout(function(){i.listUl.scrollTop(0)},0)),this.handleSearchEvents(),this.activate(!0),this.element.trigger("listopened"),this.isMobile()&&i.searchInput.on("keypress.dropdown",function(ge){13===ge.which&&i.closeList("select")}),i.list.removeClass("dropdown-tall").on("touchend.list click.list","li",function(ge){if(!i.touchPrevented){var ce=i.selectListItem($(this));ge.preventDefault(),ce&&ge.stopPropagation()}}).on("mouseenter.list","li",function(){i.keydownFlag?i.keydownFlag=!1:i.highlightOption($(this),!0)}),i.list.on("contextmenu.dropdown",function(ge){i.element.trigger("listcontextmenu",ge)}),this.hasTooltips){var _=function(){i.timer&&i.timer.destroy&&i.timer.destroy(!0)},G=function(ce,Be){$(ce).tooltip({trigger:"immediate",content:Be}),$(ce).focus()};i.list.on("mouseover.tooltip","li[title], li[data-title]",function(ge){var ce;ce=ge.currentTarget,_(),i.timer=new Li({duration:50,timeoutCallback:function(){var qe=ce.getAttribute("title");if(!qe)return qe=ce.getAttribute("data-title"),void G(ce,qe);ce.setAttribute("data-title",qe),ce.removeAttribute("title"),G(ce,qe)}}),_i.register(i.timer)}).on("mouseleave.tooltip, mousewheel.tooltip, click.tooltip","li[title], li[data-title]",function(ge){var Be;_(),$("#tooltip").hide(),null===(Be=$("#tooltip").data("tooltip"))||void 0===Be||Be?.destroy()})}function he(ge){var ce=$(ge.target);if(i.touchPrevented||i.isDropdownElement(ce)&&!ce.is(".icon"))return ge.preventDefault(),void(i.touchPrevented=!1);i.closeList("cancel")}this.scrollRelease(this.listUl),setTimeout(function(){i.list.addClass("is-closable")},100),$(document).on("touchstart.dropdown",function we(ge){i.touchPrevented=!1,a={x:ge.originalEvent.touches[0].pageX,y:ge.originalEvent.touches[0].pageY},$(document).on("touchmove.dropdown",function(ce){var Be_x=ce.originalEvent.touches[0].pageX,Be_y=ce.originalEvent.touches[0].pageY;(Be_x>=a.x+10||Be_x<=a.x-10||Be_y>=a.y+10||Be_y<=a.y-10)&&(i.touchPrevented=!0)})}).on("touchend.dropdown touchcancel.dropdown",function re(ge){if($(document).off("touchmove.dropdown"),ge.preventDefault(),i.touchPrevented)return ge.stopPropagation(),!1;he(ge)}).on("click.dropdown",he);var Ne=$(".modal.is-visible .modal-body-wrapper"),le=i.element.parents(".scrollable, .scrollable-x, .scrollable-y, .card-content");le.length&&le.get(0).scrollHeight>le.get(0).clientHeight&&(Ne=le),Ne.length&&(this.parentScrollableArea=Ne,this.parentScrollableArea.on("scroll.dropdown",function(ge){e.scrollDocument(ge)})),$("body").on("resize.dropdown",function(){i.position(),void 0===window.orientation&&i.closeList("cancel")}).on("keydown.dropdown",function(ge){var ce=$(ge.target);e.isOpen()&&!ce.hasClass("dropdown-search")&&!ce.hasClass("dropdown")&&e.handleKeyDown(ce,ge)}),void 0!==window.orientation&&$(window).on("orientationchange.dropdown",function(){i.closeList("cancel")})},isDropdownElement:function(e){return e.closest(".dropdown, .multiselect").length>0||e.closest(".dropdown-list").length>0||!0===self.touchmove},scrollDocument:function(e){var t=this,i=$("*:focus");t.touchPrevented||t.isDropdownElement($(e.target))||i.is(".timepicker")?t.touchPrevented=!1:t.closeList("cancel")},position:function(){var e=this,t={parentXAlignment:"left",placement:"bottom",strategies:["flip","shrink-y","nudge"]};this.list[0].removeAttribute("style"),this.listUl[0].removeAttribute("style");var n=this.pseudoElem;this.isInGrid&&(n=this.element.closest(".datagrid-cell-wrapper")),this.widthTargetEnabled&&(n=$(this.settings.widthTarget));var a=window.getComputedStyle(n[0]),o=2*parseInt(a.borderLeftWidth,10),l=Math.round(parseInt(n[0].clientWidth,10)+o);this.searchInput[0].style.cssText="width: ".concat(l,"px !important");var d=Math.round(this.list.width()),h=this.widthTargetEnabled||d<=l;if(this.searchInput[0].style.width="",t.parent=n,t.useParentWidth=h,!this.settings.showSearchUnderSelected){var p=window.devicePixelRatio>1,v="chrome"===xe.browser.name;t.y=-(parseInt(n[0].clientHeight,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)-(!v&&p?1:0)),t.x=0}e.settings.placementOpts&&e.settings.placementOpts.x&&(t.x=e.settings.placementOpts.x),this.setListWidth(),this.list.one("afterplace.dropdown",function i(b,w){e.list[!0===w.wasFlipped?"addClass":"removeClass"]("is-ontop"),e.settings.virtualScroll||e.listUl[!0===w.wasFlipped?"prependTo":"appendTo"](e.settings.extraListWrapper?e.list.find(".dropdown-list-wrapper"):e.list);var T=window.getComputedStyle(e.list[0]),k=T.top?parseInt(T.top,10):0,A=$("html").hasClass("is-chrome"),M=0;"firefox"===xe.browser.name&&(M=4);var G,L=parseInt(e.listUl[0].offsetHeight,10),z=parseInt(e.list[0].offsetHeight,10)+5,q=parseInt(e.searchInput[0].offsetHeight,10),O=parseInt(e.list[0].offsetTop,10)+parseInt(e.list[0].offsetHeight,10)>=window.innerHeight;return q<z-2*q&&L+q>=z&&(G="".concat(z-q-5,"px"),O&&(e.list[0].style.maxHeight="".concat(parseInt(z,10)-5,"px"))),w.wasFlipped&&(G="".concat(z-q-M-5,"px"),e.isShortField||(e.list[0].style.top="".concat(k,"px"))),G&&!e.settings.virtualScroll&&(e.listUl[0].style.maxHeight=G),void 0===G&&e.list[0].classList.contains("is-ontop")&&(G="".concat(z-q-M-7),e.list[0].style.top="".concat(k-G,"px")),!A&&"bottom"===w.placement&&(e.list[0].style.top="".concat(k-1,"px")),w}).place(t),this.list.data("place").place(t)},selectListItem:function(e){var t=e.closest("li");if(t.length&&(e=t),e.is(".separator, .group-label"))return!1;e.is(".dropdown-select-all-anchor")&&(e=e.parent());var i=e[0].querySelector("a");if(this.settings.multiple&&e[0].classList.contains("dropdown-select-all-list-item")){var n=!e[0].classList.contains("is-selected");return e[0].classList[n?"add":"remove"]("is-selected"),i.setAttribute("aria-selected",n?"true":"false"),this.selectAll(n),!0}var a=this.correctValue(e);if(a.is(":disabled"))return!1;if(this.selectOption(a),this.settings.closeOnSelect&&this.closeList("select"),this.isMobile())return!0;if(this.activate(!this.settings.closeOnSelect),this.settings.showSelectAll&&this.list){var o=this.element.find("option"),l=o.filter(":selected");o.length>l.length?this.list.find(".dropdown-select-all-list-item").removeClass("is-selected").attr("aria-selected","false"):this.list.find(".dropdown-select-all-list-item").addClass("is-selected").attr("aria-selected","true")}return!0},correctValue:function(e){var t=e.attr("data-val")||e.attr("value");if(!t)return e;t=t.replace(/"/g,"/quot/");var i=this.element.find('option[value="'.concat(t,'"]'));return(0===i.length||i.length>1)&&(i=this.element.find("option").filter(function(){var n=$(this),a=n.attr("value");return n.text()===t||a&&a.replace(/"/g,"/quot/")===t})),i},close:function(){return this.closeList("cancel")},closeList:function(e){!this.list||!this.list.is(":visible")||!this.isListClosable()||this.inputTimer()&&(this.list.off("contextmenu.dropdown"),this.touchmove&&(this.touchmove=!1),this.filterTerm="",this.searchKeyMode=!1,this.setDisplayedValues(),delete this.filteredItems,this.tagListAPI&&this.scrollTagList(),this.searchInput.off(["input.".concat(Nn),"keydown.".concat(Nn)].join(" ")),this.list.off(["click.".concat(Nn),"touchmove.".concat(Nn),"touchend.".concat(Nn),"touchcancel.".concat(Nn),"mousewheel.".concat(Nn),"mouseenter.".concat(Nn)].join(" ")).remove(),this.pseudoElem.removeClass("is-open").attr("aria-expanded","false"),this.searchInput.removeAttr("aria-activedescendant"),$(document).off(["click.".concat(Nn),"scroll.".concat(Nn),"touchstart.".concat(Nn),"touchmove.".concat(Nn),"touchend.".concat(Nn),"touchcancel.".concat(Nn)].join(" ")),this.parentScrollableArea&&(this.parentScrollableArea.off("scroll.dropdown"),delete this.parentScrollableArea),$("body").off("resize.dropdown"),$(window).off("orientationchange.dropdown"),this.element.trigger("listclosed",e),"click"!==e&&this.activate(),this.toggleTooltip(),this.list=null,this.searchInput=null,this.listUl=null)},get widthTargetEnabled(){return"parent"===this.settings.width&&"string"==typeof this.settings.widthTarget},setListWidth:function(){if(this.settings.maxWidth){var e="number"==typeof this.settings.maxWidth?"".concat(this.settings.maxWidth,"px"):"auto";this.list.css("max-width",e)}if(this.settings.width){var t="number"==typeof this.settings.width?"".concat(this.settings.width,"px"):"auto";if(this.widthTargetEnabled){var i=document.querySelector(this.settings.widthTarget);i&&(t="".concat(i.clientWidth,"px"))}this.list.css("width",t)}},scrollToOption:function(e){e&&0!==e.length&&(this.scrollLock(this.listUl),this.settings.virtualScroll?(e[0].closest(".ids-virtual-scroll").scrollTop=e[0].offsetTop-e[0].closest(".ids-virtual-scroll").offsetTop,e[0].scrollIntoView({block:"center"})):e[0].parentNode.scrollTop=e[0].offsetTop-e[0].parentNode.offsetTop,e.focus(),this.searchInput.focus(),this.scrollRelease(this.listUl))},scrollLock:function(){var e;null===(e=this.parentScrollableArea)||void 0===e||e?.off("scroll.dropdown")},scrollRelease:function(){var e=this;setTimeout(function(){var t;null===(t=e.parentScrollableArea)||void 0===t||t?.off("scroll.dropdown").on("scroll.dropdown",function(i){e.scrollDocument(i)})},"ios"===xe.os.name?800:400)},scrollTagList:function(){var e=this;this.tagListAPI&&setTimeout(function(){e.isFocused||(e.tagListAPI.element.scrollTop=0)},5)},handleBlur:function(){return this.closeList("cancel"),!0},isLoading:function(){return this.element.is(".is-loading")&&this.element.is(".is-blocked")},isOpen:function(){return!!this.pseudoElem.hasClass("is-open")},toggle:function(){this.isOpen()||this.isLoading()?this.closeList("cancel"):this.open()},toggleList:function(){return ms(this.toggle,this.toggleList).apply(this)},highlightOption:function(e,t){var i;this.isOpen()&&e&&(0===e.length&&(e=this.list.find(".dropdown-option").eq(0)),!e.is(".separator, .group-label"))&&(e.is("option")?e=this.listUl.find('li[data-val="'.concat((i=e).val(),'"]')):i=this.element.find("option").filter(function(n,a){return a.value===e.attr("data-val")}),this.setItemIconOverColor(),this.list.find(".is-focused").removeClass("is-focused").children("a").attr({tabindex:"-1"}),e.length&&i.length&&!i.hasClass(".is-disabled")&&!i.is(":disabled")&&(this.searchInput.attr("aria-activedescendant",e.children("a").attr("id")),this.setItemIconOverColor(e),e.addClass("is-focused").children("a").attr({tabindex:"0"}),(!t||!1===t||void 0===t)&&this.scrollToOption(e)))},highlightSearchTerm:function(e,t){if(!e)return"";if(!t)return e[0].outerHTML;var i=e.children("a"),n=this.getSearchRegex(t),a=e.text();a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=Fe.escapeHTML(a)).replace(/&lt;/g,"&#16;")).replace(/&gt;/g,"&#17;")).replace(/&apos;/g,"&#18;")).replace(/&quot;/g,"&#19;")).replace(/&amp;/g,"&")).replace(n,'<span class="dropdown-highlight">$1</span>').trim()).replace(/&#16;/g,"&lt;")).replace(/&#17;/g,"&gt;")).replace(/&#18;/g,"&apos;")).replace(/&#19;/g,"&quot;");var o=0!==e.children("a").find("svg").length?(new XMLSerializer).serializeToString(e.children("a").find("svg")[0]):"",l=e.children("a").find(".swatch");return i[0]&&(i[0].innerHTML=(0!==l.length?l[0].outerHTML:"")+o+a),e[0].outerHTML},unhighlightOptions:function(e,t){(!e||!e.length)&&(e=this.list.find(".is-selected")),this.setItemIconOverColor(),e.removeClass("is-focused").children("a").attr({tabindex:"-1"}),this.searchInput.removeAttr("aria-activedescendant"),(!t||!1===t||void 0===t)&&this.scrollToOption(e.first())},renderListItem:function(e){var t,i=e.value;i=null===(t=i)||void 0===t?void 0:t?.replace(/"/g,"/quot/");var n=e.selected,a=this.listUl.find('li[data-val="'.concat(i,'"]')),o=a.children("a");if(a){if(n)return a[0].classList.add("is-selected"),void o[0].setAttribute("aria-selected","true");a[0].classList.remove("is-selected"),o[0].setAttribute("aria-selected","false")}},selectAll:function(e){var t=this,n=H.getArrayFromList(this.element[0].querySelectorAll("option:not(.is-disabled):not(:disabled)")),a=H.getArrayFromList(this.listUl[0].querySelectorAll("li.dropdown-option:not(.separator):not(.group-label):not(.is-disabled)")),o=n[n.length-1];this.settings.selectAllFilterOnly&&this.filteredItems&&(n=[],(a=$.makeArray(this.filteredItems)).forEach(function(l){var d=l.getAttribute("data-val");if(d){var h=t.element[0].querySelector('option[value="'.concat(d,'"]'));h&&n.push(h)}})),e?(a.forEach(function(l){l.classList.add("is-selected"),l.querySelector("a").setAttribute("aria-selected","true")}),n.forEach(function(l){l.selected=!0,l.setAttribute("selected",!0)})):(a.forEach(function(l){l.classList.remove("is-selected"),l.querySelector("a").setAttribute("aria-selected","false")}),n.forEach(function(l){l.selected=!1,l.setAttribute("selected",!1),l.removeAttribute("selected")})),this.previousActiveDescendant=o.value||"",this.setDisplayedValues(),this.updateItemIcon(o),!this.settings.selectAllFilterOnly&&this.list[0].classList.contains("search-mode")&&this.resetList(),this.activate(!0),this.setBadge(o),this.toggleTooltip(),this.element.trigger("change").triggerHandler("selected")},selectOptions:function(e,t){Array.isArray(e)&&(e=$(e));var i=this;e.each(function(){i.selectOption($(this),t)}),i.element.trigger("change").triggerHandler("selected")},selectOption:function(e,t){if(e&&e.length){var i;if(this.scrollLock(this.listUl),e.is("li")&&(i=e,0===(e=this.element.find('option[value="'.concat(e.attr("data-val"),'"]'))).length&&(e=this.element.find("option").filter(function(){return $(this).text()===i.attr("data-val")})),e.prop("disabled")))return void this.scrollRelease(this.listUl);var n=e.val();"string"==typeof e?(i=this.listUl.find('li[data-val="'.concat(e,'"]')),e=this.element.find('option[value="'.concat(n=e,'"]'))):"string"==typeof n&&(n=n.replace(/"/g,"/quot/"),i=this.listUl.find('li[data-val="'.concat(n,'"]')));var a=this.listUl.find("li").first().hasClass("is-selected"),o=!0,l=!0,d=this.selectedValues,h=!1;(e.hasClass("clear")||!i)&&(h=!0),h&&this.deselectAll(),Array.isArray(d)||(d=[d]);var p=d.indexOf(n)>-1;this.settings.multiple&&p&&(o=!1),o?p&&!a?l=!1:(this.select(e[0]),this.previousActiveDescendant=n,this.settings.noSearch&&this.searchMatches&&delete this.searchMatches):(this.deselect(e[0]),this.previousActiveDescendant=void 0);var v=this.listUl[0].scrollTop;v>0&&(this.currentlyScrolledPos=v),this.renderListItem(e[0]),this.setDisplayedValues(),this.updateItemIcon(e),!t&&l&&(this.element.trigger("change").triggerHandler("selected",[e,o]),this.toggleTooltip()),this.settings.multiple&&this.activate(!0),this.setBadge(e);var b=this.element.attr("id");if(xe.browser.isIE11()&&b){var w=$("#".concat(b)).html(),T=$("#".concat(b)).val();w&&this.element.html(w),T&&this.element.val(T)}$(".tooltip:not(.is-hidden)").hide(),this.scrollRelease(this.listUl)}},select:function(e){!e||!(e instanceof HTMLOptionElement)||this.settings.multiple&&this.selectedValues.length>=this.settings.maxSelected||(e.selected=!0)},selectValue:function(e){if("string"==typeof e){var t=this.element.find('option[value="'.concat(e,'"]'));!t||!t.length||(this.select(t[0]),this.updated())}},deselect:function(e){!e||!(e instanceof HTMLOptionElement)||(e.selected=!1,this.element.trigger("change"))},deselectValue:function(e){if("string"==typeof e){var t=this.element.find('option[value="'.concat(e,'"]'));!t||!t.length||(this.deselect(t[0]),this.updated())}},deselectAll:function(){var e=this;this.element.find("option").each(function(i,n){$(n).prop("selected",!1),e.deselectValue(n)})},firstOptionStartingWith:function(e){if("string"==typeof e){var t=this.element[0],i=-1,n=0;(!this.searchMatches||!this.searchMatches[e])&&(this.searchMatches={},this.searchMatches[e]=[]);for(var a=0;a<t.options.length;a++)if(0===t.options[a].innerText.toLowerCase().indexOf(e)){if(-1===this.searchMatches[e].indexOf(a)){this.searchMatches[e].push(a),i=a;break}n++}if(-1===i){if(!this.searchMatches[e].length)return;n===this.searchMatches[e].length&&(i=this.searchMatches[e][0],this.searchMatches[e].length=1)}return t.options[i]}},selectStartsWith:function(e){this.filterTerm="";var t=this.firstOptionStartingWith(e);this.select(t),this.updated(),this.element.trigger("change")},highlightStartsWith:function(e){if(this.isOpen()){var t=this.firstOptionStartingWith(e);this.highlightOption($(t))}},setBadge:function(e){if(this.badges){var t=this.element.parent().find(".badge");0===t.length&&(this.element.parent().find(".dropdown-wrapper").append('<span class="badge">1</span>'),t=this.element.parent().find(".badge")),t.attr("class","badge ".concat(e.attr("data-badge-color")?e.attr("data-badge-color"):"azure07")).text(e.attr("data-badge"))}},callSource:function(e,t){var i=this,n="";if(!t&&this.isOpen()&&!this.element.hasClass("search-mode")&&(n=this.searchInput.val()),!this.settings.source)return!1;this.isFiltering=!1;var a=rt(this.settings.source),o=function(v,b){var w="",T=i.element.val();function k(q){return q.replace(/"/g,"'")}function A(q){if(null!=q){var G="",j="",X="",fe="";"string"==typeof q&&(q={value:q}),void 0!==q.value&&(q.value=k(q.value)),void 0!==q.id&&(isNaN(q.id)||(q.id="".concat(q.id)),q.id=k(q.id),G=' id="'.concat(q.id,'"')),void 0!==q.label&&q.label.length&&(q.label=k(q.label),X=q.label);var we=i.selectedValues.indexOf(T)>-1;i.settings.multiple?T.forEach(function(re){re===q.value&&(q.selected=!0)}):(q.value===T||we)&&(q.selected=!0),q.selected&&(j=" selected"),q.disabled&&(fe=" disabled"),!X.length&&X!==q.value&&(X+=q.value),w+="<option".concat(G,' value="').concat(q.value,'"').concat(j).concat(fe,">\n          ").concat(X,"\n        </option>")}}if(!i.isFiltering&&!H.equals(v,i.dataset)&&(i.dataset=v,!b)){i.element.empty();for(var M=0;M<v.length;M++){var L=void 0;if(v[M].group){L=v[M].options,w+='<optgroup label="'.concat(v[M].group,'">');for(var z=0;z<L.length;z++)A(L[z]);w+="</optgroup>"}else A(v[M])}i.element.append(w)}i.element.triggerHandler("complete"),i.element.trigger("requestend",[n,v]),"function"==typeof e?e():i.updateList(n)};if(i.element.triggerHandler("start"),i.element.trigger("requeststart"),"function"===a)this.settings.source(o,n,this.settings.sourceArguments);else if("object"===a){var l=$.isArray(this.settings.source)?this.settings.source:[this.settings.source];o(l)}else{var d=this.settings.source.toString();$.getJSON(d).done(function(p){o(p)}).fail(function(){o([])})}return!0},getDataAttributes:function(e,t){if(e){"string"==typeof e&&(e=[e]);var i=t||[];"string"==typeof i&&(i=[i]);var n={obj:{},str:"",isExclude:function(l){return $.inArray(l,i)>-1}};for(var a in e)e.hasOwnProperty(a)&&(n.name="".concat(e[a].name),n.isData="data-"===n.name.substr(0,5),n.isData&&!n.isExclude(n.name)&&(n.obj[n.name]=e[a].value,n.str+=" ".concat(n.name,'="').concat(e[a].value,'"')));return{str:n.str,obj:n.obj}}},setCode:function(e){var t=this,i=function(){t.element.val(e),t.updated()};t.callSource(i)||i()},isMobile:function(){return["ios","android"].indexOf(xe.os.name)>-1},isListClosable:function(){return this.list.hasClass("is-closable")},toTagData:function(){var e=[],t=this.element[0].id;return t||(t=H.uniqueId(this.element[0],this.element[0].className)),this.selectedOptions.forEach(function(i){e.push({content:i.innerText.trim(),dismissible:!0,href:"#",id:"".concat(t,"-tag-").concat(i.value),style:"secondary",value:i.value})}),e},disable:function(){this.element.prop("disabled",!0).prop("readonly",!1),this.pseudoElem.addClass("is-disabled"),this.pseudoElem.is($(document.activeElement))&&this.pseudoElem.blur(),this.pseudoElem.addClass("is-disabled").removeClass("is-readonly").removeAttr("aria-readonly").attr("tabindex","-1").prop("readonly",!1).prop("disabled",!0),this.closeList("cancel"),this.settings.showTags&&this.pseudoElem.find(".tag").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.pseudoElem.prop("disabled",!1).prop("readonly",!1).attr("tabindex","0").removeClass("is-disabled").removeClass("is-readonly").removeAttr("aria-readonly"),this.settings.showTags&&this.pseudoElem.find(".tag").removeClass("is-disabled")},readonly:function(){this.element.prop("disabled",!1).prop("readonly",!0),this.pseudoElem.removeClass("is-disabled").addClass("is-readonly").attr("aria-readonly","true").attr("tabindex",this.element.attr("tabindex")||"0").prop("disabled",!1).prop("readonly",!0),this.closeList("cancel")},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.closeList("cancel"),this.pseudoElem&&this.pseudoElem.hasClass("is-open")&&this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.element.prop("multiple",!(!this.settings.multiple||!0!==this.settings.multiple)),!0===this.element.prop("readonly")?this.readonly():(this.pseudoElem.removeClass("is-readonly"),this.pseudoElem.removeAttr("aria-readonly")),this.pseudoElem[this.element.prop("disabled")?"addClass":"removeClass"]("is-disabled"),this.updateList(),this.setListIcon(),this.setDisplayedValues(),this.toggleTooltip(),this.element.trigger("has-updated"),this},destroy:function(){this.placeholder&&delete this.placeholder,this.currentlyScrolledPos&&delete this.currentlyScrolledPos,$.removeData(this.element[0],Nn),this.closeList("cancel"),this.pseudoElem.off().remove(),this.icon.remove(),this.wrapper.remove(),this.listfilter.destroy(),this.element.removeAttr("style"),this.element.closest("form").off("reset.dropdown"),this.element.off(),this.label.off();var e=document.body.querySelector("#dropdown-list");e&&this.isOpen()&&e.parentNode.removeChild(e)},handleEvents:function(){var e=this,t=this;function i(a){var o=$(a.target).parents(".tag").length>0,l=!1;return a.target instanceof HTMLElement&&"string"==typeof a.target.className&&(l=a.target.classList.contains("tag")),!(!l&&!o)}var n=!1;this.pseudoElem.on("keydown.dropdown",function(a){return e.handlePseudoElemKeydown(a)}).on("click.dropdown touchstart.dropdown",function(a){a.originalEvent.ctrlKey&&a.originalEvent.shiftKey||a.stopPropagation(),!n&&(t.dropdownParent=a.currentTarget,t.toggle())}).on("mouseup.dropdown touchend.dropdown",function(a){2===a.button&&a.stopPropagation()}).on("mousedown.dropdown touchstart.dropdown",function(a){n=i(a)}).on("touchcancel.dropdown",function(a){i(a)||(a.stopPropagation(),t.toggle(),a.preventDefault())}),this.tagListAPI&&this.pseudoElem.on("focusout.dropdown",function(){e.scrollTagList()}),t.element.on("activated.dropdown",function(){t.label.trigger("click")}).on("updated.dropdown",function(a){a.stopPropagation(),t.updated()}).on("openlist.dropdown",function(){t.toggle()}),t.element.closest("form").on("reset.dropdown",function(){setTimeout(function(){t.element.triggerHandler("updated")},1)}),this.label.on("click",function(){t.isDisabled()||t.pseudoElem.focus()})}},$.fn.dropdown=function(s){return this.each(function(){var e=$.data(this,Nn);e?e.updated(s):e=$.data(this,Nn,new fl(this,s))})};var ts="colorpicker",Eo={themes:{light:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},dark:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},contrast:{border:"all",checkmark:{one:[1,3],two:[4,10]}}},customColors:!1,colors:[{label:"Slate",number:"10",value:"161618"},{label:"Slate",number:"09",value:"28282A"},{label:"Slate",number:"08",value:"3B3B3F",border:"dark"},{label:"Slate",number:"07",value:"525257",border:"dark"},{label:"Slate",number:"06",value:"6F6F76"},{label:"Slate",number:"05",value:"8E8E95"},{label:"Slate",number:"04",value:"BBBBBF"},{label:"Slate",number:"03",value:"C5C5C9"},{label:"Slate",number:"02",value:"E0E0E1"},{label:"Slate",number:"01",value:"FAFAFA",border:"light, contrast"},{label:"Amber",number:"10",value:"A14100"},{label:"Amber",number:"09",value:"BB5500"},{label:"Amber",number:"08",value:"CD6200"},{label:"Amber",number:"07",value:"DF6F00"},{label:"Amber",number:"06",value:"F98300"},{label:"Amber",number:"05",value:"FA9601"},{label:"Amber",number:"04",value:"FBAF50"},{label:"Amber",number:"03",value:"FCC888"},{label:"Amber",number:"02",value:"FDDFBD"},{label:"Amber",number:"01",value:"FEF2E5"},{label:"Ruby",number:"10",value:"6C080B"},{label:"Ruby",number:"09",value:"8D0B0E"},{label:"Ruby",number:"08",value:"A30D11"},{label:"Ruby",number:"07",value:"C31014"},{label:"Ruby",number:"06",value:"DA1217"},{label:"Ruby",number:"05",value:"DF3539"},{label:"Ruby",number:"04",value:"E66467"},{label:"Ruby",number:"03",value:"EE9496"},{label:"Ruby",number:"02",value:"F5C3C4"},{label:"Ruby",number:"01",value:"FBE7E8"},{label:"Turquoise",number:"10",value:"1F5E5E"},{label:"Turquoise",number:"09",value:"297B7B"},{label:"Turquoise",number:"08",value:"2F8D8E"},{label:"Turquoise",number:"07",value:"39A9AA"},{label:"Turquoise",number:"06",value:"40BDBE"},{label:"Turquoise",number:"05",value:"5CC6C7"},{label:"Turquoise",number:"04",value:"82D4D4"},{label:"Turquoise",number:"03",value:"A8E1E1"},{label:"Turquoise",number:"02",value:"CFEEEE"},{label:"Turquoise",number:"01",value:"ECF8F8"},{label:"Emerald",number:"10",value:"156138"},{label:"Emerald",number:"09",value:"1C7F49"},{label:"Emerald",number:"08",value:"1F9254"},{label:"Emerald",number:"07",value:"25AF65"},{label:"Emerald",number:"06",value:"2AC371"},{label:"Emerald",number:"05",value:"4DCC86"},{label:"Emerald",number:"04",value:"78D8A3"},{label:"Emerald",number:"03",value:"A1E4BF"},{label:"Emerald",number:"02",value:"CBEFDC"},{label:"Emerald",number:"01",value:"EBF9F1"},{label:"Amethyst",number:"10",value:"3B1470"},{label:"Amethyst",number:"09",value:"4E1A91"},{label:"Amethyst",number:"08",value:"591DA8"},{label:"Amethyst",number:"07",value:"6C23C9"},{label:"Amethyst",number:"06",value:"7928E1"},{label:"Amethyst",number:"05",value:"8D4BE5"},{label:"Amethyst",number:"04",value:"A876EB"},{label:"Amethyst",number:"03",value:"C2A1F1"},{label:"Amethyst",number:"02",value:"DDCBF7"},{label:"Amethyst",number:"01",value:"F1EBFC"},{label:"Azure",number:"10",value:"003876"},{label:"Azure",number:"09",value:"004A99"},{label:"Azure",number:"08",value:"0054B1"},{label:"Azure",number:"07",value:"0066D4"},{label:"Azure",number:"06",value:"0072ED"},{label:"Azure",number:"05",value:"1C86EF"},{label:"Azure",number:"04",value:"55A3F3"},{label:"Azure",number:"03",value:"8ABFF7"},{label:"Azure",number:"02",value:"BEDCFA"},{label:"Azure",number:"01",value:"E6F1FD"}],placeIn:null,showLabel:!1,editable:!0,disabled:!1,uppercase:!0,colorOnly:!1,clearable:!0,clearableText:null,popupmenuSettings:{}};function An(s,e){this.settings=H.mergeSettings(s,e,Eo),e&&e.colors&&(this.settings.colors=e.colors),this.element=$(s),this.init()}An.prototype={init:function(){this.isIe="ie"===xe.browser.name,this.isIeEdge="edge"===xe.browser.name,this.isIe11=this.isIe&&"11"===xe.browser.version,this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.settings.clearableText||(this.settings.clearableText=B?B.translate("None"):"None"),this.build(),this.handleEvents(),this.setCustomWidth()},build:function(){this.isEditor="editor"===this.settings.placeIn;var e=this.element,t=this.isEditor?this.element.attr("data-value"):this.element.val(),i="swatch".concat(t&&""!==$.trim(t)?"":" is-empty");if(!this.isEditor)if(this.isInlineLabel?this.inlineLabel.addClass("colorpicker-container"):(this.container=$('<span class="colorpicker-container"></span>'),e.wrap(this.container)),this.container=e.parent(),this.swatch=$('<span class="'.concat(i,'"></span>')).prependTo(this.container),this.settings.showLabel){var a=e.data("mask");a&&"function"==typeof a.destroy&&a.destroy()}else e.mask({pattern:["#",/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/]});var o=this.element.children(".trigger");this.container&&this.container.length&&(o=this.container.children(".trigger")),(!o||!o.length||!o.children(".icon").length)&&(this.icon=$.createIconElement("dropdown").appendTo(this.isEditor?this.element:this.container),this.icon.wrap('<span class="trigger"></span>')),t&&this.setColor(t),(this.element.is(":disabled")||this.settings.disabled)&&this.disable(),this.element.is(":disabled")&&this.container&&this.container.closest(".field").addClass("is-disabled"),this.element.prop("readonly")&&this.readonly(),!this.settings.editable&&!this.settings.disabled&&this.readonly(),this.settings.colorOnly&&this.element.parent().addClass("color-only"),this.element.attr("autocomplete","off"),this.addAria(),H.addAttributes(this.element,this,this.settings.attributes,"colorpicker"),H.addAttributes(this.element.parent().find(".trigger"),this,this.settings.attributes,"trigger")},getHexFromLabel:function(e){for(var t=0;t<this.settings.colors.length;t++){var i=this.settings.colors[t],n=B.translate(i.label,!0);if(e===i.label+i.number||e===n+i.number){var a=i.value;return"#"!==a.substr(0,1)&&(a="#".concat(a)),a}}return""},getLabelFromHex:function(e){if(!e)return"";for(var t=0;t<this.settings.colors.length;t++){var i=this.settings.colors[t];if(e.replace("#","")===i.value.replace("#",""))return this.translateColorLabel(i.label)+i.number}return""},setCustomWidth:function(){if(this.element[0].style&&this.element[0].style.width){var e,t=parseInt(this.element[0].style.width,10);this.container.css({width:t}),this.element.css({width:t-4-Number(null===(e=this.swatch)||void 0===e?void 0:e?.width())})}},getHexValue:function(){return this.element.attr("value")},getLabelValue:function(){return this.settings.showLabel?this.element.val():this.getLabelFromHex(this.element.val())},addAria:function(){this.element.attr({role:"combobox","aria-autocomplete":"list"}),$('label[for="'.concat(this.element.attr("id"),'"]')).append('<span class="audible">'.concat(B.translate("UseArrow"),"</span>"))},toggleList:function(){var e=this,t=$("#colorpicker-menu");if(!(this.element.is(":disabled")||this.element.prop("readonly")&&this.settings.editable||t.length&&this.isPickerOpen)){t=this.updateColorMenu();var i=H.extend({},{ariaListbox:!0,menuId:"colorpicker-menu",trigger:"immediate",attachToBody:!0,placementOpts:{containerOffsetX:10,containerOffsetY:10,parentXAlignment:B.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},offset:{x:0,y:10}},this.settings.popupmenuSettings);this.element.popupmenu(i).on("open.colorpicker",function(){e.element.parent().addClass("is-open"),e.isPickerOpen=!0}).on("close.colorpicker",function(){[].slice.call(e.menu[0].querySelectorAll("a")).forEach(function(a){var o=$(a).data("tooltip");o&&o.hide()}),t.on("destroy.colorpicker",function(){e.element.off("open.colorpicker selected.colorpicker close.colorpicker"),e.menu.off("destroy.colorpicker").remove()}),e.element.parent().removeClass("is-open"),e.isPickerOpen=!1,e.element.trigger("listclosed","select")}).on("selected.colorpicker",function(n,a){e.element.is(".colorpicker-editor-button")||(e.itemLabel=a.data("label")),e.isEditor||e.setColor(a.data("value"),e.itemLabel);var o=!1;if(e.element.is(".colorpicker-editor-button")){var l=e.element.data("toolbaritem")||e.element.data("toolbarflexitem"),d=l?l.toolbarAPI:null;d&&d.overflowedItems.forEach(function(h){"colorpicker"===h.type&&(o=!0)})}o||e.element.focus(),e.element.trigger("change")}),this.menu=$("#colorpicker-menu"),setTimeout(function(){e.menu.find(".is-selected").focus()},1)}},setColor:function(e,t){var i=this.settings,n=e=e||"",a=t;"#"!==e.toString().substr(0,1)&&""!==e&&(n="#".concat(n));var o=/(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)/i.test(n);if(i.showLabel&&t===i.clearableText)this.setValueOnField({hex:n,label:i.clearableText,isEmpty:!0});else{if(!o){if(!i.showLabel)return void this.setValueOnField({hex:n="#"!==n?n:"",invalid:!0});a=e.replace("#",""),n=this.getHexFromLabel(a)}a||(a=this.getLabelFromHex(n)),this.setValueOnField({hex:n,label:a})}},setValueOnField:function(e){var t=this.settings,i=this.isEditor?"data-value":"value",n="";!e.isEmpty&&"string"==typeof e.hex&&(n=t.uppercase?e.hex.toUpperCase():e.hex.toLowerCase()),this.swatch&&(e.isEmpty||e.invalid?(this.swatch.addClass(e.isEmpty?"is-empty":"is-invalid"),this.swatch[0].style.backgroundColor=""):(this.swatch.removeClass("is-empty is-invalid"),this.swatch[0].style.backgroundColor=n)),this.element[0].value=t.showLabel?e.label:n,this.element[0].setAttribute(i,n),this.element[0].setAttribute("aria-describedby",e.label||"")},translateColorLabel:function(e){return e?"string"==typeof B.translate(e,!0)?B.translate(e,!0):e:""},getThemeMode:function(e){var i=Object.keys(Eo.themes).filter(function(a){return e.indexOf(a)>-1}),n="light";return i.length>0&&(n=i[0]),n},getThemeVariant:function(e){return this.getThemeMode(e)},updateColorMenu:function(){var e=this,t=this.settings,i=!!$("#colorpicker-menu").length,n=$('<ul id="colorpicker-menu" class="popupmenu colorpicker"></ul>'),a=yn.currentTheme,o=this.getThemeMode(a),l="all"===t.themes[o].border,d=t.themes[o].checkmark,h="";$("#colorpicker-menu").remove();for(var p=function(){var M=$("<li></li>"),L=$('<a href="#"><span class="swatch"></span></a>').appendTo(M),z=(e.translateColorLabel(t.colors[v].label)||t.colors[v].label)+(t.colors[v].number||""),q=parseInt(t.colors[v].number,10),O=new RegExp("\\b".concat(a,"\\b")),_=t.colors[v].value,G=!1,j=e.isEditor?e.element.attr("data-value"):e.element.val();t.showLabel&&!e.isEditor&&(j=e.getHexFromLabel(j)),(l||O.test(t.colors[v].border))&&(G=!0),j&&"".concat(j).toLowerCase().replace("#","")==="".concat(_).toLowerCase()&&(d&&$.each(d,function(fe,he){q>=he[0]&&q<=he[1]&&(h=" checkmark-".concat(fe))}),(z===e.itemLabel||void 0===e.itemLabel)&&L.addClass("is-selected".concat(h))),_=t.uppercase?_.toUpperCase():_.toLowerCase();var X=L.find(".swatch");X[0]&&(X[0].style.backgroundColor="#".concat(_)),X?.addClass(G?"is-border":""),L[0].setAttribute("data-label",z),L[0].setAttribute("data-value",_),L[0].setAttribute("title","".concat(z," #").concat(_)),L.tooltip(),H.addAttributes(L,e,e.settings.attributes,z),i||n.append(M)},v=0,b=t.colors.length;v<b;v++)p();if(!i){if(t.clearable){var w=$("<li></li>"),T="foreColor"===this.element.attr("data-action")?"000000":"",k=$('<a href="#" title="'.concat(t.clearableText,'"><span class="swatch is-empty').concat(l?" is-border":"",'"></span></a>')).appendTo(w);k.data("label",t.clearableText).data("value",T).tooltip(),H.addAttributes(k,this,this.settings.attributes,"clear"),n.append(w)}$("body").append(n)}return n},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.element.parent().removeClass("is-disabled is-readonly")},disable:function(){this.element.prop("disabled",!0),this.settings.placeIn||this.element.parent().addClass("is-disabled")},readonly:function(){this.enable(),this.element.prop("readonly",!0),this.element.parent().addClass("is-readonly"),this.settings.editable||this.element.parent().addClass("is-not-editable")},isDisabled:function(){return this.element.prop("disabled")},decimal2rgb:function(e){return"number"!=typeof e?e:"rgb(".concat(255&e,", ").concat((65280&e)>>8,", ").concat((16711680&e)>>16,")")},rgb2hex:function(e){if(!e||-1===e.search("rgb"))return e;if("rgba(0, 0, 0, 0)"===e)return"transparent";var t=function(a){return"0".concat(parseInt(a,10).toString(16)).slice(-2)},i=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);return"#".concat(t(i[1])).concat(t(i[2])).concat(t(i[3]))},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.off(["keypress.".concat(ts),"keyup.".concat(ts),"blur.".concat(ts),"openlist.".concat(ts),"change.".concat(ts),"paste.".concat(ts)].join(" ")),this.swatch&&this.swatch.length&&(this.swatch.off("click.".concat(ts)),this.swatch.remove(),delete this.swatch);var e=this.element.data("mask");if(e&&e.destroy(),this.icon&&this.icon.length){var t=this.icon.parent(".trigger");this.icon.off().remove(),t.off().remove(),delete this.icon}this.container&&this.container.length&&(this.container.find(".trigger").remove(),this.element.unwrap(),delete this.container)},destroy:function(){return this.teardown(),$.removeData(this.element[0],ts),this},handleEvents:function(){var e,t,i,a,d,n=this,o=this.element,l=o.parent();null===(e=(t=this.icon).parent)||void 0===e||null===(e=null==(i=e.call)?void 0:i.call(e,t))||void 0===e||e?.on("click.colorpicker",function(){return n.toggleList()}),null===(a=this.swatch)||void 0===a||a?.on("click.colorpicker",function(){return n.toggleList()}),o.on("focus.colorpicker",function(){d=o.val(),l.addClass("is-focused")}).on("blur.colorpicker",function(){l.removeClass("is-focused"),n.isIeEdge&&!o.is(".is-open")&&d!==o.val()&&o.triggerHandler("change")}).on("openlist.colorpicker",function(){n.toggleList()});var h="blur.colorpicker paste.colorpicker change.colorpicker";o.on(h+=this.isIe11?"keypress.colorpicker":"keyup.colorpicker",function(){var p=n.isEditor?o.attr("data-value"):o.val();n.settings.showLabel?n.setColor(o.attr("value"),p):n.setColor(p)}),o.on("keydown.colorpicker",function(p){(38===p.keyCode||40===p.keyCode)&&n.toggleList(),13===p.keyCode&&n.setColor(o.val())})}},$.fn.colorpicker=function(s){return this.each(function(){var e=$.data(this,ts);e?e.updated(s):e=$.data(this,ts,new An(this,s))})};var Pa="toolbarflexitem",pl=[{type:"button",selector:'button:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button), input[type="button"]:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button)',filter:function qg(s){return!$(s).parents(".searchfield-wrapper, .toolbar-searchfield-wrapper").length}},{type:"menubutton",selector:".btn-menu"},{type:"actionbutton",selector:".btn-actions"},{type:"colorpicker",selector:".colorpicker-editor-button"},{type:"hyperlink",selector:"a[href]",filter:function Lf(s){if("A"!==s.nodeName)throw new Error("Unspecified error occured");return $(s).parents(".popupmenu").length<1}},{type:"checkbox",selector:'input[type="checkbox"]'},{type:"radio",selector:'input[type="radio"]'},{type:"searchfield",selector:".searchfield"},{type:"toolbarsearchfield",selector:".toolbarsearchfield"}],Yr={button:"button",actionbutton:"popupmenu",colorpicker:"colorpicker",menubutton:"popupmenu",hyperlink:"hyperlink",searchfield:"searchfield",toolbarsearchfield:"searchfield"},$o={disabled:!1,readOnly:!1,hidden:!1,componentSettings:void 0,allowTabs:!1,attributes:null};function xc(s,e){this.element=s,this.settings=H.mergeSettings(this.element,e,$o),this.init()}xc.prototype={type:void 0,isToolbarFlexItem:!0,init:function(){this.type=function Pf(s){var e=!1;if(pl.forEach(function(t){$(s).is(t.selector)&&("function"==typeof t.filter&&!t.filter(s)||(e=t.type))}),!e)throw new Error("Element ".concat(s," is not a valid Toolbar Item Type."));return e}(this.element),this.section=this.element.parentElement,this.toolbar=this.section.parentElement,this.trueSelected=!1},get focusable(){return!0!==this.disabled&&("searchfield"===this.type||("actionbutton"!==this.type||!0!==this.hasNoOverflowedItems)&&!0!==this.overflowed&&this.visible)},get focused(){return 0===this.element.tabIndex},set focused(s){s?this.element.tabIndex=0:this.element&&(this.element.tabIndex=-1)},get selected(){return this.trueSelected},set selected(s){if(s)return this.trueSelected=!0,this.element.classList.add("is-selected"),this.triggerSelectedEvent(),void(this.selectedAnchor&&delete this.selectedAnchor);this.trueSelected=!1,this.element.classList.remove("is-selected")},get componentAPI(){var s=$(this.element),e=Yr[this.type];if(e)return s.data(e)},get toolbarAPI(){return this.settings.toolbarAPI?this.settings.toolbarAPI:$(this.toolbar).data("toolbar-flex")},triggerSelectedEvent:function(){if(!(["searchfield","toolbarsearchfield"].indexOf(this.type)>-1)){var t=[this];["menubutton","actionbutton"].indexOf(this.type)>-1&&this.selectedAnchor&&t.push(this.selectedAnchor),$(this.element).trigger("selected",t,t[1])}},show:function(){this.visible=!0},hide:function(){this.visible=!1},set visible(s){var e="searchfield"===this.type||"toolbarsearchfield"===this.type;if(s)return e&&this.element.parentNode.classList.remove("hidden"),void this.element.classList.remove("hidden");e&&this.element.parentNode.classList.add("hidden"),this.element.classList.add("hidden")},get visible(){return-1===this.element.className.indexOf("hidden")},enable:function(){this.disabled=!1,this.hasReadOnly&&(this.readOnly=!1)},get disabled(){return this.element.disabled},set disabled(s){if(s)return this.element.disabled=!0,void(this.element.readOnly=!1);this.element.disabled=!1},get hasReadOnly(){return"readOnly"in this.element},get readOnly(){return!!this.hasReadOnly&&this.element.readOnly},set readOnly(s){if(this.hasReadOnly){if(s)return this.disabled=!1,this.element.disabled=!1,void(this.element.readOnly=!0);this.element.readOnly=!1}},get overflowed(){var s=xe.rtl,e=this.element.getBoundingClientRect(),t=this.section.getBoundingClientRect();return s?e.left<t.left:e.right>t.right},set hasNoOverflowedItems(s){if("actionbutton"===this.type&&this.componentAPI){var e=this.componentAPI.toData({noMenuWrap:!0}).length;if(s&&e-this.predefinedItems.length<1)return this.element.classList.add("no-overflowed-items"),this.trueHasNoOverflowedItems=!0,void(this.focused&&(this.toolbarAPI.focusedItem=this,this.toolbarAPI.navigate(-1,void 0)));this.trueHasNoOverflowedItems=!1,this.element.classList.remove("no-overflowed-items")}},get hasNoOverflowedItems(){return!this.componentAPI||this.trueHasNoOverflowedItems},get index(){return this.toolbarAPI.items.indexOf(this)},handleEvents:function(){var e=this,t=this,i=$(this.element);["menubutton","actionbutton","colorpicker"].indexOf(this.type)>-1&&i.on("selected.".concat(Pa),function(a,o){if(!e.selectedAnchor){if(a.stopPropagation(),"actionbutton"===e.type){var p,l=$(o).parent(),d=l.data("originalButton"),h=$(d).data("toolbarflexitem");if(l.parents("ul").length>1&&(p=l.data("original-menu-element"),d=l.parents("li").last().data("originalButton"),h=$(d).data("toolbarflexitem")),h)return p?(a.preventDefault(),h.selectedAnchor=$(p).children("a")):h.selectedAnchor=o,void(h.selected=!0)}t.selectedAnchor=o,t.selected=!0}}),"actionbutton"===this.type&&(i.on("beforeopen.".concat(Pa),this.handleActionButtonBeforeOpen.bind(this)),$("body").off("resize.".concat(Pa)).on("resize.".concat(Pa),this.handleActionButtonResize.bind(this))),this.settings.allowTabs||i.on("focus.".concat(Pa),this.handleFocus.bind(this))},handleActionButtonBeforeOpen:function(){this.refreshMoreActionsMenu()},handleActionButtonResize:function(){this.refreshMoreActionsMenu()},handleFocus:function(e){e.target&&e.target===this.element&&(this.toolbarAPI.focusedItem=this)},render:function(){var t,e=this;this.disabled=this.disabled,this.hasReadOnly&&(this.readonly=this.readonly),Array.isArray(this.settings.attributes)&&(this.settings.componentSettings||(this.settings.componentSettings={}),this.settings.componentSettings.attributes?(t=[],this.settings.attributes.forEach(function(o){var l=e.settings.componentSettings.attributes.find(function(d){return d.name===o.name});t.push(l||{name:o.name,value:"".concat(o.value,"-").concat(e.type,"-").concat(e.index)})})):t=this.settings.attributes.map(function(o){return{name:o.name,value:"".concat(o.value,"-").concat(e.type,"-").concat(e.index)}}),this.settings.componentSettings.attributes=t);var a,i=$(this.element),n=Yr[this.type];n&&((a=i.data(n))?a.updated(this.settings.componentSettings):i[n](this.settings.componentSettings)),"actionbutton"===this.type&&(this.renderMoreActionsMenu(),this.refreshMoreActionsMenu()),this.handleEvents()},renderMoreActionsMenu:function(){var e=this.componentAPI;if(e&&this.toolbarAPI){var t=e.menu;(!t||!t.length)&&(t=$('<ul class="popupmenu"></ul>').insertAfter(this.element)),this.teardownPredefinedItems();var n=this.toolbarAPI.toPopupmenuData();!function i(o,l){o.menuId&&delete o.menuId;var d=l?"submenu":"menu";Array.isArray(o[d])&&o[d].forEach(function(h){i(h,!0)})}(n);var a=$(e.renderItem(n));this.predefinedItems=a,this.linkToolbarItems(n),t.prepend(this.predefinedItems),e.updated({menu:t,predefined:a}),this.menuRendered=!0}},refreshMoreActionsMenu:function(){if("actionbutton"===this.type){var e=this.componentAPI;if(e&&this.toolbarAPI&&!e.isOpen){!e.settings.beforeOpen&&(!this.predefinedItems||!this.predefinedItems.length)&&this.toolbarAPI.items.length&&this.renderMoreActionsMenu();var t=!0;this.toolbarAPI.items.forEach(function(n){if(n.actionButtonLink){var a=n.toPopupmenuData();a.overflowed=n.overflowed,a.id&&delete a.id,e.refreshMenuItem(n.actionButtonLink,a,i)}}),e.refreshHasIcons(),this.hasNoOverflowedItems=t}}function i(n,a){if(!a.isSubmenuItem){if(!0===a.overflowed)return n.classList.add("is-overflowed"),a.visible&&n.classList.remove("hidden"),void(t=!1);n.classList.remove("is-overflowed"),n.classList.add("hidden")}}},unlinkToolbarItems:function(){function e(i){var n=$($(i).data("original-menu-element"));if(n.removeData("action-button-link"),$(i).removeData("original-menu-element"),n.hasClass("submenu"))for(var a=i.querySelector(".popupmenu").children,o=0;o<a.length;o++)e(a[o])}"actionbutton"===this.type&&this.menuRendered&&this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.each(function t(i,n){var a=$(n).data("originalButton"),o=$(a).data("toolbarflexitem");if(o&&(o.actionButtonLink=null,$(n).removeData("original-button"),"menubutton"===o.type))for(var l=n.querySelector(".popupmenu").children,d=0;d<l.length;d++)e(l[d])})},linkToolbarItems:function(e){function t(n,a){var o=n.elementLink;$(o).data("action-button-link",a),$(a).data("original-menu-element",o);var l=n.submenu;if(l&&l.length)for(var d=a.querySelector(".popupmenu").children,h=0;h<d.length;h++)t(l[h],d[h])}"actionbutton"===this.type&&e&&(Array.isArray(e)||(e=e.menu),this.predefinedItems.each(function i(n,a){var o=e[n].itemLink;o.actionButtonLink=a,$(a).data("original-button",o.element);var l=e[n].submenu;if(l&&l.length)for(var d=a.querySelector(".popupmenu").children,h=0;h<d.length;h++)t(l[h],d[h])}))},toPopupmenuData:function(){if("searchfield"!==this.type&&"toolbarsearchfield"!==this.type&&"actionbutton"!==this.type){var e={itemLink:this,disabled:this.disabled,visible:this.visible},t=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");if(t&&t.getAttribute("href")&&(e.icon=t.getAttribute("href").replace("#icon-","")),t&&t.getAttribute("xlink:href")&&(e.icon=t.getAttribute("xlink:href").replace("#icon-","")),/\b(button|menubutton|colorpicker)\b/g.test(this.type)&&(e.text=this.element.textContent.trim()),"menubutton"===this.type){var n=this.componentAPI.menu;if(n.length){var a=this.componentAPI.toData({noMenuWrap:!0}),o=this.componentAPI.element[0].id;o&&(e.id="".concat(this.toolbarAPI.uniqueId,"-").concat(o)),e.submenu=function i(l,d){var h=l.querySelectorAll(":scope > li:not(.heading)");return d.forEach(function(p,v){if(p.elementLink=h[v],p.submenu){var b=h[v].querySelector(".popupmenu");p.submenu=i(b,p.submenu)}}),d}(n[0],a)}else e.submenu=[]}return e}},toData:function(){var e={type:this.type,disabled:this.disabled,focused:this.focused,selected:this.selected,overflowed:this.overflowed,visible:this.visible};this.hasReadOnly&&(e.readOnly=this.readOnly),this.actionButtonLink&&(e.actionButtonLink=this.actionButtonLink),this.componentAPI&&(e.componentAPI=this.componentAPI);var t=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");return t&&t.getAttribute("href")&&(e.icon=t.getAttribute("href").replace("#icon-","")),t&&t.getAttribute("xlink:href")&&(e.icon=t.getAttribute("xlink:href").replace("#icon-","")),/\b(button|menubutton|colorpicker)\b/g.test(this.type)&&(e.text=this.element.textContent.trim()),"actionbutton"===this.type&&(e.predefinedItems=this.predefinedItems),("menubutton"===this.type||"actionbutton"===this.type)&&(e.submenu=this.componentAPI.toData({noMenuWrap:!0})),e},updated:function(e){e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardownPredefinedItems:function(){"actionbutton"===this.type&&(this.unlinkToolbarItems(),this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.remove())},teardown:function(){$(this.element).off("selected.".concat(Pa)).off("beforeopen.".concat(Pa)).off("focus.".concat(Pa)),$("body").off("resize.".concat(Pa)),this.teardownPredefinedItems(),delete this.type,delete this.selected,delete this.focusable,delete this.visible,delete this.disabled,delete this.readOnly,delete this.section,delete this.toolbar,delete this.trueSelected,delete this.menuRendered},destroy:function(){var e=$(this.element).data("popupmenu");e&&e.destroy&&e.destroy();var t=$(this.element).data("searchfield");t&&t.destroy&&t.destroy(),this.teardown()}},$.fn.toolbarflexitem=function(s){return this.each(function(){var e=$.data(this,Pa);if(e)e.updated(s);else{var t=(e=$.data(this,Pa,new xc(this,s))).destroy;e.destroy=function(){"function"==typeof t&&t.call(this),this.element&&$.removeData(this.element,Pa),this.element=void 0}}})};var _s="toolbar-flex",Cs={allowTabs:!1,attributes:null,beforeMoreMenuOpen:null,moreMenuSettings:{}};function kd(s,e){this.element=s,this.settings=H.mergeSettings(this.element,e,Cs),this.init()}kd.prototype={trueFocusedItem:void 0,sections:[],items:[],init:function(){var e=this,t=this;if(this.uniqueId=H.uniqueId(this.element),this.items=this.getElements().map(function(p){var v={};return $(p).hasClass("btn-actions")&&(v=e.settings.moreMenuSettings||v,e.settings.beforeMoreMenuOpen&&(v.beforeOpen=e.settings.beforeMoreMenuOpen)),$(p).toolbarflexitem({toolbarAPI:e,componentSettings:v,allowTabs:e.settings.allowTabs,attributes:e.settings.attributes}),$(p).data("toolbarflexitem")}),this.items){if(this.sections=H.getArrayFromList(this.element.querySelectorAll(".toolbar-section")),this.sections.forEach(function(p){p.classList.contains("buttonset")&&$(p).buttonset({detectHTMLButtons:!0})}),this.jQueryEl=$(this.element),this.jQueryEl.hasClass("contextual-toolbar")){var i;if(this.more=this.jQueryEl.find(".btn-actions"),0===this.more.length&&!this.jQueryEl.hasClass("no-actions-button")){var n=this.jQueryEl.find(".more");n.length||(n=$('<div class="toolbar-section more"></div>').appendTo(this.jQueryEl)),this.more=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(B.translate("MoreActions"),"</span>")).attr("title",B.translate("More")).appendTo(n)}this.buttonset=$(".toolbar-section.buttonset"),this.buttonsetItems=this.buttonset.children("button").add(this.buttonset.find("input")),this.toolBarItems=this.buttonsetItems.add(this.more);var a=this.more.data("popupmenu"),o=this.more.attr("aria-controls");a?this.moreMenu=a.menu:(this.moreMenu=$("#".concat(o)),(!this.moreMenu.length||void 0===o)&&(this.moreMenu=this.more.next(".popupmenu, .popupmenu-wrapper")),this.moreMenu.length||(this.moreMenu=$('<ul id="popupmenu-toolbar-'.concat(this.uniqueId,'" class="popupmenu"></ul>')).insertAfter(this.more)),this.moreMenu.is(".popupmenu-wrapper")&&(this.moreMenu=this.moreMenu.children(".popupmenu")));var d,l=[];this.toolBarItems.not(this.more).not(".ignore-in-menu").filter(function(){return $(this).parent(".buttonset, .inline").length}).each(function(){l.push(t.buildMoreActionsMenuItem($(this)))}),l.reverse(),$.each(l,function(p,v){""!==v.text()&&v.prependTo(t.moreMenu)}),this.defaultMenuItems=this.moreMenu.children("li:not(.separator)"),this.hasDefaultMenuItems=this.defaultMenuItems.length>0,this.settings.moreMenuSettings&&Array.isArray(this.settings.moreMenuSettings.attributes)&&(d=this.settings.moreMenuSettings.attributes),(!d||!d.length)&&Array.isArray(this.settings.attributes)&&(d=this.settings.attributes.map(function(p){var v="".concat(p.value,"-actionbutton");return{name:p.name,value:v}})),null!==(i=d)&&void 0!==i&&i?.length||(d=null);var h=H.extend({},this.settings.moreMenuSettings,{trigger:"click",menu:this.moreMenu,attributes:d},this.hasDefaultMenuItems?{predefined:this.defaultMenuItems}:{});a?this.more.on("beforeopen.toolbar-flex",function(){t.refreshMoreActionsMenu(t.moreMenu)}).triggerHandler("updated",[h]):this.more.popupmenu(h).on("beforeopen.toolbar-flex",function(){t.refreshMoreActionsMenu(t.moreMenu)})}this.settings.allowTabs||(this.items.forEach(function(p){p.focused&&(void 0===e.focusedItem?e.focusedItem=p:p.focused=!1)}),this.focusedItem||(this.focusedItem=this.items[0]),this.focusedItem&&(this.focusedItem.focused=!0)),this.render(),this.handleEvents()}},buildMoreActionsMenuItem:function(e){var t,i;if(!0===e.data("skipit"))return e.data("skipit",void 0),i;var n=e.data("action-button-link");n&&n.length?i=n.parent():(i=$("<li></li>"),n=$('<a href="#"></a>').appendTo(i),e.data("action-button-link",n),n.data("original-button",e)),e.hasClass("hidden")&&i.addClass("hidden"),e.is(":disabled")?(i.addClass("is-disabled"),n.prop("disabled",!0)):(i.removeClass("is-disabled"),n.prop("disabled",!1)),n.text(this.getItemText(e));var a=$.getBaseURL("#icon-dropdown"),o=e.children(".icon").filter(function(){var T=$(this).getIconName();return T&&T!==a&&-1===T.indexOf("dropdown")});o&&o.length&&(n.html("<span>".concat(n.text(),"</span>")),o.clone().detach().prependTo(n));var l=i.find("b");l.length&&(this.moreMenu.addClass("has-icons"),l.detach().prependTo(i));var h=null===(t=this.toolbarItems)||void 0===t?void 0:t?.not(this.more).not(".searchfield").index(e);if(e.is(".btn-menu")){var p,v;this.settings.attributes&&this.settings.attributes.length&&(v=this.settings.attributes.map(function(T){return{name:T.name,value:"".concat(T.value,"-menubutton-").concat(h)}})),null!==(p=v)&&void 0!==p&&p?.length||(v=null),e.data("popupmenu")?n.children(".icon.arrow").length||n.append($.createIcon({classes:"icon arrow icon-dropdown",icon:"dropdown"})):e.popupmenu({attributes:v});var b=e.data("popupmenu").menu,w=b.clone();!function d(T,k,A){var z,M=T.children("li"),L=k.attr("id");k.children("li").each(function(q,O){var _=$(O),G=M.eq(q),j=_.children("a"),X=G.children("a"),fe=_.attr("id"),he=j.attr("id");fe&&_.removeAttr("id").attr("data-original-menu-item",fe),he&&j.removeAttr("id").attr("data-original-menu-anchor",he),X.data("action-button-link",j),j.data("original-button",X);var we=G.children(".wrapper").children(".popupmenu"),re=_.children(".wrapper").children(".popupmenu");we.length&&re.length&&d(we,re,_)}),k.removeAttr("id").attr("data-original-menu",L),A.addClass("submenu"),A.is(i)&&((!(z=A.children(".wrapper"))||!z.length)&&(z=$('<div class="wrapper"></div>')),z.html(k),A.append(z))}(b,w,i)}return e.is("[data-popdown]")&&e.popdown(),i},getItemText:function(e){if(!e)return"";var t=e.find("span").first(),i=e.attr("title"),n=e.data("tooltip");return""!==i&&void 0!==i?i:(n&&"string"==typeof n.content?n.content:void 0)||(t.length?t.text():e.text())},refreshMoreActionsMenu:function(e){var t=this;$("li > a",e).each(function(){var d,i=$(this),n=i.parent(),a=i.data("originalButton"),l=t.getItemText(a);a&&(i.find("span").length?i.find("span").text(l.trim()):i.text(l.trim()),a.parent().is(".is-disabled")||a.is(":disabled")?(n.addClass("is-disabled"),i.prop("disabled",!0),i.attr("tabindex","-1")):(n.removeClass("is-disabled"),i.prop("disabled",!1)),a.is("a")&&(a.parent("li").is(".is-checked")?n.addClass("is-checked"):n.removeClass("is-checked")),a.is(".btn-menu")&&(d=i.parent().find(".popupmenu").first(),t.refreshMoreActionsMenu(d)))})},renderButtonSet:function(){var e,t,i,n;if(this.jQueryEl.hasClass("contextual-toolbar")){var k,A,M,L,o=(null===(e=this.toolBarItems)||void 0===e?void 0:e?.not(".btn-actions").length)>5,l=o?null===(t=this.toolBarItems)||void 0===t?void 0:t?.not(".btn-actions").slice(0,5):null===(i=this.toolBarItems)||void 0===i?void 0:i?.not(".btn-actions");l.removeClass("is-overflowed");for(var d=o?null===(n=this.toolBarItems)||void 0===n?void 0:n?.not(".btn-actions").slice(5):$(),h=$(),p=0;p<l.length;p++)k=l[p],void 0,void 0,void 0,A=B.isRTL(),M=k.getBoundingClientRect(),L=k.parentElement.getBoundingClientRect(),1==M.bottom>=L.bottom||!0===(A?M.left<=L.left:M.right>=L.right||M.right)?d.push(l[p]):h.push(l[p]);d.addClass("is-overflowed");for(var v=0;v<h.length;v++){var b=$(h[v]).data("action-button-link");b&&b.parent()[0].classList.add("hidden")}for(var w=0;w<d.length;w++){var T=$(d[w]).data("action-button-link");T&&T.parent()[0].classList.remove("hidden")}d.length>0?(this.more.parent().css("display","inline-block"),this.more.parent().siblings(".buttonset").css("width","calc(55% - 41px")):(this.more.parent().css("display","none"),this.more.parent().siblings(".buttonset").css("width","calc(55% - 1px"))}},render:function(){var e=this,t=this;this.element.setAttribute("role","toolbar"),Array.isArray(this.settings.attributes)&&H.addAttributes($(this.element),this,this.settings.attributes),this.items.forEach(function(i){var n=$(i.element);if(n.is(".toolbar-searchfield-wrapper, .searchfield-wrapper")&&(n=n.children(".searchfield")),!n.data("searchfield")&&n.is(".searchfield")){var a=$.extend({},H.parseSettings(n[0]));e.settings.collapsibleFilter&&(a.collapsible=e.settings.collapsibleFilter),n.searchfield(a),H.addAttributes(n,t,t.settings.attributes,"searchfield")}i.render()})},handleEvents:function(){var e=this;this.settings.allowTabs||(this.keydownListener=this.handleKeydown.bind(this),this.element.addEventListener("keydown",this.keydownListener),this.keyupListener=this.handleKeyup.bind(this),this.element.addEventListener("keyup",this.keyupListener),this.clickListener=this.handleClick.bind(this),this.element.addEventListener("click",this.clickListener)),$(this.element).on("selected.".concat(_s),function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a]}),$(this.element).on("collapsed-responsive.".concat(_s),function(t,i){t.stopPropagation(),e.navigate(i,null,!0)}),$(this.element).hasClass("contextual-toolbar")&&($(this.element).on("recalculate-buttonset.toolbar-flex-".concat(this.uniqueId),function(){e.renderButtonSet()}),this.more.on("beforeopen.buttonset.toolbar-flex-".concat(this.uniqueId),function(){e.renderButtonSet()}),$("body").on("resize.toolbar-flex-".concat(this.uniqueId),function(){e.renderButtonSet()}))},handleKeydown:function(e){$(e.target).data("toolbarflexitem")&&this.handleItemKeydown(e)},handleItemKeydown:function(e){var t=B.isRTL(),i=e.key,n=this.getItemFromElement(e.target);function a(){e.preventDefault()}if("Enter"!==i)if(" "!==i){if(["ArrowLeft","Left","ArrowUp","Up"].indexOf(i)>-1){if("searchfield"===n.type&&("ArrowLeft"===i||"Left"===i))return;return this.navigate(t?1:-1,void 0,!0),void a()}if(["ArrowRight","Right","ArrowDown","Down"].indexOf(i)>-1){if("searchfield"===n.type&&("ArrowRight"===i||"Right"===i))return;this.navigate(t?-1:1,void 0,!0),a()}}else"hyperlink"===n.type&&this.select(e.target);else this.clickByEnterKey=!0},handleKeyup:function(e){this.clearClickByEnter(e)},handleClick:function(e){$(e.target).data("toolbarflexitem")&&this.handleItemClick(e),this.clearClickByEnter()},handleItemClick:function(e){var t=this.getItemFromElement(e.target);this.select(t),this.focusedItem=t},clearClickByEnter:function(e){this.clickByEnterKey&&(("menubutton"===this.type||"actionbutton"===this.type)&&e.preventDefault(),delete this.clickByEnterKey)},getElements:function(){var e=[],t=[];return pl.forEach(function(n){t.push(n.selector)}),t=t.join(", "),H.getArrayFromList(this.element.querySelectorAll(t)).forEach(function(n){var a=!1;pl.forEach(function(o){a||!$(n).is(o.selector)||"function"==typeof o.filter&&!o.filter(n)||(a=!0,e.push(n))})}),e},getItemFromElement:function(e){if(e instanceof xc||e.isToolbarFlexItem)return e;for(var t,i=0;i<this.items.length;i++)this.items[i].element.innerHTML===e.innerHTML&&(t=this.items[i]);if(!t)throw new Error("No Toolbar Item instance available for element ".concat(e,"."));return t},get buttonsets(){return this.sections.filter(function(s){return s.classList.contains("buttonset")})},get buttonsetAPIs(){return this.buttonsets.map(function(s){return $(s).data("buttonset")})},get searchfieldAPI(){for(var s=0;s<this.items.length;s++)if("searchfield"===this.items[s].type)return this.items[s].componentAPI},get focusedItem(){if(this.trueFocusedItem)return this.trueFocusedItem;for(var s=0;s<this.items.length;s++)if(!0===this.items[s].focused)return this.items[s]},set focusedItem(s){if(0!==this.items.length){for(var e=0;e<this.items.length;e++)this.items[e].focused=!!this.items[e].settings.allowTabs;s.focused=!0,this.trueFocusedItem=s}},get hasFocusableItems(){for(var s=0;s<this.items.length;s++)if(!0===this.items[s].focusable)return!0;return!1},get canManageFocus(){var s=document.activeElement;if(this.element.contains(s))return!0;for(var e=0;e<this.items.length;e++)if("searchfield"===this.items[e].type&&this.items[e].componentAPI.isFocused)return!0;return"BODY"===s.tagName},get overflowedItems(){for(var s=[],e=0;e<this.items.length;e++)!0===this.items[e].overflowed&&s.push(this.items[e]);return s},navigate:function(e,t,i){if(!1!==this.hasFocusableItems){var n=0+e;for(null==t&&(t=this.items.indexOf(this.focusedItem));0!==e;)e>0&&(t===this.items.length-1?t=0:t++,--e),e<0&&(0===t?t=this.items.length-1:--t,e++);var a=this.items[t];if(!1===a.focusable)return void this.navigate(n>0?1:-1,t,i);this.focusedItem===a&&1===this.items.length||(this.focusedItem=a,i&&this.canManageFocus&&this.focusedItem.element.focus())}},select:function(e){var t=this.getItemFromElement(e);switch(t.type){case"searchfield":case"actionbutton":case"menubutton":if(this.clickByEnterKey)return;t.selected=!0;break;default:t.selected=!0}},toPopupmenuData:function(){var e={noMenuWrap:!0};return e.menu=this.items.filter(function(i){return!("actionbutton"===i.type||"searchfield"===i.type)}).map(function(i){return function t(i){var n=i.toPopupmenuData();return n&&(n.icon&&(e.hasIcons=!0),n.selectable&&(e.selectable=n.selectable)),n}(i)}),e},toData:function(){var e={};return e.items=this.items.map(function(t){return t.toData()}),e},get disabled(){return this.trueDisabled},set disabled(s){this.trueDisabled=s,!0!==s?this.element.classList.remove("is-disabled"):this.element.classList.add("is-disabled")},isItemOverflowed:function(e){if(!e)return!1;var t;if(e instanceof HTMLElement||e instanceof $){if(!(t=$(e).data("toolbarflexitem")))return!1;e=t}return!(this.items.indexOf(e)<0)&&e.overflowed},updated:function(e){"object"===rt(e)&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){var e,t,i;this.settings.allowTabs||(null===(e=this.element)||void 0===e||e?.removeEventListener("keydown",this.keydownListener),null===(t=this.element)||void 0===t||t?.removeEventListener("keyup",this.keyupListener),null===(i=this.element)||void 0===i||i?.removeEventListener("click",this.clickListener)),$(this.element).off("selected.".concat(_s)),$(this.element).off("collapsed-responsive.".concat(_s)),$(this.element).hasClass("contextual-toolbar")&&($(this.element).off("recalculate-buttonset.toolbar-flex-".concat(this.uniqueId)),this.more.off("beforeopen.buttonset.toolbar-flex-".concat(this.uniqueId)),$("body").off("resize.toolbar-flex-".concat(this.uniqueId))),this.items.forEach(function(n){n.teardown()}),delete this.items,delete this.sections,delete this.trueFocusedItem},destroy:function(){this.items.forEach(function(e){e.destroy()}),this.teardown()}},$.fn.toolbarflex=function(s){return this.each(function(){var e=$.data(this,_s);if(e)e.updated(s);else{var t=(e=$.data(this,_s,new kd(this,s))).destroy;e.destroy=function(){"function"==typeof t&&t.call(this),this.element&&$.removeData(this.element,_s),this.element=void 0}}})};var gl="calendartoolbar",Sd={month:(new Date).getMonth(),year:(new Date).getFullYear(),locale:null,showToday:!0,showNextPrevious:!0,onOpenCalendar:null,onChangeView:null,isAlternate:!1,isMenuButton:!0,showViewChanger:!1,viewChangerValue:"month",isMonthPicker:!1,inPage:!1,inPageTitleAsButton:!0,hitbox:!1};function Do(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Sd),this.init()}Do.prototype={init:function(){this.setLocale().build().handleEvents().handleResize()},build:function(){var e=this,t=this.settings,i=function(L){return B.translate(L,{locale:e.locale.name,language:e.language})};this.element[0].classList.add("flex-toolbar"),this.element[0].setAttribute("data-init","false");var n={text:i("Today"),class:"today"},a=t.inPage?" is-ripple":"";t.inPage=st.toBoolean(t.inPage),t.inPageTitleAsButton=st.toBoolean(t.inPageTitleAsButton),t.inPage&&(this.element.addClass("is-inpage"),t.showToday||(a="",n.text=i("Apply"),n.class="apply is-apply hidden")),n.class+=" hyperlink".concat(a).concat(t.disableToday?" is-disabled":"");var o=t.showToday||t.inPage?'<a class="'.concat(n.class,'" href="#">').concat(n.text,"</a>"):"",l=t.hitbox?'data-options="{hitbox: true}"':"",d=t.showNextPrevious?"":" no-next-previous",h=t.showNextPrevious?'<button type="button" class="btn-icon prev" '.concat(l,'>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-caret-left"></use>\n        </svg>\n        <span>').concat(i("PreviousMonth"),'</span>\n      </button>\n      <button type="button" class="btn-icon next" ').concat(l,'>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-right"></use>\n          </svg>\n          <span>').concat(i("NextMonth"),"</span>\n      </button>"):"",p=t.showNextPrevious?'<button type="button" class="btn-icon prev">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-caret-left"></use>\n        </svg>\n        <span>'.concat(i("PreviousMonth"),'</span>\n      </button>\n      <button type="button" class="btn-icon next">\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-right"></use>\n          </svg>\n          <span>').concat(i("NextMonth"),"</span>\n      </button>"):"";if(t.isAlternate||t.inPage){t.isAlternate&&this.element[0].classList.add("is-alternate");var v='\n        <button type="button" class="btn btn-monthyear-pane expandable-area-trigger" id="btn-monthyear-pane">\n          <span class="month">november</span>\n          <span class="year">2019</span>\n          <svg class="icon icon-closed" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-dropdown"></use>\n          </svg>\n          <svg class="icon icon-opened" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-dropdown"></use>\n          </svg>\n        </button>',b=t.isMenuButton?v:'<span class="month">november</span><span class="year">2015</span>',w='\n        <div class="toolbar-section buttonset l-align-'.concat(this.isRTL?"left":"right").concat(d,'">\n          ').concat(o,"\n          ").concat(p,"\n        </div>"),T="";if(t.inPage){var k='\n          <button type="button" class="btn btn-cal-month-year" id="btn-cal-month-year">\n            '.concat($.createIcon("calendar"),'\n            <span class="month">november</span>\n            <span class="year">2019</span>\n          </button>'),A='\n          <button class="btn-icon btn-inpage-cal" type="button" id="btn-inpage-cal">\n            <span class="audible"></span>\n            '.concat($.createIcon("calendar"),"\n          </button>");T=t.inPageTitleAsButton?t.isMenuButton?"".concat(A," ").concat(v):k:"".concat(A,' <span class="month">november</span><span class="year">2015</span>')}this.element[0].innerHTML='\n        <div class="toolbar-section">\n          '.concat(t.inPage?T:b,"\n        </div>\n        ").concat(w)}else this.element[0].innerHTML='\n        <div class="toolbar-section'.concat(d,'">\n          ').concat(h,'\n          <span class="monthview-datepicker">\n            <span class="hidden month" data-month="9">9</span>\n            <span class="hidden year">2019</span>\n            <span class="audible">').concat(i("SelectDay"),'</span>\n            <span tabindex="0" aria-label="').concat(i("Today"),'" id="monthview-datepicker-field" class="datepicker input-auto" data-validation="">October 2019</span>\n          </span>\n          ').concat(o,'\n        </div>\n        <div class="toolbar-section buttonset l-align-right">\n          ').concat(t.showViewChanger?'<label for="'.concat(t.viewChangerValue,'-calendar-view-changer" class="label audible">').concat(i("ChangeView"),'</label>\n            <select id="').concat(t.viewChangerValue,'-calendar-view-changer" name="').concat(t.viewChangerValue,'-calendar-view-changer" class="dropdown">\n              <option value="month"').concat("month"===t.viewChangerValue?" selected":"",">").concat(i("Month"),'</option>\n              <option value="week"').concat("week"===t.viewChangerValue?" selected":"",">").concat(i("Week"),'</option>\n              <option value="day" ').concat("day"===t.viewChangerValue?" selected":"",">").concat(i("Day"),"</option>\n            </select>\n          </div>"):"","\n        </div>\n      ");return this.element.toolbarflex({allowTabs:!0}),this.monthPicker=this.element.find("#monthview-datepicker-field").datepicker({dateFormat:B.calendar(this.locale.name,t.language,t.calendarName).dateFormat.year,locale:t.locale,language:t.language,onOpenCalendar:t.onOpenCalendar,isMonthPicker:t.isMonthPicker,showToday:t.showToday,hitbox:t.hitbox}),t.showViewChanger&&(this.viewChanger=this.element.find("#".concat(t.viewChangerValue,"-calendar-view-changer")).dropdown()),this.todayLink=this.element.find(".hyperlink.today, .hyperlink.is-apply"),this.monthPickerApi=this.monthPicker.data("datepicker"),this.element.find("button, a").hideFocus(),this.setInternalDate(this.isIslamic?[t.year,t.month,1]:new Date(t.year,t.month,1)),H.addAttributes(this.element.find(".next"),this,t.attributes,"".concat(t.viewChangerValue,"-view-btn-next")),H.addAttributes(this.element.find(".prev"),this,t.attributes,"".concat(t.viewChangerValue,"-view-btn-prev")),H.addAttributes(this.element.find(".today"),this,t.attributes,"".concat(t.viewChangerValue,"-view-today")),H.addAttributes(this.element.find("#monthview-datepicker-field + .trigger"),this,t.attributes,"".concat(t.viewChangerValue,"-view-datepicker-trigger"),!0),H.addAttributes(this.element.find("#monthview-datepicker-field"),this,t.attributes,"".concat(t.viewChangerValue,"-view-datepicker"),!0),H.addAttributes($('.monthview-header #month-calendar-view-changer [value="month"]'),this,t.attributes,"month-view-changer-month"),H.addAttributes($('.monthview-header #month-calendar-view-changer [value="week"]'),this,t.attributes,"month-view-changer-week"),H.addAttributes($('.monthview-header #month-calendar-view-changer [value="day"]'),this,t.attributes,"month-view-changer-day"),H.addAttributes($(".monthview-header #month-calendar-view-changer"),this,t.attributes,"month-view-changer"),H.addAttributes($('.week-view-header #week-calendar-view-changer [value="month"]'),this,t.attributes,"week-view-changer-month"),H.addAttributes($('.week-view-header #week-calendar-view-changer [value="week"]'),this,t.attributes,"week-view-changer-week"),H.addAttributes($('.week-view-header #week-calendar-view-changer [value="day"]'),this,t.attributes,"week-view-changer-day"),H.addAttributes($(".week-view-header #week-calendar-view-changer"),this,t.attributes,"week-view-changer"),this},setInternalDate:function(e){B.isIslamic(this.locale.name)?(this.currentYear=e[0],this.currentMonth=e[1],this.currentDay=e[2],this.currentDateIslamic=e):(this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentDay=e.getDate(),this.currentDate=e),(!this.currentCalendar||!this.currentCalendar.months)&&(this.currentCalendar=B.calendar(this.locale.name,this.settings.language,this.settings.calendarName));var t=Jt.isBelow("slim")&&this.currentCalendar.months?"".concat(this.currentCalendar.months.abbreviated[this.currentMonth]," ").concat(this.currentYear):B.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language});this.monthPicker.text(t);var i=this.currentCalendar.months?this.currentCalendar.months.wide[this.currentMonth]:"";if(this.element.find("span.month").attr("data-month",this.currentMonth).text(i),this.element.find("span.year").text(" ".concat(this.currentYear)),this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1)){var o=B.formatDate(this.currentDate,{date:"year",locale:this.locale.name}).split(" "),l=o[0];3===o.length&&this.element.find("span.month").attr("data-month",this.currentMonth).text("".concat(o[1]," ").concat(o[2])),this.element.find("span.year").text("".concat(l," ")),this.element.find("span.year").insertBefore(this.element.find("span.month"))}return this},setCurrentCalendar:function(){return this.currentCalendar=B.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},setLocale:function(){var e=this;return this.settings.language?(B.getLocale(this.settings.language),this.language=this.settings.language):this.language=B.currentLanguage.name,!this.settings.locale||this.locale&&this.locale.name===this.settings.locale?this.settings.locale||(this.locale=B.currentLocale,this.setCurrentCalendar()):B.getLocale(this.settings.locale).done(function(t){e.locale=B.cultures[t],e.language=e.settings.language||e.locale.language,e.setCurrentCalendar()}),this},setViewChangerValue:function(e){var t;this.settings.viewChangerValue=e,null===(t=this.viewChanger)||void 0===t||null===(t=t?.val(e))||void 0===t||t?.trigger("updated")},handleEvents:function(){var e=this,t=this;return this.monthPicker.off("change.calendar-toolbar-p").on("change.calendar-toolbar-p",function(){var i=$(this).data("datepicker");t.setInternalDate(i.isIslamic?i.currentDateIslamic:i.currentDate),t.element.trigger("change-date",{selectedDate:i.currentDate,isToday:!1})}),this.todayLink.off("click.calendar-toolbar-t").on("click.calendar-toolbar-t",function(i){var n={selectedDate:e.currentDate,isToday:!0};!i.target.classList.contains("today")&&i.target.classList.contains("apply")&&(n.isToday=!1,n.isApply=!0),e.element.trigger("change-date",n),i.preventDefault()}),this.element.find(".prev").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",function(){e.element.trigger("change-prev",{selectedDate:e.currentDate,isToday:!1})}),this.element.find(".next").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",function(){e.element.trigger("change-next",{selectedDate:e.currentDate,isToday:!1})}),this.settings.onChangeView&&this.viewChanger&&this.viewChanger.off("change.calendar-toolbar-v").on("change.calendar-toolbar-v",function(i){e.settings.onChangeView({viewName:i.currentTarget.value,elem:i.currentTarget,api:e})}),this},resize:function(){if(this.viewChanger&&(Jt.isBelow("phablet")?(this.viewChanger.next().addClass("dropdown-wrapper-small"),this.viewChanger.next().find(".dropdown").css({width:"".concat(Jt.isBelow("phone")?"60":"90","px")}),$(".today").css(Jt.isBelow("slim")?{display:"none"}:{})):(this.viewChanger.next().removeClass("dropdown-wrapper-small"),this.viewChanger.next().find(".dropdown").removeAttr("style"),$(".today").removeAttr("style"))),this.monthPicker){var e=Jt.isBelow("slim")&&this.currentCalendar.months?"".concat(this.currentCalendar.months.abbreviated[this.currentMonth]," ").concat(this.currentYear):B.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language});this.monthPicker.text(e)}},handleResize:function(){return this.resize(),$(window).on("resize",this.resize),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,Sd)),this.teardown().init()},teardown:function(){return $(window).off("resize",this.resize),this.element.off(),this.monthPicker.off(),this.todayLink.off(),this.element.find(".prev .next").off(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],gl)}};var vl="monthview",Ad=[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],Nf={locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),activeDate:null,activeDateIslamic:null,isPopup:!1,inPage:!1,inPageTitleAsButton:!0,inPageToggleable:!0,inPageExpanded:!0,headerStyle:"full",firstDayOfWeek:null,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},legend:[],hideDays:!1,showMonthYearPicker:!0,showWeekNumber:!1,yearsAhead:3,yearsBack:2,range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1},displayRange:{start:"",end:"",months:{showAbbr:!1}},selectable:!0,onSelected:null,onKeyDown:null,showToday:!0,showNextPrevious:!0,onChangeView:null,isMonthPicker:!1,hitbox:!1};function ml(s,e){this.settings=H.mergeSettings(s,e,Nf),this.settings.legend&&0===this.settings.legend.length&&(this.settings.legend=Ad),this.element=$(s),this.init()}ml.prototype={init:function(){return this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=B.getLocale(this.settings.language),i=B.getLocale(this.settings.locale);$.when(i,t).done(function(n,a){e.locale=B.cultures[n]||B.currentLocale,e.language=a||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.settings.displayRange.start&&e.settings.displayRange.end?e.buildRange():e.build()})},build:function(){var e=this;if("false"===this.settings.showMonthYearPicker&&(this.settings.showMonthYearPicker=!1),this.settings.inPage=st.toBoolean(this.settings.inPage),this.settings.inPage){var t="is-inpage".concat(this.settings.inPageToggleable?"":" not-toggleable");this.element.addClass(t),this.settings.yearsAhead=4,this.settings.yearsBack=1}this.setCurrentCalendar(),this.prevButton=""+'<button type="button" class="btn-icon prev">\n        '.concat($.createIcon("caret-left"),"\n        <span>").concat(B.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.nextButton=""+'<button type="button" class="btn-icon next">\n        '.concat($.createIcon("caret-right"),"\n        <span>").concat(B.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.table=$('<table class="monthview-table" aria-label="'.concat(B.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$("<thead>\n        <tr>\n          <th>SU</th>\n          <th>MO</th>\n          <th>TU</th>\n          <th>WE</th>\n          <th>TH</th>\n          <th>FR</th>\n          <th>SA</th>\n        </tr>\n      </thead>").appendTo(this.table),this.days=$('<tbody>\n        <tr>\n          <td class="alternate">26</td>\n          <td class="alternate">27</td>\n          <td class="alternate">28</td>\n          <td class="alternate">29</td>\n          <td class="alternate" >30</td>\n          <td class="alternate">31</td>\n          <td>1</td>\n        </tr><tr>\n          <td>2</td>\n          <td>3</td>\n          <td>4</td>\n          <td>5</td>\n          <td>6</td>\n          <td>7</td>\n          <td>8</td>\n        </tr><tr>\n          <td>9</td>\n          <td>10</td>\n          <td>11</td>\n          <td>12</td>\n          <td>13</td>\n          <td>14</td>\n          <td>15</td>\n        </tr><tr>\n          <td>16</td>\n          <td>17</td>\n          <td>18</td>\n          <td>19</td>\n          <td class="is-today">20</td>\n          <td>21</td>\n          <td>22</td>\n        </tr><tr>\n          <td>23</td>\n          <td>24</td>\n          <td>25</td>\n          <td>26</td>\n          <td>27</td>\n          <td>28</td>\n          <td class="alternate">1</td>\n        </tr><tr>\n          <td class="alternate">2</td>\n          <td class="alternate">3</td>\n          <td class="alternate">4</td>\n          <td class="alternate">5</td>\n          <td class="alternate">6</td>\n          <td class="alternate">7</td>\n          <td class="alternate">8</td>\n        </tr>\n      </tbody>').appendTo(this.table),this.monthYearPane=$(""),this.settings.showMonthYearPicker&&(this.settings.isPopup||this.settings.inPage)&&(this.monthYearPane=$('<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",'">\n        <div class="expandable-pane">\n          <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>\n        </div>\n      </div>')));var i="";this.settings.inPage&&this.settings.inPageToggleable&&(i=$('<div class="monthview-inpage-calendar expandable-area'.concat(this.settings.inPageExpanded?" is-expanded":"",'"><div class="expandable-pane"></div></div>'))).find(".expandable-pane").append(this.table),this.settings.hideDays&&(this.table="");var n=this.settings.inPage&&this.settings.inPageToggleable&&""!==this.table?i:this.table;this.settings.showWeekNumber&&(this.weekNumberTable=$('<table class="monthview-week-table" role="application"></table>'),this.weekHeader=$(""+"<thead>\n          <tr>\n            <th><span>".concat(B.translate("WeekNumber"),"</span></th>\n          </tr>\n        </thead>")).appendTo(this.weekNumberTable),this.weekNumber=$("<tbody></tbody>").appendTo(this.weekNumberTable),this.getWeekNumbers(this.settings.month,this.settings.year),this.monthAndWeekContainer=$('<div class="monthview-week-container"></div>'),this.monthAndWeekContainer.append(this.weekNumberTable),this.monthAndWeekContainer.append(n)),this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),"full"===this.settings.headerStyle?this.monthPicker=this.header.find("#monthview-datepicker-field"):this.settings.showToday&&this.header.find(".btn-icon.prev").before('<a class="hyperlink today" href="#">'.concat(B.translate("Today",{locale:this.locale.name,language:this.language}),"</a>")),this.showMonth(this.settings.month,this.settings.year),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,this.settings.showWeekNumber?this.monthAndWeekContainer:n),this.settings.showWeekNumber&&this.calendar.addClass("has-monthview-week-table"),this.settings.isPopup||this.settings.inPage||this.element.addClass("is-fullsize"),this.addLegend();var a=new Date,o={onOpenCalendar:function(){return e.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,showNextPrevious:this.settings.showNextPrevious,isMonthPicker:"full"===this.settings.headerStyle,isAlternate:"full"!==this.settings.headerStyle,isMenuButton:!("full"===this.settings.headerStyle&&!this.settings.inPage)&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,attributes:this.settings.attributes,inPage:this.settings.inPage,inPageTitleAsButton:this.settings.inPageTitleAsButton,hitbox:this.settings.hitbox};return"function"==typeof this.settings.disable.callback?$.when(this.isDateDisabled(a.getFullYear(),a.getMonth(),a.getDate())).then(function(l){o.disableToday=l}):o.disableToday=this.isDateDisabled(a.getFullYear(),a.getMonth(),a.getDate()),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new Do(this.calendarToolbarEl[0],o),this.element.find("td:not('.alternate')").attr("tabindex","-1"),this.handleEvents(),H.addAttributes(this.element,this,this.settings.attributes),this},buildRange:function(){var e=this,t=864e5,i=new Date(this.settings.displayRange.start),n=new Date(this.settings.displayRange.end),a=Zt.isDaylightSavingTime(i)&&!Zt.isDaylightSavingTime(n)?n:new Date(n.getTime()+t),o=Zt.firstDayOfWeek(i,this.settings.firstDayOfWeek,!0),l=Math.ceil((a-o)/(7*t));if(this.settings.showMonthYearPicker=!1,this.settings.inPage=st.toBoolean(this.settings.inPage),this.settings.inPage){var d="is-inpage".concat(this.settings.inPageToggleable?"":" not-toggleable");this.element.addClass(d),this.settings.yearsAhead=4,this.settings.yearsBack=1}this.setCurrentCalendar(),this.table=$('<table class="monthview-table" aria-label="'.concat(B.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$("<thead>\n        <tr>\n          <th>SU</th>\n          <th>MO</th>\n          <th>TU</th>\n          <th>WE</th>\n          <th>TH</th>\n          <th>FR</th>\n          <th>SA</th>\n        </tr>\n      </thead>").appendTo(this.table),this.day="\n    <tr>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n    </tr>\n    ",this.days=$(""+"<tbody>\n       ".concat(Array(l).fill(this.day).join(""),"\n      </tbody>")).appendTo(this.table),this.monthYearPane=$(""),this.settings.showMonthYearPicker&&(this.settings.isPopup||this.settings.inPage)&&(this.monthYearPane=$('<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",'">\n        <div class="expandable-pane">\n          <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>\n        </div>\n      </div>')));var h="";this.settings.inPage&&this.settings.inPageToggleable&&(h=$('<div class="monthview-inpage-calendar expandable-area'.concat(this.settings.inPageExpanded?" is-expanded":"",'"><div class="expandable-pane"></div></div>'))).find(".expandable-pane").append(this.table),this.settings.hideDays&&(this.table="");var p=this.settings.inPage&&this.settings.inPageToggleable&&""!==this.table?h:this.table;return this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),this.header.addClass("hidden"),this.showRange(this.settings.displayRange.start,this.settings.displayRange.end),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,p),this.settings.isPopup||this.settings.inPage||this.element.addClass("is-fullsize"),this.addLegend(),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new Do(this.calendarToolbarEl[0],{onOpenCalendar:function(){return e.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,showNextPrevious:this.settings.showNextPrevious,isMonthPicker:"full"===this.settings.headerStyle,isAlternate:"full"!==this.settings.headerStyle,isMenuButton:!("full"===this.settings.headerStyle&&!this.settings.inPage)&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,attributes:this.settings.attributes,inPage:this.settings.inPage,inPageTitleAsButton:this.settings.inPageTitleAsButton}),this.handleEvents(),H.addAttributes(this.element,this,this.settings.attributes),this},setCurrentCalendar:function(){this.currentCalendar=B.calendar(this.locale.name,this.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions},setMonthYearFromPane:function(){var e=parseInt(this.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),t=parseInt(this.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);!isNaN(t)&&!isNaN(e)&&this.showMonth(t,e),this.monthYearPane.data("expandablearea").close()},loadLegend:function(e){if(!(void 0===e||e.length<1)){this.settings.legend=e,this.addLegend();var t=this,i=this.currentMonth,n=this.currentYear;this.days.find("td").removeClass("is-colored"),e.forEach(function(a){if(a.dates&&a.dates.forEach(function(h){var p=new Date(h),v=p.getMonth(),b=p.getDate(),w=p.getFullYear(),T=t.days.find("td[data-key=".concat(st.padDate(w,v,b),"]"));T.length&&t.setLegendColor(T,w,v,b)}),a.dayOfWeek){var o=new Date(n,i+1,0),l=o.getDate(),d=o.getDay();a.dayOfWeek.forEach(function(h){var p;d===h?(p=t.days.find("td[data-key=".concat(st.padDate(n,i,l),"]")),t.setLegendColor(p,n,i,l)):d>h&&(p=t.days.find("td[data-key=".concat(st.padDate(n,i,l-(d-h)),"]")),t.setLegendColor(p,n,i,l-(d-h)));for(var v=l-(d+1);v-(6-h)>0;v-=7)p=t.days.find("td[data-key=".concat(st.padDate(n,i,v-(6-h)),"]")),t.setLegendColor(p,n,i,v-(6-h))})}})}},getWeekCount:function(e,t){var i=new Date(t,e-1,1),n=new Date(t,e,0),a=i.getDay()+n.getDate();return Math.ceil(a/7)},getWeekNumbers:function(e,t){this.weekNumber.empty();for(var i="",n=this.getWeekCount(e+1,t),a=new Date(t,e,1),o=new Date(a.getFullYear(),0,1),l=Math.ceil(((a.getTime()-o.getTime())/864e5+o.getDay()+1)/7),d=0;d<n;d++)i+="<tr><td><span>".concat(l+d,"</span></td></tr>");this.weekNumber.append(i)},showMonth:function(e,t){var i=this;this.element.trigger("beforemonthrendered");var l,n=this,a=this.settings,o=new Date;if(o.setHours(0),o.setMinutes(0),o.setSeconds(0),void 0!==this.toUpdate&&this.toUpdate&&(a.activeDateIslamic=null,delete this.currentDay,delete this.toUpdate),l=this.isIslamic?a.activeDate||B.gregorianToUmalqura(o):a.activeDate&&a.activeDate.getDate()?a.activeDate:o,this.setCurrentCalendar(),this.isIslamic)if(a.activeDateIslamic)l=a.activeDateIslamic;else{var d=new Date(t,e,this.currentDay||this.settings.day),h=B.gregorianToUmalqura(d);this.todayDateIslamic=B.gregorianToUmalqura(o),a.activeDateIslamic=[],a.activeDateIslamic[0]=h[0],a.activeDateIslamic[1]=h[1],a.activeDateIslamic[2]=h[2],t=h[0],e=h[1],l=h,this.currentDay=h[2]}t.toString().length<4&&(t=(new Date).getFullYear()),12===e&&(t++,this.currentMonth=e=0,this.currentYear=t,this.currentDate.setFullYear(t),this.currentDate.setMonth(e)),e<0&&(t--,this.currentMonth=e=11,this.currentYear=t,this.currentDate.setFullYear(t),this.currentDate.setMonth(e)),this.currentDay=this.currentDay||this.settings.day,(!this.currentCalendar||!this.currentCalendar.days)&&(this.currentCalendar=B.calendar(this.locale.name,this.language,this.settings.calendarName));var p=this.currentCalendar.days.narrow;p=p||this.currentCalendar.days.abbreviated,a.isPopup||a.inPage||(p=this.currentCalendar.days.abbreviated);var v=this.currentCalendar.months.wide[e];this.currentMonth=e,this.currentYear=t,this.settings.showWeekNumber&&this.getWeekNumbers(this.currentMonth,this.currentYear);var b=this.currentCalendar.firstDayofWeek||0;if(a.firstDayOfWeek&&(b=a.firstDayOfWeek),this.dayNames.find("th").each(function(we){$(this).text(p[(we+b)%7])}),this.yearFirst=this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1),this.header.find(".month").attr("data-month",e).text("".concat(Fe.stripTags(v)," ")),this.header.find(".year").text(" ".concat(t)),this.yearFirst&&!this.isIslamic&&!this.isRTL){l.setFullYear(t);var T=B.formatDate(l,{date:"year",locale:this.locale.name}).split(" ")[0];this.header.find(".year").text("".concat(T," ")),this.header.find(".year").insertBefore(this.header.find(".month"))}"full"===a.headerStyle&&this.calendarToolbarAPI&&this.calendarToolbarAPI.setInternalDate(this.isIslamic?[t,e,1]:new Date(t,e,1)),this.appendMonthYearPicker(e,t);var O,_,G,A=(this.firstDayOfMonth(t,e)-b+7)%7,M=this.daysInMonth(t,e+(this.isIslamic?1:0)),L=this.daysInMonth(t,e+(this.isIslamic?0:1)),z=1,q=1,j=!1,X=function(re,Ne){j=Ne,re.addClass("is-selected".concat(a.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")};if(this.dayMap=[],this.days.find("td").each(function(we){var re=$(this).removeClass("alternate prev-month next-month is-selected range is-today"),Ne=a.inPage?" is-ripple":"";if(re.removeAttr("aria-selected"),re.removeAttr("tabindex"),we<A&&(n.setDisabled(re,O=0===e?t-1:t,_=0===e?11:e-1,G=M-A+1+we),n.setLegendColor(re,O,_,G),n.dayMap.push({key:st.padDate(O,_,G),elem:re}),re.addClass("alternate prev-month").html('<span class="day-container'.concat(Ne,'"><span aria-hidden="true" class="day-text">').concat(Fe.stripTags(G),"</span></span>")),re.attr("data-key",st.padDate(O,_,G))),we>=A&&q<=L){if(n.dayMap.push({key:st.padDate(t,e,q),elem:re}),re.html('<span class="day-container'.concat(Ne,'"><span aria-hidden="true" class="day-text">').concat(Fe.stripTags(q),"</span></span>")),re.attr("data-key",st.padDate(t,e,q)),n.isIslamic)q===l[2]&&X(re,!0);else{var le=l.getHours(),Te=l.getMinutes(),ge=n.isSeconds?l.getSeconds():0,ce=function(He){return He?He.setHours(le,Te,ge,0):0},Be=ce(new Date(t,e,q));(!a.day||a.activeDate)&&Be===ce(l||n.currentDate)&&X(re,!0)}q===n.todayDay&&n.currentMonth===n.todayMonth&&n.currentYear===n.todayYear&&re.addClass("is-today"),re.attr("aria-label",B.formatDate(new Date(n.currentYear,n.currentMonth,q),{date:"full",locale:n.locale.name}));var Oe=st.padDate(n.currentYear,n.currentMonth,q);return re.attr("data-key",Oe),n.setDisabled(re,t,e,q),n.setLegendColor(re,t,e,q),re.attr("role","link"),void q++}q>=L+1&&(n.dayMap.push({key:st.padDate(O=11===e?t+1:t,_=11===e?0:e+1,G=z),elem:re}),n.setDisabled(re,O,_,G),n.setLegendColor(re,O,_,G),re.addClass("alternate next-month").html('<span class="day-container'.concat(Ne,'"><span aria-hidden="true" class="day-text">').concat(z,"</span></span>")),re.attr("data-key",st.padDate(O,_,G)),z++)}),!j&&!a.range.useRange){var fe=n.dayMap.filter(function(we){return we.key===st.padDate(t,e,i.settings.day)});fe.length&&X(fe[0].elem,!1)}var he=this.days.find("tr").eq(5);7===he.find("td.alternate").length?he.hide():he.show(),this.currentDate||(this.isIslamic?(this.currentDateIslamic=[this.currentYear,this.currentMonth,this.currentDay],this.currentDate=B.umalquraToGregorian(this.currentYear,this.currentMonth,this.currentDay),this.focusDate=B.umalquraToGregorian(this.currentYear,this.currentMonth,this.currentDay)):(this.currentDate=new Date(this.currentYear,this.currentMonth,this.currentDay),this.focusDate=new Date(this.currentYear,this.currentMonth,this.currentDay),null!==this.settings.activeDate&&this.settings.activeDate instanceof Date&&(this.focusDate=this.settings.activeDate))),this.setRangeSelection(),this.validatePrevNext(),!a.range.useRange&&0===this.element.find("td.is-selected").length&&(this.element.find("td[tabindex]").removeAttr("tabindex"),this.element.find("td:not(.alternate) .day-text").first().closest("td").attr("tabindex","0")),this.setCurrentDay(),this.element.trigger("monthrendered",{year:t,month:e,elem:this.element,api:this}),this.element.trigger("aftermonthrendered")},showRange:function(e,t){var v,i=this,n=new Date,a=new Date(e),o=new Date(t),l=parseInt(a.getMonth(),10),d=parseInt(a.getFullYear(),10),h=Zt.monthDiff(a,o),p=this.settings;if(!p.disable.minDate&&!p.disable.MaxDate&&(p.disable.minDate=Zt.subtract(a,1,"days").toISOString(),p.disable.maxDate=Zt.add(o,1,"days").toISOString()),n.setHours(0),n.setMinutes(0),n.setSeconds(0),v=this.isIslamic?p.activeDate||B.gregorianToUmalqura(n):p.activeDate&&p.activeDate.getDate()?p.activeDate:n,this.setCurrentCalendar(),this.isIslamic)if(p.activeDateIslamic)v=p.activeDateIslamic;else{var b=new Date(d,l,this.currentDay||this.settings.day),w=B.gregorianToUmalqura(b);this.todayDateIslamic=B.gregorianToUmalqura(n),p.activeDateIslamic=[],p.activeDateIslamic[0]=w[0],p.activeDateIslamic[1]=w[1],p.activeDateIslamic[2]=w[2],d=w[0],l=w[1],v=w,this.currentDay=w[2]}d.toString().length<4&&(d=(new Date).getFullYear()),(!this.currentCalendar||!this.currentCalendar.days)&&(this.currentCalendar=B.calendar(this.locale.name,this.language,this.settings.calendarName));var T=this.currentCalendar.days.narrow;T=T||this.currentCalendar.days.abbreviated,p.isPopup||p.inPage||(T=this.currentCalendar.days.abbreviated);var k=this.currentCalendar.firstDayofWeek||0;p.firstDayOfWeek&&(k=p.firstDayOfWeek),this.dayNames.find("th").each(function(re){$(this).text(T[(re+k)%7])});var A=Zt.firstDayOfWeek(a,this.settings.firstDayOfWeek,!0),M=A.getDate(),L=!1,z=A.getMonth(),q=A.getFullYear(),O=z,_=q;h=Zt.monthDiff(A,o);for(var G=new Map,j=0;j<=h;j++)(O=z+j)>11&&(_+=1,O%=12),G.set(O,this.daysInMonth(_,O+(this.isIslamic?0:1)));var X=function(Ne,le){L=le,Ne.addClass("is-selected".concat(p.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")},fe=G.get(z),he=new Set(G.keys());if(this.dayMap=[],this.days.find("td").each(function(){var re,Ne=$(this).removeClass("alternate prev-month next-month is-selected range is-today"),le=p.inPage?" is-ripple":"";if(Ne.removeAttr("aria-selected"),Ne.removeAttr("tabindex"),i.isIslamic)M===v[2]&&X(Ne,!0);else{var Te=v.getHours(),ge=v.getMinutes(),ce=i.isSeconds?v.getSeconds():0,Be=function(ti){return ti?ti.setHours(Te,ge,ce,0):0};Be(new Date(q,z,M))===Be(i.currentDate||v)&&X(Ne,!0)}if(M>fe&&(++z>11&&(z=0,q++),fe=G.get(z),M=1),M===i.todayDay&&z===i.todayMonth&&q===i.todayYear&&Ne.addClass("is-today"),i.dayMap.push({key:st.padDate(q,z,M),elem:Ne}),Ne.html('<span class="day-container'.concat(le,'"><span aria-hidden="true" class="day-text">').concat(Fe.stripTags(M),"</span></span>")),Ne.attr("data-key",st.padDate(q,z,M)),i.isIslamic)M===v[2]&&X(Ne,!0);else{var ot=v.getHours(),He=v.getMinutes(),Ae=i.isSeconds?v.getSeconds():0,We=function(ti){return ti?ti.setHours(ot,He,Ae,0):0};We(new Date(_,O,M))===We(i.currentDate||v)&&X(Ne,!0)}M===i.todayDay&&z===i.todayMonth&&q===i.todayYear&&Ne.addClass("is-today"),Ne.attr("aria-label",B.formatDate(new Date(q,z,M),{date:"full",locale:i.locale.name}));var zt=st.padDate(q,z,M);Ne.attr("data-key",zt),i.setDisabled(Ne,q,z,M),i.setLegendColor(Ne,q,z,M),i.setMonthLabel(Ne,q,z,M,he,null===(re=p.displayRange.months)||void 0===re?void 0:re?.showAbbr),Ne.attr("role","link"),M++}),!L){var we=i.dayMap.filter(function(re){return re.key===st.padDate(n.getFullYear(),n.getMonth(),n.getDate())});we.length&&X(we[0].elem,!1)}this.element.trigger("rangerendered",{year:d,month:l,elem:this.element,api:this})},getTime:function(e,t){if(this.isIslamic)return e[0]+"0".concat(e[1]).slice(-2)+"0".concat(e[2]).slice(-2);if(t){var i=new Date(e);return i.setHours(0,0,0),i.getTime()}return e.getTime()},setRangeSelection:function(){if(this.settings.range.useRange){var e={};e.date=new Date(this.currentYear,this.currentMonth,1),e.date.setDate(e.date.getDate()-(this.days.find(".prev-month:visible").length+1));var t=st.padDate(e.date.year||e.date[0],e.date.month||e.date[1],e.date.day||e.date[2]);e.cell=this.days.find('[data-key="'.concat(t,'"]')),this.setRangeOnCell(!this.settings.range.second&&e.cell)}},appendMonthYearPicker:function(e,t){var i=this;if(this.settings.showMonthYearPicker){var n='<ul class="picklist is-month">',a=this.settings.inPage?' class="is-ripple"':"",o=this.currentCalendar.months.wide;n+='<li class="picklist-item up"><a href="#" tabindex="0"'.concat(a,'><span class="audible">').concat(B.translate("PreviousMonth"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>');for(var d=e<6?0:6,h=0;h<6;h++){var p=h+d,v=o[p];n+='<li class="picklist-item'.concat(p===e?" is-selected ":"",'"><a href="#" tabindex="').concat(p===e?"0":"-1",'" data-month="').concat(p,'"').concat(a,">").concat(v,"</a></li>")}n+='<li class="picklist-item down">\n        <a tabindex="0"'.concat(a,'>\n          <span class="audible">').concat(B.translate("NextMonth"),'</span>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-down"></use>\n          </svg>\n        </a>\n      </li></ul>'),this.monthYearPane.find(".picklist-section.is-month").empty().append(n);var b=[],w='<ul class="picklist is-year">';w+='<li class="picklist-item up"><a href="#" tabindex="0"'.concat(a,'><span class="audible">').concat(B.translate("PreviousYear"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>');for(var T=this.settings.yearsBack;T>=1;T--)b.push(parseInt(t,10)-T);b.push(t);for(var k=1;k<=this.settings.yearsAhead;k++)b.push(parseInt(t,10)+k);b.map(function(A){w+='<li class="picklist-item'.concat(t===A?" is-selected ":"",'"><a href="#" tabindex="').concat(t===A?"0":"-1",'" data-year="').concat(A,'"').concat(a,">").concat(A,"</a></li>")}),w+='<li class="picklist-item down">\n        <a tabindex="0"'.concat(a,'>\n          <span class="audible">').concat(B.translate("NextYear"),'</span>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-down"></use>\n          </svg>\n        </a>\n      </li></ul>'),this.monthYearPane.find(".picklist-section.is-year").empty().append(w),this.yearFirst&&this.monthYearPane.addClass("is-yearfirst"),H.addAttributes(this.monthYearPane.find(".picklist-section.is-year .picklist-item.up a"),this,this.settings.attributes,"btn-picklist-year-up"),H.addAttributes(this.monthYearPane.find(".picklist-section.is-year .picklist-item.down a"),this,this.settings.attributes,"btn-picklist-year-down"),this.settings.inPage&&(H.addAttributes(this.monthYearPane.find(".btn-inpage-cal"),this,this.settings.attributes,"btn-inpage-cal"),H.addAttributes(this.monthYearPane.find(".btn-cal-month-year"),this,this.settings.attributes,"btn-cal-month-year"),H.addAttributes(this.monthYearPane.find(".btn-monthyear-pane"),this,this.settings.attributes,"btn-monthyear"),H.addAttributes(this.monthYearPane.find(".apply"),this,this.settings.attributes,"btn-apply"),H.addAttributes(this.monthYearPane.find(".picklist-section.is-month .picklist-item.up a"),this,this.settings.attributes,"btn-picklist-month-up"),H.addAttributes(this.monthYearPane.find(".picklist-section.is-month .picklist-item.down a"),this,this.settings.attributes,"btn-picklist-month-down")),this.monthYearPane.find(".is-year .picklist-item").not(".up, .down").each(function(){var A=$(this).find("a");H.addAttributes(A,i,i.settings.attributes,"btn-picklist-".concat(A.text().toLowerCase()))}),this.monthYearPane.find(".is-month .picklist-item").not(".up, .down").each(function(A){H.addAttributes($(this).find("a"),i,i.settings.attributes,"btn-picklist-".concat(A))})}},firstDayOfMonth:function(e,t){if(this.isIslamic){var i=B.umalquraToGregorian(e,t,1);return null===i?1:i.getDay()}return new Date(e,t,1).getDay()},daysInMonth:function(e,t){if(this.isIslamic){for(var i=this.conversions.yearInfo[this.islamicYearIndex(e)][0],a=0;a<=t;a++){if(a===t)return 29+(1&i);i>>=1}return 0}return new Date(e,t,0).getDate()},islamicYearIndex:function(e){var t=e-1318;return t<0||t>=this.conversions.yearInfo.length?0:t},setDisabled:function(e,t,i,n){var a=this.settings;function o(){e.addClass("is-disabled").attr("aria-disabled","true").removeClass("is-selected range").removeAttr("aria-selected")}if(e.removeClass("is-disabled").removeAttr("aria-disabled"),"function"==typeof a.disable.callback)$.when(this.isDateDisabled(t,i,n)).then(function(d){d&&o()});else{var l=this.isDateDisabled(t,i,n);(l&&!a.disable.isEnable||!l&&a.disable.isEnable)&&o()}},setMonthLabel:function(e,t,i,n,a,o){var d=this.settings.inPage?' class="is-ripple"':"";if(a.has(i)){var h=e.text(),p=o?this.currentCalendar.months.abbreviated[i]:this.currentCalendar.months.wide[i];a.delete(i),e.html('<span class="day-container'.concat(d,'"><span aria-hidden="true" class="day-text month-label">').concat(p," ").concat(h,"</span></span>"))}},isDateDisabled:function(e,t,i){var n=this.settings;if("function"==typeof n.disable.callback){var a=$.Deferred();return $.when(n.disable.callback(e,t,i)).then(function(L){a.resolve(L)}),a.promise()}var o="string"==typeof n.disable.minDate?n.disable.minDate.replace(/-/g,"/"):n.disable.minDate,l="string"==typeof n.disable.maxDate?n.disable.maxDate.replace(/-/g,"/"):n.disable.maxDate,d=new Date(o).setHours(0,0,0,0),h=new Date(l).setHours(0,0,0,0),p=this.isIslamic?B.umalquraToGregorian(e,t,i):new Date(e,t,i);if(!p)return!1;if(-1!==n.disable.dayOfWeek.indexOf(p.getDay()))return!0;if(n.legend)for(var v=0;v<n.legend.length;v++)if(n.legend[v].disableWeek&&-1!==n.legend[v].disableWeek.indexOf(p.getDay()))return!0;var b=p.getFullYear();if((p=p.setHours(0,0,0,0))<=d||p>=h)return!0;/string|number/.test(rt(n.disable.years))&&(n.disable.years=[n.disable.years]);for(var w=0,T=n.disable.years.length;w<T;w++)if(b===Number(n.disable.years[w]))return!0;n.disable.dates.length&&"string"==typeof n.disable.dates&&(n.disable.dates=[n.disable.dates]);for(var k=0,A=n.disable.dates.length;k<A;k++)if(p===new Date(n.disable.dates[k]).setHours(0,0,0,0))return!0;return!1},getDateRange:function(e,t,i){var n=[],a=this.isIslamic?Mi(e):new Date(e);for(i=typeof i<"u"?i:this.settings.range.includeDisabled;this.getTime(t)>=this.getTime(a);)(i||!i&&!this.isDateDisabled(this.isIslamic?a[0]:a.getFullYear(),this.isIslamic?a[1]:a.getMonth(),this.isIslamic?a[2]:a.getDate()))&&n.push(this.isIslamic?a:new Date(a)),this.isIslamic?a[2]+=1:a.setDate(a.getDate()+1);return n},setLegendColor:function(e,t,i,n){if(this.settings.showLegend&&e[0]){var a=this,o=this.settings.inPage?e.find(".day-text"):e;if(o[0]){var l=this.getLegendColor(t,i,n);if(o[0].style.backgroundColor="",o.off("mouseenter.legend mouseleave.legend"),l){var d;if(-1===l.indexOf("#")){var h=l.replace(/[0-9]/g,""),p=10*l.substr(l.length-2,2);l=Et.themeColors().palette[h][p].value}var v=xt.hexToRgba(l,.3),b=xt.hexToRgba(l,.7),w=null===(d=this.table[0])||void 0===d?void 0:d?.querySelector("thead th");e.addClass("is-colored"),o[0].setAttribute("data-hex",l),a.settings.inPage?o[0].style.setProperty("--legendcolor",v):o[0].style.backgroundColor=v,o.on("mouseenter.legend",function(){var T=$(this),k=T.find("span")[0],A=T.find(".day-text")[0],M=window.getComputedStyle(w).getPropertyValue("color");this.style.backgroundColor=b,a.settings.inPage&&(this.style.color=M),k&&(k.style.backgroundColor="transparent"),A&&(A.style.backgroundColor="transparent")}).on("mouseleave.legend",function(){var T=$(this),k=T.find("span")[0],A=T.find(".day-text")[0];a.settings.inPage?(this.style.color="",this.style.backgroundColor=""):this.style.backgroundColor=v,k&&(k.style.backgroundColor=""),A&&(A.style.backgroundColor="")})}}}},getLegendColor:function(e,t,i){var n=this.settings;if(n.showLegend&&n.legend){for(var a=new Date(e,t,i),o=a.setHours(0,0,0,0),l=0;l<n.legend.length;l++){var d=n.legend[l];if(d.dayOfWeek&&-1!==d.dayOfWeek.indexOf(a.getDay()))return d.color;if(d.dates)for(var h=0;h<d.dates.length;h++)if(o===new Date(d.dates[h]).setHours(0,0,0,0))return d.color}return""}},handleEvents:function(){var e=this,t=this,i=this.settings;if(this.element.off("updated.".concat(vl)).on("updated.".concat(vl),function(){e.updated()}),this.header.off("click.monthview").on("click.monthview",".btn-icon.prev, .btn-icon.next",function(){var l=$(this).is(".next"),d={},h={month:t.currentMonth,year:t.currentYear};i.range.useRange?(l?d.date=new Date(h.year,h.month+1,t.element.find(".next-month:visible").length+1):(d.date=new Date(h.year,h.month,1),d.date.setDate(d.date.getDate()-(t.days.find(".prev-month:visible").length+1))),h.month+=l?1:-1):(t.currentMonth+=l?1:-1,t.currentDate.setMonth(t.currentMonth),t.currentYear=parseInt(t.element[0].querySelector("span.year").innerText,10),t.currentDate.setFullYear(t.currentYear),h.month=t.currentMonth,h.year=t.currentYear),t.showMonth(h.month,h.year),i.range.useRange&&(d.formatedDate=B.formatDate(d.date,{date:"full",locale:t.locale.name}),d.cell=t.days.find('[aria-label="'.concat(d.formatedDate,'"]')),t.setRangeOnCell(!i.range.second&&d.cell))}),i.range.useRange&&(this.header.off("mouseover.datepicker").on("mouseover.datepicker","button",function(){i.range.extra&&t.setRangeOnCell($(this).is(".next")?i.range.extra.maxCell:i.range.extra.minCell)}).off("focus.datepicker").on("focus.datepicker","button:not(.hide-focus)",function(){i.range.extra&&t.setRangeOnCell($(this).is(".next")?i.range.extra.maxCell:i.range.extra.minCell)}),this.days.off("mouseover.datepicker").on("mouseover.datepicker","td",function(){t.setRangeOnCell(this)})),this.calendarToolbarEl&&this.calendarToolbarEl.off("change-date.monthview").on("change-date.monthview",function(l,d){if(!d.isToday||!e.settings.isPopup){if(d.isApply)return void e.setMonthYearFromPane();if(d.isToday)return void e.setToday();e.selectDay(d.selectedDate,!1,!0,"datepicker")}}),i.selectable&&this.element.addClass("is-selectable").off("click.monthview-day").on("click.monthview-day","td",function(l){var d=l.currentTarget.getAttribute("data-key");e.lastClickedKey=d,!l.currentTarget.classList.contains("is-disabled")&&e.selectDay(d,!1,!0,"cell")}),i.inPage){var n=this.element.find(".monthview-inpage-calendar");n.expandablearea({animationSpeed:150,trigger:this.element.find(i.showMonthYearPicker?"#btn-inpage-cal":"#btn-cal-month-year")}),n.on("afterexpand",function(){e.element.trigger("monthviewexpanded")}),n.on("aftercollapse",function(){e.element.trigger("monthviewcollapsed")});var a=n.data("expandablearea");if(i.showMonthYearPicker){var o=this.element.find(".monthview-monthyear-pane");o.expandablearea({animationSpeed:150,trigger:this.element.find("#btn-monthyear-pane")}).on("beforeexpand",function(){var l=a&&!a.isExpanded();o.css("position",l?"static":"")})}this.element.off("click.monthview-ripple").on("click.monthview-ripple",".is-ripple",function(l){t.setRipple(this,l)})}return this.handleMonthYearPane().handleKeys(),this},setRipple:function(e,t){var i;if(e&&null!==(i=e.classList)&&void 0!==i&&i?.contains("is-ripple")){var n=t.touches?t.touches[0]:t,a=e.getBoundingClientRect(),o=2*Math.sqrt(Math.pow(a.width,2)+Math.pow(a.height,2)),l=n.clientX?n.clientX-a.left:e.offsetWidth/2,d=n.clientY?n.clientY-a.top:e.offsetHeight/2,h=e.style.cssText,p=e.getAttribute("data-hex"),v=xt.getContrastColor(p),b={ripple:xt.getLuminousColorShade(p,"white"===v?"0.3":"-0.3"),elem:xt.hexToRgba(p,.7)},w=null!==p?"--ripple-background: ".concat(b.ripple,"; background-color: ").concat(b.elem,"; "):"";e.style.cssText="".concat(w,"--s: 0; --o: 1"),e.style.cssText="".concat(w,"--t: 1; --o: 0; --d: ").concat(o,"; --x:").concat(l,"; --y:").concat(d,";"),$(e).off("transitionend.monthview-ripple").on("transitionend.monthview-ripple",function(T){var k;"transform"===(T.propertyName||(null===(k=T.originalEvent)||void 0===k?void 0:k?.propertyName))&&(e.style.cssText=h)})}},handleMonthYearPane:function(){var e=this,t=this.settings,i=t.inPage?' class="is-ripple"':"",n=function(v){var b=e.monthYearPane[0].querySelector(".picklist.is-month"),w=e.currentCalendar.months.wide,T=b.children,k=T.length-2,A=parseInt(T["up"===v?1:k].querySelector("a").getAttribute("data-month"),10),M=$(b),L=M.find("li.is-selected"),z=L.index();L.removeClass("is-selected");var q=T[1],O=T[k],_=$('<li class="picklist-item"></li>');if("up"===v){var G=0===A?11:A-1,j='<a href="#" tabindex="-1" data-month="'.concat(G,'"').concat(i,">").concat(w[G],"</a>");_.append(j),O.remove(),_.insertBefore(q)}else{var X=11===A?0:A+1,fe='<a href="#" tabindex="-1" data-month="'.concat(X,'"').concat(i,">").concat(w[X],"</a>");_.append(fe),q.remove(),_.insertAfter(O)}t.inPage||$(M.find("li.picklist-item").get(z)).addClass("is-selected").attr("tabindex","0")},a=function(v){var b=e.monthYearPane[0].querySelector(".picklist.is-year"),w=b.children,T=w.length-2,k=parseInt(w["up"===v?1:T].querySelector("a").getAttribute("data-year"),10),A=$(b),M=A.find("li.is-selected"),L=M.index();M.removeClass("is-selected");var z=w[1],q=w[T],O=$('<li class="picklist-item"></li>');if("up"===v){var _=k-1,G=$('<a href="#" tabindex="-1" data-year="'.concat(_,'"').concat(i,">").concat(_,"</a>"));H.addAttributes(G,e,t.attributes,"btn-picklist-".concat(_)),O.append(G),q.remove(),O.insertBefore(z)}else{var j=k+1,X=$('<a href="#" tabindex="-1" data-year="'.concat(j,'"').concat(i,">").concat(j,"</a>"));H.addAttributes(X,e,t.attributes,"btn-picklist-".concat(j)),O.append(X),z.remove(),O.insertAfter(q)}t.inPage||$(A.find("li.picklist-item").get(L)).addClass("is-selected").attr("tabindex","0")},o=null;this.monthYearPane.off("touchstart.monthviewpane mousedown.monthviewpane").on("touchstart.monthviewpane mousedown.monthviewpane",".picklist.is-year li",function(p){return t.inPage&&"li"===p.target.tagName.toLowerCase()||(o=setInterval(function(){return p.currentTarget.classList.contains("up")&&a("up"),p.currentTarget.classList.contains("down")&&a("down"),p.stopImmediatePropagation(),p.stopPropagation(),!1},200)),!0}).off("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane").on("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane",".picklist.is-year li",function(){return clearInterval(o),!0});var d=function(v,b){var T,w=function(A){var M=e.monthYearPane[0].querySelector(".is-".concat(A," .is-selected a"));return!M&&t.inPage?e.monthYearPane[0].querySelector(".is-".concat(A," .picklist-item:last-child a")):M};T=t.inPage?{month:parseInt(w("month").getAttribute("data-month"),10),year:parseInt(w("year").getAttribute("data-year"),10)}:"is-month"===b?{month:parseInt(v.getAttribute("data-month"),10),year:parseInt(w("year").getAttribute("data-year"),10)}:{month:parseInt(w("month").getAttribute("data-month"),10),year:parseInt(v.getAttribute("data-year"),10)},t.range.useRange||(e.currentMonth=T.month,e.currentDate.setMonth(e.currentMonth),e.currentYear=T.year,e.currentDate.setFullYear(e.currentYear),T.month=e.currentMonth,T.year=e.currentYear),function(v,b){var w=e.monthYearPane[0].querySelector(".picklist.".concat(b," .is-selected"));de.removeClass(w,"is-selected"),w&&w.querySelector("a").setAttribute("tabindex","-1"),de.addClass(v.parentNode,"is-selected"),v.setAttribute("tabindex","0")}(v,b),e.element.hasClass("".concat(b,"only"))&&e.monthYearPane.parent().find("button.is-select-month").click()};this.monthYearPane.off("click.picklist-month").on("click.picklist-month",".picklist.is-month li",function(p){if(!t.inPage||"li"!==p.target.tagName.toLowerCase()){if(p.currentTarget.classList.contains("up"))return void n("up");if(p.currentTarget.classList.contains("down"))return void n("down");d(p.target,"is-month"),p.preventDefault()}}),this.monthYearPane.off("click.picklist-month-a").on("click.picklist-month-a",".picklist.is-month li a",function(p){p.preventDefault()}),this.monthYearPane.off("click.picklist-year").on("click.picklist-year",".picklist.is-year li",function(p){if(!t.inPage||"li"!==p.target.tagName.toLowerCase()){if(p.currentTarget.classList.contains("up"))return void a("up");if(p.currentTarget.classList.contains("down"))return void a("down");d(p.target,"is-year"),p.preventDefault()}}),this.monthYearPane.off("click.picklist-year-a").on("click.picklist-year-a",".picklist.is-year li a",function(p){p.preventDefault()}),this.monthYearPane.on("expand.monthviewpane",function(){if(!t.hideDays){if(e.element.find(".btn-icon, td.is-selected").attr("disabled","true"),e.element.find("td.is-selected").removeAttr("tabindex"),t.inPage){e.element.find(".btn-icon.prev, .btn-icon.next").hide();var p=e.element.find(".hyperlink.today, .hyperlink.apply");p.hasClass("is-apply")?p.removeClass("hidden"):p.removeClass("today is-ripple").addClass("apply").text(B.translate("Apply",{locale:e.locale.name,language:e.language}))}else e.monthYearPane.find(".content").css("height",e.header.parent().height()-e.header.height()-55),e.element.find(".hyperlink.today").hide();e.element.find(".is-select").removeClass("is-select").addClass("is-select-month-pane"),e.element.find(".is-cancel").removeClass("is-cancel").addClass("is-cancel-month-pane").text(B.translate("Cancel",{locale:e.locale.name,language:e.language}))}setTimeout(function(){e.monthYearPane.find(".is-month .is-selected a").focus(),e.monthYearPane.parent().hasClass("is-yearonly")&&e.monthYearPane.find(".is-year .is-selected a").focus()})}).on("collapse.monthviewpane",function(){if(!t.hideDays){if(t.inPage){e.element.find(".btn-icon.prev, .btn-icon.next").show();var p=e.element.find(".hyperlink.apply");p.hasClass("is-apply")?p.addClass("hidden"):p.removeClass("apply").addClass("today").text(B.translate("Today",{locale:e.locale.name,language:e.language}))}else e.element.find(".hyperlink.today").show();e.element.find(".btn-icon").removeAttr("disabled"),e.element.find("td.is-selected").attr("tabindex","0"),e.element.find(".is-select-month-pane").addClass("is-select").removeClass("is-select-month-pane"),e.element.find(".is-cancel-month-pane").addClass("is-cancel").removeClass("is-cancel-month-pane").text(B.translate("Clear",{locale:e.locale.name,language:e.language}))}}).on("aftercollapse.monthviewpane",function(){e.element.find(".hyperlink.today").addClass("is-ripple")});var h=function(v,b){var w,T=v.currentTarget,k=v.currentTarget.parentNode,A="prev"===b?k.previousSibling:k.nextSibling;A||(A=k.parentNode.children["prev"===b?k.parentNode.children.length-1:0]);var M=A.querySelector("a");T.setAttribute("tabindex","-1"),null===(w=k.parentNode.querySelector(".is-selected"))||void 0===w||w?.classList.remove("is-selected"),de.addClass(A,"is-selected"),M.setAttribute("tabindex","0"),M.focus()};return this.monthYearPane.off("keydown.monthviewpane").on("keydown.monthviewpane",".picklist-item a",function(p){var v=p.currentTarget.parentNode.classList.contains("up"),b=p.currentTarget.parentNode.classList.contains("down"),w=p.currentTarget.parentNode.parentNode.classList.contains("is-year"),T=p.currentTarget.parentNode.parentNode.classList.contains("is-month"),k=!1;"ArrowUp"===p.key&&(w||T)?(h(p,"prev"),k=!0):"ArrowDown"===p.key&&(w||T)?(h(p,"next"),k=!0):"Enter"===p.key&&(v||b?(w?a(v?"up":"down"):T&&n(v?"up":"down"),k=!0):(w||T)&&(d(p.target,w?"is-year":"is-month"),k=!0)),k&&(p.preventDefault(),e.setRipple(p.currentTarget,p))}),this},selectDay:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=!1;void 0!==a&&(o=e.getMonth()!==a.getMonth()),this.isIslamic&&"string"!=typeof e&&(this.currentDateIslamic=B.gregorianToUmalqura(e),e=st.padDate(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2])),!this.isIslamic&&"string"!=typeof e&&(e=st.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var l=this.dayMap.filter(function(w){return w.key===e}),d=parseInt(e.substr(0,4),10),h=parseInt(e.substr(4,2),10)-1,p=parseInt(e.substr(6,2),10);if(this.isIslamic?(this.currentDateIslamic=e,this.currentDate=B.umalquraToGregorian(d,h,p)):this.currentDate=new Date(d,h,p),this.currentYear=d,this.currentMonth=h,this.currentDay=p,(0===l.length||l[0].elem.hasClass("alternate"))&&(o||this.showMonth(h,d),l=this.dayMap.filter(function(w){return w.key===e})),0!==!l.length){var v=l[0].elem[0],b={node:v,key:e,day:p,month:h,year:d,close:t};null!==n&&(b.action=n),delete this.isKeyClick,this.element.find("td.is-selected").removeClass("is-selected"),$(v).addClass("is-selected"),(i="full"===this.settings.headerStyle||i)&&this.settings.onSelected&&this.settings.onSelected(v,b),i&&this.element.trigger("selected",b),o||(this.focusDate=this.currentDate,this.focusDay())}},focusDay:function(){var e=this.focusDate;if(this.isIslamic&&"string"!=typeof e){var t=B.gregorianToUmalqura(e);e=st.padDate(t[0],t[1],t[2])}!this.isIslamic&&"string"!=typeof this.focusDate&&(e=st.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var i=this.dayMap.filter(function(d){return d.key===e}),n=parseInt(e.substr(0,4),10),a=parseInt(e.substr(4,2),10)-1,o=parseInt(e.substr(6,2),10);if(this.focusDate=this.isIslamic?B.umalquraToGregorian(n,a,o):new Date(n,a,o),(0===i.length||i[0].elem.hasClass("alternate"))&&(this.showMonth(a,n),i=this.dayMap.filter(function(d){return d.key===e})),0!==!i.length){var l=i[0].elem[0];this.element.find("td[tabindex=0]").attr("tabindex","-1"),$(l).attr("tabindex","0").focus()}},setToday:function(){this.selectDay(new Date,!1,!0,"today")},setCurrentDay:function(){var e=new Date;!this.isIslamic&&"string"!=typeof date&&(e=st.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var t=this.dayMap.filter(function(n){return n.key===e});0===t.length||t[0].elem.hasClass("alternate")||0===!t.length||$(t[0].elem[0]).find(".day-text").addClass("current-day")},handleKeys:function(){var e=this,t=this.settings;this.element.off("keydown.monthview").on("keydown.monthview",".monthview-table",function(i){var n=i.keyCode||i.charCode||0,a=$(i.target),o=e.days.find("td:visible"),l=o.length,d=null,h=null,p=!1,v=new Date(t.disable.minDate),b=new Date(t.disable.maxDate),w=function(){e.datepickerApi&&t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date&&e.datepickerApi.resetRange({isData:!0})};if(e.settings.onKeyDown&&!1===e.settings.onKeyDown({e:i,key:n,cell:a,node:e.element}))return i.stopPropagation(),i.preventDefault(),!1;if(40===n){if(p=!0,!e.validateDisplayRange(Zt.add(e.focusDate,7,"days")))return!1;t.range.useRange?(d=o.index(i.target)+7,h=o.eq(d),d<l&&(w(),e.setRangeOnCell(h.is(".is-selected")?null:h),e.setRangeSelBeforeFirstSel(h),e.activeTabindex(h,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.focusDate.getMonth()<b.getMonth()||b.getDate()-1>=e.focusDate.getDate()+7)&&e.focusDate.setDate(e.focusDate.getDate()+7),e.focusDay()):(e.focusDate.setDate(e.focusDate.getDate()+7),e.focusDay())}if(38===n){if(p=!0,!e.validateDisplayRange(Zt.subtract(e.focusDate,7,"days")))return!1;t.range.useRange?(d=o.index(i.target)-7,h=o.eq(d),d>-1&&(w(),e.setRangeOnCell(h.is(".is-selected")?null:h),e.setRangeSelBeforeFirstSel(h),e.activeTabindex(h,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.focusDate.getMonth()>v.getMonth()||v.getDate()+1<=e.focusDate.getDate()-7)&&e.focusDate.setDate(e.focusDate.getDate()-7),e.focusDay()):(e.focusDate.setDate(e.focusDate.getDate()-7),e.focusDay())}if(37===n||189===n&&!i.shiftKey){if(p=!0,!e.validateDisplayRange(Zt.subtract(e.currentDate,1,"days")))return!1;t.range.useRange?(d=o.index(i.target)-1,h=o.eq(d),d>-1&&(w(),e.setRangeOnCell(h.is(".is-selected")?null:h),e.setRangeSelBeforeFirstSel(h),e.activeTabindex(h,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.focusDate.getMonth()>v.getMonth()||v.getDate()+1!==e.focusDate.getDate())&&e.focusDate.setDate(e.focusDate.getDate()-1),e.focusDay()):(e.focusDate.setDate(e.focusDate.getDate()-1),e.focusDay())}if(39===n||187===n&&i.shiftKey){if(p=!0,!e.validateDisplayRange(Zt.add(e.currentDate,1,"days")))return!1;t.range.useRange?(d=o.index(i.target)+1,h=o.eq(d),d<l&&(w(),e.setRangeOnCell(h.is(".is-selected")?null:h),e.setRangeSelBeforeFirstSel(h),e.activeTabindex(h,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.focusDate.getMonth()<b.getMonth()||b.getDate()-1!==e.focusDate.getDate())&&e.focusDate.setDate(e.focusDate.getDate()+1),e.focusDay()):(e.focusDate.setDate(e.focusDate.getDate()+1),e.focusDay())}if(33===n&&!i.altKey&&(p=!0,w(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?v.getMonth()!==e.focusDate.getMonth()&&(e.focusDate.setMonth(e.focusDate.getMonth()-1),e.focusDay()):(e.focusDate.setMonth(e.focusDate.getMonth()-1),e.focusDay())),34===n&&!i.altKey&&(p=!0,w(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?e.focusDate.getMonth()!==b.getMonth()&&(e.focusDate.setMonth(e.focusDate.getMonth()+1),e.focusDay()):(e.focusDate.setMonth(e.focusDate.getMonth()+1),e.focusDay())),33===n&&i.ctrlKey&&(p=!0,w(),e.focusDate.setFullYear(e.focusDate.getFullYear()-1),e.focusDay()),34===n&&i.ctrlKey&&(p=!0,w(),e.focusDate.setFullYear(e.focusDate.getFullYear()+1),e.focusDay()),36===n){p=!0;var A,k=e.focusDate;w(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?v.getMonth()!==e.focusDate.getMonth()?A=new Date(k.getFullYear(),k.getMonth(),1):(A=new Date(v.getFullYear(),v.getMonth(),v.getDate())).setDate(A.getDate()+1):A=new Date(k.getFullYear(),k.getMonth(),1),e.focusDate=A,e.focusDay()}if(35===n){p=!0;var L,M=e.focusDate;w(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?e.focusDate.getMonth()!==b.getMonth()?L=new Date(M.getFullYear(),M.getMonth()+1,0):(L=new Date(b.getFullYear(),b.getMonth(),b.getDate())).setDate(L.getDate()-1):L=new Date(M.getFullYear(),M.getMonth()+1,0),e.focusDate=L,e.focusDay()}if(84===n){if(t.range.useRange&&e.datepickerApi){w();var z=!(t.range.first&&t.range.first.date&&(!t.range.second||t.range.second&&!t.range.second.date));e.datepickerApi.setToday(z),!z&&e.datepickerApi&&"function"==typeof e.datepickerApi.closeCalendar&&e.datepickerApi.closeCalendar()}else e.setToday();p=!0}if(32===n||13===n){var q;if(p=!0,t.range.useRange)return(!t.range.first||t.range.first&&!t.range.first.date)&&o.removeClass("is-selected"),a.focus().trigger("click"),!1;var O=e.getCellDate(a);e.isIslamic?(e.currentDateIslamic=[O.year,O.month,O.day],e.currentDate=B.umalquraToGregorian(e.currentDateIslamic[0],e.currentDateIslamic[1],e.currentDateIslamic[2])):e.currentDate=new Date(O.year,O.month,O.day),e.selectDay(e.currentDate,!0,!0),e.setRipple(null===(q=i.target)||void 0===q?void 0:q?.querySelector(".is-ripple"),i)}return!p||(i.stopPropagation(),i.preventDefault(),!1)})},validateDisplayRange:function(e){var t,i,n=st.padDate(e.getFullYear(),e.getMonth(),e.getDate());return this.settings.disable.minDate&&this.settings.disable.maxDate?(t=new Date(this.settings.disable.minDate),i=new Date(this.settings.disable.maxDate)):this.settings.displayRange.start&&this.settings.displayRange.end&&(t=new Date(this.settings.displayRange.start),i=new Date(this.settings.displayRange.end)),!(this.settings.displayRange.start&&this.settings.displayRange.end&&(!this.dayMap.map(function(a){return a.key}).includes(n)||t&&i&&(t.getDate()>=e.getDate()&&t.getMonth()===e.getMonth()||t.getMonth()>e.getMonth()||i.getDate()<=e.getDate()&&i.getMonth()===e.getMonth()||i.getMonth()<e.getMonth())))},validatePrevNext:function(){if(this.settings.disable.restrictMonths&&this.settings.disable.minDate&&this.settings.disable.maxDate){var e=new Date(this.settings.disable.minDate),t=new Date(this.settings.disable.maxDate);if(this.element.find(".prev").prop("disabled",!1),this.element.find(".next").prop("disabled",!1),e.getFullYear()>this.currentYear||this.currentYear>t.getFullYear())return this.element.find(".prev").prop("disabled",!0),void this.element.find(".next").prop("disabled",!0);this.currentMonth-1<e.getMonth()&&this.element.find(".prev").prop("disabled",!0),this.currentMonth+1>t.getMonth()&&this.element.find(".next").prop("disabled",!0)}},addLegend:function(){var e=this.settings;if(e.showLegend&&e.legend){this.legend&&this.legend.length?this.legend.empty():this.legend=$('<div class="monthview-legend"></div>');for(var t=0;t<e.legend.length;t++){var i=e.legend[t],n=i.color;if(n&&-1===n.indexOf("#")){var a=n.replace(/[0-9]/g,""),o=10*n.substr(n.length-2,2);n=Et.themeColors().palette[a][o].value}var l=""+'<div class="monthview-legend-item">\n          <span class="monthview-legend-swatch '.concat(n?'" style="background-color: '.concat(xt.hexToRgba(n,.3)):' default"','"></span>\n          <span class="monthview-legend-text">').concat(i.name,"</span>\n        </div>");this.legend.append(l)}if(this.table.after(this.legend),e.inPage){var d=this.legend[0].querySelector(".monthview-legend-item:first-child"),h=this.legend[0].querySelector(".monthview-legend-item:last-child");if(d&&h){var p=function(b){return b?.getBoundingClientRect().top};this.legend[p(d)!==p(h)?"addClass":"removeClass"]("is-wrapped")}}}},updateMonthDetails:function(e){!e||null==e||(this.settings=H.mergeSettings(this.element[0],e,this.settings),this.settings.legend=e.legend,this.settings.showLegend&&this.addLegend())},setRangeOnCell:function(e){var t=this,i=this.settings;if(i.range.useRange&&i.range.first&&!i.range.second){var n=i.range.first,a=i.range.extra,o=a.cellLength-1,l=n.rowIdx+n.cellIdx+o*n.rowIdx;if((e=$(e)).length&&!e.is(".is-disabled, .is-selected")){var d=e.closest("tr"),h=e.index(),p=d.index(),v=p+h+o*p,b=t.getCellDate(e),w=this.getTime(this.isIslamic?[b.year,b.month,b.day]:new Date(b.year,b.month,b.day)),T=this.getDifferenceToDate(i.range.first.date,i.range.maxDays);t.days.find("td:visible").each(function(k){var A=$(this);w>t.getTime(i.range.first.date)&&!i.range.selectBackward&&(!i.range.maxDays||i.range.maxDays>0&&w<=T.aftertime)&&(k>l&&k<=v||w>t.getTime(a.max)&&k<=v)?A.addClass("range-next"):w<t.getTime(i.range.first.date)&&!i.range.selectForward&&(!i.range.maxDays||i.range.maxDays>0&&w>=T.beforetime)&&(k<l&&k>=v||w<t.getTime(a.min)&&k>=v)?A.addClass("range-prev"):A.removeClass("range-next range-prev")})}else e.length||t.days.find("td").removeClass("range-next range-prev")}!e&&i.range.second&&t.setRangeSelected()},getDifferenceToDate:function(e,t,i){var n=this,a={},o=function(d,h,p){for(d=n.isIslamic?B.umalquraToGregorian(d):new Date(d);h>0;)d.setDate(d.getDate()+(p?1:-1)),(i||!i&&!n.isDateDisabled(d.getFullYear(),d.getMonth(),d.getDate()))&&(h--,a[p?"after":"before"]=n.isIslamic?B.gregorianToUmalqura(new Date(d)):new Date(d));p&&a.after?a.aftertime=n.getTime(a.after):a.before&&(a.beforetime=n.getTime(a.before))};return i=typeof i<"u"?i:this.settings.range.includeDisabled,o(e,t),o(e,t,!0),a},setRangeSelected:function(){var e=this,t=this,i=this.settings;if(i.range.useRange&&i.range.second&&i.range.second.date&&this.days&&this.days.length){var a=i.range.data?new Date(i.range.data.start):i.range.first.date,o=i.range.data?new Date(i.range.data.end):i.range.second.date;this.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),this.days.find("td:visible").each(function(){var l=$(this),d=l.is(".is-disabled")&&!i.range.includeDisabled,p=l.is(".is-disabled")&&i.range.includeDisabled?" include-disabled":"",v=t.getTime(function(d){return e.isIslamic?[d.year,d.month,d.day]:new Date(d.year,d.month,d.day)}(t.getCellDate(l))),b=t.getTime(a,!0),w=t.getTime(o,!0);v!==b&&v!==w||d?(!t.isIslamic&&v>b&&v<w&&!d||t.isIslamic&&(b>v&&w<v||b<v&&w>v)&&!d)&&l.addClass("range-selection".concat(p)):l.addClass("is-selected".concat(p).concat(b!==w?" range-selection".concat(v!==w||t.isIslamic?"":" end-date"):""))})}},setRangeSelByClick:function(){var e=0,t=this.settings;if(t.range.useRange)if(t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date){if(t.showTime&&this.datepickerApi){var i={time1:this.getTime(t.range.first.date),time2:this.getTime(t.range.second.date),first:this.datepickerApi.setTime(t.range.first.date),second:this.datepickerApi.setTime(t.range.second.date)};i.time1!==this.getTime(i.first)&&(this.datepickerApi.setRangeToElem(i.first,!0),this.datepickerApi.setRangeToElem(i.second,!1),e=2)}e=0===e?1:e}else{var n;!t.range.first||t.range.first&&!t.range.first.date?(n=this.dayMap.filter(function(o){return o.elem.is(".is-selected")}))&&n.length&&(this.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),n[0].elem.focus().trigger("click"),e=3):(!t.range.second||t.range.second&&!t.range.second.date)&&((n=this.days.find("td.range-prev:visible").first()).length||(n=this.days.find("td.range-next:visible").last()),n.length||(n=this.dayMap.filter(function(o){return o.elem.is(".is-selected")})),n&&n.length)&&((n[0].elem||n).focus().trigger("click"),e=3)}return e},getCellDate:function(e){var t=parseInt(e.text(),10),i=parseInt(this.header.find(".month").attr("data-month"),10),n=parseInt(this.header.find(".year").text(),10);return e.hasClass("prev-month")?0===i?(i=11,n--):i--:e.hasClass("next-month")&&(11===i?(i=0,n++):i++),{year:n,month:i,day:t}},setRangeSelBeforeFirstSel:function(e){var t=this.settings;t.range.useRange&&$("#monthview-popup:visible")&&(t.range.first||($("td",this.element).removeClass("is-selected"),e.addClass("is-selected")))},activeTabindex:function(e,t){return $("td",this.element).removeAttr("tabindex"),e.attr("tabindex",0),t&&e.focus(),e},updated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e||(e={}),e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings),this.toUpdate=!0),this.destroy().init()},teardown:function(){var e,t,i;return null===(e=this.header)||void 0===e||e?.off(),null===(t=this.days)||void 0===t||t?.off(),null===(i=this.element)||void 0===i||i?.off(),this.monthYearPane&&(this.monthYearPane.off(),this.monthYearPane=null),this},destroy:function(){var e;if(null===(e=this.calendarToolbarAPI)||void 0===e||e?.destroy(),this.teardown(),this.element&&this.element.empty(),this.element&&this.element[0])try{$.removeData(this.element[0],vl)}catch{}return this}};var Bn="weekview",Bf={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],filteredTypes:[],events:[],locale:null,language:null,firstDayOfWeek:0,startDate:null,endDate:null,showAllDay:!0,showTimeLine:!0,startHour:7,endHour:19,disable:{dayOfWeek:[]},newEventDefaults:{title:"NewEvent",subject:"",comments:"",durationHours:1},showToday:!0,showViewChanger:!0,hitbox:!1,onChangeView:null,onChangeWeek:null,onRenderWeek:null,eventTooltip:"overflow",iconTooltip:"overflow"};function vr(s,e){this.settings=H.mergeSettings(s,e,Bf),this.element=$(s),this.init()}vr.prototype={init:function(){return this.settings.startDate?this.settings.firstDayOfWeek=this.settings.startDate.getDay():this.settings.startDate=Zt.firstDayOfWeek(new Date,this.settings.firstDayOfWeek),this.settings.endDate?this.settings.endDate.setHours(23,59,59,999):this.settings.endDate=Zt.lastDayOfWeek(new Date,this.settings.firstDayOfWeek),this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=B.getLocale(this.settings.language),i=B.getLocale(this.settings.locale);return $.when(i,t).done(function(n,a){e.locale=B.cultures[n]||B.currentLocale,e.language=a||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.build()}),this},setCurrentCalendar:function(){return this.currentCalendar=B.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions,this},build:function(){return this.id=this.id||H.uniqueId(this.element,Bn),this.isMobileWidth=Jt.isBelow("phone-to-tablet"),this.addToolbar(),this.showWeek(this.settings.startDate,this.settings.endDate),this.handleEvents(),this.handleKeys(),this.element.find("td[data-key]").attr("tabindex","-1"),H.addAttributes(this.element,this,this.settings.attributes),this},renderAllEvents:function(e){if(!this.settings.onRenderWeek||e){var t=this.settings.events.slice(0);t.sort(function(a,o){return a.starts<o.starts?-1:a.starts>o.starts?1:0}),this.removeAllEvents();for(var i=0;i<t.length;i++){var n=t[i];this.settings.filteredTypes.indexOf(n.type)>-1||this.renderEvent(n)}}else this.callOnRenderWeek()},callOnRenderWeek:function(){var e=this;this.settings.onRenderWeek(this.element,function t(i,n){n&&n.length>0&&(e.settings.eventTypes=n),i&&i.length>0&&(e.settings.events=i,e.renderAllEvents(!0))},{api:e,settings:this.settings})},removeAllEvents:function(){for(var e=this.element[0].querySelectorAll(".calendar-event"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);for(var i=0;i<this.dayMap.length;i++)this.dayMap[i].events=[]},renderEvent:function(e){var t=new Date(e.starts),i=st.padDate(t.getFullYear(),t.getMonth(),t.getDate());if(B.isIslamic(this.locale.name)){var n=B.gregorianToUmalqura(t);i=st.padDate(n[0],n[1],n[2])}var a=new Date(e.ends),o=st.padDate(a.getFullYear(),a.getMonth(),a.getDate());if(B.isIslamic(this.locale.name)){var l=B.gregorianToUmalqura(a);o=st.padDate(l[0],l[1],l[2])}var d=this.dayMap.filter(function(w){return w.key>=i&&w.key<=o});if(e.endKey=o,e.startKey=i,e=Oi.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes),d.forEach(function(w){return w.events.push(e)}),1===d.length&&!e.isAllDay&&(this.isStackedView()?this.appendToDayContainer(e):(e.startsHour<this.settings.startHour&&(e.startsHour=this.settings.startHour),this.element.hasClass("is-day-view")&&(d[0].key===e.startKey&&e.endsHour<this.settings.endHour?e.endsHour=this.settings.endHour+1:d[0].key!==e.startKey&&d[0].key!==e.endKey?(e.startsHour=this.settings.startHour,e.endsHour=this.settings.endHour+1):d[0].key===e.endKey&&(e.startsHour=this.settings.startHour)),this.appendEventToHours(d[0].elem,e))),1===d.length&&e.isAllDay&&this.appendEventToAllDay(d[0].elem,e),d.length>1)if("true"===e.isAllDay||!0===e.isAllDay)for(var h=0;h<d.length;h++){var p=0===h?"calendar-event-start":"calendar-event-continue";h===d.length-1&&(p="calendar-event-ends"),this.appendEventToAllDay(d[h].elem,e,p)}else{e.overnightStartsHour=e.startsHour,e.overnightEndsHour=e.endsHour;for(var v=0;v<d.length;v++){var b=ca({},e);b.endsHour=this.settings.endHour+.6,v>0&&(b.startsHour=this.settings.startHour,b.startKey=b.endKey),v===d.length-1&&(b.endsHour=b.overnightEndsHour),this.isStackedView()?this.appendToDayContainer(b,!0):this.appendEventToHours(d[v].elem,b,!0)}}},createEventElement:function(e,t){var i,n,a,l=document.createElement("a");return de.addClass(l,"calendar-event"),void 0!==e.color&&["ruby","amber","emerald","azure","turqoise","amethyst","graphite","slate"].filter(function(d){return e.color.indexOf(d)>-1}).length>0&&!(null!==(i=e.color)&&void 0!==i&&i?.indexOf("0"))>-1?de.addClass(l,e.color):"#"===(null===(n=e.color)||void 0===n?void 0:n?.substr(0,1))&&void 0!==e.color?(l.style.backgroundColor=e.color,l.classList.remove(e.color)):(l.style.backgroundColor="slate",$(l).css("backgroundColor",e.color)),("#"===(null===(a=e.borderColor)||void 0===a?void 0:a?.substr(0,1))||void 0!==e.borderColor)&&(l.style.borderLeftColor=e.borderColor),void 0!==t&&de.addClass(l,t),l.setAttribute("data-id",e.id),l.setAttribute("data-key",e.startKey),l.setAttribute("href","#"),l},appendEventToAllDay:function(e,t,i){var n=e.querySelector(".week-view-all-day-wrapper");if(n){var a=this.createEventElement(t,i);("calendar-event-continue"===i||"calendar-event-ends"===i)&&a.setAttribute("tabindex","-1"),a.innerHTML='<div class="calendar-event-content">\n      '.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(t.shortSubject||t.subject,"</span>\n    </div>");var l=n.querySelectorAll(".calendar-event").length;if(l>=1&&(a.style.top="".concat(21*l,"px")),l>2)for(var d=this.element[0].querySelectorAll(".week-view-all-day-wrapper"),h=0;h<d.length;h++)d[h].style.height="".concat(44+23*(l-1),"px");var v=e.parentNode.querySelectorAll('.calendar-event.calendar-event-start[data-id="'.concat(t.id,'"]'));if(v[0])for(var b=v[0].parentNode.children,T=e.querySelector(".week-view-all-day-wrapper").children.length||0;T<b.length;T++)if(p(b[T].getAttribute("data-id"))===p(t.id)){a.style.top=0===T?"1px":"".concat(21*T,"px");break}n.appendChild(a),H.addAttributes($(a),this,this.settings.attributes,"week-view-event-".concat(t.id)),this.attachTooltip(a,t)}function p(A){return"string"==typeof A?A:A?A.toString():null}},appendEventToHours:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.element[0].querySelectorAll("td:nth-child(".concat(e.cellIndex+1,")")),a=0;a<n.length;a++){var o=n[a],l=parseFloat(o.parentNode.getAttribute("data-hour"),10),d=Math.round(t.startsHour);if(d>t.startsHour?l===d-.5:l===d){var v=t.endsHour-t.startsHour,b="",w=this.createEventElement(t);i?b=" ".concat(B.formatHourRange(t.overnightStartsHour,t.overnightEndsHour,{locale:this.locale})):(v<.5&&de.addClass(w,"reduced-padding",t.color),v<1.5&&de.addClass(w,"is-ellipsis"),v>2&&(b=" ".concat(B.formatHourRange(t.startsHour,t.endsHour,{locale:this.locale})))),t.startsHour+v>this.settings.endHour&&(de.addClass(w,"is-cutoff",t.color),v=this.settings.endHour+1-t.startsHour),v<.25&&(v=.25),t.startsHour>l&&(w.style.top="".concat((t.startsHour-l)/.016666666666666784*(o.parentNode.offsetHeight/30),"px")),w.style.height="".concat(2*Math.round(v)*25+1.5*Math.round(v),"px"),w.innerHTML='<div class="calendar-event-content">\n          '.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"","\n          ").concat(i?'<span style="font-weight: bold">Overnight</span><br/>':"",'\n          <span class="calendar-event-title">').concat(t.shortSubject||t.subject).concat(b,"</span>\n        </div>");var M=o.querySelector(".week-view-cell-wrapper"),L=o.querySelectorAll(".calendar-event"),z=L.length;if(0===z){var q=o.getAttribute("data-key");z=(L=o.parentNode.parentNode.children[0].querySelectorAll('td[data-key="'.concat(q,'"]'))[0].querySelectorAll(".calendar-event")).length}if(z>0){var G=100/(z+1),j=0;for(j=0;j<z;j++)L[j].style.width="".concat(G,"%"),j>0&&this.isRTL&&(L[j].style.right="".concat(G*j,"%")),j>0&&!this.isRTL&&(L[j].style.left="".concat(G*j,"%"));w.style.width="".concat(G,"%"),this.isRTL?w.style.right="".concat(G*j,"%"):w.style.left="".concat(G*j,"%")}M.appendChild(w),H.addAttributes($(w),this,this.settings.attributes,"week-view-event-".concat(t.id)),this.attachTooltip(w,t)}}},appendToDayContainer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.element[0].querySelector('.week-view-body-cell[data-key="'.concat(e.startKey,'"]'));if(i){var n;n=" ".concat(t?B.formatHourRange(e.overnightStartsHour,e.overnightEndsHour,{locale:this.locale,keepPeriod:!0,pattern:this.settings.timePattern}):B.formatHourRange(e.startsHour,e.endsHour,{locale:this.locale,keepPeriod:!0,pattern:this.settings.timePattern}));var a=this.createEventElement(e),o='<span class="calendar-event-title">\n          '.concat(this.settings.timeFirst?n:e.shortSubject||e.subject,"</br>").concat(this.settings.timeFirst?e.shortSubject||e.subject:n,"\n        </span>");a.innerHTML='<div class="calendar-event-content">\n        '.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"","\n        ").concat(t?'<span style="font-weight: bold">Overnight</span><br/>':"","\n        ").concat(o,"\n      </div>"),i?.appendChild(a)}},attachTooltip:function(e,t){var i=this;if("overflow"!==this.settings.iconTooltip){var n=e.querySelector(".calendar-event-icon");n&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({settings:this.settings,event:t}):t[this.settings.iconTooltip]&&(n.setAttribute("title",t[this.settings.iconTooltip]),$(n).tooltip({content:n.innerText})))}if(this.settings.showTooltip)if("overflow"!==this.settings.eventTooltip)"function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({settings:this.settings,event:t}):t[this.settings.eventTooltip]&&(e.setAttribute("title",t[this.settings.eventTooltip]),$(e).tooltip({content:e.innerText}));else{var a=this.settings,o="\n          ".concat(a.tooltipSettings.subject?"".concat(t.subject," <br>"):"","\n          ").concat(a.tooltipSettings.comments?"".concat(t.comments," <br>"):"","\n          ").concat(a.tooltipSettings.time?"from ".concat(t.startsHourLocale," to ").concat(t.endsHourLocale):"","\n          ");e.setAttribute("title",o),$(e).tooltip({content:e.innerText,contentAlignment:"left"})}!t.shortSubject&&("overflow"===this.settings.eventTooltip||"overflow"===this.settings.iconToolTip)&&(e.setAttribute("title",t.subject),$(e).tooltip({beforeShow:function(d,h){var p=h[0].querySelector(".calendar-event-title"),v=h[0].querySelector(".calendar-event-icon"),b=v?v.querySelector(".icon").getAttribute("data-status"):"";d(p.offsetWidth>h[0].scrollWidth-(v?v.offsetWidth:0)&&"".concat(p.innerText).concat(b?" (".concat(B.translate(b,{locale:i.locale.name},!1),")"):""))}}))},showWeek:function(e,t){var i=this;this.numberOfDays=Math.round((t-e)/864e5);var n=new Date(e.getTime()),a=new Date(t.getTime());if(B.isIslamic(this.locale.name)&&(e=B.gregorianToUmalqura(e),e=new Date(e[0],e[1],e[2],e[3],e[4],e[5],e[6]),t=B.gregorianToUmalqura(t),t=new Date(t[0],t[1],t[2],t[3],t[4],t[5],t[6])),this.dayMap=[],this.isDayView=!1,this.element.removeClass("is-day-view stacked-view is-borderless toolbar-hidden"),this.settings.borderless&&this.element.addClass("is-borderless"),this.settings.hideToolbar&&this.element.addClass("toolbar-hidden"),(0===this.numberOfDays||1===this.numberOfDays)&&(this.element.addClass("is-day-view"),this.isDayView=!0,this.element.find("#calendar-view-changer").val("day").trigger("updated")),this.hasIrregularDays=7!==this.numberOfDays,this.settings.responsive&&!this.isDayView&&this.isStackedView()&&this.isMobileWidth)this.showWeek(e,e);else{var o=this.isStackedView();o&&this.element.addClass("stacked-view"),this.weekContainer=o?this.createStackedTemplate(e,t):this.createTableTemplate(e,t),this.element.find(".week-view-container").remove(),this.element.append(this.weekContainer),this.element.find(".week-view-header-cell").each(function(d,h){var p=h.getAttribute("data-key"),v=i.element.find('.week-view-footer-cell[data-key="'.concat(p,'"]'))[0];p&&i.dayMap.push({key:p,elem:h,footer:v})}),this.addTimeLine(),this.showToolbarMonth(e,t),this.renderDisable(),this.renderLegend(),this.renderAllEvents();var l={isDayView:this.isDayView,isStackedView:o,startDate:B.isIslamic(this.locale.name)?n:e,endDate:B.isIslamic(this.locale.name)?a:t,elem:this.element,api:this};this.element.trigger("weekrendered",l),this.settings.onChangeWeek&&this.settings.onChangeWeek(l),this.settings.startDate=B.isIslamic(this.locale.name)?n:e,this.settings.endDate=B.isIslamic(this.locale.name)?a:t}},createTableTemplate:function(e,t){this.weekHeader='<thead class="week-view-table-header"><tr><th class="week-view-header-cell"><div class="week-view-header-wrapper"><span class="audible">'.concat(B.translate("Hour"),"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper">'.concat(B.translate("AllDay",this.locale.name),"</div>")),this.weekHeader+="</th>";for(var i=new Date(e.getTime());i<=t;i.setDate(i.getDate()+1)){var n=B.formatDate(i,{pattern:"d",locale:this.locale.name}),a=B.formatDate(i,{pattern:"EEE",locale:this.locale.name}),o=this.currentCalendar.dateFormat.dayOfWeek,l=o?"EEE"===o.split(" ")[0]:"d EEE";this.weekHeader+='<th class="week-view-header-cell" data-key="'.concat(st.padDate(i.getFullYear(),i.getMonth(),i.getDate()),'"><div class="week-view-header-wrapper').concat(Zt.isToday(i)?" is-today":"",'"><span class="week-view-header-day-of-week').concat(l?"":" is-emphasis",'">').concat(l?a:n,'</span><span class="week-view-header-day-of-week').concat(l?" is-emphasis":"",'">').concat(l?n:a,"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper"></div>'),this.weekHeader+="</th>"}this.weekHeader+="</tr></thead>",this.weekBody="<tbody>";for(var d=this.settings.startHour;d<=this.settings.endHour;d++){for(var h='<tr class="week-view-hour-row" data-hour="'.concat(d,'"><td><div class="week-view-cell-wrapper">').concat(B.formatHour(d,{locale:this.locale}),"</div></td>"),p='<tr class="week-view-half-hour-row" data-hour="'.concat(d,'.5"><td><div class="week-view-cell-wrapper"></div></td>'),v=new Date(e.getTime());v<=t;v.setDate(v.getDate()+1)){var b=st.padDate(v.getFullYear(),v.getMonth(),v.getDate());h+='<td data-key="'.concat(b,'"><div class="week-view-cell-wrapper"></div></td>'),p+='<td data-key="'.concat(b,'"><div class="week-view-cell-wrapper"></div></td>')}this.weekBody+=(h+="</tr>")+(p+="</tr>")}return this.weekBody+="</tbody>",'<div class="week-view-container"><table class="week-view-table">'.concat(this.weekHeader).concat(this.weekBody,"</table></div>")},createStackedTemplate:function(e,t){for(var i="",n="",a="",o=new Date(e.getTime());o<=t;o.setDate(o.getDate()+1)){var l="".concat(st.padDate(o.getFullYear(),o.getMonth(),o.getDate())),d=B.formatDate(o,{pattern:"d",locale:this.locale.name}),h=B.formatDate(o,{pattern:"EEE",locale:this.locale.name}),p=Zt.isToday(o);i+='<div data-key="'.concat(l,'" class="week-view-header-cell">\n        <div class="week-view-header-wrapper ').concat(p?"is-today":"",'">\n          <span class="week-view-header-day-of-week is-emphasis">').concat(d,'</span>\n          <span class="week-view-header-day-of-week">').concat(h,"</span>\n        </div>\n        ").concat(this.settings.showAllDay?'<div class="week-view-all-day-wrapper"></div>':"","\n      </div>"),n+='<div data-key="'.concat(l,'" class="week-view-body-cell"></div>'),a+='<div data-key="'.concat(l,'" class="week-view-footer-cell"></div>')}return'<div class="week-view-container">\n      <div class="week-view-stacked-header">'.concat(i,'</div>\n      <div class="week-view-stacked-body">').concat(n,"</div>\n      ").concat(this.settings.showFooter?'<div class="week-view-stacked-footer">'.concat(a,"</div>"):"","\n    </div>")},isStackedView:function(){return!!this.settings.stacked},renderDisable:function(){var t=this.settings.disable.dayOfWeek.length>0?this.settings.disable.dayOfWeek:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!(!t.length>0)){var i=t;if(1===this.dayMap.length){var n=this.dayMap[0],a=n.key,o=a.substring(0,4),l=a.substring(4,6),d=a.substring(6,8),h=new Date(o,l-1,d);i.includes(h.getDay())&&this.renderDisableToContainer(n.elem)}else for(var v=0;v<i.length;v++)this.renderDisableToContainer(this.dayMap[i[v]].elem)}},renderDisableToContainer:function(e){for(var t=this.element[0].querySelectorAll("td:nth-child(".concat(e.cellIndex+1,")")),i=0;i<t.length;i++)$(t[i].querySelector(".week-view-cell-wrapper")).addClass("is-disabled");var o=e.querySelector(".week-view-all-day-wrapper");o&&o.classList.add("is-disabled")},renderLegend:function(){var e=this;if(this.settings.showLegend&&!this.isStackedView())for(var t=function(l,d){var h="string"==typeof l?new Date(l):l,p=st.padDate(h.getFullYear(),h.getMonth(),h.getDate());if(B.isIslamic(e.locale.name)){var v=B.gregorianToUmalqura(h);p=st.padDate(v[0],v[1],v[2])}var b=new Date(l),w=st.padDate(b.getFullYear(),b.getMonth(),b.getDate());if(B.isIslamic(e.locale.name)){var T=B.gregorianToUmalqura(b);w=st.padDate(T[0],T[1],T[2])}var k=e.dayMap.filter(function(fe){return fe.key>=p&&fe.key<=w});if(k.length>0){var A=d.color;if(-1===A.indexOf("#")){var M=A.replace(/[0-9]/g,""),L=10*A.substr(A.length-2,2);A=Et.themeColors().palette[M][L].value}for(var z=xt.hexToRgba(A,.3),q=k[0].elem,O=e.element[0].querySelectorAll("td:nth-child(".concat(q.cellIndex+1,")")),_=0;_<O.length;_++){var j=$(O[_].querySelector(".week-view-cell-wrapper"));j.addClass("is-colored"),j[0].setAttribute("data-hex",A),j[0].style.backgroundColor=z}var X=$(q.querySelector(".week-view-all-day-wrapper"));X&&(X.addClass("is-colored"),X[0].setAttribute("data-hex",A),X[0].style.backgroundColor=z)}},i=this.settings.legend,n=function(l){var d=i[l].dates,h=i[l].dayOfWeek,p=i[l].disableWeek;if(d)for(var v=0;v<d.length;v++)t(d[v],i[l]);if(h)for(var b=function(){var k=parseInt(e.dayMap[w].key.substring(0,4),10),A=parseInt(e.dayMap[w].key.substring(4,6),10)-1,M=parseInt(e.dayMap[w].key.substring(6,8),10),L=new Date(k,A,M);h.forEach(function(z){L.getDay()===z&&t(L,i[l])})},w=0;w<e.dayMap.length;w++)b();p&&e.renderDisable(p)},a=0;a<i.length;a++)n(a)},showToolbarMonth:function(e,t){if(!this.settings.hideToolbar){var i=B.formatDate(e,{pattern:"MMMM",locale:this.locale.name}),n=B.formatDate(t,{pattern:"MMMM",locale:this.locale.name}),a=B.formatDate(e,{pattern:"yyyy",locale:this.locale.name}),o=B.formatDate(t,{pattern:"yyyy",locale:this.locale.name}),l=B.formatDate(t,this.isMobileWidth&&this.monthField?{pattern:"MMM yyyy",locale:this.locale.name}:{date:"year",locale:this.locale.name});if(n!==i){var d=B.formatDate(e,{pattern:"MMM",locale:this.locale.name}),h=B.formatDate(t,this.isMobileWidth&&this.monthField?{pattern:"MMM yyyy",locale:this.locale.name}:{pattern:"MMMM yyyy",locale:this.locale.name});l="".concat(d," - ").concat(h)}if(o!==a){var p=B.formatDate(e,{pattern:"MMM yyyy",locale:this.locale.name}),v=B.formatDate(t,{pattern:"MMM yyyy",locale:this.locale.name});l="".concat(p," - ").concat(v)}this.monthField.text(l)}},addTimeLine:function(){var e=this;if(this.settings.showTimeLine&&!this.isStackedView()){var t=function(){var n=new Date,a=n.getHours(),o=n.getMinutes();e.markers.css("top",52*(a-e.settings.startHour+o/60))};this.timeMarker||(this.element.find(".week-view-hour-row:nth-child(1) td").prepend('<div class="week-view-time-marker"></div>'),this.markers=$(".week-view-time-marker"),t(),this.timer=setInterval(function(){t()},3e4))}},addToolbar:function(){var e=this;if(!this.settings.hideToolbar){var t=this.isDayView?"day":"week";this.header=$('<div class="week-view-header"><div class="calendar-toolbar"></div></div>').appendTo(this.element),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new Do(this.calendarToolbarEl[0],{onOpenCalendar:function(){return e.settings.startDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isAlternate:!1,isMenuButton:!0,isMonthPicker:!0,showViewChanger:this.settings.showViewChanger,hitbox:this.settings.hitbox,onChangeView:this.settings.onChangeView,viewChangerValue:t,attributes:this.settings.attributes}),this.monthField=this.header.find(this.settings.attributes?"#".concat(this.settings.attributes[0].value,"-").concat(t,"-view-datepicker"):"#monthview-datepicker-field")}},setToday:function(){var e=new Date;this.isIslamic&&"string"!=typeof e&&(this.currentDateIslamic=B.gregorianToUmalqura(e),e=st.padDate(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2])),!this.isIslamic&&"string"!=typeof e&&(e=st.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var t=parseInt(e.substr(0,4),10),i=parseInt(e.substr(4,2),10)-1;this.calendarToolbarAPI.setInternalDate(this.isIslamic?[t,i,1]:new Date(t,i,1))},setWeekFromDate:function(e){this.numberOfDays=7,this.settings.startDate=Zt.firstDayOfWeek(e,this.settings.firstDayOfWeek),this.settings.startDate.setHours(0,0,0,0),this.settings.endDate=new Date(this.settings.startDate),this.settings.endDate.setDate(this.settings.endDate.getDate()+this.numberOfDays-1),this.settings.endDate.setHours(23,59,59,59),this.currentDay?this.showWeek(this.currentDay,this.currentDay):this.showWeek(this.settings.startDate,this.settings.endDate)},handleEvents:function(){var e=this,t=this;this.element.off("updated.".concat(Bn)).on("updated.".concat(Bn),function(){e.updated()}),this.element.off("change-date.".concat(Bn)).on("change-date.".concat(Bn),function(n,a){var o=a.isToday?new Date:a.selectedDate;e.isDayView?(e.settings.startDate=o,e.settings.endDate=o):(e.settings.startDate=e.hasIrregularDays&&o.getDay()===e.settings.firstDayOfWeek?o:Zt.firstDayOfWeek(o,e.settings.firstDayOfWeek),e.settings.startDate.setHours(0,0,0,0),e.settings.endDate=new Date(e.settings.startDate),e.settings.endDate.setDate(e.settings.endDate.getDate()+e.numberOfDays-1),e.settings.endDate.setHours(23,59,59,59)),e.showWeek(e.settings.startDate,e.settings.endDate),a.isToday&&e.setToday()}),this.element.off("change-next.".concat(Bn)).on("change-next.".concat(Bn),function(){e.advanceDays(!0)}),this.element.off("change-prev.".concat(Bn)).on("change-prev.".concat(Bn),function(){e.advanceDays(!1)});var i=function(a,o){var l=a.getAttribute("data-id"),d=e.settings.events.filter(function(h){return h.id===l});!d||0===d.length||e.element.trigger(o,{settings:e.settings,event:d[0]})};return this.element.off("click.".concat(Bn)).on("click.".concat(Bn),".calendar-event, td",function(n){var a=$(n.currentTarget);if(a.is("td")){var o=n.currentTarget.getAttribute("data-key"),l=$(n.currentTarget).parent().attr("data-hour"),d=Math.floor(l),h=60*(l-d);if(!o)return;var p=new Date(o.substr(0,4),o.substr(4,2)-1,o.substr(6,2),d,h);t.focusEl=a,t.focusDateHour=p,t.element.find("td.is-selected").removeClass("is-selected"),a.addClass("is-selected").attr("tabindex","0").focus()}else i(n.currentTarget,"eventclick"),n.preventDefault()}),this.element.off("dblclick.".concat(Bn)).on("dblclick.".concat(Bn),".calendar-event, td",function(n){if($(n.currentTarget).is("td")){var a=n.currentTarget.getAttribute("data-key"),o=$(n.currentTarget).parent().attr("data-hour"),l=Math.floor(o),d=60*(o-l);if(!a)return;var h=new Date(a.substr(0,4),a.substr(4,2)-1,a.substr(6,2),l,d),p=H.extend({},e.settings.newEventDefaults);p.startKey=a,p.endKey=a,p.starts=h,p.ends=h,n.stopPropagation(),Oi.cleanEventData(p,!1,h,e.locale,e.language,e.settings.events,e.settings.eventTypes),t.showModalWithCallback(h,p,!0,$(n.currentTarget)),t.element.trigger("updated")}i(n.currentTarget,"eventdblclick")}),$("body").off("breakpoint-change.".concat(this.id)).on("breakpoint-change.".concat(this.id),function(){return e.onBreakPointChange()}),$(window).on("resize.".concat(this.id),function(){e.element.trigger("breakpoint-change.".concat(e.id))}),this},handleKeys:function(){var e=this;return this.element.off("keydown.".concat(Bn)).on("keydown.".concat(Bn),"td",function(t){var i=t.keyCode||t.charCode||0,n=$(t.currentTarget),a=n.parent().index();e.focusEl=n;var o=B.formatDate(e.focusDateHour,{pattern:"yyyyMMdd"}),l=e.dayMap.filter(function(v){return v.key>=o&&v.key<=o});if(40===i&&a++,38===i&&a--,(37===i||189===i&&!t.shiftKey)&&(e.focusDateHour.setDate(e.focusDateHour.getDate()-1),o=B.formatDate(e.focusDateHour,{pattern:"yyyyMMdd"}),(l=e.dayMap.filter(function(v){return v.key>=o&&v.key<=o})).length<=0)){var d=new Date(e.focusDateHour);e.isDayView?(d.setDate(e.focusDateHour.getDate()-1),e.showWeek(e.focusDateHour,e.focusDateHour)):(d.setDate(e.focusDateHour.getDate()-6),e.showWeek(d,e.focusDateHour)),l=e.dayMap.filter(function(v){return v.key>=o&&v.key<=o})}if((39===i||187===i&&t.shiftKey)&&(e.focusDateHour.setDate(e.focusDateHour.getDate()+1),o=B.formatDate(e.focusDateHour,{pattern:"yyyyMMdd"}),(l=e.dayMap.filter(function(v){return v.key>=o&&v.key<=o})).length<=0)){var h=new Date(e.focusDateHour);e.isDayView?(h.setDate(e.focusDateHour.getDate()+1),e.showWeek(e.focusDateHour,e.focusDateHour)):(h.setDate(e.focusDateHour.getDate()+6),e.showWeek(e.focusDateHour,h)),l=e.dayMap.filter(function(v){return v.key>=o&&v.key<=o})}var p=$(e.element[0].querySelectorAll("td:nth-child(".concat(l[0].elem.cellIndex+1,")"))[a]);p.length>0&&(e.element.find("td[tabindex=0]").removeAttr("tabindex"),p.attr("tabindex","0").focus())}),this},onBreakPointChange:function(){if(this.isMobileWidth=Jt.isBelow("phone-to-tablet"),this.isStackedView()&&this.settings.responsive)if(!this.isDayView&&this.isMobileWidth){var e=new Date,i=Zt.isWithinRange(this.settings.startDate,this.settings.endDate,e)?e:this.settings.startDate;this.showWeek(i,i)}else this.isDayView&&this.setWeekFromDate(this.settings.startDate)},advanceDays:function(e){var t=this.isDayView?1:this.numberOfDays;e||(t=-t),this.settings.startDate.setDate(this.settings.startDate.getDate()+t),this.isDayView?(this.settings.endDate=new Date(this.settings.startDate),this.settings.startDate.setHours(0,0,0,0),this.settings.endDate.setHours(23,59,59,999)):this.settings.endDate.setDate(this.settings.endDate.getDate()+t),this.isDayView&&(this.currentDay=this.settings.startDate),this.showWeek(this.settings.startDate,this.settings.endDate)},addEvent:function(e){e.startsLocale||(e=Oi.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes)),Oi.cleanEventData(e,!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(e),this.renderEvent(e)},showModalWithCallback:function(e,t,i,n){var a=this;this.showEventModal(e,t,function(o,l){for(var d=o.querySelectorAll("input, textarea, select"),h=0;h<d.length;h++)l[d[h].id]="checkbox"===d[h].getAttribute("type")?d[h].checked:d[h].value;i?a.addEvent(l):a.updateEvent(l)},n)},showEventModal:function(e,t,i,n){var a=this;if(this.settings.modalTemplate){this.modalVisible()&&this.removeModal(),this.modalContents=document.createElement("div"),de.addClass(this.modalContents,"calendar-event-modal","hidden"),document.getElementsByTagName("body")[0].appendChild(this.modalContents),t=Oi.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes),this.renderTmpl(t||{},this.settings.modalTemplate,this.modalContents);var d,o=this.getDayEvents(e),l=!0;o.elem=$(o.elem),d=6===o.elem.index()?this.isRTL?"right":"left":this.isRTL?"left":"right",!n&&"day"===this.activeView&&(n=$(".week-view-header-wrapper"),d=this.isRTL?"left":"right"),n||(n=o.elem);var h=this.settings.modalOptions||{content:$(this.modalContents),closebutton:!0,popover:!0,placementOpts:{parent:n,strategies:["flip","nudge","shrink-y"],parentXAlignment:"center",parentYAlignment:"center",placement:d},title:t.title||t.subject,trigger:"immediate",keepOpen:!0,extraClass:"calendar-popup calendar-popup-mobile",tooltipElement:"#calendar-popup",headerClass:t.color,initializeContent:!1};n.off("hide.calendar").on("hide.calendar",function(){l?a.removeModal():(i(a.modalContents,t),a.element.trigger("hidemodal",{elem:a.modalContents,event:t}),a.removeModal(),l=!0)}).popover(h).off("show.calendar").on("show.calendar",function(p,v){a.element.trigger("showmodal",{elem:a.modalContents,event:t}),v.find("#isAllDay").off().on("click.calendar",function(k){$(k.currentTarget).prop("checked")?(v.find("#durationHours").prop("disabled",!0),v.find("#endsHourLocale").prop("disabled",!0),v.find("#startsHourLocale").prop("disabled",!0)):(v.find("#durationHours").prop("disabled",!1),v.find("#endsHourLocale").prop("disabled",!1),v.find("#startsHourLocale").prop("disabled",!1))}),v.find("#type").val(t.type).dropdown(),v.find("#comments").val(t.comments),v.find("#subject").focus(),v.find("button").on("click",function(k){var A=n.data("popover"),M=k.currentTarget.getAttribute("data-action");l="submit"!==M,A&&A.hide(!0)}),v.find(".datepicker").datepicker({locale:a.settings.locale,language:a.settings.language});var b=v.find(".timepicker");if(b){b.val(B.formatHour(e.getHours()+e.getMinutes()/60));var w=t.durationHours?t.durationHours:1;if(b.length>1)for(var T=1;T<b.length;T++)$(b[T]).val(B.formatHour(e.getHours()+w+e.getMinutes()/60));b.timepicker({locale:a.settings.locale,language:a.settings.language})}a.translate(v)})}},modalVisible:function(){return null!==document.querySelector(".calendar-event-modal")},removeModal:function(){this.modalContents=null,this.activeElem&&(this.activeElem.off(),this.activeElem.data("popover")&&this.activeElem.data("popover").destroy()),de.remove(document.getElementById("calendar-popup")),de.remove(document.querySelector(".calendar-event-modal")),$("#timepicker-popup").hide()},renderTmpl:function(e,t,i,n){if("object"===rt(hn)&&t){if(t instanceof $?t="".concat(t.html()):"string"==typeof t&&(st.containsHTML(t)||(t=$("#".concat(t)).html())),e.color=Oi.getEventTypeColor(e,this.settings.eventTypes),e.startsLong=B.formatDate(e.starts,{date:"long",locale:this.locale.name}),e.endsLong=B.formatDate(e.ends,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(B.formatDate(e.starts,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(e.starts,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(B.formatDate(e.ends,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(e.ends,{date:"hour",locale:this.locale.name})),B.isIslamic(this.locale.name)){var a=B.gregorianToUmalqura(new Date(e.starts)),o=B.gregorianToUmalqura(new Date(e.ends));e.startsLong=B.formatDate(a,{date:"long",locale:this.locale.name}),e.endsLong=B.formatDate(o,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(B.formatDate(a,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(a,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(B.formatDate(o,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(o,{date:"hour",locale:this.locale.name}))}e.typeLabel=this.getEventTypeLabel(e.type);var l=hn.compile(t,{event:e});if(i.classList.remove("has-only-one"),n)return void de.append(i,l,"*");i.innerHTML=l,i.classList.add("has-only-one")}},getEventTypeLabel:function(e){var t="";if(!e)return t;var i=this.settings.eventTypes.filter(function(n){return n.id===e});return 1===i.length&&(t=i[0].label),t},getDayEvents:function(e){if("string"!=typeof e&&!this.isRTL&&(e=st.padDate(e.getFullYear(),e.getMonth(),e.getDate())),B.isIslamic(this.locale.name)){var t=B.gregorianToUmalqura(e);e=st.padDate(t[0],t[1],t[2])}var i=this.dayMap.filter(function(a){return a.key===e}),n={date:e,events:[]};return 0===i.length?[]:(n.events=i[0].events,n.elem=i[0].elem,n)},translate:function(e){var t=this;$(e).find('[data-translate="text"]').each(function(i,n){var a=$(n);a.text(B.translate(a.attr("data-translate-key")||a.text(),{showAsUndefined:!1,showBrackets:!1,language:t.settings.language,locale:t.settings.locale}))})},selectHeader:function(e){var t=e instanceof Date?st.padDate(e.getFullYear(),e.getMonth(),e.getDate()):e,i={all:".week-view-table-header th"};i.current="".concat(i.all,'[data-key="').concat(t,'"]'),[].slice.call(this.element[0].querySelectorAll(i.all)).forEach(function(o){o.classList.remove("is-selected")});var a=this.element[0].querySelector(i.current);a&&a.classList.add("is-selected")},clearEvents:function(){this.settings.events=[],this.renderAllEvents()},updateEvent:function(e){for(var t=e.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===t&&(this.settings.events[i]=H.extend(!0,this.settings.events[i],e),Oi.cleanEventData(this.settings.events[i],!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents()},deleteEvent:function(e){for(var t=e.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===t&&this.settings.events.splice(i,1);this.renderAllEvents()},updated:function(e){return e||(e={}),e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),e.locale?(this.destroy().init(),this):(this.renderAllEvents(),this)},teardown:function(){return this.element.off(),$("body").off("breakpoint-change.".concat(this.id)),clearInterval(this.timer),this.timer=null,this},destroy:function(){return this.teardown(),this.element.empty(),$.removeData(this.element[0],Bn),$.removeData(this.element[0],"init"),$.removeData(this.element[0],"automationId"),this}};var Rf=["label","checked"],an="calendar",Of={eventTypes:[],events:[],locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),showViewChanger:!0,onRenderMonth:null,template:null,mobileTemplate:null,upcomingEventDays:14,modalTemplate:null,menuId:null,menuSelected:null,showTooltip:!0,tooltipSettings:{subject:!0,comments:!0,time:!0},eventTooltip:"overflow",iconTooltip:"overflow",newEventDefaults:{title:"NewEvent",subject:"",isAllDay:!0,comments:""},onChangeView:null,showToday:!0,hitbox:!1,weekViewSettings:{firstDayOfWeek:0,startHour:7,endHour:19,showAllDay:!0,showTimeLine:!0},disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showEventLegend:!0,dayLegend:null,displayRange:{start:"",end:"",months:{showAbbr:!1}}};function Gu(s,e){this.settings=H.mergeSettings(s,e,Of),this.element=$(s),this.init()}Gu.prototype={init:function(){return this.setLocaleThenBuild()},build:function(){return this.setCurrentCalendar().saveColorFromApi().renderEventTypes().renderMonthView().renderWeekView().handleEvents().renderEventLegend(),this},setLocaleThenBuild:function(){var e=this,t=B.getLocale(this.settings.language),i=B.getLocale(this.settings.locale);return $.when(i,t).done(function(n,a){e.locale=B.cultures[n]||B.currentLocale,e.language=a||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.build().handleEvents()}),this},setCurrentCalendar:function(){return this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},renderEventLegend:function(){var e=this.settings;if($(".calendar-event-legend").remove(),e.showEventLegend){this.eventLegend=$('<div class="calendar-event-legend"></div>'),this.monthviewTable=$(".monthview-table");for(var t=0;t<e.eventTypes.length;t++){var i=e.eventTypes[t],n=i.color,a=$('<div class="calendar-event-legend-item"></div>');a.append('<span class="calendar-event-legend-swatch '.concat(n,'"></span>\n          <span class="calendar-event-legend-text">').concat(i.label,"</span>")),this.eventLegend.append(a),H.addAttributes(a,this,this.settings.attributes,"legend-mobile-".concat(i.id),!0)}this.monthviewTable.after(this.eventLegend)}},renderEventTypes:function(){if(this.eventTypeContainer=document.querySelector(".calendar-event-types"),!this.eventTypeContainer)return this;if(this.settings.isEventTree){$(this.eventTypeContainer).addClass("event-tree");var e=this.settings.eventTypes.map(function(l){var d=ca({},l);if(d.text=d.label,d.selected=d.checked,d.icon="",delete d.checked,delete d.label,d.children){var h=d.children.map(function(p){return ca({text:p.label,selected:p.checked,icon:""},function Yl(s,e){if(null==s)return{};var i,n,t=function Hn(s,e){if(null==s)return{};var t={};for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){if(e.indexOf(i)>=0)continue;t[i]=s[i]}return t}(s,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);for(n=0;n<a.length;n++)!(e.indexOf(i=a[n])>=0)&&Object.prototype.propertyIsEnumerable.call(s,i)&&(t[i]=s[i])}return t}(p,Rf))});d.children=h}return d});this.eventTree=$('<ul role="tree" class="tree"></ul>'),$(this.eventTypeContainer).append(this.eventTree),this.eventTree.tree({dataset:e,selectable:"multiple",folderIconOpen:"caret-down",folderIconClosed:B.isRTL()?"caret-left":"caret-right"})}else for(var t=0;t<this.settings.eventTypes.length;t++){var i=this.settings.eventTypes[t],n=i.custom?i.color:"".concat(i.color,"07"),a='<input type="checkbox" class="checkbox '.concat(n,'" name="').concat(i.id,'" id="').concat(i.id,'" ').concat(i.checked?'checked="true"':""," ").concat(i.disabled?'disabled="true"':"",' />\n            <label for="').concat(i.id,'" class="checkbox-label">').concat(i.translationKey?B.translate(i.translationKey,{locale:this.locale.name,language:this.language}):i.label,"</label><br/>");this.eventTypeContainer.insertAdjacentHTML("beforeend",a);var o=$(this.eventTypeContainer).find("#".concat(i.id));H.addAttributes($(this.eventTypeContainer).find("#".concat(i.id)),this,this.settings.attributes,"legend-".concat(i.id),!0),o.next("label").attr("for",o[0].id)}return this},renderMonthView:function(){var e=this;return this.monthViewContainer=this.element[0].querySelector(".calendar-monthview"),this.activeView="month",this.onChangeToMonth=function(t){e.settings.onChangeView?e.settings.onChangeView(t):e.changeView(t.viewName)},this.monthView=new ml(this.monthViewContainer,{onRenderMonth:this.settings.onRenderMonth,onSelected:this.settings.onSelected,selectable:!0,locale:this.settings.locale,language:this.settings.language,month:this.settings.month,year:this.settings.year,day:this.settings.day,showTooltip:this.settings.showTooltip,tooltipSettings:this.settings.tooltipSettings,eventTooltip:this.settings.eventTooltip,iconTooltip:this.iconTooltip,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToMonth,disable:this.settings.disable,showLegend:null!==this.settings.dayLegend,legend:this.settings.dayLegend,hitbox:this.settings.hitbox,attributes:this.settings.attributes,firstDayOfWeek:this.settings.firstDayOfWeek,displayRange:{start:this.settings.displayRange.start,end:this.settings.displayRange.end,months:{showAbbr:this.settings.displayRange.months.showAbbr}}}),this.monthViewHeader=document.querySelector(".calendar .monthview-header"),this.renderAllEvents(),H.addAttributes($(".calendar"),this,this.settings.attributes),H.addAttributes($(".calendar-monthview"),this,this.settings.attributes,"monthview"),this},renderWeekView:function(){var e=this;if(this.weekViewContainer=document.querySelector(".calendar .calendar-weekview"),!this.weekViewContainer)return this;this.weekViewContainer.classList.add("week-view"),this.weekViewContainer.classList.add("hidden"),this.onChangeToWeekDay=function(n){e.settings.onChangeView?e.settings.onChangeView(n):e.changeView(n.viewName)};var t=Zt.firstDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek),i=Zt.lastDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek);return t.setHours(0,0,0,0),i.setHours(23,59,59,999),this.weekView=new vr(this.weekViewContainer,{locale:this.settings.locale,language:this.settings.language,startDate:t,endDate:i,eventTypes:this.settings.eventTypes,events:this.settings.events,firstDayOfWeek:this.settings.weekViewSettings.firstDayOfWeek,showAllDay:this.settings.weekViewSettings.showAllDay,showTimeLine:this.settings.weekViewSettings.showTimeLine,startHour:this.settings.weekViewSettings.startHour,endHour:this.settings.weekViewSettings.endHour,disable:this.settings.disable,showLegend:null!==this.settings.dayLegend,legend:this.settings.dayLegend,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,hitbox:this.settings.hitbox,onChangeView:this.onChangeToWeekDay,showTooltip:this.settings.showTooltip,tooltipSettings:this.settings.tooltipSettings,eventTooltip:this.settings.eventTooltip,iconTooltip:this.settings.iconTooltip,attributes:this.settings.attributes,modalTemplate:this.settings.modalTemplate}),this.weekViewHeader=document.querySelector(".calendar .calendar-weekview .monthview-header"),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.settings.onChangeWeek=function(n){e.monthView.selectDay(n.startDate,!1,!0,null,n.endDate)},this.weekView.renderAllEvents(),H.addAttributes($(".calendar-weekview"),this,this.settings.attributes,"weekview"),this},changeView:function(e){if(e!==this.activeView&&this.weekViewContainer){var t=this.currentDate(),i=new Date(t),n=new Date(t);switch(i.setHours(0,0,0,0),n.setHours(23,59,59,999),e){case"day":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="day",this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(i,n),this.clearEventDetails(),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView);break;case"week":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="week",i=Zt.firstDayOfWeek(i,this.settings.firstDayOfWeek),n=Zt.lastDayOfWeek(i,this.settings.firstDayOfWeek),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(i,n),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.clearEventDetails(),this.monthView.selectDay(t,!1,!0),this.weekView.selectHeader(t);break;case"month":this.monthViewContainer.classList.remove("hidden"),this.weekViewContainer.classList.add("hidden"),this.activeView="month",this.monthView.showMonth(this.settings.month,this.settings.year),this.monthView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.monthView.selectDay(t,!1,!0)}}},appendUpcomingEvent:function(e){if(this.upcomingEventsContainer=document.querySelector(".calendar-upcoming-events"),this.upcomingEventsContainer&&!(e.daysUntil>0)){var t=Math.abs(e.daysUntil);if(!(t<0||t>this.settings.upcomingEventDays)){var i=document.createElement("a");i.setAttribute("href","#"),i.setAttribute("data-key",e.startKey),de.addClass(i,"calendar-upcoming-event");var n="",a=B.formatDate(e.starts,{pattern:"d",locale:this.locale.name}),o=B.formatDate(e.ends,{pattern:"d",locale:this.locale.name}),l="".concat(B.formatDate(e.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(a===o?a:"".concat(a,"-").concat(o),", ").concat(B.formatDate(e.starts,{pattern:"yyyy",locale:this.locale.name}));if(parseInt(o,10)<parseInt(a,10)){var d=new Date(e.starts);d.setDate(1),d.setMonth(d.getMonth()+1);var h=d.getFullYear();l="".concat(B.formatDate(e.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(a," - ").concat(B.formatDate(d,{pattern:"MMMM",locale:this.locale.name})," ").concat(o,", ").concat(h)}n+='\n      <span class="calendar-upcoming-date">'.concat(l,'</span>\n      <span class="calendar-upcoming-event-color ').concat(e.color||"",'">').concat(e.color||"",'</span>\n      <span class="calendar-upcoming-description">').concat(e.subject||"",'</span>\n      <span class="calendar-upcoming-status-text">').concat(e.status||"",'</span>\n      <span class="calendar-upcoming-duration">').concat(e.isDays?e.duration:e.durationHours," ").concat(e.durationUnits||"","</span>"),i.innerHTML=n,this.upcomingEventsContainer.appendChild(i),H.addAttributes($(i),this,this.settings.attributes,"upcoming-event-".concat(e.id))}}},renderEventDetails:function(e,t){if(this.settings.events&&"month"===this.activeView){var i=this.settings.events.filter(function(o){return o.id===e});if(i&&0!==i.length&&(this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsContainer)){var n=$.extend(!0,{},i[0]);n.durationHours&&!n.isDays&&Oi.formateTimeString(n,this.locale,this.language),this.renderTmpl(n,this.settings.template,this.eventDetailsContainer,t>1),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsMobileContainer&&this.renderTmpl(n,this.settings.mobileTemplate,this.eventDetailsMobileContainer,t>1);var a=$(this.eventDetailsContainer).data("accordion");a&&a.destroy(),this.eventDetailsMobileContainer&&this.translate(this.eventDetailsMobileContainer),this.translate(this.eventDetailsContainer)}}},translate:function(e){var t=this;$(e).find('[data-translate="text"]').each(function(i,n){var a=$(n);a.text(B.translate(a.attr("data-translate-key")||a.text(),{showAsUndefined:!1,showBrackets:!1,language:t.settings.language,locale:t.settings.locale}))})},renderSelectedEventDetails:function(){var e=this.getDayEvents();if(this.clearEventDetails(),e.events&&0!==e.events.length){for(var t=0;t<e.events.length;t++)this.renderEventDetails(e.events[t].id,e.events.length);$(".calendar .list-detail",this.element).css("display","block"),$(this.eventDetailsContainer).accordion(),this.eventDetailsMobileContainer&&$(this.eventDetailsMobileContainer).addClass("listview").listview({selectable:!1,hoverable:!1}),de.hasClass(this.eventDetailsContainer,"has-only-one")&&$(this.eventDetailsContainer).find(".accordion-header, .accordion-header a").off("click"),$(".accordion-pane.no-transition",this.element).removeClass("no-transition")}},renderDay:function(e){this.monthView.selectDay(e);var t=new Date(this.currentDate()),i=new Date(this.currentDate());t.setHours(0,0,0,0),i.setHours(23,59,59,999),"day"===this.activeView&&this.weekView.showWeek(t,i),"week"===this.activeView&&(t=Zt.firstDayOfWeek(t,this.settings.firstDayOfWeek),i=Zt.lastDayOfWeek(t,this.settings.firstDayOfWeek),this.weekView.showWeek(t,i))},clearEventDetails:function(){this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML="")},clearUpcomingEvents:function(){this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML="")},filterEventTypes:function(){var e=[];if(!this.eventTypeContainer)return e;if(this.eventTree)return this.eventTree.data("tree").getUnselectedNodes().map(function(o){return o.data.id});for(var i=this.eventTypeContainer.querySelectorAll(".checkbox"),n=0;n<i.length;n++){var a=i[n];a.checked||e.push(a.getAttribute("name"))}return e},saveColorFromApi:function(){for(var e=this.settings.events,t=0;t<e.length;t++){var i=e[t];void 0!==i.color&&(i.apiColor=i.color),void 0!==i.borderColor&&(i.apiBorderColor=i.borderColor)}return this},renderAllEvents:function(e){if(this.settings.onRenderMonth&&!e)return this.callOnRenderMonth(),this;var i=this.filterEventTypes();this.removeAllEvents(),this.clearUpcomingEvents(),this.clearEventDetails();var n=this.settings.events.slice(0);n.sort(function(l,d){return l.starts<d.starts?-1:l.starts>d.starts?1:0});for(var a=0;a<n.length;a++){var o=n[a];i.indexOf(o.type)>-1||this.renderEvent(o)}return this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.filteredTypes=i,this.weekView.settings.events=this.settings.events,this.weekView.renderAllEvents()),this},renderMonthEvents:function(e){var t=e.starts.substring(0,6),i=this.settings.events.filter(function(h){return h.starts.indexOf(t)>-1});this.removeAllEvents(),this.clearUpcomingEvents(),this.clearEventDetails();var a=this.filterEventTypes(),o=i.slice(0);o.sort(function(h,p){return h.starts<p.starts?-1:h.starts>p.starts?1:0});for(var l=0;l<o.length;l++){var d=o[l];a.indexOf(d.type)>-1||this.renderEvent(d)}return this.renderSelectedEventDetails(),this},renderEvent:function(e){var t=this,i=B.newDateObj(e.starts),n=B.isIslamic(this.locale.name),a=st.padDate(i.getFullYear(),i.getMonth(),i.getDate());if(n){var o=B.gregorianToUmalqura(i);a=st.padDate(o[0],o[1],o[2])}var l=B.newDateObj(e.ends),d=st.padDate(l.getFullYear(),l.getMonth(),l.getDate());if(n){var h=B.gregorianToUmalqura(l);d=st.padDate(h[0],h[1],h[2])}var p=t.monthView.dayMap.filter(function(k){return k.key>=a&&k.key<=d});e.endKey=d,e.startKey=a,e=Oi.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes);for(var v=-1,b=0;b<t.monthView.dayMap.length;++b)if(t.monthView.dayMap[b].key>=a&&t.monthView.dayMap[b].key<=d){v=b;break}if(1===p.length&&t.appendEvent(p[0].elem[0],e,"event-day-start-end",v),p.length>1)for(var w=0;w<p.length;w++){var T=0===w?"event-day-start":"event-day-span";p.length-1===w&&(T="event-day-end"),t.appendEvent(p[w].elem[0],e,T,v+w)}this.appendUpcomingEvent(e,p,v)},removeAllEvents:function(){for(var e=this.monthViewContainer.querySelectorAll(".calendar-event-more"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);for(var i=this.monthViewContainer.querySelectorAll(".calendar-event"),n=0;n<i.length;n++)i[n].parentNode.removeChild(i[n]);for(var a=this.monthViewContainer.querySelectorAll(".calendar-event-spacer"),o=0;o<a.length;o++)a[o].parentNode.removeChild(a[o]);for(var l=0;l<this.monthView.dayMap.length;l++)this.monthView.dayMap[l].events=[]},appendEvent:function(e,t,i,n){var o,l,d,v,a=this,h=e.querySelectorAll(".calendar-event").length,p=["amber","amethyst","azure","emerald","graphite","ruby","slate","turquoise"];if(n>-1&&(this.monthView.dayMap[n].events||(this.monthView.dayMap[n].events=[]),this.monthView.dayMap[n].events.push(t)),h>=3){var b=e.querySelector(".calendar-event-more"),w=function(G,j){G.setAttribute("data-count",j),G.innerHTML="<span>+ ".concat(j," ").concat(B.translate("More",{locale:a.locale.name,language:a.language}).replace("...",""),"</span>")};return b?w(b,parseInt(b.getAttribute("data-count"),10)+1):(v=document.createElement("span"),de.addClass(v,"calendar-event-more"),w(v,1),e.querySelector(".day-container").appendChild(v),$(e).off("click.".concat(an)).on("click.".concat(an),".calendar-event-more span",function(){a.monthView.selectDay(a.monthView.dayMap[n].key,!1,!0),a.changeView("day")})),this}v=document.createElement("a"),de.addClass(v,"calendar-event",null!==(o=t.cssClass)&&void 0!==o?o:t.color,i),v.setAttribute("data-id",t.id),v.setAttribute("data-key",t.startKey),void 0!==t.color&&p.filter(function(_){var G;return(null===(G=t.color)||void 0===G?void 0:G?.indexOf(_))>-1}).length>0&&t.color.indexOf("0")>-1?de.addClass(v,t.color):("#"===(null===(l=t.color)||void 0===l?void 0:l?.substr(0,1))||t.color)&&p.indexOf(t.color)<0&&(v.style.backgroundColor=t.color,v.classList.remove(t.color)),("#"===(null===(d=t.borderColor)||void 0===d?void 0:d?.substr(0,1))||t.borderColor)&&(v.style.borderLeftColor=t.borderColor),v.innerHTML='<div class="calendar-event-content">\n      '.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(void 0!==t.status?t.status:"",'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(t.shortSubject||t.subject,"</span>\n    </div>");var T=this.monthViewContainer.querySelectorAll('.calendar-event.event-day-start[data-id="'.concat(t.id,'"]'));if(T[0])for(var k=T[0].parentNode.children,A=e.querySelector(".day-container").children.length;A<k.length;A++){var M=k[A].getAttribute("data-id");if(this.getString(M)===this.getString(t.id))break;if(!k[A].classList.contains("day-text")){var L=document.createElement("span");L.classList.add("calendar-event-spacer"),e.querySelector(".day-container").appendChild(L)}}if(e.querySelector(".day-container").appendChild(v),H.addAttributes($(v),this,this.settings.attributes,"event-".concat(t.id)),"overflow"!==this.settings.iconTooltip){var z=v.querySelector(".calendar-event-icon");z&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({month:this.settings.month,year:this.settings.year,event:t}):t[this.settings.iconTooltip]&&(z.setAttribute("title",t[this.settings.iconTooltip]),$(z).tooltip({content:z.innerText})))}if(this.settings.showTooltip)if("overflow"!==this.settings.eventTooltip)"function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({month:this.settings.month,year:this.settings.year,event:t}):t[this.settings.eventTooltip]&&(v.setAttribute("title",t[this.settings.eventTooltip]),$(v).tooltip({content:v.innerText}));else{var q=this.settings,O="\n          ".concat(q.tooltipSettings.subject?"".concat(t.subject," <br>"):"","\n          ").concat(q.tooltipSettings.comments?"".concat(t.comments," <br>"):"","\n          ").concat(q.tooltipSettings.time?"from ".concat(t.startsHourLocale," to ").concat(t.endsHourLocale):"","\n          ");v.setAttribute("title",O),$(v).tooltip({content:v.innerText,contentAlignment:"left"})}return!t.shortSubject&&("overflow"===this.settings.eventTooltip||"overflow"===this.settings.iconToolTip)&&(v.setAttribute("title",t.subject),$(v).tooltip({beforeShow:function(G,j){var X=j[0].querySelector(".calendar-event-title"),fe=j[0].querySelector(".calendar-event-icon"),he=fe?fe.querySelector(".icon").getAttribute("data-status"):"";G(X.offsetWidth>j[0].scrollWidth-(fe?fe.offsetWidth:0)&&"".concat(X.innerText).concat(he?" (".concat(B.translate(he,{locale:a.locale.name,language:a.language},!1),")"):""))}})),this},getString:function(e){return"string"==typeof e?e:e?e.toString():null},getEventTypeLabel:function(e){var t="";if(!e)return t;var i=this.settings.eventTypes.filter(function(n){return n.id===e});return 1===i.length&&(t=i[0].label),t},handleEvents:function(){var e=this,t=this;this.element.off("updated.".concat(an)).on("updated.".concat(an),function(){e.updated()}),this.isSwitchingMonth=!1,this.element.off("monthrendered.".concat(an)).on("monthrendered.".concat(an),function(o,l){e.isSwitchingMonth=!0,e.modalVisible()&&e.removeModal(),e.settings.year=l.year,e.settings.month=l.month,e.renderAllEvents(),setTimeout(function(){e.isSwitchingMonth=!1},500)}),this.element.off("change.".concat(an)).on("change.".concat(an),".checkbox",function(){e.renderAllEvents(!0)}),$(this.monthViewContainer).off("selected.".concat(an)).on("selected.".concat(an),function(){e.renderSelectedEventDetails()}),this.eventTree&&this.eventTree.on("selected",function(o){o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation(),e.renderAllEvents(!0)}).on("unselected",function(o){o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation(),e.renderAllEvents(!0)}),this.element.off("click.".concat(an,"-upcoming")).on("click.".concat(an,"-upcoming"),".calendar-upcoming-event",function(o){var l=o.currentTarget.getAttribute("data-key");e.renderDay(l)}),this.element.off("contextmenu.".concat(an)).on("contextmenu.".concat(an),".calendar-event",function(o){o.stopPropagation();var l=function(){return t.settings.menuId&&$("#".concat(t.settings.menuId)).length>0},d=o.currentTarget.getAttribute("data-id"),h=e.settings.events.filter(function(v){return v.id===d});if(e.element.triggerHandler("contextmenu",{originalEvent:o,month:e.settings.month,year:e.settings.year,event:h[0]}),!H.isSubscribedTo(t.element[0],o,"contextmenu","calendar")&&!l()||(o.preventDefault(),t.closePrevPopupmenu(),!l()))return!0;var p=$(o.currentTarget);return p.popupmenu({attachToBody:!0,menuId:e.settings.menuId,eventObj:o,trigger:"immediate",offset:{y:5}}),p.off("selected.calendar").on("selected.calendar",function(v,b){if(t.settings.menuSelected&&t.settings.menuSelected(v,b,d),"delete-event"===b.attr("data-action")&&t.deleteEvent({id:d}),"show-event"===b.attr("data-action")){var w=this.getAttribute("data-key");t.monthView.selectDay(w)}}),!1});var i=0,a=!1;return this.element.off("click.".concat(an,"-event")).on("click.".concat(an,"-event"),".calendar-event",function(o){i=setTimeout(function(){if(!a){var l=o.currentTarget.getAttribute("data-id"),d=e.settings.events.filter(function(v){return v.id===l});if(!d||0===d.length)return;var h=$(o.currentTarget),p=h.find(".calendar-event-title");(o.currentTarget.classList.contains("event-day-span")||o.currentTarget.classList.contains("event-day-end"))&&(p=t.element.find('.event-day-start[data-id="'.concat(h.attr("data-id"),'"] .calendar-event-title'))),e.showModalWithCallback(d[0],!1,p),(!t.weekView||"month"===t.activeView)&&e.element.triggerHandler("eventclick",{month:e.settings.month,year:e.settings.year,event:d[0]})}a=!1},100)}),this.element.off("dblclick.".concat(an,"-event")).on("dblclick.".concat(an,"-event"),".calendar-event",function(o){clearTimeout(i),a=!0;var l=o.currentTarget.getAttribute("data-id"),d=e.settings.events.filter(function(h){return h.id===l});!d||0===d.length||e.element.trigger("eventdblclick",{month:e.settings.month,year:e.settings.year,event:d[0]})}),this.element.off("dblclick.".concat(an)).on("dblclick.".concat(an),"td",function(o){var l=o.currentTarget.getAttribute("data-key");if(l&&!e.isSwitchingMonth){var d=new Date(l.substr(0,4),l.substr(4,2)-1,l.substr(6,2)),h=H.extend({},e.settings.newEventDefaults);h.startKey=l,h.endKey=l,h.starts=d,h.ends=d,o.stopPropagation(),Oi.cleanEventData(h,!1,e.currentDate(),e.locale,e.language,e.settings.events,e.settings.eventTypes),e.showModalWithCallback(h,!0),e.element.triggerHandler("dblclick",{eventData:h,api:e})}}),this.element.find(".listview").off("click.".concat(an,"-mobile")).on("click.".concat(an,"-mobile"),function(o){var l=$(o.target).closest("li"),d=l.attr("data-id"),h=e.settings.events.filter(function(p){return p.id===d});!h||0===h.length||(e.showModalWithCallback(h[0],!1,l),e.element.triggerHandler("eventclick",{month:e.settings.month,year:e.settings.year,event:h[0]}))}),this},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach(function(t){var i=$(t);i.data("popupmenu")&&i.trigger("close")})},callOnRenderMonth:function(){var e=this;this.settings.onRenderMonth(this.element,function t(i,n){n&&n.length>0&&(e.settings.eventTypes=n,e.weekView&&(e.weekView.settings.eventTypes=n),e.renderEventLegend(),e.renderEventTypes()),i&&i.length>0&&(e.settings.events=i,e.renderAllEvents(!0),e.weekView&&(e.weekView.settings.events=i,e.weekView.renderAllEvents(!0)))},{api:e,month:this.settings.month,year:this.settings.year})},currentDate:function(){var e=this.isIslamic?this.monthView.currentDateIslamic:this.monthView.currentDate;return B.isValidDate(e)?e:new Date},getDayEvents:function(e){if(e||(e=this.currentDate()),"string"!=typeof e&&!this.isRTL&&(e=st.padDate(e.getFullYear(),e.getMonth(),e.getDate())),B.isIslamic(this.locale.name)){var t=B.gregorianToUmalqura(e);e=st.padDate(t[0],t[1],t[2])}var i=this.monthView.dayMap.filter(function(a){return a.key===e});"month"!==this.activeView&&(i=this.weekView.dayMap.filter(function(a){return a.key===e}));var n={date:this.monthView.currentDate,events:[]};return 0===i.length?[]:(n.events=i[0].events,n.elem=i[0].elem,n)},renderTmpl:function(e,t,i,n){var a;if("object"===rt(hn)&&t){if(t instanceof $?t="".concat(t.html()):"string"==typeof t&&(st.containsHTML(t)||(t=$("#".concat(t)).html())),e.color=Oi.getEventTypeColor(e,this.settings.eventTypes),e.startsLong=B.formatDate(e.starts,{date:"long",locale:this.locale.name}),e.endsLong=B.formatDate(e.ends,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(B.formatDate(e.starts,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(e.starts,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(B.formatDate(e.ends,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(e.ends,{date:"hour",locale:this.locale.name})),B.isIslamic(this.locale.name)){var o=B.gregorianToUmalqura(new Date(e.starts)),l=B.gregorianToUmalqura(new Date(e.ends));e.startsLong=B.formatDate(o,{date:"long",locale:this.locale.name}),e.endsLong=B.formatDate(l,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(B.formatDate(o,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(o,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(B.formatDate(l,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(l,{date:"hour",locale:this.locale.name}))}e.typeLabel=this.getEventTypeLabel(e.type);var d=hn.compile(t,{event:e});if(i.classList.remove("has-only-one"),n)return void de.append(i,d,"*");if(i.innerHTML=d,i.classList.add("has-only-one"),null!=i&&null!==(a=i?.children[0])&&void 0!==a&&a?.classList.contains("accordion-header")){var p=this.settings.eventTypes.filter(function(b){return b.id===e.type})[0].color,v=["amber","amethyst","azure","emerald","graphite","ruby","slate","turquoise"].filter(function(b){return b===p}).length>0;(p!==e.color||!v)&&(i.children[0].style.backgroundColor=e.color)}}},addEvent:function(e){Oi.cleanEventData(e,!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(e),this.renderMonthEvents(e),this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.events=this.settings.events,this.weekView.renderAllEvents())},updateEvent:function(e){var t=e.id;e.color=void 0!==e.apiColor?e.apiColor:e.color,e.borderColor=void 0!==e.apiBorderColor?e.apiBorderColor:e.borderColor;for(var i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===t&&(this.settings.events[i]=H.extend(!0,this.settings.events[i],e),Oi.cleanEventData(this.settings.events[i],!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents(),this.weekView&&this.weekView.updateEvent(e)},deleteEvent:function(e){for(var t=e.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===t&&this.settings.events.splice(i,1);this.renderAllEvents(),this.weekView&&this.weekView.deleteEvent(e)},clearEvents:function(){this.settings.events=[],this.renderAllEvents(),this.weekView&&this.weekView.clearEvents()},updateMonthDetails:function(e){!e||null==e||(e.dayLegend&&(e.showLegend=null!==e.dayLegend,e.legend=e.dayLegend),this.settings=H.mergeSettings(this.element[0],e,this.settings),this.monthView.updateMonthDetails(this.settings),this.renderEventLegend())},showEventModal:function(e,t,i){var n=this;if(this.settings.modalTemplate){this.modalVisible()&&this.removeModal(),this.modalContents=document.createElement("div"),de.addClass(this.modalContents,"calendar-event-modal","hidden"),document.getElementsByTagName("body")[0].appendChild(this.modalContents),e=Oi.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes),this.renderTmpl(e||{},this.settings.modalTemplate,this.modalContents);var a=this.getDayEvents(),o=!0;a.elem=$(a.elem);var l=6===a.elem.index()?this.isRTL?"right":"left":this.isRTL?"left":"right";!i&&"day"===this.activeView&&(i=$(".week-view-header-wrapper"),l=this.isRTL?"left":"right"),i||(i=a.elem);var d=this.settings.modalOptions||{content:$(this.modalContents),closebutton:!0,popover:!0,placementOpts:{parent:i,strategies:["flip","nudge","shrink-y"],parentXAlignment:"center",parentYAlignment:"center",placement:l},title:e.title||e.subject,trigger:"immediate",keepOpen:!0,extraClass:"calendar-popup calendar-popup-mobile",tooltipElement:"#calendar-popup",headerClass:e.color,initializeContent:!1};i.off("hide.calendar").on("hide.calendar",function(){o?n.removeModal():(t(n.modalContents,e),n.element.trigger("hidemodal",{elem:n.modalContents,event:e}),n.removeModal(),o=!0)}).popover(d).off("show.calendar").on("show.calendar",function(h,p){var b=n.settings.eventTypes.filter(function(T){return T.id===e.type})[0].color,w=["amber","amethyst","azure","emerald","graphite","ruby","slate","turquoise"].filter(function(T){return T===b}).length>0;(b!==e.color||!w)&&(p.find(".tooltip-title").css("backgroundColor",e.color),p.find(".tooltip-title").remove("default")),n.element.trigger("showmodal",{elem:n.modalContents,event:e}),p.find("#isAllDay").off().on("click.calendar",function(T){$(T.currentTarget).prop("checked")?(p.find("#durationHours").prop("disabled",!0),p.find("#endsHourLocale").prop("disabled",!0),p.find("#startsHourLocale").prop("disabled",!0)):(p.find("#durationHours").prop("disabled",!1),p.find("#endsHourLocale").prop("disabled",!1),p.find("#endsHourLocale + .btn-icon").prop("disabled",!1),p.find("#startsHourLocale").prop("disabled",!1),p.find("#startsHourLocale + .btn-icon").prop("disabled",!1))}),p.find("#type").val(e.type).dropdown(),p.find("#comments").val(e.comments),p.find("#subject").focus(),p.find("button").on("click",function(T){var k=i.data("popover"),A=T.currentTarget.getAttribute("data-action");o="submit"!==A,k&&k.hide(!0)}),p.find(".datepicker").datepicker({locale:n.settings.locale,language:n.settings.language}),p.find(".timepicker").timepicker({locale:n.settings.locale,language:n.settings.language}),n.translate(p)}),$("#calendar-popup").one("tooltipafterplace.calendar",function(h,p){var v=p.element.find(".arrow"),b=parseInt(v.css("margin-top"),10);if(a.elem.parent().index()>=3){var w=parseInt(p.element.offset().top,10),T=w+p.element.height(),k=$("html").height()+10;if(T>k){var A=w-(T-k)-25;p.element.css("top","".concat(A,"px")),v.css("margin-top","".concat(b+(w-A)-18,"px"))}}else p.element.height()>580&&v.css("margin-top","".concat(b-18,"px"))}),this.activeElem=i}},showModalWithCallback:function(e,t,i){var n=this;this.showEventModal(e,function(a,o){for(var l=a.querySelectorAll("input, textarea, select"),d=0;d<l.length;d++)o[l[d].id]="checkbox"===l[d].getAttribute("type")?l[d].checked:l[d].value;o.color=void 0,o.borderColor=void 0,t?n.addEvent(o):n.updateEvent(o)},i)},modalVisible:function(){return null!==document.querySelector(".calendar-event-modal")},removeModal:function(){this.modalContents=null,this.activeElem&&(this.activeElem.off(),this.activeElem.data("popover")&&this.activeElem.data("popover").destroy()),de.remove(document.getElementById("calendar-popup")),de.remove(document.querySelector(".calendar-event-modal")),$("#timepicker-popup").hide()},updated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e||(e={}),e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),e.locale||e.template||e.upcomingEventDays||e.mobileTemplate?(this.destroy().init(),this):(this.weekView&&e.events&&(this.weekView.settings.events=e.events),this.weekView&&e.eventTypes&&(this.weekView.settings.events=e.events),this.weekView&&e.weekViewSettings&&(this.weekView.settings=H.mergeSettings(this.element[0],e.weekViewSettings,this.weekViews.settings)),this.settings.displayRange.start&&this.settings.displayRange.end?this.monthView.showRange(this.settings.displayRange.start,this.settings.displayRange.end):this.monthView.showMonth(this.settings.month,this.settings.year),this.renderAllEvents(),this.weekView&&e.weekViewSettings&&this.weekView.renderAllEvents(),this)},teardown:function(){return this.element&&this.element.off(),$(this.monthViewContainer).off(),this.monthView&&this.monthView.destroy(),this.weekView&&this.weekView.destroy(),this},destroy:function(){return this.eventTypeContainer&&(this.eventTypeContainer.innerHTML=""),this.monthViewContainer&&(this.monthViewContainer.innerHTML=""),this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML=""),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML=""),this.removeModal(),this.teardown(),$.removeData(this.element[0],an),this}},$.fn.calendar=function(s){return this.each(function(){var e=$.data(this,an);e?e.updated(s):e=$.data(this,an,new Gu(this,s))})};var bl="circlepager",is={slidesToShow:1,startingSlide:null,loop:!1,attributes:null,showArrows:!1,footerContainment:!1,hideBulletsOnOverflow:!1,pageSelectorInputText:null};function Ed(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,is),this.init()}Ed.prototype={init:function(){this.setElements(),this.slides.length&&(this.createControls(),this.handleEvents(),this.initActiveSlide(),this.showCollapsedView(),this.addAttributes())},setElements:function(){var e=this.settings;this.setResponsiveSlidesToShow(),this.container=$(".slides",this.element),this.slidesJQ=$(".slide",this.element),this.slidesToShow=e.slidesToShow,this.slides=[],this.isVisible=!0;for(var t=0,i=this.slidesJQ.length;t<i;t++)this.slides.push({node:$(this.slidesJQ[t])});this.activeIndex=null!==e.startingSlide&&e.startingSlide>-1&&e.startingSlide<this.slides.length?e.startingSlide:0,H.addAttributes(this.element,this,this.settings.attributes)},createControls:function(){for(var a,o,l,d,h,p,v,b,w,e=this.slides.length,t={bullets:""},i=[],n=0,T=0,k=e;T<k;T+=this.slidesToShow){o="",n++,d=B.translate((b=1===this.slidesToShow||e-T==1)?"SlideOf":"SlidesOf"),l=b?"#slide {0} of {1}":"#slides {0} and {1} of {2}";for(var A=0;A<this.slidesToShow&&T+A<e;A++)o+="".concat(T+A+1,", ");d=d.replace(b?"{1}":"{2}",e),l=l.replace(b?"{1}":"{2}",e),v=(o=o.slice(0,-2)).lastIndexOf(","),p=o.substr(v+2),b?(w="",(a=this.slides[T].node).is(".is-disabled, [disabled]")&&!a.is('[disabled="false"]')&&(w=' disabled tabindex="-1"',this.slides[T].isDisabled=!0),a.is(".active")&&null===this.settings.startingSlide&&""===w&&(this.activeIndex=T),d=(h=a.attr("data-button-text"))&&h.length?h:d.replace("{0}",o),l=l.replace("{0}",o)):(o=o.substr(0,v),d=d.replace("{1}",p).replace("{0}",o),l=l.replace("{1}",p).replace("{0}",o)),l=l.toLowerCase().replace(/[\s,--]+/g,"-"),t.bullets+='<a href="'.concat(l,'" class="control-button hyperlink hide-focus"').concat(w,'><span class="audible">').concat(d,"</span></a>"),i.push({href:l,text:d,isDisabled:w})}var M=$(".btn-previous",this.element),L=$(".btn-next",this.element),q=this.element.width();this.isBulletsNav=q>44*n;var O=!this.isBulletsNav;if(!this.isBulletsNav&&this.settings.hideBulletsOnOverflow)M.length||(t.previous=""+'<button class="btn-previous" type="button">\n            '.concat($.createIcon("left-arrow"),'\n            <span class="audible"> ').concat(B.translate("Previous"),"</span>\n          </button>")),L.length||(t.next=""+'<button class="btn-next" type="button">\n            '.concat($.createIcon("right-arrow"),'\n            <span class="audible">').concat(B.translate("Next"),"</span>\n          </button>"));else{var _;null===(_=this.pagerApi)||void 0===_||_?.destroy();var G=$(".controls .btn-controls-previous, .btn-controls-next, .pager-container",this.element);M.add(L).add(G).remove(),this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls").remove(),this.settings.showArrows&&(O=q<44*n+100,t.controlsPrevious=""+'<button class="btn-icon btn-controls-previous" type="button">\n            '.concat($.createIcon("previous-page"),'\n            <span class="audible"> ').concat(B.translate("Previous"),"</span>\n          </button>"),t.controlsNext=""+'<button class="btn-icon btn-controls-next" type="button">\n            '.concat($.createIcon("next-page"),'\n            <span class="audible">').concat(B.translate("Next"),"</span>\n          </button>"))}if(this.activeIndex>0&&this.activeIndex>n-1&&(this.activeIndex=n-1),n>1){var j=!0;t.all='<div class="controls circlepager-controls">',t.previous||t.next?(j=!1,t.all+="".concat(t.bullets,"</div>").concat(t.previous||"").concat(t.next||"")):O?(j=!1,t.all+='<div class="pager-container" data-init="false"></div></div>'):t.all+="".concat(t.controlsPrevious||"").concat(t.bullets).concat(t.controlsNext||"","</div>"),this.element.append(t.all).find("button").button(),j&&this.SetFooterContainment(),this.pagerApi=this.element.find(".pager-container").pager({type:"standalone",dataset:i,pagesize:1,showPageSizeSelector:!1,showPageSelectorInput:!0,footerContainmentClass:"footer-circlepager",footerContainment:this.settings.footerContainment,pageSelectorInputText:this.settings.pageSelectorInputText}).data("pager"),this.setPagerButtonsState()}},SetFooterContainment:function(){var e=this;this.element.closest(".card, .widget").length&&this.settings.footerContainment&&["widget","card"].forEach(function(n){var a=e.element.closest(".".concat(n,"-content"));if(a.length){var o=a.next(".".concat(n,"-footer"));o.find(".circlepager-controls").remove(),o.length||(o=$('<div class="'.concat(n,'-footer footer-circlepager"></div>')).insertAfter(a)),e.element.find(".circlepager-controls").appendTo(o)}})},setPagerButtonsState:function(){if(this.pagerApi){var e={prevAndFirst:this.pagerApi.state.activePage>1,nextAndLast:this.pagerApi.state.activePage<this.pagerApi.state.pages};this.pagerApi.updated({enableFirstButton:e.prevAndFirst,enablePreviousButton:e.prevAndFirst,enableNextButton:e.nextAndLast,enableLastButton:e.nextAndLast,activePage:this.pagerApi.state.activePage})}},isVisibleInContainer:function(e){if(e&&e[0]){var t=e[0].getBoundingClientRect(),i=this.element[0].getBoundingClientRect();return t.left>i.left&&t.left<i.left+i.width&&t.top>i.top&&t.top<i.top+i.height}return-1},updateSlidesToShow:function(e){if(this.isActive)return this.settings.slidesToShow=e||1,this.updated(),this},setResponsiveSlidesToShow:function(){var t=this.element.width();this.resSlidesToShow=this.resSlidesToShow||this.settings.slidesToShow,this.settings.slidesToShow=t<300&&this.settings.slidesToShow>1?1:this.resSlidesToShow},responsiveSlidesToShow:function(e){var t=this;!this.isActive||!e||(this.setResponsiveSlidesToShow(),this.slidesToShow=e||this.settings.slidesToShow,this.hideSlides(),this.element.parents(".card-content, .widget-content").addClass("unset-overflow"),this.unbind().slidesJQ.css("width",""),this.slides.length&&setTimeout(function(){t.createControls(),t.handleEvents(),t.initActiveSlide(),t.showCollapsedView(),t.removeOverflowedControls()},0))},show:function(e){if(this.isActive){this.activeIndex=e=typeof e<"u"?e:this.activeIndex;var t=this.slides.length,i=e>-1?"".concat(B.isRTL()?100*(t-e-1):0-100*e,"%"):0;this.controlButtons.removeClass("is-active").eq(e).addClass("is-active"),this.container[0].style.left=i,!this.isBulletsNav&&this.settings.hideBulletsOnOverflow?(this.element.addClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible").end().eq(e).find("span").removeClass("audible")):(this.element.removeClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible")),this.isFocus&&this.isBulletsNav&&(this.isFocus=!1,this.controlButtons.eq(e).focus())}},first:function(){this.show(0)},last:function(){this.show(Math.round(this.slides.length/this.slidesToShow)-1)},prev:function(){var t,e=this;if(t=this.activeIndex>0?this.activeIndex-1:this.settings.loop?Math.round(this.slides.length/this.slidesToShow)-1:0,this.slides[t].isDisabled)return setTimeout(function(){e.prev()},0),this.activeIndex=t,!1;this.show(t)},next:function(){var t,e=this,i=this.slides.length%this.slidesToShow>=1?1:0,n=Math.floor(this.slides.length/this.slidesToShow)+i;if(this.slides[t=this.activeIndex>=n-1?this.settings.loop?0:this.activeIndex:this.activeIndex+1].isDisabled)return setTimeout(function(){e.next()},0),this.activeIndex=t,!1;this.show(t)},showCollapsedView:function(){if(this.isActive=!0,this.element.addClass("is-active"),this.container[0].style.width="".concat(100*this.slides.length,"%"),this.settings.slidesToShow>1&&this.slidesJQ.eq(0).width()*this.slidesToShow>this.element.width())this.responsiveSlidesToShow(this.slidesToShow-1);else{for(var e=0,t=this.slidesJQ.length;e<t;e++)this.slidesJQ[e].style.width="".concat(100/this.slidesToShow/this.slides.length,"%"),this.element.parents(".card-content").removeClass("unset-overflow"),this.showSlides(),this.slidesJQ.addClass("transition");this.show()}},removeOverflowedControls:function(){var e,t=this.controlButtons.parent(),i=null===(e=t[0])||void 0===e?void 0:e?.nextElementSibling;t.length>1&&i&&i.remove()},addAttributes:function(){for(var e=0,t=this.controlButtons.length;e<t;e++){var i=$(this.controlButtons[e]);H.addAttributes(i,this,this.settings.attributes,"control-".concat(e+1))}},showSlides:function(){return this.slidesJQ.addClass("is-visible"),this},hideSlides:function(){return this.slidesJQ.removeClass("is-visible"),this},showExpandedView:function(){this.isActive=!1,this.element.removeClass("is-active"),this.element&&this.element[0]&&(this.element[0].style.width=""),this.container&&this.container[0]&&(this.container[0].style.width="",this.container[0].style.left="")},initActiveSlide:function(){if(this.slides[this.activeIndex].isDisabled)return this.next(),!1;this.show();var e=this.controlButtons.hasClass("is-active"),t=this.controlButtons.find(".pager-toolbar").length>0;(e||t)&&(this.showSlides(),this.slidesJQ.addClass("transition"))},unbind:function(){var e,t=this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls");if(this.controlButtons&&!this.controlButtons.length&&(this.controlButtons=t.find(".control-button")),null===(e=this.pagerApi)||void 0===e||e?.destroy(),$("body").off("resize.circlepager"),this.element.find(".pager-container").off("page.circlepager"),this.element.off("focus.circlepager keydown.circlepager","*"),this.controlButtons){for(var i=0,n=this.controlButtons.length;i<n;i++)$(this.controlButtons[i]).off("click.circlepager");this.controlButtons.off("click.circlepager keydown.circlepager")}return $(".btn-previous, .btn-controls-previous",this.element).add(t.find(".btn-controls-previous")).off("click.circlepager"),$(".btn-next, .btn-controls-next",this.element).add(t.find(".btn-controls-next")).off("click.circlepager"),$(".controls",this.element).remove(),this.element.closest(".card, .widget").find(".footer-circlepager").remove(),this.showExpandedView(),this.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager"),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,is)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],bl)},handleEvents:function(){var e=this,t=this,i=this.element.closest(".card, .widget").find(".card-footer .circlepager-controls, .widget-footer .circlepager-controls");this.controlButtons=$(".control-button",this.element),this.controlButtons.length||(this.controlButtons=i.find(".control-button")),$(".btn-previous, .btn-controls-previous",this.element).add(i.find(".btn-controls-previous")).off("click.circlepager").on("click.circlepager",function(d){e.prev(),d.stopImmediatePropagation()}),$(".btn-next, .btn-controls-next",this.element).add(i.find(".btn-controls-next")).off("click.circlepager").on("click.circlepager",function(d){e.next(),d.stopImmediatePropagation()});for(var n=function(h){var p=$(e.controlButtons[h]);p.hideFocus(),p.off("click.circlepager").on("click.circlepager",function(v){v.preventDefault(),!e.slides[h].isDisabled&&e.show(h)})},a=0,o=this.controlButtons.length;a<o;a++)n(a);this.element.off("focus.circlepager","*").on("focus.circlepager","*",function(d){var h=!1;if(!t.isVisibleInContainer($(this)))for(var p=t.element.find(":focusable"),v=0,b=p.length;v<b;v++)if(t.isVisibleInContainer(p.eq(v))){p.eq(v).focus(),h=!0;break}if(d.stopPropagation(),h)return!1}),this.element.off("keydown.circlepager","*").on("keydown.circlepager","*",function(d){var h=!1,p=d.which||d.keyCode||d.charCode||0,v=$(":focusable"),b=v.index(this);if(9===p)if(d.shiftKey){for(var w=b-1;w>=0;w--)if(t.element.has(v.eq(w)).length<1||t.isVisibleInContainer(v.eq(w))){v.eq(w).focus(),h=!0;break}}else t.isVisibleInContainer(v.eq(b+1))||(t.controlButtons.first().focus(),h=!0);if(d.stopPropagation(),h)return!1}),this.controlButtons.off("keydown.circlepager").on("keydown.circlepager",function(d){var h=!1,p=d.which||d.keyCode||d.charCode||0,v=B.isRTL();if(-1!==[37,39].indexOf(p)&&(t.isFocus=!0,d.altKey?37===p&&!v||39===p&&v?t.first():t.last():(!v&&37===p||v&&39===p?t.prev():t.next(),h=!0)),h)return d.preventDefault(),d.stopPropagation(),!1}),$("body").off("resize.circlepager").on("resize.circlepager",Xn(function(){t.responsiveSlidesToShow()},0)),t.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager").on("activated.circlepager",function(){t.responsiveSlidesToShow()}),this.element.find(".pager-container").off("page.circlepager").on("page.circlepager",function(d,h){e.setPagerButtonsState(),e.show(h.activePage-1)})}},$.fn.circlepager=function(s){return this.each(function(){var e=$.data(this,bl);e?e.updated(s):e=$.data(this,bl,new Ed(this,s))})},$.fn.calendartoolbar=function(s){return this.each(function(){var e=$.data(this,gl);e?e.updated(s):e=$.data(this,gl,new Do(this,s))})};var Sa="compositeform",Yu={breakpoint:"phone-to-tablet",trigger:null,expandedText:B.translate("ShowLess"),collapsedText:B.translate("ShowMore")};function Tc(s,e){this.settings=H.mergeSettings(s,e,Yu),this.element=$(s),this.init(),Ps("CompositeForm")}Tc.prototype={init:function(){return this.build().handleEvents()},build:function(){var e=this.element[0].classList;e.contains("composite-form")||e.add("composite-form");var t=this.element.find(".expandable-area");return t.length?(this.hasSummary=!0,this.expandableArea=t,this.expandableAreaAPI=this.expandableArea.data("expandablearea"),this.expandableAreaAPI||(this.expandableArea.expandablearea({trigger:this.settings.trigger}),this.expandableAreaAPI=this.expandableArea.data("expandablearea")),this.expander=this.expandableAreaAPI.expander,this.setExpanderText(this.settings.expandedText)):this.hasSummary=!1,this.checkResponsive(),this},handleEvents:function(){var e=this;function t(){var i=e.expandableAreaAPI.isExpanded();e.setExpanderText(e.settings[i?"expandedText":"collapsedText"])}return $("body").off("resize.".concat(Sa)).on("resize.".concat(Sa),function(i){e.checkResponsive(i)}),this.element.on("updated.".concat(Sa),function(){e.updated()}),this.hasSummary&&this.expandableArea.on("expand.".concat(Sa),t).on("collapse.".concat(Sa),t),this},checkResponsive:function(){var e=this.element[0].classList;Jt.isBelow(this.settings.breakpoint)?e.add("is-in-responsive-mode"):(e.remove("is-in-responsive-mode"),this.isSideOriented()&&!this.expandableAreaAPI.isExpanded()&&this.expandableAreaAPI.open())},setExpanderText:function(e){if(this.hasSummary&&e instanceof String&&e.length){var t=this.expander.find("span");t||(t=this.expander),t.text(e)}},isSideOriented:function(){return this.element[0].classList.contains("on-side")},updated:function(){return this.teardown().init()},teardown:function(){return $("body").off("resize.".concat(Sa)),this.element.off("updated.".concat(Sa)),this.hasSummary&&this.expandableArea.off("expand.".concat(Sa," collapse.").concat(Sa)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Sa)}},$.fn.compositeform=function(s){return this.each(function(){var e=$.data(this,Sa);e?e.updated(s):e=$.data(this,Sa,new Tc(this,s))})};var ju="contextualactionpanel",Wg={content:null,initializeContent:!0,title:"Contextual Action Panel",cssClass:null,detailRefId:void 0,modalSettings:{buttons:null,centerTitle:!1,id:null,showCloseBtn:!1,title:void 0,trigger:"click",propagateStyle:!1,compactPanel:!1,useFlexToolbar:!1}},$d=["buttons","centerTitle","id","showCloseButton","trigger","useFlexToolbar"];function xs(s){var e={showCloseButton:"showCloseBtn"};return $d.forEach(function(t){if(-1===[null,void 0].indexOf(s[t])){var i=t;s.modalSettings||(s.modalSettings={}),e[t]?s.modalSettings[i=e[t]]=s[t]:s.modalSettings[t]=s[t],delete s[t],gi("settings.modalSettings.".concat(i),"settings.".concat(t))}}),s}function Dd(s,e){this.settings=H.mergeSettings(s,e,Wg),this.settings=xs(this.settings),this.element=$(s),this.init()}Dd.prototype={get modalAPI(){var s;return this.panel&&this.panel.length&&(s=this.panel.data("modal")),s},get toolbarAPI(){var s;return this.toolbar&&this.toolbar.length&&(s=this.toolbar[0].classList.contains("flex-toolbar")?this.toolbar.data("toolbar-flex"):this.toolbar.data("toolbar")),s},get buttonsetAPI(){var s=H.getArrayFromList(this.panel[0].querySelectorAll(".buttonset"));return $(s[0]).data("buttonset")},init:function(){this.setup().build().handleEvents()},setup:function(){var o,e=this.element.next(".contextual-action-panel");return"string"==typeof dataModal&&(o=$("#".concat(this.id))).length&&(e=o),1===this.element.closest(".popupmenu").length&&(e=this.element.closest(".popupmenu").next(".contextual-action-panel")),e[0]&&(e[0].style.display="none",e.addClass("is-animating"),this.panel=e),this},build:function(){var e,t,i=this,n=this.settings.content;if(this.id=(null===(e=this.settings)||void 0===e||null===(e=e?.modalSettings)||void 0===e?void 0:e?.id)||n?.attr("id")||H.uniqueId(this.element,"contextual-action-modal"),null!==(t=this.settings)&&void 0!==t&&null!==(t=t?.modalSettings)&&void 0!==t&&t?.id||(this.settings.modalSettings.id=this.id),!this.panel||!this.panel.length)if(n instanceof jQuery){if(n.is(".contextual-action-panel")?this.panel=n:(n.wrap('<div class="contextual-action-panel"></div>'),this.panel=n.parent()),this.panel.addClass("modal").appendTo("body"),n.is("iframe"))return n.ready(function(){i.completeBuild(),n.show()}),i;n.show()}else this.panel=$('<div class="contextual-action-panel">'.concat(n,"</div>")).appendTo("body"),this.panel.addClass("modal").attr("id",this.settings.modalSettings.id);return this.settings.modalSettings.cssClass&&this.panel.addClass("".concat(this.settings.modalSettings.cssClass)),this.completeBuild(),this},completeBuild:function(){var e,i,t=!1,n=!1,a=!0;this.title=this.settings.modalSettings.title?this.settings.modalSettings.title:this.settings.title,this.panel.find("svg").icon(),0===this.panel.find(".modal-content").length&&((e=this.panel.children()).is("iframe")&&(i=e.contents(),this.toolbar=i.find(".toolbar, .flex-toolbar"),t=!0),t||(e.wrapAll('<div class="modal-content"></div>').wrapAll('<div class="modal-body '.concat(void 0!==this.settings.detailRefId?"padding-x-16 has-back-button":"",'"></div>')),this.panel.addClass("modal")));var l=this.panel.find(".modal-header");0===l.length&&(l=$('<div class="modal-header"></div>')).insertBefore(this.panel.find(".modal-body")),this.header=l;var d=this.panel.find(".toolbar .buttonset, .flex-toolbar .buttonset").first();if(this.toolbar||(this.toolbar=this.panel.find(".toolbar, .flex-toolbar").first()),!this.toolbar.length)if(a=!1,this.settings.modalSettings.buttons&&this.settings.modalSettings.buttons.forEach(function(G){"input"===G.type&&(n=!0)}),this.settings.title&&this.settings.modalSettings.centerTitle||this.settings.modalSettings.title&&this.settings.modalSettings.centerTitle){var h=n?'<div class="toolbar-section search"></div>':"",p='<div class="flex-toolbar">\n          <div class="toolbar-section static"></div>\n          <div class="toolbar-section title center-text">\n            <h2>'.concat(this.title,"</h2>\n          </div>\n          ").concat(h,'\n          <div class="toolbar-section buttonset static"></div>\n        </div>');this.toolbar=$(p)}else if(!d.length){var v=this.settings.modalSettings.useFlexToolbar?"flex-toolbar":"toolbar",b=this.settings.modalSettings.useFlexToolbar?'<div class="toolbar-section title"><h2>'.concat(this.title,"</h2></div>"):"",T='<div class="'.concat(this.settings.modalSettings.useFlexToolbar?"toolbar-section buttonset":"buttonset",'"></div>'),k=this.settings.modalSettings.useFlexToolbar&&n?'<div class="toolbar-section search"></div>':"",A='<div class="'.concat(v,'">\n          ').concat(b,"\n          ").concat(k,"\n          ").concat(T,"\n        </div>"),M=$(A);M.appendTo(this.panel.find(".modal-header")),this.toolbar=M,d=M.children(".buttonset")}if(this.toolbar.appendTo(this.header),!a){(!d||!d.length&&!this.settings.modalSettings.centerTitle)&&(d=$('<div class="toolbar-section buttonset"></div>')).appendTo(this.toolbar);var L=this.toolbar.find(".title");L.length||(L=$('\n          <div class="toolbar-section title'.concat(this.settings.modalSettings.centerTitle?" center-text":"",'">\n            <h2>').concat(this.title,"</h2>\n          </div>\n        ")),d?L.insertBefore(d):this.toolbar.prepend(L)),L.length||(L=$('\n          <div class="title">\n            '.concat(this.title,"\n          </div>\n        ")),this.toolbar.prepend(L))}if(t||this.panel.detach().appendTo("body"),this.element.attr("data-modal")||this.element.attr("data-modal",this.settings.modalSettings.id),this.panel.attr("id")||this.panel.attr("id",this.settings.modalSettings.id),this.panel.modal(this.settings.modalSettings),this.buttons=this.panel.find(".buttonset").children("button"),this.closeButton=this.panel.find(".modal-header").find('.btn-close, [name="close"], button.close-button'),this.settings.modalSettings.showCloseBtn&&!this.closeButton.length){var q=B.translate("Close");if(this.closeButton=$('\n        <button class="btn-close" type="button" title="'.concat(q,'">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(q,"</span>\n        </button>\n      ")),this.settings.modalSettings.useFlexToolbar){var O=$('<div class="toolbar-section static"></div>').append(this.closeButton),_=this.toolbar.find(".toolbar-section.more");O.insertAfter(_.length?_:d)}else d.append(this.closeButton)}return this.closeButton.length&&this.toolbar.addClass("has-close-button"),this.toolbar.is(".toolbar")&&this.toolbar.toolbar(),this.toolbar.is(".flex-toolbar")&&this.toolbar.toolbarflex(),H.fixSVGIcons(this.element),this},handleEvents:function(){var e=this,t=this,i="#".concat(t.settings.detailRefId);function n(a){t.element.triggerHandler(a.type)}return this.panel.find(i).on("click",function(a){a.stopPropagation(),t.showContentDetail(),console.log("click");var o=t.header.find(".go-back");$(o).on("click",function(l){l.stopPropagation(),t.hideContentDetail()})}),this.panel.addClass("is-animating").off("open.contextualactionpanel").on("open.contextualactionpanel",function(a){n(a),t.buildContent(),t.panel.removeClass("is-animating")}).off("close.contextualactionpanel").on("close.contextualactionpanel",function(a){n(a)}).off("beforeclose.contextualactionpanel").on("beforeclose.contextualactionpanel",function(a){n(a)}).off("beforeopen.contextualactionpanel").on("beforeopen.contextualactionpanel",function(a){t.settings.initializeContent&&$(e).initialize(),n(a)}).off("afteropen.contextualactionpanel").on("afteropen.contextualactionpanel",function(){if(t.toolbar&&t.toolbar.trigger("recalculate-buttons"),t.toolbar.length){var a=t.toolbar.find(".buttonset > .is-selected");if(a.length||(a=t.toolbar.find(".buttonset > *:first-child")).is(".searchfield-wrapper")&&(a=a.children(".searchfield")),!a.length&&t.toolbar.is(".flex-toolbar"))return void(a=t.toolbar.find("button").first()).focus();var o=t.toolbar.data("toolbar");o&&o.setActiveButton(a,!0)}t.panel.find(".modal-body-wrapper").find(":focusable").first().focus(),H.fixSVGIcons(t.panel)}),t.closeButton&&t.closeButton.length&&t.closeButton.on("click.contextualactionpanel",function(){t.handleToolbarSelected()}),this},buildContent:function(){if(void 0!==this.settings.detailRefId){var e=B.isRTL()?"-32px":"32px",t=this.panel.find(".content-main").width()+16;this.panel.find(".modal-body").width(t),this.panel.find(".content-main").css("transform","translateX(0)"),this.panel.find(".content-detail").css("transform","translateX(".concat(e,")")),this.panel.find(".content-detail").css("display","none")}},showContentDetail:function(){var e=this;this.showContentDetailFlag=!0;var t=this.panel.find(".content-main").width(),i=t+32;t=B.isRTL()?Math.abs(t):-Math.abs(t),i=B.isRTL()?Math.abs(i):-Math.abs(i),this.showContentDetailFlag&&(this.panel.find(".content-detail").css("display","flex"),setTimeout(function(){e.panel.addClass("show-content-detail"),e.panel.find(".content-main").css("transform","translateX(".concat(i,"px)")),e.panel.find(".content-detail").css("transform","translateX(".concat(t,"px)"))},50)),this.addBackButton()},hideContentDetail:function(){var e=this;this.showContentDetailFlag=!1;var t=B.isRTL()?"-32px":"32px";this.panel.removeClass("show-content-detail"),this.header.removeClass("has-back-button"),this.header.find(".go-back-button").remove(),this.panel.find(".content-main").css("transform","translateX(0)"),this.panel.find(".content-detail").css("transform","translateX(".concat(t,")")),setTimeout(function(){e.panel.find(".content-detail").css("display","none")},50)},addBackButton:function(){this.header&&(this.header.addClass("has-back-button"),this.header.prepend('\n      <div class="go-back-button">\n        <button id="go-back" class="btn-icon go-back btn-system" type="button">\n          <span class="audible">Show navigation</span>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-arrow-left"></use>\n          </svg>\n        </button>\n      </div>\n      '))},handleToolbarSelected:function(){this.close(!0)},teardown:function(){var e=this,t=e.toolbar.children(".buttonset");this.panel.off("open.contextualactionpanel close.contextualactionpanel beforeclose.contextualactionpanel beforeopen.contextualactionpanel afterclose.contextualactionpanel"),t.children("*:not(.searchfield)").off("click.contextualactionpanel"),t.children(".btn-menu").each(function(){var a=$(this).data("popupmenu");a&&a.destroy()}),e.header&&e.header.remove(),e.panel.find(".modal-body").children().first().unwrap().unwrap(),e.element.removeAttr("data-modal"),e.closeButton&&e.closeButton.length&&(e.closeButton.off("click.contextualactionpanel"),delete e.closeButton),e.element.trigger("afterteardown")},close:function(){var t;"immediate"===this.settings.modalSettings.trigger&&(t=!0),this.modalAPI&&this.modalAPI.close(t,!1,arguments.length>0&&void 0!==arguments[0]&&arguments[0])},disable:function(){this.element.prop("disabled",!0),this.panel.hasClass("is-visible")&&this.close()},enable:function(){this.element.prop("disabled",!1)},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),this.settings=xs(this.settings),this.setup(),this.modalAPI&&this.modalAPI.updated(this.settings.modalSettings),this},destroy:function(){this.modalAPI&&this.modalAPI.isOpen&&this.modalAPI.close(!0),$.removeData(this.element[0],ju),this.toolbar&&this.toolbar.data("toolbar")&&this.toolbar.data("toolbar").destroy(),this.toolbar&&this.toolbar.data("toolbarFlex")&&this.toolbar.data("toolbarFlex").destroy()},destroyAll:function(){La.destroyAll(!0)}},$.fn.contextualactionpanel=function(s){return this.each(function(){var e,i,t=null==s||null===(e=s?.modalSettings)||void 0===e?void 0:e?.id;!t&&null!=s&&s?.content&&s?.content instanceof jQuery&&(t=null==s||null===(i=s?.content)||void 0===i?void 0:i?.attr("id"));var n=La.findById(t);n?n.updated(s):$.data(this,ju,new Dd(this,s))})};var Md="timepicker",Ku=["standard","range"],yl=function(){return{locale:null,language:null,timeFormat:void 0,minuteInterval:5,secondInterval:5,mode:Ku[0],roundToInterval:!0,parentElement:null,returnFocus:!0,attributes:null,tabbable:!0,hourRange:[0,24]}};function wl(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,yl),this.init()}wl.prototype={init:function(){this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=B.getLocale(this.settings.language),i=B.getLocale(this.settings.locale);return $.when(i,t).done(function(n,a){e.locale=B.cultures[n]||B.currentLocale,e.language=a||e.settings.language||e.locale.language||null,e.settings.language=e.language,e.setCurrentCalendar(),e.build().handleEvents().addAttributes()}),this},setCurrentCalendar:function(){return this.currentCalendar=B.calendar(this.locale.name,this.settings.language,this.settings.calendarName),void 0===this.settings.timeFormat&&(this.settings.timeFormat=this.currentCalendar.timeFormat||"h:mm a"),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.build(),this},setup:function(){function e(a,o){(!o||["minute","second"].indexOf(o)<0)&&(o="minute");var l=yl()["".concat(o,"Interval")];if(void 0===a||isNaN(a))return l;var d=parseInt(a,10);return d>0&&d<60?d:l}function i(a){return!0===a}return this.id="".concat(H.uniqueId(this.element,"timepicker"),"-id"),this.hoursId="timepicker-hours-".concat(this.id.toString()),this.minutesId="timepicker-minutes-".concat(this.id.toString()),this.secondsId="timepicker-seconds-".concat(this.id.toString()),this.periodId="timepicker-period-".concat(this.id.toString()),this.element.is("[data-round-to-interval]")&&(this.settings.roundToInterval=i(this.element.attr("data-round-to-interval"))),this.element.is("[data-minute-interval]")&&(this.settings.minuteInterval=e(this.element.attr("data-minute-interval"),"minute")),this.settings.timeFormat=function t(a){return a&&a.toUpperCase().match("H")&&a.match("mm")?a:yl().timeFormat}(24===parseInt(this.element.attr("data-force-hour-mode"),10)?"HH:mm":this.settings.timeFormat),this.settings.minuteInterval=e(this.settings.minuteInterval,"minute"),this.settings.secondInterval=e(this.settings.secondInterval,"second"),this.settings.mode=function n(a){return $.inArray(a,["standard","range"])>-1?a:yl().mode}(this.settings.mode),this.settings.roundToInterval=i(this.settings.roundToInterval),this.dayPeriods=this.currentCalendar.dayPeriods,this},build:function(){if(this.setup(),this.element.attr("autocomplete","off"),this.settings.parentElement)return this.settings.parentElement.empty(),this.trigger=$(),this.buildStandardPopup(),this.setupStandardEvents(),this;var e=this.element.next();return this.trigger=e.is("button.trigger")?e:$('<button class="btn-icon trigger" type="button">\n        <span class="audible"></span>\n        '.concat($.createIcon("clock"),"\n      </button>")).insertAfter(this.element),this.element.is(":disabled")&&this.disable(),this.makeTabbable(!this.element.is(":disabled")&&"-1"!==this.element.attr("tabindex")&&this.settings.tabbable),this.addAria().addMask().handleEvents().roundMinutes(),this},addAria:function(){this.element.attr({role:"combobox","aria-expanded":"false"}),this.trigger.attr({role:"button","aria-haspopup":"dialog"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.find(".audible").remove(),this.label.append('<span class="audible">'.concat(B.translate("UseArrow",{locale:this.locale.name,language:this.language}),"</span>"));var e=B.translate("TimepickerTriggerButton");return this.trigger.children("span.audible").text(e),this},addAttributes:function(){H.addAttributes(this.element,this,this.settings.attributes),H.addAttributes(this.trigger,this,this.settings.attributes,"trigger")},handleKeys:function(){var e=this;this.element.on("keydown.timepicker",function(t){var i=!1;return 27===t.which&&e.isOpen()&&(i=!0,e.closeTimePopup()),40===t.which&&!e.isOpen()&&(i=!0,e.openTimePopup()),!i||(t.stopPropagation(),t.preventDefault(),!1)})},handleBlur:function(){var e=this;this.element.on("blur.timepicker",function(){e.roundMinutes(),setTimeout(function(){e.isOpen()&&0===e.popup.find(":focus").length&&e.closeTimePopup()},20)})},is24HourFormat:function(e){return e||(e=this.settings.timeFormat),!!e&&(e.match("H")||[]).length>0},hourText:function(e){return((this.settings.timeFormat.toUpperCase().match("HH")||[]).length>0&&e<10?"0":"")+e},hasSeconds:function(e){return e||(e=this.settings.timeFormat),(e.match("ss")||[]).length>0},hasDayPeriods:function(e){return e||(e=this.settings.timeFormat),(e.match("a")||[]).length>0},getTimeSeparator:function(){return this.currentCalendar.dateFormat.timeSeparator},roundMinutes:function(){if(st.toBoolean(this.settings.roundToInterval)){var e=this.element.val(),t=this.getTimeSeparator(),i=e?e.split(t):[],n=this.settings.minuteInterval;if(i[1]){if(!this.is24HourFormat(this.settings.timeFormat)){var a=i[1].split(" ");i[1]=a[0],a[1]&&i.push(a[1])}if(i[1]=parseInt(i[1],10),i[1]%n!=0){i[1]=Math.round(i[1]/n)*n,i[1]=i[1].toString(),i[1]=(i[1].length<2?"0":"")+i[1],"60"===i[1]&&(i[1]="00",i[0]=(parseInt(i[0],10)+1).toString());var o="".concat(i[0]+t+i[1]," ").concat(i[2]?i[2]:"");this.element.val(o)}}}},addMask:function(){this.element.data("mask")&&"object"===rt(this.element.data("mask"))&&this.element.data("mask").destroy(),this.element.data("mask",void 0);var e={keepCharacterPositions:!0,process:"date",patternOptions:{format:this.settings.timeFormat}};return this.addedValidation=!1,this.element[0].getAttribute("data-validate")||(this.addedValidation=!0,this.element.attr("data-validate","time").attr("data-validation-events",JSON.stringify({time:"blur change enter"})).validate()),e&&this.element.mask(e),this},getMaxHourRange:function(e,t,i){var n=this;return t?"AM"===(i||e.period)?n.settings.hourRange[1]>12?12:n.settings.hourRange[1]:n.settings.hourRange[1]>12?n.settings.hourRange[1]-12:12:n.settings.hourRange[1]},buildStandardPopup:function(){var a,e=this,t=$('<div class="timepicker-popup-content"></div>'),i=this.getTimeSeparator(),n="";this.initValues=e.getTimeFromField();var o=$('<div class="time-parts"></div>').appendTo(t),l=this.is24HourFormat(),d=this.hasSeconds(),h=this.hasDayPeriods(),p=l?0:1,v=l?24:13;for(this.hourSelect=$('<select id="'.concat(this.hoursId,'" data-options="{\'noSearch\': \'true\'}" class="hours dropdown"></select>'));p<v&&(a="",!(p>e.getMaxHourRange(this.initValues,h)));)parseInt(e.initValues.hours,10)===p&&(a=" selected"),e.hourSelect.append($("<option".concat(a,">").concat(e.hourText(p),"</option>"))),p++;var w=$('<div class="time-part"></div>');w.append($('<label for="'.concat(this.hoursId,'">').concat(B.translate("Hours",{locale:this.locale.name,language:this.language}),"</label>"))),w.append(this.hourSelect),w.append($('<span class="label colons">'.concat(i,"</span>"))),o.append(w);var T=0;for(this.minuteSelect=$('<select id="'.concat(this.minutesId,'" data-options="{\'noSearch\': \'true\'}" class="minutes dropdown"></select>'));T<=59;)n=T<10?"0".concat(T):T,a="",parseInt(e.initValues.minutes,10)===T&&(a=" selected"),e.minuteSelect.append($("<option".concat(a,">").concat(n,"</option>"))),T+=e.settings.minuteInterval;this.minuteSelect.find("option[selected]").length||this.minuteSelect.prepend($("<option selected>".concat(e.initValues.minutes,"</option>")));var k=$('<div class="time-part"></div>');if(k.append($('<label for="'.concat(this.minutesId,'">').concat(B.translate("Minutes",{locale:this.locale.name,language:this.language}),"</label>"))),k.append(this.minuteSelect),d&&k.append($('<span class="label colons">'.concat(i,"</span>"))),o.append(k),d){var A=0;for(this.secondSelect=$('<select id="'.concat(this.secondsId,'" data-options="{\'noSearch\': \'true\'}" class="seconds dropdown"></select>'));A<=59;)n=A<10?"0".concat(A):A,a="",(parseInt(e.initValues.seconds,10)===A||!e.initValues.seconds&&"00"===n)&&(a=" selected"),this.secondSelect.append($("<option".concat(a,">").concat(n,"</option>"))),A+=e.settings.secondInterval;this.secondSelect.find("option[selected]").length||this.secondSelect.prepend($("<option selected>".concat(e.initValues.seconds,"</option>")));var M=$('<div class="time-part"></div>');M.append($('<label for="'.concat(this.secondsId,'">').concat(B.translate("Seconds",{locale:this.locale.name,language:this.language}),"</label>"))),M.append(this.secondSelect),o.append(M)}if(!l&&h){this.periodSelect=$('<select id="'.concat(this.periodId,'" data-options="{\'noSearch\': \'true\'}" class="period dropdown"></select>')),o.append($('<span class="label colons"></span>'));for(var L=this.currentCalendar.dayPeriods,z=0,q=new RegExp(e.initValues.period,"i");z<2;)a="",q.test(L[z])&&(a=" selected"),this.periodSelect.append($('<option value="'.concat(L[z],'"').concat(a,">").concat(L[z],"</option>"))),z++;var O=$('<div class="time-part"></div>');O.append($('<label for="'.concat(this.periodId,'">').concat(B.translate("Period",{locale:this.locale.name,language:this.language}),"</label>"))),O.append(this.periodSelect),o.append(O)}if(this.settings.parentElement)this.settings.parentElement.append(t),e.popup=this.settings.parentElement.find(".timepicker-popup-content").addClass("timepicker-popup").attr("id","timepicker-popup");else{t.append('<div class="modal-buttonset"><button type="button" class="btn-modal-primary set-time">'.concat(B.translate("SetTime",{locale:this.locale.name,language:this.language}),"</button></div>"));var _=this.element,G=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(G="center",_=this.element.next(".icon, .trigger")),this.trigger.popover({content:t,trigger:"immediate",placement:"bottom",placementOpts:{parent:_,parentXAlignment:G,strategies:["flip","nudge","shrink"]},tooltipElement:"#timepicker-popup"}).on("show.timepicker",function(fe,he){e.afterShow(he)}).on("hide.timepicker",function(){e.settings.returnFocus&&e.element.focus()})}this.trigger.data("popover")&&(e.popup=this.trigger.data("popover").tooltip,e.popup.addClass("timepicker-popup"))},afterShow:function(e){var t=this;e.find("button").button();var i=this.hourSelect.data("dropdown");this.hourSelect.val(this.initValues.hours),i.pseudoElem.find("span").text(this.initValues.hours),i.renderPseudoElemLabel(),H.addAttributes(i.wrapper.find(".dropdown"),this,this.settings.attributes,"hours");var n=this.minuteSelect.data("dropdown");if(this.minuteSelect.val(this.initValues.minutes),n.pseudoElem.find("span").text(this.initValues.minutes),n.renderPseudoElemLabel(),H.addAttributes(n.wrapper.find(".dropdown"),this,this.settings.attributes,"minutes"),this.secondSelect){var a=this.secondSelect.data("dropdown");this.secondSelect.val(this.initValues.seconds),a.pseudoElem.find("span").text(this.initValues.seconds),a.renderPseudoElemLabel(),H.addAttributes(a.wrapper.find(".dropdown"),this,this.settings.attributes,"seconds")}if(t.hasDayPeriods()){var o=this.periodSelect.data("dropdown");this.periodSelect.val(this.initValues.period),o.pseudoElem.find("span").text(this.initValues.period),o.renderPseudoElemLabel(),H.addAttributes(o.wrapper.find(".dropdown"),this,this.settings.attributes,"period")}e.find("div.dropdown").first().focus(),e.find(".set-time").off("click.timepicker").on("click.timepicker",function(l){l.preventDefault(),t.setTimeOnField(),t.closeTimePopup()}),H.addAttributes(e.find(".set-time"),this,this.settings.attributes,"btn"),this.settings.parentElement||e.on("keydown.timepicker","button, div.dropdown",function(l){return 9!==(l.keyCode||l.charCode||0)||(t.containFocus(l),l.stopPropagation(),l.preventDefault(),!1)})},containFocus:function(e){var t=e.shiftKey,i=this.popup.find(":focusable"),n=i.index($(":focus"));i.eq(n=t?n-1<0?i.length:n-1:n+1>=i.length?0:n+1).focus()},setupStandardEvents:function(){var e=this;e.popup.on("touchend.timepicker touchcancel.timepicker",".set-time",function(t){t.preventDefault(),t.target.click()}).on("keydown.timepicker","input.dropdown",function(t){var i=!1;if(27===t.which&&(i=!0,e.closeTimePopup(),e.element.focus()),32===t.which&&(i=!0,e.popup.find(".set-time").click()),37===t.which||39===t.which){i=!0;var n=e.popup.find('input[id$="-shdo"]');if(37===t.which){var a=n.eq(n.index(this)-1);(!a||0===a.length)&&(a=n.eq(n.length)),a.focus()}if(39===t.which){var o=n.eq(n.index(this)+1);(!o||0===o.length)&&(o=n.eq(0)),o.focus()}}return!i||(t.preventDefault(),t.stopPropagation(),!1)}),e.trigger.on("hide.timepicker",function(){e.onPopupHide()})},buildRangePopup:function(){},setupRangeEvents:function(){},getTimeFromField:function(e){var a,o,t=this,i=e||this.element.val(),n=this.getTimeSeparator(),l={},d=this.settings.timeFormat,h=!!this.dayPeriods.filter(function(L){return L.indexOf(".")>-1}).length&&i.indexOf(".")>-1&&d.indexOf("a")>-1&&d.indexOf("ah")<0&&!this.is24HourFormat();(i=i.replace(h?/[T\s:-]/g:/[T\s:.-]/g,n).replace(/z/i,"")).indexOf(n)<0&&4===i.length&&"HHmm"===t.settings.timeFormat&&(i="".concat(i.substr(0,2)).concat(n).concat(i.substr(2))),a=(i=i.replace("\u5348","\u5348".concat(n))).split(n);var p="ah"!==d.replace(" ","").slice(0,2)&&!$(".datepicker").length>0,v=this.currentCalendar.timeFormat.toLowerCase().indexOf("a"),b=-1!==v&&v<this.currentCalendar.timeFormat.toLowerCase().indexOf("h");!this.is24HourFormat()&&b&&!p&&(a=[a[1],a[2],a[0]]);var w=this.currentCalendar.dayPeriods;function k(L){return L.replace(/^\s+|\s+$/g,"")}function A(L){return!L||isNaN(L)?"00":L=(L=parseInt(L,10))<10?"0".concat(L):L}return a[2]&&(w[0].indexOf(".")>-1||w[1].indexOf(".")>-1)&&(w[0].replace(".","")===a[2]&&(a[2]=w[0]),w[1].replace(".","")===a[2]&&(a[2]=w[1])),!this.is24HourFormat()&&!b&&(o=a[a.length-1].split(" "),a.pop(),a=a.concat(o)),(!a[0]||!a[0].length||isNaN(a[0]))&&(a[0]="1"),a[0]=parseInt(a[0],10),isNaN(a[0])||(a[0]="".concat(parseInt(a[0],10))),l.hours=t.hourText(a[0]),a[1]?(a[1]=k(a[1]),a[1]=A(a[1]),l.minutes=a[1]):l.minutes="00",function M(L){L?(L=k(L),t.hasSeconds()?(L=A(L),l.seconds=L):(function T(L){return t.dayPeriods.indexOf(L)>-1}(L)||(L=t.translateDayPeriod("AM")),l.period=L)):(t.hasSeconds()&&(l.seconds=L="00"),t.is24HourFormat()||(L=t.translateDayPeriod("AM"),l.period=L))}(a[2]),a[3]?(a[3]=k(a[3]),l.period=a[3]):!this.is24HourFormat()&&this.hasSeconds()&&(l.period=this.translateDayPeriod("AM")),l},getTimeFromField2:function(e){function t(w){return!w||isNaN(w)?"00":w=(w=parseInt(w,10))<10?"0".concat(w):w}var n=this.hasSeconds()?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour,a=this.hasSeconds()?"timestamp":"hour",o=B.parseDate(e||this.element.val(),{date:a}),d=(o?o.getHours():"1").toString(),h=this.translateDayPeriod(d>=12?"PM":"AM").toString();!this.is24HourFormat()&&d>12&&(d=(parseInt(d,10)-12).toString()),!this.is24HourFormat()&&"0"===d&&(d="12");var p=n.indexOf("a")>-1?h:void 0,v=o?o.getMinutes():"00",b=o?o.getSeconds():"00";return{hours:t(d),minutes:t(v),seconds:t(b),period:p}},translateDayPeriod:function(e){return/am|pm|AM|PM/i.test(e)?(this.currentCalendar.dayPeriods||["AM","PM"])[/AM|am/i.test(e)?0:1]:e},setTimeOnField:function(){var e,t,i,n,a,o=this.settings.timeFormat,l=this.hourSelect?null===(e=this.hourSelect[0])||void 0===e?void 0:e?.value:"",d=this.minuteSelect?null===(t=this.minuteSelect[0])||void 0===t?void 0:t?.value:"",h=this.secondSelect?null===(i=this.secondSelect[0])||void 0===i?void 0:i?.value:"",p=this.periodSelect?null===(n=this.periodSelect[0])||void 0===n?void 0:n?.value:"",v=null==B||null===(a=B?.calendar().dayPeriods)||void 0===a?void 0:a?.indexOf(p),b=new Date;b.setHours(Zt.hoursTo24(parseInt(l,10),v),d,h);var w=B.formatDate(b,{date:"hour",pattern:o});this.element.val(w).trigger("change"),this.element.focus()},isOpen:function(){return!(!this.popup||!this.popup.is(":visible"))},openTimePopup:function(){var e=this,t=this;t.setup(),!this.element.is(":disabled")&&!this.element.attr("readonly")&&(this.popup&&!this.popup.hasClass("is-hidden")&&t.closeTimePopup(),this.element.addClass("is-active is-open"),"range"===t.settings.mode?(t.buildRangePopup(),t.setupRangeEvents()):(t.buildStandardPopup(),t.setupStandardEvents()),this.trigger.data("popover")&&this.element.attr("aria-expanded","true"),this.popup.find("div.dropdown").first().focus(),setTimeout(function(){$("select.period.dropdown").on("change",function(i){var a,n=$(i.target).find(":checked").val();e.initValues=t.getTimeFromField();var o=e.is24HourFormat(),l=o?0:1,d=o?24:13,h=$("select.hours.dropdown"),p=h.siblings(".dropdown-wrapper").find(".dropdown").children("span").text();p.indexOf(B.translate("Hours"))>-1&&(p=p.split(" ")[1]),h.empty();for(var v=t.getMaxHourRange(e.initValues,e.hasDayPeriods(),n);l<d&&!(l>v);)a="",parseInt(p,10)===l&&(a=" selected"),h.append($("<option".concat(a,">").concat(t.hourText(l),"</option>"))),l++;p>v&&(p=1),$("select.hours.dropdown").siblings(".dropdown-wrapper").find(".dropdown").children("span").html(p)})},10))},closeTimePopup:function(){this.trigger.data("popover")&&(this.trigger.data("popover").hide(),this.element.attr("aria-expanded","false"))},onPopupHide:function(){if("standard"===this.settings.mode){var e=this.hourSelect,t=this.minuteSelect,i=this.secondSelect,n=this.periodSelect;e&&e.data("dropdown")&&"function"==typeof e.data("dropdown").destroy&&e.data("dropdown").destroy(),t&&t.data("dropdown")&&"function"==typeof t.data("dropdown").destroy&&t.data("dropdown").destroy(),this.hasSeconds()&&i&&i.data("dropdown")&&"function"==typeof i.data("dropdown").destroy&&i.data("dropdown").destroy(),this.hasDayPeriods()&&n&&n.data("dropdown")&&"function"==typeof n.data("dropdown").destroy&&n.data("dropdown").destroy(),this.popup.off("click.timepicker touchend.timepicker touchcancel.timepicker keydown.timepicker")}this.trigger.off("hide.timepicker show.timepicker"),this.trigger.data("popover").destroy(),this.trigger.data("popover",void 0),$("#timepicker-popup").remove(),this.element.removeClass("is-active is-open")},toggleTimePopup:function(){this.isOpen()?this.closeTimePopup():this.openTimePopup()},value:function(e){var t=this.element.val();if(!e||!1===e)return t;var n=new RegExp(this.currentCalendar.dateFormat.timeSeparator,"g"),a=(t=t.replace(n,"")).split(" ");return a[0].length<4&&(t="0".concat(a[0]).concat(a[1]?a[1]:"")),t},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this.trigger.removeAttr("disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly")},disable:function(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled"),this.trigger.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},makeTabbable:function(e){this.trigger.attr("tabIndex",e?0:-1)},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init(),this.element.data("validate")&&this.element.data("validate")instanceof Object&&this.element.data("validate").updated()},teardown:function(){this.trigger.off("keydown.timepicker"),this.element.off("focus.timepicker blur.timepicker keydown.timepicker click.timepicker"),this.popup&&this.closeTimePopup(),this.trigger.remove();var e=this.element.data("mask");return e&&"function"==typeof e.destroy&&e.destroy(),this.addedValidation&&($.removeData(this.element[0],"validate"),$.removeData(this.element[0],"validationEvents"),this.element.removeAttr("data-validate").removeData("validate validationEvents"),delete this.addedValidation),this.label.find(".audible").remove(),$("#timepicker-popup").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Md)},handleEvents:function(){var e=this;return this.trigger.off("click.timepicker").on("click.timepicker",function(){e.toggleTimePopup()}),this.label&&this.label.off("click.timepicker").on("click.timepicker",function(){e.element[0].focus()}),this.handleKeys(),this.handleBlur(),this}},$.fn.timepicker=function(s){return this.each(function(){var e=$.data(this,Md);e?e.updated(s):e=$.data(this,Md,new wl(this,s))})};var Ts=new function kc(){var s=this;this.ValidationTypes=[],this.ValidationTypes.error={type:"error",titleMessageID:"Error",pagingMessageID:"ErrorOnPage",errorsForm:!0},this.ValidationTypes.alert={type:"alert",titleMessageID:"Alert",pagingMessageID:"AlertOnPage",errorsForm:!1},this.ValidationTypes.success={type:"success",titleMessageID:"Success",pagingMessageID:"SuccessOnPage",errorsForm:!1},this.ValidationTypes.confirm=this.ValidationTypes.success,this.ValidationTypes.info={type:"info",titleMessageID:"Info",pagingMessageID:"InfoOnPage",errorsForm:!1},this.ValidationTypes.icon={type:"icon",titleMessageID:"Icon",pagingMessageID:"IconOnPage",errorsForm:!1,icon:"user-profile"},this.rules={required:{isNotEmpty:function(t,i){return!(!("placeholder"in document.createElement("input"))&&i&&(t===i.attr("placeholder")||t===B.translate("Required")))&&("string"==typeof t?(t=$.trim(t.replace(/<\/?[^>]*>/g,"")),0!==$.trim(t).length):"number"==typeof t?!isNaN(t):$.isArray(t)?t.length>0:!!t)},isRadioChecked:function(t){var i=t.attr("name");return i&&i.length&&$('input[name="'.concat(i,'"]:radio:checked')).length},check:function(t,i){return this.message=B.translate("Required"),!(!$(i).is(".datepicker")||!$("#monthview-popup").is(":visible"))||(i.is(":radio")?this.isRadioChecked(i):this.isNotEmpty(t,i))},message:"Required",type:"error",id:"required"},date:{check:function(t,i,n){if(this.message=B.translate("InvalidDate"),n&&n.column){var a=n.column.formatter(n.row,n.cell,t,n.column,!0);if(a instanceof Date)return a&&a.getTime&&!isNaN(a.getTime())}if(t instanceof Date)return t&&t.getTime&&!isNaN(t.getTime());var o=t.indexOf(":")>-1?B.calendar().dateFormat.datetime:B.calendar().dateFormat.short,l=null;if(i&&i.data("datepicker")&&((l=i.data("datepicker")).settings.showTime&&(this.message=B.translate("InvalidDateTime")),o=l.pattern),n&&n.column){var d=n.column;"string"==typeof d.sourceFormat?o=n.column.sourceFormat:"string"==typeof d.dateFormat&&(o=n.column.dateFormat)}var h=!("MMMM"===o||"MMM"===o||"MM"===o||"MMMM d"===o||"d MMMM"===o||"yyyy"===o);return l&&(o={locale:l.locale.name,pattern:o,calendarName:l.currentCalendar.name}),!(void 0===B.parseDate(t,o,h)&&""!==t)},message:"Invalid Date",type:"error",id:"date"},availableDate:{check:function(t,i,n){this.message=B.translate("UnavailableDate");var a=!0;if(""===t)return a;if(!s.rules.date.check(t,i))return a=!1,this.message="",a;var o=i.data("datepicker"),l=o?o.settings:{};if(n&&n.column){var d=n.column.formatter(n.row,n.cell,t,n.column,!0);d instanceof Date&&(t=d),n.column.editorOptions&&(l=n.column.editorOptions)}if(!l||!l.disable)return!0;var v,b,w,T,h=Object.keys(l.disable).length>0,k=t;if("string"==typeof k){var A="locale"!==l.dateFormat?l.dateFormat:B.calendar().dateFormat.short;if(l.showTime){var M=l.timeFormat||B.calendar().timeFormat;A.indexOf(M)<0&&(A+=" ".concat(M))}if(o&&o.isIslamic&&(A={pattern:o.pattern,locale:o.locale.name}),n&&n.column){var L=n.column;L.sourceFormat?A="string"==typeof L.sourceFormat?{pattern:L.sourceFormat}:L.sourceFormat:L.dateFormat&&(A="string"==typeof L.dateFormat?{pattern:L.dateFormat}:L.dateFormat)}k=B.parseDate(k,A)}o&&o.isIslamic&&k instanceof Date&&(k=B.umalquraToGregorian(k.getFullYear(),k.getMonth(),k.getDate()));var z=l.useUTC?B.dateToUTC(k):k;if(z&&h&&"function"==typeof l.disable.callback)return!l.disable.callback(z.getFullYear(),z.getMonth(),z.getDate());if(z instanceof Array)return a;if(z&&h){w=l.useUTC?B.dateToUTC(new Date(l.disable.minDate)).setHours(0,0,0,0):new Date(l.disable.minDate).setHours(0,0,0,0),T=l.useUTC?B.dateToUTC(new Date(l.disable.maxDate)).setHours(0,0,0,0):new Date(l.disable.maxDate).setHours(0,0,0,0),l.disable.dayOfWeek&&-1!==l.disable.dayOfWeek.indexOf(z.getDay())&&(a=!1);var q=z.getFullYear();if(((z=z.setHours(0,0,0,0))<=w||z>=T)&&(a=!1),/string|number/.test(rt(l.disable.years))&&(l.disable.years=[l.disable.years]),l.disable.years)for(var O=0,_=l.disable.years.length;O<_;O++)if(q===Number(l.disable.years[O])){a=!1;break}if(l.disable.dates)for(l.disable.dates.length&&"string"==typeof l.disable.dates&&(l.disable.dates=[l.disable.dates]),v=0,b=l.disable.dates.length;v<b;v++)if(z===(l.useUTC?B.dateToUTC(l.disable.dates[v]):new Date(l.disable.dates[v])).setHours(0,0,0,0)){a=!1;break}}return h&&(a=!!(a&&!l.disable.isEnable||!a&&l.disable.isEnable)),a},message:"Unavailable Date",type:"error",id:"availableDate"},rangeDate:{check:function(t,i){var n=this;this.message=B.translate("rangeDate");var a=!0,o=i.data("datepicker");if(o){var d=t.split(o.settings.range.separator),h=function(b,w){i.val(w),n.message="".concat(s.rules[b].message," (").concat(w,")"),s.rules[b].check(w,i)||(a=!1)};if(t.indexOf(o.pattern)>-1){if(1===d.length)h("date",d[0]);else if(2===d.length){var p=d[0]===o.pattern?1:0;h("date",d[p]),a&&h("availableDate",d[p])}}else 1===d.length?(h("date",d[0]),a&&h("availableDate",d[0])):2===d.length&&(h("date",d[0]),a&&h("date",d[1]),a&&h("availableDate",d[0]),a&&h("availableDate",d[1]))}return i.val(t),a},message:"Range Dates",type:"error",id:"rangeDate"},email:{check:function(t){return this.message=B.translate("EmailValidation"),!t.length||/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,16}(?:\.[a-z]{2})?)$/i.test(t)},message:"EmailValidation",type:"error",id:"email"},enableSubmit:{check:function(t,i){var n=i.closest(".signin").find('button[type="submit"]');return t.length&&(s.rules.email.check(t)||s.rules.passwordConfirm.check(t,i))?n.enable():n.disable(),!0},message:"",type:"error",id:"enableSubmit"},emailPositive:{check:function(t,i){if($.trim(t).length&&!i.is("[readonly]")){s.rules.emailPositive.positive=!0,this.message=B.translate("EmailValidation");var n=s.rules.email.check(t,i);return n&&(this.message=""),n}return s.rules.emailPositive.positive=!1,!0},message:"EmailValidation",type:"error",id:"emailPositive"},passwordReq:{check:function(t){return this.message=B.translate("PasswordValidation"),!t.length||t.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{10,}$/)},message:"PasswordValidation",type:"error",id:"passwordReq"},passwordConfirm:{check:function(t,i){this.message=B.translate("PasswordConfirmValidation");var n=$('input[type="password"]:not('.concat(i.attr("id"),")"),i.closest(".signin")).eq(0).val(),a=t===n&&s.rules.passwordReq.check(n);return!t.length||a},message:"PasswordConfirmValidation",type:"error",id:"passwordConfirm"},time:{check:function(t,i){if(!t)return!0;this.message=B.translate("InvalidTime");var a=i&&i.data("timepicker")?i.data("timepicker").settings:{},o=a&&a.timeFormat?a.timeFormat:B.calendar().timeFormat;if(i.attr("data-options")&&a&&!a.timeFormat){var l=JSON.parse(i.attr("data-options"));l.patternOptions&&l.patternOptions.format&&(o=l.patternOptions.format)}var d=B.parseDate(t,{dateFormat:o,strictTime:!0});return d instanceof Date&&!Number.isNaN(d)&&"Invalid Date"!==d.toString()},message:"Invalid Time",type:"error",id:"time"},test:{check:function(t){return"1"===t},message:"Value is not valid (test).",type:"error",id:"test"}}},Id="toast",Xu={title:"(Title)",message:"(Content)",position:"top right",audibleOnly:!1,progressBar:!0,timeout:6e3,allowLink:!1,draggable:!1,savePosition:!1,uniqueId:null};function Qu(s,e){this.element=$(s),this.settings=H.mergeSettings(s,e,Xu),this.init()}Qu.prototype={init:function(){this.show()},show:function(){var e=this,t=this.settings,i=parseFloat(_n.convertDelayToFPS(t.timeout)),n=t.allowLink?Fe.stripTags(t.message,"<a><br><p>"):Fe.stripHTML(t.message),a=!1,o=100;this.uniqueId=t.uniqueid?this.generateUniqueId("usersettings-position"):"";var l=$("#toast-container".concat(this.uniqueId)),d=$('\n      <div class="toast">\n        <span aria-relevant="additions text" aria-live="polite">\n          <span class="toast-title">'.concat(Fe.stripHTML(t.title),'</span>\n          <span class="toast-message">').concat(n,"</span>\n        </span>\n      </div>")),h=$('\n      <button type="button" class="btn-icon btn-close" title="'.concat(B.translate("Close"),'" aria-hidden="true">\n        ').concat($.createIcon("close"),'\n        <span class="audible">').concat(B.translate("Close"),"</span>\n      </button>\n    ")),p=$('<div class="toast-progress"></div>');l.length||(l=$('<div id="toast-container'.concat(this.uniqueId,'" class="toast-container"></div>')).appendTo("body")),l.removeClass("toast-top-left toast-top-right toast-bottom-right toast-bottom-left").addClass("toast-".concat(t.position.replace(" ","-"))),t.timeout=t.audibleOnly?100:t.timeout,t.progressBar&&d.append(p),l.append(d),d.addClass(t.audibleOnly?"audible":"effect-scale"),d.append(h),e.createDraggable(d,l);var v=l.children().length;this.toastIndex=v;for(var w=0,T=this.element.find(".toast-container").children();w<T.length;w++)v=T.length;H.addAttributes(d,this,this.settings.attributes),H.addAttributes(d.find("button"),this,this.settings.attributes,"btn-close");var k=new Li({duration:_n.convertDelayToFPS(t.timeout),timeoutCallback:function(){e.remove(d,v)},updateCallback:function(L){o=(L.duration-L.elapsedTime)/i*100,B.isRTL()&&(o=100-o),t.progressBar&&(p[0].style.width="".concat(o,"%"))}});function A(M){k.destroy(!0),e.remove(M,v)}_i.register(k),$(document).on("keydown.toast-".concat(v," keyup.toast-").concat(v),function(M){var L=(M=M||window.event).which||M.keyCode;M.ctrlKey&&80===L&&k[(a="keydown"===M.type)?"pause":"resume"](),"keydown"===M.type&&27===L&&(M.stopImmediatePropagation(),M.preventDefault(),A(d))}),d.on("mousedown.toast touchstart.toast mouseup.toast touchend.toast",function(M){a=!!/mousedown|touchstart/i.test(M.type),k[a?"pause":"resume"]()}),h.on("click.toast",function(){A(d)})},createDraggable:function(e,t){var i=this;if(this.settings.draggable&&e[0]&&t[0]){var n=xe.features.touch,a=t.parent();t.css({top:"",left:"",right:""});var o=t[0].getBoundingClientRect(),l=this.restorePosition(),d=o;l&&((d={top:l.top,left:l.left,width:e.outerWidth(),height:e.outerHeight()}).right=d.left+d.width,d.bottom=d.top+d.height,this.isPosInViewport(d)||(d=o));var h={top:"".concat(d.top,"px"),left:"".concat(d.left,"px")};t.is(".toast-bottom-right, .toast-top-right")&&(h.right="auto"),t.css(h),t.addClass("is-draggable"),e.off("mousedown.toast touchstart.toast").on("mousedown.toast touchstart.toast",function(T){n||T.preventDefault(),!$(T.target).is("a, .btn-close")&&t.drag({containment:"document"}).off("dragstart.toast").on("dragstart.toast",function(){T.stopImmediatePropagation(),t.attr("aria-grabbed","true"),a.attr("aria-dropeffect","move")}).off("dragend.toast").on("dragend.toast",function(){t.removeAttr("aria-grabbed"),a.removeAttr("aria-dropeffect"),i.savePosition({left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))});var k=t.data("drag");k&&"function"==typeof k.destroy&&k.destroy()})});var v=function(k){var z=k.dragApi.getElementsFromPoint(k.x,k.y)[0];return!$(z).closest(".toast").length},b=function(k){var M=$.Event("keyup");$.extend(M,{ctrlKey:!0,altKey:!0,keyCode:80}),k.trigger(M)},w=$(document);w.off("mouseup.toast").on("mouseup.toast",function(T){if(1===$("#toast-container".concat(i.uniqueId," .toast")).length){var k=t.data("drag");k&&"function"==typeof k.getElementsFromPoint&&v({dragApi:k,x:T.pageX,y:T.pageY})&&b(w)}}).off("touchend.toast").on("touchend.toast",function(T){if(1===$("#toast-container".concat(i.uniqueId," .toast")).length){var k=t.data("drag");if(k&&"function"==typeof k.getElementsFromPoint){var A=T.originalEvent;if(A.targetTouches.length>1)return;var M=A.changedTouches[0];v({dragApi:k,x:M.pageX,y:M.pageY})&&b(w)}}})}},savePosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.settings.savePosition||!this.canUseLocalStorage()||$.isEmptyObject(e)||(localStorage[this.uniqueId]=JSON.stringify(e),this.element.triggerHandler("settingschanged",[e]))},restorePosition:function(){if(!this.settings.savePosition||!this.canUseLocalStorage())return null;var e=localStorage[this.uniqueId];return e?JSON.parse(e):null},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch{return!1}return!1},generateUniqueId:function(e){return e=e??"","toast-".concat(this.settings.uniqueid||"","-").concat(e).replace(/--/g,"-").replace(/-$/g,"")},isPosInViewport:function(e){return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},unbind:function(e,t){return e.closest(".toast-container").off("dragstart.toast dragend.toast"),e.off("mousedown.toast mouseup.toast touchstart.toast touchend.toast"),e.find(".btn-close").off("click.toast"),void 0!==t&&$(document).off(["keydown.toast-".concat(t),"keyup.toast-".concat(t)].join(" ")),this},remove:function(e,t){var i=this,n=function(){e.remove(),!$("#toast-container".concat(i.uniqueId," .toast")).length&&i.destroy()};if(this.unbind(e,t),this.settings.audibleOnly)n();else{e.attr("aria-live","").attr("aria-relevent","").hide(),e.addClass("effect-scale-hide");var a=new Li({duration:20,updateCallback:function(){},timeoutCallback:function(){n()}});_i.register(a)}},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,Xu)),this.show()},destroy:function(){var e=this,t=$("#toast-container".concat(this.uniqueId));t[0]&&[].slice.call(t[0].querySelectorAll(".toast")).forEach(function(n){e.settings.audibleOnly=!0,e.remove($(n))}),$(document).off(["mouseup.toast","touchend.toast"].join(" ")),t.remove(),delete this.toastIndex,delete this.uniqueId,$.removeData(this.element[0],Id)}},$.fn.toast=function(s){return this.each(function(){var e=$.data(this,Id);e?e.updated(s):e=$.data(this,Id,new Qu(this,s))})};var va="Validator",Mo={inline:!0,message:"",type:"error",showTooltip:!1,isHelpMessage:!1,truncated:!1};function Io(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Mo),this.init()}Io.prototype={init:function(){this.fields="input[data-validate], input[data-validation], textarea[data-validate], textarea[data-validation], select[data-validate], select[data-validation], div[data-validate], div[data-validation]",this.isPlaceholderSupport="placeholder"in document.createElement("input"),this.inputs=this.element.find(this.fields),this.element.is(this.fields)&&(this.inputs=$().add(this.element)),this.timeout=null,this.attachEvents()},extractEvents:function(e){if(e.indexOf("{")>-1&&(e=JSON.parse(e.replace(/'/g,'"'))),"object"===rt(e)){var t="";for(var i in e)-1===t.indexOf(e[i])&&(t+="".concat(e[i]," "));e=t=t.split(" ").join(".validate ")}return e},filterValidations:function(e,t){var i=[];if(!e)return[];if(e.indexOf("{")>-1&&(e=JSON.parse(e.replace(/'/g,'"'))),"object"===rt(e))for(var n in e)t&&e[n].indexOf(t)>-1&&i.push(n);return i},setErrorIconOpacity:function(e){if(e.is(":text")&&e.is('[data-error-type="tooltip"]')){var t=this.calculateTextWidth(e.val()),i=e.outerWidth()-35;e.closest(".field, .field-short").find(".icon-error")[t>i?"addClass":"removeClass"]("lower-opacity")}},calculateTextWidth:function(e,t){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var i=this.canvas.getContext("2d");return i.font=t||"14px arial",i.measureText(e).width},attachEvents:function(){var e=this,t="[data-validate],[data-validation]";this.inputs.each(function(){var a=$(this),o=a.attr("data-validate")||a.attr("data-validation");o&&o.indexOf("required")>-1&&a.addClass("required")}),this.inputs.filter("input, textarea, div").filter(t).not("input[type=file]").each(function(){var a=$(this),o=a.attr("data-validation-events"),l=e.extractEvents(o||"blur.validate change.validate keyup.validate");l.indexOf("enter.validate")>-1&&a.off("keypress.enter.validate").on("keypress.enter.validate",function(d){var h=$(this);13===d.which&&e.validate(h,!0,d)}),a.off(l).on(l,function(d){if("keyup"===d.type){if(9===d.keyCode)return;e.setErrorIconOpacity(a)}var h=$(this),p=h.data("handleEvent".concat([d.type||""]));h.is("[readonly]")&&!h.parent().is(".field-fileupload")&&!h.is(".lookup.is-not-editable")||p&&p.type===d.type&&"validate"===d.handleObj.namespace&&!h.is(".lookup")&&!h.closest(".modal:visible").length||(h.data("handleEvent".concat([d.type||""]),d.handleObj),setTimeout(function(){h.closest(".modal-engaged").length&&!h.closest(".modal-body").length||e.validate(a,!0,d)},300))})}),this.inputs.filter("input[type=checkbox]").filter(t).off("click.validate").on("click.validate",function(a){e.validate($(this),!0,a)}),this.inputs.filter(":radio").off("click.validate").on("click.validate",function(a){var o=$(this).parent().find(".radio").first();e.validate(o,!0,a)});var i=this.inputs.filter("select").filter(t);i.length&&(i.off("change.validate listopened.validate listclosed.validate").on("change.validate",function(a){e.validate($(this),!0,a)}).on("listopened.validate",function(){var a=$(this),o=a.data("tooltip");o&&document.activeElement===a.data("dropdown").searchInput[0]&&o.hide(),$("#validation-tooltip").hide()}).on("listclosed.validate",function(){var a=$(this),o=a.data("tooltip"),l=a.data("dropdown");xe.features.touch&&(l.pseudoElem.focus(),setTimeout(function(){l.pseudoElem.blur()},100)),l&&l.wrapper&&(o=l.wrapper.find(".icon-error").data("tooltip")),o&&document.activeElement!==a.data("dropdown").searchInput[0]&&o.show()}),i.filter(function(){return void 0!==$(this).data("dropdown")}).each(function(){$(this).data("dropdown").pseudoElem.off("blur.validate").on("blur.validate",function(o){var l=$(this).closest(".field, .field-short").find("select");e.validate(l,!0,o)})})),this.element.is("form")&&this.element.attr("data-validate-on")&&this.element.off("submit.validate").on("submit.validate",function a(o){o.stopPropagation(),o.preventDefault(),e.validateForm(function(l){e.element.off("submit.validate"),e.element.triggerHandler("validated",l),e.element.data("isValid",l),e.element.on("submit.validate",a)})})},validateForm:function(e){var t,i=this,n=[];i.inputs=this.element.find(i.fields),i.inputs.each(function(a){var o=$(this);if(o.attr("data-validate")){if("true"===o.attr("data-disable-validation")||o.hasClass("disable-validation"))return;for(var l=i.validate(o,!1,a),d=0;d<l.length;d++)n.push(l[d])}}),(t=$).when.apply(t,n).then(function(){e(!0)},function(){e(!1)})},setPrimaryBtn:function(e,t){var i=e.find("[data-validate]:visible, select[data-validate], :checkbox[data-validate]"),n=!0;i.length>0&&i.each(function(){var a=$(this);if(!(a.closest(".datagrid-filter-wrapper").length>0)){var o=null!==a[0].offsetParent;a.is(".required")&&(o&&a.is(".editor")&&!a.html()&&(n=!1),(o||a.is("select, :checkbox"))&&!a.val()&&!a.is(".editor")&&(n=!1)),(o||a.is("select, :checkbox"))&&!a.isValid()&&(n=!1)}}),n?t.removeAttr("disabled"):t.attr("disabled","disabled")},value:function(e){return e.is("input[type=checkbox]")?e.prop("checked"):e.is("div")?e[0].innerHTML:e.val()},getTypes:function(e,t){var n,i=this.filterValidations(e.attr("data-validation-events"),t.type);return n=e.is("input.dropdown")&&e.prev().prev("select").attr("data-validate")?e.prev().prev("select").attr("data-validate").split(" "):e.is("input.dropdown")&&e.prev().prev("select").attr("data-validation")?e.prev().prev("select").attr("data-validation").split(" "):e.attr("data-validation")?e.attr("data-validation").split(" "):e.attr("data-validate")?e.attr("data-validate").split(" "):[],i.length>0&&(n=n.filter(function(a){return-1!==i.indexOf(a)})),"keyup"===t.type&&(n=n.filter(function(a){return"date"!==a&&"time"!==a})),n},setIconOnParent:function(e,t){var d,h,p,i=$.createIcon({classes:["icon-".concat(t)],icon:"".concat(t)}),n=e.closest(".tab-panel, .expandable-pane"),a=e.closest(".row.flex-align-bottom"),o=n.attr("id"),l=e.closest(".tab-container, .tab-panel-container, .expandable-area");if(a&&a.length&&($(".".concat(t),a).length?a.addClass("has-messages"):a.removeClass("has-messages")),l.is(".tab-panel-container")&&(l=l.prev(".tab-container")),l.is(".tab-container")){var v=l.data("tabs");if("error"===t&&!1===v.settings.validate)return;(d=$('.tab-list a[href="#'.concat(o,'"]'),l).closest(".tab")).length?$(".count",d).length&&(d=$(".count",d)):(o=$('a[href="#'.concat(o,'"]'),".popupmenu").closest(".popupmenu").attr("id"),d=$('.tab-list .tab[aria-controls="'.concat(o,'"]'),l),h=o)}else{if(!l.is(".expandable-area"))return;d=$('.expandable-header[aria-controls="'.concat(o,'"] .title'),l)}h&&h.length&&(p=n.add($($(h).attr("href"))),$('a[role="menuitem"]',"#".concat(h)).each(function(){p=p.add($($(this).attr("href")))}));var b=$('a[href="#'.concat(n.attr("id"),'"]'),"#".concat(o));n&&$(".".concat(t),n).length||p&&$(".".concat(t),p).length?($(".".concat(t),n).length||(b.removeClass("is-".concat(t)),$(".icon-".concat(t),b).remove()),$(".".concat(t),n).length&&$(".".concat(t),p).length&&!$(".icon-".concat(t),b).length&&b.addClass("is-".concat(t)).append(i),!$(".icon-".concat(t),d).length&&!l.hasClass("module-tabs")&&d.addClass("is-".concat(t)).append(i)):((d=d.add(b)).removeClass("is-".concat(t)),$(".icon-".concat(t),d).remove())},validate:function(e,t,i){if(e.data("handleEvent".concat([i.type||""]),null),"true"===e.attr("data-disable-validation")||e.hasClass("disable-validation")||e.is(":disabled"))return[];var o,l,p,v,b,n=this,a=n.getTypes(e,i)||[],d=[],h=[],w=n.value(e),T=e.attr("placeholder");function k(A,M,L,z){!1===(o=Ts.rules[L]).positive&&n.removePositive(e);var q="tooltip"!==e.attr("data-".concat((b=Ts.ValidationTypes[o.type]||Ts.ValidationTypes.error).type,"-type"));if(A)0===$.grep(h,function(X){return X===b.type}).length?(z.resolve(),o.positive&&(n.addMessage(e,o,q,M),n.removeMessage(e,o,!0),z.resolve(),n.addPositive(e))):b.errorsForm||z.resolve();else{if(!n.isPlaceholderSupport&&w===T&&o.message!==B.translate("Required"))return;n.addMessage(e,o,q,M),h.push(o.type),b.errorsForm?z.reject():z.resolve()}n.setIconOnParent(e,o.type);var _=n.getField(e).data("".concat(b.type,"message"));A&&_&&_.filter(function(X){return X.id===o.id||o.message}).length>0&&n.removeMessage(e,o,!0);var G=e.closest(".modal").find(".btn-modal-primary").not(".no-validation");G.length&&n.setPrimaryBtn(e.closest(".modal"),G);var j=e.closest("#calendar-popup").find(".btn-modal-primary").not(".no-validation");j.length&&n.setPrimaryBtn(e.closest("#calendar-popup"),j),"error"===o.type&&e.closest("form").triggerHandler("aftervalidate",{field:e,rule:o,isValid:A})}for(p=0,v=a.length;p<v;p++)o=Ts.rules[a[p]],l=$.Deferred(),o&&(o.async?o.check(w,e,k,l):k(o.check(w,e),t,a[p],l),d.push(l));return d},getField:function(e){return e.is("select")&&void 0!==e.data("dropdown")&&(e=e.data("dropdown").pseudoElem),e},hasError:function(e){return this.getField(e).hasClass("error")},addMessage:function(e,t,i,n,a){if(!(""===t.message||e.is(".dropdown, .multiselect")&&$("#dropdown-list").is(":visible"))){a=a||!1;var o=this.getField(e),l=o.data("".concat(t.type,"message")),d=Ts.ValidationTypes[t.type]||Ts.ValidationTypes.error;if(a||o.addClass("icon"===t.type?"custom-icon":t.type),!(l&&l===t.message||l&&l.filter(function(v){return(v.id||v.message)===(t.id||t.message)&&v.message===t.message}).length>0)){var h=t.message;if(l){for(var p=0;p<l.length;p++)h="\u2022 ".concat(l[p].message);h+="<br>\u2022 ".concat(t.message)}if(l||(l=[]),e.closest(".field, .field-short").find('[data-rule-id="'.concat(t.id||t.message,'"]')).remove(),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&e.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(t.id||t.message,'"]')).off("click.validate").remove(),(l=l.filter(function(v){return v.id!==t.id})).push({id:t.id,message:t.message,type:t.type}),o.data("".concat(d.type,"message"),l),void 0!==$.fn.toast&&$("body").toast({title:B.translate(d.titleMessageID),audibleOnly:!0,message:h}),!i)return void this.showTooltipMessage(e,h,d.type,n);e.data("isValid",!1),i&&this.showInlineMessage(e,t,a)}}},showIcon:function(e,t){var i=this.getField(e).addClass("icon"===t?"custom-icon":t),n=$.createIconElement({classes:["icon-".concat(t)],icon:t}),a=i.closest(".field, .field-short"),o=e.parent();return 0===a.find("svg.icon-".concat(t)).length?(o.is(".editor-container")&&e.parent().addClass("is-error"),1===e.parent(":not(.editor-container)").find(".btn-actions").length?o.find(".btn-actions").before(n):1===o.find(".data-description").length?o.find(".data-description").before(n):1===o.find(".field-info").length?o.find(".field-info").before(n):e.is("textarea")?e.after(n):e.is(".dropdown, .multiselect")?o.find(".dropdown-wrapper").append(n):(e.is(".spinbox")||e.is(".lookup"),o.append(n)),$(".icon-success",a).remove()):n=a.find("svg.icon-error"),n},showTooltipMessage:function(e,t,i,n){if(!e.is(":radio")){var a=e.is("button")?e:this.showIcon(e,i),o=a.data("tooltip"),l=e;if(e.is(".dropdown, .multiselect")&&void 0!==e.data("dropdown")){var d=e.data("dropdown").pseudoElem;l=d,d.addClass("icon"===i?"custom-icon":i)}e.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===i?"custom-icon":i),o?o.content=t:(a.tooltip({content:t,placement:"bottom",placementOpts:{callback:function h(p){var v=l[0].getBoundingClientRect(),b=o.tooltip[0].getBoundingClientRect(),k=0;return $("html").is('[dir="rtl"]')?b.left<v.left&&(k+=v.left-b.left):b.right>v.right&&(k+=-1*(b.right-v.right)),p.setCoordinate("x",p.x+k),p.nudges||(p.nudges={}),p.nudges.x=k,p}},trigger:"focus",isError:!0,tooltipElement:"#validation-tooltip"}),o=a.data("tooltip")),e.on("focus.validate",function(){o&&o.show()}).on("blur.validate",function(){o&&o.hide()}),o&&e.attr("data-error-type","tooltip"),this.setErrorIconOpacity(e),n&&o&&o.show()}},toggleRadioMessage:function(e,t,i,n,a){var o,l,d=e.attr("name");d&&d.length&&(o=$(':radio[name="'.concat(d,'"], :radio[name="').concat(d,'"] + label')),l=e.parent().is(".inline")?$(':radio[name="'.concat(d,'"]:last')).parent():$(':radio[name="'.concat(d,'"]:last + label')),a?(o.addClass("icon"===i?"custom-icon":i),$(n).addClass("radio-group-".concat(i)).insertAfter(l)):(o.removeClass(i),l.next(".radio-group-".concat(i)).remove()))},showInlineMessage:function(e,t,i){var n,a,o,l;i=i||!1;var d=this.getField(e),h=Ts.ValidationTypes[t.type]||Ts.ValidationTypes.error;t.icon=t.icon||h.icon;var p,v,b="".concat(e.attr("id")||"id","-").concat(t.type);v="".concat(h.type),p="icon"===t.type?""+'<div id="'.concat(b,'" class="custom-icon-message').concat(this.settings.truncated||null!=t&&t?.truncated?" truncated":"",'" data-rule-id="').concat(t.id||t.message,'">\n          ').concat($.createIcon({classes:["icon-custom"],icon:t.icon}),'\n          <pre class="audible">\n            ').concat(B.translate(h.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(t.message,"</p>\n        </div>"):""+'<div id="'.concat(b,'" class="').concat(h.type,"-message").concat(this.settings.truncated||null!=t&&t?.truncated?" truncated":"",'" data-rule-id="').concat(t.id||t.message,'">\n          ').concat($.createIcon({classes:["icon-".concat(h.type)],icon:v}),'\n          <pre class="audible">\n            ').concat(B.translate(h.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(t.message,"</p>\n        </div>"),e.is(":radio")?this.toggleRadioMessage(e,t.message,h.type,p,!0):(d.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===h.type?"custom-icon":h.type),d.closest(".field, .field-short").append(p),d.closest(".field, .field-short").find(".colorpicker-container").addClass("icon"===h.type?"custom-icon":h.type)),i||d.addClass("icon"===t.type?"custom-icon":t.type),e.is(".spinbox")&&d.closest(".spinbox-wrapper").addClass("icon"===h.type?"custom-icon":h.type),"error"===h.type&&e.parent().find(".icon-success").remove(),e.attr("aria-describedby",b),e.attr("aria-invalid","true");var w=e.parent().find(".dropdown.error"),T=w.attr("aria-label"),k="".concat(T).concat(t.message);w&&w.attr("aria-label",k),e.triggerHandler(h.type,{field:e,message:t.message}),e.closest("form").triggerHandler(h.type,{field:e,message:t.message});var A=$("html.is-safari").length>0,M=e.find('~ div[class*="-message"].truncated > .message-text'),L=(null===(n=M[0])||void 0===n?void 0:n?.scrollWidth)>(null===(a=M[0])||void 0===a?void 0:a?.offsetWidth),z=(null===(o=M[0])||void 0===o?void 0:o?.scrollWidth)>(null===(l=e[0])||void 0===l?void 0:l?.clientWidth)&&A;((this.settings.truncated||null!=t&&t?.truncated)&&L||z)&&(M.tooltip({content:M[0].innerText,trigger:"hover"}),A&&function q(O){var _=O.textContent;z&&(_=_.slice(0,-1),O.textContent="".concat(_,"..."))}(M[0]))},addPositive:function(e){var t=$.createIcon({icon:"success",classes:"icon-success"});$(".icon-success",e.parent(".field, .field-short")).length||e.parent(".field, .field-short").append(t)},removeMessage:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.getField(e),a=n.data("".concat(t.type,"message")),o=t.id||t.message;if(t&&("error"!==t.type||a)&&0!==a.filter(function(v){return v.id===o}).length){var l=a.filter(function(v){return v.id!==o}),d=0===l.length;if(d?n.removeData("".concat(t.type,"message")):n.data("".concat(t.type,"message"),l),e.closest(".field, .field-short").find('[data-rule-id="'.concat(t.id||t.message,'"]')).remove(),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&e.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(t.id||t.message,'"]')).off("click.validate").remove(),d&&"error"===t.type&&i&&(e.triggerHandler("valid",{field:e,message:""}),e.closest("form").triggerHandler("valid",{field:e,message:""})),d&&(e.removeClass("".concat(t.type," custom-icon")).data("isValid",!0),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&(e.next().next().removeClass("".concat(t.type," custom-icon")),e.next().find("div.dropdown").removeClass("".concat(t.type," custom-icon"))),e.is(":radio")&&this.toggleRadioMessage(e,"",t.type,"",!1),e.hasClass("spinbox")&&e.closest(".spinbox-wrapper").removeClass("".concat(t.type," custom-icon")),e.hasClass("colorpicker")&&e.parent(".colorpicker-container").removeClass(t.type),e.closest(".field-fileupload").length>0&&e.closest(".field-fileupload").find("input.".concat(t.type)).removeClass(t.type),e.removeAttr("aria-describedby").removeAttr("aria-invalid"),"tooltip"===e.attr("data-".concat(t.type,"-type")))){var p=e.closest(".field, .field-short").find(".icon-error").data("tooltip");p&&p.destroy(),void 0!==e&&this.hideTooltipMessage(e),this.inputs&&this.inputs.filter("input, textarea").off("focus.validate"),e.parent().find(".dropdown-wrapper > .icon-".concat(t.type)).off("click.validate").remove(),e.parent().find(".icon-".concat(t.type)).remove(),e.next(".icon-".concat(t.type)).off("click.validate").remove(),e.parent(".field, .field-short").find(".icon-".concat(t.type)).remove(),e.next(".inforCheckboxLabel").next(".icon-".concat(t.type)).remove()}}},hideTooltipMessage:function(e){var t=e.data("tooltip");t&&t.destroy(),e.off("focus.validate"),e.off("blur.validate")},removePositive:function(e){$(".icon-success",e.parent(".field, .field-short")).remove()},resetForm:function(e){var t=e.find("input, select, textarea, div.dropdown, div.editor");t.removeClass("error"),e.find(".error").removeClass("error"),e.find(".icon-error").remove(),e.find(".icon-success").remove(),e.find(".error-message").remove(),t.removeClass("alert"),e.find(".alert").removeClass("alert"),e.find(".icon-alert").remove(),e.find(".alert-message").remove(),t.removeClass("info"),e.find(".info").removeClass("info"),e.find(".icon-info").remove(),e.find(".info-message").remove(),setTimeout(function(){$("#validation-errors").addClass("is-hidden")},300),t.data("isDirty",!1).removeClass("isDirty"),e.find(".isDirty").removeClass("isDirty"),e.is("form")&&e[0].reset();var i=$.fn.validation.ValidationTypes;Object.keys(i).forEach(function(n){t.removeData("".concat(n,"message"))}),t.removeData("isValid")},isFormValid:function(e){if($(e).find(".error-message").length>0)return!1;for(var t=$(e).find('[data-validate*="required"]'),i=0;i<t.length;i++){var n=$(t[i]),a=this.value(n);if((n.is(":visible")||n.is("select"))&&!a)return!1}return!0},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.init()},destroy:function(){this.inputs=null}};var Ju="validate",Ld={type:"error",inline:!0};$.fn.validation=Ts,$.fn.getMessage=function(s){s||(s={type:"error"});var e="".concat(s.type,"message"),t=$.fn.getField($(this)).data(e),i="";if(t){if(1===t.length)return t[0].message;for(var n=0;n<t.length;n++)i+="\u2022 ".concat(t[n].message)}return i},$.fn.getMessages=function(s){s||(s={type:"error"});var e="".concat(s.type,"message"),t=$.fn.getField($(this)).data(e);return t||(t=[]),t},$.fn.getField=function(s){return s.is("select")&&void 0!==s.data("dropdown")&&(s=s.data("dropdown").pseudoElem),s},$.fn.getErrorMessage=function(s){return gi("$.fn.getMessage","$.fn.getErrorMessage"),s=H.extend({},s,Ld),$(this).getMessage(s)},$.fn.scrollIntoView=function(s,e){"boolean"!=typeof s&&(s=void 0);var i=new Io(this,e).getField($(this));i[0].scrollIntoView(s),i.focus(),i.is("input.checkbox")&&(i=i.next(".checkbox-label"))[0]&&i[0].scrollIntoView(s)},$.fn.addMessage=function(s){return this.each(function(){var e=$.data(this,va);e||(e=$.data(this,va,new Io(this,s)));var t={message:s.message,type:s.type,triggerEvents:s.triggerEvents,icon:s.icon,id:s.id||s.message},i=$(this);e.addMessage(i,t,s.inline,s.showTooltip,s.isAlert),e.setIconOnParent(i,s.type)})},$.fn.addError=function(s){gi("$.fn.addMessage","$.fn.addError");var e=!0;return"boolean"==typeof s.inline&&!1===s.inline&&(e=!1),(s=H.extend({},s,Ld)).inline=e,this.each(function(){$(this).addMessage(s)})},$.fn.removeMessage=function(s){return s||(s={type:"error"}),this.each(function(){var e=$.data(this,va);e||(e=$.data(this,va,new Io(this,s)));var t=$(this),i="".concat(s.type,"message"),n=$.fn.getField(t).data(i);if(t.hasClass("error")&&"error"===s.type&&t.removeClass("error"),n){for(var a=0;a<n.length;a++)e.removeMessage(t,n[a],s.triggerEvents);e.setIconOnParent(t,s.type),$.removeData(this,va)}})},$.fn.removeError=function(s){return gi("$.fn.removeMessage","$.fn.removeError"),s=H.extend({},s,Ld),this.each(function(){return $(this).removeMessage(s)})},$.fn.validate=function(s,e){var t="string"==typeof s;return this.each(function(){var i=$.data(this,Ju);if(i&&"string"!=typeof i){if(t)return void("function"==typeof i[s]&&i[s](e));i.updated(s)}else i=$.data(this,Ju,new Io(this,s))})},$.fn.isValid=function(){return $(this).data("isValid")??!0},$.fn.validateField=function(){var s=$(this),e=Soho.components.Validator.prototype;e&&e.validate&&e.validate(s,!1,0)},$.fn.resetForm=function(){Soho.components.Validator.prototype.resetForm(this)};var Cl="datepicker",Ff=[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],Pd={showTime:!1,useCurrentTime:!1,timeFormat:void 0,minuteInterval:void 0,secondInterval:void 0,mode:void 0,roundToInterval:void 0,dateFormat:"locale",placeholder:!1,firstDayOfWeek:0,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showLegend:!1,showMonthYearPicker:!0,showWeekNumber:!1,hideDays:!1,hitbox:!1,yearsAhead:3,yearsBack:2,legend:[],range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1,selectWeek:!1},calendarName:null,locale:null,language:null,useUTC:!1,hideButtons:!1,showToday:!0,onOpenCalendar:null,isMonthPicker:!1,attributes:null,autocompleteAttribute:"off",useMask:!0,tabbable:!0,incrementWithKeyboard:!1,todayWithKeyboard:!1};function xl(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Pd),this.settings.legend&&0===this.settings.legend.length&&(this.settings.legend=Ff),this.init()}xl.prototype={init:function(){this.build(),this.handleEvents()},build:function(){var e,t=this.settings.autocompleteAttribute;"string"==typeof t&&t.length?this.element.attr("autocomplete","".concat(Fe.ensureAlphaNumeric(t))):this.element.hasAttr("autocomplete")&&this.element.removeAttr("autocomplete");var i=this.element.next();this.trigger=i.is("button.trigger")?i:$('<button class="btn-icon trigger" type="button" '.concat(this.settings.hitbox?'data-options="{hitbox: true}"':"",'>\n        <span class="audible"></span>\n        ').concat($.createIcon("calendar"),"\n      </button>")).insertAfter(this.element),this.element.hasClass("hidden")&&this.trigger.addClass("hidden"),this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.makeTabbable(!this.element.is(":disabled")&&"-1"!==this.element.attr("tabindex")&&this.settings.tabbable),this.setExtraAttributes(),this.settings.range.selectWeek&&(this.settings.selectForward=!0,this.settings.minDays=6,this.settings.maxDays=7),this.setLocale(),this.addAria(),!this.settings.locale&&!this.settings.language&&this.setCurrentCalendar(),null!==(e=this.trigger)&&void 0!==e&&e?.data("button")||this.trigger.button()},setLocale:function(){var e=this,t=this.settings;this.locale=B.currentLocale,this.settings.language?(B.getLocale(this.settings.language),this.language=this.settings.language):this.language=B.currentLanguage.name,t.locale&&B.getLocale(t.locale).done(function(i){var n=e.getSimilarApi("locale",i);n.forEach(function(a){a.locale=B.cultures[i],a.language=e.settings.language||a.locale.language,a.setCurrentCalendar()}),0===n.length&&(e.locale=B.cultures[i],e.language=e.settings.language||e.locale.language,e.setCurrentCalendar())}),t.language&&B.getLocale(t.language).done(function(){e.getSimilarApi("language",t.language).forEach(function(n){n.language=t.language})})},getSimilarApi:function(e,t){var i=[].slice.call(document.querySelectorAll(".datepicker")),n=[];return i.forEach(function(a){var o=$(a).data("datepicker");o&&o.settings[e]===t&&n.push(o)}),n},setCurrentCalendar:function(){this.currentCalendar=B.calendar(this.settings.locale||this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.isFullMonth=this.settings.dateFormat.indexOf("MMMM")>-1,this.setFormat(),this.mask()},addAria:function(){this.element.attr({role:"combobox","aria-expanded":"false"}),this.trigger.attr({role:"button","aria-haspopup":"dialog"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]'));var e=". ".concat(B.translate("PressDown",{locale:this.locale.name,language:this.language})),t=this.label.children("span.audible");t.length?t.text(e):this.label.append('<span class="audible">'.concat(e,"</span>")),this.trigger.children(".audible").text(B.translate("DatePickerTriggerButton"))},handleKeys:function(e){var t=this,i=this.settings;if(e.is("#monthview-popup"))return e.off("keydown.datepicker").on("keydown.datepicker",".monthview-table, .monthview-monthyear-pane",function(n){var a=!1,o=n.keyCode||n.charCode||0;return 9===o&&(t.containFocus(n),a=!0),27===o&&(t.closeCalendar(),t.element.focus(),n.stopImmediatePropagation(),a=!0),84===o&&(t.closeCalendar(),t.element.focus(),a=!0),!a||(n.stopPropagation(),n.preventDefault(),!1)}),void e.off("keydown.datepicker-tab").on("keydown.datepicker-tab","td, input, div.dropdown, button",function(n){return 9!==(n.keyCode||n.charCode||0)||(i.range.useRange&&$(n.target).is(".next")&&!i.range.selectWeek?t.calendarAPI.days.find("td:visible:last").attr("tabindex",0).focus():t.containFocus(n),n.stopPropagation(),n.preventDefault(),!1)});e.off("keydown.datepicker").on("keydown.datepicker",function(n){var a,o=!1,l=n.keyCode||n.charCode||0,d=(null===(a=t.settings)||void 0===a||null===(a=a?.dateFormat)||void 0===a?void 0:a?.indexOf("-"))>-1;if(40===l&&!t.isOpen()&&(o=!0,t.openCalendar(),setTimeout(function(){t.setFocusAfterOpen()},200)),!i.range.useRange&&84===l&&t.settings.todayWithKeyboard&&(o=!0,t.setToday()),!i.range.useRange&&!d&&t.settings.incrementWithKeyboard){var h=$(n.currentTarget).val();(189===l||109===l||xe.browser.isFirefox()&&173===l)&&(o=!0,t.adjustDay(!1,h)),(187===l||107===l||xe.browser.isFirefox()&&61===l)&&(o=!0,t.adjustDay(!0,h))}return!o||(n.stopPropagation(),n.preventDefault(),!1)})},containFocus:function(e){var t=e.shiftKey,i=this.popup.find(":focusable"),n=$(e.currentTarget);(n.is(".monthview-monthyear-pane, #btn-monthyear-pane")||n.closest(".is-monthyear.is-monthonly").length>0)&&(i=this.popup.find(":focusable").not("td").not(".picklist-item a").add(".picklist-item.is-selected a:visible, .picklist-item.up a:visible, .picklist-item.down a:visible"));var o=i.index($(":focus"));i.eq(o=t?o-1<0?i.length-1:o-1:o+1>=i.length?0:o+1).focus()},setFormat:function(){var e=this.settings,t="object"===rt(B)&&this.currentCalendar.dateFormat?this.currentCalendar.dateFormat:null,i="object"===rt(B)&&this.currentCalendar.timeFormat?this.currentCalendar.timeFormat:null;"object"===rt(B)&&this.settings.calendarName&&(t=B.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).dateFormat,i=B.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).timeFormat),"object"===rt(t)&&void 0!==t.short&&(t=t.short),"locale"===e.dateFormat?(this.pattern=t+(e.showTime?" ".concat(e.timeFormat||i):""),e.dateFormat=this.pattern):this.pattern=e.dateFormat+(e.showTime&&e.timeFormat?" ".concat(e.timeFormat):""),this.show24Hours=(this.pattern.match("H")||[]).length>0,this.isSeconds=(this.pattern.match("ss")||[]).length>0},mask:function(){if(this.settings.useMask){this.setFormat();var e=this.settings,t={process:"date",keepCharacterPositions:!0,patternOptions:{format:this.pattern}},i="date availableDate",n={date:"change blur enter",availableDate:"change blur"};e.range.useRange&&(t.process="rangeDate",t.patternOptions.delimeter=e.range.separator,i="rangeDate",n={rangeDate:"change blur"}),t.processOnInitialize=!1,this.isFullMonth?this.pattern=this.settings.dateFormat:void 0===this.element.data("mask")&&this.element.mask(t),this.addedValidation=!1,this.element[0]&&this.element[0].getAttribute&&!this.element[0].getAttribute("data-validate")&&(this.addedValidation=!0,this.element.attr({"data-validate":i,"data-validation-events":JSON.stringify(n)}).validate()),this.setPlaceholder()}},setPlaceholder:function(){var i=this.settings,n=this.pattern;i.placeholder&&(!this.element.attr("placeholder")||"M / D / YYYY"===this.element.attr("placeholder"))&&(i.range.useRange&&(n=i.range.first&&i.range.first.date?B.formatDate(i.range.first.date,{pattern:this.pattern,locale:this.locale.name})+i.range.separator+this.pattern:this.pattern+i.range.separator+this.pattern),this.element[0].setAttribute("placeholder",n))},setExtraAttributes:function(){this.settings.attributes&&(H.addAttributes(this.element,this,this.settings.attributes),H.addAttributes(this.trigger,this,this.settings.attributes,"trigger"))},isOpen:function(){return this.popup&&this.popup.is(":visible")&&!this.popup.hasClass("is-hidden")},loadLegend:function(e){void 0===e||e.length<1||this.calendarAPI.loadLegend(e)},openCalendar:function(){var e=this,t=this,i=this.settings,n={};if(!this.element.is(":disabled")&&!this.element.attr("readonly")||0!==this.element.closest(".monthview").length){$("#validation-tooltip").addClass("is-hidden"),this.element.addClass("is-active is-open").trigger("listopened"),this.timepickerContainer=$('<div class="datepicker-time-container"></div>');var a='<button type="button" class="is-cancel btn-tertiary">\n      '.concat(B.translate(this.settings.isMonthPicker?"Cancel":"Clear",{locale:this.locale.name,language:this.language}),"\n    </button>"),o=' <button type="button" class="is-select btn-primary">\n      '.concat(B.translate("Apply",{locale:this.locale.name,language:this.language}),"\n    </button>");if(this.footer=$(""+'<div class="popup-footer">\n        '.concat(this.isRTL?o+a:a+o,"\n      </div>")),i.hideDays&&(this.footer=$(""+'<div class="popup-footer">\n          <button type="button" class="is-cancel btn-tertiary">\n            '.concat(B.translate("Clear",{locale:this.locale.name,language:this.language}),'\n          </button>\n          <button type="button" class="is-select-month btn-primary">\n            ').concat(B.translate("Apply",{locale:this.locale.name,language:this.language}),"\n          </button>\n        </div>"))),i.hideButtons&&(this.footer=$("")),i.showTime&&(n.timeFormat=void 0===i.timeFormat?this.pattern.slice(this.pattern.indexOf(" ")).trim():i.timeFormat,void 0!==i.minuteInterval&&(n.minuteInterval=i.minuteInterval),void 0!==i.secondInterval&&(n.secondInterval=i.minuteInterval),void 0!==i.mode&&(n.mode=i.mode),void 0!==i.roundToInterval&&(n.roundToInterval=i.roundToInterval)),this.calendarContainer=$('<div class="monthview-container"></div>'),this.setValueFromField(),this.settings.showTime){""===this.element.val()&&this.currentDate&&this.currentDate.getDate()&&!this.settings.useCurrentTime&&(this.currentDate.setHours(0),this.currentDate.setMinutes(0),this.currentDate.setSeconds(0));var l=this.settings.timeFormat?this.settings.timeFormat:null;l||(l=this.isSeconds?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour),n.parentElement=this.timepickerContainer,n.locale=this.settings.locale,n.language=this.settings.language,this.time=B.formatDate(this.currentDate,{pattern:l,locale:this.locale.name,language:this.language}),this.timepicker=this.timepickerContainer.timepicker(n).data("timepicker"),this.setUseCurrentTime(),this.timepickerContainer.find(".dropdown").dropdown(),this.timepickerContainer.on("change.datepicker",function(){var w=e.setTime(t.isIslamic?t.currentDateIslamic:t.currentDate);e.setValue(w,!0,!0)}),setTimeout(function(){e.timepicker.initValues=e.timepicker.getTimeFromField(e.time),e.timepicker.afterShow(e.timepickerContainer)},1)}this.todayDate=new Date,this.todayMonth=this.todayDate.getMonth(),this.todayYear=this.todayDate.getFullYear(),this.todayDay=this.todayDate.getDate(),this.isIslamic&&(this.todayDateIslamic=B.gregorianToUmalqura(this.todayDate),this.todayYear=this.todayDateIslamic[0],this.todayMonth=this.todayDateIslamic[1],this.todayDay=this.todayDateIslamic[2]),this.settings.year=this.currentYear,this.settings.month=this.currentMonth,this.isIslamic&&(this.settings.activeDateIslamic=this.activeDate instanceof Date?B.gregorianToUmalqura(this.activeDate):this.activeDate),this.settings.onOpenCalendar?(this.settings.activeDate=this.settings.onOpenCalendar(),this.currentDate=this.settings.activeDate,this.isIslamic?(this.settings.activeDateIslamic=B.gregorianToUmalqura(this.settings.activeDate),this.settings.year=this.settings.activeDateIslamic[0],this.settings.month=this.settings.activeDateIslamic[1]):(this.settings.year=this.settings.activeDate.getFullYear(),this.settings.month=this.settings.activeDate.getMonth())):(this.settings.activeDate=this.currentDate||this.todayDate,this.settings.activeDateIslamic=this.currentDateIslamic||this.todayDateIslamic),this.settings.isPopup=!0,this.settings.headerStyle="simple",this.settings.onSelected=function(w,T){if(e.currentDate=new Date(T.year,T.month,T.day),t.settings.range.useRange&&t.settings.range.first&&t.settings.range.selectWeek){var k=Zt.firstDayOfWeek(new Date,e.settings.firstDayOfWeek),A=Zt.lastDayOfWeek(new Date,e.settings.firstDayOfWeek);return t.settings.range.first={},t.settings.range.second=void 0,t.setWeekRange({day:k.getDate(),month:k.getMonth(),year:k.getFullYear()},{day:A.getDate(),month:A.getMonth(),year:A.getFullYear()}),t.closeCalendar(),void t.element.focus()}t.settings.range.useRange&&t.settings.range.first&&!t.settings.range.selectWeek||(t.insertDate(e.currentDate),T.close&&(t.closeCalendar(),t.element.focus()))},this.settings.range.useRange&&this.settings.range.selectWeek&&(this.settings.onKeyDown=function(w){return!(37===w.key||39===w.key||38===w.key||40===w.key||13===w.key)}),this.calendarAPI=new ml(this.calendarContainer,this.settings),this.calendar=this.calendarAPI.element,this.calendar.on("beforemonthrendered",function(){e.element.trigger("beforemonthrendered")}),this.calendar.on("monthrendered",function(w,T){e.element.trigger("monthrendered",T)}),this.element.trigger("monthrendered",{year:this.calendarAPI.currentYear,month:this.calendarAPI.currentMonth,elem:this.calendar,api:this.calendarAPI}),i.showTime&&this.calendar.addClass("is-timepicker"),i.hideDays&&(this.calendar.addClass("is-monthyear"),("MMMM"===i.dateFormat||"MMM"===i.dateFormat||"MM"===i.dateFormat)&&this.calendar.addClass("is-monthonly"),"yyyy"===i.dateFormat&&this.calendar.addClass("is-yearonly")),this.calendar.append(i.showTime?this.timepickerContainer:"",this.footer);var d=this.element,h=this.isRTL?"right":"left",p=this.element.parent();p.is(".datagrid-cell-wrapper")&&(h="center",d=this.element.next(".icon, .trigger"));var v="bottom";p.offset().top<400&&p.offset().top>185&&window.innerHeight<800&&(v=B.isRTL()?"left":"right"),this.trigger.popover({content:this.calendar,placementOpts:{parent:d,parentXAlignment:h,strategies:["flip","nudge","shrink"]},placement:v,popover:!0,appendTo:this.settings.appendTo,trigger:"immediate",isRangeDatepicker:i.range.useRange,extraClass:this.settings.range.selectWeek?"monthview-popup is-range-week":"monthview-popup",tooltipElement:"#monthview-popup",initializeContent:!1}).off("show.datepicker").on("show.datepicker",function(){if(window.innerHeight<400&&e.popupClosestScrollable&&1===e.popupClosestScrollable.length&&(e.popup.find(".arrow").hide(),e.popup.css({"min-height":$("html").hasClass("theme-new-light")?"":"".concat(e.popupClosestScrollable[0].scrollHeight-521,"px"),height:""}),(window.innerHeight-e.popup.height())/window.innerHeight<.15&&e.popupClosestScrollable.children().not(".popover").css("padding-top","80px"),e.popupClosestScrollable.css("min-height","375px")),(window.innerHeight-e.popup.height())/window.innerHeight<.15&&e.popup.css({top:"".concat(e.popup.position().top<0?0:e.popup.position().top+50,"px")}),e.settings.hideButtons&&e.popup.addClass("hide-buttons"),e.settings.showMonthYearPicker&&(e.popup.find(".expandable-area").expandablearea({animationSpeed:150,trigger:"btn-monthyear-pane"}),e.popup.find(".btn-monthyear-pane").button()),e.settings.range.selectWeek){var w=e.popup.find("tbody");e.popup.find(".monthview-table tr").hover(function(T){var k=$(T.currentTarget);w.find("td").removeClass("is-selected range-selection end-date"),k.find("td").addClass("range-selection")})}}).off("hide.datepicker").on("hide.datepicker",function(){setTimeout(function(){e.popupClosestScrollable.children().not(".popover").css("padding-top",""),e.popupClosestScrollable.add(e.popup).css("min-height",""),e.closeCalendar()},1)}),this.handleKeys($("#monthview-popup")),$(".monthview-footer a",this.calendar).button(),this.popup=$("#monthview-popup"),this.popupClosestScrollable=this.popup.closest(".scrollable"),this.popup.attr("role","dialog"),this.originalDate=this.element.val(),this.calendarAPI.currentDate=this.currentDate,this.calendarAPI.currentDateIslamic=this.currentDateIslamic,this.calendarAPI.validatePrevNext(),this.calendarAPI.days.off("click.datepicker").on("click.datepicker","td",function(){var w=$(this);if(w.hasClass("is-disabled"))t.calendarAPI.activeTabindex(w,!0);else{if(i.range.useRange&&(!i.range.first||i.range.second)&&!i.range.selectWeek&&t.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected"),i.range.useRange&&i.range.selectWeek){var T=t.calendarAPI.getCellDate(t.calendar.find("td.range-selection").first()),k=t.calendarAPI.getCellDate(t.calendar.find("td.range-selection").last());return void t.setWeekRange(T,k)}i.range.useRange||t.calendarAPI.days.find(".is-selected").removeClass("is-selected").removeAttr("aria-selected").removeAttr("tabindex");var A=$(this);A.addClass("is-selected".concat(i.range.useRange?" range":"")).attr("aria-selected","true"),t.lastValue=null,t.insertSelectedDate(A),i.range.useRange?t.isFocusAfterClose=!0:i.showTime||(t.closeCalendar(),t.element.focus())}}),this.footer.off("click.datepicker").on("click.datepicker","button",function(w){var T=$(this);if(T.hasClass("is-cancel")&&(t.settings.isMonthPicker||(t.element.val("").trigger("change").trigger("input"),t.currentDate=null,t.clearRangeDates()),t.closeCalendar(),t.element.focus()),T.hasClass("is-cancel-month-pane")&&t.calendarAPI.monthYearPane.data("expandablearea").close(),T.hasClass("is-select-month")||T.hasClass("is-select-month-pane")){var k=parseInt(t.calendarAPI.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),A=parseInt(t.calendarAPI.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);t.currentDate=new Date(k,A,1),t.isIslamic&&(t.currentDateIslamic[0]=k,t.currentDateIslamic[1]=A,t.currentDateIslamic[2]=1,t.currentYear=k,t.currentMonth=A,t.currentDay=1,t.currentDate=B.umalquraToGregorian(k,A,1)),i.range.useRange?t.isFocusAfterClose=!1:T.hasClass("is-select-month")&&(t.insertDate(t.isIslamic?t.currentDateIslamic:t.currentDate),t.closeCalendar()),T.hasClass("is-select-month-pane")&&t.calendarAPI.showMonth(A,k)}if(T.hasClass("is-select")){var L=t.calendarAPI.setRangeSelByClick();if(1===L)t.closeCalendar();else if(2===L)t.element.trigger("change",[i.range.data]).trigger("input",[i.range.data]),t.closeCalendar();else{if(3===L)return void w.preventDefault();t.insertSelectedDate(),t.closeCalendar()}T.hasClass("is-select-month-pane")||t.element.focus()}w.preventDefault(),T.hasClass("is-select-month-pane")&&(t.calendarAPI.monthYearPane.data("expandablearea").close(),t.popup.find(".btn-primary.is-select").focus())}),this.popup.off("click.datepicker-today").on("click.datepicker-today",".hyperlink.today:not(.is-disabled)",function(w){w.preventDefault(),i.range.useRange?(t.setToday(!0),(!i.range.second||i.range.second&&!i.range.second.date)&&w.preventDefault()):(t.setToday(),t.closeCalendar())}),setTimeout(function(){H.addAttributes(e.popup.find(".btn-monthyear-pane"),e,e.settings.attributes,"btn-monthyear"),H.addAttributes(e.popup.find(".is-cancel"),e,e.settings.attributes,"btn-cancel"),H.addAttributes(e.popup.find(".is-select"),e,e.settings.attributes,"btn-select"),t.calendarAPI.validatePrevNext(),t.setFocusAfterOpen()},50)}},setUseCurrentTime:function(){if(this.settings.useCurrentTime&&this.timepicker.minuteSelect.length){var e=this.isSeconds&&this.timepicker.secondSelect.length,t=function(o){return(o<10?"0":"")+o},i=function(o,l){o.find("option:contains(".concat(l,")")).length||(o.find("option:selected").prop("selected",!1),o.prepend($("<option selected >".concat(l,"</option>"))))},n=new Date;i(this.timepicker.minuteSelect,t(n.getMinutes())),e&&i(this.timepicker.secondSelect,t(n.getSeconds())),"string"==typeof this.time&&""!==this.time&&this.currentDate&&this.currentDate.getDate()&&(i(this.timepicker.minuteSelect,t(this.currentDate.getMinutes())),e&&i(this.timepicker.secondSelect,t(this.currentDate.getSeconds())))}},clearRangeDates:function(){var e=this.settings;e.range.useRange&&(e.range.start=Pd.range.start,e.range.end=Pd.range.end,e.range.data&&delete e.range.data)},insertSelectedDate:function(e){var t=this,i=t.calendarAPI.getCellDate(e||t.calendar.find("td.is-selected").last()),n=i.day,a=i.month,o=i.year;t.currentDate=new Date(o,a,n),t.isIslamic&&(t.currentDateIslamic[0]=o,t.currentDateIslamic[1]=a,t.currentDateIslamic[2]=n,t.currentYear=o,t.currentMonth=a,t.currentDay=n,t.currentDate=B.umalquraToGregorian(o,a,n)),t.insertDate(t.isIslamic?t.currentDateIslamic:t.currentDate)},setWeekRange:function(e,t){var i=this.settings;i.range.first.date=new Date(e.year,e.month,e.day),i.range.second=void 0,this.setValue(new Date(t.year,t.month,t.day)),this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected")},close:function(){this.closeCalendar()},closeCalendar:function(){var e=this.calendarAPI&&this.calendarAPI.days.length?this.calendarAPI.days.find("td.is-selected"):null;this.resetRange({cell:e}),this.settings.showTime&&this.timepickerControl&&this.timepickerControl.isOpen()&&this.timepickerControl.closeTimePopup(),this.popup&&this.popup.length&&this.popup.hide().remove();var t=this.trigger.data("popover");t&&t.destroy(),this.calendarAPI&&delete this.calendarAPI.datepickerApi,this.element.hasClass("is-active")&&(this.element.trigger("listclosed"),this.element.removeClass("is-active is-open"))},setFocusAfterOpen:function(){var e=this.settings;if(this.calendar){if(e.range.useRange&&(e.range.first&&e.range.first.label&&(!e.range.second||e.range.second&&!e.range.second.date)&&this.setRangeFirstPart(e.range.first.date),this.calendarAPI.setRangeSelected(),e.range.second&&e.range.first.date&&e.range.second.date&&this.element.val(this.getRangeValue()),this.popup.removeClass("is-hidden")),this.calendarAPI.datepickerApi=this,e.range.useRange&&e.range.selectWeek){var t=this.calendar.find("td.is-selected").first().parent();return this.calendar.find("td[tabindex]").removeAttr("tabindex"),void t.attr("tabindex","0").focus()}this.calendarAPI.activeTabindex(this.calendar.find("td.is-selected"),!0)}},setRangeFirstPart:function(e){var t=this.settings,i=function(b){return new Date(b.year,b.month,b.day)},n=this.calendarAPI.days.find("td:visible:first"),a=this.calendarAPI.days.find("td:visible:last"),o=this.isIslamic?st.padDate(e[0],e[1],e[2]):st.padDate(e.getFullYear(),e.getMonth(),e.getDate()),l=this.calendarAPI.days.find('[data-key="'.concat(o,'"]')),d=l.closest("tr");this.isIslamic?(this.currentDate=B.umalquraToGregorian(e[0],e[1],e[2],e[3],e[4],e[5],e[6]),this.currentDateIslamic=e):this.currentDate=e;var h=this.calendarAPI.getCellDate(n),p=this.calendarAPI.getCellDate(a);t.range.first={date:this.isIslamic?Mi(e):e,cell:l,row:d,rowIdx:d.index(),cellIdx:l.index()},t.range.extra={minCell:n,maxCell:a,min:this.isIslamic?[h.year,h.month,h.day]:i(h),max:this.isIslamic?[p.year,p.month,p.day]:i(p),cellLength:d.children("td").length},this.calendarAPI.settings.range.first=t.range.first,this.calendarAPI.settings.range.extra=t.range.extra},insertDate:function(e,t){var i=this.settings,n="",a="",o="";if(e instanceof Array)n=e[0],a=e[1],o=e[2].toString();else{if(!(e instanceof Date)||isNaN(this.getTime(e)))return;n=e.getFullYear(),a=e.getMonth(),o=e.getDate().toString()}if((this.calendarAPI.currentMonth!==a||this.calendarAPI.currentYear!==n)&&this.calendarAPI.showMonth(a,n),this.isOpen()){var l=this.calendarAPI.days.find("td:not(.alternate)").filter(function(){return $(this).text().toLowerCase()===o});l.hasClass("is-disabled")||(this.settings.showTime&&(t?(this.time=B.formatDate(e,{pattern:this.currentCalendar.dateFormat.hour,locale:this.locale.name,language:this.language}),this.settings.roundToInterval&&($("#timepicker-minutes").val(""),e=this.setTime(e))):e=this.setTime(e)),this.setValue(e,!0),i.range.useRange?this.calendarAPI.days.find(".is-selected").removeAttr("aria-selected").removeAttr("tabindex"):this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected").removeAttr("tabindex"),l.addClass("is-selected".concat(i.range.useRange?" range":"")).attr({"aria-selected":!0})),this.calendarAPI.activeTabindex(l,!0)}},setValue:function(e,t,i){var n=this.settings;if(this.currentDate=e,""===this.currentDate||void 0===this.currentDate)return this.element.val(""),void this.clearRangeDates();e instanceof Array&&(this.currentDateIslamic=e,this.currentDate=B.umalquraToGregorian(e[0],e[1],e[2],e[3],e[4],e[5])),n.range.useRange?i||this.setRangeToElem(e,!1):this.element.val(B.formatDate(e,{pattern:this.pattern,locale:this.locale.name})),t&&(n.range.useRange?i||this.element.trigger("change",[n.range.data]).trigger("input",[n.range.data]):this.element.trigger("change").trigger("input"))},getTime:function(e){return Array.isArray(e)?e.join(""):e.getTime()},setRangeToElem:function(e,t){var i=this,n=this.settings,a=function(T){return B.formatDate(T,{pattern:i.pattern,locale:i.locale.name})},o=a(e),l=!1;if(this.isOpen()){var h=this.isIslamic?st.padDate(e[0],e[1],e[2]):st.padDate(e.getFullYear(),e.getMonth(),e.getDate()),p=this.calendarAPI.days.find('[data-key="'.concat(h,'"]')),v=p.closest("tr");n.range.second&&(n.range.second.date?this.resetRange({cell:p}):(delete n.range.second.date,$.isEmptyObject(n.range.second)&&delete n.range.second));var b={};n.range.first&&(b.date=this.getTime(e),b.firstdate=this.getTime(n.range.first.date),b.min=this.calendarAPI.getDifferenceToDate(n.range.first.date,n.range.minDays),b.max=this.calendarAPI.getDifferenceToDate(n.range.first.date,n.range.maxDays)),!n.range.first||t?(this.setRangeFirstPart(e),o=this.getRangeValue(),this.setPlaceholder()):!n.range.second&&n.range.selectBackward&&b.date>b.firstdate||n.range.selectForward&&b.date<b.firstdate||n.range.maxDays>0&&b.date>b.max.aftertime||b.date<b.max.beforetime?(this.resetRange({cell:p}),this.setRangeFirstPart(e),o=this.getRangeValue(),this.setPlaceholder()):(l=!0,this.isIslamic?(this.currentDate=B.umalquraToGregorian(e[0],e[1],e[2],e[3],e[4],e[5],e[6]),this.currentDateIslamic=e):this.currentDate=e,n.range.minDays>0&&(b.date>=b.firstdate&&b.date<b.min.aftertime?(e=b.min.after,b.date===b.firstdate&&(b.date=this.getTime(e))):b.date<b.firstdate&&b.date>b.min.beforetime&&(e=b.min.before),h=this.isIslamic?st.padDate(e[0],e[1],e[2]):st.padDate(e.getFullYear(),e.getMonth(),e.getDate()),v=(p=this.calendarAPI.days.find('[data-key="'.concat(h,'"]'))).closest("tr")),b.date>b.firstdate?n.range.second={date:e,cell:p,row:v,rowIdx:v.index(),cellIdx:p.index()}:(n.range.second=n.range.first,n.range.first={date:e,cell:p,row:v,rowIdx:v.index(),cellIdx:p.index()}),o=this.getRangeValue())}else if(!t){l=!0;var d=e||new Date;this.currentMonth=d.getMonth(),this.currentYear=d.getFullYear(),this.currentDay=d.getDate(),this.currentDate=d,n.range.first=n.range.first||{},n.range.second=n.range.second||{},n.range.first.date=d,n.range.second.date=d,n.range.end&&e&&(n.range.second.date="string"==typeof n.range.end?B.parseDate(n.range.end,{pattern:this.pattern,locale:this.locale.name},!1):n.range.end),o=this.getRangeValue()}this.element.val(o),l?(n.range.data={value:o,dates:this.calendarAPI?this.calendarAPI.getDateRange(n.range.first.date,n.range.second.date):[n.range.first.date],startDate:n.range.first.date,start:a(n.range.first.date),endDate:n.range.second.date,end:a(n.range.second.date)},this.closeCalendar(),this.isFocusAfterClose&&(delete this.isFocusAfterClose,this.element.focus())):n.range.data={value:o,dates:[n.range.first.date],startDate:n.range.first.date,start:a(n.range.first.date)}},resetRange:function(e){e=e||{},this.settings.range.useRange&&(delete this.settings.range.first,delete this.settings.range.second,delete this.settings.range.extra,e.isData&&delete this.settings.range.data,this.calendarAPI&&(delete this.calendarAPI.settings.range.first,delete this.calendarAPI.settings.range.second,delete this.calendarAPI.settings.range.extra,e.isData&&delete this.calendarAPI.settings.range.data),this.calendarAPI&&this.calendarAPI.days.length&&this.calendarAPI.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),e.cell&&e.cell.addClass("is-selected"))},setRangeValueFromField:function(){var d,e=this,t=function(v){return B.formatDate(v,{pattern:e.pattern,locale:e.locale.name})},i=function(v){return B.parseDate(v,{pattern:e.pattern,locale:e.locale.name},!1)},n=function(v){return v&&"function"==typeof v.getTime?v:new Date},a=function(v){var b=i(v[0]),w=i(v[1]),T=e.isIslamic&&Array.isArray(b);return T||(b=B.gregorianToUmalqura(new Date(v[0])),w=B.gregorianToUmalqura(new Date(v[1]))),b&&w?(b=e.getTime(n(b)),w=e.getTime(n(w)),e.isIslamic&&!T&&(v[0]=B.gregorianToUmalqura(new Date(v[0])),v[1]=B.gregorianToUmalqura(new Date(v[1]))),b>w?[v[1],v[0]]:[v[0],v[1]]):v},o=this.settings,l={};if(l.value=o.range.value||this.element.val().trim(),l.isEmpty=""===l.value,!l.isEmpty&&l.value.indexOf(o.range.separator)>-1?l.dates=a(l.value.split(o.range.separator)):!l.isEmpty&&l.value.indexOf(o.range.separator.slice(0,-1))>-1?l.dates=l.value.split(o.range.separator.slice(0,-1)):!l.isEmpty&&-1===l.value.indexOf(o.range.separator)&&(l.dates=[t(l.value)]),!o.range.data&&o.range.start&&o.range.end&&l.isEmpty&&(d=a("string"==typeof o.range.start&&"string"==typeof o.range.end?[o.range.start,o.range.end]:"string"!=typeof o.range.start&&"string"==typeof o.range.end?[t(o.range.start),o.range.end]:"string"==typeof o.range.start&&"string"!=typeof o.range.end?[o.range.start,t(o.range.end)]:[t(o.range.start),t(o.range.end)]),o.range.start=t(d[0]),o.range.end=t(d[1])),o.range.first=o.range.first||{},o.range.second=o.range.second||{},o.range.data&&o.range.data.startDate?o.range.first.date=o.range.data.startDate:o.range.start&&"string"==typeof o.range.start?o.range.first.date=i(o.range.start):l.dates&&(o.range.first.date=this.isIslamic&&Array.isArray(l.dates[0])?l.dates[0]:i(l.dates[0])),o.range.data&&o.range.data.endDate?o.range.second.date=o.range.data.endDate:o.range.end&&"string"==typeof o.range.end?o.range.second.date=i(o.range.end):l.dates&&(o.range.second.date=this.isIslamic&&Array.isArray(l.dates[1])?l.dates[1]:i(l.dates[1])),this.calendarAPI&&this.calendarAPI.setRangeSelected(),!l.isEmpty&&(l.isEmpty||o.range.data))return!1;var h=t(o.range.first.date);return h&&this.element.val(h),!0},setValueFromField:function(){var e=this,t=this.settings;if(this.setCurrentCalendar(),t.range.useRange&&""===this.element.val().trim()&&this.resetRange({isData:!0}),t.range.useRange&&(""!==this.element.val().trim()||t.range.start&&t.range.end||t.range.data&&t.range.data.startDate&&t.range.data.endDate)&&!this.setRangeValueFromField())return this.currentDate&&"function"==typeof this.currentDate.getMonth&&(this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate()),void(this.currentDate&&this.isIslamic&&(this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2]));var i=this,n=this.element.val(),a=n;if(this.isIslamic&&n){var o=B.parseDate(this.element.val(),{pattern:this.pattern,locale:this.locale.name});o instanceof Date?a=B.umalquraToGregorian(o.getFullYear(),o.getMonth(),o.getDate()):o instanceof Array&&(a=B.umalquraToGregorian(o[0],o[1],o[2],o[3],o[4],o[5]))}var d=function(){var k=(new Date).getDate();if(e.calendarAPI){var A=e.calendarAPI.dayMap.filter(function(M){return M.elem.is(".is-selected")});A.length&&(k=parseInt(A[0].key.substr(6),10))}return k}();this.currentDate=a||new Date,"string"==typeof this.currentDate&&(this.currentDate=B.parseDate(this.currentDate,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1),this.pattern&&-1===this.pattern.indexOf("d")&&this.currentDate.setDate(d)),void 0===this.currentDate&&(this.currentDate=B.parseDate(a,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1)),this.isIslamic?(this.currentDateIslamic=B.gregorianToUmalqura(this.currentDate),this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2]):(this.currentDate=this.currentDate||new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());var h=i.pattern,p=!(h.indexOf("MMMM")>-1||h.indexOf("MMM")>-1||"yyyy"===h||"MMMM"===h||"MMM"===h||"MM"===h),v=i.element.val().trim();if(""!==v&&!t.range.useRange){var b=B.parseDate(v,{pattern:i.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},p),w=0;w=this.isIslamic?b[3]:b?.getHours(),!this.isIslamic&&b&&w<12&&i.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&""!==this.currentCalendar.dayPeriods[1]&&b.setHours(w+12),this.isIslamic&&b&&w<12&&i.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&(w+=12),!this.isIslamic&&i.pattern&&-1===i.pattern.indexOf("d")&&b.setDate(d),this.isIslamic&&i.pattern&&-1===i.pattern.indexOf("d")&&(b[2]=d),void 0!==b&&""!==i.element.val().trim()&&!t.range.useRange&&(i.setValue(b),v!==i.element.val().trim()&&this.element.trigger("change").trigger("input"))}t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&(t.range.second.date?this.element.val(this.getRangeValue()):this.setRangeToElem(this.currentDate,!0))},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this.trigger.prop("disabled",!1)},disable:function(){this.element.removeAttr("readonly").attr("disabled","disabled").closest(".field").addClass("is-disabled"),this.trigger.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly"),this.trigger.prop("disabled",!1)},isReadonly:function(){return this.element.prop("readonly")},makeTabbable:function(e){this.trigger.attr("tabIndex",e?0:-1)},setToday:function(e){var t=this.settings;if(this.lastValue=null,this.currentDate=new Date,!this.isReadonly()&&!this.isDisabled()){if(this.settings.useCurrentTime||(this.currentDate=this.setTime(this.currentDate)),this.isIslamic){var i=B.gregorianToUmalqura(this.currentDate);this.currentDateIslamic=i}var n=this.isIslamic?this.currentDateIslamic:this.currentDate,a=!1;if(this.isOpen())if(t.range.useRange)if(!t.range.first||t.range.first&&!t.range.first.date){if(this.calendarAPI.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),this.insertDate(n,!0),e&&this.calendarAPI){var o=this.calendarAPI.dayMap.filter(function(h){return h.elem.is(".is-selected")});o&&o.length&&setTimeout(function(){o[0].elem.focus()},0)}}else t.range.first&&t.range.first.date&&(!t.range.second||t.range.second&&!t.range.second.date)?(this.setRangeToElem(n,!1),a=!0):t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date&&(this.resetRange({isData:!0}),this.insertDate(n,!0));else this.insertDate(n,!0);else{if(t.range.useRange)this.setRangeToElem(this.currentDate);else{var d=B.formatDate(n,{pattern:this.pattern,locale:this.locale.name});this.element.val(d)}a=!0}a&&(t.range.useRange?this.element.trigger("change",[t.range.data]).trigger("input",[t.range.data]):this.element.trigger("change").trigger("input"))}},adjustDay:function(e,t){if(!this.isReadonly()&&!this.isDisabled()){this.currentDate||(t.length>0&&/(0?[1-9]|1[012])\/(0?[1-9]|[12][0-9]|3[01])\/\d{4}/.test(t)?this.setValue(new Date(t),!0,!0):this.setToday());var i={pattern:this.pattern,locale:this.locale.name},n=this.isIslamic?this.currentDateIslamic:this.currentDate;this.isIslamic?(n[2]+=e?1:-1,(n=B.umalquraToGregorian(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2],this.currentDateIslamic[3],this.currentDateIslamic[4],this.currentDateIslamic[5],this.currentDateIslamic[6])).setDate(n.getDate()+(e?1:-1)),n=B.gregorianToUmalqura(n)):n.setDate(n.getDate()+(e?1:-1)),this.element.val(B.formatDate(n,i)),this.element.trigger("change").trigger("input")}},setTime:function(e){if(!this.timepicker||void 0===this.popup)return this.settings.useCurrentTime||e.setHours(0,0,0,0),e;var i=this.popup.find(".dropdown.hours").val(),n=this.popup.find(".dropdown.minutes").val(),a=this.isSeconds?this.popup.find(".dropdown.seconds").val():0,o=this.popup.find(".dropdown.period"),l=o.val();return i=o.length&&l===this.currentCalendar.dayPeriods[1]&&i<12?parseInt(i,10)+12:i,i=!o.length||l!==this.currentCalendar.dayPeriods[0]&&l||12!==parseInt(i,10)?i:0,e instanceof Array?(e[3]=i?parseInt(i,10):e[3],e[4]=n?parseInt(n,10):e[4],e[5]=a?parseInt(a,10):e[5]):(e=new Date(e)).setHours(i,n,a),e},getCurrentDate:function(){return this.currentDate},updated:function(e){typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,Pd)),this.teardown(),this.init(),this.element.data("validate")&&this.element.data("validate")instanceof Object&&this.element.data("validate").updated()},getRangeValue:function(){var e=this,t=this.settings,i=function(a){return B.formatDate(a,{pattern:e.pattern,locale:e.locale.name})};return t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date?"".concat(i(t.range.first.date)+t.range.separator+i(t.range.second.date)):t.range.useRange&&t.range.first&&t.range.first.date?t.placeholder?"".concat(i(t.range.first.date)+t.range.separator+this.pattern):i(t.range.first.date):""},teardown:function(){this.isOpen()&&this.closeCalendar(),this.element.off("blur.datepicker change.datepicker-rangeclear keyup.datepicker-rangeclear"),this.trigger.remove(),this.element.removeAttr("placeholder"),this.calendarAPI&&this.calendarAPI.destroy(),this.calendar&&this.calendar.length&&this.calendar.remove(),this.popup&&this.popup.length&&this.popup.remove();var e=this.element.data("mask");return e&&e.destroy(),this.element.removeAttr("data-mask"),this.element.removeData("mask"),this.element.off("keydown.datepicker blur.validate change.validate keyup.validate focus.validate"),this.addedValidation&&(this.element.removeAttr("data-validate").removeData("validate validationEvents"),delete this.addedValidation),this},destroy:function(){this.closeCalendar(),this.teardown(),this.element[0]&&$.removeData(this.element[0],Cl)},handleEvents:function(){var e=this,t=this,i=this.settings;if(this.trigger.on("click.datepicker",function(){t.isOpen()?t.closeCalendar():t.openCalendar()}),this.handleKeys(this.element),t.element.on("blur.datepicker",function(){""!==e.element.val().trim()&&e.setValueFromField()}),this.element.on("change.datepicker-rangeclear keyup.datepicker-rangeclear",function(){!e.isOpen()&&""===e.element.val().trim()&&t.clearRangeDates()}),!this.isOpen()&&i.range.useRange&&!i.range.first){this.setRangeValueFromField();var n=this.getRangeValue();n&&this.element.val(n)}}},$.fn.datepicker=function(s){return this.each(function(){var e=$.data(this,Cl);e?e.updated(s):e=$.data(this,Cl,new xl(this,s))})};var Vg=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code","div"];function Wi(s,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4?arguments[4]:void 0;if(!s||"string"!=typeof s||!e.length)throw new Error('"id" property must be defined and unique.');if(this.id=s,!e||"string"!=typeof e||!e.length)throw new Error('"displayName" property must be defined.');return this.displayName=e,t=t.toLowerCase(),-1===Vg.indexOf(t)&&(t="p"),this.tagName=t,"string"==typeof i&&i.length&&(this.className=i),n instanceof CSSStyleDeclaration&&(this.styleProps=n),this}Wi.prototype={render:function(e){return e=Fe.stripHTML(e),"<".concat(this.tagName,">").concat(e,"</").concat(this.tagName,">")}};var ks="fontpicker";function Zu(){return{popupmenuSettings:{offset:{y:10}},styles:[new Wi("default",B.translate("FontPickerNormal")),new Wi("header1",B.translate("FontPickerHeader").replace("{0}","1"),"h3"),new Wi("header2",B.translate("FontPickerHeader").replace("{0}","2"),"h4")]}}function Nd(s,e){if(!(s instanceof HTMLElement))throw new Error('Property "element" is not an HTMLElement type');this.settings=H.mergeSettings(s,e,Zu()),e&&Array.isArray(e.styles)&&(this.settings.styles=e.styles),this.element=s,this.init()}Nd.prototype={get menuAPI(){var s=$(this.element).data("popupmenu");if(s)return s},get selected(){var s;return this.settings.styles.forEach(function(e){e.selected&&(s=e)}),s||(this.settings.styles[0].selected=!0,this.settings.styles[0])},getStyleById:function(e){var t;if(this.settings.styles.forEach(function(i){i.id===e&&(t=i)}),!t)throw new Error('No FontPickerStyle available with id "'.concat(e,'"'));return t},getStyleByTagName:function(e){var t;if(this.settings.styles.forEach(function(i){i.tagName===e&&(t=i)}),!t)throw new Error('No FontPickerStyle available with tagName "'.concat(e,'"'));return t},get disabled(){return this.trueDisabled},set disabled(s){this.trueDisabled=s,this.element.disabled=!0===s},get supportedTagNames(){var s=[];return this.settings.styles.forEach(function(e){s.push(e.tagName)}),s},init:function(){return(!Array.isArray(this.settings.styles)||!this.settings.styles.length)&&(this.settings.styles=Zu().styles),this.build().handleEvents()},build:function(){var e=$(this.element),t=this.element.querySelector("svg.icon.icon-dropdown");t||(t=$.createIcon({icon:"dropdown",classes:["icon-dropdown"]}),this.element.insertAdjacentHTML("beforeend",t)),this.ddIcon=this.element.querySelector("svg.icon.icon-dropdown"),e.button();var i=e.next(".popupmenu");(!i||!i.length)&&(i=$('<ul class="popupmenu fontpicker-menu"></ul>').insertAfter(this.element)),i.html(this.buildMenuHTML());var n=H.extend({},this.settings.popupmenuSettings,{menu:i,stretchToWidestMenuItem:!0});return e.popupmenu(n),this.render(),this.audible=$('<span class="audible">'.concat(B.translate("FontPickerStyle"),"</span>")),this.element.prepend(this.audible[0]),this},render:function(){var e=this.selected,t=this.element.querySelector("span:not(.audible)");$(t).html(e.displayName)},buildMenuHTML:function(){var e="";return this.settings.styles.forEach(function(t){var i=t.render(t.displayName);e+='<li class="fontpicker-style">\n        <a href="#" data-val="'.concat(t.id,'">').concat(i,"</a>\n      </li>")}),"".concat(e)},handleEvents:function(){var e=this,t=this;return $(this.element).on("selected.".concat(ks),function(i,n){var a=n.attr("data-val");e.select(a)}).on("updated.".concat(ks),function(i,n){t.updated(n)}),this},select:function(e,t){if(!e||"string"!=typeof e&&!(e instanceof Wi))throw new Error('"id" property must be defined in order to select.');var i;i=e instanceof Wi?e:this.getStyleById(e),this.settings.styles.forEach(function(n){n.selected=!1}),i.selected=!0,this.render(i),t||$(this.element).triggerHandler("font-selected",[i])},updated:function(e){var t;return typeof e<"u"&&(Array.isArray(e.styles)&&(t=e.styles),this.settings=H.mergeSettings(this.element,e,this.settings),t&&(this.settings.styles=t)),this.teardown().init()},teardown:function(){var e=this.element.querySelector("svg.icon.icon-dropdown");e.parentNode.removeChild(e);var t=this.menuAPI;t&&"function"==typeof t.destroy&&t.destroy();var i=$(this.element).data("button");return i&&"function"==typeof i.destroy&&i.destroy(),$(this.element).off(["selected.".concat(ks),"updated.".concat(ks)].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element,ks)}},$.fn.fontpicker=function(s){return this.each(function(){var e=$.data(this,ks);e?e.updated(s):e=$.data(this,ks,new Nd(this,s))})};var na="toolbar",Bd={rightAligned:!1,maxVisibleButtons:3,resizeContainers:!0,favorButtonset:!0,moreMenuSettings:void 0,noSearchfieldReinvoke:!1,attributes:null};function Rd(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Bd),this.init()}Rd.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){return this.settings.maxVisibleButtons<=0&&(this.settings.maxVisibleButtons=Bd.maxVisibleButtons),this},build:function(){var e,t=this;if(this.element.attr("role","toolbar"),this.settings.resizeContainers&&this.element.is(":not(:hidden)")&&this.element[0].classList.add("do-resize"),Array.isArray(this.settings.attributes)&&H.addAttributes(this.element,this,this.settings.attributes),this.buildAriaLabel(),this.id||(this.id=parseInt($(".toolbar, .formatter-toolbar").index(this.element),10)),this.isModalToolbar=this.element.parent().is(".modal-body"),this.title=this.element.children(".title"),this.title.length&&!this.isModalToolbar?(this.element[0].classList.add("has-title"),this.cutoffTitle=!1,this.title.on("beforeshow.toolbar",function(){return t.cutoffTitle}).tooltip({content:"".concat(this.title.text().trim())})):this.element[0].classList.remove("has-title"),this.buttonset=this.element.children(".buttonset"),this.buttonset.length||(this.buttonset=$('<div class="buttonset"></div>'),this.title.length?this.buttonset.insertAfter(this.title):this.buttonset.prependTo(this.element)),this.element[this.settings.rightAligned?"addClass":"removeClass"]("right-aligned"),this.more=this.element.find(".btn-actions"),0===this.more.length&&!this.element.hasClass("no-actions-button")){var i=this.element.find(".more");i.length||(i=$('<div class="more"></div>').appendTo(this.element)),this.more=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(B.translate("MoreActions"),"</span>")).attr("title",B.translate("More")).appendTo(i)}if(this.buttonsetItems=this.buttonset.children("button").add(this.buttonset.find("input")),this.items=this.buttonsetItems.add(this.title.children("button")).add(this.more),this.items.filter('button, input[type="button"], [class^="btn"]').each(function(A){var M=$(this);M.data("button")||M.button(),!$(this).data("tooltip")&&M.attr("title")&&M.tooltip(),!M.is(".btn-menu")&&Array.isArray(t.settings.attributes)&&H.addAttributes(M,t,t.settings.attributes,"button-".concat(A))}),!this.settings.noSearchfieldReinvoke){var a=this.items.filter(".searchfield, .toolbar-searchfield-wrapper, .searchfield-wrapper"),o={};this.settings.placeholder&&(o.placeholder=this.settings.placeholder),a.each(function(A,M){var L=$(M);if(L.is(".toolbar-searchfield-wrapper, .searchfield-wrapper")&&(L=L.children(".searchfield")),!L.data("searchfield")){var z=$.extend(o,H.parseSettings(L[0]));L.searchfield(z)}H.addAttributes(L,t,t.settings.attributes,"searchfield")})}var l=this.more.data("popupmenu"),d=this.more.attr("aria-controls");l?this.moreMenu=l.menu:(this.moreMenu=$("#".concat(d)),(!this.moreMenu.length||void 0===d)&&(this.moreMenu=this.more.next(".popupmenu, .popupmenu-wrapper")),this.moreMenu.length||(this.moreMenu=$('<ul id="popupmenu-toolbar-'.concat(this.id,'" class="popupmenu"></ul>')).insertAfter(this.more)),this.moreMenu.is(".popupmenu-wrapper")&&(this.moreMenu=this.moreMenu.children(".popupmenu")));var v,p=[];this.items.not(this.more).not(".ignore-in-menu").filter(function h(){return $(this).parent(".buttonset, .inline").length}).each(function(){p.push(t.buildMoreActionsMenuItem($(this)))}),p.reverse(),$.each(p,function(A,M){""!==M.text()&&M.prependTo(t.moreMenu)}),this.defaultMenuItems=this.moreMenu.children("li:not(.separator)"),this.hasDefaultMenuItems=this.defaultMenuItems.length>0,this.settings.moreMenuSettings&&Array.isArray(this.settings.moreMenuSettings.attributes)&&(v=this.settings.moreMenuSettings.attributes),(!v||!v.length)&&Array.isArray(this.settings.attributes)&&(v=this.settings.attributes.map(function(A){var M="".concat(A.value,"-actionbutton");return{name:A.name,value:M}})),null!==(e=v)&&void 0!==e&&e?.length||(v=null);var b=H.extend({},this.settings.moreMenuSettings,{trigger:"click",menu:this.moreMenu,attributes:v},this.hasDefaultMenuItems?{predefined:this.defaultMenuItems}:{});l?this.more.on("beforeopen.toolbar",function(){t.refreshMoreActionsMenu(t.moreMenu)}).triggerHandler("updated",[b]):this.more.popupmenu(b).on("beforeopen.toolbar",function(){t.refreshMoreActionsMenu(t.moreMenu)}),function w(){t.items.attr("tabindex","0");var A=t.buttonset.children("button");A&&A.attr("tabindex","0");var M=t.items.filter(".is-selected");if(M.length)return t.activeButton=M.first().attr("tabindex","0"),void t.items.not(t.activeButton).removeClass("is-selected");M=t.items.filter(":visible:not(:disabled)").first().attr("tabindex","0"),t.activeButton=M,t.element.is(":hidden, .is-hidden")?t.activeButton=t.items.filter(":not(:disabled)").first().attr("tabindex","0"):t.isItemOverflowed(M)&&(M.attr("tabindex","-1"),t.activeButton=t.more.addClass("is-selected").attr("tabindex","0"))}(),this.adjustMenuItemVisibility(),this.handleResize(),this.element.triggerHandler("rendered");var T=this.buttonset.find(".searchfield-wrapper, .toolbar-searchfield-wrapper");T.length&&T.trigger("reanimate");var k=this.buttonset.find(".toolbar-searchfield-wrapper .searchfield");return k.length&&k[0].setAttribute("tabindex","0"),this},buildMoreActionsMenuItem:function(e){var t;if(!0===e.data("skipit"))return e.data("skipit",void 0),t;var i=e.data("action-button-link");i&&i.length?t=i.parent():(t=$("<li></li>"),i=$('<a href="#"></a>').appendTo(t),e.data("action-button-link",i),i.data("original-button",e)),e.hasClass("hidden")&&t.addClass("hidden"),e.is(":disabled")?(t.addClass("is-disabled"),i.prop("disabled",!0)):(t.removeClass("is-disabled"),i.prop("disabled",!1)),i.text(this.getItemText(e));var n=$.getBaseURL("#icon-dropdown"),a=e.children(".icon").filter(function(){var w=$(this).getIconName();return w&&w!==n&&-1===w.indexOf("dropdown")});a&&a.length&&(i.html("<span>".concat(i.text(),"</span>")),a.clone().detach().prependTo(i));var o=t.find("b");o.length&&(this.moreMenu.addClass("has-icons"),o.detach().prependTo(t));var d=this.items.not(this.more).not(".searchfield").index(e);if(e.is(".btn-menu")){var h,p;this.settings.attributes&&this.settings.attributes.length&&(p=this.settings.attributes.map(function(w){return{name:w.name,value:"".concat(w.value,"-menubutton-").concat(d)}})),null!==(h=p)&&void 0!==h&&h?.length||(p=null),e.data("popupmenu")?i.children(".icon.arrow").length||i.append($.createIcon({classes:"icon arrow icon-dropdown",icon:"dropdown"})):e.popupmenu({attributes:p});var v=e.data("popupmenu").menu,b=v.clone();!function l(w,T,k){var L,A=w.children("li"),M=T.attr("id");T.children("li").each(function(z,q){var O=$(q),_=A.eq(z),G=O.children("a"),j=_.children("a"),X=O.attr("id"),fe=G.attr("id");X&&O.removeAttr("id").attr("data-original-menu-item",X),fe&&G.removeAttr("id").attr("data-original-menu-anchor",fe),j.data("action-button-link",G),G.data("original-button",j);var he=_.children(".wrapper").children(".popupmenu"),we=O.children(".wrapper").children(".popupmenu");he.length&&we.length&&l(he,we,O)}),T.removeAttr("id").attr("data-original-menu",M),k.addClass("submenu"),k.is(t)&&((!(L=k.children(".wrapper"))||!L.length)&&(L=$('<div class="wrapper"></div>')),L.html(T),k.append(L))}(v,b,t)}return e.is("[data-popdown]")&&e.popdown(),t},refreshMoreActionsMenu:function(e){var t=this;$("li > a",e).each(function(){var d,i=$(this),n=i.parent(),a=i.data("originalButton"),l=t.getItemText(a);a&&(i.find("span").length?i.find("span").text(l.trim()):i.text(l.trim()),a.isHiddenAtBreakpoint()||a.parent().isHiddenAtBreakpoint()?n.addClass("hidden"):n.removeClass("hidden"),a.parent().is(".is-disabled")||a.is(":disabled")?(n.addClass("is-disabled"),i.prop("disabled",!0),i.attr("tabindex","-1")):(n.removeClass("is-disabled"),i.prop("disabled",!1)),a.is("a")&&(a.parent("li").is(".is-checked")?n.addClass("is-checked"):n.removeClass("is-checked")),a.is(".btn-menu")&&(d=i.parent().find(".popupmenu").first(),t.refreshMoreActionsMenu(d)))})},getItemText:function(e){if(!e)return"";var o,t=e.find("span").first(),i=e.attr("title"),n=e.data("tooltip");return o=""!==i&&void 0!==i?i:(n&&"string"==typeof n.content?n.content:void 0)||(t.length?t.text():e.text()),Fe.stripHTML(o)},handleEvents:function(){var e=this;return this.items.on("keydown.toolbar",function(t){e.handleKeys(t)}).on("click.toolbar",function(t){e.handleClick(t)}).on("collapsed.toolbar.searchfield",function(){setTimeout(function(){e.handleResize()},150)}),this.items.filter(".btn-menu, .btn-actions").on("close.toolbar",function(){var n,i=$(this);i.is(".is-overflowed")?(n=e.getLastVisibleButton())&&n.length&&n[0].focus():document.activeElement&&"INPUT"===document.activeElement.tagName||(i&&i.focus(),e.buttonset.scrollTop(0))}),this.items.not(this.more).on("selected.toolbar",function(t,i){t.stopPropagation(),e.handleSelected(t,i)}),this.more.on("keydown.toolbar",function(t){e.handleKeys(t)}).on("beforeopen.toolbar",function(){e.adjustMenuItemVisibility()}).on("selected.toolbar",function(t,i){t.stopPropagation(),e.handleSelected(t,i)}),this.more.on("show-submenu.toolbar",function(t,i){e.handleTransferToMenuButtonItem(t,i)}),this.element.on("updated.toolbar",function(t,i){t.stopPropagation(),e.updated(i)}).on("recalculate-buttons.toolbar",function(t,i){e.handleResize(i)}).on("scrollup.toolbar",function(){var t=e.element.parents(".tab-container.module-tabs");t.length&&t.scrollTop(0)}),$("body").on("resize.toolbar-".concat(this.id),function(){e.handleResize()}),this.handleResize(),this},handleTransferToMenuButtonItem:function(e,t){var i=t.children("a").data("original-button");if(i){var n=i.data("popupmenu");!n||"function"!=typeof n.settings.beforeOpen||(n.callSource(e),this.buildMoreActionsMenuItem(i))}},handleSelected:function(e,t){var a,o,l,d,i=t.data("original-button");if(t.parent().is(".hidden, .is-disabled")||t.is("[readonly], [disabled]"))e.preventDefault();else{if(i&&i.length>0){if(a=i.listEvents(),o=this.element.listEvents(),this.setActiveButton(i),i.is("[data-popdown]")&&(d=i.data("popdown"),this.isItemOverflowed(i)&&(d.settings.trigger=this.more,d.updated())),i.attr("ng-click")||i.attr("data-ng-click"))return void i.trigger("click");for(var h=["click","touchend","touchcancel"],p=0;p<h.length;p++){var v=h[p];if(o&&o[v]&&o[v].delegateCount>0){var b=this.element,w=$.Event(v);return w.target=b.find(i)[0],void b.trigger(w)}if(a&&a[v]||i[0]["on".concat(v)])return void i.trigger(v)}return d=(l=i.parents(".popupmenu")).data("trigger"),l.length&&d instanceof $&&d.length?void d.triggerHandler("selected",[i]):void this.triggerSelect(i)}this.triggerSelect(t)}},handleClick:function(e){return this.setActiveButton($(e.currentTarget)),this.triggerSelect($(e.currentTarget)),!1},handleKeys:function(e){var t=this,i=e.which,n=$(e.target),a=n.is(".btn-actions"),o=B.isRTL();(37===i&&n.is(":not(input)")||38===i&&n.is(":not(input.is-open)"))&&(e.preventDefault(),a?t.setActiveButton(o?t.getFirstVisibleButton():t.getLastVisibleButton()):t.navigate(o?1:-1)),(39===i&&n.is(":not(input)")||40===i&&n.is(":not(input.is-open)"))&&(e.preventDefault(),a?t.setActiveButton(o?t.getLastVisibleButton():t.getFirstVisibleButton()):t.navigate(o?-1:1))},handleResize:function(e){for(var t=this.getButtonsetButtons(),i=0;i<t.length;i++)t[i].removeClass("is-overflowed");this.settings.resizeContainers&&this.sizeContainers(e?e.title:void 0,e?e.buttonset:void 0),this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu())},sizeContainers:function(e,t){var i=this.element[0],n=this.title[0],a=this.buttonset[0],o=this.more[0];if(this.title&&this.title.length){if(this.element.is(":hidden"))return a.style.width="",n.style.width="",void i.classList.remove("do-resize");a.style.width="",n.style.width="",i.classList.contains("do-resize")||i.classList.add("do-resize");var p=$(i).getHiddenSize(),v=$(a).getHiddenSize(),b=$(n).getHiddenSize(),w=$(o).getHiddenSize(),T=parseInt(p.padding.left,10)+parseInt(p.padding.right,10);isNaN(w.width)&&(w.width=50),(isNaN(v.width)||v.width<0)&&(v.width=0);var z,A=this,M=void 0!==e&&!isNaN(e),L=void 0!==t&&!isNaN(t);this.cutoffTitle=!1;var _=function O(){if(M)return parseInt(e,10);if(!0===A.settings.favorButtonset){var j=q();return j=j>0?j:$(a).width(),$(window).width()-(T+j+w.width-10)}return b.scrollWidth}(),G=q();if(this.settings.favorButtonset)return _<74&&(this.cutoffTitle=!0,z=Math.abs(_-74),_=74,G-=z),a.style.width=k(G+2),n.style.width=k(_-2),this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu(a.offsetWidth<a.scrollWidth)),n.textContent&&_<st.textWidth(n.textContent.trim())&&(this.cutoffTitle=!0),void(_>st.textWidth($(n).find("h1").text().trim())&&(this.cutoffTitle=!1));G<0&&(this.cutoffTitle=!0,z=Math.abs(G-0),G=0,_-=z),n.style.width=k(_+2),a.style.width=k(G-2)}function k(j){return"".concat(j,"px")}function q(){var j;j=L?parseInt(t,10):!0===A.settings.favorButtonset?v.width:p.width,!L&&p.width-j<b.width&&(j-=T+(M?parseInt(e,10):b.scrollWidth)+w.width);var X=A.buttonsetItems.filter(".searchfield").data("searchfield");if(X){!0===X.settings.showGoButton&&(j=j+X.goButton.width()>j?j+X.goButton.width():j),X.settings.categories&&(j+=15);var fe=X.wrapper.width()-j;fe>0&&(j+=fe)}return j}},navigate:function(e){var a,t=this.items.filter(":visible:not(:disabled)"),n=t.index(this.activeButton)+e;n>=0&&n<t.length&&(a=t.eq(n)),n>=t.length&&(a=t.first()),-1===n&&(a=t.last()),this.isItemOverflowed(a)&&(a=this.more),this.setActiveButton(a)},getLastVisibleButton:function(){for(var t,n,e=$(this.items.get().reverse()).not(this.more),i=0;!t&&i<e.length;){if(n=$(e[i]),!this.isItemOverflowed(n)){t=n;break}i++}for((!t||0===t.length)&&(t=e.first());t.length&&t.is(".separator, *:disabled, *:hidden");)t=t.prev();return t},getFirstVisibleButton:function(){for(var e=0,t=this.items,i=t.eq(e);i.is(".separator, *:disabled, *:hidden");)e++,i=t.eq(e);return i},setActiveButton:function(e,t){if(e[0]!==this.activeButton[0]){var i=this;this.items.add(this.more).attr("tabindex","-1").removeClass("is-selected"),this.activeButton=function a(){if(e.is("a"))return n();var o=i.more.data("tooltip");return e[0]===i.more[0]?(o&&o.tooltip.is(":not(.hidden)")&&o.hide(),n()):i.isItemOverflowed(e)&&!e.is(".searchfield")?n():e}(),this.activeButton.addClass("is-selected").attr("tabindex","0"),!t&&this.activeButton[0]&&(this.activeButton[0].focus(),this.element.triggerHandler("navigate",[this.activeButton]))}function n(){return i.moreButtonIsDisabled()||!i.element.hasClass("has-more-button")?i.getLastVisibleButton():i.more}},triggerSelect:function(e){var t=$(e);t.is(this.more)||t.is(".btn-menu, li.submenu")||this.element.triggerHandler("selected",[t])},getButtonsetButtons:function(){for(var i,e=[],t=this.buttonsetItems,n=0;n<t.length;n++)void 0!==(i=t.eq(n)).data("action-button-link")&&i.is(":not(.searchfield)")&&e.push(i);return e},getVisibleButtons:function(e){var d,i=[],n=[];(!e||!Array.isArray(e))&&(e=this.getButtonsetButtons());for(var a=0;a<e.length;a++)e[a][0].classList.remove("is-overflowed");for(var l=0;l<e.length;l++)this.isItemOverflowed(d=e[l])?i.push(d):n.push(d);return{visible:n,hidden:i}},adjustMenuItemVisibility:function(e){var t="removeClass";function i(o,l){var d=o[0],h=o.data("action-button-link").parent()[0],p=o.isHiddenAtBreakpoint();if(l)return h.classList.add("hidden"),void d.classList.remove("is-overflowed");p||h.classList.remove("hidden"),d.classList.add("is-overflowed"),o.find(".icon").length&&(t="addClass")}e||(e=this.getVisibleButtons());for(var n=0;n<e.visible.length;n++)i(e.visible[n],!0);for(n=0;n<e.hidden.length;n++)i(e.hidden[n],!1);var a=0;this.moreMenu.find(".icon").each(function(){!$(this).parent().parent().hasClass("hidden")&&!$(this).hasClass("icon-dropdown")&&a++}),a>0&&(t="addClass"),this.moreMenu[t]("has-icons")},isItemOverflowed:function(e){if(this.moreButtonIsDisabled())return!1;if(!e||0===e.length)return!0;var t=this.buttonsetItems.filter(":not(.hidden)").index(e),i=this.settings.maxVisibleButtons;if(this.moreButtonIsVisible()&&(i-=1),this.title.length&&t>=i)return!0;this.buttonset.scrollTop()>0&&this.buttonset.scrollTop(0),e instanceof $&&e.length&&(e=e[0]);var n=e.classList,a=window.getComputedStyle(e);if(n.contains("btn-actions"))return!0;if(n.contains("searchfield")||"INPUT"===e.nodeName)return!1;if("none"===a.display)return!0;var o=B.isRTL(),l=e.getBoundingClientRect(),d=this.buttonset[0].getBoundingClientRect();return!0==l.bottom>=d.bottom||!0==(o?l.left<=d.left:l.right>=d.right)},moreButtonIsDisabled:function(){return this.element[0].classList.contains("no-actions-button")},hasNoMoreButton:function(){return ms(this.moreButtonIsDisabled,this.hasNoMoreButton).apply(this)},moreButtonIsVisible:function(){return this.element[0].classList.contains("has-more-button")},toggleMoreMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.moreButtonIsDisabled()){var n="removeClass";(this.moreMenu.children("li:not(.separator)").not(".hidden").length>0||e)&&(n="addClass"),this.element[n]("has-more-button");var a=this.more.data("popupmenu");if("removeClass"===n){if(!a)return;a.close();var o=a.menu.find("li:not(.separator)").children("a"),l=!1;if(o.add(this.more).each(function(){document.activeElement===this&&(l=!0)}),l){var d=this.getLastVisibleButton()[0];d&&d.focus()}}}},buildAriaLabel:function(){if(!this.element.attr("aria-label")){var e=1===this.element.closest(".header").length,t=this.element.attr("id")||"",i=this.element.children(".title"),n=this.element.prev("label"),a=this.element.prev(".label"),l=function o(){return e?$("header.header").find("h1").text():i.length?i.filter("div").text():n.length?n.text():a.length?a.text():"".concat(t," ").concat(B.translate("Toolbar"))}();this.element.attr("aria-label",l.replace(/\s+/g," ").trim())}},updated:function(e){this.settings.noSearchfieldReinvoke&&(this.keepSearchfield=!0),e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},enable:function(){this.element.prop("disabled",!1),this.items.prop("disabled",!1),this.more.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.items.prop("disabled",!0),this.more.prop("disabled",!0).data("popupmenu").close()},teardown:function(){var e=this;$("body").off("resize.toolbar-".concat(this.id));var t=void 0===this.moreMenu?[]:this.moreMenu.children("li");if(t.each(function(){e.teardownMoreActionsMenuItem($(this),!0)}),t.not(this.defaultMenuItems).remove(),delete this.defaultMenuItems,delete this.hasDefaultMenuItems,this.items.each(function(o,l){var d=$(l).data("tooltip");d&&"function"==typeof d.destroy&&d.destroy();var h=$(l).data("button");h&&"function"==typeof h.destroy&&h.destroy(),l.classList.remove("is-overflowed"),l.removeAttribute("tabindex")}),this.items.off(["keydown.".concat(na),"click.".concat(na),"focus.".concat(na),"blur.".concat(na),"close.".concat(na),"selected.".concat(na)].join(" ")),delete this.items,this.title&&this.title.length){var i=this.title.off("beforeshow.toolbar").data("tooltip");i&&"function"==typeof i.destroy&&i.destroy(),this.title[0].style.width="",delete this.cutoffTitle,delete this.title}if(this.buttonsetItems&&delete this.buttonsetItems,this.buttonset.children(".searchfield-wrapper").length)if(this.settings.noSearchfieldReinvoke||this.keepSearchfield)this.keepSearchfield&&delete this.keepSearchfield;else{var n=this.buttonset.children(".searchfield-wrapper").children(".searchfield"),a=n.data("searchfield");a&&"function"==typeof a.destroy&&n.data("searchfield").destroy()}return this.buttonset&&this.buttonset.length&&(this.buttonset[0].style.width="",delete this.buttonset),this.moreMenu&&delete this.moreMenu,this.more.length&&void 0!==this.more.data("popupmenu")&&(this.more.off(["keydown.".concat(na),"beforeopen.".concat(na),"selected.".concat(na),"show-submenu.".concat(na)].join(" ")),this.more.data("popupmenu").destroy(),delete this.more),this.activeButton&&delete this.activeButton,this.element.off(["updated.".concat(na),"recalculate-buttons.".concat(na),"scrollup.".concat(na)].join(" ")),this.element[0].classList.remove("do-resize"),this.element.removeAttr("role").removeAttr("aria-label"),this},teardownMoreActionsMenuItem:function(e,t){var i=this,n=$(e),a=n.children("a"),o=a.data("original-button");a.off("mousedown.toolbar click.toolbar touchend.toolbar touchcancel.toolbar");var d,l=n.find(".icon");l.length&&l.remove(),n.is(".submenu")&&(d=n.children(".wrapper").children(".popupmenu")).children("li").each(function(){i.teardownMoreActionsMenuItem($(this),!0)}),o&&o.length&&($.removeData(a[0],"original-button"),$.removeData(o[0],"action-button-link"),a.remove(),d&&d.off().parent(".wrapper").off().remove(),t&&n.remove())},destroy:function(){this.teardown(),$.removeData(this.element[0],na)}},$.fn.toolbar=function(s){return this.each(function(){var e=$.data(this,na);e?e.updated(s):e=$.data(this,na,new Rd(this,s))})};var Gi="editor",Tl=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code"],Sc={buttons:{editor:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","generative","separator","source"],source:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","generative","separator","visual"]},excludeButtons:{editor:["backColor","generative"],source:["backColor","generative"]},rows:{editor:null,source:null},delay:200,placeholder:null,pasteAsPlainText:!1,anchor:{url:"http://www.example.com",class:"hyperlink",target:"NewWindow",isClickable:!1,showIsClickable:!1},image:{url:"/images/placeholder-80x80.png"},onLinkClick:null,showHtmlView:!1,preview:!1,paragraphSeparator:"p",useFlexToolbar:!0,useSourceFormatter:!1,formatterTabsize:4,fontpickerSettings:{popupmenuSettings:{showArrow:!1,offset:{y:0}}},attributes:null};function Na(s,e){this.settings=H.mergeSettings(s,e,Sc),null!=e&&e?.buttons&&(this.settings.buttons=e.buttons),null!=e&&e?.excludeButtons&&(this.settings.excludeButtons=e.excludeButtons),this.element=$(s),this.init()}Na.prototype={get toolbarAPI(){var s;return this.toolbar&&this.toolbar.length&&(s=this.toolbar.data(this.settings.useFlexToolbar?"toolbar-flex":"toolbar")),s},init:function(){var e=this;if(this.id="".concat(H.uniqueId(this.element,"editor"),"-id"),this.container=this.element.parent(".field, .field-short").addClass("editor-container"),this.label=this.element.prevAll(".label").first(),!this.previewRendered&&(this.element.hasClass("is-preview")||this.settings.preview))return this.container[0].classList.add("is-preview"),this.element[0].classList.remove("is-disabled","is-readonly","is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),void this.element[0].removeAttribute("role");var t=this.settings;if(t.anchor=$.extend({},Sc.anchor,t.anchor),t.image=$.extend({},Sc.image,t.image),t.anchor.defaultUrl=t.anchor.url,t.anchor.defaultClass=t.anchor.class,t.anchor.defaultTargetText=t.anchor.target,t.anchor.defaultIsClickable=t.anchor.isClickable,t.anchor.targets=t.anchor.targets||{SameWindow:"",NewWindow:"_blank"},$.each(this.settings.anchor.targets,function(d,h){e.settings.anchor.defaultTargetText.toLowerCase()===d.toLowerCase()&&(e.settings.anchor.target=h,e.settings.anchor.defaultTarget=h)}),(this.settings.firstHeader||this.settings.secondHeader)&&(Array.isArray(this.settings.fontpickerSettings.styles)||(this.settings.fontpickerSettings.styles=[]),this.settings.fontpickerSettings.styles.length||this.settings.fontpickerSettings.styles.push(new Wi("legacyDefault","Default")),this.settings.firstHeader&&(gi("`fontpickerSettings.styles` setting","`firstHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new Wi("legacyHeader1","Header 1",this.settings.firstHeader)),delete this.settings.firstHeader),this.settings.secondHeader&&(gi("`fontpickerSettings.styles` setting","`secondHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new Wi("legacyHeader2","Header 2",this.settings.secondHeader)),delete this.settings.secondHeader)),t.buttons&&t.buttons.editor){for(var i=!1,n=[new Wi("default","Default","p")],a=t.buttons.editor.filter(function(d){return"header"===d.substr(0,6)}),o=0;o<a.length;o++){var l=a[o].substr(6,1);i=!0,n.push(new Wi("header".concat(l),"Header ".concat(l),"h".concat(l)))}"separator"===t.buttons.editor[0]&&t.buttons.editor.splice(0,1),i&&(t.buttons.editor=t.buttons.editor.filter(function(d){return"header"!==d.substr(0,6)}),t.fontpickerSettings={styles:n}),i&&(t.buttons.editor=["fontPicker"].concat(t.buttons.editor))}return t.anchor.defaultTarget||(t.anchor.target&&$.trim(t.anchor.target).length?t.anchor.defaultTarget=t.anchor.target:(t.anchor.defaultTargetText=B.translate("SameWindow"),t.anchor.defaultTarget=t.anchor.targets[t.anchor.defaultTargetText])),this.setup(),"string"==typeof t.paragraphSeparator&&/^(p|br|div)$/.test(t.paragraphSeparator)&&document.execCommand("defaultParagraphSeparator",!1,t.paragraphSeparator),this.element.hasClass("is-readonly")&&this.readonly(),this.settings.showHtmlView&&this.toggleSource(),this.setRowsHeight(),this},setup:function(){this.isActive=!0,this.modals={},this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().setupKeyboardEvents().onPasteTriggered()},initElements:function(){return this.element.attr({contentEditable:!0,"aria-multiline":!0,role:"textbox","aria-labelledby":this.container.find(".label").length?this.container.find(".label")[0].id:"no-id"}),this.element.attr("data-editor",!0),this.initTextarea(),this.bindParagraphCreation().bindTab(),this.createToolbar().bindButtons().bindModals().bindAnchorPreview(),this},sourceViewActive:function(){return this.element.hasClass("source-view-active")},setPlaceholders:function(){return this.settings.placeholder?(this.element.attr("placeholder",this.settings.placeholder),this):this},getCurrentElement:function(){return this.sourceViewActive()?this.textarea:this.element},bindSelection:function(e){var t=this;clearTimeout(e),e=setTimeout(function(){t.checkSelection()},this.settings.delay)},bindSelect:function(){var e=this;return this.getCurrentElement().on("mouseup.editor",function(){e.bindSelection("")}),this},bindParagraphCreation:function(){var e=this;return this.getCurrentElement().on("keyup.editor",function(n){var a=e.getSelectionStart(),o=a.tagName.toLowerCase();if(a&&a.getAttribute("data-editor")&&0===a.children.length&&document.execCommand("formatBlock",!1,"p"),13===n.which){if(a=e.getSelectionStart(),"blockquote"===o)return;"li"!==o&&!e.isListItemChild(a)&&(n.shiftKey||document.execCommand("formatBlock",!1,"p"),"a"===o&&document.execCommand("unlink",!1,null))}e.bindSelection("")}),this},bindTab:function(){var e=this;return this.getCurrentElement().on("keydown.editor",function(i){if(9===i.which){var n=e.getSelectionStart();if(!n||!n.tagName)return;var a=n.tagName.toLowerCase();"pre"===a&&(i.preventDefault(),document.execCommand("insertHtml",null,"    ")),"li"===a&&(i.preventDefault(),document.execCommand(i.shiftKey?"outdent":"indent",i))}if(8===i.which){var o=e.element.text().toString().trim().replace(/\s/g,"");window.getSelection().toString().trim().replace(/\s/g,"")===o&&e.element.html("")}}),this},setExcludedButtons:function(){var a,o,l,t=function(a,o){var l=-1,d=0;return a.filter(function(h,p){var v=!0;return o.indexOf(h)>-1&&"separator"!==h?(d++,v=!1):"separator"===h&&p-d-1===l&&(d=0,v=!1),"separator"===h&&(l=p),v})};return o=(a=this.settings).buttons,l=a.excludeButtons,this.sourceViewActive()?l&&l.source&&l.source.length?t(o.source,l.source):o.source:l&&l.editor&&l.editor.length?t(o.editor,l.editor):o.editor},createToolbar:function(){var e=this;if(this.toolbar)return this;var t=[this.settings.useFlexToolbar?"flex-toolbar":"toolbar","editor-toolbar","formatter-toolbar"].join(" "),i="",n="";this.settings.useFlexToolbar&&(i="toolbar-section ",n='<div class="toolbar-section more">\n        <button class="btn-actions btn-editor">\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-more"></use>\n          </svg>\n        </button>\n      </div>');for(var a=this.setExcludedButtons(),o="",l=0,d=a.length;l<d;l+=1){var h=this.buttonTemplate(a[l]);h&&this.element.hasClass("source-view-active")&&"visual"!==a[l]&&(h=h.replace('type="button"','type="button" disabled')),h&&(o+=h)}var p="";this.settings.attributes&&(p=this.getAutomationAttributes("-editor-toolbar"),p=JSON.stringify(p),p=' data-options=\'{"attributes": '.concat(p,"}'"));var v='<div class="'.concat(t,'" data-init="false" id="editor-toolbar-').concat(this.id,'"').concat(p,'>\n      <div class="').concat(i,'buttonset">\n        ').concat(o,"\n      </div>\n      ").concat(n,"\n    </div>");this.toolbar=this.element.parent().find(".icon-dirty").length?$(v).insertBefore(this.element.parent().find(".icon-dirty")):$(v).insertBefore(this.sourceViewActive()?this.element.prev():this.element);var b=this.toolbar.find('[data-action="fontStyle"]').first();if(b&&b.length){if(this.settings.attributes){var w=this.getAutomationAttributes("-editor-fontpicker");"object"===rt(this.settings.fontpickerSettings.popupmenuSettings)?this.settings.fontpickerSettings.popupmenuSettings.attributes=w:this.settings.fontpickerSettings.popupmenuSettings||(this.settings.fontpickerSettings.popupmenuSettings={attributes:w})}b.fontpicker(this.settings.fontpickerSettings),this.fontPickerElem=b,this.fontPickerElem.tooltip({placementOpts:{x:40}})}var T=this.toolbar.find('[data-action="foreColor"], [data-action="backColor"]');return T.colorpicker({placeIn:"editor",popupmenuSettings:{offset:{y:0},showArrow:!1}}),$(".trigger",T).off("click.colorpicker"),this.toolbar[this.settings.useFlexToolbar?"toolbarflex":"toolbar"]({moreMenuSettings:{offset:{y:0},showArrow:!1}}),this.toolbar.find("button[title]").tooltip(),T.on("beforeopen.editor",function(k,A){var M=e.toolbar.data("toolbar")||e.toolbar.data("toolbar-flex");M&&M.overflowedItems.forEach(function(L){"colorpicker"===L.type&&A&&A.parent(".popupmenu-wrapper").off("afterplace.editor").one("afterplace.editor",function(z,q){if(typeof q.width>"u"){var O,_,X=(((null===(O=q.container)||void 0===O?void 0:O?.outerWidth())||-1)-((null===(_=q.element)||void 0===_?void 0:_?.outerWidth())||-1))/2;X>-1&&q.element.css("left","".concat(X,"px"))}})})}),this},getAutomationAttributes:function(e){var t=this,i=this.settings,n=i.attributes;if(i.attributes&&"string"==typeof e&&""!==e)if(Array.isArray(i.attributes))n=[],i.attributes.forEach(function(o){var l="function"==typeof o.value?o.value(t):o.value;n.push({name:o.name,value:l+e})});else{var a="function"==typeof i.attributes.value?i.attributes.value(this):i.attributes.value;n={name:i.attributes.name,value:a+e}}return n},switchToolbars:function(){this.destroyToolbar(),this.setupTextareaEvents(),this.createToolbar(),this.bindButtons().bindModals().bindAnchorPreview(),this.bindSelect().bindPaste().setupKeyboardEvents(),this.toolbar.find("button").button()},initTextarea:function(){var e=this;return this.textarea&&!this.settings.showHtmlView?this:(this.textarea=this.createTextarea(),this.textarea.text(Fe.sanitizeHTML(this.element.html().toString())),this.container.on("input.editor keyup.editor",".editor",Xn(function(i){72!==i.keyCode&&!i.ctrlKey&&$(".modal.is-visible").length<1&&(e.textarea.text(Fe.sanitizeHTML(e.element.html().toString())),e.resetEmptyEditor(i),e.element.trigger("change"))},400)),$("html").on("themechanged.".concat(Gi),function(){e.setRowsHeight(),e.sourceView.hasClass("hidden")||e.adjustSourceLineNumbers()}),this.setupTextareaEvents(),this.textarea)},setRowsHeight:function(){var e,t,n,a,i=Et.currentTheme.id&&(Et.currentTheme.id.indexOf("uplift")>-1||Et.currentTheme.id.indexOf("new")>-1);null!==(e=this.settings)&&void 0!==e&&null!==(e=e?.rows)&&void 0!==e&&e?.editor&&this.element.height(Number(null===(n=this.settings)||void 0===n||null===(n=n?.rows)||void 0===n?void 0:n?.editor)*(i?26:22.2)),null!==(t=this.settings)&&void 0!==t&&null!==(t=t?.rows)&&void 0!==t&&t?.source&&this.element.parent().find(".editor-source").height(26*Number(null===(a=this.settings)||void 0===a||null===(a=a?.rows)||void 0===a?void 0:a?.source)+15)},resetEmptyEditor:function(){this.savedSelection=this.saveSelection();var e="p"===this.settings.paragraphSeparator?"p":"div",t=this.element.html().toString().trim();("<br>"===(t=this.element.html().toString().trim())||t==="<".concat(e,"><br></").concat(e,">"))&&this.element.html(""),this.element.contents().filter(function(){return 3===this.nodeType&&""!==this.textContent.trim()}).wrap("<".concat(e,"></").concat(e,">")),t=this.element.html().toString().trim(),this.textarea.html(Fe.sanitizeHTML(t));var i=this.saveSelection(),n=function(h){return"number"==typeof h},o=function(h){return function(h){return h&&h[0]&&n(h[0].startOffset)&&n(h[0].endOffset)}(h)?{start:h[0].startOffset,end:h[0].endOffset}:null},l_old=o(this.savedSelection),l_new=o(i);null!==l_old&&null!==l_new&&l_old.start===l_new.start&&l_old.end===l_new.end||this.restoreSelection(this.savedSelection)},removeWhiteSpace:function(){var e=this.element.html().toString().trim();((e||"").match(/>\s+</g)||[]).length>0&&this.element.html(e.replace(/>\s+</g,"><"))},orderedListTypeStyling:function(){var e=this.getCurrentElement(),t=this.element;switch(e.find("ol").attr("type")){case"a":t.addClass("type-l-alpha"),t.removeClass("type-u-alpha");break;case"A":t.addClass("type-u-alpha"),t.removeClass("type-l-alpha");break;case"i":t.addClass("type-l-roman"),t.removeClass("type-u-roman");break;case"I":t.addClass("type-u-roman"),t.removeClass("type-l-roman")}},createTextarea:function(){this.sourceView=$("<div></div>").attr({class:"editor-source editable hidden",id:"editor-source-".concat(this.id)}).insertBefore(this.element),$("<ul></ul>").addClass("line-numbers").appendTo(this.sourceView);var e=$('<div class="text-container"></div>').appendTo(this.sourceView),t="source-textarea-".concat($('[id^="source-textarea-"]').length+1),i="".concat(this.element.prev(".label").addClass("audible").text()," - HTML Source View");return $('<label class="audible" for="'.concat(t,'">').concat(i,"</label>")).appendTo(e),$('<textarea id="'.concat(t,'" data-options="{ characterCounter: false }" class="editable"></textarea>')).appendTo(e)},triggerClick:function(e,t){$('button[data-action="'.concat(t,'"]'),this.toolbar).trigger("click.editor")},setupKeyboardEvents:function(){var e=this,t=this.getCurrentElement(),i={b:66,e:69,h:72,i:73,l:76,bl:55,n:56,q:81,r:82,u:85,h3:51,h4:52,space:32,sv:192,g:71};return t.on("keydown.editor",function(n){switch(n=n||window.event,i.charCode=n.which?n.which:!!n.keyCode&&n.keyCode,n.ctrlKey&&i.charCode){case i.h3:e.triggerClick(n,"append-".concat(e.settings.firstHeader));break;case i.h4:e.triggerClick(n,"append-".concat(e.settings.secondHeader));break;case i.b:e.triggerClick(n,"bold"),n.preventDefault();break;case i.e:e.triggerClick(n,"justifyCenter");break;case i.h:e.triggerClick(n,"anchor"),n.preventDefault();break;case i.i:e.triggerClick(n,n.shiftKey?"image":"italic"),n.shiftKey||n.preventDefault();break;case i.bl:n.shiftKey&&e.triggerClick(n,"insertunorderedlist"),n.preventDefault();break;case i.l:n.shiftKey||e.triggerClick(n,"justifyLeft"),n.preventDefault();break;case i.n:n.shiftKey&&e.triggerClick(n,"insertorderedlist");break;case i.q:e.triggerClick(n,"append-blockquote");break;case i.r:e.triggerClick(n,"justifyRight");break;case i.u:e.triggerClick(n,"underline"),n.preventDefault();break;case i.space:e.triggerClick(n,"clearFormatting");break;case i.g:e.triggerClick(n,"generative");break;case i.sv:e.triggerClick(n,t===e.element?"source":"visual")}}),this.element.on("mousedown.editor","a",function(n){var a=$(this).attr("href");"firefox"!==xe.browser.name&&"mac"===xe.os.name&&(n.metaKey||n.ctrlKey)&&(window.open(a,"_blank"),n.preventDefault())}),this.element.on("updated.editor",function(){e.updated()}),this},setupTextareaEvents:function(){var e=this;return this.textarea.off(".editor").on("input.editor keyup.editor",function(){e.sourceView.hasClass("hidden")||e.adjustSourceLineNumbers()}).on("focus.editor",function(){e.sourceView.addClass("is-focused")}).on("blur.editor",function(t){e.sourceView.removeClass("is-focused"),e.element.empty().html(Fe.sanitizeHTML(e.textarea.val())),e.element.data("validate")&&e.element.data("validate").validate(e.element,!0,t)}),this},adjustSourceLineNumbers:function(){var e=this.textarea.parent(),t=parseInt(getComputedStyle(this.textarea[0]).lineHeight,10),i=this.textarea.innerHeight()-this.textarea.height();this.textarea[0].style.height="";var n=this.textarea[0].scrollHeight,a=Math.floor((n-i)/t),o=this.sourceView.find(".line-numbers"),l=o.find("li").length,d="",h=0;if(!this.lineNumbers||a!==this.lineNumbers){if(this.lineNumbers)if(this.lineNumbers<a){for(;h<a-this.lineNumbers;)d+='<li role="presentation"><span>'.concat(l+h+1,"</span></li>"),h++;o.append(d)}else this.lineNumbers>a&&(h=this.lineNumbers-a,o.find("li").slice(-h).remove());else{for(this.lineNumbers=a;h<this.lineNumbers;)d+='<li role="presentation"><span>'.concat(h+1,"</span></li>"),h++;o.append(d)}this.lineNumbers=a}e[0].style.width="calc(100% - ".concat(o.outerWidth()+2,"px)"),n===this.textarea[0].scrollHeight?this.textarea[0].style.height="".concat(o[0].scrollHeight-13,"px"):this.adjustSourceLineNumbers()},wrapTextInTags:function(e,t,i){var n,a;switch(i){case"bold":n=["<b>","</b>"];break;case"italic":n=["<i>","</i>"];break;case"underline":n=["<u>","</u>"];break;case"strikethrough":n=["<strike>","</strike>"];break;case"append-blockquote":n=["<blockquote>","</blockquote>"];break;default:n=["",""]}if("anchor"===i){var o=$('<a href="'.concat(e,'">').concat(t,"</a>"));this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&o.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&o.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?o.attr("contenteditable",!1):o.removeAttr("contenteditable"),a=o[0].outerHTML}else a=n[0]+e+t+n[1];return a},insertTextAreaContent:function(e,t){var a,o,l,d,i=this.textarea[0],n=i.value;e=e||"",document.selection&&"TEXTAREA"===i.tagName?($(i).focus(),(a=document.selection.createRange()).text=this.wrapTextInTags(e,a.text,t),$(i).focus()):i.selectionStart||"0"===i.selectionStart?(d=i.scrollTop,a=this.wrapTextInTags(e,n.substring(o=i.selectionStart,l=i.selectionEnd),t),i.value=n.substring(0,o)+a+n.substring(l,n.length),$(i).focus(),i.selectionStart=o+a.length,i.selectionEnd=o+a.length,i.scrollTop=d):(i.value+=this.wrapTextInTags(e,i.value,t),$(i).focus(),i.value=i.value)},buttonTemplate:function(e){var t=this.getButtonLabels(this.settings.buttonLabels);return{bold:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ToggleBold"),'" data-action="bold" data-element="b">').concat(t.bold,"</button>"),italic:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ToggleItalic"),'" data-action="italic" data-element="i">').concat(t.italic,"</button>"),underline:'<button type="button" class="btn btn-editor underline" title="'.concat(B.translate("ToggleUnderline"),'" data-action="underline" data-element="u">').concat(t.underline,"</button>"),strikethrough:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("StrikeThrough"),'" data-action="strikethrough" data-element="strike">').concat(t.strikethrough,"</button>"),foreColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(B.translate("TextColor"),'" data-action="foreColor" data-element="foreColor" data-init="false"><span class="swatch"></span>').concat(t.foreColor,"</button>"),backColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(B.translate("BackgroundColor"),'" data-action="backColor" data-element="backColor">').concat(t.backColor,"</button>"),superscript:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("Superscript"),'" data-action="superscript" data-element="sup">').concat(t.superscript,"</button>"),subscript:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("Subscript"),'" data-action="subscript" data-element="sub">').concat(t.subscript,"</button>"),separator:'<div class="separator"></div>',anchor:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("InsertLink"),'" data-action="anchor" data-modal="modal-url-').concat(this.id,'" data-element="a">').concat(t.anchor,"</button>"),image:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("InsertImage"),'" data-action="image" data-modal="modal-image-').concat(this.id,'" data-element="img">').concat(t.image,"</button>"),header1:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ToggleH3"),'" data-action="append-').concat(this.settings.firstHeader,'" data-element="').concat(this.settings.firstHeader,'">').concat(t.header1,"</button>"),header2:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ToggleH4"),'" data-action="append-').concat(this.settings.secondHeader,'" data-element="').concat(this.settings.secondHeader,'">').concat(t.header2,"</button>"),quote:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("Blockquote"),'" data-action="append-blockquote" data-element="blockquote">').concat(t.quote,"</button>"),orderedlist:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("OrderedList"),'" data-action="insertorderedlist" data-element="ol">').concat(t.orderedlist,"</button>"),unorderedlist:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("UnorderedList"),'" data-action="insertunorderedlist" data-element="ul">').concat(t.unorderedlist,"</button>"),fontPicker:'<button type="button" class="btn btn-editor fontpicker" title="'.concat(B.translate("ChooseFont"),'" data-action="fontStyle" data-init="false"><span>',"FontPicker","</span></button>"),justifyLeft:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("JustifyLeft"),'" data-action="justifyLeft" >').concat(t.justifyLeft,"</button>"),justifyCenter:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("JustifyCenter"),'" data-action="justifyCenter">').concat(t.justifyCenter,"</button>"),justifyRight:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("JustifyRight"),'" data-action="justifyRight" >').concat(t.justifyRight,"</button>"),clearFormatting:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ClearFormatting"),'" data-action="clearFormatting" >').concat(t.clearFormatting,"</button>"),generative:'<button type="button" class="btn btn-editor btn-generative" title="'.concat(B.translate("GenerateWithAI"),'" data-action="generative">').concat(t.generative,"</button>"),source:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ViewSource"),'" data-action="source" >').concat(t.source,"</button>"),visual:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ViewVisual"),'" data-action="visual" >').concat(t.visual,"</button>")}[e]||!1},getIcon:function(e,t,i){return'<span class="audible">'.concat(B.translate(e),"</span>").concat($.createIcon({classes:i||"",icon:t}))},getButtonLabels:function(e){var i,t={bold:this.getIcon("Bold","bold"),italic:this.getIcon("Italic","italic"),underline:this.getIcon("Underline","underline"),superscript:'<span aria-hidden="true"><b>x<sup>1</sup></b></span>',subscript:'<span aria-hidden="true"><b>x<sub>1</sub></b></span>',strikethrough:this.getIcon("StrikeThrough","strike-through"),foreColor:this.getIcon("TextColor","fore-color"),backColor:this.getIcon("BackgroundColor","back-color"),anchor:this.getIcon("InsertLink","link"),image:this.getIcon("InsertImage","insert-image"),header1:this.getIcon("ToggleH3","h3"),header2:this.getIcon("ToggleH4","h4"),quote:this.getIcon("Blockquote","quote"),orderedlist:this.getIcon("OrderedList","number-list"),unorderedlist:this.getIcon("UnorderedList","bullet-list"),pre:'<span aria-hidden="true"><b>0101</b></span>',indent:'<span aria-hidden="true"><b>&rarr;</b></span>',outdent:'<span aria-hidden="true"><b>&larr;</b></span>',justifyLeft:this.getIcon("JustifyLeft","left-text-align"),justifyCenter:this.getIcon("JustifyCenter","center-text"),justifyRight:this.getIcon("JustifyRight","right-text-align"),clearFormatting:this.getIcon("ClearFormatting","clear-formatting"),generative:this.getIcon("GenerateWithAI","insights-smart-panel"),source:this.getIcon("ViewSource","html","html-icon"),visual:this.getIcon("ViewVisual","visual","visual-icon")};if("object"===rt(e)&&(i=e),"object"===rt(i))for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t},activateButton:function(e){this.toolbar.find('[data-element="'.concat(e,'"]')).addClass("is-active")},bindButtons:function(){var e=this,t=this;function i(n,a){var o=a instanceof xc?$(a.element):$(n.target);if(!o.is(".btn-actions")){var l=o.attr("data-action"),d=t.getCurrentElement();if(n.preventDefault(),d.focus(),t.checkSelection(),t.sourceViewActive()||o.toggleClass("is-active"),l&&t.execAction(l,n),("ie"===xe.browser.name||xe.browser.isEdge())&&d.trigger("change"),o[0].classList.contains("longpress-target"))return!1}}return this.settings.useFlexToolbar?(this.toolbar.on("selected.editor",i),this.toolbar.on("click.editor",".colorpicker-editor-button",i)):this.toolbar.on("click.editor","button",i),this.fontPickerElem&&this.fontPickerElem.on("font-selected",function(n,a){e.execFormatBlock(a.tagName)}),this},bindModals:function(){var e=this;return this.modals={url:this.createURLModal(),image:this.createImageModal()},$('[name="em-target-'.concat(this.id,'"]')).dropdown(),$("#modal-url-".concat(this.id,", #modal-image-").concat(this.id)).modal({noRefocus:!1}).on("beforeopen",function(){e.savedSelection=e.saveSelection(),$(this).attr("id"),"modal-url-".concat(e.id)}).off("open").on("open",function(){var i=xe.features.touch,n=$(this).attr("id"),a=$("input:first",this),o=$(".modal-buttonset .btn-modal-primary",this);$('[name="em-url-'.concat(e.id,'"]')).val(e.settings.anchor.url),$('[name="em-class-'.concat(e.id,'"]')).val(e.settings.anchor.class),$('[name="em-target-'.concat(e.id,'"]')).val(e.settings.anchor.target).trigger("updated"),$('[name="em-isclickable-'.concat(this.id,'"]')).prop("checked",e.settings.anchor.isClickable),setTimeout(function(){i&&n==="modal-image-".concat(e.id)?o.focus():a.focus().select()},10)}).off("beforeclose").on("beforeclose",function(){var i=$(this).is(".editor-modal-image")?"image":"anchor";if(e.toolbar){var n=e.toolbar.find('[data-action="'.concat(i,'"]')),a=$(this).data("modal");n&&a&&(a.settings.noRefocus=e.isBtnOverflowedItem(n))}}).off("close").on("close",function(i,n){if(e.restoreSelection(e.savedSelection),!n)if($(this).attr("id")==="modal-url-".concat(e.id)){var a=$(e.findElementInSelection("a",e.element[0]));a.length?e.updateCurrentLink(a):e.createLink($('[name="em-url-'.concat(e.id,'"]'),this))}else e.insertImage(e.settings.attributes?e.settings.attributes.length>1?$('[data-automation-id="'.concat(e.settings.attributes[e.settings.attributes.length-1].value,'-editor-modal-input0"')).val():$("input[name=image-".concat(e.id,"]")).val():$('input[id*="image-editor"]').val())}),this},createURLModal:function(){var e=this,t=this.settings,i=$("#modal-url-".concat(this.id));if(i.length>0)return i;var n="",a=!0;$.each(t.anchor.targets,function(v,b){n+='<option value="'.concat(b,'">').concat(B.translate(v),"</option>"),e.settings.anchor.defaultTargetText.toLowerCase()===v.toLowerCase()&&(a=!1)}),a&&(n+='<option value="'.concat(t.anchor.target,'">').concat(t.anchor.target,"</option>"));var o,l="";t.attributes&&(o=this.getAutomationAttributes("-editor-modal"),l=JSON.stringify(o),l=' data-options=\'{"attributes": '.concat(l,"}'"));var d=$('<div class="modal editor-modal-url" id="modal-url-'.concat(this.id,'"></div>')).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(B.translate("InsertLink"),'</h1>\n        </div>\n        <div class="modal-body">\n          <div class="field">\n            <label for="em-url-').concat(this.id,'" class="required">').concat(B.translate("Url"),'</label>\n            <input id="em-url-').concat(this.id,'" name="em-url-').concat(this.id,'" data-validate="required" type="text" value="').concat(t.anchor.url,'">\n          </div>\n          ').concat(t.anchor.showIsClickable?'<div class="field">\n            <input type="checkbox" class="checkbox" id="em-isclickable-'.concat(this.id,'" name="em-isclickable-').concat(this.id,'" checked="').concat(t.anchor.isClickable,'">\n            <label for="em-isclickable-').concat(this.id,'" class="checkbox-label"> ').concat(B.translate("Clickable"),"</label>\n          </div>"):"",'\n          <div class="field">\n            <label for="em-class-').concat(this.id,'">').concat(B.translate("CssClass"),'</label>\n            <input id="em-class-').concat(this.id,'" name="em-class-').concat(this.id,'" type="text" value="').concat(t.anchor.class,'">\n          </div>\n          <div class="field">\n            <label for="em-target-').concat(this.id,'" class="label"> ').concat(B.translate("Target"),'</label>\n            <select id="em-target-').concat(this.id,'" name="em-target-').concat(this.id,'" class="dropdown"').concat(l,">\n              ").concat(n,'\n            </select>\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel"> ').concat(B.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary"> ').concat(B.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>"));if(t.attributes){var h=[].slice.call(d[0].querySelectorAll('[type="text"]')),p=[].slice.call(d[0].querySelectorAll("button"));h.forEach(function(v,b){return H.addAttributes($(v),e,o,"input".concat(b),!0)}),p.forEach(function(v,b){return H.addAttributes($(v),e,o,"button".concat(b),!0)})}return d.appendTo("body")},createImageModal:function(){var e=this,t=$("#modal-image-".concat(this.id));if(t.length>0)return t;var i=$('<div class="modal editor-modal-image" id="modal-image-'.concat(this.id,"\"></div>'")).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(B.translate("InsertImage"),'</h1>\n        </div>\n        <div class="modal-body no-scroll">\n          <div class="field">\n            <label for="image-').concat(this.id,'" class="required">').concat(B.translate("Url"),'</label>\n            <input id="image-').concat(this.id,'" name="image-').concat(this.id,'" type="text" data-validate="required" value="').concat(this.settings.image.url,'">\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel">\n              ').concat(B.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary">\n              ').concat(B.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>"));if(this.settings.attributes){var n=this.getAutomationAttributes("-editor-modal"),a=[].slice.call(i[0].querySelectorAll('[type="text"]')),o=[].slice.call(i[0].querySelectorAll("button"));a.forEach(function(l,d){return H.addAttributes($(l),e,n,"input".concat(d),!0)}),o.forEach(function(l,d){return H.addAttributes($(l),e,n,"button".concat(d),!0)})}return i.appendTo("body")},bindAnchorPreview:function(){this.element.find("a").tooltip({content:function(){return $(this).attr("href")}})},updateCurrentLink:function(e){var t=Fe.stripTags(document.querySelector('[name="em-url-'.concat(this.id,'"]')).value),i=Fe.stripTags(document.querySelector('[name="em-class-'.concat(this.id,'"]')).value),n=Fe.stripTags(document.querySelector('[name="em-target-'.concat(this.id,'"]')).value),a=this.settings.anchor.showIsClickable?document.querySelector('[name="em-isclickable-'.concat(this.id,'"]')).checked:this.settings.anchor.isClickable;e&&(e[0].setAttribute("href",this.fixLinkFormat(t&&$.trim(t).length?t:this.settings.anchor.defaultUrl)),e[0].setAttribute("class",i&&$.trim(i).length?i:this.settings.anchor.defaultClass),e[0].setAttribute("data-url",(t&&$.trim(t).length?t:this.settings.anchor.defaultUrl).replace("http://",""))),a?e.attr("contenteditable",!1):e.removeAttr("contenteditable"),n&&$.trim(n).length?e.attr("target",n):e.removeAttr("target")},createLink:function(e){var t=this;this.restoreSelection(this.savedSelection);var i=Fe.stripTags(this.fixLinkFormat(e[0].value));e.val(i),this.settings.anchor.url=e.val(),this.settings.anchor.class=document.querySelector('[name="em-class-'.concat(this.id,'"]')).value,this.settings.anchor.target=document.querySelector('[name="em-target-'.concat(this.id,'"]')).value,this.settings.anchor.isClickable=this.settings.anchor.showIsClickable?document.querySelector('[name="em-isclickable-'.concat(this.id,'"]')).checked:this.settings.anchor.isClickable;var n=$('<a data-url="'.concat(i,'" href="').concat(i,'">').concat(i,"</a>"));if(this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&n.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&n.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?n.attr("contenteditable",!1):n.removeAttr("contenteditable"),this.sourceViewActive())this.insertTextAreaContent(e.val(),"anchor");else{var a,o,l,d,h;if(!this.selection.isCollapsed||xe.browser.isIE11()){if(window.getSelection&&(a=window.getSelection()).getRangeAt&&a.rangeCount){o=a.getRangeAt(0),""!==(d="".concat(o)).trim()&&n.html(d);for(var p=(l=o.commonAncestorContainer.children)?l.length:0,v=0;v<p;v++){var b=l[v];b instanceof HTMLImageElement&&(h=b)}h&&n.html(h.outerHTML),o.deleteContents();var w=document.createElement("div");w.innerHTML=n[0].outerHTML;for(var k,A,T=document.createDocumentFragment();k=w.firstChild;)A=T.appendChild(k);o.insertNode(T),A&&((o=o.cloneRange()).setStartAfter(A),o.collapse(!0),a.removeAllRanges(),a.addRange(o))}}else document.execCommand("insertHtml",null,n[0].outerHTML),setTimeout(function(){t.getCurrentElement().focus()},1);this.element.trigger("change"),this.bindAnchorPreview()}},fixLinkFormat:function(e){return e.match(/^https?:\/\//)?e:"http://".concat(e)},checkSelection:function(){var e;if(void 0===this.selection&&this.sourceViewActive())return e=this.textarea.val().substring(this.textarea[0].selectionStart,this.textarea[0].selectionEnd).toString().trim(),void this.hideToolbarActions();e=window.getSelection();var t=this.getSelectionElement();return t?this.checkSelectionElement(e,t):this.hideToolbarActions(),this},getSelectionElement:function(){var t,i,n,a=window.getSelection(),o=function(d){var h=d;try{for(;!h.getAttribute("data-editor");)h=h.parentNode}catch{return!1}return h};try{i=(t=a.getRangeAt(0).commonAncestorContainer).parentNode,n=t.getAttribute("data-editor")?t:o(i)}catch{n=o(i)}return n},checkSelectionElement:function(e,t){var i=this.sourceViewActive()?this.sourceView[0]:this.element[0];this.selection=e,this.selectionRange=this.selection.getRangeAt(0),i!==t?this.hideToolbarActions():this.setToolbarButtonStates()},setToolbarButtonStates:function(){return this.toolbar.find("button").removeClass("is-active"),this.checkActiveButtons(),this},checkActiveButtons:function(){this.checkButtonState("bold"),this.checkButtonState("italic"),this.checkButtonState("underline"),this.checkButtonState("strikethrough"),this.checkColorButtonState("foreColor"),this.toolbar.find('.buttonset [data-action="backColor"]').length&&this.checkColorButtonState("backColor"),this.fontPickerElem&&this.checkButtonState("fontStyle");for(var e=this.getSelectedParentElement();void 0!==e.tagName&&-1===Tl.indexOf(e.tagName.toLowerCase)&&(this.activateButton(e.tagName.toLowerCase()),!this.element.is(e));)e=e.parentNode},checkButtonState:function(e){if(document.queryCommandState){if(this.fontPickerElem&&"fontStyle"===e){for(var o,l,t=this.fontPickerElem.data("fontpicker"),i=t.supportedTagNames,n=this.getSelectionParentElement(),a=$(n).add($(n).parentsUntil(this.element)),d=0;d<a.length&&void 0===l;d++)if(o=a[d].tagName.toLowerCase(),i.indexOf(o)>-1){l=t.getStyleByTagName(o),t.select(l,!0);break}return}document.queryCommandState(e)?this.toolbar.find('[data-action="'.concat(e,'"]')).addClass("is-active"):this.toolbar.find('[data-action="'.concat(e,'"]')).removeClass("is-active")}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(){var t=this.selectionRange;return this.rangeSelectsSingleNode(t)?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer},hideToolbarActions:function(){void 0!==this.toolbar&&this.toolbar.removeClass("is-active")},bindPaste:function(){var e=this,t=e.getCurrentElement();return this.pasteWrapper=function(i){var n;n=i.originalEvent.clipboardData&&i.originalEvent.clipboardData.getData?i.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var a,o,l="";if(e.sourceViewActive())return this;if(n&&!i.defaultPrevented){for(i.preventDefault(),o=n.split(/[\r\n]/g),a=0;a<o.length;a+=1)""!==o[a]&&(navigator.userAgent.match(/firefox/i)&&0===a?l+="<p>".concat(e.htmlEntities(o[a]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(o[a])?l+='<img src="'.concat(e.htmlEntities(o[a]),'" />'):l+="<p>".concat(e.htmlEntities(o[a]),"</p>"));if(document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,l),!1;e.pasteHtmlAtCaret(l)}},this.pasteWrapperHtml=function(i){if(e.sourceViewActive())return this;var n,a,o,d,h;if((i.clipboardData||i.originalEvent)&&(i.clipboardData&&i.clipboardData.types?a=i.clipboardData:i.originalEvent&&i.originalEvent.clipboardData&&i.originalEvent.clipboardData.getData&&(a=i.originalEvent.clipboardData)),a&&a.types)((n=a.types)instanceof DOMStringList&&n.contains("text/html")||n.indexOf&&-1!==n.indexOf("text/html")||xe.browser.isEdge())&&(o=i.originalEvent.clipboardData.getData("text/html")),n instanceof DOMStringList&&n.contains("text/plain")&&(o=i.originalEvent.clipboardData.getData("text/plain")),"object"===rt(n)&&n[0]&&"text/plain"===n[0]&&!n[1]&&(o=Fe.escapeHTML(i.originalEvent.clipboardData.getData("text/plain"))),n instanceof Array&&n.indexOf("text/plain")>-1&&n.indexOf("text/html")<0&&(o=Fe.escapeHTML(i.originalEvent.clipboardData.getData("text/plain")));else for(h=(window.clipboardData?window.clipboardData.getData("Text"):"").split(/[\r\n]/g),o="",d=0;d<h.length;d+=1)""!==h[d]&&(navigator.userAgent.match(/firefox/i)&&0===d?o+="<p>".concat(e.htmlEntities(h[d]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(h[d])?o+='<img src="'.concat(e.htmlEntities(h[d]),'" />'):o+="<p>".concat(e.htmlEntities(h[d]),"</p>"));return e.pastedData=xe.browser.isIE11()?o:e.getCleanedHtml(o),$.when(e.element.triggerHandler("beforepaste",[{pastedData:e.pastedData}])).done(function(){if(e.pastedData&&!i.defaultPrevented){if(!xe.browser.isIE11()&&!xe.browser.isEdge()&&i.preventDefault(),document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,e.pastedData),!1;e.pasteHtmlAtCaret(e.pastedData)}e.element.triggerHandler("afterpaste",[{pastedData:e.pastedData}]),e.pastedData=null}),!!xe.browser.isIE11()&&void 0},t.on("paste.editor",e.settings.pasteAsPlainText?e.pasteWrapper:e.pasteWrapperHtml),this},pasteHtmlAtCaret:function(e){var n,a,t=this,i="x-text-content-templ-x";if(window.getSelection){if((n=window.getSelection()).getRangeAt&&n.rangeCount){(a=n.getRangeAt(0)).deleteContents(),xe.browser.isIE11()&&(e=i);var o=document.createElement("div");o.innerHTML=e;for(var d,h,l=document.createDocumentFragment();d=o.firstChild;)h=l.appendChild(d);if(a.insertNode(l),h&&((a=a.cloneRange()).setStartAfter(h),a.collapse(!0),n.removeAllRanges(),n.addRange(a)),xe.browser.isIE11()){for(var p=50,v=$.Deferred(),w=document.createDocumentFragment();t.element[0].childNodes.length>0;)w.appendChild(t.element[0].childNodes[0]);(function T(k,A){--p<0?v.reject():k.childNodes&&k.childNodes.length>0?(e=k.innerHTML,k.innerHTML="",k.appendChild(A),v.resolve()):setTimeout(function(){T(k,A)},5)})(t.element[0],w),$.when(v).done(function(){var T="",k=t.element.find(":contains(+ ".concat(i,")")).filter(function(){return this.textContent===i});k.length||(k=t.element.find(":contains(+ ".concat(i,")")).filter(function(){return this.textContent.indexOf(i)>-1&&"UL"!==this.tagName})),e=t.getCleanedHtml(e);var A="";/(^(\s+?)?<li)/gi.test(e)?/((\s+?)?<\/li>(\s+?)?$)/gi.test(e)?(k.is("li")||(e="<ul>".concat(e,"</ul>")),A=e):A=k.is("li")?"".concat(e,"</li>"):(T=e.match(/<\/ul|<\/ol/gi)||[]).length?e:"".concat(e,"</li></ul>"):/((\s+?)?<\/li>(\s+?)?$)/gi.test(e)&&(k.is("li")?A="<li>".concat(e):((T=e.match(/<ul|<ol/gi)||[]).length?e+=T[T.length-1].replace(/<(ul|ol)/gi,"<$1>"):e="<ul>".concat(e,"</ul>"),A=e)),A&&de.html(k,A,"*"),(T=t.element[0].innerHTML).indexOf(i)>-1&&(T=T.replace(i,e)),t.element[0].innerHTML=t.getCleanedHtml(T)})}}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(e)},getCleanedHtml:function(e){var t,i=e||"",n=["start","xmlns","xmlns:o","xmlns:w","xmlns:x","xmlns:m","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onload","onfocus","onblur","onclick","style"];this.isWordFormat(i)&&(i=this.cleanWordHtml(i));for(var a=0,o=n.length;a<o;a++)t=new RegExp(" ".concat(n[a],'="(.*?)"'),"gi"),i=this.stripAttribute(i,n[a],t),t=new RegExp(" ".concat(n[a],"='(.*?)'"),"gi"),i=this.stripAttribute(i,n[a],t);return(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/\sng-[a-z-]+/,"")).replace(/<!--(.*?)-->/gm,"")).replace(/\s\s+/g," ").replace(/\s>+/g,">")).replace(/<(ul)(.*?)>/gi,"<$1>")).replace(/<li><\/li>/gi,"")).replace(/<(ul|ol)><\/(ul|ol)>/gi,"")).replace(/<\/?(html|body)(.*?)>/gi,"")).replace(/<head\b[^>]*>(.*?)<\/head>/gi,"")).replace(/<(div|span|p)> <\/(div|span|p)>/gi," ")).replace(/<[^(br|/>)]+>[\s]*<\/[^>]+>/gi,"")).indexOf("\xb7")>-1&&(i=[(i=[(i=(i=(i=i.replace(/<\/p>/gi,"</li>")).replace(/<p><span><span>\xb7<\/span><\/span>/gi,"<li>")).replace(/<\/li>\s<li>/gi,"</li><li>")).slice(0,i.indexOf("<li>")),"<ul>",i.slice(i.indexOf("<li>"))].join("")).slice(0,i.lastIndexOf("</li>")),"</ul>",i.slice(i.lastIndexOf("</li>"))].join("")),i},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindWindowActions:function(){var e=this,t=this.container,i=this.getCurrentElement(),n=this;return this.container.on("focusin.".concat(Gi),".editor, .editor-source",function a(){var l=$(this);t.addClass("is-active"),setTimeout(function(){l.hasClass("error")&&(t.parent().find(".editor-toolbar").addClass("error"),t.parent().find(".editor-source").addClass("error"))},100)}).on("focusout.".concat(Gi),".editor, .editor-source",function o(){t.removeClass("is-active"),t.parent().find(".editor-toolbar").removeClass("error"),t.parent().find(".editor-source").removeClass("error")}),this.container.on("mouseenter.".concat(Gi),function(){e.element.hasClass("error")||e.container.addClass("is-hover")}).on("mouseleave.".concat(Gi),function(){e.container.removeClass("is-hover")}),n.settings.onLinkClick&&t.on("click.editorlinks","a",function(l){n.settings.onLinkClick(l,{elem:e,url:l.currentTarget.getAttribute("data-url")}),l.preventDefault(),l.stopImmediatePropagation(),l.stopPropagation()}),this.label.on("click.editor",function(){i.focus()}),i.attr("aria-label",this.label.text()),this},restoreSelection:function(e){var t=window.getSelection();if(e||(e=this.savedSelection),e){t.removeAllRanges();for(var i=0,n=e.length;i<n;i+=1)t.addRange(e[i])}},saveSelection:function(){var e,t=window.getSelection();if(t.getRangeAt&&t.rangeCount){e=[];for(var i=0,n=t.rangeCount;i<n;i+=1)e.push(t.getRangeAt(i));return e}return null},getSelectionStart:function(){var e=document.getSelection().anchorNode;return e&&3===e.nodeType?e.parentNode:e},getrange:function(){return window.getSelection().getRangeAt(0)},findElementInSelection:function(e,t){var i,n,a,o=this.getrange();if(o){for(i=a=o.commonAncestorContainer||o.parentElement();i!==t;i=i.parentNode)if(i&&i.tagName&&i.tagName.toLowerCase()===e)return i;if(!o.collapsed&&(void 0===o.text||o.text)&&a.getElementsByTagName){i=a.getElementsByTagName(e),n=document.createRange?document.createRange():document.body.createTextRange();for(var l=0,d=i.length;l<d;l++)if(document.createRange){if(n.selectNodeContents(i[l]),o.compareBoundaryPoints(Range.END_TO_START,n)<0&&o.compareBoundaryPoints(Range.START_TO_END,n)>0)return i[l]}else if(n.moveToElementText(i[l]),o.compareEndPoints("StartToEnd",n)<0&&o.compareEndPoints("EndToStart",n)>0)return i[l]}}},restoreLinkSelection:function(){var e=$(this.findElementInSelection("a",this.element[0]));if(this.settings.anchor.url=this.settings.anchor.defaultUrl,this.settings.anchor.class=this.settings.anchor.defaultClass,this.settings.anchor.target=this.settings.anchor.defaultTarget,this.settings.anchor.isClickable=this.settings.anchor.defaultIsClickable,e.length){this.settings.anchor.url=e.attr("href"),this.settings.anchor.class=e.attr("class"),this.settings.anchor.target=e.attr("target");var t=e.attr("contenteditable");(!1===t||"false"===t)&&(this.settings.anchor.isClickable=!0)}},execAction:function(e){if(this.getCurrentElement()===this.element)e.indexOf("append-")>-1?this.execFormatBlock(e.replace("append-","")):"anchor"===e?(this.restoreLinkSelection(),this.modals.url.data("modal").open()):"image"===e?this.modals.image.data("modal").open():"foreColor"===e||"backColor"===e?this.execColorActions(e):"clearFormatting"===e?this.clearFormatting():"generative"===e?this.generativeButtonAction():"source"===e||"visual"===e?this.toggleSource():document.execCommand(e,!1,null);else switch(e){case"visual":this.toggleSource();break;case"anchor":this.modals.url.data("modal").open();break;default:this.insertTextAreaContent(null,e)}this.checkSelection()},insertImage:function(e){document.execCommand("insertImage",!1,e)},toggleSource:function(e){var t=this,a=function(h){return"string"==typeof h&&"false"===h.toLowerCase()||"boolean"==typeof h&&!1===h||"number"==typeof h&&0===h};if(this.sourceViewActive()&&!e){var o=this.textarea.val();$.when(this.element.triggerHandler("beforepreviewmode",o)).done(function(d){var p;a(d)||(p=d||t.textarea.val(),p=Fe.sanitizeHTML(p),p=t.getCleanedHtml(p),t.element.empty().removeClass("source-view-active hidden"),t.sourceView.addClass("hidden").removeClass("is-focused"),t.element.trigger("focus.editor"),t.switchToolbars(),t.textarea.off("input.editor-firechange"),setTimeout(function(){var v;t.orderedListTypeStyling(),t.element[0].innerHTML=p,t.element.triggerHandler("afterpreviewmode",p=t.element[0].innerHTML);var b=null===(v=t.toolbar)||void 0===v?void 0:v?.find('[data-action="source"]');b&&!t.isBtnOverflowedItem(b)&&b.focus()},0))})}else{var l=this.element.html();$.when(this.element.triggerHandler("beforesourcemode",l)).done(function(d){a(d)||function(h){var p,v=h||t.element.html().trim().replace(/\s+/g," ").replace(/<br( \/)?>/g,"<br>\n").replace(/<\/p> /g,"</p>\n\n").replace(/<\/blockquote>( )?/g,"</blockquote>\n\n");t.settings.useSourceFormatter&&(v=t.formatHtml(v)),t.element.addClass("source-view-active"),t.switchToolbars(),t.textarea.val(v).focus(),t.sourceView.removeClass("hidden"),t.element.addClass("hidden"),t.adjustSourceLineNumbers(),t.textarea.focus(),v=t.textarea.val(),t.textarea.off("input.editor-firechange").on("input.editor-firechange",function(){t.element.trigger("change")}),t.element.triggerHandler("aftersourcemode",v);var b=null===(p=t.toolbar)||void 0===p?void 0:p?.find('[data-action="visual"]');b&&!t.isBtnOverflowedItem(b)&&b.focus()}(d)})}},isBtnOverflowedItem:function(e){var t=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex"),i=!1;return t&&t.overflowedItems.forEach(function(n){e.is(n.element)&&(i=!0)}),i},clearFormatting:function(){var w,e=this,t=this.getSelectionParentElement(),i=t.tagName,n={},l=function(w){var T=window.getSelection(),k=!1;if(xe.browser.isIE11()){var A=T.getRangeAt(0),M=document.createRange();M.selectNode(w);var L=A.compareBoundaryPoints(Range.START_TO_END,M),z=A.compareBoundaryPoints(Range.START_TO_START,M),q=A.compareBoundaryPoints(Range.END_TO_START,M),O=A.compareBoundaryPoints(Range.END_TO_END,M);k=L!==z||q!==O||L!==O}else k=T.containsNode(w,!0);return k};t&&i&&(i=i.toLowerCase(),n=function(){for(var w=function(z){return z&&z.style&&""!==z.style.textAlign},T=t,k=w(T),A=9999;!k&&A>0;)A--,k=(T=T?T.parentNode:null)&&T===e.element[0]||w(T);var M={found:T&&T!==t&&T!==e.element[0]};return M.found&&(M.elem=T,M.textAlign=T.style.textAlign),M}(),function(){var w=function(L){var z=[].slice.call(L.querySelectorAll("li"));if(z.length>0){var q=document.createDocumentFragment();z.forEach(function(_){var G=document.createTextNode(_.textContent);q.appendChild(G),q.appendChild(document.createElement("br"))});var O=z[0].parentNode;O.parentNode.insertBefore(q,O.nextSibling),O.parentNode.removeChild(O)}};if("li"===i)w(t.parentNode);else if(/ul|ol/.test(i))w(t);else{var k=t.classList.contains("editor")?t:$(t).closest(".editor").length?t.parentNode:null;k&&[].slice.call(k.querySelectorAll("ul, ol")).forEach(function(M){l(M)&&w(M)})}}(),function(){var z,w=function(z){var q=z.parentNode,O=document.createElement("p");O.innerHTML=z.innerHTML,q.replaceChild(O,z)};Tl.indexOf(i)>-1?"p"!==i&&(document.execCommand("removeFormat",!1,null),w(t)):Tl.forEach(function(L){"p"!==L&&[].slice.call(t.querySelectorAll(L)).forEach(function(q){return w(q)})});for(var T=[].slice.call(e.element[0].querySelectorAll("blockquote, pre")),A=0,M=T.length;A<M;A++)z=void 0,z=!1,function _(G){for(var j=0,X=G.length;j<X;j++){var fe=G[j],he=[].slice.call(fe.children);fe===t&&(z=!0),he.length&&!z&&_(he)}}([].slice.call(T[A].children)),z&&(document.execCommand("removeFormat",!1,null),w(T[A]))}(),w=function(A){var M=A.parentNode;M.insertBefore(A.firstChild,A),M.removeChild(A),M.normalize()},"a"===i?w(t):[].slice.call(t.querySelectorAll("a")).forEach(function(k){l(k)&&w(k)}));var p=t.parentNode;p&&p!==this.element[0]&&[].slice.call(p.querySelectorAll("[align]")).forEach(function(b){return b.removeAttribute("align")}),document.execCommand("removeFormat",!1,null),n.found&&(n.elem.style.textAlign=n.textAlign)},generativeButtonAction:function(){var e=this;e.element.triggerHandler("generateai",[{self:e,editor:e.element,toolbar:e.toolbar}])},getSelectionParentElement:function(){var t,e=null;return window.getSelection?(t=window.getSelection()).rangeCount&&1!==(e=t.getRangeAt(0).commonAncestorContainer).nodeType&&(e=e.parentNode):(t=document.selection)&&"Control"!==t.type&&(e=t.createRange().parentElement()),e},checkColorButtonState:function(e){var t=$('[data-action="'.concat(e,'"]'),this.toolbar),i=t.data("colorpicker"),a=document.queryCommandValue(e);return i&&"rgb(0, 0, 0)"!==a&&("firefox"===xe.browser.name&&"backColor"===e&&(a=$(window.getSelection().focusNode.parentNode).css("background-color")),"number"==typeof a&&(a=i.decimal2rgb(a)),a=a?i.rgb2hex(a):"",t.attr("data-value",a),t.find(".swatch").css("background-color",["transparent","#1a1a1a","#f0f0f0","#ffffff","#313236"].indexOf(a.toLowerCase())>-1?"":a)),{cpBtn:t,cpApi:i,color:a}},execColorActions:function(e){var t=this,i=this.checkColorButtonState(e),n=i.cpBtn,a=i.cpApi;n.one("selected.editor",function(o,l){var d=l;if(void 0!==d&&!(d instanceof $)&&d.element&&(d=$(l.element)),d.is("a")){var h="".concat(d.data("value")).toLowerCase();if(-1===(h="#"!==h?h:"").indexOf("#")&&(h="#".concat(h)),"#"===h&&(h=""),n.attr("data-value",h),n.find(".swatch").css("background-color",h),"ie"===xe.browser.name||"foreColor"===e)h?document.execCommand(e,!1,h):document.execCommand("removeFormat",!1,e);else{document.execCommand("fontSize",!1,"2");for(var v=t.getSelectionParentElement().parentNode.getElementsByTagName("font"),b=0,w=v.length;b<w;b++)v[b].hasAttribute("style")&&(v[b].style.backgroundColor="");setTimeout(function(){for(var T=0,k=v.length;T<k;T++)v[T].hasAttribute("size")&&(v[T].style.backgroundColor=h,v[T].removeAttribute("size"))},0)}}}),a.toggleList()},execFormatBlock:function(e){if(void 0===this.selection&&this.checkSelection(),this.selection&&this.selection instanceof Selection){var t=$(this.selection.anchorNode).is("div.editor")?$(this.selection.anchorNode).get(0):$(this.selection.anchorNode).parents("div.editor").get(0);if(void 0!==t&&this.element.get(0)===t){var i=this.getSelectionData(this.selection.anchorNode);if("blockquote"===e&&i.el&&"blockquote"===i.el.parentNode.tagName.toLowerCase())return document.execCommand("outdent",!1,null);if(i.tagName===e&&(e="p"),"ie"===xe.browser.name){if("blockquote"===e)return document.execCommand("indent",!1,e);e="<".concat(e,">")}document.queryCommandState("bold")&&document.execCommand("bold",!1,e),document.queryCommandState("italic")&&document.execCommand("italic",!1,e),document.queryCommandState("underline")&&document.execCommand("underline",!1,e),document.queryCommandState("strikethrough")&&document.execCommand("strikethrough",!1,e),i.el&&i.el.innerHTML&&"<ul>"===i.el.innerHTML.substr(0,4)&&(document.execCommand("insertunorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"UL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertunorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),i.el&&i.el.innerHTML&&"<ol>"===i.el.innerHTML.substr(0,4)&&(document.execCommand("insertorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"OL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),document.execCommand("formatBlock",!1,e),this.checkActiveButtons()}}},getSelectionData:function(e){var t;for(e&&e.tagName&&(t=e.tagName.toLowerCase());e&&-1===Tl.indexOf(t);)(e=e.parentNode)&&e.tagName&&(t=e.tagName.toLowerCase());return{el:e,tagName:t}},isListItemChild:function(e){for(var t=e.parentNode,i=t.tagName.toLowerCase();-1===Tl.indexOf(i)&&"div"!==i;){if("li"===i)return!0;if(!(t=t.parentNode)||!t.tagName)return!1;i=t.tagName.toLowerCase()}return!1},destroyToolbar:function(){var e=function(_){return _||$()};this.toolbar=e(this.toolbar),this.element=e(this.element),this.textarea=e(this.textarea);var t=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex");t&&t.destroy();for(var i=this.toolbar.find("button"),n=0,a=i.length;n<a;n++){var o=$(i[n]).data("tooltip");o&&"function"==typeof o.destroy&&o.destroy();var l=$(i[n]).data("button");l&&"function"==typeof l.destroy&&l.destroy()}for(var d=$('[data-action="foreColor"], [data-action="backColor"]',this.element),h=0,p=d.length;h<p;h++){var v=$(d[h]).data("colorpicker");v&&"function"==typeof v.destroy&&v.destroy()}if(this.fontPickerElem){this.fontPickerElem.off("font-selected.".concat(Gi));var b=this.fontPickerElem.data("fontpicker");b&&b.destroy(),delete this.fontPickerElem}this.toolbar.off(["click.".concat(Gi),"selected.".concat(Gi)].join(" ")),this.toolbar.remove(),delete this.toolbar;var w=["blur","DOMNodeInserted","focus","input.".concat(Gi),"keydown.".concat(Gi),"keypress.".concat(Gi),"keyup.".concat(Gi),"mouseup.".concat(Gi),"mousedown.".concat(Gi),"paste.".concat(Gi)].join(" ");this.element.off(w),this.textarea.off(w),this.element.prev(".label").off("click.editor"),this.container.closest(".editor-container").off("focus.editor blur.editor click.editorlinks");var T=this.checkColorButtonState("foreColor"),k=T.cpBtn;if(k.off("selected.editor"),(k=(T=this.checkColorButtonState("backColor")).cpBtn).off("selected.editor"),delete this.pasteWrapper,delete this.pasteWrapperHtml,delete this.selectionHandler,$(window).off("resize.editor"),this.modals)for(var A=Object.keys(this.modals),M=0,L=A.length;M<L;M++){var z=$("#modal-".concat(A[M],"-").concat(this.id)),q=z.data("modal");z.off("beforeclose.editor close.editor open.editor beforeopen.editor"),q&&"function"==typeof q.destroy&&q.destroy(),z.remove()}delete this.modals,this.element.trigger("destroy.toolbar.editor")},setPreviewMode:function(){var e=this.container[0].classList,t=this.element[0].classList;if(!e.contains("is-preview")){if(!this.isEditable()){var i=["is-disabled","is-readonly","is-preview"];e.remove.apply(e,i),t.remove.apply(t,i)}this.sourceViewActive()&&this.toggleSource(),e.add("is-preview"),t.remove("is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),this.element[0].removeAttribute("role"),[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(a){var o=$(a).data("tooltip");o&&"function"==typeof o.destroy&&o.destroy()})}},destroyPreviewMode:function(){if(this.container[0]){var e=this.container[0].classList;e.contains("is-preview")&&(e.remove("is-preview"),this.previewRendered?(this.element[0].setAttribute("aria-multiline",!0),this.element[0].setAttribute("role","textbox"),this.bindAnchorPreview()):(this.previewRendered=!0,this.init()))}},isPreview:function(){return!!this.container[0]&&this.container[0].classList.contains("is-preview")},isEditable:function(){var e=this,t=!0,i=function(a,o){return a.classList.contains(o)};return["is-disabled","is-readonly","is-preview"].forEach(function(n){(i(e.container[0],n)||i(e.element[0],n))&&(t=!1)}),t},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,Sc)),this.teardown().init()},teardown:function(){this.destroyToolbar();var e=this.getCurrentElement();return this.sourceView&&(this.sourceView.off(".editor"),this.sourceView.remove(),delete this.sourceView),delete this.textarea,this.lineNumbers&&delete this.lineNumbers,this.selection&&delete this.selection,this.selectionRange&&delete this.selectionRange,e.off("keyup.editor"),e.off("mouseup.editor"),this.container.off(["focusin.".concat(Gi),"focusout.".concat(Gi),"mouseneter.".concat(Gi),"mouseleave.".concat(Gi),"input.".concat(Gi),"keyup.".concat(Gi)].join(" ")),this.container.removeClass("editor-container"),delete this.container,this.label.off("click.".concat(Gi)),delete this.label,this.element.attr("contenteditable","false"),this.element.off(["mousedown.".concat(Gi),"updated.".concat(Gi)].join(" ")),$("html").off("themechanged.".concat(Gi)),delete this.id,delete this.isActive,this},destroy:function(){this.teardown(),$.removeData(this.element[0],Gi)},disable:function(){this.destroyPreviewMode(),this.element.addClass("is-disabled").attr("contenteditable","false"),this.container.addClass("is-disabled")},enable:function(){this.destroyPreviewMode(),this.element.removeClass("is-disabled is-readonly").attr("contenteditable","true"),this.container.removeClass("is-disabled is-readonly")},readonly:function(){this.destroyPreviewMode(),this.element.removeClass("is-readonly").attr("contenteditable","false"),this.container.addClass("is-readonly")},editable:function(){this.enable()},preview:function(){this.container[0].classList.contains("is-preview")||this.setPreviewMode()},onPasteTriggered:function(){"firefox"!==xe.browser.name&&document.addEventListener&&document.addEventListener("paste",function(e){if(typeof e.clipboardData<"u"){var t=e.clipboardData.items[0];if(0===t.type.indexOf("image")){var i=t.getAsFile(),n=new FileReader;n.onload=function(a){document.execCommand("insertImage",!1,a.target.result)},n.readAsDataURL(i)}}},!1)},isWordFormat:function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)},cleanWordHtml:function(e){var t=e;t=(t=(t=(t=(t=(t=t.replace(/<!--[\s\S]+?-->/gi,"")).replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,"")).replace(/<(\/?)s>/gi,"<$1strike>")).replace(/&nbsp;/gi,"\xa0")).replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(l,d){return d.length>0?d.replace(/./," ").slice(Math.floor(d.length/2)).split("").join("\xa0"):""})).replace(/(\n|\r| class=(\'|")?Mso[a-zA-Z]+(\'|")?)/g," ");for(var i=["style","script","applet","embed","noframes","noscript"],n=0,a=i.length;n<a;n++){var o=new RegExp("<".concat(i[n],".*?").concat(i[n],"(.*?)>"),"gi");t=t.replace(o,"")}return t},stripAttribute:function(e,t,i){return"style"===t?this.stripStyles(e,i):e.replace(i,"")},stripStyles:function(e,t){var i=["color","font-size","background","font-weight","font-style","text-decoration","text-align"];return e.replace(t,function(n){for(var a=(n=n.replace(/( style=|("|\'))/gi,"")).split(";"),o="",l=0;l<a.length;l++){var d=a[l].split(":");o+=i.indexOf((d[0]||"").trim())>-1?"".concat(d[0],":").concat(d[1],";"):""}return""!==o?' style="'.concat(o,'"'):""})},formatHtml:function(e){e=e.trim();var t=this.settings,i=e.split(/</),n=0,a="";function o(p){var b="",w=p*("number"==typeof t.formatterTabsize?t.formatterTabsize:4);if(p>-1)for(;w--;)b+=" ";return b}for(var l=0,d=i.length;l<d;l++){var h=i[l].split(/>/);2===h.length?("/"===i[l][0]&&n--,a+=o(n),"/"!==i[l][0]&&n++,l>0&&(a+="<"),a+="".concat(h[0].trim(),">\n"),""!==h[1].trim()&&(a+="".concat(o(n)+h[1].trim().replace(/\s+/g," "),"\n")),h[0].match(/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/)&&n--):a+="".concat(o(n)+h[0],"\n")}return a.trim()},clear:function(){this.element.empty(),this.textarea.empty(),this.sourceView.find(".line-numbers").empty(),this.sourceView.find(".textarea-print").empty()}},$.fn.editor=function(s){return this.each(function(){var e=$.data(this,Gi);e?e.updated(s):e=$.data(this,Gi,new Na(this,s))})};var Od="hierarchy",Fd={legend:[],legendKey:"",dataset:[],newData:[],templateId:"",leafHeight:null,leafWidth:null,beforeExpand:null,renderSubLevel:!1,layout:"horizontal",rootId:null,emptyMessage:{title:B?B.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function zd(s,e){this.settings=H.mergeSettings(s,e,Fd),this.element=$(s),this.init()}zd.prototype={init:function(){var e=this.settings;if(null===this.rootId&&void 0===this.element.attr("id")?this.rootId="hierarchyChart":this.element.attr("id")?this.settings.rootId=this.element.attr("id"):this.rootId="hierarchyChart",e.colorClass=["azure08","turquoise02","amethyst06","slate06","amber06","emerald07","ruby06"],this.handleEvents(),void 0!==e.dataset&&0!==e.dataset.length&&Array.isArray(e.dataset)){if(e.dataset[0]&&e.dataset[0].children&&e.dataset[0].children.length>0||this.isStackedLayout()?this.render(e.dataset[0]):e.dataset&&e.dataset.children.length>0&&this.render(e.dataset),null!==e.leafHeight&&null!==e.leafWidth){var t="'body .hierarchy .leaf,body .hierarchy .sublevel .leaf,body .hierarchy .container .root.leaf { width: ".concat(e.leafWidth,"px;  height: ").concat(e.leafHeight,"px;  }'");$('<style type="text/css" id="hierarchyLeafStyles">'.concat(t,"</style>")).appendTo("body")}e.layout&&this.setLayout(e.layout),this.setAutomationAttributes()}else this.element.emptymessage(e.emptyMessage)},setAutomationAttributes:function(){var e=this;[].slice.call(this.element[0].querySelectorAll(".leaf")).forEach(function(i){var n=$(i),a=n.data();if(a&&a.attributes){var o=n.find(".btn-expand, .btn-collapse");H.addAttributes(n,e,a.attributes,"hierarchy-leaf"),H.addAttributes(o,e,a.attributes,"hierarchy-btn-toggle")}})},setLayout:function(e){switch(this.isPagingLayout()&&(e="paging"),this.isMobileOnly()&&(e="mobile-only"),e){case"horizontal":default:this.element.addClass("layout-is-horizontal");break;case"stacked":this.element.addClass("layout-is-stacked");break;case"paging":this.element.addClass("layout-is-paging");break;case"mobile-only":this.element.addClass("layout-is-mobile-only")}},handleEvents:function(){var e=this,t=this,i=this.settings;t.element.off("click.hierarchy").on("click.hierarchy",".btn",function(n){if(!t.isStackedLayout()){i.newData.length>0&&(i.newData=[]);var a=$(this).closest(".leaf").attr("id"),o=$("#".concat(a)).data(),l={branch:$(this).closest("li"),leaf:$(this).closest(".leaf"),button:$(this)};o.isExpanded?t.collapse(n,o,l):t.expand(n,o,l)}}),this.element.on("keypress",".leaf",function(n){var a=$(this).attr("id"),o=$("#".concat(a));13===n.which&&(o.isExpanded?t.collapse(n,o):t.expand(n,o))}),t.element.off("dblclick.hierarchy").on("dblclick.hierarchy",".leaf",function(n){var l={event:n,data:$("#".concat(n.currentTarget.id)).data()};n.stopImmediatePropagation(),e.element.trigger("dblclick",l)}),t.element.on("mouseup",".leaf, .back button",function(n){var a=$(this),o=$(n.target),l=a.closest(".hierarchy").data("hierarchy"),d=a.data(),h=$(this).attr("id"),p={target:n.target,pageX:n.pageX,pageY:n.pageY},v=o.is("button"),b=!o.hasClass("btn-back"),w=o.is(".btn-back"),T=o.find("use").prop("href"),k=!!T&&"#icon-caret-up"===T.baseVal,A=!!T&&"#icon-caret-down"===T.baseVal,M=!!T&&"#icon-caret-right"===T.baseVal,L=o.hasClass("btn-actions"),z=o.is("a")&&o.parent().parent().is("ul.popupmenu"),q=a.hasClass("ancestor"),O="selected";if(n.stopImmediatePropagation(),(!z||!$(o).parent().data("disabled"))&&($(".leaf.is-selected").removeClass("is-selected"),$("#".concat(h)).addClass("is-selected"),v&&k&&b&&(O=q?"back":"collapse"),v&&A&&b&&(O="expand"),w&&(O="back"),L&&(O="actions",l.buildActionsMenu(d,a)),z&&(O="action"),v&&M&&b&&(O="forward"),3===n.which&&(O="rightClick"),l)){var _={id:h,data:d,actionReference:z?o.data("actionReference"):null,targetInfo:p,eventType:O,isForwardEvent:l.isForwardEvent(O),isBackEvent:l.isBackEvent(O),isAddEvent:l.isAddEvent(O),isExpandEvent:l.isExpandEvent(O),isCollapseEvent:l.isCollapseEvent(O),isSelectedEvent:l.isSelectedEvent(O),isActionsEvent:l.isActionsEvent(O),isActionEvent:l.isActionEvent(O),allowLazyLoad:l.allowLazyLoad(d,O)};a.trigger("selected",_)}})},selectLeaf:function(e){var t=$("#".concat(e));$(".leaf.is-selected").removeClass("is-selected"),t.addClass("is-selected");var i={data:t.data(),actionReference:null,isForwardEvent:!1,isBackEvent:!1,isAddEvent:!1,isExpandEvent:!1,isCollapseEvent:!1,isSelectedEvent:!0,isActionsEvent:!1,isActionEvent:!1,allowLazyLoad:!1};t.trigger("selected",i)},updateActions:function(e,t){var i=$(e.targetInfo.target).closest(".leaf"),n=e.data,a=$(i).find(".popupmenu"),o=a.data("trigger").data().popupmenu,l=a.find("li").not(":eq(0)");$(l).each(function(d,h){$(h).remove()}),n.menu.actions=t,a.append(this.getActionMenuItems(n)),o.keydownThenClick=!0,o.open(),o.handleAfterPlace(null,{element:a.parent(),parent:$(i).find(".btn-actions"),placement:"bottom"})},buildActionsMenu:function(e,t){var i=$(t).find(".popupmenu"),n=[];void 0!==e.menu&&(i.empty(),e.menu.details&&(i.addClass("has-detail-fields"),n.push('<li><div class="detail-fields">'.concat(e.menu.details.map(function(a){return'<div class="dt-fields-row"><div class="dt-fields-cell">'.concat(a.key,'</div><div class="dt-fields-cell">').concat(a.value,"</div></div>")}).join(""),"</div></li>"))),e.menu.actions&&n.push(this.getActionMenuItems(e)),n.forEach(function(a){i.append(a)}))},getActionMenuItems:function(e){var n,t=this,i=e.menu.actions.map(function(l){return void 0===l.disabled&&(l.disabled=!1),l}),a=function(d){return H.stringAttributes(t,n,"option-".concat(d))};return e.attributes&&(n=this.getAutomationAttributes(e,"-hierarchy-popupmenu")),i.map(function(l,d){return l.hasOwnProperty("data")&&"separator"===l.data.type?'<li class="separator"></li>':'\n        <li data-disabled="'.concat(l.disabled,'" class="').concat(l.menu?"submenu":"",'">\n          <a href="').concat(l.url,'"').concat(a(d)," data-action-reference='")+JSON.stringify(l.data)+"'>\n            ".concat(l.value,"\n            ").concat(l.menu?'<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg>':"","\n          </a>\n          ").concat(l.menu?'<div class="wrapper" role="application" aria-hidden="true">\n            <ul class="popupmenu">\n              '.concat(l.menu.map(function(h,p){return'\n              <li data-disabled="'.concat(l.disabled,'">\n                <a href="').concat(l.url,'"').concat(a("".concat(d,"-").concat(p)),' data-action-reference="').concat(JSON.stringify(l.data),'">').concat(h.value,"</a>\n              </li>")}).join(""),"\n            </ul>\n          </div>"):"","\n        </li>")}).join("")},isBackEvent:function(e){return"back"===e},isForwardEvent:function(e){return"forward"===e},isAddEvent:function(e){return"add"===e},isExpandEvent:function(e){return"expand"===e},isCollapseEvent:function(e){return"collapse"===e},isSelectedEvent:function(e){return"selected"===e},isActionsEvent:function(e){return"actions"===e},isActionEvent:function(e){return"action"===e},allowLazyLoad:function(e,t){return void 0!==e&&void 0!==t&&!e.isLoaded&&!e.isLeaf&&"expand"===t},data:function(e,t,i,n){void 0===n&&(n={});var a=this.settings,o=t.isRootNode?t:t[0],l=[];function h(v,b,w){Object.keys(b).forEach(function(T){"id"===T&&e===b.id&&(!b.isLoaded&&!b.isRootNode&&function d(v,b){b.insert&&(delete v.isLeaf,v.isExpanded=!0),v.children=0!==i.length&&b.insert?[i]:i}(b,n),l.push(b))}),b.children&&p(v,b.children)}function p(v,b,w){if(void 0===b.length)h(v,b);else for(var T=0,k=b.length;T<k;T++)h(v,b[T])}return a.newData.length>0&&(a.newData=[]),void 0!==i&&p(this,o),0!==l.length&&$("#".concat(l[0].id)).data(l[0]),l[0]},add:function(e,t,i){var n=this.settings,o=$("#".concat(void 0!==t.id?t.id:e)),l=o.parent().hasClass("leaf-container")?o.parent().parent():o.parent(),d={},h="sub-level"!==l.parent().attr("class"),p=1===l.children(".sublist").length;if(h?p?d.element=l.children(".sublist"):(d.el=l.append("<ul class='sublist'></ul>"),d.element=$(d.el).find(".sublist")):(d.el=l.children("ul"),d.element=$(d.el)),0===d.element.length&&(d.el=l.append("<ul></ul>"),d.element=$(d.el).find("ul")),!t.isRootNode){for(var v=0,b=i.length;v<b;v++)n.newData.push(i[v]);this.createLeaf(i,d.element)}this.updateState(o,!1,null,"add")},closePopupMenu:function(e){var t=e.find(".btn-actions");0!==t.length&&t.data("popupmenu").close()},expand:function(e,t,i){var n=this.settings,a=i.leaf,o=a.next();this.closePopupMenu(a),o.animateOpen(),this.element.trigger("expanded",[t,n.dataset]),a.hasClass("root")&&(o=o.next("ul")).animateOpen(),a.parent().removeClass("branch-collapsed").addClass("branch-expanded"),this.updateState(a,!1,null,"expand")},collapse:function(e,t,i){var n=this,a=this.settings,o=i.leaf,l=o.next();this.closePopupMenu(o),l.animateClosed().on("animateclosedcomplete",function(){n.element.trigger("collapsed",[t,a.dataset])}),o.hasClass("root")&&(l=l.next("ul")).animateClosed(),o.parent().removeClass("branch-expanded").addClass("branch-collapsed"),this.updateState(o,!1,null,"collapse")},render:function(e){var t=this,i=this.settings,n=i.legend,a=e.children,o=[],l="".concat(H.uniqueId(this.element,"hierarchy")),d={legend:"<legend><ul></ul></legend>",chart:'<ul class="container"><li class="chart"></li></ul>',toplevel:this.isPagingLayout()?'<ul class="child-nodes"></ul>':'<ul class="top-level"></ul>',sublevel:this.isPagingLayout()?"":'<ul class="sub-level"></ul>'};$("#".concat(this.settings.rootId)).append(d.chart);var h=$("#".concat(this.settings.rootId," .chart"));if(0!==n.length){$("#".concat(this.settings.rootId)).prepend(d.legend);var p=$("#".concat(this.settings.rootId," legend"));this.createLegend(p)}if(this.isSingleChildWithChildren()&&$(h).addClass("has-single-child"),this.setColor(e),this.isPagingLayout()&&e.parentDataSet){var v=' id="'.concat(l,'-back-button" data-automation-id="automation-id-').concat(l,'-back-button"'),b='<div class="back">\n        <button type="button" class="btn-icon hide-focus btn-back"'.concat(v,'>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-left"></use>\n          </svg>\n          <span>Back</span>\n        </button></div>'),w=$(b).appendTo(h);setTimeout(function(){return w.next($(".leaf")).addBack($(".back")).wrapAll('<div class="back-container"></div>')}),w.children("button").data(e),$(h).addClass("has-back")}if(e.isMultiRoot){var T='<div class="leaf multiRoot"><div><h2>'.concat(e.multiRootText,"</h2></div></div>");T=Fe.sanitizeHTML(T),o.push(T),$(o[0]).addClass("root").appendTo(h)}else if(null!=e.ancestorPath){e.ancestorPath.push(e.centeredNode);var k="".concat(e.ancestorPath.map(function(Ne){return" ".concat(t.getTemplate(Ne)," ")}).join(""));k=Fe.sanitizeHTML(k),o.push(k),$(o[0]).addClass("root ancestor").appendTo(h);var A=this.element.find(".leaf.root");A.each(function(Ne,le){t.updateState(le,!1,e.ancestorPath[Ne],"add"),Ne===A.length-1&&$(le).addClass("is-selected")})}else{var L,M=e.centeredNode;this.isStackedLayout()&&null!==M?L=this.getTemplate(M):this.isStackedLayout()||(L=this.getTemplate(e)),L&&(L=Fe.sanitizeHTML(L),o.push(L),$(o[0]).addClass("root is-selected").appendTo(h)),this.updateState(this.element.find(".leaf.root"),!0,M&&null!==M?M:e,void 0)}function z(Ne,le,Te){if(null!=le)for(var ge=0,ce=le.length;ge<ce;ge++)X(Ne,le[ge])}if(a&&a.length>0)for(var q=0,O=a.length;q<O;q++){var _=e.children[q].children;this.isLeaf(a[q])&&!this.isPagingLayout()&&i.renderSubLevel||this.isPagingLayout()?this.createLeaf(e.children[q],$(d.toplevel)):this.createLeaf(e.children[q],$(d.sublevel)),null!=_&&z(this,e.children[q].children)}function X(Ne,le,Te){Object.keys(le).forEach(function(ge){if("children"===ge){var qe=le.children;return null!=qe&&qe.length>0&&Ne.add(le.id,le,qe),z(Ne,qe)}return!0})}var fe=this.element.find(".container").outerWidth(),he=$(window).width();this.element.scrollLeft((fe-he)/2);var re=this.element.find(".top-level");0===this.element.find(".sub-level").length&&1===re.length&&re.addClass("no-sublevel")},isPagingLayout:function(){return this.settings.layout&&"paging"===this.settings.layout},isMobileOnly:function(){return this.settings.layout&&"mobile-only"===this.settings.layout},isStackedLayout:function(){return this.settings.layout&&"stacked"===this.settings.layout},isSingleChildWithChildren:function(){if(this.isStackedLayout())return!1;var e=this.settings;if(e.dataset&&e.dataset[0]&&e.dataset[0].children){for(var t=e.dataset[0].children.length,i=0;t--;)e.dataset[0].children[t].isLeaf||i++;return 1===i}return!1},getAutomationAttributes:function(e,t){var i=this,n=e.attributes;if(e.attributes&&"string"==typeof t&&""!==t)if(Array.isArray(e.attributes))n=[],e.attributes.forEach(function(o){var l="function"==typeof o.value?o.value(i):o.value;n.push({name:o.name,value:l+t})});else{var a="function"==typeof e.attributes.value?e.attributes.value(this):e.attributes.value;n={name:e.attributes.name,value:a+t}}return n},getTemplate:function(e){var t=this,i=hn.compile("{{#dataset}}".concat($("#".concat(Fe.stripTags(this.settings.templateId))).html(),"{{/dataset}}"),{dataset:e});return setTimeout(function(){var n=$("#btn-".concat(Fe.stripTags(e.id)));if(0!==n.length){var a=t.getAutomationAttributes(e,"-hierarchy-popupmenu");n.hideFocus().popupmenu({attachToBody:!1,attributes:a})}},1),$(i).prop("outerHTML")},createLegend:function(e){for(var t=this.settings,n=0,a=0,o=t.legend.length;a<o;a++){var l=t.legend[a].label,d=t.colorClass[a];a-1+1==4&&(e.append("<ul></ul>"),n++),e.children("ul").eq(n).append(""+'<li>\n          <span class="key '.concat(d,'"></span>\n          <span>').concat(l,"</span>\n        </li>"))}},createLeaf:function(e,t){var i=this,n=$("#".concat(i.settings.rootId," .chart"),i.container),a=t.attr("class"),o=void 0!==a?$("#".concat(i.settings.rootId," .").concat(a)):t;function l(p){i.setColor(p);var v=i.getTemplate(p),b=i.settings.rootId,w=1===o.length?o:t,T=p.isExpanded||void 0===p.isExpanded?"branch-expanded":"branch-collapsed";if(p.isLeaf&&(T=""),1!==$("#".concat(b," #").concat(p.id)).length&&(w.append("<li class=".concat(T,">").concat($(v)[0].outerHTML,"</li>")),p.children)){for(var k="",A=0,M=p.children.length;A<M;A++){i.setColor(p.children[A]);var L=i.getTemplate(p.children[A]);k+="<li>".concat($(L)[0].outerHTML,"</li>")}(w=$("#".concat(b," #").concat(Fe.stripTags(p.id))).parent()).append("<ul>".concat(k,"</ul>"));for(var z=p.children.length;z--;){var q=$("#".concat(b," #").concat(Fe.stripTags(p.children[z].id)));i.updateState(q,!1,p.children[z],void 0)}}}if(o.length<1&&("top-level"===a?t.insertAfter(".root"):t.appendTo(n)),e.length)for(var d=0,h=e.length;d<h;d++)l(e[d]),i.updateState($("#".concat(i.settings.rootId," #").concat(Fe.stripTags(e[d].id))),!1,e[d],void 0);else l(e),i.updateState($("#".concat(i.settings.rootId," #").concat(Fe.stripTags(e.id))),!1,e,void 0)},setColor:function(e){var t=this,i=this.settings;if(this.setRootColor(e),this.isStackedLayout()&&(e.ancestorPath&&null!==e.ancestorPath&&e.ancestorPath.forEach(function(d){t.setRootColor(d)}),e.centeredNode&&null!==e.centeredNode&&this.setRootColor(e.centeredNode)),e.children&&!e.isRootNode)for(var n=0,a=e.children.length;n<a;n++)for(var o=0,l=i.legend.length;o<l;o++)e.children[n][i.legendKey]===i.legend[o].value&&(e.children[n].colorClass=i.colorClass[o])},setRootColor:function(e){for(var t=this.settings,i=0,n=t.legend.length;i<n;i++){if(e[t.legendKey]===t.legend[i].value){e.colorClass=t.colorClass[i];break}""===e[t.legendKey]&&(e.colorClass="default-color")}},isLeaf:function(e){return e.isLeaf||this.settings.beforeExpand?e.isLeaf:!(e.children&&e.children.length>0)},updateState:function(e,t,i,n){if($.isEmptyObject($(e).data())&&i){var a=void 0===i?{}:i;$(e).data(a)}var o=this.settings,l=$(e).find(".btn"),d=this.isPagingLayout()?"caret-right":"caret-up",h=$(e).data();void 0===h&&void 0!==i&&(h=i),(h.children&&0!==h.children.length||"add"===n)&&(h.isExpanded=!0,h.isLoaded=!0),t&&(h.isRootNode=!0,h.isLoaded=!0),(void 0===h.isExpanded&&h.children||"expand"===n)&&(h.isExpanded=!0),(void 0===h.isExpanded||"collapse"===n)&&(h.isExpanded=!1),h.isExpanded?(l.find("svg.icon").changeIcon(d),l.addClass("btn-expand").removeClass("btn-collapse")):(l.find("svg.icon").changeIcon("caret-down"),l.addClass("btn-collapse").removeClass("btn-expand")),(h.isLeaf||h.isRootNode)&&l.addClass("btn-hidden"),h.isLeaf&&(h.isLoaded=!1,h.isExpanded=!1),this.isPagingLayout()&&(h.parentDataSet=o.dataset),$(e).data(h)},reload:function(e){this.destroy(),this.element.hierarchy(e)},unbind:function(){this.element.empty()},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,Fd)),this.unbind().init()},destroy:function(){this.unbind(),this.element.removeData(Od)}},$.fn.hierarchy=function(s){return this.each(function(){var e=$.data(this,Od);e?e.updated(s):e=$.data(this,Od,new zd(this,s))})};var kl="fieldfilter",zf={dataset:[],dropdownOpts:{},template:""+"<label>".concat(B.translate("FieldFilter"),'</label>\n    <select class="dropdown no-init field-filter-dropdown">\n      {{#dataset}}\n        <option\n          {{#value}} value="{{value}}"{{/value}}\n          {{#selected}} selected{{/selected}}\n          {{#disabled}} class="is-disabled" disabled{{/disabled}}\n          {{#icon}} data-icon="{{icon}}"{{/icon}}\n        >{{text}}</option>\n      {{/dataset}}\n    </select>')};function Hd(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,zf),this.init()}Hd.prototype={init:function(){this.render(),this.handleEvents(),this.setFiltered()},render:function(e){var t=this.settings;if(e=e||t.dataset,"object"===rt(hn)&&e&&t.template){t.template instanceof $?t.template="".concat(t.template.html()):"string"==typeof t.template&&(st.containsHTML(t.template)||(t.template=$("#".concat(t.template)).html()));var i=hn.compile(t.template,{dataset:t.dropdownOpts.source?[]:e}),n=""+'<label for="ffdropdown-empty" class="audible">\n          '.concat(B.translate("FieldFilter"),'\n        </label>\n        <select id="ffdropdown-empty" name="ffdropdown-empty" class="dropdown no-init field-filter-dropdown"></select>');e.length>0?this.element.before(i):0===e.length&&this.element.before(i||n);var a=this.element.attr("id")||this.element.attr("name");typeof a>"u"&&(a=H.uniqueId(this.element,"fieldfilter-"),this.element[0].setAttribute("id",a));var o="".concat(a,"-ff");this.field=this.element.closest(".field, .field-short");var l=B.isRTL();t.dropdownOpts=t.dropdownOpts||{},l&&"object"===rt(t.dropdownOpts)&&(t.dropdownOpts.placementOpts?t.dropdownOpts.placementOpts.x=this.element.outerWidth():t.dropdownOpts.placementOpts={x:this.element.outerWidth()}),t.dropdownOpts.cssClass=t.dropdownOpts.cssClass?"".concat(t.dropdownOpts.cssClass," ffdropdown"):"ffdropdown",t.dropdownOpts.noSearch=!0,this.ffdropdown=this.field.find("select.dropdown.field-filter-dropdown"),this.ffdropdown.dropdown(t.dropdownOpts).prev("label").addClass("audible"),this.ffdropdown[0].setAttribute("id",o),this.ffdropdown[0].setAttribute("name",o),this.ffdropdown.prev("label")[0].setAttribute("for",o);var d=this.ffdropdown.prev("label").prev("label").text();this.field.addClass("fieldfilter-wrapper"),this.field.find("div.dropdown span.audible").text(d),this.ddApi=this.ffdropdown.data("dropdown"),this.ddApi&&this.ddApi.icon&&this.ddApi.icon.addClass("ffdropdown-icon"),H.addAttributes(this.field,this,this.settings.attributes,"",!0),H.addAttributes(this.field.find("label:not(.audible)"),this,this.settings.attributes,"label",!0),H.addAttributes(this.field.find("select"),this,this.settings.attributes,"select",!0)}},setFiltered:function(){if(this.ddApi){var e=this.ddApi.element.find("option:selected");this.filtered=this.getTriggerData(e)}return this},getTriggerData:function(e){var t=this.settings,i=t.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:t.dataset;return{idx:e.index(),item:e,data:i[e.index()]}},getFilterType:function(){return this.setFiltered(),this.filtered},setFilterType:function(e){if(this.ddApi){var t=-1,i=this.settings;if("number"==typeof e&&e>-1&&e<(i.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:i.dataset).length)t=e;else if("string"==typeof e){var a=this.ffdropdown.find('option[value="'.concat(e,'"]'));a.length||(a=this.ffdropdown.find("option").filter(function(){return $(this).text()===e})),a.length&&(t=a.index())}-1!==t&&t!==this.ffdropdown[0].selectedIndex&&(this.ffdropdown[0].selectedIndex=t,this.ddApi.updated(),this.ffdropdown.triggerHandler("change"),this.setFiltered(),this.element.triggerHandler("filtered",[this.filtered]))}},handleEvents:function(){var e=this;return this.ffdropdown.on("listopened.".concat(kl),function(){var t=e.field.is(".field-short")?42:52;$("#dropdown-list ul").width(e.element.outerWidth()+t)}).on("selected.".concat(kl),function(t,i){var n=e.getTriggerData(i);e.element.triggerHandler("filtered",[n])}),this},readonly:function(){return this.ffdropdown.readonly(),this},enable:function(){return this.ffdropdown.enable(),this},disable:function(){return this.ffdropdown.disable(),this},unbind:function(){return this.ffdropdown.off(".".concat(kl)),this.ddApi&&"function"==typeof this.ddApi.destroy&&this.ddApi.destroy(),this.ffdropdown.add(this.ffdropdown.prev("label")).remove(),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element[0],e,zf)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],kl)}},$.fn.fieldfilter=function(s){return this.each(function(){var e=$.data(this,kl);e?e.updated(s):e=$.data(this,kl,new Hd(this,s))})};var $t="fieldoptions",Hf={};function _f(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Hf),this.init(),Ps("FieldOptions")}_f.prototype={init:function(){this.setElements(),this.handleEvents()},setElements:function(){var e=this;this.isFirefox="firefox"===xe.browser.name,this.isSafari=xe.browser.isSafari(),this.field=this.element.closest(".field, .radio-group"),this.targetElem=this.element;var t=this.field.find("label");return t&&(this.label=t),this.element[0].className.match(/(dropdown|multiselect)/)&&(this.targetElem=this.element.data("dropdown").pseudoElem),this.element[0].className.match(/(fileupload)/)&&(this.targetElem=this.field.find('.fileupload[type="text"]')),this.field.addClass("is-fieldoptions"),this.fieldParent=this.element.closest(".field").parent(),this.trigger=this.field.find(".btn-actions"),this.isFirefox&&this.trigger.length&&(this.trigger[0].contentEditable=!0,this.trigger.on("keydown.".concat($t),function(i){9!==(i.which||i.keyCode||i.charCode||0)&&(i.preventDefault(),i.stopPropagation())})),setTimeout(function(){e.popupmenuApi=e.trigger.data("popupmenu"),e.popupmenuApi&&(e.popupmenuApi.settings.returnFocus=!1,e.popupmenuApi.settings.offset.y=10)},100),this},handleEvents:function(){var j,e=this,t=this,i=this.element.data("datepicker"),n=this.element.data("timepicker"),a=this.element.data("dropdown"),o=this.element.data("lookup")||this.element.hasClass("lookup"),l=this.element.is(".checkbox"),d=this.element.is(".fileupload"),h=this.element.is(".searchfield"),p=this.element.is(".colorpicker"),v=this.element.closest(".radio-group").length>0,b=this.element.is(".data")&&this.element.closest(".summary-form").length>0,w=function(j){return $(":focus").is(j)},T=function(j){e.element.addClass("is-focused")},k=function(j){e.element.removeClass("is-focused")},M=function(){t.element.add(t.trigger).add(t.field).add(t.fieldParent).addClass("is-active")},L=function(){t.element.add(t.trigger).add(t.field).add(t.fieldParent).removeClass("is-active")},z=function(j){var X=!w(e.element);return X=!e.trigger.is(j.relatedTarget)&&X,X=!e.trigger.is(".is-open")&&X,X=(!i||!i.isOpen())&&X,X=(!n||!n.isOpen())&&X,X=!$(j.relatedTarget).prev().is(e.element)&&X,X=(!a||!a.isOpen())&&X,X=!(o&&o.modal&&o.modal.isOpen())&&X,(!p||!e.element.is(".is-open"))&&X},O=function(){var X,j=e.element.height();if(b){var fe=parseInt(e.element.css("line-height"),10);if(j>fe){e.element.removeClass("is-singleline"),X=-1*((e.element.outerHeight()-e.trigger.height())/2+0);var he=fe-16;X+=he?he/2:0}else e.element.addClass("is-singleline"),X=2}else v&&(X=(j-10-e.trigger.height())/2*-1);return X},_=function(){e.trigger.css({top:"".concat(O()-1,"px")})};return xe.features.touch?(this.field.addClass("visible"),this.trigger.on("beforeopen.".concat($t),function(G){var j;j=w(e.element),j=(!i||!i.isOpen())&&j,j=(!n||!n.isOpen())&&j,(!a||!a.isOpen())&&j&&M()}).on("close.".concat($t),function(G){z(G)&&L()})):(this.field.removeClass("visible"),this.field.on("mouseover.".concat($t),function(){t.element.prop("disabled")||t.element.closest("is-disabled").length||t.field[0].className.indexOf("visible")<0&&t.field[0].classList.add("visible")}).on("mouseout.".concat($t),function(){t.field[0].className.indexOf("visible")>-1&&t.field[0].classList.remove("visible")})),a&&setTimeout(function(){var G=e.trigger.data("popupmenu");G&&G.menu.closest(".popupmenu-wrapper").css({"z-index":"4502"})},0),(i||n)&&(j=i||n).trigger&&j.trigger.off("show.".concat($t)).on("show.".concat($t),function(){M()}).off("hide.".concat($t)).on("hide.".concat($t),function(X){z(X)&&(L(),e.element.removeClass("is-open"))}),n&&(n.settings.returnFocus=!1),(o||p)&&(this.field.on("click.".concat($t),".lookup-wrapper .trigger, .colorpicker-container .trigger",function(){M()}),p&&this.element.on("beforeopen.".concat($t),function(){M()})),l&&(this.trigger.addClass("is-checkbox"),!xe.features.touch&&this.isSafari&&this.field.on("click.".concat($t),".checkbox-label",function(){M()}).on("mouseout.".concat($t),".checkbox-label",function(){L()})),d&&(this.element.on("change.".concat($t),function(){e.targetElem.focus()}),this.field.on("click.".concat($t),".trigger, .trigger-close",function(){M()})),h&&setTimeout(function(){e.trigger.add(e.trigger.next(".popupmenu")).appendTo(e.element.closest(".searchfield-wrapper"))},0),b&&(_(),this.targetElem.add(this.trigger).on("keydown.".concat($t),function(G){13===(G.which||G.keyCode||G.charCode||0)&&setTimeout(function(){M()},0)}),this.targetElem.attr("tabindex",0).on("click.".concat($t),function(){M()}),$(document).on("click.".concat($t),function(G){$(G.target).is(e.element)||L()}),$("body").on("resize.".concat($t),function(){_()})),v&&(_(),this.element.on("focusin.".concat($t),".radio",function(){var G=e.isSafari?200:0;T(),setTimeout(function(){M()},G)}).on("focusout.".concat($t),".radio",function(){k()}),$("body").on("resize.".concat($t),function(){_()})),this.targetElem.on("focusin.".concat($t),function(){M(),v&&e.isSafari&&T()}).on("focusout.".concat($t),function(G){var j=e.isSafari?200:0;v&&e.isSafari&&k(),setTimeout(function(){z(G)&&L()},j)}),this.trigger.on("focusin.".concat($t," click.").concat($t),function(){M()}).on("focusout.".concat($t),function(G){z(G)&&L()}).on("selected.".concat($t),function(){e.popupmenuApi.settings.returnFocus=!0}).on("close.".concat($t),function(G){z(G)&&L()}),(this.isSafari||d)&&(v&&this.element.attr("tabindex",0),this.targetElem.on("keydown.".concat($t),function(G){9===(G.which||G.keyCode||G.charCode||0)&&!G.shiftKey&&(v?(e.targetElem.find(":checked, .radio:first").not(":disabled").focus(),e.targetElem.find(".radio").off("keydown.".concat($t)).on("keydown.".concat($t),function(X){9===(X.which||X.keyCode||X.charCode||0)&&!G.shiftKey&&setTimeout(function(){e.trigger.focus()},0)})):e.trigger.focus(),M(),G.preventDefault(),G.stopPropagation())})),this.element.on("listopened.".concat($t),function(){M()}).on("listclosed.".concat($t),function(){L()}),this},enable:function(){return this.trigger.prop("disabled",!1),this},disable:function(){return this.trigger.prop("disabled",!0),this},unbind:function(){return this.field.off(["click.".concat($t),"mouseover.".concat($t),"mouseout.".concat($t)].join(" ")),this.element.off(["beforeopen.".concat($t),"change.".concat($t),"focusin.".concat($t),"focusout.".concat($t),"listclosed.".concat($t),"listopened.".concat($t)].join(" ")),this.trigger.off(["beforeopen.".concat($t),"click.".concat($t),"focusin.".concat($t),"focusout.".concat($t),"selected.".concat($t),"close.".concat($t)].join(" ")),this.targetElem.off(["click.".concat($t),"keydown.".concat($t)].join(" ")),$("body").off(["resize.".concat($t)].join(" ")),$(document).off(["click.".concat($t)].join(" ")),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,Hf)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],$t)}},$.fn.fieldoptions=function(s){return this.each(function(){var e=$.data(this,$t);e?e.updated(s):e=$.data(this,$t,new _f(this,s))})};var Sl="fileupload",eh={};function _d(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,eh),this.init()}_d.prototype={init:function(){this.build()},build:function(){var e=this,t=this,i=this.element,n=!i.is("input.fileupload");this.fileInput=n?i.find("input"):i,i.closest(".field, .field-short").addClass("field-fileupload");var a=i.find("input").attr("name");n||(a=i.attr("id")||i.attr("name"));var o=n?i.find("input").attr("class"):i.attr("class");o=o?" ".concat(o):"";var l=B.translate("FileUpload");this.shadowLabel=$('<label for="'.concat(a,'-filename">').concat(i.text(),' <span class="audible">').concat(l,"</span></label>")),this.shadowField=$('<input readonly id="'.concat(a,'-filename" class="fileupload-background-transparent').concat(o,'" type="text">'));var d='<span class="trigger">'.concat($.createIcon("folder"),"</span>"),h='<span class="trigger-close" tabindex="-1">'.concat($.createIcon("close"),"</span>");if(!n){var p=i.prev("label");0===p.length&&(p=i.parent().prev("label")),p.hasClass("required")&&this.shadowLabel.addClass("required"),this.shadowLabel.html("".concat(p.text(),' <span class="audible">').concat(l,"</span>")),p.addClass("audible").add(this.fileInput).attr("tabindex","-1").attr("aria-hidden","true")}0===i.parent().find('input[type="text"]').length&&(i.before(this.shadowLabel,this.shadowField),this.fileInput.after(d,h));var v=this.fileInput.attr("value");v&&v.length>0&&(this.shadowField.val(v),this.fileInput.attr("value","")),this.textInput=this.shadowField,this.svg=i.parent().find(".trigger"),this.svgClose=i.parent().find(".trigger-close"),this.textInput.on("keydown.fileupload",function(b){var w=!1;13===b.which||32===b.which?(i.parent().find('[type="file"]').trigger("click"),w=!0):8===b.which&&!(i.prop("readonly")||i.prop("disabled"))&&(xe.browser.isIE11()&&b.preventDefault(),e.clearUploadFile(),w=!0),w&&b.stopPropagation()}),this.svg.on("click.fileupload",function(b){e.fileInput.trigger("click"),n&&e.fileInput.data("handleEvent".concat([b.type||""]),b.handleObj)}),this.svgClose.on("click.fileupload",function(b){e.clearUploadFile(),e.svgClose.removeClass("is-visible"),n&&e.fileInput.data("handleEvent +".concat([b.type||""]),b.handleObj),t.textInput.trigger("change")}),this.fileInput.is(":disabled")&&this.textInput.prop("disabled",!0),i.hasClass("required")&&(this.shadowLabel.addClass("required"),i.removeClass("required")),this.fileInput.attr("data-validate")&&(this.textInput.attr("data-validate",this.fileInput.attr("data-validate")),this.textInput.validate(),this.shadowLabel.addClass(this.fileInput.attr("data-validate"))),this.fileInput.attr("readonly")&&(this.textInput.prop("disabled",!1),this.textInput[0].classList.remove("fileupload-background-transparent"),this.fileInput.attr("disabled","disabled")),this.fileInput.on("change.fileupload",function(){this.files.length>0?(t.textInput.val(this.files[0].name).trigger("change"),t.svgClose.addClass("is-visible")):t.clearing||t.clearUploadFile()}),this.fileInput.on("click.fileupload",function(b){var w=e.fileInput.data("handleEvent".concat([b.type||""]));w&&w.type===b.type&&"fileupload"===b.handleObj.namespace&&(e.fileInput.data("handleEvent".concat([b.type||""]),null),b.preventDefault())}),this.textInput.on("dragenter.fileupload",function(){e.fileInput.css("z-index","1")}),this.textInput.on("dragleave.fileupload, dragend.fileupload, drop.fileupload",function(){setTimeout(function(){e.fileInput.css("z-index","-1")},1)}),H.addAttributes(i,this,this.settings.attributes),H.addAttributes(this.svg,this,this.settings.attributes,"btn-trigger"),H.addAttributes(this.svgClose,this,this.settings.attributes,"btn-trigger-close")},clearUploadFile:function(){this.clearing=!0,this.fileInput.add(this.textInput).val(""),this.svgClose.removeClass("is-visible"),this.fileInput.triggerHandler("change"),this.clearing=!1},unbind:function(){return this.svg.add(this.svgClose).off("click.fileupload"),this.fileInput.off("change.fileupload"),this.fileInput.prev("label"),this.textInput.off(),this.element.closest(".field-fileupload").removeClass("field-fileupload").find('>label:first, >[type="text"]:first, .trigger, .trigger-close, .icon-dirty, .msg-dirty').remove(),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,eh)),this},destroy:function(){this.unbind(),this.shadowField.remove(),this.shadowLabel.remove(),$.removeData(this.element[0],Sl)},disable:function(){this.textInput.prop("disabled",!0),this.fileInput.prop("disabled",!0)},enable:function(){this.textInput.prop("disabled",!1).prop("readonly",!1),this.fileInput.removeAttr("disabled")},readonly:function(){this.textInput.prop("readonly",!0),this.fileInput.prop("disabled",!0),this.textInput.prop("disabled",!1),this.textInput.removeClass("fileupload-background-transparent")}},$.fn.fileupload=function(s){return this.each(function(){var e=$.data(this,Sl);e?e.updated(s):e=$.data(this,Sl,new _d(this,s))})};var qd="fileuploadadvanced",Ac={isStandalone:!0,standaloneClass:"standalone",allowedTypes:"*",maxFiles:99999,maxFilesInProcess:99999,maxFileSize:-1,fileName:"myfile",isDisabled:!1,showBrowseButton:!0,send:null,textDropArea:null,textDropAreaWithBrowse:null,textBtnCancel:null,textBtnCloseError:null,textBtnRemove:null,errorAllowedTypes:null,errorMaxFileSize:null,errorMaxFiles:null,errorMaxFilesInProcess:null};function qf(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Ac),this.init()}qf.prototype={init:function(){return this.build(),this.handleEvents(),this},build:function(){var t,e=this.settings,i=e.isStandalone?e.standaloneClass:"";if(e.textDropArea=e.textDropArea||B.translate("TextDropArea"),e.textDropAreaWithBrowse=e.textDropAreaWithBrowse||B.translate("TextDropAreaWithBrowse"),e.textBtnCancel=e.textBtnCancel||B.translate("TextBtnCancel"),e.textBtnCloseError=e.textBtnCloseError||B.translate("TextBtnCloseError"),e.textBtnRemove=e.textBtnRemove||B.translate("TextBtnRemove"),e.errorAllowedTypes=e.errorAllowedTypes||"<em>".concat(B.translate("Error"),"</em>: ").concat(B.translate("ErrorAllowedTypes")),e.errorMaxFileSize=e.errorMaxFileSize||"<em>".concat(B.translate("Error"),"</em>: ").concat(B.translate("ErrorMaxFileSize")),e.errorMaxFiles=e.errorMaxFiles||"<em>".concat(B.translate("Error"),"</em>: ").concat(B.translate("ErrorMaxFiles")),e.errorMaxFiles=e.errorMaxFiles.replace("{n}",e.maxFiles),e.errorMaxFilesInProcess=e.errorMaxFilesInProcess||"<em>".concat(B.translate("Error"),"</em>: ").concat(B.translate("ErrorMaxFilesInProcess")),this.element.is(".is-disabled")&&(e.isDisabled=!0),e.isDisabled&&(i+=" is-disabled"),e.showBrowseButton){var n="",a=H.uniqueId(this.element,"fileupload-adv-"),o=e.allowedTypes.split(/[\s|]+/g),l=e.maxFilesInProcess>1?" multiple":"";if(l+=e.isDisabled?" disabled":"",1===o.length)"*"!==o[0]&&(n=".".concat(o[0]));else for(var d=0,h=o.length;d<h;d++)n+=".".concat(o[d]+(d!==h-1?",":""));t=""+'<div class="fileupload-wrapper '.concat(i,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),'\n            <label class="fileupload-adv-browse-lbl">\n              <span>').concat(e.textDropAreaWithBrowse,'</span>\n              <input type="file" name="').concat(a,'" accept="').concat(n,'"').concat(l," />\n            </label>\n          </div>\n        </div>")}else t=""+'<div class="fileupload-wrapper '.concat(i,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),"\n            <p>").concat(e.textDropArea,"</p>\n          </div>\n        </div>");de.append(this.element,t,"<div><svg><use><label><span><input>"),this.dropArea=$(".drop-area",this.element),H.addAttributes(this.dropArea,this,this.settings.attributes),H.addAttributes(this.dropArea.find("svg"),this,this.settings.attributes,"icon"),H.addAttributes(this.dropArea.find("label"),this,this.settings.attributes,"label")},handleEvents:function(){var e=this,t=this,i=this.settings;if(this.dropArea.on("dragenter.fileuploadadvanced",function(o){t.element.triggerHandler("filesdragenter"),o.stopPropagation(),o.preventDefault(),!i.isDisabled&&$(this).addClass("hover")}).on("dragover.fileuploadadvanced",function(o){o.stopPropagation(),o.preventDefault()}).on("drop.fileuploadadvanced",function(o){var l=o.originalEvent.dataTransfer.files;o.preventDefault(),!i.isDisabled&&(t.element.triggerHandler("filesdroped",[l]),$(this).removeClass("hover is-focus"),t.handleFileUpload(l))}),i.showBrowseButton&&!i.isDisabled){var n=this.dropArea.find(".fileupload-adv-browse-lbl"),a=n.find('input[type="file"]');n.click(function(o){$(o.target).is('.hyperlink, input[type="file"]')||o.preventDefault()}),a.hideFocus(),a.on("hidefocusremove.fileuploadadvanced",function(o){o.stopPropagation(),e.dropArea.addClass("is-focus")}).on("hidefocusadd.fileuploadadvanced",function(o){o.stopPropagation(),e.dropArea.removeClass("is-focus")}).on("change.fileuploadadvanced",function(o){o.stopPropagation(),t.handleFileUpload(this.files),this.value=""})}$(document).on("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced",function(o){o.stopPropagation(),o.preventDefault(),"dragover"===o.type&&t.dropArea.removeClass("hover")})},handleFileUpload:function(e){if(null!=e&&e?.length){var t=this.settings;$("span.msg",this.element).closest(".error").remove(),this.totalCompleted=this.totalCompleted||0,this.totalFileList=this.totalFileList||[],this.counter=this.counter||0;var i=$(".progress",this.element).length;if(this.totalCompleted+e.length+i>t.maxFiles)return void this.showError(t.errorMaxFiles);if(i>=t.maxFilesInProcess)return void this.showError(t.errorMaxFilesInProcess);for(var a=t.fileName.replace("[]",""),o=0,l=e.length;o<l;o++)if(this.isFileTypeAllowed(e[o].name))if(-1!==t.maxFileSize&&e[o].size>t.maxFileSize)this.showError(t.errorMaxFileSize,e[o]);else{this.element.triggerHandler("beforecreatestatus",[e[o]]);var d=new FormData;d.append("".concat(a,"[]"),e[o]);var h=this.createStatus(e[o]);h.container.find(".status-icon .action").focus(),this.totalFileList.push(h),this.element.triggerHandler("aftercreatestatus",[e[o]]),"function"==typeof t.send?t.send(d,h):this.sendFileToServer(d,h)}else this.showError(t.errorAllowedTypes,e[o]);t.showBrowseButton&&this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').val("")}},createStatus:function(e){var t=this,i=this,n=this.settings,a=$(""+'<div class="container">\n        <div class="file-row">\n          <span class="status-icon">\n            <button type="button" class="btn-icon action">\n              '.concat($.createIcon({icon:"close",classes:["icon-close"]}),"\n              <span>").concat(n.textBtnCancel,'</span>\n            </button>\n          </span>\n          <span class="description">').concat(e.name,'</span>\n          <div class="l-pull-right">\n            <span class="size">').concat(this.formatFileSize(e.size),'<span id="bar"> | </span><span class="percent">0%</span></span>\n          </div>\n        </div>\n        <div class="progress-row">\n          <span class="progress">\n            <span class="progress-bar" data-value="0"></span>\n          </span>\n        </div>\n      </div>')),o=$(".action",a).button(),l=$(".l-pull-right",a),d=$(".progress-bar",a).progress({animationLength:10}),h=$(".percent",a),p=$("#bar",a),v=this.counter;this.dropArea.after(a);var b=function(){if(t.totalFileList){var L=t.totalFileList.findIndex(function(z){return z.index===v});L>=0&&t.totalFileList.splice(L,1)}};return this.counter++,{file:e,container:a,index:v,setProgress:function(L){t.element.triggerHandler("fileprogress",[{file:e,progress:L}]),h.text(L<=100?"".concat(L,"%"):""),L>100&&p.text(""),d.attr("data-value",L).triggerHandler("updated")},setAbort:function(L){o.on("click.fileuploadadvanced",function(){t.element.triggerHandler("fileaborted",[e]),L&&"function"==typeof L.abort&&L.abort(),o.off("click.fileuploadadvanced"),a.remove(),i.totalCompleted--,b()})},setCompleted:function(L){L=L&&"function"==typeof L.remove?L:{remove:function(){}},a.addClass("completed"),o.after($.createIcon("check")),l.append(""+'<button type="button" class="btn-icon action">\n          '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n          <span>").concat(n.textBtnRemove,"</span>\n        </button>")),$(".action",l).button().on("click.fileuploadadvanced",function(){$(this).off("click.fileuploadadvanced"),i.element.triggerHandler("beforefileremove",[e]),a.hasClass("completed")&&i.totalCompleted--,a.remove(),L.remove(),i.element.triggerHandler("fileremoved",[e])}),d.destroy(),o.off("click.fileuploadadvanced"),o.add(d.closest(".progress-row")).remove(),i.totalCompleted++,b(),i.element.triggerHandler("filecompleteuploading",[e])},setFailed:function(L){i.element.triggerHandler("filefailed",[{error:L,file:e}]),b(),a.remove(),i.showError(L,e)}}},sendFileToServer:function(e,t){var n={remove:function(){}},a=0,o=parseFloat(t.file.size),l=new $.fn.timer(function(){t.setCompleted(n)},o);$(l.event).on("update",function(d,h){a=Math.ceil(h.counter/o*100),t.setProgress(a)}),t.setAbort({abort:function(){}})},setFailed:function(e){this.totalFileList&&this.totalFileList.length>0&&this.totalFileList[arguments.length>1&&void 0!==arguments[1]?arguments[1]:0].setFailed(e)},showError:function(e,t){var n,i=this,a=this.settings;n=e===a.errorMaxFiles||e===a.errorMaxFilesInProcess?$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon file-error">\n              '.concat($.createIcon({classes:["icon-error"],icon:"error"}),'\n            </span>\n            <span class="msg">').concat(e,'</span>\n            <div class="l-pull-right">\n              <button type="button" class="btn-icon action">\n                ').concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n              </button>\n            </div>\n          </div>\n        </div>")):$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon file-error">\n              '.concat($.createIcon({classes:["icon-error"],icon:"error"}),'\n            </span>\n            <span class="description">').concat(t.name,'</span>\n            <div class="l-pull-right file-error">\n              <span class="size">').concat(this.formatFileSize(t.size),'</span>\n              <button type="button" class="btn-icon action">\n                ').concat($.createIcon({classes:["icon-close"],icon:"close"}),'\n              </button>\n            </div>\n          </div>\n          <div class="msg">\n            <p>').concat(e,"</p>\n          </div>\n        </div>")),$(".action",n).button().on("click.fileuploadadvanced",function(){i.element.triggerHandler("beforeerrormessageremove",[{error:e,file:t}]),n.remove()}),this.dropArea.after(n)},isFileTypeAllowed:function(e){var t=this.settings.allowedTypes.toLowerCase().split(/[\s|]+/g),i=e.split(".").pop().toLowerCase();return!("*"!==this.settings.allowedTypes&&$.inArray(i,t)<0)},formatFileSize:function(e){return"number"!=typeof e?"":e>=1e9?"".concat((e/1e9).toFixed(2)," GB"):e>=1e6?"".concat((e/1e6).toFixed(2)," MB"):"".concat((e/1e3).toFixed(2)," KB")},enable:function(){this.settings.isDisabled=!1,this.element.find(".fileupload-wrapper").removeClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').removeAttr("disabled")},disable:function(){this.settings.isDisabled=!0,this.element.find(".fileupload-wrapper").addClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').attr("disabled","disabled")},unbind:function(){this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').off("hidefocusremove.fileuploadadvanced hidefocusadd.fileuploadadvanced change.fileuploadadvanced"),this.dropArea.off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(document).off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(".action",this.element).off("click.fileuploadadvanced");var e=$(".fileupload-wrapper",this.element);return e.off().find("*").off(),e.remove(),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,Ac)),this.unbind().init()},destroy:function(){this.unbind(),$(".fileupload-wrapper",this.element).remove(),$.removeData(this.element[0],qd)}},$.fn.fileuploadadvanced=function(s){return this.each(function(){var e=$.data(this,qd);e?e.updated(s):e=$.data(this,qd,new qf(this,s))})};var th="homepage",Ec={animate:!0,columns:3,editing:!1,easing:"blockslide",gutterSize:16,widgetWidth:360,widgetHeight:368,useSmall:!1,timeout:100};function ih(s,e){this.settings=H.mergeSettings(s,e,Ec),this.element=$(s),this.init()}function ah(s){this.element=$(s),this.init()}ih.prototype={get state(){var s=this.rowsAndCols.length,e=s?this.rowsAndCols[0].length:0,t=this.settings;return-1===this.rowsAndCols[s-1].indexOf(!1)&&(s-=1),void 0===this.editing&&(this.editing=t.editing),{rows:s,cols:e,containerHeight:function n(){return t.gutterSize+(t.gutterSize+t.widgetHeight)*s}(),matrix:this.rowsAndCols,blocks:this.blocks,editing:this.editing}},init:function(){var e=this;if(this.setSmall(),this.setColumns(),this.initHeroWidget(),this.handleEvents(),this.initEdit(),this.settings.background){var t=this.settings.background.banner,i=$("<div></div>");if(this.background={},t.image&&(i.attr("style","background-image: url(".concat(t.image,")")),i.addClass("background-image"),this.background.imageElement=i),t.icon){var n=this.element.find("> .content"),a="background-image: url(".concat(t.icon.image,");").concat(t.icon.height?"height: ".concat(t.icon.height,"px;"):"").concat(t.icon.width?"width: ".concat(t.icon.width,"px;"):""),o=$('<div style="'.concat(a,'"></div>'));o.addClass("banner-icon"),this.background.iconElement=o,this.element.prepend(o),n.addClass("has-banner-icon")}this.element.append(i)}setTimeout(function(){e.resize(e,!1)},100),this.element.parent().addClass("homepage-background")},setColumns:function(){var e=this.settings.columns,t=parseInt(this.element.attr("data-columns"),10);!isNaN(t)&&e!==t&&e===Ec.columns&&(e=t),this.columns=e},setSmall:function(){var e=this.settings,t=this.element.attr("data-use-small");if(e.useSmall||t&&"true"===t.toString().toLowerCase()){var i=Ec,n={gutterSize:24,widgetWidth:260,widgetHeight:260};e.useSmall=!0,e.gutterSize===i.gutterSize&&(e.gutterSize=n.gutterSize),e.widgetWidth===i.widgetWidth&&(e.widgetWidth=n.widgetWidth),e.widgetHeight===i.widgetHeight&&(e.widgetHeight=n.widgetHeight)}},initColumns:function(e){this.rowsAndCols[e=e||0]=[];for(var t=0,i=this.columns;t<i;t++)this.rowsAndCols[e][t]=!0},initHeroWidget:function(){var e=this.element.parent().find(".hero-widget"),t=this.settings.heroWidgetBackground;e.length>1&&(e=e.not(":first").remove()),t&&(t.image&&e.attr("style","background-image: url(".concat(this.settings.heroWidgetBackground.image,")")),t.color&&e.attr("style","background-color: ".concat(t.color))),this.heroWidget=e},initRowsAndCols:function(){this.rowsAndCols=[],this.initColumns()},initEdit:function(){var e=this,t=this,i=t.element.find(".card, .widget, .small-widget");void 0===t.editing&&(t.editing=t.settings.editing),t.editing?(i.attr("draggable",!0),i.css("cursor","move"),t.guide=$("<div>").addClass("drop-indicator").append("\n      <div class='edge'></div>\n      <div class='line'></div>\n      <div class='edge'></div>\n      "),i.each(function(n,a){var o=$(a),l=$("<button>").addClass("card-remove").append('\n        <span class="audible">Remove Widget</span>\n          <svg icon="close" soho-icon="" class="icon" aria-hidden="true" focusable="false" role="presentation">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-close"></use>\n          </svg>\n        ');if(!o.hasClass("no-remove")){var d=o.children(".widget-header");l.insertBefore(d).on("click.card-remove",function(){var h=function(){var b=o.clone(!0);o.remove(),t.refresh(!1),setTimeout(function(){t.element.triggerHandler("removecard",[o,t.state]),b.triggerHandler("removecard",[o,t.state]),b.remove()},0)};if(e.settings&&"function"==typeof e.settings.onBeforeRemoveCard){var p=e.settings.onBeforeRemoveCard(o);p&&p.then&&"function"==typeof p.then?p.then(function(){return h()}):p&&h()}else h()})}}),i.on("mouseenter.card",function(){var n=$(this),a=$("<div>").addClass("ui-resizable-handle ui-resizable-e").drag({axis:"x"}).on("dragstart.handle",function(l){l.stopPropagation(),l.preventDefault(),n.addClass("ui-resize-passive"),n.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",function(d){var h=d.clientX-n.offset().left;h<t.settings.widgetWidth/2?a.css({left:t.settings.widgetWidth/2}):n.width(h)}).on("mouseup.handle",function(){n.removeClass("ui-resize-passive"),n.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),n.removeClass("double-width triple-width quad-width quintuple-width");var d=n.width()/t.settings.widgetWidth;d>4.5?n.addClass("quintuple-width"):d>3.5?n.addClass("quad-width"):d>2.5?n.addClass("triple-width"):d>1.5&&n.addClass("double-width"),$(".ui-resizable-handle").remove(),n.css({opacity:1,width:""}),t.refresh(!1),setTimeout(function(){n.triggerHandler("resizecard",[n,t.state]),t.element.triggerHandler("resizecard",[n,t.state])},0)})}),o=$("<div>").addClass("ui-resizable-handle ui-resizable-s").drag({axis:"y"}).on("dragstart.handle",function(l){l.stopPropagation(),l.preventDefault(),n.addClass("ui-resize-passive"),n.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",function(d){var h=d.clientY-n.offset().top;h<t.settings.widgetHeight?o.css({top:t.settings.widgetHeight}):n.height(h)}).on("mouseup.handle",function(){n.removeClass("ui-resize-passive"),n.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),n.removeClass("double-height"),n.height()/t.settings.widgetHeight>1.5&&n.addClass("double-height"),$(".ui-resizable-handle").remove(),n.css({opacity:1,height:""}),t.refresh(!1),setTimeout(function(){n.triggerHandler("resizecard",[n,t.state]),t.element.triggerHandler("resizecard",[n,t.state])},0)})});0===n.has(".ui-resizable-handle").length&&n.append(a,o),n.addClass("editable-hover-border")}).on("mouseleave.card",function(){var n=$(this);n.hasClass("ui-resize-passive")||$(".ui-resizable-handle").remove(),n.removeClass("editable-hover-border")}).on("dragstart.card",function(){var n=$(this);n.addClass("is-dragging"),n.css("opacity","0.99")}).on("dragover.card",function(n){n.preventDefault()}).on("dragenter.card",function(n){n.preventDefault();var a=$(this),o=$(".is-dragging");a.is(o)&&0===$(".drop-indicator").length||(o.index()<a.index()?(t.guide.css("right","-14px"),t.guide.css("left","")):(t.guide.css("left","-14px"),t.guide.css("right","")),a.append(t.guide),t.refresh(!1))}).on("dragend.card",function(){var n=$(this);if(n.hasClass("is-dragging")){var a=$(i).has(".drop-indicator");n.css("opacity",""),n.index()<a.index()?n.insertAfter(a):n.insertBefore(a),n.removeClass("is-dragging"),t.guide.remove(),t.refresh(!1),setTimeout(function(){n.triggerHandler("reordercard",[n,t.state]),t.element.triggerHandler("reordercard",[n,t.state])},0)}})):(i.removeAttr("draggable"),i.children(".card-remove").remove(),i.off("mouseenter.card mouseleave.card dragstart.card dragenter.card dragend.card"),i.not(".card-list .card").css("cursor","auto"))},setEdit:function(e){void 0!==e&&(this.editing=e,this.initEdit(),this.refresh(!1))},getAvailability:function(e){for(var t=!1,i={},n=this.rowsAndCols.length,a=0,o=n;a<o&&!t;a++)for(var l=0,d=!0,h=this.rowsAndCols[a].length;l<h&&!t;l++)if(this.rowsAndCols[a][l]&&e.w+l<=h){if(e.w>1&&h>l+1)for(var p=0;p<e.w;p++)if(!this.rowsAndCols[a][l+p]){d=!1;break}if(e.h>1&&n>a+1)for(var v=0;v<e.h&&a+v<this.rowsAndCols.length;v++)if(!this.rowsAndCols[a+v][l]){d=!1;break}d&&(i.row=a,i.col=l,t=!0)}return Object.getOwnPropertyNames(i).length||(this.initColumns(n),i.row=n,i.col=0),i},fitBlock:function(e,t,i){var n=!0;if(i.x=t,i.y=e,1===i.w&&1===i.h)this.rowsAndCols[e][t]=!1;else if(1!==i.w)for(var a=e,o=i.h+e;a<o;a++)for(var l=t,d=i.w+t;l<d;l++)this.rowsAndCols[a]||this.initColumns(a),this.rowsAndCols[a][l]=!1;else for(var h=e,p=i.h+e;h<p;h++)for(var v=t,b=i.h+t;v<b;v++)this.rowsAndCols[h]||this.initColumns(h),this.rowsAndCols[h][t]=!1;for(var w=0,T=this.rowsAndCols[e].length;w<T;w++)this.rowsAndCols[e][w]&&(n=!1);n&&(this.rowsAndCols[e+1]||this.initColumns(e+1))},setBlocks:function(){var e=this.element.find(".card, .widget, .small-widget").not(".card-list .card, .banner .widget");this.blocks=[];for(var t=0,i=e.length;t<i;t++){var o,n=$(e[t]),a=void 0;if(n.hasClass("auto-height")){var l=this.settings.widgetHeight+this.settings.gutterSize;n.height()>l*a&&(a=Math.ceil(n.height()/l))}else a=n.hasClass("sextuple-height")?6:n.hasClass("quintuple-height")?5:n.hasClass("quad-height")?4:n.hasClass("triple-height")?3:n.hasClass("double-height")?2:1;o=n.hasClass("sextuple-width")?6:n.hasClass("quintuple-width")?5:n.hasClass("quad-width")?4:n.hasClass("triple-width")?3:n.hasClass("double-width")?2:1,this.blocks.push({w:o,h:a,elem:n,text:n.text()})}if(this.columns>1)for(var d=0,h=0,p=0,v=this.blocks.length;d<v;d++)this.blocks[d].w>=this.columns&&d&&p&&p<=this.columns/2&&this.arrayIndexMove(this.blocks,d,h),(p+=this.blocks[d].w)>=this.columns&&(p=0,h=this.blocks[h].w>=this.columns?h+1:d)},arrayIndexMove:function(e,t,i){e.splice(i,0,e.splice(t,1)[0])},resize:function(e,t){var L,i=e.element.find("> .content"),n=6*e.settings.widgetWidth+5*e.settings.gutterSize,a=5*e.settings.widgetWidth+4*e.settings.gutterSize,o=4*e.settings.widgetWidth+3*e.settings.gutterSize,l=3*e.settings.widgetWidth+2*e.settings.gutterSize,d=2*e.settings.widgetWidth+e.settings.gutterSize,h=e.settings.widgetWidth,p=n,v=e.element.outerWidth(),b=v>=n,w=v>=a&&v<=n,T=v>=o&&v<=a,k=v>=l&&v<=o,A=v>=d&&v<=l,M=v<=d;if(this.setColumns(),(b||6===e.columns)&&(L=6,p=n),(w||5===e.columns)&&(L=5,p=a),(T||4===e.columns)&&(L=4,p=o),(k||3===e.columns)&&(L=3,p=l),(A||2===e.columns)&&(L=2,p=d),(M||1===e.columns)&&(L=1,p=h),e.columns=L||this.settings.columns,i.length){var z;i[0].style.marginLeft="-".concat(p/2,"px"),null!==(z=e.background)&&void 0!==z&&z?.iconElement&&(e.background.iconElement[0].style.marginLeft="-".concat(p/2,"px"));var q=i.find(".banner .circlepager");if(q){var O=q.data("circlepager");O&&O.slidesToShow!==e.columns&&(O.responsiveSlidesToShow(e.columns),O.slidesJQ.each(1===O.slidesToShow?function(ti,ci){ci.style.margin=0}:function(ti,ci){if(0!==ti&&ti%e.columns==0){var di="-10px";e.columns>=4&&(di="-15px"),e.columns<=2&&(di="-5px"),ci.style.marginLeft=di}else ci.style.margin=null}))}}this.setBlocks(),this.initRowsAndCols();for(var _=0,G=e.blocks.length;_<G;_++){var j=e.blocks[_];j.elem.removeClass("to-single to-double to-triple to-quad to-quintuple"),j.w>e.columns&&(j.w=e.columns,1===e.columns?j.elem.addClass("to-single"):2===e.columns?j.elem.addClass("to-double"):3===e.columns?j.elem.addClass("to-triple"):4===e.columns?j.elem.addClass("to-quad"):5===e.columns&&j.elem.addClass("to-quintuple"));var X=e.getAvailability(j),fe=e.element.find(".banner.widget").length>0,he=e.settings.widgetWidth+e.settings.gutterSize,we=he*e.columns,le={left:B.isRTL()?we-(he*j.w+he*X.col):he*X.col,top:(e.settings.widgetHeight+e.settings.gutterSize)*X.row-12};if(t&&!this.editing){var Te=e.settings.easing;"blockslide"===Te?(e.applyCubicBezier(j.elem,[.09,.11,.24,.91]),j.elem[0].style.left="".concat(le.left,"px"),j.elem[0].style.top="".concat(le.top+(fe&&!j.elem.hasClass("banner")?40:0),"px")):j.elem.animate(le,e.settings.timeout,Te)}else e.applyCubicBezier(j.elem,null),j.elem[0].style.left="".concat(le.left,"px"),j.elem[0].style.top="".concat(le.top+(fe&&!j.elem.hasClass("banner")?40:0),"px");e.fitBlock(X.row,X.col,j)}var ce=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),Be=this.element.is(".page-container");if(this.element.css("height",""),!ce&&!Be){var qe=this.element.find(".card, .widget, .small-widget").not(".card-list .card"),Oe=$(qe[0]),ot=0,He=!1,Ae=Oe.outerHeight();Oe[0]&&(Ae+=parseInt(window.getComputedStyle(Oe[0]).getPropertyValue("margin-top"),10),Ae+=parseInt(window.getComputedStyle(Oe[0]).getPropertyValue("margin-bottom"),10));for(var We=0;We<this.rowsAndCols.length&&!He;We++){ot++;for(var yt=this.rowsAndCols[We],Dt=0;Dt<yt.length&&!He;Dt++)yt[Dt]&&(He=!0,0===Dt&&ot--)}this.element.css("height","".concat(Ae*ot,"px"))}e.element.triggerHandler("resize",[e.columns,e.state])},applyCubicBezier:function(e,t){var i=t?"all .3s cubic-bezier(".concat(t,")"):"none";e[0].style.transition=i},refresh:function(e){var t=this;setTimeout(function(){t.resize(t,e=typeof e<"u"?e:t.settings.animate)},0)},detachEvents:function(){$("body").off("resize.homepage"),$(".application-menu").off("applicationmenuopen.homepage applicationmenuclose.homepage")},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,Ec)),this.detachEvents().init()},destroy:function(){this.detachEvents(),$.removeData(this.element[0],th)},handleEvents:function(){var e=this;$("body").on("resize.homepage",function(){e.resize(e,e.settings.animate)}),$(".application-menu").on("applicationmenuopen.homepage applicationmenuclose.homepage",function(){e.resize(e,e.settings.animate)})}},$.fn.homepage=function(s){return this.each(function(){var e=$.data(this,th);e?e.updated(s):e=$.data(this,th,new ih(this,s))})},ah.prototype={init:function(){this.build()},build:function(){var e=this.element.find(".text .title");if(e[0].offsetHeight<e[0].scrollHeight||e[0].offsetWidth<e[0].scrollWidth){var t={title:e.text(),maxWidth:this.element.hasClass("dual")?350:171};e.tooltip(t)}return this}},$.fn.link=function(){return this.each(function(){var s=$.data(this,"link");s||(s=$.data(this,"link",new ah(this)))})};var ns="pager",Ug=[".pager-first > .btn-icon",".pager-prev > .btn-icon",".pager-next > .btn-icon",".pager-last > .btn-icon",".pager-no > .btn-icon",".pager-count input",".pager-pagesize button"].join(", "),Gg={componentAPI:void 0,type:"list",position:"bottom",activePage:1,hideOnOnePage:!1,source:null,pagesize:15,pagesizes:[15,25,50,75],footerContainment:!0,footerContainmentClass:null,pageSelectorInputText:null,showPageSelectorInput:!1,showPageSizeSelector:!0,smallPageSizeSelector:!1,pageSizeSelectorText:"RecordsPerPage",pageSizeSelectorTextNoToken:"RecordsPerPageNoToken",onPageSizeChange:null,showFirstButton:!0,enableFirstButton:!0,showPreviousButton:!0,enablePreviousButton:!0,showNextButton:!0,enableNextButton:!0,showLastButton:!0,enableLastButton:!0,indeterminate:!1,onFirstPage:null,onPreviousPage:null,onNextPage:null,onLastPage:null,firstPageTooltip:"FirstPage",previousPageTooltip:"PreviousPage",nextPageTooltip:"NextPage",lastPageTooltip:"LastPage",pageSizeMenuSettings:{attachToBody:!1},attributes:null,tabbable:!0};function Wd(s,e){var t;this.settings=H.mergeSettings(s,e,Gg),this.settings.dataset=e.dataset,this.settings.pagesizes=(null===(t=e.pagesizes)||void 0===t?void 0:t?.length)>0?e.pagesizes:this.settings.pagesizes,this.element=$(s),this.init()}Wd.prototype={get state(){var t,i,n,s=0,e=1,a=this.settings.indeterminate,o=999999999,l=this.settings.pagesize,d=this.previousOperation,h=this.previousTrigger,p=this.settings.dataset;return isNaN(this.serverDatasetTotal)?p&&p.length&&(s=p.length,this.isFilteredClientside)&&(s=p.filter(function(b){return!b._isFilteredOut}).length):s=this.serverDatasetTotal,this.grandTotal&&(n=this.grandTotal),e=a?o:s<1?1:Math.ceil(s/l),isNaN(this.filteredTotal)||(i=this.filteredTotal,a?e=o:t=i<1?1:Math.ceil(i/l)),{activePage:this.activePage,indeterminate:this.settings.indeterminate,grandTotal:n,pagesize:l,pages:e,trigger:h,total:s,type:d,filteredActivePage:this.filteredActivePage,filteredTotal:i,filteredPages:t}},get pagingInfo(){return gi("state","pagingInfo"),this.state},get focusableElements(){return H.getArrayFromList(this.pagerBar[0].querySelectorAll(Ug))},get numberButtons(){if(!this.isTable){var e=this.pagerBar[0].querySelectorAll("li:not(.pager-prev):not(.pager-next):not(.pager-first):not(.pager-last):not(.pager-pagesize)");return H.getArrayFromList(e)}},get pageSelectorInput(){if(!this.isListView)return this.pagerBar[0].querySelector(".pager-count input")},get pageSizeSelectorButton(){if(this.settings.showPageSizeSelector)return this.pagerBar[0].querySelector(".pager-pagesize button")},get showSmallPageSizeSelector(){return!!this.settings.showPageSizeSelector&&(!0===this.settings.smallPageSizeSelector||this.isListView&&this.element.parents(".list-detail").length)},init:function(){var e=this;this.setup(),this.createPagerBar(),this.setActivePage(this.settings.activePage,!0),setTimeout(function(){e.triggerPagingEvents(e.settings.activePage)}),this.handleEvents()},setup:function(){if(this.element.attr("data-pagesize")){var e=Number(this.element.attr("data-pagesize"));isNaN(e)||(this.settings.pagesize=e),this.element.removeAttr("data-pagesize")}-1===this.settings.pagesizes.indexOf(this.settings.pagesize)&&(this.settings.pagesizes.push(this.settings.pagesize),this.settings.pagesizes=this.settings.pagesizes.sort(function(o,l){return o-l})),this.handleDeprecatedSettings();var i=this.element.parents(".card, .widget");return this.element.is("tbody")&&(this.isTable=!0,this.settings.type="table",this.mainContainer=this.element.closest(".datagrid-container"),this.settings.componentAPI||(this.settings.componentAPI=this.mainContainer.data("datagrid")),i.length&&i[0].classList.add("has-datagrid")),this.element.is(".listview")&&(this.isTable=!1,this.isListView=!0,this.mainContainer=this.element,this.settings.componentAPI||(this.settings.componentAPI=this.element.data("listview"))),this.element.attr({role:"region","aria-label":B.translate("Pagination")}),this},createPagerBar:function(){var e=this;if(!this.pagerBar&&(this.pagerBar=this.element.prev(".pager-toolbar"),0===this.pagerBar.length&&(this.pagerBar=$('<ul class="pager-toolbar"></ul>')),"standalone"===this.settings.type?(this.pagerBar.addClass("is-standalone"),this.isListView?this.mainContainer.after(this.pagerBar):this.element.append(this.pagerBar)):this.isTable?this.mainContainer.after(this.pagerBar):"bottom"===this.settings.position?this.element.after(this.pagerBar):this.element.before(this.pagerBar),this.isListView&&this.pagerBar.addClass("is-listview"),this.element.closest(".card, .widget").length&&this.settings.footerContainment&&!this.isTable)){var i=this;["widget","card"].forEach(function(a){var o=i.element.closest(".".concat(a,"-content"));if(o.length){var l=o.next(".".concat(a,"-footer"));l.length||(l=$('<div class="'.concat(a,'-footer"></div>')).insertAfter(o)),e.settings.footerContainmentClass&&l.addClass(e.settings.footerContainmentClass.toString()),i.pagerBar.appendTo(l)}})}},handleDeprecatedSettings:function(){void 0!==this.settings.attachPageSizeMenuToBody&&(gi("pageSizeMenuSettings.attachToBody (setting)","attachPageSizeMenuToBody (setting)"),this.settings.pageSizeMenuSettings.attachToBody=this.settings.attachPageSizeMenuToBody,delete this.settings.attachPageSizeMenuToBody)},handleEvents:function(){var e=this;this.pagerBar.on("click.pager",".btn-icon",function(t){var i=t.currentTarget,n=i.parentNode,a=document.querySelector(".datagrid-cell-wrapper .dropdown"),o=document.querySelector(".datagrid-dropdown-list");if(t.preventDefault(),$(this).attr("disabled"))return!1;if(o){var l=a.parentNode.parentNode;o.remove(),l.classList.remove("is-editing")}var d=e.state,h=d.activePage;if(d.filteredTotal&&(h=d.filteredActivePage),de.hasClass(n,"pager-prev"))return e.setActivePage(h-1,!1,"prev"),e.triggerPagingEvents(h),!1;if(de.hasClass(n,"pager-next"))return e.setActivePage((-1===h?1:h)+1,!1,"next"),e.triggerPagingEvents(h),!1;if(de.hasClass(n,"pager-first"))return e.setActivePage(1,!1,"first"),e.triggerPagingEvents(h),!1;if(de.hasClass(n,"pager-last"))return e.setActivePage(e.pageCount(),!1,"last"),e.triggerPagingEvents(h),!1;var p=Number(i.getAttribute("data-page"));return(isNaN(p)||p<1)&&(p=1),e.setActivePage(p,!1,"page"),e.triggerPagingEvents(h),!1}),e.pagerBar.on("keydown.pager",$(e.focusableElements),function(t){if($(".popupmenu.is-open").length>0||e.settings.tabbable)return!0;var i=(t=t||window.event).which||t.keyCode||t.charCode||!1,n=37===i||40===i,a=39===i||38===i,o=t.target;if("INPUT"===o.nodeName&&(n=40===i,a=38===i),!n&&!a)return!0;var l="INPUT"===o.nodeName?o.parentNode.parentNode:o.parentNode,d=l.nextSibling,h=l.previousSibling,p=null===h,v=null===d;if(t.preventDefault(),n&&!p){var b=h.querySelector("button, input");return b.removeAttribute("tabindex"),o.setAttribute("tabindex","-1"),b.focus(),!1}if(n&&p){var w=l.parentNode.lastChild.querySelector("button, input");return w.removeAttribute("tabindex"),o.setAttribute("tabindex","-1"),w.focus(),!1}if(a&&!v){var T=d.querySelector("button, input");return T.removeAttribute("tabindex"),o.setAttribute("tabindex","-1"),T.focus(),!1}if(a&&v){var k=l.parentNode.firstChild.querySelector("button, input");k.removeAttribute("tabindex"),o.setAttribute("tabindex","-1"),k.focus()}return!1})},reset:function(e,t){this.activePage=this.settings.activePage,this.previousOperation=e,this.previousTrigger=t,this.teardown(),this.init()},showPageSizeSelector:function(e){e="true"==="".concat(e).toLowerCase(),this.settings.showPageSizeSelector=e,e&&(this.isShowPageSizeSelectorCall=e)},showButton:function(e,t){if(-1!==["first","last","next","previous"].indexOf(e)){var n=".pager-".concat(e," .btn-icon");"previous"===e&&(n=".pager-prev .btn-icon");var a=this.pagerBar[0].querySelector(n);t="true"==="".concat(t).toLowerCase(),this.settings["show".concat(st.capitalize(e),"Button")]=t,a&&(t?a.parentNode.classList.remove("hidden"):a.parentNode.classList.add("hidden"))}},enableButton:function(e,t){if(-1!==["first","last","next","previous"].indexOf(e)){var n=".pager-".concat(e," .btn-icon");"previous"===e&&(n=".pager-prev .btn-icon");var a=this.pagerBar[0].querySelector(n);if(t="true"==="".concat(t).toLowerCase(),this.settings["enable".concat(st.capitalize(e),"Button")]=t,a){var o=$(a),l=this.settings["".concat(e,"PageTooltip")];if(t){a.disabled=!1,a.parentNode.classList.remove("is-disabled"),o.removeAttr("disabled aria-disabled");var d=o.data("tooltip");d&&!d.content&&(d.content=l)}else a.disabled=!0,a.parentNode.classList.add("is-disabled"),o.attr({disabled:"disabled","aria-disabled":"true"}),o.find(".disabled-tooltip").length||(o.data("tooltip").destroy(),o.append('<div class="disabled-tooltip" title="'.concat(l,'"></div>')),o.find(".disabled-tooltip").tooltip())}}},setActivePage:function(e,t,i){var n="number"==typeof e.searchActivePage||"number"==typeof e.filteredActivePage||"number"==typeof this.filteredActivePage,a=this.filteredActivePage||this.activePage||this.settings.activePage;return"object"===rt(e)?a=n?e.filteredActivePage||e.searchActivePage:e.activePage?e.activePage:1:isNaN(e)||(a=e),n?this.filteredActivePage=a:this.activePage=a,this.previousOperation=i,this.render(),void 0===a||0===a||isNaN(a)||a===this.activePage&&!t?this.activePage:(this.settings.componentAPI&&this.settings.componentAPI.saveUserSettings&&this.settings.componentAPI.saveUserSettings(),a)},adjustPageCount:function(e){var t=this.state,n=t.pages;return("number"==typeof t.filteredActivePage||"number"==typeof this.filteredActivePage)&&t.filteredPages&&(n=t.filteredPages),(e<1||e>n)&&(e=this.filteredActivePage||this.activePage),e},pageCount:function(e){var t=this.isShowPageSizeSelectorCall;return delete this.isShowPageSizeSelectorCall,void 0===e&&this.settings.indeterminate&&(this._pageCount=this.settings.pagesize),void 0!==e||this.settings.source||t?(void 0!==e&&(this._pageCount=e),this._pageCount=this._pageCount||1,this.settings.indeterminate?999999999:this._pageCount):this._pageCount},hidePager:function(){this.pagerBar.hide()},showPager:function(){this.pagerBar.show()},renderButtons:function(){var k,e=this.activePage,t=this.state.pages,i="",n=!1,a=!1,o=!1,l=!1,d=!this.settings.enableFirstButton,h=!this.settings.enablePreviousButton,p=!this.settings.enableNextButton,v=!this.settings.enableLastButton,b=this.settings.indeterminate&&!0===this.firstPage,w=this.settings.indeterminate&&!0===this.lastPage,T=this.settings.dataset&&this.settings.dataset.length;this.state.filteredPages&&(e=this.state.filteredActivePage,t=this.state.filteredPages),this.pagerBar&&(null===(k=this.pagerBar)||void 0===k||k?.children("li").find("> .btn-icon, > .btn-icon[disabled] .disabled-tooltip").each(function(re,Ne){var le=$(Ne);le.data("tooltip")&&le.data("tooltip").destroy()})),this.settings.showFirstButton&&((b||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===e)&&(d=!0),n=!0),this.settings.showPreviousButton&&((b||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===e)&&(h=!0),a=!0),this.settings.showNextButton&&((w||!this.settings.indeterminate&&"standalone"!==this.settings.type&&e===t)&&(p=!0),o=!0),this.settings.showLastButton&&((w||!this.settings.indeterminate&&"standalone"!==this.settings.type&&e===t)&&(v=!0),l=!0);var L=[],z=this.settings.showPageSizeSelector?190:0,q=(this.pagerBar.width()-z)/40,_=Math.floor(q);if((a||o)&&(_-=1),(l||n)&&(_-=1),!this.isTable&&"standalone"!==this.settings.type&&T&&_>=t&&(d=!0,v=!0),!this.settings.indeterminate){for(var G=Math.floor(_/2),j=e-G,X=e+G;j<1;)++j,X<t&&++X;for(;X>t;)j>1&&--j,--X;for(var fe=j;fe<X+1;fe++)L.push(fe)}function he(){var re=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",Ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",le=arguments.length>2?arguments[2]:void 0,Te=arguments.length>3?arguments[3]:void 0,ge=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",ce=arguments.length>5&&void 0!==arguments[5]&&arguments[5],Be=arguments.length>6&&void 0!==arguments[6]&&arguments[6],qe=arguments.length>7&&void 0!==arguments[7]&&arguments[7],Oe="",ot="",He="",Ae="",We="";return Te&&(We=' data-page="'.concat(Te,'"')),le&&(Ae=' title="'.concat(le,'"')),qe&&(ge+=" hidden"),ce&&(ge+=" selected",Oe=' aria-disabled="true"'),Be&&(ot=" disabled",Oe=' aria-disabled="true"',He='<div class="disabled-tooltip"'.concat(Ae,"></div>"),Te||(Ae="")),'<li class="'.concat(ge,'">\n        <button type="button" class="btn-icon"').concat(Ae).concat(We).concat(Oe).concat(ot,">\n          ").concat(He,"<span>").concat(Ne,"</span>\n          ").concat(re,"\n        </button>\n      </li>")}if($(this.numberButtons).remove(),n&&(i+=he($.createIcon({icon:"first-page"}),B.translate("FirstPage"),this.settings.firstPageTooltip,null,"pager-first",!1,d,!1)),a&&(i+=he($.createIcon({icon:"previous-page"}),B.translate("PreviousPage"),this.settings.previousPageTooltip,null,"pager-prev",!1,h,!1)),!this.isTable&&T&&!this.settings.showPageSelectorInput){var we="";L.forEach(function(re){we+=re===(e||1)?he(re,B.translate("PageOn"),null,re,"pager-no",!0,!1,!1):he(re,B.translate("Page"),null,re,"pager-no",!1,!1,!1)}),i+=we}o&&(i+=he($.createIcon({icon:"next-page"}),B.translate("NextPage"),this.settings.nextPageTooltip,null,"pager-next",!1,p,!1)),l&&(i+=he($.createIcon({icon:"last-page"}),B.translate("LastPage"),this.settings.lastPageTooltip,null,"pager-last",!1,v,!1)),this.pagerBar[0].innerHTML=i,l||n||this.settings.showPageSizeSelector?this.pagerBar[0].classList.remove("two-button"):this.pagerBar[0].classList.add("two-button"),this.pagerBar.children("li").find("> .btn-icon").button().tooltip(),this.pagerBar.children("li").find("> .btn-icon[disabled] .disabled-tooltip").tooltip()},renderPageSelectorInput:function(){if(this.isTable&&!this.settings.indeterminate||this.settings.showPageSelectorInput){var e=this.activePage,t=this.state.pages||1;if(this.state.filteredPages&&(e=this.state.filteredActivePage,t=this.state.filteredPages),this.pageSelectorInput)t>1&&this.pagerBar.find(".pager-total-pages").text(t),this.pagerBar.find(".pager-count input").val(e);else{var i=this.settings.pageSelectorInputText||B.translate("PageOf");i=(i=i.replace("{0}",'<input class="new-mask" name="pager-pageno" value="'.concat(e,'" autocomplete="off">'))).replace("{1}",'<span class="pager-total-pages">'.concat(t,"</span>")),$('<li class="pager-count"><label>'.concat(i," </label>")).insertAfter(this.pagerBar.find(".pager-prev"))}var n=null,a="".concat(t).replace(/\d/g,"#"),o=this,l={pattern:a,mode:"number",processOnInitialize:!1};$(this.pageSelectorInput).mask(l).on("focus",function(){n=parseInt($(this).val(),10)}).on("blur",function(){d($(this)),n=null}).on("keydown",function(h){return 13!==h.which||(d($(this)),h.stopPropagation(),h.preventDefault(),!1)})}function d(h){var p=o.adjustPageCount(parseInt(h.val(),10));if(n!==p){n=p;var v=o.activePage;o.state.filteredPages&&(v=o.state.filteredActivePage),h.val(o.setActivePage(p,!1,"page")),o.triggerPagingEvents(v)}else h.val(n)}},renderPageSizeSelectorButton:function(){var e=this;if(this.settings.showPageSizeSelector&&!(this.settings.pagesizes.length<2)){if(!this.pageSizeSelectorButton){var t=$('<li class="pager-pagesize"></li>'),i=$.createIcon({icon:"dropdown"}),n=B.translate(this.settings.pageSizeSelectorText).replace("{0}",this.settings.pagesize),a="",o="<span>".concat(n,"</span>");this.showSmallPageSizeSelector&&(a=' class="audible"',n=B.translate(this.settings.pageSizeSelectorTextNoToken),o='<span class="record-count">'.concat(this.settings.pagesize,"</span>\n        <span").concat(a,">").concat(n,"</span>"));var l=$('<button type="button" class="btn-menu">\n        '.concat(o,"\n        ").concat(i,"\n      </button>")).appendTo(t);t.appendTo(this.pagerBar);var d="";this.showSmallPageSizeSelector&&(d='<li class="heading">'.concat(n,"</li>"));for(var h=0;h<this.settings.pagesizes.length;h++){var p=this.settings.pagesizes[h];d+='<li class="'.concat(p===this.settings.pagesize?" is-checked":"",'"><a href="#">').concat(p,"</a></li>")}var v=$('<ul class="popupmenu is-selectable">'.concat(d,"</ul>"));l.after(v)}var b=$(this.pageSizeSelectorButton),w=H.extend({},{placementOpts:{parent:b,parentXAlignment:B.isRTL()?"left":"right",strategies:["flip"]}},this.settings.pageSizeMenuSettings);if(b.popupmenu(w),b.on("selected.pager",function(k,A){e.changePageSize(A)}),this.settings.tabbable){var T=b.data("popupmenu");this.pagerBar.off("keydown.".concat(ns),".pager-pagesize button").on("keydown.".concat(ns),".pager-pagesize button",function(k){40===(k.which||k.keyCode||k.charCode)&&T&&!T.isOpen&&(T.open(),k.preventDefault(),k.stopPropagation())})}}},render:function(){var e=this.state,t=e.pages;this.preserveFocus=this.preserveFocus||!1;var i=$(":focus").closest(".pager-pagesize").length>0;!this.preserveFocus&&i&&(this.preserveFocus=!0),e.filteredPages&&(t=e.filteredPages),this.pageCount(t),this.pageSizeSelectorButton&&this.teardownPageSizeSelector(),this.renderButtons(),this.renderPageSelectorInput(),this.renderPageSizeSelectorButton(),this.renderBar(),this.preserveFocus&&this.element.find(".pager-pagesize button").focus()},renderBar:function(e){var t,i=this,n=(e=e?H.extend({},this.state,e):this.state).activePage;e.filteredActivePage&&(n=e.filteredActivePage),this.settings.showFirstButton||this.showButton("first",!1),this.settings.enableFirstButton||this.enableButton("first",!1),this.settings.showPreviousButton||this.showButton("previous",!1),this.settings.enablePreviousButton||this.enableButton("previous",!1),this.settings.showNextButton||this.showButton("next",!1),this.settings.enableNextButton||this.enableButton("next",!1),this.settings.showLastButton||this.showButton("last",!1),this.settings.enableLastButton||this.enableButton("last",!1),this.settings.showPageSizeSelector&&this.showPageSizeSelector(!0),void 0!==e.firstPage&&(!1===e.firstPage&&(this.enableButton("first",!0),this.enableButton("previous",!0)),(!0===e.firstPage||1===n)&&(this.enableButton("first",!1),this.enableButton("previous",!1))),void 0!==e.lastPage&&(!1===e.lastPage&&(this.enableButton("next",!0),this.enableButton("last",!0)),(!0===e.lastPage||n===this.pageCount())&&(this.enableButton("next",!1),this.enableButton("last",!1)));var a=this.pagerBar[0]?this.pagerBar[0].classList:null,o=[".pager-first",".pager-prev",".pager-next",".pager-last",".pager-count"],l=function(){var v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(b){v?i.pagerBar.find(b).addClass("hidden"):i.pagerBar.find(b).removeClass("hidden")})};this.settings.hideOnOnePage&&e.total<=e.pagesize?l(o):this.hidePagerBar(e)&&a?a.add("hidden"):this.settings.hideOnOnePage&&a&&a.contains("hidden")&&(a.remove("hidden"),l(o,!1)),this.initTabIndexes(),H.addAttributes(this.pagerBar,this,this.settings.attributes),H.addAttributes(this.pagerBar.find(".pager-first button"),this,this.settings.attributes,"btn-first"),H.addAttributes(this.pagerBar.find(".pager-prev button"),this,this.settings.attributes,"btn-prev"),H.addAttributes(this.pagerBar.find(".pager-next button"),this,this.settings.attributes,"btn-next"),H.addAttributes(this.pagerBar.find(".pager-last button"),this,this.settings.attributes,"btn-last"),H.addAttributes(this.pagerBar.find(".pager-pagesize button"),this,this.settings.attributes,"btn-pagesize"),H.addAttributes(this.pagerBar.find("input"),this,this.settings.attributes,"pagesize-input"),this.pagerBar.find(".pager-pagesize .popupmenu li").each(function(){var h=$(this).find("a"),p=h.text();H.addAttributes(h,i,i.settings.attributes,"pagesize-opt-".concat(p))});var d=null===(t=this.pagerBar.find(".btn-menu"))||void 0===t||null===(t=t?.data("popupmenu"))||void 0===t?void 0:t?.menu;d&&d.find("li").each(function(){var h=$(this).find("a"),p=h.text();H.addAttributes(h,i,i.settings.attributes,"pagesize-opt-".concat(p))})},initTabIndexes:function(){if(!this.settings.tabbable){var e=$(this.focusableElements);e.attr("tabindex","-1"),e.filter(":not([disabled])").first().removeAttr("tabindex")}},triggerPagingEvents:function(e){var t=this.state;e||(e=this.state.activePage),"first"===t.type&&(this.settings.onFirstPage&&this.settings.onFirstPage(this,t),this.element.trigger("firstpage",t)),"prev"===t.type&&(this.settings.onPreviousPage&&this.settings.onPreviousPage(this,t),this.element.trigger("previouspage",t)),"next"===t.type&&(this.settings.onNextPage&&this.settings.onNextPage(this,t),this.element.trigger("nextpage",t)),"last"===t.type&&(this.settings.onLastPage&&this.settings.onLastPage(this,t),this.element.trigger("lastpage",t)),"pageinfo"!==t.type&&this.element.trigger("page",t)},updated:function(e){e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),Array.isArray(e.pagesizes)&&e.pagesizes.length&&(this.settings.pagesizes=e.pagesizes);var t={activePage:this.settings.activePage,indeterminate:this.settings.indeterminate,pagesize:this.settings.pagesize};return this.handleDeprecatedSettings(),this.updatePagingInfo(t),this},changePageSize:function(e){var t=e;t.closest(".popupmenu").find(".is-checked").removeClass("is-checked"),t.parent("li").addClass("is-checked"),this.settings.pagesize=parseInt(t.text(),10),this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=this.settings.pagesize),this.setActivePage(1,!0,"first"),this.settings.onPageSizeChange&&this.settings.onPageSizeChange(this,{tag:e,pagesize:this.settings.pagesize,settings:this.settings}),this.element.trigger("pagesizechange",{tag:e,pagesize:this.settings.pagesize,settings:this.settings})},updatePagingInfo:function(e,t){if(e){if(e.pagesize&&(this.settings.pagesize=e.pagesize,this.isTable&&this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=e.pagesize)),e.isFilteredClientside?(this.isFilteredClientside=!0,delete this.serverDatasetTotal):this.isFilteredClientside&&delete this.isFilteredClientside,delete this.firstPage,delete this.lastPage,void 0!==e.firstPage&&(this.firstPage=e.firstPage,this.settings.enableFirstButton=!e.firstPage,this.settings.enablePreviousButton=!e.firstPage),void 0!==e.lastPage&&(this.lastPage=e.lastPage,this.settings.enableNextButton=!e.lastPage,this.settings.enableLastButton=!e.lastPage),isNaN(e.grandTotal)||(this.grandTotal=e.grandTotal),this.isFilteredClientside||(this.serverDatasetTotal=e.total),isNaN(e.filteredTotal)?(this.filteredTotal||this.filteredActivePage)&&(delete this.filteredTotal,delete this.filteredActivePage):(this.filteredTotal=e.filteredTotal,this.filteredActivePage=e.searchActivePage||e.filteredActivePage||1),e.type||(e.type="pageinfo"),this.settings.source||this.settings.dataset)return this.setActivePage(e,!1,e.type),void("initial"!==e.type&&!t&&this.triggerPagingEvents());this.teardown(),this.render(),this.handleEvents()}},hidePagerBar:function(e){return!(!e||!0!==e.firstPage||!0!==e.lastPage||!e.hideDisabledPagers)},teardown:function(){var e;this.numberButtons&&this.numberButtons.forEach(function(t){var i=t.querySelector(".btn-icon"),n=$(i).data("button"),a=$(i).data("tooltip");n&&n.destroy(),a&&a.destroy()}),this.pagerBar.off(["click.".concat(ns),"keydown.".concat(ns)].join(" ")),this.pageSelectorInput&&($(this.pageSelectorInput).off(["focus.".concat(ns),"blur.".concat(ns),"keydown.".concat(ns)].join(" ")),null===(e=$(this.pageSelectorInput).data("mask"))||void 0===e||e?.destroy()),this.pageSizeSelectorButton&&($(this.pageSizeSelectorButton).off("selected.".concat(ns)),this.teardownPageSizeSelector()),this.pagerBar[0].innerHTML="",delete this.firstPage,delete this.lastPage},teardownPageSizeSelector:function(){var t=$(this.pageSizeSelectorButton).data("popupmenu");if(t&&t.menu){var i=t.menu;t.destroy(),i.remove()}},destroy:function(){this.teardown(),this.pagerBar&&this.pagerBar.remove(),$.removeData(this.element[0],ns)}},$.fn.pager=function(s){return this.each(function(){var e=$.data(this,ns);e?e.updated(s):e=$.data(this,ns,new Wd(this,s))})};var Vd="listview",Yg={dataset:[],template:null,description:null,paging:!1,pagesize:10,searchable:!1,highlight:!0,selectable:"single",selectOnFocus:!0,showCheckboxes:!0,hoverable:!0,emptyMessage:null,source:null,forceToRenderOnEmptyDs:!1,disableItemDeactivation:!1,allowDeselect:!0,showPageSizeSelector:!1,listFilterSettings:null,hasChildren:!1,pagerSettings:{showFirstButton:!1,showLastButton:!1},searchTermMinSize:1,initializeContents:!1,attributes:null,attributesOverride:null};function sh(s,e){return this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Yg),this.init(),this}sh.prototype={get pagerAPI(){return this.element.data("pager")},get pagerSettings(){var s={};this.settings.pagerSettings&&(s=this.settings.pagerSettings),s.dataset=this.settings.dataset,s.source=this.settings.source,s.type="list";for(var e=["pagesize","showPageSizeSelector"],t=0;t<e.length;t++)void 0!==this.settings[e[t]]&&!s[e[t]]&&(s[e[t]]=this.settings[e[t]]);return s},init:function(){this.setup(),this.handleEvents(),this.refresh(),this.selectedItems=[],this.lastSelectedItem=0,this.isSelectedAll=!1,this.sortInit("listview","click.listview","data-sortlist"),this.handleResize()},setup:function(){var e=this,t=this,i=this.element.closest(".card, .widget"),n=this.element.attr("data-selectable"),a=this.element.attr("data-select-onfocus");if($(".listview-filter-wrapper").length>0){var o=$(".listview-filter-wrapper"),l=o.siblings(".searchfield-wrapper");l.addClass("no-animate");var d=o.css("width");l.addClass("has-listview-filters"),l.css("width","calc(100% - ".concat(d,")"))}if(this.element.attr("data-pagesize")){var h=Number(this.element.attr("data-pagesize"));isNaN(h)||(this.settings.pagesize=h),this.element.removeAttr("data-pagesize")}if(this.element.hasClass("card-list")&&this.element.find("li .card").selectable(),!this.settings.dataset.length&&this.element.is("ul")&&this.element.children("li").length){var p=this.element.children("li");this.settings.template||(this.settings.template="{{#dataset}}<li>{{text}}</li>{{/dataset}}"),p.each(function(T,k){e.settings.dataset.push({text:$(k).text()})}),p.remove()}if(this.settings.dataset&&"string"==typeof this.settings.dataset){var v=window[this.settings.dataset];v&&v.length&&(this.settings.dataset=v)}n&&n.length&&(this.settings.selectable=n),a&&a.length&&(this.settings.selectOnFocus=JSON.parse(a)),t.actionButton=i.find(".btn-actions"),t.actionButton.length>0&&(t.actionButton.data("popupmenu")||t.actionButton.popupmenu()),this.element.attr({tabindex:"-1","x-ms-format-detection":"none"}),this.settings.attributes&&H.addAttributes(this.element,this,this.settings.attributes,"listview",this.settings.attributesOverride),(this.element.is(".paginated")||!0===this.settings.paging)&&this.element.pager(this.pagerSettings);var b=this.element.parents(".card-content, .widget-content");if(this.element.prev().is(".listview-search")&&b[0]&&b.css({overflow:"visible"}),this.settings.searchable){this.searchfield=this.element.parent().find(".searchfield, .autocomplete");var w={filterMode:"contains"};"object"===rt(this.settings.listFilterSettings)&&(w=H.extend({},w,this.settings.listFilterSettings)),this.listfilter=new yo(w)}this.settings.emptyMessage&&(t.emptyMessageContainer=$("<div>").emptymessage(this.settings.emptyMessage))},getTotals:function(e){var i,t={count:e.length};if(e[0]){for(i in e[0])t[i]=0;for(var n=0;n<e.length;n++)for(i in e[n])t[i]+=parseFloat(e[n][i]);return t}},render:function(e,t){var i=this,a={},o=e,l=0,h=this.settings.pagesize,p=e.length;if(t&&(h=t.pagesize||h,p=t.filteredTotal||p),!("function"==typeof this.settings.source)&&this.pagerAPI&&(this.renderPager(t,!0),t=this.pagerAPI.state),p>h&&(this.filteredDataset?t.filteredPages:t.pages)>1){var b=t.activePage>0?t.activePage-1:0;this.filteredDataset&&(b=t.filteredActivePage-1),o=e.slice(l=t.pagesize*b,t.pagesize*(b+1))}if("object"===rt(hn)&&o&&this.settings.template){this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):"string"==typeof this.settings.template&&(st.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())),this.settings.template.indexOf("{{#totals}}")>-1&&(a=this.getTotals(e));var w=hn.compile(this.settings.template,{dataset:o,totals:a});this.element.parent().is(".scrollable-flex-content")&&this.element.parent().find(".empty-message").remove(),o.length>0||this.settings.forceToRenderOnEmptyDs?this.element.html(w):i.emptyMessageContainer&&this.element.parent().is(".scrollable-flex-content")?(this.element.empty(),de.append(this.element.parent(),this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):i.emptyMessageContainer?(this.element.empty(),de.append(this.element,this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):0===o.length&&this.element.html(w||"<ul></ul>")}var T=this.element.closest(".card, .widget");$("ul",this.element).attr({role:"listbox","aria-label":this.settings.description||T.find(".card-title, .widget-title").text()||"List"});var k=this.element.find("li, tbody > tr").first(),A=this.element.find("li, tr"),M="multiple"===this.settings.selectable||"mixed"===this.settings.selectable;this.focusItem=k.attr("tabindex",0),!this.settings.selectable&&1===k.find("a").length&&k.removeAttr("tabindex");var L=A.length>o.length||i.settings.hasChildren,z=0;A.each(function(q){var O=$(this);if(O.attr("role","option"),xe.features.touch&&O.addClass("is-touch"),i.settings.attributes&&H.addAttributes(O,i,i.settings.attributes,"listview-item-".concat(q),i.settings.attributesOverride),M){i.element.addClass("is-multiselect");var _=i.element.prevAll(".toolbar, .contextual-toolbar");_.length&&_.data("toolbar")&&_.data("toolbar").toggleMoreMenu(),i.settings.showCheckboxes&&0===O.children(".listview-selection-checkbox").length&&O.prepend('<label class="listview-selection-checkbox l-vertical-center inline inline-checkbox">\n              <input tabindex="-1" type="checkbox" class="checkbox">\n              <span class="label-text" role="presentation">\n                <span class="audible">'.concat(B.translate("Checkbox")," ").concat(B.translate("NotSelected"),".</span>\n              </span>\n            </label>"))}else i.element.removeClass("is-multiselect"),O.find(".listview-selection-checkbox").remove();if(L){var G=l+q;if(i.settings.hasChildren){var j=e[z];O.hasClass("child")||(O.css("display",j[i.settings.children].length>0?"":"none"),z++)}else if(G<i.settings.dataset.length){var X=i.settings.dataset[G];O.css("display",void 0===X._isFilteredOut||X._isFilteredOut?"":"none")}}else O.css("display","");O.attr({"aria-posinset":l+q+1,"aria-setsize":p}),O.hasClass("is-disabled")&&O.attr("aria-disabled","true"),i.settings.highlight&&i.searchTerm&&O.highlight(i.searchTerm);var fe=O.find(".link-item .hyperlink");fe.length>0&&(fe[0].offsetHeight<fe[0].scrollHeight||fe[0].offsetWidth<fe[0].scrollWidth)&&fe.tooltip({title:fe.text()})}),i.settings.initializeContents&&this.element.find("ul").initialize(),this.element.trigger("rendered",[o]),this.element.off("updated.listview").on("updated.listview",function(q,O){i.updated(O)})},renderPager:function(e,t){this.pagerAPI&&this.pagerAPI.updatePagingInfo(e,t)},getPageableElements:function(){var e=this.element.children();return e.is("ul")&&(e=e.children()),e},refresh:function(e,t){this.loadData(e,t),this.list&&this.render(this.list.data)},loadData:function(e,t,i){var n=!1,a=this;if(e=e||this.settings.dataset,this.filteredDataset&&(e=this.filteredDataset),t||(this.pagerAPI?(e.length!==this.pagerAPI.settings.dataset.length&&this.pagerAPI.updated({dataset:e}),t=this.pagerAPI.state):t={activePage:1}),this.filteredDataset?t.filteredTotal=e.length:t.total=e.length,Array.isArray(e)){var l=this.settings.source;if("string"==typeof e&&(0===e.indexOf("http")||0===e.indexOf("/"))&&(l=e,n=!0),!l&&!n||this.filteredDataset||i)this.render(e,t);else switch(rt(l)){case"function":l(t,o);break;case"string":return void((0===l.indexOf("http")||0===l.indexOf("/"))&&$.getJSON(l,o));default:this.settings.dataset=l,e=l,this.render(l,t)}}function o(d,h){a.settings.dataset=d,e=d,"string"==typeof h&&(h={activePage:a.pagerAPI?a.pagerAPI.activePage:1,pagesize:a.settings.pagesize,total:e.length,type:h}),a.pagerAPI&&(a.renderPager(h,!0),h=a.pagerAPI.state),a.render(e,h)}},toggleAll:function(){this[this.isSelectedAll?"deselectItemsBetweenIndexes":"selectItemsBetweenIndexes"]([0,$("li, tbody tr",this.element).length-1]),this.isSelectedAll=!this.isSelectedAll},selectItemsBetweenIndexes:function(e){H.clearSelection(),e.sort(function(n,a){return n-a});for(var t=e[0];t<=e[1];t++){var i=$("li, tbody tr",this.element).eq(t);i.is(".is-disabled, .is-selected")||this.select(i)}},deselectItemsBetweenIndexes:function(e){e.sort(function(n,a){return n-a});for(var t=e[0];t<=e[1];t++){var i=$("li, tbody tr",this.element).eq(t);!i.is(".is-disabled")&&i.is(".is-selected")&&this.select(i)}},handleResize:function(){var e=$("li .listview-heading, tr .listview-heading",this.element),t=e.eq(1),i=t.width();t.length&&i&&(e[0].style.width="".concat(i,"px")),this.pagerAPI&&this.pagerAPI.render()},handleSearch:function(e,t){this.filter(t)},filter:function(e){var t=this;if(e){var a,i=(e=$(e)).val().trim(),n={searchActivePage:1};if(!i){if(!this.searchTerm)return;return void this.resetSearch()}if(i.length<this.settings.searchTermMinSize)return void this.resetSearch();this.searchTerm!==i&&(this.searchTerm=i,this.element.unhighlight(),this.settings.dataset.forEach(function(o){o._isFilteredOut=!1,t.settings.hasChildren&&o[t.settings.children].forEach(function(d){d._isFilteredOut=!1})}),this.settings.hasChildren?(n.filteredTotal=0,(a=H.deepCopy(this.settings.dataset)).forEach(function(o){var l=t.listfilter.filter(o[t.settings.children],t.searchTerm,!0);l.length||(l=[]),n.filteredTotal+=l.length,l.forEach(function(d){d._isFilteredOut=!0}),o[t.settings.children]=l,o._isFilteredOut=l.length>0}),n.searchActivePage=1):((a=this.listfilter.filter(this.settings.dataset,this.searchTerm,!0)).length||(a=[]),n.filteredTotal=a.length,n.searchActivePage=1,a.forEach(function(o){o._isFilteredOut=!0})),this.filteredDataset=a,this.loadData(null,n),this.element.trigger("filtered",{elem:this.element,filteredResults:a,term:this.searchTerm}))}},resetSearch:function(){var e=this;this.element.unhighlight(),this.settings.dataset.forEach(function(i){delete i._isFilteredOut,e.settings.hasChildren&&i[e.settings.children].forEach(function(n){delete n._isFilteredOut})}),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this.refresh(null,{activePage:1,filteredTotal:void 0,searchActivePage:void 0})},focus:function(e){e.is(":hidden")||e.is(".is-disabled")||(this.focusItem&&this.focusItem.removeAttr("tabindex"),this.focusItem=e.attr("tabindex",0).focus(),!this.settings.selectable&&1===e.find("a").length&&(e.find("a").focus(),e.removeAttr("tabindex")),this.settings.selectOnFocus&&"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&this.select(e))},remove:function(e){"number"==typeof e&&(e=$(this.element.children()[0]).children().eq(e)),e.is(".is-selected")&&this.select(e,!0),e.remove()},clear:function(){$(this.element.children()[0]).empty()},removeAllSelected:function(){var e=this;$.each(this.selectedItems,function(t,i){e.remove(i)})},clearAllSelected:function(){var e=this;$.each(this.selectedItems,function(t,i){e.select(i)})},sortInit:function(e,t,i){!i||""===$.trim(i)||$("[".concat(i,"]")).each(function(){var n=$(this),a=$.fn.parseOptions(n,i);n.on(t,function(o){$(a.list).data(e).setSortColumn(a),o.preventDefault()})})},setSortColumn:function(e){var t=e.orderBy||this.list.sort.field,i=e.order;if(this.list.data||t){i=i?"desc"===i:!(this.list.sort&&this.list.sort[t]&&this.list.sort[t].reverse),(e.reloadApi||e.reloadApiNoSort)&&this.loadData(),e.reloadApiNoSort&&(i=this.list.sort[t=this.list.sort.field].reverse);var n=this.sortFunction(t,i);this.list.data.sort(n),this.render(this.list.data),this.list.sort={field:t},this.list.sort[t]={reverse:i},this.element.trigger("sorted",[this.element,this.list.sort])}},sortFunction:function(e,t,i){i||(i=function(o){return"string"==typeof(o=o??"")&&(o=o.toUpperCase(),isNaN(parseFloat(o))||(o=parseFloat(o))),o});var n=i?function(a){return i(a[e])}:function(a){return a[e]};return t=t?-1:1,function(a,o){return a=n(a),o=n(o),t*((a>o)-(o>a))}},deselect:function(e){this.settings.allowDeselect&&("number"==typeof e&&(e=$(this.element.children()[0]).children().eq(e)),e.is(".is-selected")&&this.select(e))},unselect:function(e){return ms(this.deselect,this.unselect).apply(this,[e])},select:function(e,t){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this,o="mixed"===n.settings.selectable;if(n.selectedItems=[],"number"==typeof e&&(e=$(this.element.children()[0]).children().eq(e)),(!(a=e.hasClass("is-selected"))||this.settings.allowDeselect)&&(e.is('[tabindex="0"]')||(this.focusItem&&this.focusItem.removeAttr("tabindex"),e.attr("tabindex",0)),!1!==this.settings.selectable&&"false"!==this.settings.selectable)){if("multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable){var l=e.parent().children(),d=e.parent().find(".is-selected");this.element.hasClass("card-list")&&(l=l.not(".card"),d=d.not(".card")),l.removeAttr("aria-selected"),d.removeClass("is-selected"),n.selectedItems[0]=$(this)}if(a?(n.selectedItems=[],e.removeClass("is-selected hide-selected-color")):this.settings.selectable&&(e.addClass("is-selected".concat(o?" hide-selected-color":"")),n.lastSelectedItem=e.index()),e.parent().find(".is-selected").each(function(q){n.selectedItems[q]=$(this)}),e.find(".listview-selection-checkbox input").prop("checked",!a),"multiple"===this.settings.selectable||"mixed"===this.settings.selectable){var h=a?"NotSelected":"Selected";e.attr("aria-selected",!a),e.find(".label-text .audible").text("".concat(B.translate("Checkbox")," ").concat(h,"."))}if(!t){for(var p=a?"unselected":"selected",v=[],b=0;b<this.selectedItems.length;b++){var w=this.selectedItems[b][0].getAttribute("aria-posinset");v.push(this.settings.dataset[w-1])}this.element.triggerHandler(p,{selectedItems:this.selectedItems,elem:e,isKey:i,selectedData:v}),"unselected"===p&&this.element.triggerHandler("deselected",{selectedItems:this.selectedItems,elem:e,selectedData:v})}var T=this.element.closest(".card, .widget");T.length||(T=this.element.parent());var k=T.find(".listview-toolbar, .contextual-toolbar"),A=k.data("toolbar");if(n.selectedItems.length>0){if(A&&A.toggleMoreMenu(),k.one("animateopencomplete",function(){n.element.addClass("is-toolbar-open"),k.trigger("recalculate-buttons").removeClass("is-hidden")}),k[0]){var M=k[0].classList.contains("contextual-toolbar");k[0].style.display=M?"block":""}k.animateOpen({distance:40});var L=k.find(".title, .selection-count");(!L||!L.length)&&(L=$(k.hasClass("contextual-toolbar")?'<div class="toolbar-section title selection-count"></div>':'<div class="title selection-count"></div>'),k.prepend(L));var z="(".concat(B.translate(1===n.selectedItems.length?"RecordSelected":"RecordsSelected"),")");z=z.replace("{0}",n.selectedItems.length),L.text(z)}else k.addClass("is-hidden").one("animateclosedcomplete",function(q){q.stopPropagation(),this.style.display="none",n.element.removeClass("is-toolbar-open")}).animateClosed()}},toggleItemActivation:function(e){e.hasClass("is-activated")?this.settings.disableItemDeactivation||this.deactivateItem(e):this.activateItem(e)},activateItem:function(e){var t="number"==typeof e?e:e.index(),i=this.element.find("li.is-activated");"number"==typeof e&&(e=this.element.find("ul").children().eq(e)),this.deactivateItem(i),!1!==this.element.triggerHandler("beforeactivate",[{index:t,elem:e,data:this.settings.dataset[t]}])&&(e.addClass("is-activated"),this.element.triggerHandler("itemactivated",[{index:t,elem:e,data:this.settings.dataset[t]}]))},activatedItem:function(){var e=this.element.find("li.is-activated"),t=e.index();return{index:t,elem:e,data:this.settings.dataset[t]}},deactivateItem:function(e){"number"==typeof e&&(e=this.element.find("ul").children().eq(e)),void 0===e&&(e=this.element.find("li.is-activated")),e.removeClass("is-activated");var t=e.index();t<0||this.element.triggerHandler("itemdeactivated",[{index:t,elem:e,data:this.settings.dataset[t]}])},getSelected:function(){return this.element.find(".is-selected")},updateSearch:function(){if(this.settings.searchable&&this.filteredDataset){delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var e=this.searchfield.data("searchfield");e&&e.xButton&&e.xButton.trigger("click")}},updated:function(e){return e?.selectable!==this.settings.selectable&&$(this.element.children()[0]).find("li").removeClass("is-selected is-activated"),e&&(this.settings=H.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset)),this.updateSearch(),this.refresh(e&&e.dataset?e.dataset:null),this},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},teardown:function(){return $("body").off("resize.listview"),this.element.prev(".listview-header").off("click.listview"),this.searchfield&&this.searchfield.off(["contents-checked.searchable-listview","cleared.searchable-listview"].join(" ")),this.element.off("change.selectable-listview",".listview-checkbox input"),this.element.off("contextmenu.listview longpress.listview dblclick.listview","li, tr"),this.element.off("click.listview","li, tr, input[checkbox]"),this.element.off("keydown.listview","li, tr, a"),this.element.off("focus.listview","li, tbody tr"),this.element.off("focus.listview click.listview touchend.listview keydown.listview change.selectable-listview updated.listview").empty(),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this},destroy:function(){this.teardown(),this.element.removeData(Vd)},handleEvents:function(){var e=this,t=!1,i=!1,n="multiple"===e.settings.selectable||"mixed"===e.settings.selectable;if(this.element.off("focus.listview","li, tbody tr").on("focus.listview","li, tbody tr",function(o){var l=$(this);if(!(o.originalEvent&&o.originalEvent.target&&$(o.originalEvent.target).is(".icon-favorite"))){if(l.is(":first-child")&&l.hasClass("is-disabled")){var d=$.Event("keydown.listview");d.keyCode=40,t=!0,l.trigger(d)}!t&&!l.hasClass("is-disabled")&&e.settings.selectOnFocus&&"multiple"!==e.settings.selectable&&"mixed"!==e.settings.selectable&&(e.select(l),t=!0,i=!0)}}),this.element.off("keydown.listview","li, tr, a").on("keydown.listview","li, tr, a",function(o){var l=$(this),d=l.is("a")?l.closest("li"):$(this),h=d.is("a")?d.closest("ul"):d.parent(),p=o.keyCode||o.charCode||0,v=o.metaKey;if(0===d.index()&&38===o.keyCode)return!1;if((40===p||38===p)&&!v){var b=40===o.keyCode?d.nextAll(":not(.is-disabled):visible:first"):d.prevAll(":not(.is-disabled):visible:first");b.length&&($(o.target).is(d)||o.shiftKey||l.is("a"))&&e.focus(b),o.preventDefault(),o.stopPropagation()}if(35===p||40===p&&v){var w=h.children().last();return e.focus(w),o.stopPropagation(),!1}if(36===p||38===p&&v){var T=h.children().first();return e.focus(T),o.stopPropagation(),!1}return 32===p&&$(o.target).is(d)&&(n&&o.shiftKey?e.selectItemsBetweenIndexes([e.lastSelectedItem,d.index()]):e.select(d,!1,!0),o.preventDefault()),n&&(o.ctrlKey||o.metaKey)&&65===p&&(e.toggleAll(),e.focus(d),o.preventDefault()),!0}),this.settings.selectable){this.element.addClass("is-selectable");var a=$(this.element).closest(".list-detail, .builder");this.element.off("click.listview","li, tr, input[checkbox]").on("click.listview","li, tr, input[checkbox]",function(o){var l=$(this),d=$(o.target).closest(".listview-selection-checkbox").length>0,h="mixed"===e.settings.selectable,p=$(o.target);p.hasClass("icon-favorite")||p.hasClass("hyperlink")||(!l.hasClass("is-selected")&&i&&(i=!1),!i&&!l.hasClass("is-disabled")&&(!h||d)&&(t=!0,n&&o.shiftKey?(e.selectItemsBetweenIndexes([e.lastSelectedItem,l.index()]),o.preventDefault()):e.select(l),l.focus()),!l.hasClass("is-disabled")&&h&&!d&&(l.focus(),e.toggleItemActivation(l)),a.length>0&&$(window).outerWidth()<767&&!l.hasClass("is-disabled")&&!d&&e.element.trigger("drilldown",[l]),i=!1,o.preventDefault(),o.stopPropagation(),e.element.trigger("click",[{elem:l,data:e.settings.dataset[l.attr("aria-posinset")-1],index:l.index(),originalEvent:o}]))}),this.element.off("dblclick.listview","li, tr").on("dblclick.listview","li, tr",function(o){var l=$(this);return o.preventDefault(),o.stopPropagation(),e.element.trigger("dblclick",[{elem:$(this),data:e.settings.dataset[l.attr("aria-posinset")-1],index:l.index(),originalEvent:o}]),!1}),this.element.off("contextmenu.listview longpress.listview","li, tr").on("contextmenu.listview longpress.listview","li, tr",function(o){var l=$(this);return o.preventDefault(),o.stopPropagation(),e.element.trigger("contextmenu",[{elem:$(this),data:e.settings.dataset[l.attr("aria-posinset")-1],index:l.index(),originalEvent:o}]),!1})}(!this.settings.hoverable||"false"===this.settings.hoverable)&&(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),(!this.settings.selectable||"false"===this.settings.selectable)&&(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),("multiple"===this.settings.selectable||"mixed"===this.settings.selectable)&&this.element.off("change.selectable-listview",".listview-checkbox input").on("change.selectable-listview",".listview-checkbox input",function(o){$(this).parent().trigger("click"),o.stopPropagation()}),this.settings.searchable&&this.searchfield.off("contents-checked.searchable-listview").on("contents-checked.searchable-listview",function(o){e.handleSearch(o,$(this))}).off("cleared.searchable-listview").on("cleared.searchable-listview",function(){e.resetSearch(),e.element.trigger("filtered",{elem:e.element,filteredResults:[],term:""})}),this.pagerAPI&&this.element.off("page.listview").on("page.listview",function(o,l){e.handlePageChange(l)}).off("pagesizechange.listview").on("pagesizechange.listview",function(o,l){e.handlePageSizeChange(l)}),$("body").off("resize.listview").on("resize.listview",function(o){e.handleResize(o)}),e.element.prev(".listview-header").off("click.listview").on("click.listview",function(){var o=$(this).find(".plus-minus");o.hasClass("active")?(o.removeClass("active"),e.element.animateClosed()):(o.addClass("active"),e.element.animateOpen())})},handlePageSizeChange:function(e){e.activePage=1,this.loadData(void 0,e)},handlePageChange:function(e){this.loadData(void 0,e)}},$.fn.listview=function(s){var e=$(this),t=e.attr("data-dataset"),i=e.attr("data-tmpl"),n=H.parseOptions(this)||{};n.dataset=n.dataset||t,n.template=n.template||i,window[n.dataset]&&(n.dataset=window[n.dataset]),n.template&&n.template.length&&(n.template=$("#".concat(n.template)).html());var a=H.extend({},s,n);return this.each(function(){var o=$.data(this,Vd);o?o.updated(a):o=$.data(this,Vd,new sh(this,a))})};var rh="listbuilder",oh={dataset:[],handle:".handle",btnAdd:"add",btnEdit:"edit",btnDelete:"delete",btnGoUp:"goup",btnGoDown:"godown",attributes:null,template:'<ul data-handle=".handle">{{#dataset}}{{#text}}<li{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>',templateNewItem:'<li data-value="{{text}}" role="option"><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>',templateItemContent:"<p>{{text}}</p>"};function lh(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,oh),e&&e.dataset&&(this.settings.dataset=e.dataset),this.init()}lh.prototype={init:function(){var e=this;this.loadListview().initDataset().setElements().handleEvents(),setTimeout(function(){e.setSelected()},0)},loadListview:function(){var i,e=this.settings,t=$(".listview",this.element);return e.attributes&&(i=this.getLvAutomationAttributes("-listbuilder")),!e.dataset.length&&t.length&&$("li",t).length?this.listApi=t.listview({selectable:"single",attributes:i}).data("listview"):t.length&&(this.listApi=t.listview({dataset:e.dataset,template:e.template,selectable:"single",attributes:i}).data("listview")),this},getLvAutomationAttributes:function(e){var n,t=this,i=this.settings;if(i.attributes&&"string"==typeof e&&""!==e)if(Array.isArray(i.attributes))n=[],i.attributes.forEach(function(o){var l="function"==typeof o.value?o.value(t):o.value;n.push({name:o.name,value:l+e})});else{var a="function"==typeof i.attributes.value?i.attributes.value(this):i.attributes.value;n={name:i.attributes.name,value:a+e}}return n},updateLvAutomationAttributes:function(e){if(this.settings.attributes&&e){for(var o,i=this.dataset.length-1,n=!0,a=1e3;n&&a>0;){var l="-listbuilder-listview-item-".concat(i);o=this.getLvAutomationAttributes(l),n=this.findAutomationAttributesItem(o),i++,a--}H.addAttributes(e,this,o)}},findAutomationAttributesItem:function(e){var i=!1;if(this.settings.attributes&&e&&Array.isArray(e))for(var n=0,a=e.length;n<a;n++){var o=e[n];if(this.listApi.element.find("[".concat(o.name,'="').concat(o.value,'"]')).length){i=!0;break}}return i},initDataset:function(){var e=this.settings,t=$(".listview li",this.element);this.dataset=[];for(var i=0,n=t.length;i<n;i++){var a=void 0,o=$(t[i]);e.dataset?(a=JSON.parse(JSON.stringify(e.dataset[i]))).node=o:a=this.extractNodeData(o),this.dataset.push(a)}return this},extractNodeData:function(e){var t={node:e,text:$.trim($(".item-content",e).text())},i=e.attr("data-value");return typeof i<"u"&&(t.value=i),t},setElements:function(){var e=this,t=this.settings,i=function(o){return e.isjQuery(o)?o:"string"==typeof o?$('[data-action="'.concat(o,'"]'),e.element):null};t.btnAdd=i(t.btnAdd),t.btnGoUp=i(t.btnGoUp),t.btnGoDown=i(t.btnGoDown),t.btnEdit=i(t.btnEdit),t.btnDelete=i(t.btnDelete);var n="listbuilder-btn";return H.addAttributes(t.btnAdd,this,t.attributes,"".concat(n,"-add")),H.addAttributes(t.btnGoUp,this,t.attributes,"".concat(n,"-goup")),H.addAttributes(t.btnGoDown,this,t.attributes,"".concat(n,"-godown")),H.addAttributes(t.btnEdit,this,t.attributes,"".concat(n,"-edit")),H.addAttributes(t.btnDelete,this,t.attributes,"".concat(n,"-delete")),this.topButtons=t.btnAdd.add(t.btnGoUp).add(t.btnGoDown).add(t.btnEdit).add(t.btnDelete),this.topButtons.tooltip(),this.ul=$(".listview ul",this.element),this.arrangeApi=this.ul.arrange({handle:t.handle,placeholder:t.templateNewItem}).data("arrange"),this},handleEvents:function(){var t,e=this,i=this,n=i.settings,a=function(l,d){l.off("click.listbuilder").on("click.listbuilder",function(){i[d]()})};return a(n.btnAdd,"addItem"),a(n.btnGoUp,"moveItemUp"),a(n.btnGoDown,"moveItemDown"),a(n.btnEdit,"editItem"),a(n.btnDelete,"deleteItem"),this.arrangeApi.element.on("beforearrange.listbuilder",function(o,l){var d=e.getDataByNode(l.start),h=n.templateItemContent.replace(/{{text}}/g,d.data.text);e.arrangeApi.placeholders.attr("data-value",d.data.text).find(".item-content").html(h)}).on("arrangeupdate.listbuilder",function(o,l){e.updateAttributes(),e.arrayIndexMove(e.dataset,l.startIndex,l.endIndex),(t=e.getDataByNode(l.end)).indexBeforeMove=l.startIndex,e.element.triggerHandler("arrangeupdate",[t])}),$("li:not(.is-disabled) ".concat(this.arrangeApi.handle),this.ul).on("mousedown.listbuilder touchstart.listbuilder",function(){var o=$(this);o.is(".is-selected")||o.trigger("click")}),$(".listview",this.element).off("selected.listbuilder").on("selected.listbuilder",function(o,l){t=e.getDataByNode(l.elem[0]),e.element.triggerHandler("selected",[t])}),this.updatedEventsStr="arrangeupdate.listbuilder aftergoup.listbuilder aftergodown.listbuilder exiteditmode.listbuilder",this.element.off(this.updatedEventsStr).on(this.updatedEventsStr,function(o,l){e.element.triggerHandler("updated",[l])}),this},addItem:function(){var e=this,t=this.settings;$.when(this.element.triggerHandler("beforeadd")).done(function(){var i,a=0,o=e.listApi.selectedItems[0],l=t.templateNewItem.replace(/{{text}}/g,B.translate("NewItem"));o&&o.length>0?(a=e.getDataByNode(o).index+1,$(l).insertAfter(o),i=$("li",e.ul).eq(a)):(e.ul.prepend(l),i=$("li:first-child",e.ul)),e.dataset.push(e.extractNodeData(i)),e.arrayIndexMove(e.dataset,e.dataset.length-1,a),e.updateAttributes(),e.updateLvAutomationAttributes(i),i.trigger("click"),e.arrangeApi.updated(),e.editItem(!0),e.element.triggerHandler("afteradd",[{index:a,data:e.dataset[a]}])})},moveItemUp:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var i=e.getDataByNode(t);typeof i.index<"u"&&i.index>0&&$.when(e.element.triggerHandler("beforegoup",[i])).done(function(){var n=t.prev();t.insertBefore(n),e.updateAttributes(),e.arrayIndexMove(e.dataset,i.index,i.index-1),i.indexBeforeMove=i.index,i.index--,e.element.triggerHandler("aftergoup",[i])})}},moveItemDown:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var i=e.getDataByNode(t);typeof i.index<"u"&&i.index<e.dataset.length-1&&$.when(e.element.triggerHandler("beforegodown",[i])).done(function(){var n=t.next();t.insertAfter(n),e.updateAttributes(),e.arrayIndexMove(e.dataset,i.index,i.index+1),i.indexBeforeMove=i.index,i.index++,e.element.triggerHandler("aftergodown",[i])})}},editItem:function(e){var t=this.listApi.selectedItems[0];t&&t.length>0&&(t.is(".is-editing")?this.commitEdit(t,e):this.makeEditable(t,e))},makeEditable:function(e,t){var i=this,n=i.getDataByNode(e),a=$(".item-content",e);typeof n.index<"u"&&n.index<i.dataset.length&&$.when(i.element.triggerHandler("beforeedit",[n])).done(function(){var o=Fe.escapeHTML((a.text().trim()||"").toString()),l=$('<input name="edit-input" class="edit-input" type="text" value="'.concat(o,'" />'));e.addClass("is-editing"),a.html(l),setTimeout(function(){l.focus().select()},0),l.on("click.listbuilder",function(){return!1}).on("blur.listbuilder",function(){return i.commitEdit(e,t)}).on("keypress.listbuilder",function(d){13===(d.keyCode||d.charCode||0)&&(i.commitEdit(e,t),e.focus())}),i.element.triggerHandler("entereditmode",[n])})},commitEdit:function(e,t){var i=this.settings,n=this.getDataByNode(e),a=$(".item-content",e),o=$(".edit-input",a);o.val(Fe.escapeHTML((o.val()||"").toString())),t&&(n.data.value=o.val()),n.data.text=o.val(),o.off("click.listbuilder blur.listbuilder keypress.listbuilder"),a.html(i.templateItemContent.replace(/{{text}}/g,o.val())),e.removeClass("is-editing"),this.element.triggerHandler("exiteditmode",[n])},deleteItem:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var i=e.getDataByNode(t);typeof i.index<"u"&&$.when(e.element.triggerHandler("beforedelete",[i])).done(function(){e.listApi.removeAllSelected(),e.updateAttributes(),e.dataset.splice(i.index,1),e.element.triggerHandler("afterdelete",[i])})}},getDataByNode:function(e){for(var t={},i=0,n=this.dataset.length;i<n;i++){var a=this.dataset[i];if($(a.node).is(e)){t={index:i,data:a};break}}return t},arrayIndexMove:function(e,t,i){e.splice(i,0,e.splice(t,1)[0])},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},moveCursorToEnd:function(e){setTimeout(function(){if("number"==typeof e.selectionStart)e.selectionEnd=e.value.length,e.selectionStart=e.value.length;else if(typeof e.createTextRange<"u"){var t=e.createTextRange();t.collapse(!1),t.select()}},100)},updateAttributes:function(){for(var e=$("li",this.ul),t=0,i=e.length;t<i;t++)$(e[t]).attr({"aria-posinset":t+1,"aria-setsize":i})},updateDataset:function(e){var t=this,i=$("li",this.ul),n=$(".listview",this.element).data("listview");n.deselectItemsBetweenIndexes([0,i.length-1]),this.settings.dataset=e,n.loadData(this.settings.dataset),this.initDataset().setElements().handleEvents(),setTimeout(function(){t.setSelected()},0)},setSelected:function(){for(var e=$("li[selected]",this.ul),t=0,i=e.length;t<i;t++){var n=$(e[t]);n.removeAttr("selected"),n.is(".is-selected")||n.trigger("click")}return this},select:function(e){var t=this.getListItem(e);t&&!t.is(".is-selected")&&t.trigger("click")},unselect:function(e){var t=this.getListItem(e);t&&t.is(".is-selected")&&t.trigger("click")},getListItem:function(e){var t=$();if(this.isElement(e)&&$.contains(this.ul,e))t=this.isjQuery(e)?e:$(e);else{var i=parseInt(e,10),n=$("li",this.ul);!isNaN(i)&&i>-1&&i<n.length?t=n.eq(i):"first"==="".concat(e).toLowerCase()?t=n.first():"last"==="".concat(e).toLowerCase()&&(t=n.last())}return t.length<1?null:t.length>1?t.eq(0):t},isElement:function(e){return this.isjQuery(e)&&e.get(0)instanceof Element||e instanceof Element},enable:function(){this.element.removeClass("is-disabled").find(".toolbar .buttonset button").removeAttr("disabled").end().find(".toolbar .buttonset button[data-original-disabled]").attr("disabled","disabled").removeAttr("data-original-disabled"),this.ul.find("li").removeClass("is-disabled").end().find("li[data-original-disabled]").removeAttr("data-original-disabled")},disable:function(){this.element.addClass("is-disabled").find(".toolbar .buttonset button[disabled]").attr("data-original-disabled","disabled").end().find(".toolbar .buttonset button").attr("disabled","disabled"),this.ul.find("li.is-disabled").attr("data-original-disabled","is-disabled").end().find("li").addClass("is-disabled")},unbind:function(){if(this.element.off(this.updatedEventsStr),$(".listview",this.element).off("selected.listbuilder"),$("li ".concat(this.arrangeApi.handle),this.ul).off("mousedown.listbuilder touchstart.listbuilder"),this.arrangeApi.element.off("beforearrange.listbuilder arrangeupdate.listbuilder").destroy(),this.topButtons.off("click.listbuilder"),this.topButtons)for(var e=0,t=this.topButtons.length;e<t;e++){var i=$(this.topButtons[e]).data("tooltip");i&&"function"==typeof i.destroy&&i.destroy()}return this.listApi&&"function"==typeof this.listApi.destroy&&this.listApi.destroy(),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,oh)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],rh)}},$.fn.listbuilder=function(s){return this.each(function(){var e=$.data(this,rh);e?e.updated(s):e=$.data(this,rh,new lh(this,s))})};var jr="modal",Wf=["click","immediate"],Vf=[!1,"responsive","always"],Lo={trigger:"click",buttons:null,isAlert:!1,content:null,cssClass:null,autoFocus:!0,id:null,frameHeight:180,frameWidth:0,beforeShow:null,useFlexToolbar:!1,showCloseBtn:!1,closeBtnOptions:{attributes:[],closeBtnTooltip:"Close"},maxWidth:null,fullsize:Vf[0],breakpoint:"phone-to-tablet",overlayOpacity:.7,noRefocus:!1,triggerButton:null,hideUnderneath:!1,suppressEnterKey:!1,draggable:!1,draggableOffset:{left:0,top:0},propagateStyle:!1,compactPanel:!1,icon:null,iconClass:null,buttonsetTextWidth:null};function ch(s){return s.trigger&&-1===Wf.indexOf(s.trigger)&&(s.trigger=Lo.trigger),s.fullsize&&-1===Vf.indexOf(s.fullsize)&&(s.fullsize=Lo.fullsize),s.breakpoint&&-1===Jt.available.indexOf(s.breakpoint)&&(s.breakpoint=Lo.breakpoint),s}function dh(s,e){this.settings=H.mergeSettings(s,e,Lo),this.settings=ch(this.settings),this.originalElement=$(s),this.element=$(s),this.init(),this.reStructure()}dh.prototype={get isCAP(){return this.element.is(".contextual-action-panel")},get capAPI(){var s;return this.trigger&&this.trigger.length?s=this.trigger.data("contextualactionpanel"):this.mainContent&&this.mainContent.length&&this.mainContent.is("body")&&(s=this.mainContent.data("contextualactionpanel")),s},get isAttachedToBody(){return this.trigger.length&&this.trigger.is("body")},get visible(){return this.element.is(".is-visible")},set visible(s){this.element[0].classList[!0===s?"add":"remove"]("is-visible")},set active(s){this.element[0].classList[!0===s?"add":"remove"]("is-active")},get active(){return this.element[0].classList.contains("is-active")},get isOnTop(){var s=0,e=this.element;return $(".modal.is-visible").each(function(){s<this.style.zIndex&&(s=this.style.zIndex)}),s===e[0].style.zIndex},get currentlyNeedsFullsize(){return"always"===this.settings.fullsize||"responsive"===this.settings.fullsize&&Jt.isBelow(this.settings.breakpoint)||"responsive"===this.settings.fullsize&&this.isAndroid()&&"phone-to-tablet"===this.settings.breakpoint},get closeBtn(){var e=this.capAPI;return e&&e.element instanceof $?e.closeButton[0]:this.element[0].querySelector(".modal-content > button.btn-close")},init:function(){var e=this;if(this.id=this.element.attr("id")||parseInt($(".modal").length,10)+1,this.namespace="".concat(jr,"-").concat(this.id),this.trigger=$('[data-modal="'.concat(this.element.attr("id"),'"]')),this.element.is("body")&&(this.trigger=this.element),this.oldActive=this.settings.triggerButton?this.useJqEl(this.settings.triggerButton):this.trigger,"click"===this.settings.trigger&&!this.isAttachedToBody&&this.trigger.on("click.".concat(e.namespace),function(n){$(n.currentTarget).is(e.trigger)&&e.open()}),"immediate"===this.settings.trigger){var t=new Li({duration:1,timeoutCallback:function(){e.open()}});_i.register(t)}if(e.isCancelled=!1,this.settings.content){this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent();var i=new Li({duration:1,timeoutCallback:function(){e.open()}});_i.register(i)}else{if(this.settings.beforeShow)return this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent(),void this.callSource();this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset(),this.element[0].classList[this.settings.hideUnderneath?"add":"remove"]("hide-underneath"),this.settings.propagateStyle&&this.element.find(".modal-body").addClass("propagate-style"),this.settings.compactPanel&&this.element.find(".modal-body").addClass("compact"),this.registerModal(),this.element.appendTo("body"),this.element[0].style.display="none"}},createDraggable:function(){if(this.settings.draggable){var e=this,t=xe.features.touch,i=this.element,n=this.element.parent(),a=i.find(".modal-header"),o=i.find(".modal-content"),l=o.height()+parseInt(o.css("margin-top").slice(0,-2),10)+parseInt(o.css("margin-bottom").slice(0,-2),10),d=window.innerHeight/2-l/2,h={position:"fixed",top:"".concat(d,"px"),height:"".concat(l,"px")};i.css(h),i.addClass("is-draggable"),a.off("mousedown.modal touchstart.modal").on("mousedown.modal touchstart.modal",function(p){t||p.preventDefault(),i.drag({containment:"partial",containmentOffset:e.settings.draggableOffset}).off("dragstart.modal").on("dragstart.modal",function(){p.stopImmediatePropagation(),i.attr("aria-grabbed","true"),n.attr("aria-dropeffect","move")}).off("dragend.modal").on("dragend.modal",function(){i.removeAttr("aria-grabbed"),n.removeAttr("aria-dropeffect");var v=i.data("drag");v&&"function"==typeof v.destroy&&v.destroy()})})}},appendContent:function(){var e=this,t=!1,i=this.settings.maxWidth?' style="max-width: '.concat(this.settings.maxWidth,'px;"'):"",n=$(this.settings.content).hasClass("splitter-container");if(this.element=$('\n      <div class="modal">\n        <div class="modal-content"'.concat(i,'>\n          <div class="modal-header ').concat(n?"splitter-header":"",'"><h1 class="modal-title"></h1></div>\n          <div class="modal-body-wrapper ').concat(n?"splitter-wrapper":"",'">\n            <div class="modal-body').concat(this.settings.forceOverflow?" overflow":""," ").concat(this.settings.propagateStyle?" propagate-style":""," ").concat(this.settings.compactPanel?" compact":"",'"></div>\n          </div>\n        </div>\n      </div>\n    ')),this.settings.showCloseBtn&&!this.isCAP){var a=$('\n        <button type="button" class="btn-icon btn-close" title="'.concat(B.translate(this.settings.closeBtnOptions.closeBtnTooltip,{showAsUndefined:!1,showBrackets:!1}),'" aria-hidden="true">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(B.translate("Close"),"</span>\n        </button>\n      "));$(window).width()>=400&&this.element.addClass("has-close-btn"),this.element.find(".modal-content").append(a),a.on("click.".concat(this.namespace),function(){e.close()}).tooltip(),this.settings.closeBtnOptions.attributes&&H.addAttributes(a,this,this.settings.closeBtnOptions.attributes,"",!0)}if(this.settings.id&&(this.element.attr("id",this.settings.id),H.addAttributes(this.element,this,this.settings.attributes,"",!0)),$(this.settings.content).is(".modal")?(this.element=$(this.settings.content),t=this.element.parent().hasClass("modal-wrapper")):this.settings.content&&this.settings.content.length>0&&(this.settings.content instanceof jQuery&&this.settings.content.parent().is(".modal-body")?(t=!0,this.element=this.settings.content.closest(".modal")):this.element.find(".modal-body").append(this.settings.content),this.settings.content instanceof jQuery&&!this.settings.beforeShow&&(this.settings.content.removeClass("hidden is-hidden"),this.settings.content.show())),this.settings.beforeShow&&(this.busyIndicator=$('<div class="overlay busy"></div><div class="busy-indicator-container blocked-ui" aria-live="polite" role="status"><div class="busy-indicator active"><div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div></div><span>Loading...</span></div>'),$("body").append(this.busyIndicator)),t||this.element.appendTo("body"),this.settings.cssClass&&this.element.addClass(this.settings.cssClass),this.settings.title&&(this.element.find(".modal-title")[0].innerHTML=Fe.stripTags(this.settings.title,"<div><span><a><small><img><svg><i><b><use><br><strong><em>")),t||(this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset()),this.registerModal(),this.settings.icon){var o=this.settings.iconClass?" icon-".concat(this.settings.iconClass):"",l=$('<svg class="icon'.concat(o,'"\n        focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-').concat(this.settings.icon,'"></use>\n      </svg>'));this.element.find(".modal-title svg.icon").length>0||this.element.find(".modal-title").prepend(l)}H.fixSVGIcons(this.element)},registerModal:function(){this.originalElement.is(this.element)||(this.originalElement.data("modalElementLink",this.element[0]),this.element.data("modal",this)),La.register(this)},reStructure:function(){var e=$(".modal-body",this.element),t=$("hr:first-child",e),i=$(".modal-buttonset",this.element);e&&e.length&&!e.parent().hasClass("modal-body-wrapper")&&e.wrap('<div class="modal-body-wrapper"></div>'),t&&t.length&&!t.parent().hasClass("modal-content")&&t.insertAfter(this.element.find(".modal-header")),i&&i.length&&!i.parent().hasClass("modal-content")&&i.insertAfter(this.element.find(".modal-body-wrapper"))},disableSubmit:function(){var e=this.element,i=e.find(".modal-buttonset button").filter(".btn-modal-primary").not(".no-validation"),n=e.find("select.dropdown[data-validate]"),a=e.find("[data-validate]:visible");if(n.each(function(){$(this).next(".dropdown-wrapper").is(":visible")&&(a=a.add(this))}),a.length>0){i.removeAttr("disabled");var o=!0;a.each(function(){var l=$(this);if(!(l.closest(".datagrid-filter-wrapper").length>0)){var d=l.is(".dropdown")&&l.next(".dropdown-wrapper").is(":visible")||null!==l[0].offsetParent;l.is(".required")?d&&!l.val()&&(o=!1):(l.validateField(),d&&!l.isValid()&&(o=!1)),d&&l.is(".error")&&(o=!1),o&&i.removeAttr("disabled")}}),!o&&!i.is(":disabled")&&i.attr("disabled","true")}},renderButtonset:function(){var e=this,t=this.settings.buttons,n={style:"modal"},a=this;if(!this.buttonsetElem){var o=this.element.find(".modal-buttonset");if(o&&o.length)n.detectHTMLButtons=!0;else{if(!Array.isArray(t)||!t.length)return;var d=this.element.find(".modal-body").parent(),p='<div class="'.concat(this.settings.useFlexToolbar?"toolbar-section ":"",'modal-buttonset"></div>');(o=$(p)).insertAfter(d),n.buttons=t}this.buttonsetElem=o,o.buttonset(n),this.buttonsetAPI=o.data("buttonset"),t=this.buttonsetAPI.toData().buttons}var v=this.buttonsetAPI.buttons,b=$(),w=100/v.length;v.forEach(function(T,k){var A=Array.isArray(t)&&t.length?t[k]:void 0,M=!1;if(A)if(T.element[0].setAttribute("id",t[k].id||H.uniqueId(T.element,"button","modal")),t[k].tabindex&&T.element[0].setAttribute("tabindex",t[k].tabindex),$(T.element).on("click.".concat(a.namespace),function(_){var G=A.click;G&&(G.apply(a.element[0],[_,a]),M=!0)}),$(T.element).not(["[data-ng-click]","[ng-click]","[onclick]",":submit",".btn-menu",".btn-actions",".colorpicker",".fontpicker"].join(", ")).on("click.".concat(a.namespace),function(_){M||($(_.target).is(".btn-cancel")&&(a.isCancelled=!0),0===e.openSubComponents.length&&a.close())}),A.validate&&T.element[0].classList.add("no-validation"),A.attributes)H.addAttributes(T.element,e,A.attributes,"",e);else if(T.element.is("[class*=primary]"))H.addAttributes(T.element,e,a.settings.attributes,"primary",!0);else if(T.element.is("[class*=cancel]")||T.element.text()===B.translate("Cancel"))H.addAttributes(T.element,e,a.settings.attributes,"cancel",!0);else{var z;H.addAttributes(T.element,e,a.settings.attributes,null===(z=T.element)||void 0===z?void 0:z?.prop("id"),!0)}if(T.element[0].style.width="".concat(w,"%"),a.settings.buttonsetTextWidth){var q=T.element[0].querySelector("span"),O="string"==typeof a.settings.buttonsetTextWidth?a.settings.buttonsetTextWidth:"".concat(a.settings.buttonsetTextWidth,"px");q.style.width=O}b.add(T)}),setTimeout(function(){e.addTooltipToButtons()},100)},addTooltipToButtons:function(){if(this.settings.buttons&&this.buttonsetAPI)for(var e=this.settings.buttons,t=0;t<e.length;t++)for(var i=e[t].buttonsetAPI.buttons,n=0;n<i.length;n++){var a,o,l,d,h=i[n];(null===(a=h.element[0])||void 0===a||null==(o=a)?void 0:o.offsetWidth)<(null===(l=h.element[0].querySelector("span"))||void 0===l||null==(d=l)?void 0:d.scrollWidth)&&$(h.element).tooltip({content:h.element[0].querySelector("span").textContent,placement:"top",trigger:"hover"})}},addButtons:function(e){var h,t=this,i=this,a=this.element.find(".modal-body").parent(),o=this.element.find(".flex-toolbar"),l=100,d=!1;if(this.modalButtons=e,!e){var p=this.element.find(".modal-buttonset button");l=100/p.length;for(var v=0,b=p.length;v<b;v++)p[v].style.width="".concat(l,"%");return p.button(),void p.not("[data-ng-click], [ng-click], [onclick], :submit").on("click.".concat(i.namespace),function(k){$(k.target).is(".btn-cancel")&&(i.isCancelled=!0),0===t.openSubComponents.length&&i.close()})}this.isCAP?(d=!0,h=this.element.find(".buttonset")):(h=this.element.find(".modal-buttonset")).length||(h=$('<div class="modal-buttonset"></div>').insertAfter(a)),l=100/e.length,e&&h.empty();for(var w=function(A,M){var L=this,z=$('<button type="button">\n        <span></span>\n      </button>'),q=z.find("span");q.text(A.text),z.attr("type",A.type||"button"),"separator"===A.cssClass&&(z=$('<div class="separator"></div>')),A.cssClass?z.attr("class",A.cssClass):z.addClass(A.isDefault?"btn-modal-primary":"btn-modal"),A.disabled&&(z[0].disabled=!0===A.disabled),A.audible&&q.addClass("audible"),void 0!==A.validate&&!A.validate&&z.addClass("no-validation"),H.addAttributes(z,i,A.attributes,"",!0);for(var O={},_=["id","name","text","tabindex"],G=0;G<_.length;G++)A[_[G]]&&(O[_[G]]=A[_[G]]);if("input"===A.type){var j=$('<label class="audible" for="filter">'.concat(A.text,"</label>")),X=$('<input class="searchfield">').attr(O);return o.length?o.find(".toolbar-section.search").append(j,X):h.append(j,X),void X.searchfield(A.searchfieldSettings)}A.icon&&"#"===A.icon.charAt(0)&&$.createIconElement({classes:["#icon-close"===A.icon?"icon-close":""],icon:A.icon.substr(6)}).prependTo(z),z[0].setAttribute("id",A.id||H.uniqueId(i.element,"button","modal"));var fe=e[M].click;z.on("click.".concat(i.namespace),function(he){fe?fe.apply(i.element[0],[he,i]):0===L.openSubComponents.length&&i.close()}),d||(z[0].style.width="".concat(l,"%")),z.button(),(i.settings.useFlexToolbar||i.settings.centerTitle)&&A.align?("left"===A.align&&o.find(".toolbar-section").eq(0).append(z),"center"===A.align&&o.find(".toolbar-section").eq(1).find("h2").append(z),"right"===A.align&&o.find(".toolbar-section").eq(2).append(z)):h.append(z)},T=0;T<e.length;T++)w(e[T],T)},isAndroid:function(){return"android"===(xe&&xe.os&&xe.os.name?xe.os.name:"")},sizeInner:function(){var e=this.element.find(".detailed-message"),t=$(window).height()-e.offset().top-150;e[0].style.maxHeight="".concat(t,"px"),e[0].style.overflow="auto",e[0].style.width="".concat(e.width(),"px")},callSource:function(){if("function"==typeof this.settings.beforeShow){var e=this;this.settings.beforeShow(function(a){return!1!==a&&($("#modal-busyindicator").trigger("complete.busyindicator"),!0===a?(e.busyIndicator&&(e.busyIndicator.remove(),delete e.busyIndicator),!0):(a instanceof jQuery||(a=$(a)),e.open(!0),e.element.find(".modal-body").empty(),e.element.find(".modal-body").append(a),a.show(),!0))},{})}},open:function(e){var n,t=this;$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden"),this.busyIndicator&&(this.busyIndicator.remove(),delete this.busyIndicator),this.settings.triggerButton?this.oldActive=this.useJqEl(this.settings.triggerButton):(!this.trigger||0===this.trigger.length||this.trigger.is("body"))&&(this.oldActive=$(":focus")),this.overlay||(this.overlay=$(La.overlayElem)),this.root||(this.root=$(La.rootElem));var a=this.element.parent();if(a.is(".modal-wrapper")||(this.element.wrap('<div class="modal-wrapper"></div>'),a=this.element.parent()),a.parent().is(this.root)||a.insertAfter(this.overlay),1===this.element.find(".detailed-message").length&&($("body").on("resize.".concat(this.namespace),function(){t.sizeInner()}),this.sizeInner()),n=this.element.triggerHandler("beforeopen",[this]),this.settings.isAlert||$("body").triggerHandler("beforeopen",[this]),this.isCancelled=!1,!1!==n&&(e||(this.callSource(),!this.settings.beforeShow))){var o=$(".resize-app-menu-container");if(o.length>0&&o.append(this.root),La.currentlyActive=this,this.settings.isAlert){var l=this.element.find("#message-title");H.addAttributes(l,this,this.settings.attributes,"title",!0);var d=this.element.find("#message-text");H.addAttributes(d,this,this.settings.attributes,"message",!0),H.addAttributes(this.element,this,this.settings.attributes,"modal",!0),this.element.attr("aria-labelledby",l.attr("id")),this.element.attr("aria-describedby",d.attr("id"))}else{var h=this.element.find("h1:first");H.addAttributes(h,this,this.settings.attributes,"title",!0),H.addAttributes(this.element.find(".btn-close"),this,this.settings.attributes,"btn-close",!0);var p=h.attr("id");p||(p="".concat(this.element.attr("id")?this.element.attr("id"):"h1","-title"),h.attr("id",p));var v=this.element.find(".modal-body"),b="".concat(this.element.attr("id")?this.element.attr("id"):"message","-text");this.element.attr("aria-labelledby",p),H.addAttributes(this.element,this,this.settings.attributes,"",!0),this.element.find(".toolbar .title").length?(this.element.find(".toolbar .title").attr("id",b),this.element.attr("aria-describedby",b)):(v.attr("id",b),this.element.attr("aria-describedby",b))}this.mainContent=$("body").children(".scrollable-container"),this.mainContent.length||(this.mainContent=$("body")),this.removeNoScroll=!this.mainContent.hasClass("no-scroll"),this.mainContent.addClass("no-scroll"),$("body").on("resize.".concat(this.namespace),function(){t.resize()}),this.element[0].style.display="";var w=this,T=new Li({duration:1,timeoutCallback:function(){w.resize(),w.element.attr("role",w.settings.isAlert?"alertdialog":"dialog"),w.element.attr("aria-modal","true")}}),k=new Li({duration:La.modalFadeDuration,timeoutCallback:function(){w.visible=!0}});_i.register(T),_i.register(k),$(this.element).off("keypress.".concat(this.namespace)).on("keypress.".concat(this.namespace),function(G){var j=$(G.target);j.is(".editor, .searchfield, textarea, :button")||j.closest(".tab-list").length||$("#dropdown-list").length||13===G.which&&t.isOnTop&&!j.closest("form").find(":submit").length&&t.element.find(".btn-modal-primary:enabled").length&&(G.stopPropagation(),G.preventDefault(),!w.settings.suppressEnterKey&&(!j.hasClass("fileupload")||j.hasClass("colorpicker"))&&t.element.find(".btn-modal-primary:enabled").trigger("click"))}),$(".skip-link").on("focus.".concat(this.namespace),function(G){G.preventDefault();var j=t.element.find(":focusable").first();j.focus(),"function"==typeof w.settings.onFocusChange&&w.settings.onFocusChange(w,j[0])}),this.element.find(".paginated").on("afterpaging.".concat(this.namespace),function(){t.resize()});var z=new Li({duration:5,timeoutCallback:function(){w.disableSubmit()}});_i.register(z),this.element.find("[data-validate]").removeClass("disable-validation");var O=new Li({duration:20,timeoutCallback:function(){(function A(G){w.element.trigger("open",[G])})(w),function M(G){if(w.settings.autoFocus){w.changeObserver=new MutationObserver(function(){w.setFocusableElems()}),w.changeObserver.observe(w.element[0],{childList:!0,subtree:!0}),w.setFocusableElems();var fe,he,j=$(w.focusableElems).not(":hidden").first();if(0===j.length&&(j=G.element.find(".btn-modal-primary")),1===j.length&&j.is(".btn-modal")&&(j=G.element.find(".btn-modal-primary")),w.buttonsetAPI&&0===G.buttonsetElem.find(".btn-modal-primary").length){var X=$(".modal-buttonset button")[0];j=G.buttonsetElem.find(X)}if(j.is(".modal-wrapper a")&&(j=G.element.find(".modal-content .message a").removeClass("hide-focus")),j.is(".tab:not(.is-selected) a")&&(fe=(he=j.closest(".tab-container")).find(".is-selected")).length)return j=fe,void he.data("tabs").select(fe.children("a").attr("href"));j.is("input")&&j.closest(".modal-header").length>0||j.focus(),"function"==typeof w.settings.onFocusChange&&w.settings.onFocusChange(w,j[0])}}(w)}});_i.register(O);var _=new Li({duration:30,timeoutCallback:function(){w.element.trigger("afteropen")}});_i.register(_)}},resize:function(){var e,t,i=this.currentlyNeedsFullsize;i?this.element[0].classList.add("display-fullsize"):(this.element[0].classList.remove("display-fullsize"),e=.9*$(window).height()-this.settings.frameHeight,t=1*$(window).width()-this.settings.frameWidth);var n=this.element.find(".modal-body-wrapper");if(n.length&&(i?(n[0].style.maxHeight="",n[0].style.maxWidth=""):(n[0].style.maxHeight="".concat(e,"px"),n[0].style.maxWidth="".concat(t,"px"))),this.element.hasClass("lookup-modal")){var a=this.element.find(".datagrid-wrapper"),o=this.element.find(".pager-toolbar"),l=a.closest(".datagrid-container");e=e-(l.prev().is(".toolbar")?130:67)-(l.next().is(".pager-toolbar")?35:0)+(o.length?-15:0),void 0!==a[0]&&(i?(a[0].style.maxHeight="",a[0].style.maxWidth=""):typeof e<"u"&&typeof t<"u"&&(a[0].style.maxHeight="".concat(e,"px"),a[0].style.maxWidth="".concat(t,"px")))}this.element.hasClass("datagrid-columns-dialog")&&(n[0].style.overflow="hidden",e>220?(this.element.find(".modal-body")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.maxHeight="",this.element.find(".listview.alternate-bg")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.minHeight=""):(this.element.find(".modal-body")[0].style.height="".concat(e,"px"),this.element.find(".listview.alternate-bg")[0].style.maxHeight="".concat(e-41,"px"),this.element.find(".listview.alternate-bg")[0].style.height="".concat(e-41,"px"),this.element.find(".listview.alternate-bg")[0].style.minHeight=0)),this.settings.showCloseBtn&&!this.isCAP&&($(window).width()<400&&this.element.hasClass("has-close-btn")?this.element.removeClass("has-close-btn"):$(window).width()>=400&&!this.element.hasClass("has-close-btn")&&this.element.addClass("has-close-btn"));var d=this.element.find(".toolbar");d.length&&d.triggerHandler("recalculate-buttons"),this.createDraggable()},isOpen:function(){return gi("visible","isOpen"),this.visible},get openSubComponents(){var i=bo(this.element.find("*"),["isOpen","visible"],["datepicker","dropdown","popupmenu","timepicker","tooltip"]),n=[];return i.forEach(function(a){var o=a.control,l="boolean"==typeof o.isPopover&&!0===o.isPopover;("function"==typeof o.isOpen&&o.isOpen()||"boolean"==typeof o.isOpen&&!0===o.isOpen||l&&"boolean"==typeof o.visible&&!0===o.visible)&&n.push(o)}),n},get isFocused(){var s=!1,e=document.activeElement;this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach(function(i){if(!s){var a,o,l,d,n=$(i);(n.is($(e))||"function"==typeof i.contains&&i.contains(e))&&(s=!0),n.is("div.dropdown, div.multiselect")&&(s=null===(a=n.parent().prev("select").data("dropdown"))||void 0===a?void 0:a?.isFocused),n.is(".lookup")&&(s=null===(o=n.data("lookup"))||void 0===o?void 0:o?.isFocused),n.is(".btn-menu, .btn-actions")&&(s=null===(l=n.data("popupmenu"))||void 0===l?void 0:l?.isFocused),n.is(".searchfield")&&(s=null===(d=n.data("searchfield"))||void 0===d?void 0:d?.isFocused)}});var t=$(e).parents(".tooltip, .popover");return t.length&&t.each(function(i,n){var a=n.className.contains("popover")?"popover":"tooltip",o=$(n).data(a);o&&o.isFocused&&(s=!0)}),s},setFocusableElems:function(){var i=de.focusableElems(this.element[0],[],["option"]);this.focusableElems=i,this.focusableElems.first=i[0],this.focusableElems.last=i[i.length-1]},setFocus:function(e){if(-1!==["last","first"].indexOf(e)){var i;switch(this.focusableElems||this.setFocusableElems(),e){case"last":i=this.focusableElems.last;break;case"first":i=this.focusableElems.first}i&&(i.focus(),i.classList.remove("hide-focus"),"function"==typeof this.settings.onFocusChange&&this.settings.onFocusChange(this,i))}},close:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;if(!i&&!this.visible)return!0;if(!1===this.element.triggerHandler("beforeclose".concat(n?".".concat(n):"")))return!1;var o=this;if(this.element.find("[data-validate]").addClass("disable-validation"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.isCAP&&this.element.addClass("is-animating"),this.mainContent&&this.removeNoScroll&&this.mainContent.removeClass("no-scroll"),$("body").off("resize.".concat(this.namespace," focusin.").concat(o.namespace)),this.element.off("keypress.".concat(this.namespace," keydown.").concat(this.namespace)),this.openSubComponents.length>0&&!i){var d=this.openSubComponents[0];if(d.element.hasClass("colorpicker"))d.close();else{var h,p=null==d||null===(h=d?.popup)||void 0===h?void 0:h?.data("popover");p&&p.hide()}}else this.visible=!1,this.active=!1;delete this.dontCheckFocus,o.element.trigger(n?"close.".concat(n):"close",o.isCancelled),!this.settings.noRefocus&&this.isFocused&&document.activeElement.blur(),$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden");var b=$(this.closeBtn).data("tooltip");b&&(b.hide(),b.reopenDelay=!0),$(".skip-link").off("focus.".concat(this.namespace));var w=new Li({duration:La.modalFadeDuration,timeoutCallback:function(){n?o.element.trigger("afterclose.".concat(n),o.isCancelled):o.element.trigger("afterclose"),b&&delete b.reopenDelay,("immediate"===o.settings.trigger||e)&&(!o.isCAP||o.isCAP&&!o.capAPI)&&o.destroy(n),t||La.refresh(),o.settings.noRefocus||(!o.oldActive&&o.settings.triggerButton&&(o.oldActive=o.useJqEl(o.settings.triggerButton)),o.oldActive&&$(o.oldActive).is("a:visible, button:visible, input:visible, textarea:visible")?o.oldActive.focus():o.trigger.parents(".toolbar, .formatter-toolbar").length<1&&o.trigger.focus())}});return _i.register(w),!1},useJqEl:function(e){return e instanceof jQuery?e:$(e)},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element,e,this.settings),this.settings=ch(this.settings)),"immediate"===this.settings.trigger&&this.open(),this},destroy:function(e){var t=this;function n(){t.trigger.off("click.".concat(t.namespace)),t.element.off("keypress.".concat(t.namespace," keydown.").concat(t.namespace," beforeclose.").concat(t.namespace," afterclose.").concat(t.namespace)),t.element.find("button, .btn-close").off("click.".concat(t.namespace)),t.element.find(".paginated").off("afterpaging.".concat(t.namespace)),$(".skip-link").off("focus.".concat(t.namespace)),$("body").off("resize.".concat(t.namespace)),$(t.element).off("keydown.".concat(t.namespace)),1===t.element.find(".detailed-message").length&&$("body").off("resize.".concat(t.namespace)),t.isCAP&&t.capAPI&&t.capAPI.destroy(),t.aboutAPI&&t.aboutAPI.destroy(!0),t.buttonsetAPI&&(t.buttonsetAPI.buttons.forEach(function(l){$(l.element).off("click.".concat(t.namespace))}),t.buttonsetAPI.destroy(),t.buttonsetElem.remove(),delete t.buttonsetAPI,delete t.buttonsetElem),delete t.focusableElems,t.trigger.off("click.".concat(t.namespace)),t.element[0].removeAttribute("data-modal");var a=t.element.parent(".modal-wrapper");a.length&&a.remove();var o=new Li({duration:21,timeoutCallback:function(){var d=null,h=t.element?t.element.data(jr):null;h?d=t.element[0]:(h=t.trigger?t.trigger.data(jr):null)&&(d=t.trigger[0]),d&&h&&h.overlay&&$.removeData(d,jr)}});_i.register(o),La.unregister(t),t.originalElement instanceof $&&$.removeData(t.originalElement[0],"modalElementLink"),$.removeData(t.element[0],jr)}this.element.trigger("beforedestroy".concat(e?".".concat(e):""))&&(this.visible?(this.element.on("afterclose.".concat(t.namespace),function(){n()}),this.close(!0)):n())}};var Al={title:"Message Title",status:"",message:"Message Summary",width:"auto",maxWidth:null,buttons:null,showCloseBtn:!1,cssClass:null,returnFocus:null,allowedTags:"<a><b><br><br/><del><em><i><ins><mark><small><strong><sub><sup>",audibleLabel:"",overlayOpacity:.7,hideUnderneath:!1,attributes:null,noRefocus:!1};function Po(s,e){this.element=$(s),this.settings=H.mergeSettings(s,e,Al),this.init()}Po.prototype={init:function(){var i,e=this,t=this,n=this.settings.allowedTags,a=!0;if(this.settings.allowedTags.length>0||(a=!1),this.message=$('<div class="modal message" '.concat(this.settings.id?'id="'.concat(this.settings.id,'"'):"","></div>")),this.messageContent=$('<div class="modal-content"></div>'),this.title=$('<h1 class="modal-title" id="message-title">'.concat(a?Fe.stripTags(this.settings.title,n):Fe.stripHTML(this.settings.title),"</h1>")).appendTo(this.messageContent).wrap('<div class="modal-header"></div>'),this.content=$('<div class="modal-body"><div class="message" id="message-text">'.concat(a?Fe.stripTags(this.settings.message,n):Fe.stripHTML(this.settings.message),"</div></div>")).appendTo(this.messageContent),""!==this.settings.audibleLabel&&this.title.prepend('<span class="audible">'.concat(B.translate(this.settings.audibleLabel),"</span>")),this.element.is("body")||(i=this.element,this.content.empty().append(i.show())),this.message.append(this.messageContent).appendTo("body"),this.message.modal({trigger:"immediate",buttons:this.settings.buttons,resizable:this.settings.resizable,close:this.settings.close,showCloseBtn:this.settings.showCloseBtn,isAlert:!0,overlayOpacity:this.settings.overlayOpacity,hideUnderneath:this.settings.hideUnderneath,attributes:this.settings.attributes,noRefocus:this.settings.noRefocus}),"auto"!==this.settings.width&&(this.content.closest(".modal")[0].style.maxWidth="none",this.content.closest(".modal")[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px")),this.settings.maxWidth&&(this.content.find(".message")[0].style.maxWidth=this.settings.maxWidth),this.settings.cssClass&&this.message.addClass(this.settings.cssClass),this.settings.showCloseBtn){var o=$('\n        <button type="button" class="btn-icon btn-close" title="'.concat(B.translate("Close"),'" aria-hidden="true">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(B.translate("Close"),"</span>\n        </button>\n      "));this.message.find(".modal-content").append(o),o.on("click",function(){return e.destroy()})}this.message.on("beforeclose.message",function(){return t.element.triggerHandler("beforeclose")}).on("beforeopen.message",function(){return t.element.triggerHandler("beforeopen")}).on("open.message",function(){t.element.trigger("open")}).on("afterclose.message",function(){t.destroy(),t.settings.returnFocus&&t.settings.returnFocus.focus(),$(document).off("keypress.message keydown.message")}),$(document).on("keypress.message keydown.message",function(l){27===(l.which||l.keyCode)&&setTimeout(function(){var h=t.message.data("modal");void 0!==h&&h.close()},0)}),"error"===this.settings.status?this.title.addClass("has-status is-error").prepend($.createIconElement("error")):"alert"===this.settings.status?this.title.addClass("has-status is-alert").prepend($.createIconElement("alert")):"success"===this.settings.status?this.title.addClass("has-status is-success").prepend($.createIconElement("success")):"info"===this.settings.status?this.title.addClass("has-status is-info").prepend($.createIconElement("info")):this.title.removeClass("has-status is-error is-alert is-success is-info").find("svg").remove()},destroy:function(){var e=this.message.data("modal");void 0!==e&&e.destroy(),this.message.off("beforeclose.message beforeopen.message open.message afterclose.message").remove()}},$.fn.message=function(s){return this.each(function(){return new Po(this,s)})},$.fn.modal=function(s){return this.each(function(){var e=$.data(this,jr),t=$(this);if(t.is(".modal")||(e=t.closest(".modal").data(jr)),e&&s)return e.updated(s),void("function"==typeof e[s]&&e[s]());e&&!s||(e=$.data(this,jr,new dh(this,s)))})},$.fn.monthview=function(s){return this.each(function(){var e=$.data(this,vl);e?e.updated(s):e=$.data(this,vl,new ml(this,s))})};var No="multiselect",Uf={closeOnSelect:!1,empty:!0,filterMode:"contains",maxSelected:void 0,moveSelected:"all",multiple:!0,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0,allTextString:null,selectedTextString:null};function El(s,e){this.settings=H.mergeSettings(s,e,Uf),this.element=$(s),this.init()}El.prototype={init:function(){this.build()},build:function(){return this.element.dropdown(this.settings),this.dropdown=this.element.data("dropdown"),this},enable:function(){this.dropdown.enable()},disable:function(){this.dropdown.disable()},updated:function(e){e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.build()},destroy:function(){this.dropdown.destroy(),this.element.off(),$.removeData(this.element[0],No)}},$.fn.multiselect=function(s){return this.each(function(){var e=$.data(this,No);e?e.updated(s):e=$.data(this,No,new El(this,s))})};var Bo=[!1,"collapsed","expanded"],$c='<svg\n  class="icon-custom"\n  focusable="false"\n  aria-hidden="true"\n  width="32"\n  height="32"\n  viewBox="0 0 32 32"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg">\n  <rect width="32" height="32" rx="8" fill="#1C86EF"/>\n  <path d="M7.8315 20V11.2727H13.5076V12.598H9.41246V14.9673H13.2136V16.2926H9.41246V18.6747H13.5417V20H7.8315ZM15.0524 20V13.4545H16.5268V14.5668H16.6035C16.7399 14.1918 16.9657 13.8991 17.2811 13.6889C17.5964 13.4759 17.9728 13.3693 18.4103 13.3693C18.8535 13.3693 19.2271 13.4773 19.5311 13.6932C19.8379 13.9062 20.0538 14.1974 20.1788 14.5668H20.247C20.3919 14.2031 20.6362 13.9134 20.9799 13.6974C21.3265 13.4787 21.737 13.3693 22.2115 13.3693C22.8137 13.3693 23.3052 13.5597 23.6859 13.9403C24.0666 14.321 24.2569 14.8764 24.2569 15.6065V20H22.7101V15.8452C22.7101 15.4389 22.6021 15.142 22.3862 14.9545C22.1703 14.7642 21.9061 14.669 21.5936 14.669C21.2214 14.669 20.9302 14.7855 20.72 15.0185C20.5126 15.2486 20.4089 15.5483 20.4089 15.9176V20H18.8961V15.7812C18.8961 15.4432 18.7939 15.1733 18.5893 14.9716C18.3876 14.7699 18.1234 14.669 17.7967 14.669C17.5751 14.669 17.3734 14.7259 17.1916 14.8395C17.0098 14.9503 16.8649 15.108 16.7569 15.3125C16.649 15.5142 16.595 15.75 16.595 16.0199V20H15.0524Z" fill="white"/>\n</svg>',Kr=function(){return $c},Xr=function(e){return Bo.includes(e)},$l=function(e,t){t.classList.remove("mode-collapsed","mode-expanded"),Xr(e)&&e&&t.classList.add("mode-".concat(e))},uh=function(e,t,i){var n;"collapsed"===t?$(e).tooltip({placementOpts:{x:16},placement:"right",title:(i||e).textContent.trim()}):null===(n=$(e).data("tooltip"))||void 0===n||n?.destroy()},Ro="modulenavswitcher",jg={displayMode:Bo[0],generate:!0,icon:Kr,noSearch:!1,changeIconOnSelect:!0,moduleButtonText:"Standard Module",roleDropdownLabel:"Roles",attributes:null,roles:[]};function Ic(s,e){this.settings=H.mergeSettings(s,e,jg),this.element=$(s),this.init()}Ic.prototype={get accordionEl(){var s;return null===(s=this.element.parents(".accordion").first())||void 0===s?void 0:s?.[0]},get accordionAPI(){return this.accordionEl?$(this.accordionEl).data("accordion"):void 0},get containerEl(){return this.element.parents(".module-nav-container")[0]},get moduleButtonContainerEl(){return this.element[0].querySelector(".module-nav-section.module-btn")},get moduleButtonEl(){return this.moduleButtonContainerEl.querySelector("button")},get moduleButtonIconEl(){var s;return null===(s=this.moduleButtonEl)||void 0===s?void 0:s?.querySelector("svg, img, .icon, .custom-icon")},get moduleButtonAPI(){return this.moduleButtonEl?$(this.moduleButtonEl).data("button"):void 0},get roleDropdownContainerEl(){return this.element[0].querySelector(".module-nav-section.role-dropdown")},get roleDropdownEl(){return this.element[0].querySelector(".dropdown")},get roleDropdownAPI(){return this.roleDropdownEl?$(this.roleDropdownEl).data("dropdown"):void 0},init:function(){return this.build().handleEvents()},build:function(){return this.renderChildComponents(),this.setDisplayMode(this.settings.displayMode),(!this.moduleButtonIconEl||this.settings.icon!==Kr)&&this.setModuleButtonIcon(),$(this.roleDropdownEl).find("option").length||this.renderDropdownOptions(!0),this},handleEvents:function(){var e=this,t=this;return this.element.on("updated.".concat(Ro),function(){t.updated()}),this.element.on("keydown.".concat(Ro),function(i){var o,a,n=i.key;"ArrowUp"!==n?"ArrowDown"===n&&(null===(o=e.accordionAPI)||void 0===o||o?.nextHeader(e.element)):null===(a=e.accordionAPI)||void 0===a||a?.prevHeader(e.element)}),this},renderChildComponents:function(){this.renderModuleButton(),this.renderRoleDropdown()},renderModuleButton:function(){var e;this.settings.generate&&(!this.moduleButtonContainerEl||!this.moduleButtonEl)&&this.element[0].insertAdjacentHTML("afterbegin",(e=this.settings.moduleButtonText,'<div class="module-nav-section module-btn">\n  <button id="module-nav-homepage-btn" class="btn-icon btn-tertiary">\n    '.concat($c,"\n    <span>").concat(e||(B?B.translate("ModuleSwitch"):"Switch Modules"),"</span>\n  </button>\n</div>"))),this.moduleButtonEl&&($(this.moduleButtonEl).button({ripple:!1}),uh(this.element,this.settings.displayMode,this.moduleButtonEl))},renderRoleDropdown:function(){var e=this,t=$(this.roleDropdownEl);this.settings.generate&&(!this.roleDropdownContainerEl||!this.roleDropdownEl)&&this.element[0].insertAdjacentHTML("beforeend",function(e){return'<div class="module-nav-section role-dropdown">\n  <label for="module-nav-role-switcher" class="label audible">'.concat(e||"Roles",'</label>\n  <select id="module-nav-role-switcher" name="module-nav-role-switcher" class="dropdown"></select>\n</div>')}(this.settings.roleDropdownLabel)),t.find("option").length||this.renderDropdownOptions(),this.settings.disabled?t.attr("disabled",!0):t.removeAttr("disabled"),t.dropdown({cssClass:"role-dropdown",dropdownIcon:"expand-all",extraListWrapper:!0,width:"parent",widthTarget:".module-nav-switcher",noSearch:this.settings.noSearch,attributes:this.settings.attributes}).off("change.module-nav").on("change.module-nav",function(i){e.settings.changeIconOnSelect&&e.selectRole(i.currentTarget.value)})},renderDropdownOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Array.isArray(this.settings.roles)&&this.settings.roles.length&&this.setRoles(this.settings.roles,e)},setDisplayMode:function(e){Xr(e)&&(this.settings.displayMode!==e&&(this.settings.displayMode=e),$l(e,this.element[0]))},setModuleButtonIcon:function(e){var t="";switch(rt(this.settings.icon)){case"function":t=this.settings.icon(this);break;case"string":t=st.isValidURL(this.settings.icon)?function(e,t){return'<img src="'.concat(e,'" alt="').concat(t||"Module Button Icon",'" class="custom-icon" aria-hidden="true" role="presentation" />')}(this.settings.icon,this.settings.moduleButtonText):"<"!==this.settings.icon.charAt(0)&&document.querySelector("symbol#icon-".concat(this.settings.icon))?function(e){return'<svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n  <use href="#icon-'.concat(e,'"></use>\n</svg>')}(this.settings.icon):this.settings.icon}if(e&&(t=e),t.length){var i=this.moduleButtonIconEl;i?.remove(),this.moduleButtonEl.insertAdjacentHTML("afterbegin",t)}},setRoles:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(e)&&this.roleDropdownEl){var n,i="";if(this.roleDropdownEl&&(this.roleDropdownEl.innerHTML=""),e.length&&e.forEach(function(o){i+=function(e,t,i,n){return'<option\n  value="'.concat(e,'"\n  ').concat(i?" data-icon=\"{icon: '".concat(i,"'").concat(n?", colorOver: '".concat(n,"'"):""):"",'}">').concat(t,"</option>")}(o.value,o.text,o.icon,o.iconColor)}),i.length&&(null===(n=this.roleDropdownEl)||void 0===n||n?.insertAdjacentHTML("afterbegin",i),t)){this.roleDropdownAPI.updated();var a=this.roleDropdownAPI.selectedValues;a.length&&this.selectRole(a[0])}}},selectRole:function(e){var i,t=this.roleDropdownAPI.listIcon.items;null!=t&&t?.length&&(t.forEach(function(n){!i&&n.value===e&&(i=n.html)}),i&&this.setModuleButtonIcon(i))},toggleModuleButtonFocus:function(e){var t,i;if(this.moduleButtonEl){var n=(null===(t=document.activeElement)||void 0===t?void 0:t?.isEqualNode(this.moduleButtonEl))||(null===(i=this.moduleButtonEl)||void 0===i?void 0:i?.classList.contains("is-focused"));this.moduleButtonEl.classList[("boolean"==typeof e?e:!n)?"add":"remove"]("is-focused")}},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},teardown:function(){var e,t;return this.element.off("updated.".concat(Ro," keydown.").concat(Ro)),this.moduleButtonEl&&(null===(e=$(this.moduleButtonEl).data("button"))||void 0===e||e?.destroy()),this.roleDropdownEl&&(null===(t=$(this.roleDropdownEl).data("dropdown"))||void 0===t||t?.destroy()),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Ro)}},$.fn.modulenavswitcher=function(s){return this.each(function(){var e=$.data(this,Ro);e?e.updated(s):e=$.data(this,Ro,new Ic(this,s))})};var sn="modulenav",Kg={accordionSettings:{expanderDisplay:"classic",tooltipStyle:"dark"},displayMode:Bo[0],filterable:!1,initChildren:!0,pinSections:!1,showDetailView:!1,mobileBehavior:!0,breakpoint:"phone-to-tablet",showOverlay:!0,showModuleSwitcher:!0,showGuestSection:!1,showSearchBar:!0,enableOutsideClick:!1,autoCollapseOnMobile:!0,disableSwitcher:!1},jf=function(e,t){var i=!1;return e instanceof HTMLElement&&(void 0===t&&e.scrollHeight>e.clientHeight||!0===t?(e.classList.add("has-scrollbar"),i=!0):e.classList.remove("has-scrollbar")),i};function hh(s,e){this.settings=H.mergeSettings(s,e,Kg),this.element=$(s),this.init()}hh.prototype={previousDisplayMode:!1,get accordionAPI(){return this.accordionEl?$(this.accordionEl).data("accordion"):void 0},get containerEl(){var s;return null===(s=this.element[0])||void 0===s?void 0:s?.parentElement},get pageContainerEl(){return this.element.next(".page-container")},get moduleSwitcherEl(){return this.element.find(".module-nav-header")[0]},get moduleSearchEl(){return this.element.find(".module-nav-search-container")[0]},get moduleGuestSectionEl(){return this.element.find(".module-nav-guest")[0]},get switcherAPI(){return this.switcherEl?$(this.switcherEl).data("modulenavswitcher"):void 0},get searchAPI(){return this.searchEl?$(this.searchEl).data("searchfield"):void 0},get settingsAPI(){return this.settingsEl?$(this.settingsEl).data("modulenavsettings"):void 0},init:function(){return this.build().handleEvents()},build:function(){return this.renderChildComponents(),this.setDisplayMode(this.settings.displayMode),this.setPinSections(this.settings.pinSections),this.setScrollable(),this.setShowDetailView(this.settings.showDetailView),this.setShowModuleSwitcher(this.settings.showModuleSwitcher),this.setShowModuleSearch(this.settings.showSearchBar),this.setShowGuestSection(this.settings.showGuestSection),this.configureResize(),this},renderChildComponents:function(){this.detailViewEl=this.element[0].querySelector(".module-nav-detail"),this.switcherEl=this.element[0].querySelector(".module-nav-switcher"),this.itemMenuEl=this.element[0].querySelector(".module-nav-main"),this.settingsEl=this.element[0].querySelector(".module-nav-settings"),this.footerEl=this.element[0].querySelector(".module-nav-footer"),this.accordionEl=this.element[0].querySelector(".accordion"),this.searchEl=this.element[0].querySelector(".searchfield"),this.renderSeparators(),this.settings.initChildren&&(this.switcherAPI||$(this.switcherEl).modulenavswitcher({displayMode:this.settings.displayMode,disabled:this.settings.disableSwitcher}),this.settingsAPI||$(this.settingsEl).modulenavsettings({displayMode:this.settings.displayMode}),this.accordionAPI||$(this.accordionEl).accordion(this.settings.accordionSettings)),this.accordionEl&&this.configureAccordion(),this.searchEl&&this.configureSearch()},renderSeparators:function(){var e,t;(this.switcherEl||this.searchEl)&&(null===(e=this.itemMenuEl)||void 0===e||e?.insertAdjacentHTML("beforebegin",'<div class="module-nav-separator">&nbsp;</div>')),this.footerEl&&(null===(t=this.footerEl)||void 0===t||t?.insertAdjacentHTML("beforebegin",'<div class="module-nav-separator">&nbsp;</div>'))},handleEvents:function(){var e=this;return this.element.on("updated.".concat(sn),function(){e.updated()}),this.accordionEl&&($(this.accordionEl).on("rendered.".concat(sn),function(){e.configureAccordion()}),$(this.accordionEl).on("beforeexpand.".concat(sn),function(t){return t.preventDefault(),"expanded"===e.settings.displayMode}),$(this.accordionEl).on("afterexpand.".concat(sn),function(){e.setScrollable()}),$(this.accordionEl).on("aftercollapse.".concat(sn),function(){e.setScrollable()}),$(this.accordionEl).on("selected.".concat(sn),function(t,i){$(i).is("#module-nav-settings-btn")||(e.settings.accordionSettings.selected=i,e.handleAutoCollapseOnMobile())}),$(this.accordionEl).on("followlink.".concat(sn),function(t,i){$(i).is("#module-nav-settings-btn")||e.handleAutoCollapseOnMobile()})),$("body").on("resize.".concat(sn),Xn(function(){e.checkMobileBehavior()},0)),this.settings.mobileBehavior||this.enableOutsideClickEvent(),this},enableOutsideClickEvent:function(){var e=this;this.settings.enableOutsideClick&&"expanded"===this.settings.displayMode&&$(this.containerEl).on("click.".concat(sn),function(t){e.checkOutsideClick(t.target)})},checkMobileBehavior:function(){if(this.settings.mobileBehavior){if("expanded"===this.settings.displayMode){var e=this.pageContainerEl.find(".page-overlay");return Jt.isAbove(this.settings.breakpoint)?(this.element[0].classList.remove("show-shadow"),this.pageContainerEl[0].classList.add("has-module-nav-offset"),this.settings.enableOutsideClick=!1,this.removeOutsideClickEvent(),void e.remove()):(this.element[0].classList.add("show-shadow"),this.pageContainerEl[0].classList.remove("has-module-nav-offset"),0===e.length&&this.settings.showOverlay&&$('<div class="page-overlay"></div>').appendTo(this.pageContainerEl),this.settings.enableOutsideClick=!0,void this.enableOutsideClickEvent())}if("collapsed"===this.settings.displayMode&&!this.isLargerThanBreakpoint())return void $l(!1,this.containerEl);"collapsed"===this.settings.displayMode&&this.isLargerThanBreakpoint()&&$l("collapsed",this.containerEl)}},removeOutsideClickEvent:function(){$(this.containerEl).off("click.".concat(sn))},checkOutsideClick:function(e){if("expanded"===this.settings.displayMode){var t=e;t&&!$(t).is(".application-menu-trigger")&&!this.element[0].contains(t)&&(this.setDisplayMode(!!this.isLargerThanBreakpoint()&&"collapsed"),this.removeOutsideClickEvent())}},handleHamburgerClick:function(){var e=this.settings.displayMode;"expanded"===e&&this.isLargerThanBreakpoint()?this.updated({displayMode:"collapsed"}):"collapsed"===e&&this.isLargerThanBreakpoint()?this.updated({displayMode:"expanded"}):"expanded"!==e||this.isLargerThanBreakpoint()?"collapsed"!==e||this.isLargerThanBreakpoint()?!1===e&&this.updated({displayMode:"expanded"}):this.updated({displayMode:"expanded"}):this.updated({displayMode:!1})},handleSearchfieldInputEvent:function(){qi.handleSearchfieldInputEvent.apply(this,[sn])},collapseAccordionHeaders:function(){var e=this;this.accordonEl&&this.accordionAPI&&Mi(this.containerEl.querySelectorAll(".accordion-header")).forEach(function(i){$(i).next(".accordion-pane").length&&e.accordionAPI.collapse($(i),!0)})},configureAccordion:function(){var e=this;if(this.accordionEl&&this.accordionAPI){var i=H.mergeSettings(this.accordionEl,{accordionFocusCallback:function(o,l){o.is(".module-nav-switcher")?"expanded"===e.settings.displayMode?o.find(".dropdown").focus():o.find(".module-btn button").focus():l()}},this.settings.accordionSettings);this.accordionAPI.updated(i);var n=this.accordionEl.querySelectorAll(".accordion-section > .accordion-header, .accordion-section > soho-module-nav-settings > .accordion-header");n.length&&Mi(n).forEach(function(a){uh(a,e.settings.displayMode)})}},configureResize:function(){var e=this;typeof ResizeObserver>"u"||(this.ro||(this.ro=new ResizeObserver(function(){e.setPinSections(e.settings.pinSections),e.setScrollable(),e.checkMobileBehavior()})),this.accordionEl&&this.ro.observe(this.accordionEl))},configureSearch:function(){var e;this.settings.filterable?(qi.attachFilter.apply(this,[sn]),qi.attachFilterEvents.apply(this,[sn])):$(this.searchEl).searchfield(),this.searchEl.classList.add("module-nav-search"),null===(e=$(this.searchEl).parents(".accordion-section"))||void 0===e||e?.[0].classList.add("module-nav-search-container")},setDisplayMode:function(e){var t,i;Xr(e)&&("expanded"!==this.settings.displayMode&&(this.previousDisplayMode=this.settings.displayMode),this.settings.displayMode!==e&&(this.settings.displayMode=e),$l(e,this.containerEl),$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden"),null===(t=this.switcherAPI)||void 0===t||t?.setDisplayMode(e),null===(i=this.settingsAPI)||void 0===i||i?.setDisplayMode(e),"expanded"!==this.settings.displayMode?this.collapseAccordionHeaders():this.settings.mobileBehavior||this.enableOutsideClickEvent(),this.element.trigger("displaymodechange",[e,this.previousDisplayMode]),this.checkMobileBehavior())},setPinSections:function(e){this.containerEl.classList[e?"add":"remove"]("pinned-optional")},setScrollable:function(){this.settings.pinSections?(this.setMainAccordionScrollable(!1),this.setAccordionSectionsScrollable()):(this.setAccordionSectionsScrollable(!1),this.setMainAccordionScrollable())},setMainAccordionScrollable:function(e){jf(this.accordionEl,e)},setAccordionSectionsScrollable:function(e){var t,i=!1,n=null===(t=this.accordionEl)||void 0===t?void 0:t?.querySelectorAll(".accordion-section");n&&n.length&&Mi(n).forEach(function(a){jf(a,e)&&(i=!0);var l=a.classList.contains("module-nav-search-container");(a.classList.contains("module-nav-header")||l)&&(e?a.classList.add("next-scrollbar"):a.classList.remove("next-scrollbar"))}),this.containerEl.classList[i?"add":"remove"]("has-section-scrollbars")},setShowDetailView:function(e){var t;this.containerEl.classList[e?"add":"remove"]("show-detail"),null===(t=this.detailViewEl)||void 0===t||t?.classList[e?"add":"remove"]("visible")},setShowModuleSwitcher:function(e){var t;null===(t=this.moduleSwitcherEl)||void 0===t||t?.classList[e?"remove":"add"]("hidden")},setShowModuleSearch:function(e){var t;null===(t=this.moduleSearchEl)||void 0===t||t?.classList[e?"remove":"add"]("hidden")},setShowGuestSection:function(e){var t;null===(t=this.moduleGuestSectionEl)||void 0===t||t?.classList[e?"remove":"add"]("hidden")},isLargerThanBreakpoint:function(){return Jt.isAbove(this.settings.breakpoint)},handleAutoCollapseOnMobile:function(){this.settings.autoCollapseOnMobile&&(this.userOpened=!1,!this.isLargerThanBreakpoint()&&this.setDisplayMode(this.previousDisplayMode))},updated:function(e){return e&&(this.settings=H.deepMergeObject(this.settings,e),this.switcherAPI&&(this.switcherAPI.settings.displayMode=this.settings.displayMode),this.settingsAPI&&(this.settingsAPI.settings.displayMode=this.settings.displayMode)),this.teardown().init()},teardown:function(){var e,t,i,n;return this.teardownEvents(),qi.teardownFilter.apply(this,[sn]),$(this.element).find(".module-nav-separator").remove(),this.detailViewEl=null,null===(e=this.switcherAPI)||void 0===e||e?.destroy(),this.switcherEl=null,this.itemMenuEl=null,null===(t=this.settingsAPI)||void 0===t||t?.destroy(),this.settingsEl=null,this.footerEl=null,null===(i=this.accordionAPI)||void 0===i||i?.destroy(),this.accordionEl=null,null===(n=this.searchAPI)||void 0===n||n?.destroy(),this.searchEl=null,this},teardownEvents:function(){this.removeOutsideClickEvent(),this.element.off("updated.".concat(sn)),$(this.accordionEl).off("rendered.".concat(sn)),$(this.accordionEl).off("beforeexpand.".concat(sn)),$(this.accordionEl).off("afterexpand.".concat(sn)),$(this.accordionEl).off("aftercollapse.".concat(sn)),$("body").off("resize.".concat(sn))},teardownResize:function(){this.ro&&(this.ro.disconnect(),this.ro=null)},destroy:function(){this.teardown(),this.teardownResize(),$.removeData(this.element[0],sn)}},$.fn.modulenav=function(s){return this.each(function(){var e=$.data(this,sn);e?e.updated(s):e=$.data(this,sn,new hh(this,s))})};var Dl="modulenavsettings",fh={displayMode:!1};function Ml(s,e){this.settings=H.mergeSettings(s,e,fh),this.element=$(s),this.init()}Ml.prototype={get accordionEl(){var s;return null===(s=this.element.parents(".accordion").first())||void 0===s?void 0:s?.[0]},get menuAPI(){return $(this.element).data("popupmenu")||void 0},init:function(){return this.build().handleEvents()},build:function(){return this.renderChildComponents(),this.setDisplayMode(this.settings.displayMode),this.configurePopupMenu(),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(Dl),function(){e.updated()}),this},renderChildComponents:function(){var e;this.containerEl=this.element.parents(".module-nav-container")[0],this.detectPopupMenu(),null!==(e=this.menuEl)&&void 0!==e&&e?.length||(this.element[0].insertAdjacentHTML("afterend",'<div class="popupmenu-wrapper><ul class="popupmenu"></ul></div>'),this.menuEl=this.element.next(".popupenu-wrapper").find(".popupmenu"))},detectPopupMenu:function(){if(this.menuEl=this.element.next(".popupmenu"),this.element.next(".popupmenu-wrapper").length&&(this.menuEl=this.element.next(".popupenu-wrapper").find(".popupmenu")),!this.menuEl.length){var e=$(".popupmenu-wrapper.module-nav-settings-menu").find(".popupmenu");e.length&&(this.menuEl=e)}},configurePopupMenu:function(){this.menuEl.length||this.detectPopupMenu(),this.element.popupmenu(this.getPopupmenuConfig())},getPopupmenuConfig:function(){var e=this,t={placement:"bottom",containerOffsetX:8,containerOffsetY:8,callback:function(n){return"collapsed"===e.element.closest(".module-nav").data("modulenav").settings.displayMode&&(n.x+=20,n.containerOffsetY=20,n.placement="right"),n}};return{cssClass:"module-nav-settings-menu",offset:{x:0,y:10},placementOpts:t}},setDisplayMode:function(e){Xr(e)&&(this.settings.displayMode!==e&&(this.settings.displayMode=e),$l(e,this.element[0]),this.configurePopupMenu())},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},teardown:function(){var e;return this.element.off("updated.".concat(Dl)),null===(e=this.popupmenuAPI)||void 0===e||e?.destroy(),this.menuEl=null,this},destroy:function(){this.teardown(),$.removeData(this.element[0],Dl)}},$.fn.modulenavsettings=function(s){return this.each(function(){var e=$.data(this,Dl);e?e.updated(s):e=$.data(this,Dl,new Ml(this,s))})};var Oo="notification",Yd={message:"Hi! Im a notification message.",type:"alert",parent:".header",link:"#",linkText:"Click here to view.",attributes:null};function Il(s,e){this.settings=H.mergeSettings(s,e,Yd),this.element=$(s),this.init()}Il.prototype={init:function(){return this.build().handleEvents()},build:function(){this.notificationEl=document.createElement("div"),this.notificationEl.classList.add("notification"),this.notificationEl.classList.add(this.settings.type);var e='\n      <svg class="icon notification-icon icon-'.concat(this.settings.type,'" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-').concat(this.settings.type,'"></use>\n      </svg>'),t=this.settings.linkText?'<a class="notification-link" href="'.concat(this.settings.link,'">').concat(this.settings.linkText,"</a>"):"",i='<p class="notification-text">'.concat(xe.rtl?"".concat(t).concat(this.settings.message,"&lrm;"):"".concat(this.settings.message).concat(t),"</p>"),n='\n      <button type="text" class="notification-close">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-close"></use>\n        </svg>\n        <span class="audible">'.concat(B.translate("Close"),"</span>\n      </button>");this.notificationEl.innerHTML=e.concat(i,n);var a=document.querySelector(this.settings.parent);return $(this.settings.parent).closest(".contextual-action-panel").length>0?($(this.notificationEl).css({"max-width":"".concat($(a).width(),"px")}),$(a).closest(".modal-body-wrapper").prepend(this.notificationEl)):a.append(this.notificationEl),$(this.notificationEl).animateOpen(),H.addAttributes($(this.notificationEl),this,this.settings.attributes),H.addAttributes($(this.notificationEl).find(".notification-icon"),this,this.settings.attributes,"icon"),H.addAttributes($(this.notificationEl).find(".notification-text"),this,this.settings.attributes,"text"),H.addAttributes($(this.notificationEl).find(".notification-text a"),this,this.settings.attributes,"link"),H.addAttributes($(this.notificationEl).find("button.notification-close"),this,this.settings.attributes,"btn-close"),H.addAttributes($(this.notificationEl).find("button.notification-close .icon"),this,this.settings.attributes,"icon-close"),this.setTooltip(),this},handleEvents:function(){var e=this,t=this;return $(this.notificationEl).off("click.".concat(Oo)).on("click.".concat(Oo),".notification-close",function(){t.destroy()}),$(window).on("resize.".concat(Oo),function(){e.setTooltip()}),this},setTooltip:function(){var e=$(this.notificationEl).find(".notification-text")[0],t=$(this.notificationEl).data("tooltip");e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth?t?t.setContent(this.settings.message):$(this.notificationEl).tooltip({content:this.settings.message}):t&&t.destroy()},registerNotification:function(){Bs.register(this)},close:function(e){e?Bs.closeById(e):this.destroy()},closeLatest:function(){Bs.closeLatest()},closeAll:function(){Bs.closeAll()},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,Yd)),this.teardown().init()},teardown:function(){return this.element.off("click.".concat(Oo),".notification-close"),this},destroy:function(){this.notificationEl&&this.notificationEl.parentNode&&this.notificationEl.parentNode.removeChild(this.notificationEl),Bs.unregister(this),this.teardown(),$.removeData(this.element[0],Oo)}},$.fn.notification=function(s){return this.each(function(){$.data(this,Oo,new Il(this,s))})};var Ll="progress",gh={value:0};function Ss(s,e){this.settings=H.mergeSettings(s,e,gh),this.element=$(s),this.init()}Ss.prototype={init:function(){var e=this;return this.update(this.settings.value||this.element.attr("data-value")),this.element.off("updated.progress").on("updated.progress",function(t){t.stopPropagation(),e.update()}),this},updateAria:function(e){var t=this;this.element.attr({role:"progressbar","aria-valuenow":e,"aria-valuemax":"100"});var i=this.element.parent();this.tooltipApi=this.tooltipApi||i.data("tooltip"),this.tooltipApi?(this.tooltipApi.content="".concat(e,"%"),this.tooltipApi.visible&&e<=100&&this.tooltipApi.tooltip.hasClass("process".concat(this.tooltipId))&&this.tooltipApi.tooltip.find(".tooltip-content").text(this.tooltipApi.content)):(i[0].setAttribute("title","".concat(e,"%")),i.tooltip(),this.tooltipApi=i.data("tooltip"),this.tooltipId=this.tooltipApi.uniqueId,i.on("aftershow.progress",function(){t.tooltipApi.tooltip.addClass("process".concat(t.tooltipId))}).on("hide.progress mouseout.progress",function(){t.tooltipApi.tooltip.removeClass("process".concat(t.tooltipId))}))},unbind:function(){var e=this.element.parent();return e.off("aftershow.progress hide.progress mouseout.progress"),this.tooltipApi=this.tooltipApi||e.data("tooltip"),this.tooltipApi&&(this.tooltipApi.destroy(),delete this.tooltipApi),this.tooltipId&&delete this.tooltipId,this.element.off("updated.progress"),this},update:function(e){var t=this.element[0].getAttribute("data-value")||0;/number|string/.test(rt(e))&&(this.element[0].setAttribute("data-value",e),t=e),this.element[0].style.width="".concat(t,"%"),this.updateAria(t)},updated:function(e){return typeof e<"u"&&e.value&&(this.settings.value=e.value),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Ll)}},$.fn.progress=function(s){return this.each(function(){var e=$.data(this,Ll);e?e.updated(s):e=$.data(this,Ll,new Ss(this,s))})};var Ba="popdown",Fo={keepOpen:!1,trigger:void 0,autoFocus:!1,toggleOnFocus:!1,firstLastTab:null};function vh(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Fo),this.init()}vh.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var e=this;function t(n){return!!n&&("string"==typeof n&&((!n.match("#")||0!==n.indexOf("#"))&&(n="#".concat(n)),n=$(n)),!!n.length&&(e.popdown=n,!0))}return this.popdown=$(),this.trigger=this.element,(this.settings.trigger instanceof $||de.isElement(this.settings.trigger))&&(this.trigger=$(this.settings.trigger)),this.trigger.is(".dropdown, .multiselect")&&(this.trigger=$("#".concat(this.element.attr("id"),"-shdo"))),t(this.trigger.attr("data-popdown"))||t(this.trigger.next(".popdown")),this.id=this.popdown.attr("id"),this.id||(this.id="popdown-".concat($("body").find(".popdown").index(this.popdown)),this.popdown.attr("id",this.id)),this},build:function(){this.popdown.addClass("popdown").removeClass("hidden"),this.popdown.children(".popdown-contents").length||this.popdown.children().wrap('<div class="popdown-contents"></div>'),this.arrow=$('<div class="arrow"></div>').prependTo(this.popdown),this.place();var t=this.trigger.attr("aria-expanded");return(!t||void 0===t)&&this.trigger.removeAttr("aria-expanded"),"true"===t&&this.open(),this.trigger&&this.trigger[0].setAttribute("aria-controls",this.id),this},handleEvents:function(){var e=this,t=this;return this.trigger.on("click.popdown",function(){t.toggle()}).on("updated.popdown",function(){t.updated()}).on("clickoutside.popdown",function(i){t.settings.keepOpen||t.handleFocusOut(i)}),this.setFirstLastTab(),this.changeObserver=new MutationObserver(function(){e.setFocusableElems()}),this.changeObserver.observe(this.element[0],{childList:!0,subtree:!0}),this.setFocusableElems(),this.settings.toggleOnFocus&&this.trigger.on("focus.popdown",function(){e.toggle()}),this},hasValidTriggerSetting:function(){return this.settings.trigger instanceof $||de.isElement(this.settings.trigger)},get isFocused(){return this.hasFocus()},hasFocus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=!1,i=document.activeElement;if(e instanceof HTMLElement||(e=void 0),this.trigger.is($(i))||this.popdown[0].contains(i)||e&&(e.classList.contains("overlay")||this.popdown[0].contains(e)))return!0;this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach(function(a){if(!t){var l,p,v,o=$(a);if((o.is($(i))||"function"==typeof a.contains&&a.contains(i))&&(t=!0),o.is("div.dropdown, div.multiselect")&&(t=null===(l=o.parent().prev("select").data("dropdown"))||void 0===l?void 0:l?.isFocused),o.is(".lookup")){var h,d=o.data("lookup");t=d?.isFocused,!t&&e&&(t=null==d||null===(h=d?.modal)||void 0===h?void 0:h?.element[0].contains(e))}o.is(".btn-menu, .btn-actions")&&(t=null===(p=o.data("popupmenu"))||void 0===p?void 0:p?.isFocused),o.is(".searchfield")&&(t=null===(v=o.data("searchfield"))||void 0===v?void 0:v?.isFocused)}});var n=$(i).parents(".tooltip, .popover");return n.length&&n.each(function(a,o){var l=o.className.contains("popover")?"popover":"tooltip",d=$(o).data(l);d&&d.isFocused&&(t=!0)}),t},setFirstLastTab:function(){var e=this,t=this.settings;if(t.firstLastTab&&/function|boolean|object/.test(rt(t.firstLastTab))){var i=null,n=null,a=null;if("object"===rt(t.firstLastTab)?(t.firstLastTab.first&&((i=t.firstLastTab.first instanceof jQuery?t.firstLastTab.first:$(t.firstLastTab.first)).first(),this.popdown[0].contains(i[0])||(i=null)),t.firstLastTab.last&&((n=t.firstLastTab.last instanceof jQuery?t.firstLastTab.last:$(t.firstLastTab.last)).first(),this.popdown[0].contains(n[0])||(n=null)),"function"==typeof t.firstLastTab.callback&&(a=t.firstLastTab.callback)):"function"==typeof t.firstLastTab?a=t.firstLastTab:("boolean"==typeof t.firstLastTab||t.firstLastTab)&&(a=this.closeAndContinue),a){if(!i||!n||i&&!i.length||n&&!n.length){var l=this.popdown.find('input:not(:disabled):not([tabindex^="-"]),\n            select:not(:disabled):not([tabindex^="-"]),\n            textarea:not(:disabled):not([tabindex^="-"]),\n            [tabindex]:not(:disabled):not([tabindex^="-"])');(!i||i&&!i.length)&&(i=l.first()),(!n||n&&!n.length)&&(n=l.last())}this.focusableElem={first:i,last:n},i.on("keydown.popdown",function(d){9===d.keyCode&&d.shiftKey&&(d.preventDefault(),a({e:d,self:e,first:i}))}),n.on("keydown.popdown",function(d){9===d.keyCode&&!d.shiftKey&&(d.preventDefault(),a({e:d,self:e,last:n}))})}}},setFocusableElems:function(){var i=de.focusableElems(this.popdown[0],["div.dropdown","div.multiselect",".lookup-wrapper > span.trigger"],["select","option"]);this.focusableElems=i,this.focusableElems.first=i[0],this.focusableElems.last=i[i.length-1]},closeAndContinue:function(e){var t=$(document).find(":focusable"),i=t.index(e.self.trigger);-1!==(i=e.e.shiftKey?i-1<0?-1:i-1:i+1>=t.length?-1:i+1)&&t.eq(i).focus(),e.self.close()},isOpen:function(){return"true"===this.trigger.attr("aria-expanded")},handleFocusOut:function(e){var t=this;t.focusableElems.includes(e.target)||t.hasFocus(e.target)?t.keyTarget=e.target:"BODY"===e.target.tagName&&t.keyTarget?delete t.keyTarget:t.close()},open:function(){if(!this.isAnimating){var e=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","true"),this.position(),this.popdown.addClass("visible"),this.settings.autoFocus&&(this.focusableElems?this.focusableElems.first:this.popdown.find(":focusable").first()).focus(),this.addEventsTimer&&(this.addEventsTimer.destroy(!0),delete this.addEventsTimer),this.addEventsTimer=new Li({duration:30,timeoutCallback:function(){$("body").on("resize.popdown",function(n){e.handleFocusOut(n)}),$(document).on("click.popdown",function(){e.element.trigger("clickoutside.popdown")}),$(document).on("keydown.popdown",function(n){var a=$(n.target).parents(".popdown");switch(n.which||n.keyCode){case 27:a.length&&e.close();break;case 9:e.handleFocusOut(n)}}),e.isAnimating=!1}}),_i.register(this.addEventsTimer)}},close:function(){if(!this.isAnimating){this.addEventsTimer&&(this.addEventsTimer.destroy(!0),delete this.addEventsTimer),this.keyTarget&&delete this.keyTarget;var e=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","false"),this.popdown.removeClass("visible"),$("body").off("resize.popdown"),$(document).off("click.popdown focusout.popdown keydown.popdown"),this.closeTimer&&(this.closeTimer.destroy(!0),delete this.closeTimer),this.closeTimer=new Li({duration:30,timeoutCallback:function(){e.popdown[0].style.display="none",e.isAnimating=!1}}),_i.register(this.closeTimer)}},toggle:function(){this.isOpen()?this.close():this.open()},place:function(){this.scrollparent=$("body"),this.popdown.detach().appendTo(this.scrollparent)},position:function(){var e={offset:{left:0,top:0},scrollDistance:{left:0,top:0}},t=window.innerHeight+$(document).scrollTop(),i=window.innerWidth-2+$(document).scrollLeft();this.popdown.removeAttr("style"),this.arrow.removeAttr("style"),this.scrollparent.length&&(e.offset=this.scrollparent.offset(),e.scrollDistance.top=this.scrollparent.scrollTop(),e.scrollDistance.left=this.scrollparent.scrollLeft(),t-=e.offset.top+e.scrollDistance.top,i-=e.offset.left+e.scrollDistance.left);var v,n=!1,a=!1,o=this.trigger,l=o.offset(),h=0,p=0;this.popdown.addClass("bottom"),this.popdown[0].style.left="".concat(l.left,"px"),this.popdown[0].style.top="".concat(l.top+o.outerHeight(!0)+11,"px"),this.arrow[0].style.left="".concat(o.outerWidth(!0)/2,"px"),this.arrow[0].style.top="".concat(-11,"px"),(v=this.popdown.offset()).left<0&&(n=!0,h=0-v.left);var b=v.left+this.popdown.outerWidth(!0);if(b>i&&(n=!0,h=b-i+(B.isRTL()?20:0)),n){this.popdown[0].style.left="".concat(v.left+-1*h,"px");var w=this.popdown[0].getBoundingClientRect(),T=o[0].getBoundingClientRect(),k=w.right-T.right+10;this.arrow[0].style.left="auto",this.arrow[0].style.right="".concat(k,"px"),v=this.popdown.offset()}v.top<0&&(a=!0,p=0-v.top);var A=v.top+this.popdown.outerHeight(!0);A>t&&(a=!0,p=A-t),a&&(this.arrow[0].style.display="none",this.popdown[0].style.top="".concat(v.top+-1*p,"px"),this.arrow[0].style.top="".concat(parseInt(this.arrow[0].style.top,10)- -1*p,"px"),v=this.popdown.offset()),(v.top<0||v.top+this.popdown.outerHeight(!0)>t)&&(this.popdown[0].style.top=0,A=(v=this.popdown.offset()).top+this.popdown.outerHeight(!0),this.popdown[0].style.height="".concat(parseInt(this.popdown[0].style.height,10)-(A-t),"px"))},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.hasValidTriggerSetting()&&(this.trigger=$(this.settings.trigger)),this},teardown:function(){return this.isOpen()&&this.close(),this.trigger&&this.trigger.off("updated.popdown click.popdown focus.popdown clickoutside.popdown").removeAttr("aria-controls").removeAttr("aria-expanded"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.focusableElem&&this.focusableElem.first instanceof jQuery&&(this.focusableElem.first.off("keydown.popdown"),this.focusableElem.last.off("keydown.popdown"),delete this.focusableElem),this.focusableElems&&this.focusableElems.first instanceof jQuery&&(this.focusableElems.first.off("keydown.popdown"),this.focusableElems.last.off("keydown.popdown"),delete this.focusableElems),this.originalParent&&this.originalParent.length&&this.popdown.detach().appendTo(this.originalParent),this.arrow.remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Ba)}},$.fn.popdown=function(s){return this.each(function(){var e=$.data(this,Ba);e?e.updated(s):e=$.data(this,Ba,new vh(this,s))})};var Lc="rating",Xf={};function Qf(s,e){this.settings=H.mergeSettings(s,e,Xf),this.element=$(s),this.init()}Qf.prototype={init:function(){this.handleEvents(),this.allInputs=this.element.find("input"),this.enable()},handleEvents:function(){for(var e=this,t=$("input",this.element),i=function(l){var d=$(t[l]),h=$(t[l+1]),p=function(b){return b.is(".is-filled")||b.is(".is-half")};d.on("click.".concat(Lc),function(){e.element.is(".is-readonly")||e.val(p(d)&&!p(h)?l:l+1)})},n=0,a=t.length;n<a;n++)i(n)},fillStar:function(e,t){$(e).addClass("is-filled").removeClass("is-half").next(t).find("svg").changeIcon("star-filled")},emptyStar:function(e,t){$(e).removeClass("is-filled").removeClass("is-half").next(t).find("svg").changeIcon("star-outlined")},halfStar:function(e,t){$(e).addClass("is-half").removeClass("is-filled").next(t).find("svg").changeIcon("star-half")},val:function(e){if(0===arguments.length||""===e||isNaN(e)||-1===_n.sign(e))return this.currentValue;this.currentValue=parseFloat(e,10);for(var t=Math.floor(this.currentValue),i=0,n=this.allInputs.length;i<n;i++){var a=$(this.allInputs[i]),o=a.parent().is(".inline")?"svg":"label";e%1!=0&&t===i?this.halfStar(a,o):i<e?this.fillStar(a,o):this.emptyStar(a,o),i+1===t&&a.prop("checked",!0)}return t<=0&&e>0&&$(this.allInputs[0]).prop("checked",!0),this.currentValue},readonly:function(){var e=$(this.element);e.addClass("is-readonly"),e.find("input").attr("disabled","")},enable:function(){$(this.element).removeClass("is-readonly").find("input").removeAttr("disabled")},unbind:function(){return this.element.find("input").off("click.".concat(Lc)),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,Xf)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Lc)}},$.fn.rating=function(s){return this.each(function(){var e=$.data(this,Lc);e?e.updated(s):e=$.data(this,Lc,new Qf(this,s))})};var Pc="signin",mh={};function Jf(s,e){this.settings=H.mergeSettings(s,e,mh),this.element=$(s),this.init()}Jf.prototype={init:function(){this.handleKeys()},isCapslock:function(e){var t=!1,i=!1;return(e=e||window.event).which?t=e.which:e.keyCode&&(t=e.keyCode),e.shiftKey?i=e.shiftKey:e.modifiers&&(i=!!(4&e.modifiers)),!!(t>=97&&t<=122&&i||t>=65&&t<=90&&!i)},unbind:function(){return $("body").off("keypress.signin blur.signin change.signin"),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,mh)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Pc)},handleKeys:function(){var e=this,t=$.createIconElement({classes:"icon-capslock",icon:"capslock"});document.msCapsLockWarningOff=!0,this.element.on("keypress.signin",'[type="password"]',function(i){var n=$(this),a=n.parent(".field"),o=$(".icon-capslock",a);e.isCapslock(i)&&!n.hasClass("error")?o.length||(a.append(t),$("body").toast({audibleOnly:!0,message:B.translate("CapsLockOn")})):o.remove()}).on("blur.signin change.signin",'[type="password"]',function(){var i=$(this),n=i.closest(".field"),a=$(".icon-capslock",n);setTimeout(function(){a&&a.length&&(i.hasClass("error")?a.remove():n.append(t))},150)})}},$.fn.signin=function(s){return this.each(function(){var e=$.data(this,Pc);e?e.updated(s):e=$.data(this,Pc,new Jf(this,s))})};var bh="slider",Xg={value:[50],min:0,max:100,range:!1,step:void 0,ticks:[],tooltipContent:void 0,tooltipPosition:"top",persistTooltip:!1,showTooltipOnLoad:!1,sliderBox:!1,attributes:null};function yh(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Xg),this.init()}function jd(s){return s%1==0}function zo(s,e){return(!e||isNaN(e)||0===e)&&(e=1),Math.round(s/e)*e}function Zf(s,e){var i=s[1],a=e[1];return Math.sqrt(Math.pow(e[0]-s[0],2)+Math.pow(a-i,2))}yh.prototype={init:function(){return this.buildSettings().addMarkup().bindEvents()},buildSettings:function(){var t,e=this;if(this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.settings||(this.settings={}),this.settings.value=void 0!==this.element.attr("value")?this.element.attr("value"):this.settings.value,this.settings.min=void 0!==this.element.attr("min")?parseInt(this.element.attr("min"),10):this.settings.min,this.settings.max=void 0!==this.element.attr("max")?parseInt(this.element.attr("max"),10):this.settings.max,this.settings.range=void 0!==this.element.attr("data-range")?"true"===this.element.attr("data-range"):this.settings.range,this.settings.step=isNaN(this.element.attr("step"))?this.settings.step:Number(this.element.attr("step")),""===this.settings.value&&(this.settings.value=this.settings.min),1===this.settings.step&&(this.settings.step=void 0),void 0!==this.element.attr("data-ticks")){try{t=JSON.parse(e.element.attr("data-ticks"))}catch{t=[]}$.isArray(t)&&(this.settings.ticks=t)}var i="true"===this.element.attr("data-tooltip-persist")||!0===this.element.attr("data-tooltip-persist");if(this.settings.persistTooltip=void 0!==this.element.attr("data-tooltip-persist")?i:this.settings.persistTooltip,this.settings.tooltip=this.settings.tooltipContent,void 0!==this.element.attr("data-tooltip-content"))try{e.settings.tooltip=JSON.parse(e.element.attr("data-tooltip-content"))}catch{e.settings.tooltip=["",""]}if("string"==typeof this.settings.tooltip)if(-1===this.settings.tooltip.indexOf(","))this.settings.tooltip=[this.settings.tooltip,""];else{var n=this.settings.tooltip.split(",");this.settings.tooltip=[n[0]],this.settings.tooltip.push(n[1]?n[1]:"")}this.settings.tooltip&&1===this.settings.tooltip.length&&this.settings.tooltip.push(""),this.ticks=[];var a={value:this.settings.min,description:e.getModifiedTextValue(this.settings.min)},o={value:this.settings.max,description:e.getModifiedTextValue(this.settings.max)};if(this.settings.ticks){var l=e.settings.ticks||[];if($.isArray(l)&&l.length>0){var d=l.filter(function(w){return w.value===e.settings.min}),h=l.filter(function(w){return w.value===e.settings.max});d.length>0&&(a.description=d[0].description,a.color=d[0].color,l=$.grep(l,function(w){return w!==d[0]})),h.length>0&&(o.description=h[0].description,o.color=h[0].color,l=$.grep(l,function(w){return w!==h[0]}))}e.ticks.push(a);for(var p=0;p<l.length;p++){var v={};void 0!==l[p].value&&(v.value=l[p].value,v.description=void 0!==l[p].description?l[p].description:"",v.color=l[p].color,e.ticks.push(v))}e.ticks.push(o)}else this.ticks.push(a,o);if($.isArray(this.settings.value))this.settings.value[0]=isNaN(this.settings.value[0])?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value[0],10);else if("number"==typeof this.settings.value)this.settings.value=[this.settings.value];else if(-1===this.settings.value.indexOf(","))this.settings.value=[isNaN(this.settings.value)?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value,10)];else{var b=this.settings.value.split(",");b[0]=isNaN(b[0])?this.settings.min:parseInt(b[0],10),b[1]=isNaN(b[1])?this.settings.max:parseInt(b[1],10),this.settings.value=b}return this.settings.range&&!this.settings.value[1]&&this.settings.value.push(this.settings.max),this},addMarkup:function(){var e=this,t=!1;if("INPUT"!==e.element[0].tagName)throw new Error('Element with ID "'.concat(e.element.id,"\" cannot invoke a slider;  it's not an Input element."));e.originalElement={type:e.element.attr("type")},e.element.attr("type","hidden"),e.wrapper=$('<div class="slider-wrapper"></div>').attr("id","".concat(e.element.attr("id"),"-slider")).insertAfter(e.element),e.hitarea=$('<div class="slider-hit-area"></div>').appendTo(e.wrapper),e.range=$('<div class="slider-range"></div>').appendTo(e.wrapper),this.element.hasClass("vertical")&&(this.wrapper.addClass("vertical"),t=!0),this.isRtlHorizontal=B.isRTL()&&!t,this.isRtlVertical=B.isRTL()&&t;var i=this.element.attr("style");i&&(i.match(/min-height/)&&(this.wrapper[0].style.minHeight=this.element[0].style.minHeight,i=i.replace("min-height","")),i.match(/height/)&&(this.wrapper[0].style.height=this.element[0].style.height),i.match(/min-width/)&&(this.wrapper[0].style.minWidth=this.element[0].style.minWidth,i=i.replace("min-width","")),i.match(/width/)&&(this.wrapper[0].style.width=this.element[0].style.width)),e.handles=[];var n=e.element.prev("label").text(),a=$('<div class="slider-handle'.concat(e.settings.range?" lower":"",'" tabindex="0"></div>')).attr("aria-label","".concat(B.translate(e.settings.range?"SliderMinimumHandle":"SliderHandle")," ").concat(n));if(e.handles.push(a),e.settings.range){var o=$('<div class="slider-handle higher" tabindex="0"></div>').attr("aria-label","".concat(B.translate("SliderMaximumHandle")," ").concat(n));e.handles.push(o)}$.each(e.handles,function(b,w){w.attr({role:"slider","aria-orientation":t?"vertical":"horizontal","aria-valuemin":e.settings.min,"aria-valuemax":e.settings.max}).hideFocus(),w.appendTo(e.wrapper)}),e.ticks.forEach(function(b){!function l(b){var w=e.isRtlHorizontal?100-e.convertValueToPercentage(b.value):e.convertValueToPercentage(b.value),T="calc(".concat(w,"% - 4px)");b.element=$('<div class="tick" data-value="'.concat(b.value,'"></div>')),b.label=$('<span class="label">'.concat(b.description,"</span>")),b.element[0].style[t?"bottom":"left"]=T,b.element.append(b.label),e.wrapper.append(b.element),!t&&(b.label[0].style.left="".concat(-(b.label.outerWidth()/2-b.element.width()/2),"px"))}(b)}),this.settings.sliderBox&&(e.wrapper.addClass("has-slider-box"),$('<input type="text" class="slider-box" aria-required="true" data-mask data-options="{ \'pattern\' : \'###\' }" ></input>').insertAfter(e.wrapper)),e.value(e.settings.value),e.updateRange(),$.each(e.handles,function(b,w){e.settings.tooltip&&(w.tooltip({content:function(){return"".concat(e.getModifiedTextValue(Math.floor(e.value()[b])))},placement:t?"right":e.settings.tooltipPosition,trigger:"focus",keepOpen:e.settings.persistTooltip}),w.removeAttr("aria-describedby"))}),!0===this.element.prop("readonly")?this.readonly():!0===this.element.prop("disabled")&&this.disable(),H.addAttributes(this.element,this,this.settings.attributes,"",!0),H.addAttributes(this.wrapper,this,this.settings.attributes,"wrapper",!0),H.addAttributes(this.hitarea,this,this.settings.attributes,"hitarea",!0),H.addAttributes(this.range,this,this.settings.attributes,"range",!0),H.addAttributes.apply(H,Mi(this.handles).concat([this,this.settings.attributes,"handle",!0]));for(var h=0,p=this.ticks.length;h<p;h++){var v=$(this.ticks[h].element);H.addAttributes(v,this,this.settings.attributes,"tick-".concat(h+1))}return this.settings.showTooltipOnLoad&&setTimeout(function(){$.each(e.handles,function(b,w){w.data("tooltip").show()})}),e},handleRangeClick:function(e){if(e.preventDefault(),!this.isDisabled()&&!this.isDragging){var t=this,i=this.wrapper.hasClass("vertical"),a="click"!==e.originalEvent.type?e.originalEvent.changedTouches[0].pageY:e.pageY,o=("click"!==e.originalEvent.type?e.originalEvent.changedTouches[0].pageX:e.pageX)-t.wrapper.offset().left-$(document).scrollLeft(),l=a-t.wrapper.offset().top-$(document).scrollTop(),d=[o,l],v=[t.handles[0].offset().left+t.handles[0].width()/2-t.wrapper.offset().left-$(document).scrollLeft(),t.handles[0].offset().top+t.handles[0].height()/2-t.wrapper.offset().top-$(document).scrollTop()],k=t.value(),A=Zf(d,v),L=k[0],z=t.handles[0];z.addClass("hide-focus");var O=function q(){if(i){var j=t.wrapper.height();return(j-l)/j*100}return o/t.wrapper.width()*100}(),_=t.convertPercentageToValue(O);t.handles[1]&&(A>Zf(d,[t.handles[1].offset().left+t.handles[1].width()/2-t.wrapper.offset().left-$(document).scrollLeft(),t.handles[1].offset().top+t.handles[1].height()/2-t.wrapper.offset().top-$(document).scrollTop()])?(t.value([void 0,_]),z=t.handles[1],L=k[1]):t.value([_])),t.checkHandleDifference(z,L,_);var G=t.settings.step?t.settings.step:0;_<L?t.decreaseValue(e,z,_,G):t.increaseValue(e,z,_,G),t.settings.tooltip||z.focus()}},activateHandle:function(e){e.addClass("is-active")},deactivateHandle:function(e){e.removeClass("is-active")},enableHandleDrag:function(e){if(!this.isDisabled()){var t=this,i={containment:"parent",axis:this.isVertical()?"y":"x",clone:!1};e.drag(i).on("drag.slider touchmove.slider",function(a,o){(function n(a,o,l){if(!t.isDisabled()){var h=function d(){var b,w;if("touchmove"===a.type){var k=a.originalEvent.changedTouches[0].pageY;b=a.originalEvent.changedTouches[0].pageX-t.wrapper.offset().left-$(document).scrollLeft(),w=k-t.wrapper.offset().top-$(document).scrollTop()}else b=l.left,w=l.top;if(t.isVertical()){var M=t.wrapper.height()-o.outerHeight();return(M-(w=Math.min(Math.max(w,0),M)))/M*100}var z=t.wrapper.width()-o.outerWidth();return(b=Math.min(Math.max(b,0),z))/z*100}(),p=t.convertPercentageToValue(h);if(t.settings.range){var v=t.value();o.hasClass("higher")&&p<=v[0]&&(p=v[0]),o.hasClass("lower")&&p>=v[1]&&(p=v[1])}t.settings.step&&(p=zo(p,t.settings.step)),a.defaultPrevented||(t.value(o.hasClass("higher")?[void 0,p]:[p]),t.updateRange(),t.updateTooltip(o),t.element.trigger("sliding",o,p))}})(a,$(a.currentTarget),o),t.isDragging=!0}).on("dragstart touchstart",function(){$(this).addClass("is-dragging"),t.range.addClass("is-dragging"),t.element.trigger("slidestart",e)}).on("dragend touchend",function(a){t.settings.step||(t.value($(a.currentTarget).hasClass("higher")?[void 0,zo(t._value[1],t.settings.step)]:[zo(t._value[0],t.settings.step)]),t.updateRange(),t.updateTooltip($(a.currentTarget))),$(this).removeClass("is-dragging"),t.range.removeClass("is-dragging"),t.element.trigger("slidestop",e),t.element.trigger("change",{element:t.element,value:t._value}),setTimeout(function(){t.isDragging=!1},0)})}},disableHandleDrag:function(e){e.off("drag.slider dragstart dragend touchmove.slider touchstart touchend"),this.range.removeClass("is-dragging"),e.removeClass("is-dragging");var t=e.data("drag");t&&t.destroy()},bindInputSliderEvent:function(e,t){var i=this;if(this.settings.sliderBox){var n=e.parent().siblings(".slider-box");n.on("keyup.slider".concat(t),function(a){if(13===a.keyCode){var o=$(a.currentTarget).val();i.value(o),i.updateRange(),i.updateTooltip(e)}}),n.on("blur.slider".concat(t),function(a){var o=$(a.currentTarget).val();i.value(o),i.updateRange(),i.updateTooltip(e)})}},convertValueToPercentage:function(e){return(e-this.settings.min)/(this.settings.max-this.settings.min)*100},convertPercentageToValue:function(e){var t=e/100*(this.settings.max-this.settings.min)+this.settings.min;return this.isRtlHorizontal?this.settings.max-t+this.settings.min:t},getIncrement:function(){var e=.1*(this.settings.max-this.settings.min);return void 0!==this.settings.step&&e<=this.settings.step&&(e=this.settings.step),e},handleKeys:function(e,t){if(!t.isDisabled()){var i=e.which,n=$(e.currentTarget);switch(n.removeClass("hide-focus"),i){case 33:t.increaseValue(e,n,void 0,this.getIncrement());break;case 34:t.decreaseValue(e,n,void 0,this.getIncrement());break;case 35:t.increaseValue(e,n,this.settings.max);break;case 36:t.decreaseValue(e,n,this.settings.min);break;case 38:case 39:t.isRtlHorizontal&&39===i?t.decreaseValue(e,n):t.increaseValue(e,n);break;case 37:case 40:t.isRtlHorizontal&&37===i?t.increaseValue(e,n):t.decreaseValue(e,n)}}},increaseValue:function(e,t,i,n){e.preventDefault(),clearTimeout(t.data("animationTimeout"));var l,d,h,a=this.value().slice(0),o=void 0!==n?n:void 0!==this.settings.step?this.settings.step:1;if(t.hasClass("higher"))h=(d=(l=void 0!==i?i:a[1])+(o=jd(l)?o:isNaN(l%o)?0:l%o)<this.settings.max?l+o:this.settings.max)%o?d:zo(d,o),this.value([void 0,h]);else{var p=void 0===a[1]?this.settings.max:a[1];h=(d=(l=void 0!==i?i:a[0])+(o=jd(l)?o:isNaN(l%o)?0:o-l%o)<p?l+o:p)%o?d:zo(d,o),this.value([h])}this.checkHandleDifference(t,l,h),this.updateRange(),this.updateTooltip(t)},decreaseValue:function(e,t,i,n){e.preventDefault(),clearTimeout(t.data("animationTimeout"));var l,d,h,a=this.value(),o=void 0!==n?n:void 0!==this.settings.step?this.settings.step:1;if(t.hasClass("higher")){var p=void 0===a[0]?this.settings.min:a[0];h=(d=(l=void 0!==i?i:a[1])-(o=jd(l)?o:isNaN(l%o)?0:o-l%o)>p?l-o:p)%o?d:zo(d,o),this.value([void 0,h])}else h=(d=(l=void 0!==i?i:a[0])-(o=jd(l)?o:isNaN(l%o)?0:l%o)>this.settings.min?l-o:this.settings.min)%o?d:zo(d,o),this.value([h]);this.checkHandleDifference(t,l,h),this.updateRange(),this.updateTooltip(t)},updateRange:function(){for(var e=this,t=this.value(),i=[],n=this.getColorClosestToValue(),a=e.wrapper.hasClass("vertical"),o=0;o<this.ticks.length;o++)(this.settings.range?t[0]<this.ticks[o].value&&this.ticks[o].value<=t[1]:this.ticks[o].value<=t[0])?(this.ticks[o].element.addClass("complete"),n&&(this.ticks[o].element[0].style.backgroundColor=n,this.ticks[o].element.addClass("inherit"))):(this.ticks[o].element.removeClass("complete"),n&&(this.ticks[o].element[0].style.backgroundColor="",this.ticks[o].element.removeClass("inherit")));n&&(this.range[0].style.backgroundColor=n,$.each(this.handles,function(w,T){T[0].style.backgroundColor=n,T[0].style.borderColor=n})),$.each(e.ticks,function(w){e.ticks[w].label[0].style.color=""}),i[0]=this.convertValueToPercentage(t[0]),void 0!==t[1]&&(i[1]=this.convertValueToPercentage(t[1]));var h=function d(){return a?["bottom","top"]:e.isRtlHorizontal?["right","left"]:["left","right"]}(),p={};function v(w,T){w.css(a?h[1]:h[0],"calc(".concat(a?100-T:T,"% - ").concat(w.outerWidth()/2,"px)"))}this.handles[1]?(p[h[0]]="".concat(i[0],"%"),p[h[1]]="".concat(100-i[1],"%")):(p[h[0]]="0%",p[h[1]]="".concat(100-i[0],"%")),this.range.css(p),this.handles[0].hasClass("is-animated")&&this.handles[0].data("animationTimeout",setTimeout(function(){e.handles[0].removeClass("is-animated").trigger("slide-animation-end"),e.range.removeClass("is-animated")},201)),v(this.handles[0],i[0]),this.handles[1]&&(this.handles[1].hasClass("is-animated")&&this.handles[1].data("animationTimeout",setTimeout(function(){e.handles[1].removeClass("is-animated").trigger("slide-animation-end"),e.range.removeClass("is-animated")},201)),v(this.handles[1],i[1]),this.handles[0].attr("aria-valuemax",t[1]),this.handles[1].attr("aria-valuemin",t[0])),this.settings.sliderBox&&e.wrapper.siblings(".slider-box").val(Math.trunc(i[0]))},checkHandleDifference:function(e,t,i){var n=this.convertValueToPercentage(t),a=this.convertValueToPercentage(i);Math.abs(n-a)>3&&(e.addClass("is-animated"),this.range.addClass("is-animated"))},updateTooltip:function(e){if(this.settings.tooltip){if(!e){var i,t=this.handles[0].data("tooltip");return this.handles[1]&&(i=this.handles[1].data("tooltip")),t.hide(),void(i&&i.hide())}var n=e.data("tooltip");e.hasClass("is-animated")?(n.hide(),e.one("slide-animation-end",function(){a()})):a()}function a(){n.position(),e.focus()}},getColorClosestToValue:function(){for(var a,o,i={light:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},dark:{default:"#ffffff","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},contrast:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#e4882b",good:"#76b051","very-good":"#56932e",superior:"#397514"}}[Et.currentTheme.id.split("-")[2]],n=this.value()[0],l=0;l<this.ticks.length;l++)(o=this.ticks[l].color)&&n>=this.ticks[l].value&&(a=o,a=o.indexOf("#")>-1?o:i[o]||i.default);return a},value:function(e,t){var i=this;return void 0===e&&void 0===t||(e&&$.isArray(e)&&(void 0!==e[1]&&!isNaN(e[1])&&(t=e[1]),isNaN(e[0])||(e=e[0])),(void 0===e||isNaN(e))&&$.isArray(i._value)&&void 0!==i._value[0]&&(e=i._value[0]),(void 0===t||isNaN(t))&&$.isArray(i._value)&&void 0!==i._value[1]&&(t=i._value[1]),i._value=[e,t],i.element.val(void 0!==t?i._value:i._value[0]),$.each(i.handles,function(n,a){var o=i._value[n],l=i.getModifiedTextValue(o);$.each(i.ticks,function(d,h){h.value===o&&(l=h.description)}),a.attr({"aria-valuenow":i._value[n],"aria-valuetext":l})}),0===this.element.next().find(".slider-handle.is-dragging").length&&i.element.trigger("change",{element:i.element,value:i._value})),i._value},getModifiedTextValue:function(e){return this.settings.tooltip?this.settings.tooltip[0]+e+this.settings.tooltip[1]:e},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.removeClass("is-disabled");var e=this;return $.each(this.handles,function(t,i){e.enableHandleDrag(i)}),this.wrapper.find("[tabindex]").attr("tabindex","0"),this},disable:function(){var e=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),setTimeout(function(){e.wrapper.addClass("is-disabled");var t=e;$.each(e.handles,function(i,n){t.disableHandleDrag(n)})}),this.wrapper.find("[tabindex]").attr("tabindex","-1"),this},readonly:function(){var e=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!0),this.wrapper.removeClass("is-disabled"),this.wrapper.addClass("is-readonly"),$.each(this.handles,function(t,i){e.disableHandleDrag(i)}),this},isDisabled:function(){return this.element.prop("disabled")},isVertical:function(){return this.wrapper.hasClass("vertical")},setValue:function(e,t){var i=this.value();this.checkHandleDifference(this.handles[0],i[0],e),this.handles[1]&&this.checkHandleDifference(this.handles[1],i[1],t);var n=this.value(e,t);return this.updateRange(),this.updateTooltip(),n},refresh:function(e,t){return ms(this.setValue,this.refresh).apply(this,[e,t])},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.element.removeAttr("value"),this.teardown().init()},teardown:function(){var e=this;return $.each(e.handles,function(t,i){e.disableHandleDrag(i),i.off("mousedown.slider click.slider blur.slider keydown.slider keyup.slider")}),this.wrapper.off("click.slider touchend.slider touchcancel.slider").remove(),this.element.attr("type",Fe.ensureAlphaNumeric(this.originalElement.type)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],bh)},bindEvents:function(){var e=this;return $.each(e.handles,function(t,i){i.on("mousedown.slider",function(){e.isDisabled()||$(this).focus()}).on("click.slider",function(n){n.preventDefault()}).on("keydown.slider",function(n){e.activateHandle(i),e.handleKeys(n,e)}).on("keyup.slider blur.slider",function(){e.deactivateHandle(i)}),e.enableHandleDrag(i),e.bindInputSliderEvent(i,t)}),e.wrapper.on("click.slider touchend.slider touchcancel.slider",function(t){e.handleRangeClick(t)}),e.element.on("updated.slider",function(){e.updated()}),e}},$.fn.slider=function(s){return this.each(function(){var e=$.data(this,bh);e?e.updated(s):e=$.data(this,bh,new yh(this,s))})};var wh="spinbox",Qg={autocorrectOnBlur:!0,min:-2147483647,max:2147483647,step:null,maskOptions:null,attributes:null};function Ch(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Qg),this.init()}Ch.prototype={get isTouch(){return xe.features.touch},get isWrapped(){return this.element.parent().is(".spinbox-wrapper")},get isInlineLabel(){return this.element.parent().is(".inline")},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.setInitialValue().addMarkup().bindEvents().setWidth()},setWidth:function(){var e=this.element[0].style;return e.width&&(this.element.parent()[0].style.width="".concat(parseInt(e.width,10)+2*this.element.parent().find(".down").outerWidth(),"px")),this},setInitialValue:function(){var t=this.checkForNumeric(this.element.val());return this.element.val(t),this.element.attr("data-trackdirty")&&this.element.data("original",t),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&this.element.attr("pattern","\\d*"),this.element.attr("max")?this.settings.max=this.element.attr("max"):this.settings.max&&this.element.attr("max",this.settings.max),this.element.attr("step")?this.settings.step=this.element.attr("step"):this.settings.step&&this.element.attr("step",this.settings.step),this.element.attr("min")?this.settings.min=this.element.attr("min"):this.settings.min&&this.element.attr("min",this.settings.min),this},addMarkup:function(){var e=this;if(this.isInlineLabel)this.inlineLabel.addClass("spinbox-wrapper");else if(!this.isWrapped){var i='<span class="spinbox-wrapper"></span>';if(this.element.is(".field-options")){var a=this.element.closest(".field").find(".btn-actions");this.element.add(a).add(a.next(".popupmenu")).wrapAll(i)}else this.element.wrap(i)}this.isWrapped&&(this.buttons={down:this.element.parent().find(".down"),up:this.element.parent().find(".up")}),this.buttons.up.length||(this.buttons.up=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control up">+</span>')).insertAfter(this.element),this.buttons.up.button()),this.buttons.down.length||(this.buttons.down=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control down">-</span>')).insertBefore(this.element),this.buttons.down.button());var l=this.element[0].className;["input-xs","input-sm","input-mm","input-md","input-lg"].forEach(function(b){if(l.indexOf(b)>-1){var w=b.replace("input","spinbox");e.isWrapped?e.element.parent(".spinbox-wrapper").addClass(w):e.isInlineLabel&&e.inlineLabel.addClass(w)}});var d=this.element.attr("min"),h=this.element.attr("max"),p={role:"spinbutton"};!d&&!h&&(h="9999999"),p.min=d||0,p.max=h,this.element.data("mask")&&"object"===rt(this.element.data("mask"))&&this.element.data("mask").destroy(),p["aria-valuemin"]=d||0,p["aria-valuemax"]=h||0,this.element.attr(p),this.updateAria(this.element.val());var v={process:"number",patternOptions:{allowDecimal:!1,allowThousandsSeparator:!1,allowNegative:Math.min(this.settings.min,this.settings.max)<0,decimalLimit:0,integerLimit:String(this.settings.max).length}};return this.element.mask(this.settings.maskOptions||v),this.isDisabled()&&this.disable(),this.element.attr("readonly")&&this.readonly(),H.addAttributes(this.element.parent(),this,this.settings.attributes,"wrapper",!0),H.addAttributes(this.element,this,this.settings.attributes,"spinbox",!0),H.addAttributes(this.buttons.down,this,this.settings.attributes,"btn-down",!0),H.addAttributes(this.buttons.up,this,this.settings.attributes,"btn-up",!0),this},enableLongPress:function(e,t){t.addButtonStyle(e),t.longPressInterval=setInterval(function(){$(e.currentTarget).is(":hover")&&t.handleClick(e)},250)},disableLongPress:function(e,t){t.removeButtonStyle(e),clearInterval(t.longPressInterval),t.longPressInterval=null},handleClick:function(e){e.preventDefault(),this.isDisabled()||1!==e.which||this.isReadonly()||($(e.currentTarget).hasClass("up")?this.increaseValue():this.decreaseValue(),this.element.focus())},handleKeyDown:function(e,t){var i=e.which;if(13!==i){if(-1!==$.inArray(i,[37,38,39,40])&&!this.isReadonly())switch(i){case 38:t.addButtonStyle(t.buttons.up),t.increaseValue();break;case 40:t.addButtonStyle(t.buttons.down),t.decreaseValue()}}else t.correctValue()},handleKeyup:function(e,t){if(!t.isDisabled()&&!this.isReadonly()){var i=e.which;switch(i){case 38:case 39:B.isRTL()&&39===i?t.removeButtonStyle(t.buttons.down):t.removeButtonStyle(t.buttons.up);break;case 37:case 40:B.isRTL()&&39===i?t.removeButtonStyle(t.buttons.up):t.removeButtonStyle(t.buttons.down)}t.updateAria(t.element.val())}},handleAfterPaste:function(e){var t=Number(e.element.attr("min")),i=Number(e.element.attr("max")),n=Number(e.element.val());n<t&&(n=t),n>i&&(n=i),e.updateVal(n)},correctValue:function(e){var t=Number(this.element.val()),i=parseInt(this.element.attr("min"),10),n=parseInt(this.element.attr("max"),10);return t<i?(e&&e.preventDefault(),this.updateVal(i)):t>n?(e&&e.preventDefault(),this.updateVal(n)):void 0},increaseValue:function(){var e=this.element.attr("max"),t=this.checkForNumeric(this.element.val())+Number(this.element.attr("step")||1);return this.updateVal(e&&t>e?e:t)},decreaseValue:function(){var e=this.element.attr("min"),t=this.checkForNumeric(this.element.val())-Number(this.element.attr("step")||1);return this.updateVal(e&&t<e?e:t)},updateVal:function(e){e>this.settings.max?e=this.settings.max:e<this.settings.min&&(e=this.settings.min),this.element.val(e).trigger("change"),this.updateAria(e)},checkForNumeric:function(e){return""===e?e:$.isNumeric(e)||(e=parseInt(e,10),$.isNumeric(e))?Number(e):0},updateAria:function(e){var t=this.element.attr("min"),i=this.element.attr("max");e=this.checkForNumeric(e),this.element[0].setAttribute("aria-valuenow",e||"0"),this.element[0].setAttribute("autocomplete","off"),this.setIsDisabled(this.buttons.up,""!==e&&i&&e>=i?"disable":"enable"),this.setIsDisabled(this.buttons.down,""!==e&&t&&e<=t?"disable":"enable")},addButtonStyle:function(e){if(!this.isDisabled()&&!this.isReadonly()){var t=e;e.currentTarget&&(t=$(e.currentTarget)),t.addClass("is-active")}},removeButtonStyle:function(e){if(!this.isDisabled()&&!this.isReadonly()){var t=e;e.currentTarget&&(t=$(e.currentTarget)),t.removeClass("is-active")}},enable:function(){this.element.prop("disabled",!1),this.element.parent(".spinbox-wrapper").removeClass("is-disabled is-readonly"),this.element.prop("readonly",!1)},disable:function(){var e=this;this.element.prop("disabled",!0),this.element.attr("disabled","disabled"),this.element.parent(".spinbox-wrapper").addClass("is-disabled"),setTimeout(function(){e.element.parent(".spinbox-wrapper").addClass("is-disabled")})},readonly:function(){this.element.prop("readonly",!0),this.element.parent(".spinbox-wrapper").addClass("is-readonly")},isReadonly:function(){return this.element.prop("readonly")},isDisabled:function(){return this.element.prop("disabled")},setIsDisabled:function(e,t){e[(t=void 0===t||!(!t||"enable"===t))?"addClass":"removeClass"]("is-disabled"),e[0].disabled=t},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this},destroy:function(){var e=this.element.data("mask");for(var t in e&&"function"==typeof e.destroy&&e.destroy(),this.buttons){var i=$(t).data("button");i&&i.destroy()}this.buttons.up.off("click.spinbox mousedown.spinbox"),this.buttons.up.remove(),this.buttons.down.off("click.spinbox mousedown.spinbox"),this.buttons.up.add(this.buttons.down).off("click.spinbox-control"),this.buttons.down.remove(),this.element.off("focus.spinbox blur.spinbox keydown.spinbox keyup.spinbox"),this.element.unwrap(),$.removeData(this.element[0],wh)},bindEvents:function(){var e=this,t=!1;this.element.on("focus.spinbox",function(){e.element.addClass("no-hover"),e.element.parent(".spinbox-wrapper").addClass("is-focused"),e.element.removeClass("is-hovered")}).on("blur.spinbox",function(){e.element.removeClass("no-hover"),e.element.parent(".spinbox-wrapper").removeClass("is-focused"),e.element.removeClass("is-hovered"),e.settings.autocorrectOnBlur&&e.correctValue()}).on("keydown.spinbox",function(n){e.handleKeyDown(n,e)}).on("keyup.spinbox",function(n){e.handleKeyup(n,e)}).on("mouseover.spinbox",function(){e.element.parent(".spinbox-wrapper").hasClass("is-focused")||e.element.addClass("is-hovered")}).on("mouseleave.spinbox",function(){e.element.removeClass("is-hovered")}).on("afterpaste.mask",function(){e.handleAfterPaste(e)});var i=this.buttons.up.add(this.buttons.down[0]);return i.on("touchstart.spinbox mousedown.spinbox",function(n){if(1===n.which){if(t||e.handleClick(n),e.isTouch)return;t=!0,e.enableLongPress(n,e),$(document).one("mouseup",function(){e.disableLongPress(n,e),t=!1,e.element.focus()})}}),i.on("click.spinbox-control",function(){i.hasClass("is-disabled")&&$("svg.ripple-effect").remove()}),this}},$.fn.spinbox=function(s){return this.each(function(){var e=$.data(this,wh);e?e.updated(s):e=$.data(this,wh,new Ch(this,s))})};var Pl="splitter",ep={axis:"x",side:"left",resize:"immediate",containment:null,save:!0,maxWidth:{left:"auto",right:"auto"},attributes:null};function xh(s,e){this.settings=H.mergeSettings(s,e,ep),this.element=$(s),this.init()}xh.prototype={init:function(){return this.build().handleEvents()},build:function(){var v,e=this,t=this,i=this.settings,n=this.element,a=n.parent(),o="x"===i.axis?"left":"top",l=a.is(".content")?a.parent():a,d=n.find(".splitter-drag-handle"),h=299,p=a.width();this.isRTL=B.isRTL(),setTimeout(function(){v=a.height()},0),this.docBody=$("body"),this.isRightSide=n.is(".splitter-right")||"x"===i.axis&&"right"===i.side,this.isHorizontal=n.is(".splitter-horizontal")||"y"===i.axis,i.uniqueId=H.uniqueId(this.element,"splitter"),d.length||(d=$('<div class="splitter-drag-handle"><span class="audible">'.concat(B.translate("SplitterDragHandle"),"</span></div>"))).appendTo(n);var b=function(M){if($(M.target).is(".splitter-btn"))d[0].style.opacity="0";else{d[0].style.opacity="";var O,_,L=n[0].getBoundingClientRect();if(e.isHorizontal)return(O=M.clientX-L.left-16)<16&&(O=0),void(d[0].style.left="".concat(O>(_=L.width-32)?_:O,"px"));(O=M.clientY-L.top-16)<16&&(O=0),d[0].style.top="".concat(O>(_=L.height-32)?_:O,"px")}};n.off("mouseenter.splitter").on("mouseenter.splitter",function(A){b(A)}).off("mousemove.splitter").on("mousemove.splitter",function(A){b(A)});var w=function(){var M=0,L=!1,z=function(O,_,G){t.splitTo(O,v),$(_)[G?"addClass":"removeClass"]("rotate")};e.splitterCollapseButton=$('<button type="button" class="splitter-btn" id="splitter-collapse-btn"><span class="audible">'.concat(B.translate("SplitterCollapseButton"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-double-chevron"></use></svg></button>')),e.splitterCollapseButton.appendTo(n),n[0].offsetLeft>10&&e.splitterCollapseButton.addClass("rotate"),e.splitterCollapseButton.click(function(){if(!n.is("is-dragging")){if(t.isRTL&&!t.isHorizontal||!t.isRightSide&&"left"===i.side||t.isRightSide&&"right"===i.side){var O=t.getContainerWidth()-n.outerWidth(),_=O;L||(M=O-M,h=O-h);var G=n[0].offsetLeft;t.isRightSide&&"right"===i.side&&(G=n[0].offsetLeft+1),M>=_?G>=O?z(h,this,!0):(M=G,z(_,this,!1)):G<O?(M=G,z(_,this,!1)):(z(M,this,!0),M=_)}else{var j=n[0].offsetLeft;M<=0?j<=10?z(h,this,!0):(M=j,z(0,this,!1)):j>10?(M=j,z(0,this,!1)):(z(M,this,!0),M=0)}L=!0}})};if(this.isRightSide){var T=l.prev();T.is(".main")?(this.leftSide=T,p=l.parent().outerWidth()-p):(this.leftSide=l,n.addClass("splitter-right")),l.addClass("is-right-side").next().addClass("flex-grow-shrink is-right-side").parent().addClass("splitter-container"),i.collapseButton&&w(),this.setSplitterContainer(l.parent())}else this.isHorizontal?(this.topPanel=n.prev(),p=this.topPanel.height(),a.addClass("splitter-container is-horizontal"),n.next().addClass("flex-grow-shrink"),n.addClass("splitter-horizontal")):(this.rightSide=l,this.leftSide=l.prev().parent(),l.prev().addClass("flex-grow-shrink").parent().addClass("splitter-container"),i.collapseButton&&w(),this.setSplitterContainer(l.parent()));if(this.isRTL&&!this.isHorizontal){var k=this.getContainerWidth();p=k>=p?k-p:p}return localStorage&&i.save&&!isNaN(parseInt(localStorage[i.uniqueId],10))&&(p=localStorage[i.uniqueId]),p=parseInt(p,10),n[0].style.top=this.isHorizontal?"".concat(p,"px"):0,this.splitTo(p,v),p<=10&&this.splitterCollapseButton&&this.splitterCollapseButton.removeClass("rotate"),this.documentWidth=0,this.element.drag({axis:i.axis,containment:i.containment||"x"===i.axis?"document":"parent",containmentOffset:{left:0,top:0}}).on("dragstart.splitter",function(){var A=l.parent().find("iframe");if(t.documentWidth=$(document).width(),A.length>0)for(var M=0,L=A.length;M<L;M++){var z=$(A[M]),q="".concat(parseInt(getComputedStyle(z.parent()[0]).width,10),"px"),O=$('<div class="overlay splitter-overlay"></div>');O.css("width",q),z.before(O)}}).on("dragend.splitter",function(A,M){l.parent().find(".splitter-overlay").remove();var L=n[0].getBoundingClientRect(),z=window.innerWidth-L.left,q=e.isRightSide&&"right"===e.settings.side||!e.isRightSide&&"left"===e.settings.side;"y"!==i.axis&&0===L.left&&(l[0].style.width="0px",M[o]=10),i.collapseButton&&(M[o]<=10||q&&z<=21?$("#splitter-collapse-btn").removeClass("rotate"):$("#splitter-collapse-btn").addClass("rotate")),"end"===i.resize&&t.splitTo(M[o],v),"immediate"===i.resize&&e.isRTL&&!e.isHorizontal&&setTimeout(function(){var O=parseInt(e.element.css("left"),10);t.splitTo(O,v)},0)}).on("drag.splitter",function(A,M){return!(M.left<=0||("immediate"===i.resize&&t.splitTo(M[o],a.height()),0))}),"y"===i.axis&&this.element.addClass("splitter-horizontal"),this.element.attr({"aria-dropeffect":"move",tabindex:"0","aria-grabbed":"false"}),H.addAttributes(this.element,this,this.settings.attributes,"",!0),H.addAttributes(this.element.find(".splitter-drag-handle"),this,this.settings.attributes,"handle",!0),H.addAttributes(this.element.find(".splitter-drag-handle svg.icon"),this,this.settings.attributes,"icon",!0),this},setSplitterContainer:function(e){this.container=this.element.closest(".splitter-container"),!this.container.length&&e&&e.length&&(e.addClass("splitter-container"),this.container=this.element.closest(".splitter-container"))},getContainerWidth:function(){var e;return(null===(e=this.container)||void 0===e?void 0:e?.outerWidth())||0},toggleSelection:function(){this.element.toggleClass("is-dragging")},resizeTop:function(e,t,i){(t>i||t<0)&&(t=parseInt(i,10)/2),this.topPanel[0].style.height="".concat(t,"px")},resizeLeft:function(e,t){var i=this.isRTL?t:this.leftSide.outerWidth()-t;this.rightSide[0].style.width="".concat(i,"px"),e[0].style.left=""},resizeRight:function(e,t){var i=t,n=t-1;if(this.isRTL&&!this.isHorizontal){var a=this.getContainerWidth();i=a>=t?a-t:t,n=t}this.leftSide[0].style.width="".concat(i,"px"),e[0].style.left="".concat(n,"px")},splitTo:function(e,t){var n=this.settings,a=this.element;this.isRightSide?((!this.isRTL&&e>n.maxWidth.right||this.isRTL&&e<n.maxWidth.right)&&(e=n.maxWidth.right),this.resizeRight(a,e)):this.isHorizontal?this.resizeTop(a,e,t):((!this.isRTL&&e>n.maxWidth.left||this.isRTL&&e<n.maxWidth.left)&&(e=n.maxWidth.left),this.resizeLeft(a,e)),this.element.trigger("split",[e]),this.docBody.triggerHandler("resize",[this]),this.settings.save&&localStorage&&(localStorage[this.settings.uniqueId]=e),this.split=e,this.parentHeight=t},unbind:function(){return this.element.off("updated.".concat(Pl)),this.splitterCollapseButton&&this.splitterCollapseButton.remove(),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,ep)),this.unbind().init()},destroy:function(){return this.unbind(),$.removeData(this.element[0],Pl),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(Pl),function(){e.updated()}).on("keydown.".concat(Pl),function(t){32===t.which&&(e.toggleSelection(),t.preventDefault()),37===t.which&&e.splitTo(e.split-15,e.parentHeight),39===t.which&&e.splitTo(e.split+15,e.parentHeight)}),this}},$.fn.splitter=function(s){return this.each(function(){var e=$.data(this,Pl);e?e.updated(s):e=$.data(this,Pl,new xh(this,s))})};var Th="swaplist",kh={searchable:!1,available:null,selected:null,additional:null,availableClass:".available",selectedClass:".selected",additionalClass:".full-access",availableBtn:".btn-moveto-selected",selectedBtnLeft:".btn-moveto-left",selectedBtnRight:".btn-moveto-right",additionalBtn:".btn-moveto-selected",draggable:{available:!0,selected:!0,additional:!0},keepInList:{available:!1,selected:!1,additional:!1},attributes:null,attributesOverride:!0,template:'<ul data-swap-handle=".handle">{{#dataset}}{{#text}}<li data-id="{{id}}"{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="swaplist-item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>'};function tp(s,e){this.settings=H.mergeSettings(s,e,kh),this.element=$(s),this.init()}tp.prototype={init:function(){var e=this,t=this.settings;t.draggable=$.extend(!0,kh.draggable,t.draggable),this.isTouch=xe.features.touch,this.isAdditional=$("".concat(t.additionalClass," .listview"),this.element).length>0,this.isTouch&&this.element.addClass("is-touch"),this.loadListview(),this.initDataset(),this.setElements(),this.isMultiSelectClass(),setTimeout(function(){e.makeDraggable(),e.handleEvents(),e.initSelected(t.availableClass),e.initSelected(t.additionalClass)},0)},loadListview:function(){for(var e=this.settings,t=[{dataset:e.available,class:e.availableClass,draggable:e.draggable.available},{dataset:e.selected,class:e.selectedClass,draggable:e.draggable.selected},{dataset:e.additional,class:e.additionalClass,draggable:e.draggable.additional}],i=0,n=t.length;i<n;i++){var a=t[i],o=$("".concat(a.class," .listview"),this.element),l=o.data("listview"),d={dataset:a.dataset||[],selectable:"multiple",showCheckboxes:!1};(!0===e.searchable||"true"===e.searchable)&&$("".concat(a.class," .searchfield"),this.element).length>0&&(d.searchable=!0),!a.dataset&&o.length&&$("li",o).length?o.listview(d):o.length&&(l&&l.destroy(),-1===e.template.indexOf('data-id="{{id}}"')&&(e.template=e.template.replace("<li",'<li data-id="{{id}}"')),d.template=e.template,d.dataset=a.dataset||[],d.dataset.forEach(function(p){(!/string|number/.test(rt(p.id))||""===p.id)&&(p.id="sw".concat((Date.now().toString(36)+Math.round(Math.random()*Math.pow(36,12)).toString(36).substr(2,5)).toLowerCase()))}),0===d.dataset.length&&(d.forceToRenderOnEmptyDs=!0),d.attributesOverride=e.attributesOverride,d.attributes=this.getLvAutomationAttributes(a.class),o.listview(d)),a.draggable||$("ul",o).addClass("is-not-droppable")}},getLvAutomationAttributes:function(e){var n,t=this,i=this.settings;if(i.attributes&&"string"==typeof e&&e.length>1){var a="-swaplist-".concat(e.substring(1));if(Array.isArray(i.attributes))n=[],i.attributes.forEach(function(l){var d="function"==typeof l.value?l.value(t):l.value;n.push({name:l.name,value:d+a})});else{var o="function"==typeof i.attributes.value?i.attributes.value(this):i.attributes.value;n={name:i.attributes.name,value:o+a}}}return n},setElements:function(){var e=this,t=this.settings,i="";if(this.offset=null,this.containers=$("".concat(t.availableClass,",").concat(t.selectedClass,",").concat(t.additionalClass),this.element),this.actionButtons=$("".concat(t.availableBtn,",").concat(t.additionalBtn,",").concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),this.element),this.selectedButtons=$("".concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),this.element),this.tabButtonsStr="".concat(t.availableBtn,", ").concat(t.additionalBtn,", ").concat(this.selectedButtons.length>1?t.selectedBtnRight:t.selectedBtnLeft),this.dragElements="ul:not(.is-not-droppable), ul:not(.is-not-droppable) li:not(.is-disabled)",this.dragStart="dragstart.swaplist touchstart.swaplist gesturestart.swaplist",this.dragEnterWhileDragging="dragenter.swaplist",this.dragOverWhileDragging="dragover.swaplist touchmove.swaplist gesturechange.swaplist",this.dragEnd="dragend.swaplist touchend.swaplist touchcancel.swaplist gestureend.swaplist",this.selections={items:[],owner:null,related:null,droptarget:null,isInSelection:null,isHandle:null,placeholder:null,placeholderTouch:null,dragged:null,draggedIndex:null},t.numOfSelectionsClass="num-of-selections",t.itemContentClass="swaplist-item-content",t.itemContentTempl=$('<div><p><span class="'.concat(t.numOfSelectionsClass,'">###</span>\n      <span class="').concat(t.numOfSelectionsClass,'-text">&nbsp;</span></p><div/>')),t.attributes){var n=[{btn:$("".concat(t.availableClass," ").concat(t.availableBtn),this.element),suffix:(t.availableClass||"").substring(1)},{btn:$("".concat(t.selectedClass," ").concat(t.selectedBtnLeft),this.element),suffix:"".concat((t.selectedClass||"").substring(1),"-left")},{btn:$("".concat(t.selectedClass," ").concat(t.selectedBtnRight),this.element),suffix:"".concat((t.selectedClass||"").substring(1),"-right")},{btn:$("".concat(t.additionalClass," ").concat(t.additionalBtn),this.element),suffix:(t.additionalClass||"").substring(1)}];n.forEach(function(a){a.suffix="swaplist-btn-".concat(a.suffix)}),n.forEach(function(a){return H.addAttributes(a.btn,e,t.attributes,a.suffix,t.attributesOverride)}),H.addAttributes(this.element,this,t.attributes,"swaplist",t.attributesOverride)}t.draggable.available||(i="".concat(t.availableClass," ").concat(t.availableBtn,",").concat(t.selectedBtnLeft),$(i,this.element).prop("disabled",!0)),t.draggable.selected||(i="".concat(t.selectedBtnLeft,",").concat(t.selectedBtnRight),t.draggable.available||(i+=",".concat(t.additionalClass," ").concat(t.additionalBtn)),(!this.isAdditional||!t.draggable.additional)&&(i+=",".concat(t.availableClass," ").concat(t.availableBtn)),$(i,this.element).prop("disabled",!0),$("".concat(t.additionalClass," ").concat(t.additionalBtn),this.element).addClass("is-rotate")),t.draggable.additional||$("".concat(t.additionalClass," ").concat(t.additionalBtn,",").concat(t.selectedBtnRight),this.element).prop("disabled",!0)},isMultiSelectClass:function(){for(var e=this.settings,t=[e.availableClass,e.selectedClass,e.additionalClass],i=0,n=t.length;i<n;i++){var a=$("".concat(t[i]," .listview"),this.element);$("li",a).length||a.addClass("is-multiselect")}},initSelected:function(e){if((e=this.isjQuery(e)?e:$(e,this.element)).length){for(var t=$(".listview",e).data("listview"),i=$("li[selected]",e),n=0,a=i.length;n<a;n++){var o=$(i[n]);o.removeAttr("selected"),t.select(o)}this.moveElements(e,this.settings.selectedClass)}},moveElements:function(e,t){var i=this;if(null!==t){e="string"!=typeof e?e:$(e,this.element),t="string"!=typeof t?t:$(t,this.element);var n=$(".listview",e).data("listview");if(this.clearSelections(),this.selections.owner=e,this.selections.droptarget=t,this.isTouch){if(n.selectedItems)for(var a=0,o=n.selectedItems.length;a<o;a++)this.selections.items[a]=n.selectedItems[a].closest("li")}else this.selections.items=n.selectedItems;if(this.setSelectionsItems(this.selections.owner),this.unselectElements(n),this.selections.items.length){this.selections.move={items:this.selections.itemsData,from:this.getContainer(this.selections.itemsData)};var l=this.element.triggerHandler("beforeswap",[this.selections.move]);if("boolean"==typeof l&&!l||"string"==typeof l&&"false"===l.toLowerCase())return;var d=$("ul",t),h=$("li",d).length,p=this.selections.items.length+h;if(this.selections.items)for(var v=this.getDataList(t),b=function(){var A=$(i.selections.items[w]);if(i.isKeepInList(t)&&v.some(function(L){return L.id===A.data().id}))A.remove();else{var M=i.isKeepInList(e)?A.clone():A;M.attr({"aria-posinset":h+w+1,"aria-setsize":p}).find("mark.highlight").contents().unwrap(),d.append(M)}},w=0,T=this.selections.items.length;w<T;w++)b();this.afterUpdate($(".listview",t).data("listview"))}}},getContainer:function(e){var t=this.settings;if("object"===rt(e[0])&&e[0].node){var i=e[0].node.closest(".card"),n="";return i.is(t.availableClass)?n=t.availableClass:i.is(t.selectedClass)?n=t.selectedClass:i.is(t.additionalClass)&&(n=t.additionalClass),{container:i,class:n}}return null},unselectElements:function(e){if(e.selectedItems)for(var t=0,i=e.selectedItems.length;t<i;t++)e.select($(e.selectedItems[t]));e&&e.element&&e.element.find("li").attr("aria-selected",!1).removeClass("is-selected")},isDragAndDropSupports:function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},isMatchMediaSupports:function(){return typeof window.matchMedia<"u"||typeof window.msMatchMedia<"u"},viewport:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e["".concat(t,"Width")],height:e["".concat(t,"Height")]}},isMaxWidth:function(e){return this.isMatchMediaSupports()&&window.matchMedia("(max-width: ".concat(e,"px)")).matches||this.viewport().width<=e},makeDraggable:function(){var e=this,i=$("ul",this.element);this.isDragAndDropSupports&&(this.handle=i.first().attr("data-swap-handle"),this.handle=!this.isTouch&&$(this.handle,i).length>0?this.handle:null,$(this.handle,i).addClass("draggable").off("mousedown.swaplist touchstart.swaplist").on("mousedown.swaplist touchstart.swaplist",function(){e.selections.isHandle=!0}).off("mouseup.swaplist touchend.swaplist").on("mouseup.swaplist touchend.swaplist",function(){e.selections.isHandle=!1}),this.targets=i.attr({"aria-dropeffect":"none"}),this.items=$("li:not(.is-disabled)",this.element).not("a[href], img").off("selectstart.swaplist").on("selectstart.swaplist",function(){return this.dragDrop&&this.dragDrop(),!1}).end().attr({draggable:!0}).addClass(this.handle?"":"draggable"))},getElementByTouchInList:function(e,t,i){for(var n=!1,a=$(e),o=0,l=a.length;o<l;o++){var d=$(a[o]),h=d.offset();t<=h.left||t>=h.left+d.outerWidth()||i<=h.top||i>=h.top+d.outerHeight()||(n=d)}return n},draggTouchElement:function(e,t){var i=e.originalEvent.changedTouches[0];t[0].style.top="".concat(i.pageY-this.offset.y,"px"),t[0].style.left="".concat(i.pageX-this.offset.x,"px")},hasModifier:function(e){return e.ctrlKey||e.metaKey||e.shiftKey},addDropeffects:function(){if(this.targets)for(var e=0,t=this.targets.length;e<t;e++)$(this.targets[e]).attr({"aria-dropeffect":"move",tabindex:0});if(this.selections&&this.selections.items)for(var i=0,n=this.selections.items.length;i<n;i++)$(this.selections.items[i]).attr({"aria-grabbed":!0,tabindex:0})},clearDropeffects:function(){if(this.targets.attr({"aria-dropeffect":"none"}).removeAttr("tabindex"),this.selections&&this.selections.items)for(var e=0,t=this.selections.items.length;e<t;e++){var i=$(this.selections.items[e]);i.removeAttr("aria-grabbed".concat(i.is(":focus")?"":" tabindex"))}},clearSelections:function(){this.selections.items=[],this.selections.itemsData=[],this.selections.owner=null,this.selections.related=null,this.selections.droptarget=null,this.selections.isInSelection=null,this.selections.dragged=null,this.selections.placeholder=null,this.selections.placeholderTouch=null,$("ul, li",this.element).removeClass("over"),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove()},setSelectionsItems:function(e){e=this.isjQuery(e)?e:$(e,this.element);var t=$(".listview li",e),i=e.find(".listview").data("listview"),n=this.getDataList(e),a=!1;i&&i.filteredDataset&&(n=Mi(i.filteredDataset),a=!0);for(var o=0,l=t.length;o<l;o++){var d=$(t[o]),h=n[o];a&&(h.node=d,delete h._isFilteredOut),d.is(".is-selected")&&this.selections.itemsData.push(h)}},initDataset:function(){var e=this.settings,t=[{type:"available",dataset:e.available,class:e.availableClass},{type:"selected",dataset:e.selected,class:e.selectedClass},{type:"additional",dataset:e.additional,class:e.additionalClass}];this.dataset={available:[],selected:[]},this.isAdditional&&(this.dataset.additional=[]);for(var i=0,n=t.length;i<n;i++)for(var a=t[i],o=$("".concat(a.class," .listview li"),this.element),l=0,d=o.length;l<d;l++){var h=void 0,p=void 0,v=$(o[l]);a.dataset?delete(h=JSON.parse(JSON.stringify(a.dataset[l]))).selected:(h={text:$.trim($(".swaplist-item-content",v).text())},(p=v.attr("data-value"))&&(h.value=p)),this.dataset[a.type]&&(h.node=v,this.dataset[a.type].push(h))}},getDataList:function(e){var t=this.settings,i=this.dataset;return(e=this.isjQuery(e)?e:$(e,this.element)).is(t.additionalClass)?i.additional:e.is(t.selectedClass)?i.selected:e.is(t.availableClass)?i.available:[]},arrayIndexMove:function(e,t,i){e.splice(i,0,e.splice(t,1)[0])},syncDataset:function(e,t){var i=this,n=$(".listview li",t),a=e.find(".listview").data("listview"),o=t.find(".listview").data("listview"),l=this.getDataList(e),d=this.getDataList(t),h=function(Ne,le){if(Ne&&le){var Te={owner:Ne.getAttribute("data-id"),item:le.getAttribute("data-id")};return typeof Te.owner<"u"&&typeof Te.item<"u"&&Te.owner===Te.item}return!1};if(e.is(t)){for(var p=[],v=0,b=n.length;v<b;v++)for(var w=n[v],T=0,k=l.length;T<k;T++){var A=l[T];if(h(A.node[0],w)){p.push(A);break}}l.splice(0,l.length);for(var M=0,L=p.length;M<L;M++)l.push(p[M])}else for(var z=0,q=this.selections.items.length;z<q;z++)for(var O=this.selections.items[z],_=!0,G=0,j=n.length;G<j&&_;G++)if($(n[G]).data().id===O.data().id)for(var fe=function(){var Ne=l[he];if(h(Ne.node[0],O[0]))return i.isKeepInList(t)&&d.some(function(le){return le.id===Ne.id})||(d.push(Ne),i.arrayIndexMove(d,d.length-1,G)),i.isKeepInList(e)||l.splice(he,1),_=!1,1},he=0,we=l.length;he<we&&!fe();he++);a.updated({dataset:l}),o.updated({dataset:d}),this.makeDraggable()},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},isKeepInList:function(e){var t=this.settings;return e.is(t.availableClass)&&t.keepInList.available||e.is(t.selectedClass)&&t.keepInList.selected||e.is(t.additionalClass)&&t.keepInList.additional},updateAttributes:function(e){for(var t=$("li",e),i=0,n=t.length;i<n;i++)$(t[i]).attr({"aria-posinset":i+1,"aria-setsize":n})},afterUpdate:function(e){var t=this.selections.droptarget.find("li:focus").index(),i=".card.".concat(this.selections.droptarget[0].classList[1]," li");e&&(this.selections.placeholder&&(e.select(this.selections.placeholder),this.selections.placeholder.focus()),this.unselectElements(e),this.syncDataset(this.selections.owner,this.selections.droptarget),this.updateAttributes($(".listview",this.selections.owner)),this.updateAttributes($(".listview",this.selections.droptarget)),this.selections.items.length&&(this.selections.move=$.extend(!0,this.selections.move,{to:this.getContainer([{node:this.selections.droptarget.find("li:first")}])}),this.element.triggerHandler("swapupdate",[this.selections.move]))),this.selections.items.forEach(function(n){n.show()}),this.clearDropeffects(),this.clearSelections(),this.items.removeClass("is-dragging is-dragging-touch"),t>=0&&this.element.find(i).eq(t).focus()},getItems:function(e){return e=this.isjQuery(e)?e:$(e,this.element),this.getDataList(e)},getAvailable:function(){return this.getDataList(this.settings.availableClass)},getSelected:function(){return this.getDataList(this.settings.selectedClass)},getAdditional:function(){return this.getDataList(this.settings.additionalClass)},draggedMakeSelected:function(e,t){var i=!1;if(!this.selections.isInSelection){if(e.selectedItems)for(var n=0,a=e.selectedItems.length;n<a;n++)if(t.is(e.selectedItems[n]))return i=!0,!1;i||(e.select(t),this.selections.isInSelection=!0)}return!0},updateDataset:function(e){for(var t=this.settings,i=[{type:"available",dataset:e.available,class:t.availableClass},{type:"selected",dataset:e.selected,class:t.selectedClass},{type:"additional",dataset:e.additional,class:t.additionalClass}],n=0,a=i.length;n<a;n++){var o=i[n],l=$("".concat(o.class," .listview"),this.element),d=l.data("listview");d&&(d.deselectItemsBetweenIndexes([0,$("li",l).length-1]),t[o.type]=o.dataset||[],d.loadData(t[o.type]))}this.initDataset(),this.makeDraggable(),this.initSelected(t.availableClass),this.initSelected(t.additionalClass)},unbind:function(){return this.actionButtons.off("click.swaplist"),this.containers.off("keydown.swaplist",".listview"),this.selectedButtons.off("keydown.swaplist"),this.element.off("keydown.swaplist",this.tabButtonsStr),this.element.off("".concat(this.dragStart," ").concat(this.dragEnterWhileDragging," ").concat(this.dragOverWhileDragging," ").concat(this.dragEnd),this.dragElements),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove(),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,kh)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Th)},handleEvents:function(){var e=this,t=e.settings,i=e.selections;e.actionButtons.off("click.swaplist").on("click.swaplist",function(){var n=$(this),a=n.closest(".card");a.is(t.availableClass)?e.moveElements(t.availableClass,t.draggable.selected?t.selectedClass:e.isAdditional&&t.draggable.additional?t.additionalClass:null):a.is(t.additionalClass)?e.moveElements(t.additionalClass,t.draggable.selected?t.selectedClass:t.draggable.available?t.availableClass:null):a.is(t.selectedClass)&&(n.is(t.selectedBtnLeft)?e.moveElements(t.selectedClass,t.availableClass):n.is(t.selectedBtnRight)&&e.moveElements(t.selectedClass,t.additionalClass))}),e.containers.on("keydown.swaplist",".listview",function(n){var a=$(this).closest(e.containers);77===(n=n||window.event).keyCode&&e.hasModifier(n)&&(!a.is(t.selectedClass)||a.is(t.selectedClass)&&1===e.selectedButtons.length?a.find(e.actionButtons).trigger("click.swaplist"):e.selectedButtons.first().focus(),n.preventDefault())}),e.selectedButtons.on("keydown.swaplist",function(n){var o,a=$(this);(13===(n=n||window.event).keyCode||32===n.keyCode)&&(a.trigger("click.swaplist"),n.preventDefault()),(37===n.keyCode||39===n.keyCode)&&e.selectedButtons.length>1&&(o=e.selectedButtons.index(this),e.selectedButtons[37===n.keyCode?o>0?o-1:e.selectedButtons.length-1:o<e.selectedButtons.length-1?o+1:0].focus())}),e.element.on("keydown.swaplist",e.tabButtonsStr,function(n){var a=$(this);if(9===(n.keyCode||n.which)&&!n.shiftKey){var l=a.closest(".card")[0],d=[].slice.call(l.querySelectorAll("li[tabindex]")),p=!1;if(d.length&&d.forEach(function(b){-1!==parseInt(b.getAttribute("tabindex"),10)&&(p=!0)}),!p){var v=l.querySelector("li");v&&v.setAttribute("tabindex",0)}}}),e.containers.on("filtered.swaplist",".listview",function(){e.makeDraggable()}),e.element.on("mousedown.swaplist",e.dragElements,function(n){e.handle&&$(n.target).closest("li").attr({draggable:$(n.target).is(".draggable")}),n.stopPropagation()}).on(e.dragStart,e.dragElements,function(n){if(n.stopImmediatePropagation(),!e.handle||i.isHandle){var a,o,d=$(n.target).closest("li"),h=$(".listview",d.closest(".card")).data("listview");if(h){e.isTouch||e.draggedMakeSelected(h,d),e.clearSelections(),i.owner=d.closest(".card"),i.dragged=d,i.draggedIndex=d.index(),i.placeholder=d.clone(!0),i.placeholder.attr("id","sl-placeholder"),e.setSelectionsItems(i.owner),i.items=h.selectedItems,e.selections.move={items:e.selections.itemsData,from:e.getContainer(e.selections.itemsData)};var p=e.element.triggerHandler("beforeswap",[e.selections.move]);if("boolean"==typeof p&&!p||"string"==typeof p&&"false"===p.toLowerCase())return void(i.dragged=null);if($(".".concat(t.numOfSelectionsClass),t.itemContentTempl).html(i.items.length),$(".".concat(t.numOfSelectionsClass,"-text"),t.itemContentTempl).text(B.translate("ItemsSelected")),e.addDropeffects(),e.isTouch){a=d[0].getBoundingClientRect(),e.offset={x:(o=n.originalEvent.changedTouches[0]).pageX-a.left,y:o.pageY-a.top};for(var v=0,b=e.containers.length;v<b;v++)e.containers[v].style.zIndex="1";i.placeholderTouch=i.dragged.clone(!0),i.items.length>1&&!$("#sl-placeholder-touch2").length&&i.dragged.clone().addClass("is-dragging-touch").attr("id","sl-placeholder-touch2").insertBefore(i.dragged).hide(),i.placeholderTouch.attr("id","sl-placeholder-touch").removeClass("is-selected").hide(),(e.element.is(".one-third")&&e.isMaxWidth(766)?e.element.parent():e.element).prepend('<ul id="sl-placeholder-container"></ul>'),$("#sl-placeholder-container").append(i.placeholderTouch),$("#sl-placeholder-container")[0].style.width="".concat(i.owner.width(),"px"),$("#sl-placeholder-touch")[0].style.width="".concat(i.owner.width(),"px"),e.draggTouchElement(n,i.placeholderTouch)}else i.dragged.addClass("is-dragging"),n.originalEvent.dataTransfer.setData("text",""),i.items.length>1&&$(".".concat(t.itemContentClass),i.dragged).html(t.itemContentTempl.html());n.stopPropagation()}}else n.stopPropagation()}).on(e.dragEnterWhileDragging,e.dragElements,function(n){i.dragged&&(e.element.triggerHandler("draggingswap",[i.move]),i.related=n.target,$("ul, li",e.element).removeClass("over"),$(n.target).closest("ul, li").addClass("over"),i.droptarget=$(i.related).closest(".card"),$('[aria-grabbed="true"]',e.element).not(i.dragged).slideUp(),n.stopPropagation())}).on(e.dragOverWhileDragging,e.dragElements,function(n){if(i.dragged){var a,o=$(this),l=$(".listview",i.dragged.closest(".card")).data("listview");if(e.isTouch){if(e.handle&&!i.isHandle)return;i.isInSelection||(e.draggedMakeSelected(l,i.dragged),i.items=l.selectedItems,$(".".concat(t.numOfSelectionsClass),t.itemContentTempl).html(i.items.length)),a=n.originalEvent.touches[0],o=e.getElementByTouchInList($("ul, li",e.element),a.pageX,a.pageY)||o,i.dragged.addClass("is-dragging"),i.placeholderTouch.addClass("is-dragging is-dragging-touch"),i.placeholderTouch.show(),$('[aria-grabbed="true"]',e.element).not(i.dragged).not(i.placeholderTouch).not("#sl-placeholder-touch2").slideUp(),i.items.length>1&&($(".".concat(t.itemContentClass),i.placeholderTouch.add("#sl-placeholder-touch2")).html(t.itemContentTempl.html()),$("#sl-placeholder-touch2").show(),i.dragged.hide()),e.draggTouchElement(n,i.placeholderTouch),e.element.triggerHandler("draggingswap",[i.move]),i.related=o,$("ul, li",this.element).removeClass("over"),o.closest("ul, li").addClass("over"),i.droptarget=i.related.closest(".card")}n.preventDefault(),n.stopPropagation()}}).on(e.dragEnd,e.dragElements,function(n){if(i.dragged&&i.droptarget){var a=$(i.related).closest("li"),o=$("ul",i.droptarget),l=$("li",o).length,d=i.items.length+l;if(e.unselectElements($(".listview",i.owner).data("listview")),$.each(i.items,function(v,b){if((b=$(b)).find("mark.highlight").contents().unwrap(),l&&!$(i.related).is("ul")){var w=a.index()<i.draggedIndex&&i.owner.is(i.droptarget),T=w?b:$(i.items[i.items.length-1-v]),k=a.index()+(w?v+1:v+2);b.attr({"aria-posinset":k,"aria-setsize":d}),a[w?"before":"after"](T)}else b.attr({"aria-posinset":l+v+1,"aria-setsize":d}),o.append(b);b.focus()}),i.items.length>1&&($(".".concat(t.itemContentClass),i.dragged).html($(".".concat(t.itemContentClass),i.placeholder).html()),e.isTouch&&i.dragged.show()),e.isTouch)for(var h=0,p=e.containers.length;h<p;h++)e.containers[h].style.zIndex="";e.makeDraggable(),i.isHandle=null,$('[aria-grabbed="true"]',e.element).show(),e.afterUpdate($(".listview",i.droptarget).data("listview")),n.preventDefault(),n.stopPropagation()}})}},$.fn.swaplist=function(s){return this.each(function(){var e=$.data(this,Th);e?e.updated(s):e=$.data(this,Th,new tp(this,s))})};var ip="swipe-container",Jg={swipeType:"reveal"};function Sh(s,e){return this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,Jg),this.init()}Sh.prototype={init:function(){this.render(),this.handleEvents()},render:function(){this.container=this.element[0].querySelector(".swipe-container"),this.swipeType=this.settings.swipeType;var e=this.element[0].querySelector(".btn-swipe-action-left"),t=this.element[0].querySelector(".btn-swipe-action-right");e&&"reveal"===this.swipeType&&(e.setAttribute("tabindex","-1"),e.setAttribute("aria-hidden","true")),t&&"reveal"===this.swipeType&&(t.setAttribute("tabindex","-1"),t.setAttribute("aria-hidden","true")),e&&"reveal"===this.swipeType&&(this.container.scrollLeft=85)},handleEvents:function(){var e=this,t=0,i=0,n=0;if("reveal"===this.swipeType)return this.element.find(".btn-swipe-action-right, .btn-swipe-action-left").on("click.swipe-action",function(){e.container.scrollLeft=85,e.element.focus()}),void $(this.container).on("scroll.swipe-action",function(){var a;null===(a=e.element.find(".btn-actions"))||void 0===a||null===(a=a?.data("popupmenu"))||void 0===a||a?.close()});this.element.on("touchstart.swipe-action",function(a){t=a.changedTouches[0].screenX},{passive:!0}),this.element.on("touchend.swipe-action",function(a){var o,l="";(i=a.changedTouches[0].screenX)<t&&(l="left"),i>t&&(l="right"),l&&(e.element.find(".swipe-action-".concat("left"===l?"right":"left"," button")).click(),null===(o=e.element.find(".btn-actions"))||void 0===o||null===(o=o?.data("popupmenu"))||void 0===o||o?.close())},{passive:!0}),$(this.container).on("scroll.swipe-action",function(a){var o,l=a.target,d=l.scrollLeft/(l.scrollWidth-l.clientWidth)*100;if(null===(o=e.element.find(".btn-actions"))||void 0===o||null===(o=o?.data("popupmenu"))||void 0===o||o?.close(),!(Math.abs(n-d)<1)){n=d;var h="";0===d&&(h="right"),d>98&&(h="left"),h&&e.element.find(".swipe-action-".concat("left"===h?"right":"left"," button")).click()}})},set swipeType(s){if("continuous"===s)return this.settings.swipeType=s,void this.container.classList.add("continuous");this.settings.swipeType="reveal",this.container.classList.remove("continuous")},get swipeType(){return this.settings.swipeType},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.find(".btn-swipe-action-right, .btn-swipe-action-left").off("click.swipe-action"),this.element.off("scroll.swipe-action").off("click.swipe-action"),this.element.off("touchstart.swipe-action"),this.element.off("touchend.swipe-action"),$(this.container).off("scroll.swipe-action")},destroy:function(){this.teardown(),$.removeData(this.element[0],"swipeaction")}},$.fn.swipeaction=function(s){return this.each(function(){var e=$.data(this,ip);return e?e.updated(s):e=$.data(this,ip,new Sh(this,s)),e})};var Ah="scrollaction",np={scrollActionTarget:".js-scroll-target",classToAdd:"scrolled-down"};function ap(s,e){this.settings=H.mergeSettings(s,e,np),this.element=$(s),this.init()}ap.prototype={init:function(){this.handleEvents()},unbind:function(){var e=this.settings;return this.element.off("scroll.scrollaction"),e&&$(e.scrollActionTarget).removeClass(e.classToAdd),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,np)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Ah)},handleEvents:function(){var e=this,t=this.settings;this.lastScrollTop=0,this.element.on("scroll.scrollaction",function(){var i=e.element.scrollTop();i>e.lastScrollTop?$(t.scrollActionTarget).addClass(t.classToAdd):$(t.scrollActionTarget).removeClass(t.classToAdd),e.lastScrollTop=i})}},$.fn.scrollaction=function(s){return this.each(function(){var e=$.data(this,Ah);e?e.updated(s):e=$.data(this,Ah,new ap(this,s))})};var Kd="stepchart",Zg={steps:null,completed:null,inProgress:null,iconType:null,completedText:null,extraText:"",completedColor:null,allCompletedColor:null,inProgressColor:null,attributes:null};function Eh(s,e){return this.init(s,e)}Eh.prototype={init:function(e,t){return!this.element&&e instanceof HTMLElement&&(this.element=$(e)),("object"===rt(t)||void 0===this.settings)&&(this.settings=H.mergeSettings(this.element[0],t,this.settings||Zg)),this.render()},render:function(){var e=$('<div class="step-chart-steps"></div>'),t='\n      <svg class="icon {icon-name}" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-success"></use>\n      </svg>\n    ',i=null===this.settings.completed&&null===this.settings.steps;if(i&&(this.settings.completed=0,this.settings.steps=1),this.element.attr("data-options")&&(this.settings=H.parseSettings(this.element)),this.element.children().length>0)return this;for(var n=0;n<this.settings.steps;n++){var a=$('<div class="step-chart-step"></div>');H.addAttributes(a,this.settings,this.settings.attributes,"step".concat(n)),n<this.settings.completed&&(a.addClass("is-complete"),this.settings.completedColor&&a.css("background-color",this.settings.completedColor)),n===this.settings.inProgress-1&&(a.addClass("is-inprogress"),this.settings.inProgressColor&&a.css("background-color",this.settings.inProgressColor)),e.append(a)}var o=this.settings.completedText||B.translate("StepsCompleted");o=(o=o.replace("{0}",this.settings.completed)).replace("{1}",this.settings.steps),i&&(o=B?B.translate("NoData"):"No data available");var l=$('<span class="step-chart-label">'.concat(o,"</span>"));if(this.settings.steps===this.settings.completed&&(e.addClass("is-complete"),l.append(t.replace("{icon-name}","icon-success"))),this.settings.iconType&&l.append(t.replace("{icon-name}",this.settings.iconType)),this.settings.extraText){var d=this.settings.extraText;d=(d=(d="{1} Days Overdue"===(d="{0} Days Remaining"===d?B.translate("DaysRemaining"):d)?B.translate("DaysOverdue"):d).replace("{0}",this.settings.steps-this.settings.completed)).replace("{1}",this.settings.completed),l.append('<span class="step-chart-label-small">'.concat(d,"</span>"))}return this.element.append(l,e),this.settings.steps===this.settings.completed&&this.settings.allCompletedColor&&(e.find(".step-chart-step").css("background-color",this.settings.allCompletedColor),l.find(".icon").attr("style","fill: ".concat(this.settings.allCompletedColor,"!important"))),H.addAttributes(l,this.settings,this.settings.attributes,"label"),H.addAttributes(l.find(".icon"),this.settings,this.settings.attributes,"icon"),H.addAttributes(l.find(".step-chart-label-small"),this.settings,this.settings.attributes,"label-small"),this},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),this.element.empty(),this.render()},teardown:function(){return this.element.empty(),this.settings=null,$.removeData(this.element[0],Kd),this},destroy:function(){return this.teardown(),this}},$.fn.stepchart=function(s){return this.each(function(){var e=$.data(this,Kd);e?e.updated(s):(e=$.data(this,Kd,new Eh(this,s))).destroy=function(){this.teardown(),$.removeData(this.element,Kd),$.removeData(this.element,"options")}})};var $h="tabs",sp=["horizontal","vertical","module-tabs","header-tabs"],ev={addTabButton:!1,addTabButtonCallback:null,addTabButtonTooltip:!1,appMenuTrigger:!1,appMenuTriggerText:void 0,appMenuTriggerTextAudible:!1,ajaxOptions:null,beforeActivate:void 0,containerElement:null,changeTabOnHashChange:!1,hashChangeCallback:null,lazyLoad:!0,equalTabWidth:!0,headerTabsTooltips:!1,moduleTabsTooltips:!1,multiTabsTooltips:!1,countsPosition:void 0,source:null,sourceArguments:{},tabCounts:!1,verticalResponsive:!1,attributes:null,maxWidth:null,sortable:!1};function Dh(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,ev),this.init()}Dh.prototype={init:function(){return this.setup().build().setupEvents()},setup:function(){return this.tabsIndex=$(".tab-container").index(this.element),this.settings.multiTabsTooltips=this.element.closest(".multitabs-container").length>0,this},build:function(){var i,e=this,t=this,n=!1,a=["en-US","de-DE","ja-JP","zh-CN","zh-Hans","zh-TW","zh-Hant"];(i=this.element.next(".tab-panel-container")).length||(i=this.element.children(".tab-panel-container"),this.isVerticalTabs()||(n=!0));var o=$("body > .page-container, .application-menu + .page-container");this.element.closest(".header").length>0&&o.length&&(i=o),this.element.next(".application-menu").length&&(i=this.element.next().next(".page-container"),n=!1),this.settings.containerElement&&$(this.settings.containerElement).length&&(i=$(this.settings.containerElement),n=!1),(!i||!i.length)&&(i=$('<div class="tab-panel-container"></div>'),n=!0),i[0].classList.contains("tab-panel-container")||i[0].classList.add("tab-panel-container"),n&&i.insertAfter(this.element),this.container=i;var l=this.element.children(".tab-list-container");!l.length&&this.isScrollableTabs()&&(l=$('<div class="tab-list-container" tabindex="-1"></div>').prependTo(this.element)),l.length&&(this.tablistContainer=l);var d=!0,h=this.element.closest(".header");sp.forEach(function(M,L){e.element.hasClass(sp[L])&&(d=!1)}),d&&t.element.addClass(h.length?"header-tabs":"horizontal"),t.settings.tabCounts&&t.element.addClass("has-counts"),this.tablist=this.element.children(".tab-list"),this.tablist.length||(this.tablistContainer&&(this.tablist=this.tablistContainer.children(".tab-list")),this.tablist.length||(this.tablist=$('<ul class="tab-list"></ul>'),this.tablist.appendTo(this.tablistContainer?this.tablistContainer:this.element))),this.tablistContainer&&(this.tablist.parent().is(this.tablistContainer)||this.tablistContainer.append(this.tablist),this.tablistContainer.on("mousewheel.tabs",function(M){M.deltaY&&(this.scrollLeft+=M.deltaY)})),t.tablist.attr({class:"tab-list",role:"tablist"}),this.checkResponsive(!1),this.renderHelperMarkup(),t.anchors=t.tablist.children("li:not(.separator)").children("a"),t.anchors.each(function(){var O,L=this,z=$(this),q=z[0].textContent.toLowerCase().trim().split(" ").join("-");z.attr({role:"tab","aria-selected":"false",tabindex:"-1"}).parent().attr("role","tab").addClass("tab"),z.parent().hasClass("dismissible")&&!z.parent().children(".icon").length&&(O=$.createIconElement({icon:"close",classes:"icon close"})).insertAfter(z),t.settings.attributes&&(H.addAttributes(z,t,t.settings.attributes,"".concat(q,"-a")),O&&H.addAttributes(O,t,t.settings.attributes,"".concat(q,"-close-btn")));var _=z.nextAll("ul").first();_.length>0&&(_.addClass("dropdown-tab"),z.parent().addClass("has-popupmenu").popupmenu({menu:_,trigger:"click",attachToBody:!0,attributes:t.settings.attributes}),z.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected"),z.parent().children(".icon.icon-more").length||$.createIconElement({classes:"icon-more",icon:"dropdown"}).insertAfter(z)),t.settings.tabCounts&&0===$(this).find(".count").length&&(a.includes(B.currentLocale.name)&&"bottom"!==t.settings.countsPosition||"top"===t.settings.countsPosition?$(this).prepend('<span class="count">0 </span>'):$(this).append('<span class="count">0 </span>')),(t.settings.moduleTabsTooltips||t.settings.multiTabsTooltips||t.settings.headerTabsTooltips)&&(z.parent().on("mouseover.tabs",function(){void 0===z.data("cutoffTitle")&&t.checkCutOffTitle($(L),t.visibleTabSize)}),z.on("beforeshow.toolbar",function(){return"yes"===z.data("cutoffTitle")&&z.parent().not(".is-disabled").length>0}).tooltip({content:"".concat(z.text().trim())}))}),t.panels=$(),t.anchors.each(function p(){var q,M=$(this),L=M.parent(),z=L.data("popupmenu"),O=M.attr("href");if("#"===O.substr(0,1)){if("#/"===O.substr(0,2)&&(O=O.replace("#/","#")),void 0!==O&&"#"!==O){if(O=O.replace(/\//g,"\\/"),q=$(O),L.is(":not(.has-popupmenu)")&&!q.length)return;if(t.settings.attributes){var _=M[0].textContent.toLowerCase().trim().split(" ").join("-");H.addAttributes(q,t,t.settings.attributes,"".concat(_,"-panel"))}M.data("panel-link",q),q.data("tab-link",M),t.panels=t.panels.add(q)}z&&z.menu.children("li").each(function(){var G=$(this),j=G.children("a"),X=j.attr("href"),fe=$(X);if(j.data("panel-link",fe),fe.data("tab-link",j),t.panels=t.panels.add(fe),t.anchors=t.anchors.add(j),G.hasClass("dismissible")){var he=G.children(".icon");he.length||(he=$.createIconElement({icon:"close",classes:"icon close"})),he.detach().appendTo(j)}}).on("click.popupmenu",".icon",function(j){var X=$(this),fe=X.closest("li");fe.is(".dismissible")&&X.is(".icon")&&(j.preventDefault(),j.stopPropagation(),t.closeDismissibleTab(fe.children("a").attr("href")))})}}),t.panels.addClass("tab-panel").attr({role:"tabpanel"}).find("h3:first").attr("tabindex","0"),t.panels.each(function(){var M=$(this);M.parent().is(t.container)||t.container.append(M)});var k,A,v=":not(.separator):not(.is-disabled):not(.is-hidden)",b=this.tablist.children("li".concat(v)),w=this.tablist.children("li.is-selected".concat(v)),T=w.children("a");return t.nestedTabControls=t.panels.find(".tab-container"),b.length&&(this.settings.changeTabOnHashChange&&(k=window.location.hash)&&k.length&&(A=b.find('a[href="'.concat(k,'"]'))).length&&(T=(w=A.first().parent()).children("a")),w.length||(T=(w=b.not(".add-tab-button, .application-menu-trigger").first()).children("a")),w.length&&this.activate(T.attr("href"),T)),this.isModuleTabs()&&this.element.children(".toolbar").length&&this.element.addClass("has-toolbar"),this.isModuleTabs()&&b.filter(".application-menu-trigger").length>0&&(b.find('a[tabindex="0"]').attr("tabindex","-1"),b.filter(".application-menu-trigger").find("a").attr("tabindex","0")),!this.isModuleTabs()&&this.isHeaderTabs()&&this.adjustTabs(),this.setOverflow(),this.positionFocusState(T),this.tablistContainer&&(this.tablistContainer.on("scroll.tabs",function(){e.renderEdgeFading()}),this.renderEdgeFading()),this.createSortable(),typeof ResizeObserver<"u"&&(this.ro=new ResizeObserver(function(){$("body").triggerHandler("resize")}),this.ro.observe(this.element[0]),this.containerElement&&this.ro.observe(this.containerElement[0])),setTimeout(function(){e.positionFocusState()},100),this},createSortable:function(){var e=this;if(this.settings.sortable&&(!xe.features.touch||this.isModuleTabs()||this.isVerticalTabs())){var i=this.tablist?this.tablist[0]:null,n=$(".tab-panel-container");if(i){[].slice.call(i.querySelectorAll(".is-disabled, .separator, .application-menu-trigger")).forEach(function(p){return p.setAttribute("data-arrange-exclude","true")}),i.setAttribute("data-options",'{"placeholderCssClass": "tab arrange-placeholder", "useItemDimensions": "true"}'),i.classList.add("arrange");var l=this.tablist.data("arrange");l||(l=this.tablist.arrange().data("arrange"));var d="has-placeholder",h=null;!this.isModuleTabs()&&!this.isVerticalTabs()&&!this.isHeaderTabs()&&this.tablist.on("beforearrange.tabs",function(){h=$(this).closest(".tab-container")[0]}).on("draggingarrange.tabs",function(){var p;null===(p=h)||void 0===p||p?.classList.add(d)}),this.tablist.on("dragover.tabs",function(p){p.preventDefault()}),n.on("dragover.tabpanel",function(p){p.preventDefault()}),this.tablist.on("drag.tabs",function(p){if($(".multitabs-section.is-hidden").length){var b=$(p.target).parents(".multitabs-section");b.hasClass("alternate")?b.find(".overlay-left").addClass("has-overlay"):b.find(".overlay-right").addClass("has-overlay")}}),this.tablist.on("dragend.tabs",function(p){var v=$(p.target),b=$(document.elementFromPoint(p.pageX,p.pageY)),w=v.parents(".multitabs-section");w.find(".overlay-left").removeClass("has-overlay"),w.find(".overlay-right").removeClass("has-overlay");var T=b.parents(".module-tabs");v.get(0)!==b.get(0)&&w[0]===b.parents(".multitabs-section")[0]&&$(".multitabs-section").each(function(q,O){w[0]!==O&&$(O).hasClass("is-hidden")&&(T=$(O).children(".module-tabs"))});var k=v.attr("href").replace("#",""),A=T.data("tabs");if(void 0!==A){var M=A.getTab(null,v);if(e.element.parent()[0]!==A.element.parent()[0]){var L=M.clone(),z=e.getPanel(k).children();e.remove(k),A.add(k,{name:L.children("a").text().trim(),content:z,doActivate:!0}),e.element.children(".tab-list").children().length<1&&e.element.parent().addClass("is-hidden"),A.element.children(".tab-list").children().length>0&&A.element.parent().removeClass("is-hidden")}}}),this.tablist.on("arrangeupdate.tabs",function(){var p;null===(p=h)||void 0===p||p?.classList.remove(d)}),this.element.on("aftertabadded.tabs",function(){var p;null===(p=l)||void 0===p||p?.updated()})}}},renderHelperMarkup:function(){var e,t,i,n=this.tablistContainer||this.tablist;this.focusState=this.element.find(".tab-focus-indicator"),null!==(e=this.focusState)&&void 0!==e&&e?.length||(this.focusState=$('<div class="tab-focus-indicator" role="presentation"></div>').insertBefore(this.tablist)),this.moreButton||(this.moreButton=$()),this.isVerticalTabs()?this.moreButton.length&&(this.moreButton.off().removeData().remove(),this.moreButton=$()):(this.moreButton.length||(this.moreButton=n.next(".tab-more")),this.moreButton.length||(this.moreButton=$("<div>").attr({class:"tab-more"}),this.moreButton.append($('<span class="more-text">').text(B.translate("More"))),this.moreButton.append($.createIconElement({classes:"icon-more",icon:"dropdown"}))),n.after(this.moreButton)),null!==(t=this.moreButton)&&void 0!==t&&t?.length&&this.settings.attributes&&H.addAttributes(this.moreButton,this,this.settings.attributes,"btn-more");var l,a=this.tablist.find(".application-menu-trigger");!0===this.settings.appMenuTrigger?this.isModuleTabs()?a.length||(a=$('\n            <li class="tab application-menu-trigger">\n              <a href="#">\n                <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n                    <use href="#icon-menu"></use>\n                </svg>\n                <span'.concat(this.settings.appMenuTriggerTextAudible?' class="audible"':"",">").concat(this.settings.appMenuTriggerText||B.translate("AppMenuTriggerText"),"</span>\n              </a>\n            </li>\n          ")),this.tablist.prepend(a)):this.isVerticalTabs()&&a.length&&a.off().removeData().remove():a.length&&(this.isVerticalTabs()?a.off().removeData().remove():this.tablist.prepend(a)),a.length&&(this.settings.attributes&&H.addAttributes(a,this,this.settings.attributes,"appmenu-trigger-btn"),null===(l=$("#application-menu").data("applicationmenu"))||void 0===l||l?.modifyTriggers([a.children("a")],null,!0)),this.settings.addTabButton?(!this.addTabButton||!this.addTabButton.length)&&(this.addTabButton=$('\n          <div class="add-tab-button hide-focus" tabindex="-1" role="button">\n            <span class="audible">'.concat(B.translate("AddNewTab"),"</span>\n          </div>\n        ")),$.createIconElement({icon:"add",classes:"icon-add"}).prependTo(this.addTabButton),this.addTabButton.insertAfter(this.moreButton),this.element.addClass("has-add-button")):this.addTabButton&&this.addTabButton.length&&(this.addTabButton.off().removeData().remove(),this.addTabButton=void 0,this.element.removeClass("has-add-button")),null!==(i=this.addTabButton)&&void 0!==i&&i?.length&&this.settings.attributes&&H.addAttributes(this.addTabButton,this,this.settings.attributes,"btn-add");var d=this.element.find(".more-actions-button .btn-actions");return d.length&&(this.moreActionsBtn=d),this.settings.addTabButtonTooltip&&this.addTabButton.tooltip({content:B.translate("AddNewTab")}),this},setupEvents:function(){var e=this,t=this;return this.tablist.on("mousedown.tabs","> li",function(p){if(t.handleAddFocusData(p,$(this)),$(p.target).hasClass("close")&&$(p.target).parent().hasClass("has-popupmenu")){var v=$(this).data("popupmenu").menu,b=[];$.each(v[0].children,function(w,T){b.push(T.children[0].href)}),t.closeDismissibleTabs(b)}return 3!==p.which&&!$(p.target).hasClass("close")&&t.handleTabClick(p,$(this))}).on("click.tabs","a",function i(p){var v=$(p.currentTarget);!0!==this.wasTapped?("touchend"===p.type&&(this.wasTapped=!0),"#"===v.attr("href").substr(0,1)&&p.preventDefault()):this.wasTapped=!1}).on("click.tabs",".icon",function n(p){var v=$(this);if(!v.is("[disabled]")&&!v.parent().hasClass("is-disabled")){var b=$(v).parent();b.hasClass("dismissible")&&(p.preventDefault(),p.stopPropagation(),t.closeDismissibleTab(b.children("a").attr("href")))}}).on("focus.tabs","a",function(p){return t.handleTabFocus(p,$(this))}).on("blur.tabs","a",function a(){$(this).parent().removeClass("is-focused")}).on("keydown.tabs","a",function(p){return e.handleTabKeyDown(p)}),t.tablist.find("li").filter(".has-popupmenu").each(function o(p,v){var b=$(v),w=b.children("a");b.data("popupmenu").menu.on("keydown.popupmenu","a",function(A){switch(A.which){case 27:b.addClass("is-selected"),w.focus();break;case 8:case 46:!function k(A){!A.altKey||!b.is(".dismissible")||t.closeDismissibleTab(w.attr("href"))}(A)}}),b.on("selected.tabs",function(A,M){var L=$(this),z=$(M).attr("href");return t.activate(z,$(M))&&(t.positionFocusState(w),w.focus(),t.scrollTabList(L),L.addClass("is-selected")),!1})}),t.tablist.find("li").filter(".dismissible").each(function d(p,v){$(v).children("a").on("keydown.tabs",function(T){t.handleDismissibleTabKeydown(T)})}),this.setupHelperMarkupEvents(),this.panels.on("keydown.tabs",function(p){t.handlePanelKeydown(p)}),this.element.on("focusout.tabs",function(){var p=!$.contains(t.element[0],document.activeElement),v=0===t.tablist.children(".has-popupmenu.is-open").length;p&&v&&!t.moreButton.is(".is-selected, .popup-is-open")&&t.hideFocusState()}).on("updated.tabs",function(p,v){t.updated(v)}).on("activated.tabs",function(p){p.stopPropagation()}).on("add.tabs",function(p,v,b,w){t.add(v,b,w)}).on("remove.tabs",function(p,v){t.remove(v)}),$("body").on("resize.tabs".concat(this.tabsIndex),function(){t.handleResize()}),t.handleResize(!0),this},setupHelperMarkupEvents:function(){var e,t=this;this.moreButton.on("click.tabs",function(i){t.handleMoreButtonClick(i)}).on("keydown.tabs",function(i){t.handleMoreButtonKeydown(i)}).on("focus.tabs",function(i){t.handleMoreButtonFocus(i)}).on("mousedown.tabs",function(i){t.handleAddFocusData(i,$(this))}),this.settings.addTabButton&&this.addTabButton.on("click.tabs",function(){t.handleAddButton()}).on("keydown.tabs",function(i){t.handleAddButtonKeydown(i)}).on("focus.tabs",function(i){t.handleAddButtonFocus(i)}),null!==(e=this.moreActionsBtn)&&void 0!==e&&e?.length&&this.moreActionsBtn.on("keydown.tabs",function(i){t.handleMoreActionsButtonKeydown(i)})},removeHelperMarkupEvents:function(){return this.moreButton&&this.moreButton.length&&this.moreButton.off("click.tabs keydown.tabs focus.tabs mousedown.tabs"),this.addTabButton&&this.addTabButton.length&&this.addTabButton.off("click.tabs keydown.tabs focus.tabs"),this},handleAddFocusData:function(e,t){var i=t;return i.is(".is-disabled")?(e.preventDefault(),!1):(i.is(this.moreButton)||(i=i.children("a")),this.hideFocusState(),i.data("focused-by-click",!0),!0)},handleTabClick:function(e,t){var i;if(this.element.is(".is-disabled")||t&&(t.is(".is-disabled")||t.is(".separator")))return e.stopPropagation(),e.preventDefault(),!1;if(!this.handleAppMenuTabKeydown(e))return!0;var a=t.children("a");if(a.data("focused-by-click",!0),this.popupmenu&&this.popupmenu.element.hasClass("is-open")&&this.popupmenu.close(),t.is(".has-popupmenu"))return this.positionFocusState(a),!0;var o=a.attr("href");return t.is(".add-tab-button")&&(t=(a=this.handleAddButton()).parent(),o=a.attr("href"),this.element.trigger("tab-added",[a])),2===e.which?(t.is(".dismissible")&&$(e.target).is(".close")&&this.closeDismissibleTab(o),e.preventDefault(),!0):!(this.activate(o,a)&&(this.changeHash(o),null===(i=this.focusState)||void 0===i||i?.removeClass("is-visible"),a.focus(),this.isScrollableTabs()&&this.scrollTabList(t),this.positionFocusState(a),!0===this.settings.lazyLoad&&this.isURL(o)))},handleMoreButtonClick:function(e){return this.element.is(".is-disabled")||this.moreButton.is(".is-disabled")?(e.preventDefault(),e.stopPropagation(),!1):(this.moreButton.data("focused-by-click",!0),this.hasMoreButton()||e.stopPropagation(),this.moreButton.hasClass("popup-is-open")?(this.popupmenu.close(),this.moreButton.removeClass("popup-is-open")):this.buildPopupMenu(),this.hideFocusState(),!0)},hasMoreActions:function(){var e=this.element.find(".more-actions-button > .btn-actions");return e&&e.length>0},handleMoreActionsButtonKeydown:function(e){if(this.element.is(".is-disabled")||this.moreActionsBtn.is(".is-disabled"))return e.stopPropagation(),e.preventDefault(),!1;var l,t=this,n=this.addTabButton&&this.addTabButton.length,o=this.tablist.children("li".concat(":not(.separator):not(.is-disabled):not(:hidden)"));switch(e.which){case 37:case 38:if(n)this.addTabButton.focus();else{var d=this.findLastVisibleTab();this.hasMoreButton()?function i(h){e.preventDefault(),setTimeout(function(){t.buildPopupMenu(h),t.positionFocusState(t.moreButton,!0)},0)}(d.attr("href")):l=d}break;case 39:case 40:l=o.first()}return l&&(e.preventDefault(),l.children("a").focus(),this.isScrollableTabs()&&this.scrollTabList(l)),!0},handleTabFocus:function(e,t){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var i=t.parent(),n=t.data("focused-by-click"),a=void 0===n||n&&!1===n;return $.removeData(t[0],"focused-by-click"),this.isTabOverflowed(i)?(this.buildPopupMenu(t.attr("href")),a&&this.moreButton.addClass("is-focused"),this.positionFocusState(this.moreButton)):(a&&i.addClass("is-focused"),this.positionFocusState(t,a)),!0},handleMoreButtonFocus:function(e){var t;if(this.element.is(".is-disabled"))e.preventDefault();else{var i=this.moreButton.data("focused-by-click"),n=i&&!1===i;$.removeData(this.moreButton[0],"focused-by-click"),null===(t=this.focusState)||void 0===t||t?.removeClass("is-visible"),this.positionFocusState(this.moreButton,n)}},handleTabKeyDown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;if(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey&&8!==e.which)return!0;var t=this,i=[8,13,32];function n(){return $.inArray(e.which,i)>-1}if(e.which<32&&!n()||e.which>46)return!0;if(n()&&!this.handleAppMenuTabKeydown(e))return!0;function o(q){e.preventDefault(),setTimeout(function(){t.buildPopupMenu(q)},0)}var p,l=":not(.separator):not(.is-disabled):not(:hidden)",d=$(e.currentTarget).parent(),h=d.children("a"),v=t.tablist.children("li".concat(l)),b=B.isRTL();function w(){for(var q=v.index(d)-1;q>-1&&!p;){if(v.eq(q).is(l))return v.eq(q);q-=1}if(t.hasMoreActions())return t.moreActionsBtn;if(t.settings.addTabButton)return t.addTabButton;var O=t.tablist.children("li".concat(l)).last();return t.hasMoreButton()&&t.isScrollableTabs()&&o(O.find("a").attr("href")),O}function T(){for(var q=v.index(d)+1;q<v.length&&!p;){if(v.eq(q).is(l))return v.eq(q);q++}var O=t.tablist.children("li".concat(l)).first();return t.hasMoreButton()&&t.isScrollableTabs()?(o(O.find("a").attr("href")),O):t.settings.addTabButton?t.addTabButton:t.hasMoreActions()?t.moreActionsBtn:O}switch(e.which){case 8:return e.altKey&&d.is(".dismissible")&&(e.preventDefault(),t.closeDismissibleTab(h.attr("href"))),!0;case 13:case 32:return function A(){if(d.hasClass("has-popupmenu"))d.data("popupmenu").open();else{var q=h.attr("href");d.is(".add-tab-button")&&(h=t.handleAddButton(),d=h.parent(),q=h.attr("href"),t.element.trigger("tab-added",[h])),t.activate(q)&&(t.changeHash(q),function k(){(h.attr("ng-click")||h.attr("data-ng-click"))&&h.click()}(),h[0].focus(),t.hideFocusState(),t.handleOutboundLink(q))}}(),this.positionFocusState(),!1;case 38:p=w(),e.preventDefault();break;case 37:p=b?T():w(),e.preventDefault();break;case 40:p=T(),e.preventDefault();break;case 39:p=b?w():T(),e.preventDefault()}if(p){var M=p.is(".add-tab-button"),L=p.is(".btn-actions"),z=M||L?p:p.children("a");if(this.isTabOverflowed(p))return o(p.children("a").attr("href"));M?(t.addTabButton.is(".hide-focus")&&t.addTabButton.data("focused-by-key",!0),t.addTabButton.focus()):L?t.moreActionsBtn.focus():(z.focus(),this.isScrollableTabs()&&(this.scrollTabList(z),t.positionFocusState(z,!0)))}return!0},handleDismissibleTabKeydown:function(e){var t=e.which,i=$(e.target);if(i.is("a")&&(i=i.parent()),e.altKey&&46===t){if(i.children("a").is("[disabled]")||i.hasClass("is-disabled"))return;e.preventDefault(),this.closeDismissibleTab(i.children("a").attr("href"))}},handleAppMenuTabKeydown:function(e){var t=$(e.target);if(!t.parent().is(".application-menu-trigger")&&!t.is(".application-menu-trigger"))return!0;var n=$("#application-menu");return!!n.length&&(e.preventDefault(),n.hasClass("is-open")?(n.trigger("close-applicationmenu",[!0]),!1):(n.trigger("open-applicationmenu",[!0,!0]),!1))},handleMoreButtonKeydown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var t=this,i=B.isRTL();function n(){e.preventDefault(),t.buildPopupMenu(t.tablist.find(".is-selected").children("a").attr("href")),t.positionFocusState(t.moreButton,!0)}function a(){e.preventDefault(),t.findLastVisibleTab()}switch(e.which){case 37:if(i){n();break}a();break;case 38:a();break;case 13:case 32:e.preventDefault();break;case 39:if(i){a();break}n();break;case 40:n()}return!0},handlePanelKeydown:function(e){var t=e.which,i=$(e.target),n=this.anchors.filter("#".concat(i.attr("id")));return this.anchors.filter("#".concat(i.attr("id"))).parent().is(".dismissible")&&e.altKey&&46===t?(e.preventDefault(),this.closeDismissibleTab(n.attr("href"))):e.ctrlKey&&38===t&&$.contains(document.activeElement,i[0])?(e.preventDefault(),this.activate(n.attr("href"),n)):void 0},triggerEventAfterTabAdded:function(e){var t=this.anchors.filter('[href="#'.concat(e,'"]'));this.element.triggerHandler("aftertabadded",[t])},handleAddButton:function(){var e=this,t=this.settings.addTabButtonCallback;if(t&&"function"==typeof t){var i=t();return this.triggerEventAfterTabAdded("newTabId"),this.anchors.filter('[href="#'.concat(i,'"]'))}var o=this.tablist.children().index(this.addTabButton),l=function n(){return e.idCounter="number"==typeof e.idCounter?e.idCounter:-1,e.idCounter++,"new-tab-".concat(e.idCounter)}(),h={name:function a(v){var b=v.toString().split("-");return b.forEach(function(w,T){b[T]=w.charAt(0).toUpperCase()+w.slice(1)}),b.join(" ")}(l),content:"&nbsp;",isDismissible:!0};o<0&&(o=this.tablist.find("li:not(.separator)").length);var p=this.element.triggerHandler("before-tab-added",[l,h,o]);return p?(p.newId&&p.newId.length&&"string"==typeof p.newId&&(l=p.newId),p.settings&&"object"===rt(p.settings)&&(h=p.settings),isNaN(p.newIndex)||(o=p.newIndex),this.add(l,h,o),this.triggerEventAfterTabAdded("newId"),this.anchors.filter('[href="#'.concat(l,'"]'))):(this.add(l,h,o),this.triggerEventAfterTabAdded("newId"),this.anchors.filter('[href="#'.concat(l,'"]')))},handleAddButtonKeydown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var i=e.which;if([13,32,37,38,39,40].indexOf(i)<0)return!1;var o,n=this,a=B.isRTL(),l="li:not(.separator):not(.is-disabled):not(:hidden)";function h(){n.hasMoreActions()?n.moreActionsBtn.focus():o=n.tablist.find(l).first()}function p(){e.preventDefault(),n.findLastVisibleTab()}switch(i){case 37:if(a){h();break}p();break;case 38:!function d(){e.preventDefault(),o=n.tablist.find(l).last(),setTimeout(function(){n.buildPopupMenu(o.children("a").attr("href")),n.positionFocusState(n.moreButton,!0)},0)}();break;case 13:case 32:return e.preventDefault(),this.handleAddButton();case 39:if(a){p();break}h();break;case 40:h()}return o&&(o.children("a").focus(),this.isScrollableTabs&&(e.preventDefault(),this.scrollTabList(o))),!0},handleAddButtonFocus:function(){this.tablist.find("li:not(.separator)").add(this.moreButton).removeClass("is-focused"),this.addTabButton.addClass("is-focused");var t=this.addTabButton.data("focused-by-key"),i=void 0!==t&&t;$.removeData(this.addTabButton[0],"focused-by-key"),this.positionFocusState(this.addTabButton,i)},handleResize:function(e){e||this.checkResponsive(!0),this.setOverflow();var t=this.tablist.find(".is-selected");(!t.length||this.moreButton.is(".is-selected")||this.isTabOverflowed(t))&&(t=this.moreButton);var i=this.element.find(".application-menu-trigger");i.length>0&&i.hasClass("is-focused")&&(t=i.find("a")),t.length?this.positionFocusState(t):this.hideFocusState(),this.handleVerticalTabResize(),this.renderVisiblePanel(),this.renderEdgeFading()},checkResponsive:function(e){var t=this,i=t.element[0].classList;function n(){t.removeHelperMarkupEvents(),t.renderHelperMarkup(),t.setupHelperMarkupEvents()}this.isResponsiveVerticalTabs()&&Jt.isBelow("phone-to-tablet")?function a(){i.contains("is-in-responsive-mode")||(i.add("is-in-responsive-mode"),i.add("header-tabs"),i.contains("is-personalizable")||i.add("alternate"),i.remove("vertical"),e&&n())}():function o(){i.contains("is-in-responsive-mode")&&(i.add("vertical"),i.remove("is-in-responsive-mode"),i.remove("header-tabs"),i.remove("alternate"),e&&n())}()},handleVerticalTabResize:function(){if(this.isVerticalTabs()&&this.isNested()&&!this.isNestedInLayoutTabs()&&!this.isHidden()){var e=window.getComputedStyle(this.element[0]),t=e.getPropertyValue("height")+e.getPropertyValue("margin-top")+e.getPropertyValue("margin-bottom");this.tablist[0].style.height=t}},handleOutboundLink:function(e,t){"#"!==e.charAt(0)&&("/"===e.charAt(0)&&(!t||!1===t)&&(e=window.location.origin+e),window.location=e)},hasMoreButton:function(){return this.element[0].classList.contains("has-more-button")},isInResponsiveMode:function(){return this.element[0].classList.contains("is-in-responsive-mode")},isModuleTabs:function(){return this.element.hasClass("module-tabs")},isVerticalTabs:function(){return this.element.hasClass("vertical")},isResponsiveVerticalTabs:function(){return!0===this.settings.verticalResponsive},isHeaderTabs:function(){return this.element.hasClass("header-tabs")},isScrollableTabs:function(){return!this.isVerticalTabs()},isHidden:function(){return this.element.is(":hidden")},isNested:function(){return this.element.closest(".tab-panel").length},isActive:function(e){return!(!e||!e.length||1===e.length&&e.indexOf("#")<1)&&this.getPanel(e)[0].classList.contains("can-show")},isNestedInLayoutTabs:function(){var e=this.element.closest(".module-tabs").length,t=this.element.closest(".header-tabs").length,i=this.element.closest(".tab-panel-container").length;return e>0||t>0||i>0},isTab:function(e){return e instanceof jQuery&&e.length&&e.is("li.tab")},isAnchor:function(e){return e instanceof jQuery&&e.length&&e.is("a")},getAnchor:function(e){return this.isAnchor(e)?e:(-1===e.indexOf("#")&&"/"!==e.charAt(0)&&(e="#".concat(e)),this.anchors.filter('[href="'.concat(e,'"]')))},getPanel:function(e){return this.isTab(e)&&(e=e.children("a")),this.isAnchor(e)&&(e=e.attr("href")),e&&""!==e&&"#"!==e?("#/"===e.substr(0,2)&&(e=e.replace("#/","#")),this.panels.filter('[id="'.concat(e.replace(/#/g,""),'"]'))):$()},getMenuItem:function(e){return this.isAnchor(e)&&(e=e.attr("href")),-1===e.indexOf("#")&&(e="#".concat(e)),this.moreMenu.children().children().filter('[data-href="'.concat(e,'"]')).parent()},getPreviousTab:function(e){for(var t=this.getTab(null,e),i="li:not(.separator):not(:hidden):not(.is-disabled)",n=this.tablist.find(i),a=n.index(t),o=n.eq(0===a?1:a-1);o.length&&!o.is(i);)o=n.eq(n.index(o)-1);if(o.is(".has-popupmenu")){var l=o.data("popupmenu");l&&(o=l.menu.children("li").first())}return o},activateAdjacentTab:function(e,t){var i=this.doGetTab(e,t);"string"==typeof e&&(t=e),i.is(".is-selected")?i.prevAll("li.tab").not(".hidden").not(".is-disabled").length>0?this.select($(i.prevAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):i.nextAll("li.tab").not(".hidden").length>0&&this.select($(i.nextAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash,!0)},activatePreviousTab:function(e,t){var i=this.getTab(null,e);if((!t||!(t instanceof jQuery))&&(t=this.getPreviousTab(e)),!t.length)return this.hideFocusState(),t;var n=t.children("a");if(i.is(".is-selected")){if(!this.activate(n.attr("href"),n))return t;n.focus()}return this.positionFocusState(n),t},isURL:function(e){return!(!e||0===e.indexOf("#"))},activate:function(e,t){if(e.indexOf("undefined")>-1)return!0;var i=this;if(i.isURL(e))return this.callSource(e,t,!0);for(var h,p,v,n=i.getAnchor(e),a=n.parent(),o=i.getPanel(e),l=o[0],d=i.anchors.parents().filter(".is-selected"),b=0;b<i.panels.length;b++)i.panels[b].classList.contains("is-visible")&&(h=$(i.panels[b]));if(h||(h=i.panels),!1===i.element.triggerHandler("beforeactivated",[n]))return!1;function T(k){if(o.length<1){if(i.settings.source)return i.callSource(e,n),!0}else{h[0].classList.remove("can-show"),h[0].classList.remove("is-visible"),h.closeChildren(),i.element.trigger("activated",[n]),l.classList.add("can-show"),i.renderVisiblePanel();var A=new Li({duration:_n.convertDelayToFPS(150),timeoutCallback:function(){i.element.trigger("afteractivated",[n])}});_i.register(A),l.classList.add("is-visible")}i.updateAria(n),d.add(i.moreButton).removeClass("is-selected"),a[0]&&a[0].classList.contains("tab")&&(p=a,v=a);var L,M=a.parents(".popupmenu");M.length&&(L=M.data("trigger")).length&&(p=L,v=L),i.isTabOverflowed(v)&&(v=i.moreButton,p=i.moreButton),p&&p.addClass("is-selected");var z=o.find(".toolbar");return z.length&&z.each(function(){var q=$(this).data("toolbar");q&&"function"==typeof q.handleResize&&q.handleResize()}),H.fixSVGIcons(o[0]),k||!1}return this.settings.beforeActivate&&"function"==typeof this.settings.beforeActivate?this.settings.beforeActivate(d,a,T):T(!0)},renderEdgeFading:function(){if(this.isScrollableTabs()&&this.tablistContainer){var e=this.tablistContainer[0],t=Math.abs(e.scrollLeft),i=e.scrollWidth,n=parseInt(window.getComputedStyle(e).getPropertyValue("width"),10);this.element[0].classList[t>1?"add":"remove"]("scrolled-right"),this.element[0].classList[i-t-1<=n?"remove":"add"]("scrolled-left")}},callSource:function(e,t,i){var n=this;if((null==i||!1===i)&&!this.settings.source||!0!==this.settings.lazyLoad)return!1;var a=rt(this.settings.source),o=function(A){if(null!=A){if(A=Fe.sanitizeHTML(A),i){var L=H.uniqueId(t,"tab",n.element[0].id||"");e="#".concat(L),t[0].setAttribute("href",e)}n.createTabPanel(e,A,!0),n.activate(e),n.element.triggerHandler("complete"),n.element.trigger("requestend",[e,A])}};function l(k,A){var M=$.extend({dataType:"html"},A,{url:k}),L=$.ajax(M);return L.done(o),L}if(this.container.triggerHandler("start"),this.container.trigger("requeststart"),i)return l(e,this.ajaxOptions);if("function"===a)return this.settings.source(o,e,this.settings.sourceArguments);if("string"===a){var d=e.replace(/#/g,""),h=this.settings.source.toString();if(!(h.indexOf(d)>-1)){var v="tab=".concat(d),b=h.indexOf("?"),w=h.indexOf("#"),T=h.length;b<0?(v="?".concat(v),w>-1&&(T=w+1)):(v+="&",T=b+1),h=st.splice(h,T,0,v)}return l(h,this.ajaxOptions)}return!1},renderVisiblePanel:function(){this.resizeNestedTabs()},changeHash:function(e){if(this.settings.changeTabOnHashChange){e||(e=""),e.replace(/#/g,"");var t=this.settings.hashChangeCallback;t&&"function"==typeof t?t(e):window.location.hash=e,this.element.triggerHandler("hash-change",[e])}},updateAria:function(e){e&&(this.anchors.attr({"aria-selected":"false",tabindex:"-1"}),this.moreButton.attr({tabindex:"-1"}),e.length&&this.element.is(":not(.is-disabled)")&&(e.parent().removeClass("is-selected"),this.isTabOverflowed(e.parent())?this.moreButton.attr({tabindex:"0"}):e.attr({"aria-selected":"true",tabindex:"0"}).parent().addClass("is-selected")))},resizeNestedTabs:function(){this.nestedTabControls.each(function(e,t){var n=$(t).data("tabs");n&&n.handleResize&&"function"==typeof n.handleResize&&n.handleResize(!0)})},add:function(e,t,i){var n=this;if(!e)return this;t||(t={});var a=0===this.tablist.find("li").not(".application-menu-trigger, .add-tab-button").length;function o(w){if("string"===rt(w)&&null!==w.match(/^#/g)){var A=$(w);w=A.length?A:w}return w}e="".concat(e.replace(/#/g,"")),t.name=t.name?t.name.toString():"&nbsp;",t.isDismissible=!!t.isDismissible&&!0===t.isDismissible,t.isDropdown=!!t.isDropdown&&!0===t.isDropdown,t.content&&(t.content=o(t.content)),t.dropdown&&(t.dropdown=o(t.dropdown));var p,l=$('<li class="tab" role="presentation"></li>'),d=$('<a id="#'.concat(e,'" href="#').concat(e,'" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1">').concat(Fe.escapeHTML(t.name),"</a>")),h=this.createTabPanel(e,t.content);l.html(d),t.isDismissible&&(p=$.createIconElement({icon:"close",classes:"close icon"}),H.addAttributes(p,this,t.attributes,"close-btn"),l.addClass("dismissible"),l.append(p)),this.settings.tabCounts&&d.prepend('<span class="count">0 </span>');var v=this.settings.attributes||[];if(Array.isArray(t.attributes)&&(v=v.concat(t.attributes)),v.length&&(H.addAttributes(d,this,v,"".concat(e,"-a")),H.addAttributes(h,this,v,"".concat(e,"-panel"))),function b(w,T){var k,A=w.tablist.children("li"),M=A.not(".application-menu-trigger, .add-tab-button"),L=A.length-1;if(!A.length)return l.appendTo(w.tablist),void h.appendTo(w.container);var z=A.filter(".add-tab-button"),q=A.filter(".application-menu-trigger");(null==T||isNaN(T))&&(T=A.length),A.length>M.length&&(function O(j){return j>A.length-1}(T)&&z&&z.length&&(T-=1),function _(j){return j<=0}(T)&&q&&q.length&&(T+=1));var G=A.eq(T).length>0;k="insertAfter",G&&(k="insertBefore"),l[k](A.eq(L=G?T:L)),h.appendTo(w.container)}(this,i),this.panels=$(this.panels.add(h)),this.anchors=$(this.anchors.add(d)),d.data("panel-link",h),h.data("tab-link",d),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips||this.settings.headerTabsTooltips)&&(d.parent().on("mouseover.tabs",function(){void 0===d.data("cutoffTitle")&&self.checkCutOffTitle($(n),self.visibleTabSize)}),d.on("beforeshow.toolbar",function(){return"yes"===d.data("cutoffTitle")}).tooltip({content:"".concat(d.text().trim())})),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),a){if(this.positionFocusState(d),!this.activate(d.attr("href")))return this.triggerEventAfterTabAdded(e),this;d.focus()}return t.doActivate&&this.activate(d.attr("href")),this.triggerEventAfterTabAdded(e),this},remove:function(e,t){var i,n,a=this,o=this.doGetTab(null,e);if(!o||!o.length)return!1;var l=o.children("a"),d=this.getPanel(e),h=d&&d.length,p=this.tablist.children("li").index(o),v=".application-menu-trigger, .separator, .is-disabled",b=o.prev();if(!t&&!1===this.element.triggerHandler("beforeclose",[l]))return!1;var T=!1;null!==(i=l[0])&&void 0!==i&&i?.href&&null!==(n=a.getActiveTab()[0])&&void 0!==n&&n?.href&&l[0].href===a.getActiveTab()[0].href?T=!0:b=$(this.tablist.children("li").not(v).filter(".is-selected")),h&&(this.panels=$(this.panels.not(d))),this.anchors=$(this.anchors.not(l)),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&l.off("beforeshow.toolbar").data("tooltip").destroy();var k=o.data("popupmenu");o.hasClass("has-popupmenu")&&k&&(k.menu.children("li").each(function(){a.remove($(this).children("a").attr("href"))}),k.destroy());var A=o.closest(".dropdown-tab"),M=A.data("trigger");o.find(".icon").off().removeData().remove(),o.off(),l.off(),o.removeData().empty(),o.remove(),h&&(d.removeData().empty(),d.removeData(),d.remove());var L=l.data("moremenu-link");L&&(L.parent().off().removeData().remove(),l.removeData()),function z(G){return G.length&&0===G.children("li:not(.separator)").length}(A)&&(b=this.getPreviousTab(M),setTimeout(function(){a.remove(M)},1)),M&&M.length&&M.data("popupmenu").close(),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),this.element.trigger("close",[o]);for(var q=p-1;q>-1;)q=-1,b.is(v)&&(b=this.tablist.children("li").not(v)[0],q-=1);if((!b||!b.length)&&(b=this.tablist.children("li").not(v).first()),!b.length)return this.hideFocusState(),this.element.trigger("afterclose",[o]),this;var O=b.children("a"),_=O;return this.positionFocusState(O),T&&(b.is(".has-popupmenu")&&b.data("popupmenu")&&(_=b.data("popupmenu").menu.children().first().children("a")),!this.activate(_.attr("href")))||(O.focus(),this.element.trigger("afterclose",[o])),this},createTabPanel:function(e,t,i){e=e.replace(/#/g,"");var n=$('<div id="'.concat(Fe.stripTags(e),'" class="tab-panel" role="tabpanel"></div>'));return t instanceof $&&(t=t[0].outerHTML),de.html(n[0],t||"","*"),!0===i&&this.container.append(n),this.panels=$(this.panels.add(n)),n},checkPopupMenuItems:function(e){function t(n){if(!n||!n.menu)return $();var o=n.menu.children("li");return o.length?o:(n.destroy(),$())}if(e.is(".has-popupmenu"))return t(e.data("popupmenu"));var i=e.closest(".dropdown-tab");return i.length?t(i.data("popupmenu")):$()},getTab:function(e,t){var i=this,n=$();return t instanceof $&&t.length>0?t.is("a")?t.parent():t:e?function a(l){var d=$(l.currentTarget);return d.is(".tab")?d:d.closest(".tab").length?d.closest(".tab").first():null}(e):t?function o(l){if(!l||""===l||"#"===l)return null;-1===l.indexOf("#")&&(l="#".concat(l));var d=i.anchors.filter('[href="'.concat(l,'"]'));return d.length?d.parent():null}(t):n},doGetTab:function(e,t){return!e&&!t||e&&!(e instanceof $.Event)&&"string"!=typeof e?$():e?"string"!=typeof e?this.getTab(e):this.getTab(null,e):this.getTab(null,t)},hide:function(e,t){var i=this.doGetTab(e,t);this.activateAdjacentTab(e,t),i.addClass("hidden");var n=$(this.element.find("li.tab.is-selected")[0]).find("a");return n[0]&&this.select(n[0].hash),this.positionFocusState(),this},show:function(e,t){this.doGetTab(e,t).removeClass("hidden");var n=$(this.element.find("li.tab.is-selected")[0]).find("a");return n[0]&&this.select(n[0].hash),this.positionFocusState(),this},disableTab:function(e,t){var i=this.doGetTab(e,t);return this.activateAdjacentTab(e,t),i.addClass("is-disabled"),this.positionFocusState(),this},enableTab:function(e,t){return this.doGetTab(e,t).removeClass("is-disabled"),this.positionFocusState(),this},rename:function(e,t,i){if(e&&"string"==typeof e&&(i=t,t=e),i){i=i.toString();var h,n=this.doGetTab(e,t),a=this.settings.tabCounts,o=this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips,l=n.hasClass("dismissible"),d=n.children("a");if(a&&(h=d.find(".count").clone()),d.text(i),this.popupmenu){var p="#"!==t.charAt(0)?"#".concat(t):t,v=this.popupmenu.menu.find('a[href="'.concat(p,'"]'));v.text(i),l&&v.append($.createIconElement({icon:"close",classes:"icon close"}))}a&&d.prepend(h),o&&d.data("tooltip").setContent(i.trim());var b=this.tablist.children("li").length<2?n:void 0;this.positionFocusState(b)}},updateCount:function(e,t,i){if(e&&"string"==typeof e&&(i=t,t=e),this.settings.tabCounts&&i){var n=this.doGetTab(e,t);n.children("a").find(".count").text("".concat(i.toString()," "));var a=this.tablist.children("li").length<2?n:void 0;this.positionFocusState(a)}},getActiveTab:function(){var e=this.panels.filter(":visible");return this.anchors.filter('[href="#'.concat(e.first().attr("id"),'"]'))},getVisibleTabs:function(){var e=this,t=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each(function(){var n=$(this);e.isTabOverflowed(n)||(t=t.add(n))}),t},getOverflowTabs:function(){var e=this,t=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each(function(){var n=$(this);e.isTabOverflowed(n)&&(t=t.add(n))}),t},setOverflow:function(){var d,h,b,e=this,t=this.element[0],i=this.tablist[0],n="has-more-button",a=this.hasMoreButton(),o=this.isScrollableTabs();function l(){e.isModuleTabs()&&e.adjustModuleTabs(),e.isHeaderTabs()&&!e.isVerticalTabs()&&e.adjustTabs()}l(),o&&this.isModuleTabs()?b=this.tablist[0].scrollWidth>this.tablistContainer[0].offsetWidth:o?b=this.tablistContainer[0].scrollWidth>this.tablistContainer[0].offsetWidth:(d=window.getComputedStyle(i,null),h=parseInt(d.getPropertyValue("height"),10)+1,b=i.scrollHeight>h),b?a||(t.classList.add(n),l()):a&&(t.classList.remove(n),l()),this.adjustSpilloverNumber()},resetTabStyles:function(){var e=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)");e.children("a").removeAttr("style"),e.removeAttr("style")},getViewableTabs:function(){var e=this,t=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)");t.each(function(){var i=$(this);e.isTabOverflowed(i)&&(t=t.not(i))}),this.checkCutOffTitle(t,this.visibleTabSize)},adjustModuleTabs:function(){if(null!=this.settings.maxWidth||this.settings.equalTabWidth){var e=this,t=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),i=this.tablist.find(".application-menu-trigger"),n=i.length>0,a=this.tablist.outerWidth(),l=120,d=n?i.outerWidth():0;if(t.children("a").removeAttr("style"),t.removeAttr("style"),this.setMaxWidth(),t.each(function(){var h=$(this);e.isTabOverflowed(h)&&(t=t.not(h))}),!t.length)return void(this.moreButton[0].style.width="".concat(l=a-d+101,"px"));this.moreButton[0].hasAttribute("style")&&this.moreButton[0].removeAttribute("style"),(l=(a-d)/t.length)<120&&(l=120),this.visibleTabSize=l,this.checkCutOffTitle(t,l),this.adjustSpilloverNumber()}},adjustTabs:function(){if(null!=this.settings.maxWidth){var e=this,t=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),i=this.tablist.parent().outerWidth(),a=120;if(t.children("a").removeAttr("style"),t.removeAttr("style"),this.setMaxWidth(),t.each(function(){var o=$(this);e.isHeaderTabOverflowed(o)&&(t=t.not(o))}),!t.length)return void(this.moreButton[0].style.width="".concat(a=i-101,"px"));this.moreButton[0].hasAttribute("style")&&this.moreButton[0].removeAttribute("style"),(a=i/t.length)<120&&(a=120),this.visibleTabSize=a,this.checkCutOffTitle(t,a),this.adjustSpilloverNumber()}},checkCutOffTitle:function(e,t){e.is("a")&&(e=e.parent());for(var o,l,i=window.getComputedStyle(e.eq(0).children()[0]),n=parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10),d="no",h=1===this.element.closest(".side-by-side").length,p=0;p<e.length;p++){if((o=e.eq(p).children("a"))[0]&&(o[0].style.width=""),null===this.settings.maxWidth){var v=0;"ios"===xe.os.name&&xe.devicespecs.isMobile&&h&&(v=25),e[p].style.width="".concat(t-v,"px"),o[0]&&(o[0].style.width="".concat(t-v,"px"))}var b,w;(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips||this.settings.headerTabsTooltips)&&(d="no",l=parseInt(window.getComputedStyle(e[p]).width,10),null!==this.settings.maxWidth&&o[0].scrollWidth>o.innerWidth()&&(d="yes"),null===this.settings.maxWidth&&l>t-n&&(d="yes"),null===(b=o)||void 0===b||null==(w=b)||w.data("cutoffTitle",d))}},setMaxWidth:function(){if(null!=this.settings.maxWidth)for(var e=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),t=0;t<e.length;t++){var i=e.eq(t).children("a");e[t].style.width="".concat(this.settings.maxWidth,"px"),i[0].style.width="".concat(this.settings.maxWidth,"px")}},adjustSpilloverNumber:function(){var e=this.moreButton.find(".more-text"),t=this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)"),i=this.getOverflowTabs();e.text("".concat(B.translate(t.length<=i.length?"Tabs":"More")));var n=this.moreButton.find(".count");n.length||(n=$('<span class="count"></span>'),this.moreButton.children("span").first().prepend(n)),n.text("".concat(i.length," "))},select:function(e,t){var i=e.replace(/#/g,""),n=this.getAnchor(i);this.positionFocusState(void 0,!1),this.activate(n.attr("href"))&&(this.changeHash(i),t||n.focus())},buildPopupMenu:function(e){var t=this;t.popupmenu&&(t.popupmenu.destroy(),$("#tab-container-popupmenu").off("focus.popupmenu").removeData().remove(),$(document).off("keydown.popupmenu"));var i=$("#tab-container-popupmenu"),n="";this.isScrollableTabs()&&(n=" is-selectable"),0===i.length?i=$('<ul id="tab-container-popupmenu" class="tab-list-spillover'.concat(n,'">')).appendTo("body"):i.html("");var a=t.tablist.children("li"),o=B.isRTL();function l(A){var M,L,z=$(A),q=z.children("a");if(!z.is(":hidden")&&(t.isScrollableTabs()||t.isTabOverflowed(z))){if(z.is(".separator"))return void z.clone().appendTo(i);var O=z.clone(),_=O.children("a");if(O[0].classList.remove("tab"),O[0].classList.contains("is-selected")&&(O[0].classList.remove("is-selected"),t.isScrollableTabs()&&O[0].classList.add("is-checked")),null===(M=O[0])||void 0===M||M?.removeAttribute("style"),null===(L=_[0])||void 0===L||L?.removeAttribute("style"),O.children(".icon").off().appendTo(_),O.appendTo(i),z.data("moremenu-link",_),_?.find(".icon-more").removeData().remove(),_?.data("original-tab",q),_&&(_.onclick=void 0),z.is(".has-popupmenu")){var G=$("#".concat(A.getAttribute("aria-controls"))),j=G.clone(),X=j.children("li");j[0].classList.remove("has-popupmenu"),X.each(function(fe){var we=$(this).children("a"),Ne=G.children("li").eq(fe).children("a");we.data("original-tab",Ne),Ne.data("moremenu-link",we)}),j.insertAfter(_)}}}for(var d=0;d<a.length;d++)l(a[d]);t.tablist.children("li:not(.separator)").removeClass("is-focused");var h=1;this.isScrollableTabs()||(h=3),t.moreButton.popupmenu({autoFocus:!1,attachToBody:!0,menu:"tab-container-popupmenu",trigger:"immediate",offset:{x:h},attributes:t.settings.attributes}),t.moreButton.addClass("popup-is-open"),t.popupmenu=t.moreButton.data("popupmenu"),t.positionFocusState(t.moreButton),t.moreButton.on("close.tabs",function v(){$(this).off("close.tabs selected.tabs"),t.moreButton.removeClass("popup-is-open"),t.positionFocusState(void 0),t.getViewableTabs()}).on("selected.tabs",function b(A,M){var L=M.attr("href"),z=L.substr(1,L.length),q=t.doGetTab(z)||$(),O=q?q.children("a"):$(),_=M.data("original-tab").parent();_.is(".add-tab-button")&&(_=(O=t.handleAddButton()).parent(),L=O.attr("href"),t.element.trigger("tab-added",[O])),t.activate(L),t.changeHash(L),q.length&&O.length&&"function"==typeof O[0].onclick&&O[0].onclick.apply(O[0]),t.moreButton.focus(),t.scrollTabList(q)});var w=t.popupmenu.menu;function k(A){var M=$(this),L=M.closest("li");if(L.is(".dismissible")&&M.is(".close")){if(A.preventDefault(),A.stopPropagation(),L.is(".dismissible")&&L.is(".has-popupmenu")&&L.is(".submenu")){var z=L.find(".wrapper").children().children(),q=[];$.each(z,function(O,_){q.push(_.children[0].href)}),t.closeDismissibleTabs(q)}else t.closeDismissibleTab(L.children("a").attr("href"));t.popupmenu.close()}}w.on("destroy.popupmenu",function T(){w.off(),t.hideFocusState(),$("#tab-container-popupmenu").removeData().remove()}).on("touchend.popupmenu touchcancel.popupmenu",".icon",k).on("click.popupmenu",".icon",k),e?t.popupmenu.highlight(w.find('a[href="'.concat(e,'"]'))):t.tablist.children(".is-selected").length>0?t.popupmenu.highlight(w.find('a[href="'.concat(t.tablist.children(".is-selected").children("a").attr("href"),'"]'))):t.popupmenu.highlight(w.find("li:first-child > a")),$(document).bindFirst("keydown.popupmenu",function(A){var G,M=A.which,L=$(A.target);function z(){return this===document.activeElement}switch(M){case 8:case 46:!function _(){!A.altKey||!L.parent().is(".dismissible")||t.closeDismissibleTab(L.attr("href"))}();break;case 37:G=o?40:38,L.is("a")&&(L.parent().is(":not(:first-child)")&&A.preventDefault(),$(document).trigger({type:"keydown.popupmenu",which:G}));break;case 38:!function q(){w.find("li:first-child > a").filter(z).length>0&&(A.preventDefault(),$(document).off(A),t.popupmenu.close(),t.findLastVisibleTab())}();break;case 39:G=o?38:40,L.is("a")&&!L.parent(".submenu").length&&$(document).trigger({type:"keydown.popupmenu",which:G});break;case 40:!function O(){var j=w.find("li:last-child > a");if(j.filter(z).length>0&&j.parent().is(":not(.submenu)")){if(A.preventDefault(),$(document).off(A),t.popupmenu.close(),t.settings.addTabButton)return void t.addTabButton.focus();if(t.hasMoreActions())return void t.moreActionsBtn.focus();t.focusFirstVisibleTab()}}()}})},isTabOverflowed:function(e){if(this.isVerticalTabs()||this.isScrollableTabs()||this.tablist.find(".arrange-dragging").length||!e)return!1;this.tablist.scrollTop()>0&&this.tablist.scrollTop(0);var t=Math.round(e[0].getBoundingClientRect().top),i=Math.round(this.tablist[0].getBoundingClientRect().top+1);return this.isModuleTabs()&&(i+=1),t>i},isHeaderTabOverflowed:function(e){return!(this.isHeaderTabs()&&null==this.settings.maxWidth||!e)&&e[0].getBoundingClientRect().right>e.parent().parent()[0].getBoundingClientRect().width},findLastVisibleTab:function(){var e=this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)"),t=e.first();if(this.isScrollableTabs())return e.last().find("a").focus();for(;!this.isTabOverflowed(t);)t=e.eq(e.index(t)+1);return e.eq(e.index(t)-1).find("a").focus()},focusFirstVisibleTab:function(){this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)").eq(0).find("a").focus()},scrollTabList:function(e){if(this.tablistContainer&&e&&e instanceof $&&e.length){var n,t=de.getDimensions(e[0]),i=de.getDimensions(this.tablistContainer[0]),o=t.left,l=t.right;o<i.left+40&&(n=-1*Math.round(Math.abs(i.left-o))-40),l>i.right-40&&(n=Math.round(Math.abs(l-i.right))+40),0===n&&(n=void 0),this.tablistContainer.smoothScroll(n,250)}},hideFocusState:function(){var e;null===(e=this.focusState)||void 0===e||e?.removeClass("is-visible")},positionFocusState:function(e,t){var i,n,a=this;if(void 0!==e?e=$(e):a.moreButton.hasClass("is-selected")?e=a.moreButton:a.tablist.children(".is-selected").length>0&&(e=a.tablist.children(".is-selected").children("a")),!e||void 0===e||!e.length||e.is(this.moreButton)&&this.isScrollableTabs()){var o;null===(o=this.focusState)||void 0===o||o?.removeClass("is-visible")}else{var l,d;if(e.is("a")&&(e=e.parent()),e.is(".add-tab-button, .tab-more"))null!==(l=this.focusState)&&void 0!==l&&null!==(l=l?.parent())&&void 0!==l&&l?.is(this.element)||null===(d=this.focusState)||void 0===d||d?.prependTo(this.element);else if(null===(i=this.focusState)||void 0===i||null===(i=i?.parent())||void 0===i||!i?.is(this.tablistContainer)){var h;null===(h=this.focusState)||void 0===h||h?.prependTo(this.tablistContainer)}e.is(".tab")&&a.settings.headerTabsTooltips&&a.checkCutOffTitle(e,this.visibleTabSize);var p=this.focusState[0],v=de.getDimensions(e[0]),b=e[0].classList,w=B.isRTL(),T=this.isVerticalTabs()?0:this.moreButton.outerWidth(!0)-8,k=this.element,A=this.tablistContainer,M=A&&(null===(n=this.focusState)||void 0===n||null===(n=n?.parent())||void 0===n?void 0:n?.is(A)),L=e[0].getBoundingClientRect().width/e[0].offsetWidth*100,z=$('html[class*="classic-"]').length>0,q=$("html.is-mac").length>0,O=k.hasClass("alternate"),_=k.hasClass("header-tabs"),G=k.hasClass("has-counts"),j=e.is(".add-tab-button"),X=e.is(".is-selected"),fe=k.is(".horizontal"),he=A?.prop("scrollHeight"),we=A?.prop("clientHeight");v=function re(ce,Be,qe,Oe){var He,Ae,ot=Be[0].getBoundingClientRect();return ce.top-=ot.top-(G?10:3),a.isVerticalTabs()&&(ce.top+=Be[0].scrollTop),w?ce.right=ot.right-ce.right:ce.left-=ot.left,qe&&(Ae=qe?Math.abs(qe[0].scrollLeft):0,ce.left+=Ae,ce.right+=Ae,w&&(ce.right-=1,a.isHeaderTabs()&&(ce.left-=T,ce.right-=T)),Oe<99&&(ce.width=100*ce.width/Oe,ce.left=100*ce.left/Oe,ce.right=100*ce.right/Oe),M&&(He=parseInt(window.getComputedStyle(Be[0])["padding".concat(w?"Right":"Left")],10),ce.left+=w?He:-1*He,ce.right+=w?He:-1*He),ce.right<0&&(ce.right=0)),!a.isHeaderTabs()&&!a.isVerticalTabs()&&!a.isModuleTabs()&&(ce.height+=4,ce.top-=9,z&&(ce.height-=4,ce.top+=5),!X&&!j&&(ce.height=36,ce.top+=1)),a.isHeaderTabs()&&!a.isVerticalTabs()&&!a.isModuleTabs()&&(ce.height-=4,ce.top-=X?2:0,w&&(ce.right-=19),!X&&!j&&(ce.height+=2,ce.top-=1),j&&(ce.height+=7,ce.top-=6,ce.left+=5,w&&(ce.right+=46))),fe&&j&&(ce.top+=1,ce.height+=4,w&&(ce.right+=1),z||(ce.top+=5,ce.height-=3,w&&(ce.height-=1))),a.isModuleTabs()&&!a.isVerticalTabs()?(ce.top-=3,ce.width-=4,ce.left+=2,z||(ce.height-=2)):ce.height-=X||z?4:5,!z&&!O&&_&&!j&&(ce.top-=9,ce.height+=2),z&&O&&_&&(ce.height-=4),a.isVerticalTabs()&&null!=A&&A?.is(".scrollable-y")&&he>we&&(ce.width-=q?5:15),ce}(v,k,A,L);var Ne="";Object.keys(v).forEach(function(ce){Ne.length&&(Ne+=" "),Ne+="".concat(ce,": ").concat(v[ce],"px;")}),p.style.cssText=Ne;var le=b.contains("is-selected")?"add":"remove";p.classList[le]("is-selected"),p.classList[!0===t?"add":"remove"]("is-visible");var ge=this.element.find(".application-menu-trigger, .tab");ge.length>0&&ge.hasClass("is-focused")&&p.classList.add("is-visible")}},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init();var t=this.tablist.data("arrange");return t&&t?.updated(),this},disableOtherTabs:function(){return this.disable(!0)},disable:function(e){e||this.element.prop("disabled",!0).addClass("is-disabled"),this.disabledElems||(this.disabledElems=[]);var t=this,i=this.tablist.children("li:not(.separator)");e&&(i=i.filter(":not(.application-menu-trigger)")),i.each(function(){var n=$(this),a=n.children("a");if(!(e&&t.isActive(a.attr("href"))||((n.is(".is-disabled")||!0===a.prop("disabled"))&&t.disabledElems.push({elem:n,originalTabindex:n.attr("tabindex"),originalDisabled:a.prop("disabled")}),n.addClass("is-disabled"),a.prop("disabled",!0),n.is(".application-menu-trigger")||n.is(".add-tab-button")))){var o=$(a.attr("href"));o.addClass("is-disabled"),o.find("*").each(function(){var l=$(this);l.is("input.dropdown, input.multiselect")||(("-1"===l.attr("tabindex")||l.attr("disabled"))&&t.disabledElems.push({elem:l,originalTabindex:l.attr("tabindex"),originalDisabled:l.prop("disabled")}),l?.disable())})}}),this.moreButton.addClass("is-disabled"),this.isModuleTabs()&&!e&&this.element.children(".toolbar").disable(),this.updateAria($())},enable:function(){this.element.prop("disabled",!1).removeClass("is-disabled");var e=this;this.tablist.children("li:not(.separator)").each(function(){var i=$(this),n=i.children("a");if(i.removeClass("is-disabled"),n.prop("disabled",!1),!i.is(".application-menu-trigger")&&!i.is(".add-tab-button")){var a=$(n.attr("href"));a.removeClass("is-disabled"),a.find("*").each(function(){var o=$(this);o.enable&&"function"==typeof o.enable&&o.enable()}),$.each(e.disabledElems,function(o,l){var d=l.elem.is(".tab")?l.elem.children("a"):l.elem;l.elem.disable&&"function"==typeof l.elem.disable&&l.elem.disable(),l.elem.is("li")?l.elem.addClass("is-disabled"):l.elem.is("input.dropdown, input.multiselect")||(l.elem.attr("tabindex",l.originalTabindex),d.prop("disabled",l.originalDisabled))})}}),this.moreButton.removeClass("is-disabled"),this.isModuleTabs()&&this.element.children(".toolbar").enable(),this.disabledElems=[],this.updateAria(this.tablist.find(".is-selected > a"))},closeDismissibleTab:function(e){return this.remove(e)},closeDismissibleTabs:function(e){var t=this;e.forEach(function(i){var n=i.match(/#.*/);return t.remove(n[0])})},teardown:function(){var e;this.panels.removeAttr("style"),this.tablist.off().removeAttr("role").removeAttr("aria-multiselectable");var t=this.tablist.children("li");if(t.off().removeAttr("role").removeClass("is-selected"),t.filter(".has-popupmenu").each(function(){var a=$(this).data("popupmenu");a&&(a.menu.children("li:not(.separator)").each(function(){var l=$(this).children("a"),d=l.data("panel-link");$.removeData(l[0],"panel-link"),d&&d.length&&$.removeData(d[0],"tab-link")}),a.destroy())}),this.panels.off(),this.anchors.off().removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabindex"),this.ro&&(this.ro.disconnect(),delete this.ro),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&this.anchors.each(function(){var a=$(this).data("tooltip");a&&"function"==typeof a.destroy&&a.destroy()}),this.element.off("focusout.tabs updated.tabs activated.tabs aftertabadded.tabs"),$("body").off("resize.tabs".concat(this.tabsIndex)),this.tabsIndex=void 0,this.moreButton.data("popupmenu")){var n=this.moreButton.data("popupmenu");n.menu.find("li:not(.separator)").each(function(){var o=$(this).children("a");o.data("original-tab")&&$.removeData(o[0],"original-tab")}),n.destroy()}return this.removeHelperMarkupEvents(),this.tablistContainer&&this.tablistContainer.off("mousewheel.tabs"),null===(e=this.focusState)||void 0===e||null===(e=e?.removeData())||void 0===e||e?.remove(),this.focusState=void 0,$(".tab-panel input").off("error.tabs valid.tabs"),this.addTabButton&&(this.settings.addTabButtonTooltip&&this.addTabButton.data("tooltip").destroy(),this.addTabButton.remove(),this.addTabButton=void 0),this.element.find(".close.icon").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],$h)}},$.fn.tabs=function(s){return this.each(function(){var e=$.data(this,$h);e?e.updated(s):(e=$.data(this,$h,new Dh(this,s)),this.element=void 0)})},$.fn.verticaltabs=$.fn.tabs,$.fn.tag=function(s){return this.each(function(){var e=$.data(this,"tag");e?e.updated(s):e=$.data(this,"tag",new Ao(this,s))})},$.fn.taglist=function(s){return this.each(function(){var e=$.data(this,Cd);e?e.updated(s):e=$.data(this,Cd,new xd(this,s))})};var rp="textarea",tv={autoGrow:!1,autoGrowMaxHeight:null,characterCounter:!0,maxLength:null,printable:!0,charRemainingText:null,charMaxText:"Character count of {0} exceeded",attributes:null};function Mh(s,e){this.settings=H.mergeSettings(s,e,tv),this.element=$(s),this.init()}Mh.prototype={init:function(){this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),this.isSafari=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Android"),this.element.addClass(this.element.is(".textarea-xs")?"input-xs":this.element.is(".textarea-sm")?"input-sm":this.element.is(".textarea-def")?"input-md":this.element.is(".textarea-lg")?"input-lg":""),this.settings.characterCounter&&this.getMaxLength()&&(this.counter=this.element.siblings(".textarea-wordcount"),0===this.counter.length&&(this.counter=$('<span class="textarea-wordcount">Chars Left..</span>').insertAfter(this.element))),this.settings.printable&&(this.printarea=$('<span class="textarea-print"></span>').insertBefore(this.element)),this.element.hasClass("autogrow")&&(this.settings.autoGrow=!0),this.setupAutoGrow(),this.handleEvents(),this.updateCounter()},isSelected:function(e){return"number"==typeof e.selectionStart?0===e.selectionStart&&e.selectionEnd===e.value.length:typeof document.selection<"u"&&document.selection.createRange().text===e.value},isPrintable:function(e,t){return t?e>64&&e<91||e>=33&&e<=38||e>=40&&e<=43||126===e||58===e||60===e||e>=123&&e<=125||94===e||95===e||e>=62&&e<=64:13===e||e>=48&&e<=57||e>=97&&e<=122||59===e||61===e||e>=44&&e<=47||96===e||e>=91&&e<=93||39===e},setupAutoGrow:function(){if(this.settings.autoGrow&&this.element.length){var e=this.element[0];this.settings.autoGrowMaxHeight&&(e.style.maxHeight="".concat(this.settings.autoGrowMaxHeight,"px")),e.style.overflow="hidden",this.autoGrow()}},autoGrow:function(){if(this.settings.autoGrow){var e=this.element[0],t=e.offSetHeight,i=this.settings.autoGrowMaxHeight||0,n=e.scrollHeight;if(i>0&&i<n){if(n=i,e.style.overflow="",t===n)return}else e.style.overflow="hidden";e.style.height="5px",e.style.height="".concat(e.scrollHeight+2,"px")}},countLinebreaks:function(e){return(e.match(/\n/g)||[]).length},updateCounter:function(){var e=this,t=e.element.val(),n=t.length+(this.isChrome||this.isSafari?this.countLinebreaks(t):0),a=e.getMaxLength(),o=parseInt(a,10)-n,l=(e.settings.charRemainingText?e.settings.charRemainingText:"CharactersLeft"===B.translate("CharactersLeft")?"Characters Left":B.translate("CharactersLeft")).replace("{0}",o.toString());e.counter&&(n>=a?(l=e.settings.charMaxText?e.settings.charMaxText.replace("{0}",a):B.translate("CharactersMax")+a,e.counter.text(l),e.counter.removeClass("almost-empty")):(e.counter.text(l),o<10?e.counter.addClass("almost-empty"):e.counter.removeClass("almost-empty"))),e.printarea.text(e.element.val())},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},disable:function(){this.enable(),this.element.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.element.prop("readonly",!0)},updated:function(e){e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.destroy(),this.init(),this.element.data("trackdirty")&&this.element.data("trackdirty")instanceof Object&&this.element.data("trackdirty").updated(),this.element.data("validate")&&this.element.data("validate")instanceof Object&&this.element.data("validate").updated()},getMaxLength:function(){return this.settings.maxLength?this.settings.maxLength:this.element.attr("maxlength")?parseInt(this.element.attr("maxlength"),10):void 0},destroy:function(){this.printarea&&this.printarea.length&&this.printarea.remove(),this.counter&&this.counter.length&&this.counter.remove(),this.element.off()},handleEvents:function(){var e=this,t=this;this.element.on("paste.textarea",function(i){var n=e.element[0].selectionStart,a=e.element[0].selectionEnd,o=e.element.val(),l=i.originalEvent.clipboardData.getData("text/plain"),d=t.getMaxLength(),h=(o.slice(0,n)+l+o.slice(a,o.length-1)).substring(0,d),p=t.isChrome||t.isSafari,v=p?t.countLinebreaks(h):0;if(h.length+(p?t.countLinebreaks(h):0)>d){var w=h.substring(0,d-v);t.element.val(w),t.updateCounter(),i.preventDefault()}}).on("keyup.textarea",function(i){var n=t.element.val(),o=n.length+(t.isChrome||t.isSafari?t.countLinebreaks(n):0),l=t.getMaxLength();return t.updateCounter(),o>=l?(i.preventDefault(),!1):(t.settings.autoGrow&&t.autoGrow(),!0)}).on("focus.textarea",function(){t.counter&&t.counter.addClass("focus")}).on("updated.textarea",function(){t.updated()}).on("keypress.textarea",function(i){var n=t.element.val(),o=n.length+(t.isChrome||t.isSafari?t.countLinebreaks(n):0),l=t.getMaxLength();[97,99,118,120].indexOf(i.which)>-1&&(i.metaKey||i.ctrlKey)?t.updateCounter():t.isPrintable(i.which,i.shiftKey)&&o>=l&&!t.isSelected(this)&&i.preventDefault()}).on("blur.textarea",function(){t.updateCounter(),t.counter&&t.counter.removeClass("focus")})}},$.fn.textarea=function(s){return this.each(function(){var e=$.data(this,rp);e?e.updated(s):e=$.data(this,rp,new Mh(this,s))})},$.fn.toolbarsearchfield=$.fn.searchfield;var Ih="trackdirty",op={};function Xd(s,e){this.settings=H.mergeSettings(s,e,op),this.element=$(s),this.init()}Xd.prototype={init:function(){this.isIe="ie"===xe.browser.name,this.isIeEdge="edge"===xe.browser.name,this.handleEvents()},valMethod:function(e,t){switch(e.attr("type")){case"checkbox":case"radio":return e.prop("checked");case"file":if("boolean"==typeof t&&t){var i=e.attr("original");return void 0!==i?i:""}return e.parent().find('[type="text"]').val();default:if(e.is("textarea")&&1===e.closest(".editor-source").length){var a=e.is(":visible")?e.val():e.text();return this.trimEditorText(a)}return e.val()}},trimEditorText:function(e){return e.trim().replace(/>\s+</g,"><").replace(/\s+/g," ").replace(" has-tooltip","").replace(/<br(\s+)?\/?>/g,"<br>\n").replace(/<\/p>(\s+)/g,"</p>\n\n").replace(/<\/blockquote>(\s+)?/g,"</blockquote>\n\n").replaceAll("&nbsp;"," ")},getAbsolutePosition:function(e){var t=e.position();return e.parents().each(function(){var i=this;if("relative"===window.getComputedStyle(i,null).position)return!1;t.left+=i.scrollLeft,t.top+=i.scrollTop}),{left:t.left,top:t.top}},unbind:function(){if(this.element.removeClass("dirty").off("resetdirty.dirty change.dirty doresetdirty.dirty"),this.settings&&"object"===rt(this.settings.d)){var e=this.settings.d;$(".icon-dirty, .msg-dirty",e.field).add(e.icon).add(e.msg).remove()}return $.removeData(this.element[0],"original"),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,op)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],Ih)},handleEvents:function(){var e=this,t=this.element;if(t.is(".editor")){var i=t.parent().find("textarea");i.data("original",this.valMethod(i))}t.data("original",this.valMethod(t,!0)).on("resetdirty.dirty",function(){if(t.is(".editor")){var n=t.parent().find("textarea");n.data("original",e.valMethod(n))}t.data("original",e.valMethod(t)).triggerHandler("doresetdirty.dirty")}).on("change.dirty doresetdirty.dirty",function(n){var a,o=t,l=t.closest(".field, .radio-group"),d=$("label:visible",l),h={class:"",style:""};if(l.is(".field-fileupload")&&(o=l.find("input.fileupload-background-transparent")),l.is(".editor-container")&&(o=l.find(".editor-source")),d[0]||(d=t.next("label")),"true"===t.attr("data-trackdirty")){if(t.addClass("dirty"),t.is('[type="checkbox"], [type="radio"]')&&(h.class+=" dirty-".concat(t.attr("type")),h.class+=t.is(":checked")?" is-checked":""),t.is("select")&&(h.class+=" is-select",o=t.next(".dropdown-wrapper").find(".dropdown")),h.icon=o.prev(),null==h||null===(a=h?.icon)||void 0===a||!a?.is(".icon-dirty")){t.is(".colorpicker")&&!B.isRTL()&&(h.rect=e.getAbsolutePosition(t),h.style="left:".concat(h.rect.left,"px; top:").concat(h.rect.top,"px;")),h.icon='<span class="icon-dirty'.concat(h.class,'"></span>'),h.msg=B.translate("MsgDirty")||"",h.msg='<span class="audible msg-dirty">'.concat(h.msg,"</span>");var p=$($(o[0].parentElement).find("input")[0]);o=t.is('[type="radio"]')?p:o,0===$(o[0].parentElement).find(".icon-dirty").length&&(o.before(h.icon),d.append(h.msg),h.style&&o.prev(".icon-dirty")[0]&&(o.prev(".icon-dirty")[0].style.cssText=h.style)),h.icon=o.prev(),h.msg=d.find(".msg-dirty")}var v=t.data("original"),b=e.valMethod(t);if(h.field=l,e.settings.d=h,l.is(".editor-container")){var w=l.find("textarea");v=w.data("original"),b=l.find(".editor-source").is(":visible")?w.val():w.text(),b=e.trimEditorText(b)}if(b===v||t.attr("multiple")&&H.equals(b,v))return t.removeClass("dirty"),$(".icon-dirty, .msg-dirty",l).add(h.icon).add(h.msg).remove(),void t.trigger("doresetdirty"===n.type?"afterresetdirty":"pristine");t.trigger("dirty")}})}},$.fn.trackdirty=function(s){return this.each(function(){var e=$.data(this,Ih);e&&e instanceof Xd?e.updated(s):e=$.data(this,Ih,new Xd(this,s))})};var qs="tree",lp={dataset:null,source:null,selectable:"single",hideCheckboxes:!1,menuId:null,useStepUI:!1,folderIconOpen:"open-folder",folderIconClosed:"closed-folder",sortable:!1,onBeforeSelect:null,onExpand:null,onCollapse:null,expandTarget:"node",useExpandTarget:!1,expandIconOpen:"plusminus-folder-open",expandIconClosed:"plusminus-folder-closed",expandPlusminusRotate:!0,showChildrenCount:!1,childrenAutoCount:!0};function Lh(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,lp),this.init()}function cp(s,e){var t=$(s),i=t.data("".concat(qs,"Api"));if(i){var n={collapse:i.collapseNode,expand:i.expandNode};"function"==typeof n[e]&&n[e].apply(i,t)}}Lh.prototype={init:function(){this.isIe11="ie"===xe.browser.name&&"11"===xe.browser.version,this.initTree(),this.handleKeys(),this.setupEvents(),-1===this.loadData(this.settings.dataset)&&(this.syncDataset(),this.initSelected(),this.focusFirst(),this.attachMenu(this.settings.menuId),this.createSortable(),this.childrenCountInit())},initTree:function(){var e=this,t=this.settings,i=this.element.find("a"),n=this.element.attr("data-selectable");t.useExpandTarget&&(t.expandTarget="icon"),t.selectable=typeof n<"u"&&("single"===n.toLowerCase()||"multiple"===n.toLowerCase())?n:t.selectable,this.isMultiselect="multiple"===t.selectable,t.hideCheckboxes=t.hideCheckboxes||!this.isMultiselect,this.element.addClass(this.isMultiselect?" is-multiselect":""),i.each(function(){var a=$(this);e.decorateNode(a)})},initSelected:function(){var e=this;[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(i){i.setAttribute("role","none"),e.setNodeStatus($(i.querySelector("a")))}),this.syncDataset()},focusFirst:function(){var e=this.element[0].querySelector("a");e&&e.setAttribute("tabindex","0")},setFocus:function(e){(e=this.isjQuery(e)?e[0]:e)&&(e.focus(),de.removeClass(e,"hide-focus"))},decorateNode:function(e,t,i,n){var a,o=(e=this.isjQuery(e)?e:$(e))[0].getAttribute("data-badge"),l=e[0].getAttribute("data-alert-icon"),d=e.parentsUntil(this.element,"ul[role=group].is-disabled").length>0,h=de.hasClass(e[0],"is-disabled")||d;if(typeof o<"u"&&(o=H.parseSettings(e,"data-badge")),e[0].setAttribute("role","treeitem"),e[0].setAttribute("tabindex","-1"),e[0].setAttribute("aria-selected","false"),h){de.addClass(e[0],"is-disabled"),e[0].setAttribute("aria-disabled","true");var p=e.next();p[0]&&"ul"===p[0].tagName.toLowerCase()&&de.hasClass(p[0],"is-open")&&([].slice.call(p[0].querySelectorAll("a")).forEach(function(_){de.addClass(_,"is-disabled"),_.setAttribute("aria-disabled","true")}),[].slice.call(e[0].parentNode.querySelectorAll("ul")).forEach(function(_){return de.addClass(_,"is-disabled")}))}a=e.parentsUntil(this.element,"ul").length-1,e[0].setAttribute("aria-level",a+1);var w=e.parent().index();e[0].setAttribute("aria-posinset",w+1);var T=e.closest("li").siblings().length+1;e[0].setAttribute("aria-setsize",T);var k=e.next("ul"),A=!1;k[0]&&k.children().length>0&&(A=de.hasClass(k[0],"is-open"),e[0].setAttribute("aria-expanded",A?"true":"false"));var M=e.contents().filter(function(){return!$(this).is(".tree-badge, .tree-children-count")}).text();e[0].textContent="",0===e.children("svg.icon-tree").length&&(e[0].insertAdjacentHTML("afterbegin",t||""===t?$.createIcon({icon:t,classes:["icon-tree"]}):$.createIcon({icon:"tree-node",classes:["icon-tree"]})),this.settings.useStepUI&&e[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:l,classes:["step-alert","icon-".concat(l)]}))),k[0]&&e[0].insertAdjacentHTML("beforeend",this.getExpandTargetHtml(A)),this.isMultiselect&&(!this.settings.hideCheckboxes||!1===i)&&e[0].insertAdjacentHTML("beforeend",'<span class="tree-checkbox"></span>');var L=this.getBadgeHtml(o);""!==L&&e[0].insertAdjacentHTML("beforeend",L);var z=document.createElement("span");if(de.addClass(z,"tree-text"),z.textContent=M,z.innerHTML.indexOf("&lt;svg")>0&&(z.innerHTML=Fe.unescapeHTML(z.innerHTML)),e[0].appendChild(z),k[0]&&e[0].insertAdjacentHTML("beforeend",this.getChildrenCountHtml(n)),this.hasIconClass(e)&&this.setTreeIcon(e.find("svg.icon-tree"),e[0].getAttribute("class")),k[0]&&"ul"===k[0].tagName.toLowerCase()){var q=e[0].getAttribute("class");if(this.settings.useExpandTarget&&q&&!n){var O=q.match(/(icon-)[^\s]+/g);O&&(n={icon:O[0]})}k[0].setAttribute("role","group"),de.addClass(k[0].parentNode,"folder"),this.setFolderIcon(e,de.hasClass(k[0],"is-open"),n),q&&-1===q.indexOf("open")&&-1===q.indexOf("closed")&&(h&&de.addClass(e[0],"is-disabled"),this.setFolderIcon(e,de.hasClass(k[0],"is-open"),n)),this.hasIconClass(e)&&(q=e[0].getAttribute("class"),(/open|close/g.test(q)||!k[0]||this.settings.useExpandTarget)&&this.setTreeIcon(e.find("svg.icon-tree"),de.hasClass(k[0],"is-open")?q:q.replace("open","closed")))}e.hideFocus()},setTreeIcon:function(e,t){if(e&&"string"==typeof t){e=this.isjQuery(e)?e:$(e);var i=t.replace(/#?icon-|hide-focus|is-selected|is-active|\s?/gi,"");e.changeIcon(i)}},expandAll:function(e){var t=this,i=e;(i=typeof i<"u"?this.isjQuery(i)?$.makeArray(i):i:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach(function(n){var a=n.previousElementSibling;if(de.addClass(n.parentNode,"is-open"),de.addClass(n,"is-open"),n.style.height="",a&&"a"===a.tagName.toLowerCase()){var o=a.querySelector("svg.icon-tree");t.setTreeIcon(o,t.settings.folderIconOpen),a.setAttribute("aria-expanded",!0),t.hasIconClass(a)&&t.setTreeIcon(o,a.getAttribute("class"))}})},collapseAll:function(e){var t=this,i=e;(i=typeof i<"u"?this.isjQuery(i)?$.makeArray(i):i:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach(function(n){var a=n.previousElementSibling;if(de.removeClass(n.parentNode,"is-open"),de.removeClass(n,"is-open"),n.style.height=0,a&&"a"===a.tagName.toLowerCase()){var o=a.querySelector("svg.icon-tree");t.setTreeIcon(o,t.settings.folderIconClosed),a.setAttribute("aria-expanded",!1),de.removeClass(a,"is-selected"),t.hasIconClass(a)&&t.setTreeIcon(o,a.getAttribute("class").replace("open","closed"))}})},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},selectNodeById:function(e){this.selectNodeByJquerySelector("#".concat(e))},selectNodeByJquerySelector:function(e){var t=this.isjQuery(e)?e:$(e);if(t.length&&!t.is(".is-disabled")){var i=t.parentsUntil(this.element,"ul[role=group]");this.expandAll(i),this.selectNode(t,!0)}},unSelectedNode:function(e,t){if(0!==e.length){var i=this;$("a",this.element).attr("tabindex","-1"),e.attr("tabindex","0"),$("a:not(.is-disabled)",e.parent()).attr("aria-selected","false").parent().removeClass("is-selected"),this.syncNode(e),this.setNodeStatus(e),t&&e.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(o){return de.removeClass(o,"is-active")}),de.addClass(e[0].parentNode,"is-active"),setTimeout(function(){var o=e.data("jsonData")||{};i.element.triggerHandler("unselected",{node:e,data:o})},0)}},selectNode:function(e,t){var a,i=this,n=this.settings;0!==e.length&&("function"==typeof n.onBeforeSelect?(a=n.onBeforeSelect(e))&&a.done&&"function"==typeof a.done?a.done(function(o){o&&i.selectNodeFinish(e,t)}):a&&i.selectNodeFinish(e,t):i.selectNodeFinish(e,t))},selectNodeFinish:function(e,t,i){if((this.isMultiselect||"icon"===this.settings.expandTarget)&&i)if("click"===i.type||"touch"===i.type){if(de.hasClass(i.target,"icon")&&de.hasClass(e[0].parentNode,"folder"))return}else if("keydown"===i.type){var n=i.charCode||i.keyCode;if(37===n||39===n)return}var a=this,o=[].slice.call(this.element[0].querySelectorAll("a"));if(o.forEach(function(h){return h.setAttribute("tabindex","-1")}),e[0].setAttribute("tabindex","0"),this.isMultiselect)[].slice.call(e[0].parentNode.querySelectorAll("a:not(.is-disabled)")).forEach(function(h){h.setAttribute("aria-selected","true"),de.addClass(h,"is-selected"),de.addClass(h.parentNode,"is-selected")});else{if(de.hasClass(e[0],"is-selected"))return;o.forEach(function(h){var p=$(h),v=p.data("jsonData");v&&(delete v.selected,p.data("jsonData",v)),h.setAttribute("aria-selected","false"),de.removeClass(h,"is-selected"),de.removeClass(h.parentNode,"is-selected")}),e[0].setAttribute("aria-selected","true"),de.addClass(e[0],"is-selected"),de.addClass(e[0].parentNode,"is-selected")}this.syncNode(e),this.loading||this.setNodeStatus(e),t&&e.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach(function(h){return de.removeClass(h,"is-active")}),de.addClass(e[0].parentNode,"is-active"),setTimeout(function(){var h=e.data("jsonData")||{};a.element.triggerHandler("selected",{node:e,data:h})},0)},setNodeStatus:function(e){var n,t=this,i=e.data("jsonData");if(this.isMultiselect){var l=function(p,v){p.forEach(function(b){var w=$(b.querySelector("a")),T=t.getSelectedStatus(w,v);"mixed"===T?(de.removeClass(b,"is-selected","is-partial"),de.addClass(b,"is-partial")):T?(de.removeClass(b,"is-selected","is-partial"),de.addClass(b,"is-selected")):de.removeClass(b,"is-selected","is-partial"),t.syncNode(w)})},d=!1;l(n=[].slice.call(e[0].parentNode.querySelectorAll("li.folder")),d),d=!(!n.length&&i&&!i.selected),n=e.parentsUntil(this.element,"li.folder"),l(n=[].slice.call(n.toArray()),d)}else{var a=e[0],o=a.parentNode;i&&i.selected?(de.addClass(o,"is-selected"),de.addClass(a,"is-selected"),a.setAttribute("aria-selected",!0)):(de.removeClass(o,"is-selected","is-partial"),de.removeClass(a,"is-selected","is-partial"),a.setAttribute("aria-selected",!1))}},getSelectedStatus:function(e,t){var o,i=0,n=0,a=0;return e.parent().find("a").each(function(d){t&&0===d||(i++,(o=$(this).data("jsonData"))&&o.selected?n++:a++)}),i===n||i!==a&&"mixed"},getNodeAsJQ:function(e){return"string"==typeof e?$("#".concat(e)):this.isjQuery(e)?e:$(e)},expandNode:function(e,t){var i=this.getNodeAsJQ(e),n=!this.isTrue(t);this.toggleNode(i,null,{isExpandNode:!0,noSelect:n})},collapseNode:function(e,t){var i=this.getNodeAsJQ(e),n=!this.isTrue(t);this.toggleNode(i,null,{isExpandNode:!1,noSelect:n})},toggleNode:function(e,t,i){var l,n=e.next(),a=this,o=this.settings;if(n[0]&&"ul"===n[0].tagName.toLowerCase()&&"group"===n[0].getAttribute("role")){var h=e.find("svg.icon-tree").getIconName(),p=function(T){if("function"==typeof o.onCollapse)(l=o.onCollapse(e))&&l.done&&"function"==typeof l.done?l.done(function(q){q&&!T&&a.selectNodeFinish(e,focus,t)}):l&&!T&&a.selectNodeFinish(e,focus,t);else if("icon"!==o.expandTarget||T)T||a.selectNodeFinish(e,focus,t);else{var k=e[0].parentNode;t&&de.hasClass(t.target,"icon")&&de.hasClass(k,"folder")&&a.selectNodeFinish(e,focus,t)}if(e.closest(".folder").removeClass("is-open"),h===o.folderIconOpen||o.useExpandTarget)a.setFolderIcon(e,!1,!1,o.expandPlusminusRotate);else if(/open|close/g.test(h)&&!o.useExpandTarget){var A=h.replace("open","closed");T||(A=A.replace(/\s?is-selected/,"")),a.setTreeIcon(e.find("svg.icon-tree"),A)}var M=e.closest(".folder a");if(a.hasIconClass(M)){var L=M.attr("class");if(/open|close/g.test(L)||o.useExpandTarget){var z=L.replace("open","closed");T||(z=z.replace(/\s?is-selected/,"")),a.setTreeIcon(M.find("svg.icon-tree"),z)}}a.isAnimating=!0,!a.isMultiselect&&"icon"===!o.expandTarget&&!T&&(a.unSelectedNode(e.parent().find("li.is-selected"),!1),de.removeClass(e[0],"is-selected")),n.one("animateclosedcomplete",function(){de.removeClass(n[0],"is-open"),a.isAnimating=!1}).animateClosed(),e[0].setAttribute("aria-expanded","true"!==e[0].getAttribute("aria-expanded")),a.element.triggerHandler("collapsed",{node:e,data:e.data("jsonData")})},v=function(T){if("function"==typeof o.onExpand)(l=o.onExpand(e))&&l.done&&"function"==typeof l.done?l.done(function(q){q&&!T&&a.selectNodeFinish(e,focus,t)}):l&&!T&&a.selectNodeFinish(e,focus,t);else if("icon"!==o.expandTarget||T)T||a.selectNodeFinish(e,focus,t);else{var k=e[0].parentNode;t&&de.hasClass(t.target,"icon")&&de.hasClass(k,"folder")&&a.selectNodeFinish(e,focus,t)}var A=e.data("jsonData");if(o.source&&A.children&&0===A.children.length){var L={node:e,data:e.data("jsonData")};return de.addClass(e[0],"is-loading"),a.loading=!0,a.settings.source(L,function(O){var G=a.findById(A.id);G.children=O,a.addChildNodes(G,e.parent()),de.removeClass(e[0],"is-loading"),a.loading=!1,a.accessNode(n,e),A.children=O,e.data("jsonData",A),e.data("".concat(qs,"Api"),a),de.hasClass(e[0].parentNode,"folder")&&a.childrenCountInit(e[0].parentNode),!a.isMultiselect&&"icon"===!o.expandTarget&&!T&&a.selectNode(e,!0),T||a.initSelected()}),void a.element.triggerHandler("expanded",{node:e,data:e.data("jsonData")})}if(h===o.folderIconClosed||o.useExpandTarget)a.setFolderIcon(e,!0,!1,o.expandPlusminusRotate);else if(/open|close/g.test(h)&&!o.useExpandTarget){var z=h.replace("closed","open");T||(z=z.replace(/\s?is-selected/,"")),a.setTreeIcon(e.find("svg.icon-tree"),z)}a.accessNode(n,e),a.element.triggerHandler("expanded",{node:e,data:e.data("jsonData")})};if("object"===rt(i)&&function(T){var k=!1;if("boolean"==typeof T)k=!0;else if("string"==typeof T){var A=T.toLowerCase();("true"===A||"false"===A)&&(k=!0)}return k}(i.isExpandNode))if(i.isExpandNode){v(i.noSelect);var b=e.parentsUntil(this.element,"ul[role=group]");this.expandAll(b)}else p(i.noSelect);else de.hasClass(n[0],"is-open")?p():v()}},accessNode:function(e,t){var i=this,n=t.attr("class");t.closest(".folder").addClass("is-open");var a=t.find("svg.icon-tree").getIconName();if(a===this.settings.folderIconClosed||this.settings.useExpandTarget?this.setFolderIcon(t,!0,!1,this.settings.expandPlusminusRotate):/open|close/g.test(a)&&!this.settings.useExpandTarget&&this.setTreeIcon(t.find("svg.icon-tree"),a.replace("closed","open").replace(/\s?is-selected/,"")),this.hasIconClass(n)){var o=e[0]&&"ul"===e[0].tagName.toLowerCase();(/open|close/g.test(n)||!o||this.settings.useExpandTarget)&&this.setTreeIcon(t.find("svg.icon-tree"),n.replace("is-selected",""))}this.isAnimating=!0,e.one("animateopencomplete",function(){i.isAnimating=!1}).addClass("is-open").css("height",0).animateOpen(),t[0].setAttribute("aria-expanded","true"!==t[0].getAttribute("aria-expanded"))},openNode:function(e,t){var i=this,n=t.data("jsonData");if(i.settings.source&&n.children&&0===n.children.length){var o={node:t,data:t.data("jsonData")};return t.addClass("is-loading"),i.loading=!0,void i.settings.source(o,function(d){var p=i.findById(n.id);p.children=d,i.addChildNodes(p,t.parent()),t.removeClass("is-loading"),i.loading=!1,i.accessNode(e,t),n.children=d,t.data("jsonData",n),t.data("".concat(qs,"Api"),i),i.selectNode(t,!0),i.initSelected()})}i.accessNode(e,t)},hasIconClass:function(e){return"string"!=typeof e&&(this.isjQuery(e)&&(e=e.length>1?e.first()[0]:e[0]),e=e.getAttribute("class")),e&&e.indexOf("icon")>-1},closeNode:function(e,t){var i=this;i.setTreeIcon(t.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),i.settings.folderIconClosed),i.hasIconClass(t.closest(".folder a"))&&i.setTreeIcon(t.closest(".folder a").find("svg.icon-tree"),t.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),i.isAnimating=!0,i.isMultiselect||(i.unSelectedNode(t.parent().find("li.is-selected"),!1),t.removeClass("is-selected")),e.one("animateclosedcomplete",function(){e.removeClass("is-open"),i.isAnimating=!1}).animateClosed(),t.attr("aria-expanded","true"!==t.attr("aria-expanded"))},setupEvents:function(){var e=this;e.element.on("updated.tree",function(t,i){e.updated(i),e.initTree()})},handleKeys:function(){var e=this;this.element.on("click.tree","a:not(.is-clone)",function(t){var i=$(this),n=this.parentNode;return H.clearSelection(),!de.hasClass(i[0],"is-disabled")&&!de.hasClass(i[0],"is-loading")&&(e.isMultiselect||"icon"===e.settings.expandTarget?de.hasClass(t.target,"icon")&&de.hasClass(n,"folder")?e.toggleNode(i,t):de.hasClass(n,"is-selected")||de.hasClass(n,"is-partial")?e.unSelectedNode(i,!0):e.selectNode(i,!0):(e.selectNode(i,!0),e.toggleNode(i,t)),t.stopPropagation()),e.popupEl&&e.popupEl.data("popupmenu")&&(e.popupEl.data("popupmenu").close(),e.popupEl=null),e.syncDataset(),!1}),this.element.on("focus.tree","a",function(){if(0===parseInt(this.getAttribute("aria-level"),10)&&1===parseInt(this.getAttribute("aria-posinset"),10)&&de.hasClass(this,"is-disabled")){var t=$.Event("keydown.tree");return t.keyCode=40,void $(this).trigger(t)}}),this.element.on("keydown.tree","a",function(t){var a,o,i=t.charCode||t.keyCode,n=$(this);if(!e.isAnimating){if(40===i){var l=e.getNextNode(n);e.setFocus(l)}if(38===i){var d=e.getPreviousNode(n);e.setFocus(d)}if(32===t.keyCode&&n.trigger("click.tree"),37===i)return B.isRTL()?n.next().hasClass("is-open")?(o=n.next().find("a:first"),e.setFocus(o)):e.toggleNode(n,t):n.next().hasClass("is-open")?e.toggleNode(n,t):(o=n.closest(".folder").find("a:first"),e.setFocus(o)),t.stopPropagation(),!1;if(39===i)return B.isRTL()?n.next().hasClass("is-open")?e.toggleNode(n,t):(a=n.closest(".folder").find("a:first"),e.setFocus(a)):n.next().hasClass("is-open")?(a=n.next().find("a:first"),e.setFocus(a)):(e.toggleNode(n,t),e.setFocus(n)),t.stopPropagation(),!1;36===i&&(a=e.element.find("a:first:visible"),e.setFocus(a)),35===i&&(a=e.element.find("a:last:visible"),e.setFocus(a))}}),this.element.on("keypress.tree","a",function(t){var i=t.charCode||t.keyCode,n=$(this);if(i>=37&&i<=40||32===i)return t.stopPropagation(),!1;0!==t.which&&n.closest("li").nextAll().find("a:visible").each(function(){var a=$(this);if(a.text().substr(0,1).toLowerCase()===String.fromCharCode(t.which).toLowerCase())return e.setFocus(a),!1})})},loadData:function(e){if(!e)return-1;var t=this;t.element.empty(),t.loading=!0,e=this.arrangeDataset(e);var i="";t.jsonData=[];for(var n=0,a=e.length;n<a;n++)i+=t.getNodeHtml(e[n],n);t.element[0].insertAdjacentHTML("beforeend",i),[].slice.call(t.element[0].querySelectorAll('a[role="treeitem"]')).forEach(function(v,b){var w=$(v),T=t.jsonData[b];w.data("jsonData",T),w.data("".concat(qs,"Api"),t),T.selected&&t.selectNode(w,T.focus),t.addAutomationAttributes(w,T),w.is(".hide-focus")&&w.hideFocus()});for(var l=[].slice.call(t.element[0].querySelectorAll("select.dropdown")),d=0;d<l.length;d++){var h=l[d];t.jsonData[d].disabled?$(h).dropdown().disable():$(h).dropdown().on("selected.tree",function(){var v=t.findById(this.parentElement.previousElementSibling.id);v.text=this.value,t.updateNode(v)})}t.jsonData=void 0,t.loading=!1,t.syncDataset(),t.initSelected(),t.focusFirst(),t.attachMenu(t.settings.menuId),t.createSortable(),this.childrenCountInit()},arrangeDataset:function(e){if(!this.hasKeyInData("parent",e))return e;e=e||this.settings.dataset;var t=JSON.parse(JSON.stringify(e)),i=function(l){var d=!1,h=function(b){b.children=b.children||[],b.children.push(l),d=!0};!function v(b){for(var w=0;w<b.length&&!d;w++)b[w].id===l.parent&&h(b[w]),typeof b[w].children<"u"&&v(b[w].children)}(t)};return function o(l){for(var d=0;d<l.length;d++)typeof l[d].parent<"u"&&i(l[d]),typeof l[d].children<"u"&&o(l[d].children)}(e),function o(l,d){for(var h=0;h<l.length;h++)typeof l[h].children<"u"&&o(l[h].children,l[h].id),typeof d>"u"&&typeof l[h].parent<"u"||typeof d<"u"&&typeof l[h].parent<"u"&&d!==l[h].parent?(l.splice(h,1),h--):delete l[h].parent}(t),this.settings.dataset=t,t},hasKeyInData:function(e,t){for(var i=!1,n=function l(d){for(var h in d)if(d.hasOwnProperty(h)){var p=d[h];if("object"!==rt(p)||i?e===h&&(i=!0):l(p),i)break}},a=0,o=(t=t||this.settings.dataset).length;a<o&&!i;a++)n(t[a]);return i},getNodeHtml:function(e,t,i,n){var a="",o="";i=i||0,t+=1;var l=this.settings,d=n||e.disabled||!1,h=e.children&&Array.isArray(e.children),p=e.custom?e.color:"".concat(e.color,"07"),v={id:typeof e.id<"u"?' id="'.concat(e.id,'"'):"",href:' href="'.concat(typeof e.href<"u"?e.href:"#",'"'),expanded:' aria-expanded="'.concat(e.open?"true":"false",'"'),icon:e.icon||""===e.icon?e.icon:"tree-node",alertIcon:"",alertIconAttr:typeof e.alertIcon<"u"?' data-alert-icon="'.concat(e.alertIcon,'"'):"",text:'<span class="tree-text">'.concat(e.text,"</span>"),class:["hide-focus"],ariaDisabled:d?'aria-disabled="true"':"",checkbox:!this.isMultiselect||this.settings.hideCheckboxes&&!1!==e.hideCheckbox?"":'<span class="tree-checkbox '.concat(p||"",'"></span>'),badge:"object"===rt(e.badge)?this.getBadgeHtml(e.badge):"",expandTarget:h?this.getExpandTargetHtml(e.open):"",childrenCount:h?this.getChildrenCountHtml(e):""};this.jsonData.push(e),l.useStepUI&&(v.alertIcon='<svg class="icon step-alert icon-'.concat(e.alertIcon,'" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-').concat(e.alertIcon,'"></use>'));var b=h?"folder":"";if(""!=(b+=e.selected?" is-selected":"")&&(b=' class="'.concat(b+=e.open?" is-open":"",'"')),d&&v.class.push("is-disabled"),e.icon&&(v.icon=e.icon,(!h||h&&/open|closed/i.test(e.icon))&&v.class.push(e.icon)),h&&(!l.useExpandTarget||l.useExpandTarget&&!e.icon)&&(e.open?(v.icon=e.icon&&/open|closed/i.test(e.icon)?e.icon:l.folderIconOpen,n=d):v.icon=e.icon&&/open|closed/i.test(e.icon)?e.icon.replace("open","closed"):l.folderIconClosed),v.icon="#icon-".concat(v.icon.replace(/^#?icon-?/,"")),v.class=' class="'.concat(v.class.join(" "),'"'),v.style="","dropdown"===e.type&&(v.style='style="display: none"',e.data)){a='<select class="dropdown" close-on-select="true">';for(var w=0;w<e.data.length;w++){var T=e.data[w];T.value===e.text?(o=T.text,a+='<option value="'.concat(T.value,'" selected>').concat(T.text,"</option>")):a+='<option value="'.concat(T.value,'">').concat(T.text,"</option>")}a+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(o),a='<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(a+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',"</div>")}var k="\n      <li".concat(b,'>\n        <a role="treeitem" aria-selected="false" tabindex="-1" ').concat(v.style,'\n          aria-level="').concat(i,'"\n          aria-position="').concat(t,'"\n          aria-setsize="').concat(t,'"\n          ').concat(v.id+v.href+v.class+v.expanded+v.ariaDisabled+v.alertIconAttr,'>\n            <svg class="icon-tree icon" focusable="false" aria-hidden="true" role="presentation"><use href="').concat(v.icon,'"></use>\n            </svg>').concat(v.expandTarget+v.checkbox+v.alertIcon+v.badge+v.text+v.childrenCount,"\n        </a>\n        ").concat(a);if(h){k+='<ul class="folder'.concat(e.open?" is-open":"",'" role="group">');for(var A=0,M=e.children.length;A<M;A++)k+=this.getNodeHtml(e.children[A],A,i+1,n);k+="</ul>"}return k+"</li>"},getExpandTargetHtml:function(e){var t="";if(this.settings.useExpandTarget){var i="icon-expand-target",n=e?{icon:this.settings.expandIconOpen,class:"open"}:{icon:this.settings.expandIconClosed,class:"close"};t=$.createIcon({icon:n.icon,classes:[i,"".concat(i,"-").concat(n.class)]})}return t},getChildrenCountHtml:function(e){var t="";return this.settings.showChildrenCount&&(t='<span class="tree-children-count">\n          (<span class="tree-children-count-text">'.concat(this.getDataChildrenCount(e),"</span>)\n        </span>")),t},getDataChildrenCount:function(e){return e&&/string|number/.test(rt(e.childrenCount))?parseInt(e.childrenCount,10):0},getActualChildrenCount:function(e){var t=0;if(e){var i=e.nextElementSibling;i&&"ul"===i.tagName.toLowerCase()&&(t=i.childElementCount)}return t},updateChildrenCount:function(e,t){if(e){var i=e.querySelector(".tree-children-count-text");i&&(0===(t=/string|number/.test(rt(t))?parseInt(t,10):this.getActualChildrenCount(e))&&parseInt(i.textContent,10)>0&&"function"==typeof this.settings.source&&!de.hasClass(e.nextElementSibling,"is-open")||(i.textContent=t))}},updateAutoChildrenCount:function(e){var t=this;this.settings.showChildrenCount&&e&&[].slice.call(e.querySelectorAll("a")).forEach(function(n){return t.updateChildrenCount(n)})},childrenCountInit:function(e){var t=this;e=this.isjQuery(e=e||this.element)?e[0]:e,this.settings.showChildrenCount&&e&&(this.settings.childrenAutoCount?this.updateAutoChildrenCount(e):[].slice.call(e.querySelectorAll("a[data-children-count]")).forEach(function(n){var a=n.getAttribute("data-children-count");typeof a<"u"&&t.updateChildrenCount(n,a)}))},setFolderIcon:function(e,t,i,n){var a=this.settings,o=this.isjQuery(e)?e:$(e);if(e=o[0]){var d,l={el:{tree:e.querySelector("svg.icon-tree"),expand:e.querySelector("svg.icon-expand-target")},icon:t?{tree:a.folderIconOpen,expand:a.expandIconOpen,rotate:"forward"}:{tree:a.folderIconClosed,expand:a.expandIconClosed,rotate:"backward"}};a.useExpandTarget?(d={el:l.el.expand,icon:l.icon.expand,rotateClass:"rotate-".concat(l.icon.rotate)},this.setTreeIcon(d.el,d.icon),n&&this.rotatePlusminus(d),(!(i=i||o.data("jsonData"))||i&&!i.icon)&&this.setTreeIcon((d={el:l.el.tree,icon:l.icon.tree}).el,d.icon)):this.setTreeIcon((d={el:l.el.tree,icon:l.icon.tree}).el,d.icon)}},rotatePlusminus:function(e){this.settings.useExpandTarget&&this.settings.expandPlusminusRotate&&(de.addClass(e.el,e.rotateClass),$(e.el).one("webkitAnimationEnd.tree oAnimationEnd.tree msAnimationEnd.tree animationend.tree",function(){de.removeClass(e.el,e.rotateClass)}))},getBadgeHtml:function(e){var t={html:"",style:"",class:["badge","tree-badge"]};return e&&!e.remove&&(t.text="",typeof e.text<"u"&&(t.text=e.text.toString(),1===t.text.length&&t.class.push("round")),/info|good|error|alert|pending/i.test(e.type)?t.class.push(e.type):e.type&&"#"===e.type.charAt(0)&&7===e.type.length&&(t.style="background-color: ".concat(e.type," !important;")),e.backColor&&(t.style="background-color: ".concat(e.backColor," !important;")),e.foreColor&&(t.style+="color: ".concat(e.foreColor," !important;")),""!==t.style&&(t.style=' style="'.concat(t.style,'"')),""!==t.text&&(e.type&&-1!==e.type.indexOf("pending")&&(t.text=""),t.html='<span class="'.concat(t.class.join(" "),'"').concat(t.style,">").concat(t.text,"</span>"))),t.html},addToDataset:function(e,t){var i,n,a;if(e.parent&&(i=this.findById(e.parent)),t instanceof jQuery&&t.is("li")){var o=(n=this.findById($(t[0].parentNode.parentNode).find("a")[0].id)).children||n.node.data("jsonData").children;a=o.findIndex(function(l){return l.text.trim()===$(t).text().trim()}),o.splice(a,0,e)}return"bottom"===t&&!e.parent&&!i&&this.settings.dataset.push(e),"top"===t&&!e.parent&&!i&&this.settings.dataset.unshift(e),e.parent&&i&&(i.children||(i.children=[]),"bottom"===t?i.children.push(e):i.children.unshift(e)),!(e.parent&&!i)},findById:function(e,t){for(var n in t||(t=this.settings.dataset),t){var a,o,l,d=t[n];if(d.id===e)return d;if(d.children||null!==(a=d.node)&&void 0!==a&&null!==(a=null==(o=a)?void 0:o.data("jsonData"))&&void 0!==a&&null!=(l=a)&&l.children){var h,p,v,b=this.findById(e,d.children||(null===(h=d.node)||void 0===h||null===(h=null==(p=h)?void 0:p.data("jsonData"))||void 0===h||null==(v=h)?void 0:v.children));if(b)return b}}return null},getNodeByIdIfSelected:function(e,t){var i=this.findById(e,t);return i&&i.selected?i:null},getSelectedNodes:function(){var e,t,i=[];return $("li.is-selected",this.element).each(function(){e=$("a:first",this),t=e.data("jsonData"),i.push({node:e,data:t})}),i},getUnselectedNodes:function(){var e,t,i=[];return $("li:not(.is-selected)",this.element).each(function(){e=$("a:first",this),t=e.data("jsonData"),i.push({node:e,data:t})}),i},getNextNode:function(e){var t=e.parent().next().find("a:first"),i=e.next();if(i.is("ul.is-open")&&(t=i.find("a:first")),t.hasClass("is-disabled")&&(t=t.parent().next().find("a:first")),0===t.length)for(var n=0,o=e;n<1e3&&!(t=(o=o.parent().closest(".folder")).next().find("a:first")).length;n++);return t.hasClass("is-disabled")&&(t=this.getNextNode(t)),t},getPreviousNode:function(e){var t=e.parent().prev().find("a:first"),i=t.parent();return i.is(".folder.is-open")&&i.find("ul.is-open a").length&&!i.find("ul.is-disabled").length&&(t=i.find("ul.is-open a:last")),t.hasClass("is-disabled")&&(i=(t=t.parent().prev().find("a:first")).parent()).is(".folder.is-open")&&i.find("ul.is-open a").length&&!i.find("ul.is-disabled").length&&(t=i.find("ul.is-open a:last")),0===t.length&&(t=e.closest("ul").prev("a")),t.hasClass("is-disabled")&&(t=this.getPreviousNode(t)),t},syncDataset:function(e){var t=[],i=this;[].slice.call((e=e||this.element).children("li").toArray()).forEach(function(a){var o=a.querySelector("a");o&&t.push(i.syncNode(o))}),this.settings.dataset=t,this.element.triggerHandler("rendered",{data:this.settings.dataset})},syncNode:function(e){var i,t=this,n=this.isjQuery(e)?e:$(e);if(e=n[0]){var a=e.parentNode,o=function(T,k){return de.hasClass(T,k)};i={node:n,id:e.getAttribute("id"),text:e.querySelector(".tree-text").textContent},(o(e,"is-open")||a&&"li"===a.tagName.toLowerCase()&&o(a,"is-open"))&&(i.open=!0);var l=e.getAttribute("href");l&&(i.href=l),o(a,"is-selected")&&(i.selected=!0),o(e,"is-disabled")&&(i.disabled=!0);var d=e.getAttribute("class");d&&d.indexOf("icon")>-1&&(i.icon=d.replace(/\s?hide-focus\s?/g,""));var h=n.next();h[0]&&"ul"===h[0].tagName.toLowerCase()&&(i.children=[],[].slice.call(h.children("li").toArray()).forEach(function(w){var T=w.querySelector("a");T&&i.children.push(t.syncNode(T))}));var v=n.data("jsonData");v&&(delete v.selected,delete v.children,i=$.extend({},v,i));var b=H.parseSettings(n,"data-automation-attributes");b.attributes&&v&&(H.extend(v,b),this.addAutomationAttributes(n,v)),n.data("jsonData",i),n.data("".concat(qs,"Api"),t)}return i},addAutomationAttributes:function(e,t){if((e=this.isjQuery(e)?e:$(e)).length&&t.attributes){var i=e.find(".tree-text"),n=e.find(".icon-tree"),a=e.find(".icon-expand-target"),o=e.find(".tree-checkbox");H.addAttributes(e,this,t.attributes,"tree-link"),H.addAttributes(i,this,t.attributes,"tree-link-text"),H.addAttributes(n,this,t.attributes,"tree-icon"),H.addAttributes(a,this,t.attributes,"tree-icon-expand-target"),H.addAttributes(o,this,t.attributes,"tree-checkbox")}},addNode:function(e,t,i){var a,o,l,d,n=this,h="object"===rt(e.badge)?JSON.stringify(e.badge):e.badge;e.href=typeof e.href<"u"?e.href:"#",t=t||"bottom";var p=document.createElement("a");typeof e.id<"u"&&p.setAttribute("id",e.id),p.setAttribute("href",e.href),typeof h<"u"&&p.setAttribute("data-badge",h),typeof e.alertIcon<"u"&&p.setAttribute("data-alert-icon",e.alertIcon),e.text&&(p.textContent=/&#?[^\s].{1,9};/g.test(e.text)?Fe.unescapeHTML(e.text):e.text),e.disabled&&de.addClass(p,"is-disabled"),e.icon&&de.addClass(p,e.icon);var v=document.createElement("li");if(v.setAttribute("role","none"),d=v,e.open&&de.addClass(v,"is-open"),v.appendChild(p),"dropdown"===e.type&&(p.setAttribute("style","display: none"),e.data)){o='<select class="dropdown" close-on-select="true">';for(var b=0;b<e.data.length;b++)(l=e.data[b]).value===e.text?(a=l.text,o+='<option value="'.concat(l.value,'" selected>').concat(l.text,"</option>")):o+='<option value="'.concat(l.value,'">').concat(l.text,"</option>");o+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(a),o+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',$('<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(o,"</div>")).appendTo(v),e.disabled?$(v).find("select.dropdown").dropdown().disable():$(v).find("select.dropdown").dropdown().on("selected.tree",function(){var A=n.findById(this.parentElement.previousElementSibling.id);A.text=this.value,n.updateNode(A)})}var T,w=!!this.loading||this.addToDataset(e,t);if(e.parent instanceof jQuery&&(w=!0),t&&(T="string"!=typeof t||/^(top|bottom|before|after)$/g.test(t)?t instanceof jQuery?t:$(t):$(/\.|#/.test(t[0])?t:"#".concat(t)).first()).length&&("before"===i&&($(v).insertBefore(T.is("li")?T:T.closest("li")),w=!0),"after"===i&&($(v).insertAfter(T.is("li")?T:T.closest("li")),w=!0),"top"===i&&T.is("ul")&&(T.prepend(v),w=!0)),t instanceof jQuery&&(!e.parent||!w)&&!(e.parent instanceof jQuery)&&!/^(top|bottom|before|after)$/g.test(i)&&(t[0].appendChild(v),w=!0),"bottom"===t&&(!e.parent||!w)&&this.element[0].appendChild(v),"top"===t&&(!e.parent||!w)&&this.element.prepend(v),e.parent){var k="top"===t?t:null;w&&"string"==typeof e.parent&&(v=this.element.find("#".concat(e.parent)).parent(),!e.disabled&&v.is(".is-selected")&&typeof e.selected>"u"&&(e.selected=!0),d=this.addAsChild(e,v,k)),e.parent&&e.parent instanceof jQuery&&(v=e.parent,e.parent.is("a")&&(v=e.parent.parent()),d=this.addAsChild(e,v,k)),this.isjQuery(v)&&(e.node=v.find("ul li a#".concat(e.id)))}else typeof e.tempidsparent<"u"&&(e.parent=e.tempidsparent,delete e.tempidsparent),v=$(v),this.addChildNodes(e,v),e.node=v.children("a").first();return p=$(p),this.decorateNode(p,e.icon,e.hideCheckbox,e),this.childrenCountInit(p.parentsUntil(this.element,".folder:last")),e.selected&&this.selectNode(p,e.focus),p.data("jsonData",e),p.data("".concat(qs,"Api"),n),this.addAutomationAttributes(p,e),this.createSortable(),$(d)},addAsChild:function(e,t,i){var n=(t=this.isjQuery(t)?t[0]:t).querySelector("ul"),a=!!n;return a||(t.insertAdjacentHTML("beforeend",'<ul class="folder" role="group"></ul>'),n=t.querySelector("ul")),e.open&&de.addClass(n,"is-open"),a||this.decorateNode(t.querySelector("a")),typeof e.parent<"u"&&(e.tempidsparent=e.parent),e.parent="",this.addNode(e,$(n),i)},addChildNodes:function(e,t){var i=this,n=(t=this.isjQuery(t)?t[0]:t).querySelector("ul");e.children?(n||(t.insertAdjacentHTML("beforeend",'<ul class="folder'.concat(e.open?" is-open":"",'" role="group"></ul>')),n=t.querySelector("ul")),n.innerHTML="",e.children&&e.children.forEach(function(a){return i.addNode(a,$(n))})):n&&n.parentNode.removeChild(n)},isTrue:function(e){return typeof e<"u"&&null!==e&&("boolean"==typeof e&&!0===e||"string"==typeof e&&"true"===e.toLowerCase())},isFalse:function(e){return typeof e<"u"&&null!==e&&("boolean"==typeof e&&!1===e||"string"==typeof e&&"false"===e.toLowerCase())},updateNode:function(e){var t=e.node?{node:e.node}:this.findById(e.id);if(t&&t.node[0]){var k,i=t.node[0].parentNode,n=t.node[0].querySelector(".tree-text"),a=this.isTrue(e.disabled)||this.isFalse(e.enabled),o=this.isTrue(e.enabled)||this.isFalse(e.disabled),l=null===e.children;if(e.badge){var d=t.node[0].querySelector(".tree-badge");if(!d&&!e.badge.remove&&typeof e.badge.text<"u"&&""!==$.trim(e.badge.text)){var h=document.createElement("span");de.addClass(h,"tree-badge","badge"),n.parentNode.insertBefore(h,n),d=t.node[0].querySelector(".tree-badge")}d&&(typeof e.badge.text<"u"&&(e.badge.text=e.badge.text.toString(),d.textContent=e.badge.text,de.removeClass(d,"round"),1===e.badge.text.length&&de.addClass(d,"round")),typeof e.badge.type<"u"&&(de.removeClass(d,"info","good","error","alert","pending"),/info|good|error|alert|pending/i.test(e.badge.type)?de.addClass(d,e.badge.type):"#"===e.badge.type.charAt(0)&&7===e.badge.type.length&&(d.style.backgroundColor=e.badge.type),-1!==e.badge.type.indexOf("pending")&&(d.textContent="")),t.badge=e.badge,this.parseBool(e.badge.remove)&&(d.parentNode.removeChild(d),typeof t.badge<"u"&&delete t.badge))}if(e.text&&(e.text=/&#?[^\s].{1,9};/g.test(e.text)?Fe.unescapeHTML(e.text):e.text,n.textContent=e.text,t.text=e.text),null===e.icon){var p=t.node[0].nextElementSibling;p&&"ul"===p.tagName.toLowerCase()?this.setFolderIcon(t.node[0],de.hasClass(p,"is-open"),!1,this.settings.expandPlusminusRotate):this.setTreeIcon(t.node[0].querySelector("svg.icon-tree"),"icon-tree-node")}else if(e.icon){this.setTreeIcon(t.node[0].querySelector("svg.icon-tree"),e.icon),t.icon=e.icon;var v=t.node.data("jsonData");v&&(v.icon=e.icon,t.node.data("jsonData",v),t.node.data("".concat(qs,"Api"),this))}else e.children&&e.children.length&&!de.hasClass(i,"folder")&&this.convertFileToFolder(t.node);a&&(de.addClass(t.node[0],"is-disabled"),t.node[0].setAttribute("aria-disabled","true"),de.hasClass(i,"folder")&&de.hasClass(i,"is-open"))&&[].slice.call(i.querySelectorAll("a, ul[role=group]")).forEach(function(A){de.addClass(A,"is-disabled"),A.setAttribute("aria-disabled","true")}),o&&(t.node.parentsUntil(this.element,"ul[role=group].is-disabled").length>0||(de.removeClass(t.node[0],"is-disabled"),t.node[0].removeAttribute("aria-disabled"),!de.hasClass(i,"folder")||!de.hasClass(i,"is-open"))||[].slice.call(i.querySelectorAll("a, ul[role=group]")).forEach(function(A){de.removeClass(A,"is-disabled"),A.removeAttribute("aria-disabled")})),e.childrenCount&&this.updateChildrenCount(t.node[0],e.childrenCount),e.node&&this.syncDataset(),(e.children||l)&&(null!==(k=e.children)&&void 0!==k&&k?.length?this.addChildNodes(e,i):this.removeChildren(e,i)),this.syncDataset(),this.createSortable()}},parseBool:function(e){return!/^(false|0)$/i.test(e)&&!!e},removeChildren:function(e,t){var i=(t=this.isjQuery(t)?t[0]:t).querySelector("ul");this.setTreeIcon(t.querySelector("svg.icon-tree"),e.icon||"icon-tree-node"),de.removeClass(t,"folder","is-open"),i&&i.parentNode.removeChild(i)},removeNode:function(e){var t=this.findById(e.id),i=null;e instanceof jQuery?(i=(t=e).parentsUntil(this.element,".folder:last"),t.parent().remove()):t&&(i=t.node.parentsUntil(this.element,".folder:last"),t.node.parent().remove()),this.childrenCountInit(i),t&&this.syncDataset()},attachMenu:function(e){var t=this;function i(n,a){typeof $(":focus")[0]>"u"&&null!=a&&a?.triggerElement&&a.triggerElement.focus()}e&&this.element.off("contextmenu.tree").on("contextmenu.tree","a",function(n){var a=$(this);return n.preventDefault(),t.popupEl=$(n.currentTarget).popupmenu({menuId:e,eventObj:n,trigger:"immediate",attachToBody:!0,returnFocus:i}).off("selected").on("selected",function(o,l){t.element.triggerHandler("menuselect",{node:a,item:l})}),t.element.triggerHandler("menuopen",{menu:$("#".concat(e)),node:a}),!1})},createSortable:function(){if(this.settings.sortable){var t,i,n,e=this;if(e.targetArrow=e.element[0].previousElementSibling,e.linkSelector="a:not(.is-dragging-clone):not(.is-disabled)",!e.targetArrow||e.targetArrow&&!de.hasClass(e.targetArrow,"tree-drag-target-arrow")){var a=document.createElement("div");de.addClass(a,"tree-drag-target-arrow"),e.element[0].parentNode.insertBefore(a,e.element[0]),e.targetArrow=e.element[0].previousElementSibling}i=setInterval(function o(){e.loading||(clearInterval(i),[].slice.call(e.element[0].querySelectorAll(e.linkSelector)).forEach(function(d){var h=$(d);h.data("drag")||h.on("mousedown.tree",function(p){p.preventDefault(),n=!(3===p.which||de.hasClass(p.target,"icon")&&de.hasClass(d.parentNode,"folder"))}).drag({clone:!0,cloneAppendTo:h.closest("li"),clonePosIsFixed:!0}).on("dragstart.tree",function(p,v,b){if(!b||!n)return de.removeClass(d,"is-dragging"),void(b&&b[0].parentNode.removeChild(b[0]));(t=b)[0].removeAttribute("id"),de.addClass(t[0],"is-dragging-clone"),[].slice.call(t[0].querySelectorAll(".tree-checkbox, .tree-badge")).forEach(function(k){return k.parentNode.removeChild(k)});var T=h.closest("ul");e.sortable={startIndex:$(e.linkSelector,e.element).index(h),startNode:h,startIcon:$("svg.icon-tree",h).getIconName(),startUl:T,startLi:h.closest("li"),startFolderNode:T.prev("a"),startWidth:h.outerWidth()},e.element.triggerHandler("sortstart",e.sortable),p.preventDefault(),p.stopImmediatePropagation()}).on("drag.tree",function(p,v){t&&(t[0].style.left="".concat(v.left,"px"),t[0].style.top="".concat(v.top,"px"),t[0].style.opacity="1",e.setDragOver(t,v))}).on("dragend.tree",function(p,v){var b;if(e.targetArrow.style.display="none",[].slice.call(e.element[0].querySelectorAll(e.linkSelector)).forEach(function(A){return de.removeClass(A,"is-over")}),t&&null!==(b=e.sortable)&&void 0!==b&&b?.overDirection){t[0].style.left="".concat(v.left,"px"),t[0].style.top="".concat(v.top,"px");var T=e.sortable.startNode.parent(),k=e.sortable.overNode.parent();"over"===e.sortable.overDirection?(de.hasClass(k[0],"folder")||e.convertFileToFolder(e.sortable.overNode),k[0].querySelector("ul").appendChild(T[0]),de.hasClass(k[0],"is-open")||e.toggleNode(e.sortable.overNode,p)):"up"===e.sortable.overDirection?T.insertBefore(k):"down"===e.sortable.overDirection&&(de.hasClass(k[0],"is-open")&&de.hasClass(k[0],"folder")?$("ul:first",k).prepend(T):T.insertAfter(k)),!e.sortable.startUl[0].querySelector("li")&&e.sortable.startFolderNode.data("oldData")&&"file"===e.sortable.startFolderNode.data("oldData").type&&e.convertFolderToFile(e.sortable.startFolderNode),H.fixSVGIcons(T),e.element.triggerHandler("sortend",e.sortable),e.syncDataset(),e.isMultiselect&&e.initSelected(),e.updateAutoChildrenCount(e.element[0]),delete e.sortable}})}))},10)}},setDragOver:function(e,t){var l,h,p,v,b,w,T,k,A,M,L,z,i=this,n=e[0].querySelector("svg.icon-tree"),a=i.element[0].getBoundingClientRect(),o=20;if(i.sortable){var q=function(){i.sortable.overNode=null,i.sortable.overIndex=null,i.sortable.overDirection=null,i.targetArrow.style.display="none",i.setTreeIcon(n,"icon-cancel")};t.top>a.top-o&&t.top<a.bottom+o&&t.left>a.left-o-i.sortable.startWidth&&t.left<a.left+a.height+o?(o=2,(T=[].slice.call(i.element[0].querySelectorAll(i.linkSelector))).forEach(function(O,_){if(L=null,k=O.getBoundingClientRect(),t.top>k.top-o&&t.top<k.bottom+o){if((b=$(O)).parentsUntil(i.element,".folder").filter(function(){return $("a:first",this).is(i.sortable.startNode)&&i.sortable.startLi.is(".folder")}).length)return void q();v=O.parentNode,A=k.left,w=b.closest("ul"),l=parseInt(v.style.marginTop,10)>0?2:0,h=_-1===i.sortable.startIndex&&w.is(i.sortable.startUl),p=_+1===i.sortable.startIndex&&w.is(i.sortable.startUl),T.forEach(function(G){return de.removeClass(G,"is-over")}),z=function(){L?(i.setTreeIcon(n,i.sortable.startIcon),"over"===L?(i.targetArrow.style.display="none",de.hasClass(O,"is-disabled")||de.addClass(O,"is-over")):(T.forEach(function(j){return de.removeClass(j,"is-over")}),M="up"===L?k.top-1.5-(de.hasClass(v,"is-active")?3:0):k.bottom+(v.nextElementSibling&&de.hasClass(v.nextElementSibling,"is-active")?-1:1.5)+l,i.targetArrow.style.left="".concat(A,"px"),i.targetArrow.style.top="".concat(M,"px"),i.targetArrow.style.display="block"),i.sortable.overNode=b,i.sortable.overIndex=_,i.sortable.overDirection=L):q()},_!==i.sortable.startIndex&&(t.left>k.left-o-i.sortable.startWidth&&t.left<k.right+o?L=!h&&t.top<k.top?"up":!p&&t.top>k.top+2*o?"down":"over":!h&&t.top<k.top?L="up":p||(L="down")),z()}})):q()}},convertFileToFolder:function(e){var t=$("svg.icon-tree",e),i=document.createElement("ul");i.setAttribute("role","group"),de.addClass(i,"folder");var n={icon:t.getIconName(),type:"file"};if(this.hasIconClass(e)){var a=e.attr("class").replace(/\s?is-selected/,"");n.iconClass=a,this.settings.useExpandTarget||e.removeClass(a)}e.data("oldData",n);var o=e[0].parentNode;o&&"li"===o.tagName.toLowerCase()&&(de.addClass(o,"folder"),o.appendChild(i)),t[0].insertAdjacentHTML("afterend",this.getExpandTargetHtml(!1)),e[0].insertAdjacentHTML("beforeend",this.getChildrenCountHtml()),this.setTreeIcon(t,this.settings.folderIconClosed)},convertFolderToFile:function(e){var t=e.parent(".folder");t.removeClass("folder is-open"),$(".icon-expand-target, .tree-children-count",e).remove(),$("ul:first",t).remove(),t.length&&(this.setTreeIcon($("svg.icon-tree",e),e.data("oldData")?e.data("oldData").icon:"tree-node"),e.data("oldData")&&e.data("oldData").iconClass&&e.addClass(e.data("oldData").iconClass),e.data("oldData",null))},unbind:function(){return this.settings.sortable&&(this.element.find("a").each(function(){var e=$(this),t=e.data("drag");e.off("mousedown.tree"),t&&t.destroy&&t.destroy()}),this.element.prev(".tree-drag-target-arrow").remove()),this.element.off("contextmenu.tree updated.tree click.tree focus.tree keydown.tree keypress.tree"),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,lp)),this.unbind().init()},destroy:function(){this.unbind(),this.element.empty(),$.removeData(this.element[0],qs)},disable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(t){de.addClass(t,"is-disabled"),t.setAttribute("aria-disabled","true")})},enable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach(function(t){de.removeClass(t,"is-disabled"),t.removeAttribute("aria-disabled")})},preserveEnablementState:function(){var e=[].slice.call(this.element[0].querySelectorAll("a")),t=[];return e.forEach(function(i){de.hasClass(i,"is-disabled")||!0===i.getAttribute("aria-disabled")?t.push({nodeId:i.id,state:"disabled"}):t.push({nodeId:i.id,state:"enabled"})}),this.settings.originalEnablementState=t,t},restoreEnablementState:function(){var e=this.settings,t=[].slice.call(this.element[0].querySelectorAll("a"));typeof e.originalEnablementState<"u"&&null!==e.originalEnablementState&&t.forEach(function(i){e.originalEnablementState.forEach(function(n){n.nodeId===i.id&&("disabled"===n.state?(de.addClass(i,"is-disabled"),i.setAttribute("aria-disabled","true")):(de.removeClass(i,"is-disabled"),i.removeAttribute("aria-disabled")))})})}},$.fn.tree=function(s){var e=this.find("a");return e.find("[onerror]").length&&(this.find("[onerror]").removeAttr("onerror"),e.find("*").each(function(){var i=$(this);this.outerHTML=Fe.sanitizeHTML(i.prop("outerHTML"))})),this.each(function(){var i=$.data(this,qs);i?i.updated(s):i=$.data(this,qs,new Lh(this,s))})},$.fn.collapse=function(){return this.each(function(){cp(this,"collapse")})},$.fn.expand=function(){return this.each(function(){cp(this,"expand")})};var Ws="treemap",iv={dataset:[],redrawOnResize:!0,margin:{top:20,right:20,bottom:20,left:20},colors:null,showLabel:!0,labelFormatter:".0%",showTitle:!0,emptyMessage:{title:B?B.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new"}};function Ph(s,e){this.settings=H.mergeSettings(s,e,iv),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(s),this.init()}Ph.prototype={init:function(){return this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.setupColors(),this.updateData(this.settings.dataset),this},setupColors:function(){if(!this.settings.colors||this.useBuiltInColors){var e=Et.themeColors().palette;this.settings.colors=[e.azure[100].value,e.azure[90].value,e.azure[80].value,e.azure[70].value,e.azure[60].value,e.azure[40].value,e.azure[30].value,e.azure[20].value,e.amethyst[100].value,e.amethyst[90].value,e.amethyst[80].value,e.amethyst[70].value,e.amethyst[60].value,e.amethyst[50].value,e.amethyst[40].value,e.amethyst[40].value,e.amethyst[30].value,e.amethyst[20].value,e.turquoise[100].value,e.turquoise[90].value,e.turquoise[80].value,e.turquoise[70].value,e.turquoise[60].value,e.turquoise[50].value,e.turquoise[40].value,e.turquoise[40].value,e.turquoise[30].value,e.turquoise[20].value],this.useBuiltInColors=!0}},updateData:function(e){var t=this,i=Object.create(this.settings.margin),n=this.element.parent().width()-i.left-i.right,a=this.element.parent().height()-i.top-i.bottom,o=d3.scaleOrdinal().range(this.settings.colors);if(0!==e.length){H.addAttributes(this.element,e,this.settings.attributes,"",!0),this.settings.showTitle&&e.name&&(d3.select(this.element[0]).append("div").attr("class","chart-treemap-title").text(e.name),a-=35,i.top-=19);var l=d3.treemap().size([n,a]);this.root=d3.select(this.element[0]).classed("chart-treemap",!0).append("div").style("position","relative").style("width","".concat(n+i.left+i.right,"px")).style("height","".concat(a+i.top+i.bottom,"px")).style("left","".concat(i.left,"px")).style("top","".concat(i.top,"px"));var d=d3.hierarchy(e,function(v){return v.children}).sum(function(v){return v.value}),h=l(d);this.total=d3.sum(h.leaves(),function(v){return v.value}),ue.appendTooltip(),this.root.datum(d).selectAll(".chart-treemap-node").data(h.leaves()).enter().append("div").attr("class","chart-treemap-node").style("left",function(v){return"".concat(v.x0,"px")}).style("top",function(v){return"".concat(v.y0,"px")}).style("width",function(v){return"".concat(Math.max(0,v.x1-v.x0-1),"px")}).style("height",function(v){return"".concat(Math.max(0,v.y1-v.y0-1),"px")}).style("background",function(v){return v&&v.parent&&v.parent.data?o(v.parent.data.name):""}).call(function(v){v._groups.forEach(function(b){b.forEach(function(w){var T,k=w.__data__;H.addAttributes($(w),k,t.settings.attributes,null===(T=k.data.name)||void 0===T?void 0:T?.toLowerCase(),!0)})})}).on("mouseenter.treemap",function(v,b){var w=this.getBoundingClientRect(),T=this.querySelector(".chart-treemap-percent").innerText,k=b.parent.data.tooltip;if(!(!k&&w.width>60&&w.height>50)){k=k?(k=k.replace("%percent%",T)).replace("{{percent}}",T):"<p><b>".concat(b.data.name," </b> ").concat(T,"</p>");var A=ue.tooltipSize(k);ue.showTooltip(w.left-A.width/2+12,w.top-A.height-6,k,"top")}}).on("mouseleave.treemap",function(){clearInterval(void 0),ue.hideTooltip()}),this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-text").text(function(v){return v.data.name}),this.settings.showLabel&&this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-percent").text(function(v){return d3.format(t.settings.labelFormatter)(v.value/t.total)})}else this.element.emptymessage(this.settings.emptyMessage)},handleEvents:function(){var e=this;return this.element.on("updated.".concat(Ws),function(){e.updated()}),this.settings.redrawOnResize&&($("body").on("resize.".concat(Ws),function(){e.handleResize()}),this.element.on("resize.".concat(Ws),function(){e.handleResize()})),$("html").on("themechanged.".concat(Ws),function(){e.updated()}),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=H.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.setupColors(),this.element.empty(),this.build()},teardown:function(){return this.element.off("updated.".concat(Ws)),$("body").off("resize.".concat(Ws)),$("html").off("themechanged.".concat(Ws)),this},destroy:function(){this.element.empty().removeClass("chart-treemap"),ue.removeTooltip(),this.teardown(),$.removeData(this.element[0],Ws)}},$.fn.treemap=function(s){return this.each(function(){var e=$.data(this,Ws);e?e.updated(s):e=$.data(this,Ws,new Ph(this,s))})},$.fn.virtualscroll=function(s){return this.each(function(){var e=$.data(this,Cc);e?e.updated(s):e=$.data(this,Cc,new Td(this,s))})},$.fn.weekview=function(s){return this.each(function(){var e=$.data(this,Bn);e?e.updated(s):e=$.data(this,Bn,new vr(this,s))})};var Vs="wizard",nv={ticks:null,ticksTemplate:'<a class="tick {{state}}" href="{{href}}"><span class="label" data-shortlabel="{{shortLabel}}">{{label}}</span></a>'};function Nh(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,nv),this.init()}function Nl(s,e,t,i,n,a){var o=n.placeholder;return o&&""===s?("[object Function]"==={}.toString.call(o)?o=o(e,t,i,n,a):a&&a instanceof Object&&o in a&&(o=a[o]),o):""}function dp(s,e,t,i,n){var d,o=i?i.disabled:null;return"function"==typeof o?o(s,e,t,i,n):typeof(d=o)<"u"&&null!==d&&("boolean"==typeof d&&!0===d||"string"==typeof d&&"true"===d.toLowerCase())}Nh.prototype={init:function(){this.namespace=H.uniqueId({classList:[Vs]}),this.build().handleEvents()},build:function(){return this.header=this.element.find(".wizard-header"),this.header.length||(this.header=$('<div class="wizard-header"></div>').appendTo(this.element)),this.bar=this.element.find(".bar"),this.bar.length||(this.bar=$('<div class="bar"></div>').appendTo(this.header)),this.completedRange=this.element.find(".completed-range"),this.completedRange.length||(this.completedRange=$('<div class="completed-range"></div>').appendTo(this.bar)),this.buildTicks().updateRange(),this},buildTicks:function(){var e=this.settings;if(this.ticks=this.bar.children(".tick"),!this.ticks.length&&e.ticks){for(var t=function(d,h){return d.replace(/{{(\w+)}}/g,function(p,v){return h[v]})},i={state:"",href:"#",label:""},n=0;n<e.ticks.length;n++){var a=t(e.ticksTemplate,$.extend({},i,e.ticks[n]));a=a.replace(/(\s(\w|-)+=("|')?)?undefined("|')?/gim,"");var o=$(a);e.ticks[n].ngClick&&o.attr("ng-click",e.ticks[n].ngClick),this.bar.append(o)}this.ticks=this.bar.children(".tick")}return this.positionTicks(),this.setLabelsData(),this.adjustLabels(),this.ticks.toArray().forEach(function(l){l.classList.contains("is-disabled")&&["onclick","ng-click"].forEach(function(d){return l.removeAttribute(d)})}),this.header[0].style.opacity="1",this},setLabelsData:function(){var e=this,t=[].slice.call(this.bar[0].querySelectorAll(".label"));return this.labels=[],t.forEach(function(i){var n=i.textContent,a=i.getAttribute("data-shortlabel");a||(a=i.getAttribute("shortlabel"));var o={label:n,shortLabel:a,node:i,jqEl:$(i)};(!a||"undefined"===a)&&(i.removeAttribute("data-shortlabel"),i.removeAttribute("shortlabel"),delete o.shortLabel),e.labels.push(o)}),this},adjustLabels:function(){var e=this,t=this.header[0].getBoundingClientRect(),i=parseFloat(window.getComputedStyle(this.bar[0]).width),n=100/(this.labels.length-1)/100*i-15,a=[],o=[],l=function(T){delete T.isEllipsis,T.node.classList.remove("is-ellipsis"),T.node.style.width="",e.removeTooltip(T)},d=function(T){var k=e.labels[T].node;if(-1===a.indexOf(T)){var A=e.labels[T].shortLabel;A?(k.textContent=A,a.push(T),l(e.labels[T])):(k.classList.add("is-ellipsis"),k.style.width="".concat(n,"px"),e.setTooltip(e.labels[T]),e.labels[T].isEllipsis=!0)}k.style.left="-".concat((k.offsetWidth-k.parentNode.offsetWidth)/2,"px")},h=function(){var T=function(L,z,q){if(L.isEllipsis){var O=parseFloat(L.node.style.width)-z;L.node.style.width="".concat(O,"px"),L.node.style.left="-".concat((O-L.node.parentNode.offsetWidth)/2,"px")}else{var _=parseFloat(L.node.style.left)+z*(q?-1:1);L.node.style.left="".concat(_,"px")}},k=e.labels[0],A=k.node.rect||k.node.getBoundingClientRect();t.left>A.left&&T(k,t.left-A.left),A=(k=e.labels[e.labels.length-1]).node.rect||k.node.getBoundingClientRect(),t.right<A.right&&T(k,A.right-t.right,!0)};this.labels.forEach(function(w){var T=w.node;T.textContent=w.label,T.style.left="-".concat((T.offsetWidth-T.parentNode.offsetWidth)/2,"px"),l(w)}),h();var p=function(T,k){return!(T.right<k.left||T.left>k.right||T.bottom<k.top||T.top>k.bottom)},v=function(){e.labels.forEach(function(M){M.rect=M.node.getBoundingClientRect()}),o=[];for(var T=0,k=e.labels.length;T<k;T++)if(T<k-1){var A=T+1;p(e.labels[T].rect,e.labels[A].rect)&&o.push([T,A])}},b=50;do{v(),o.forEach(function(w){var A=e.labels[w[0]].node.offsetWidth>e.labels[w[1]].node.offsetWidth?0:1,M=w[A],L=A?w[0]:w[1];d(M),p(e.labels[M].rect,e.labels[L].rect)&&d(L)}),h(),v(),b--}while(o.length&&b>0);return h(),this.labels.forEach(function(w){delete w.isEllipsis,delete w.rect}),this},setTooltip:function(e){var t=this;e.jqEl.tooltip({content:e.label,placement:"bottom"}).on("blur.".concat(Vs),function(){return t.removeTooltip(e)})},removeTooltip:function(e){var t=e.jqEl.data("tooltip");t&&(t.element.off("blur.".concat(Vs)),t.destroy())},positionTicks:function(){var e=this.ticks.length,t=100/(e-1);this.ticks.toArray().forEach(function(n,a){var o=function(a){return a===e-1?100:t*a}(a),l=B&&B.isRTL()?100-o:o;n.style.left="".concat(l,"%"),n.classList.contains("is-disabled")&&n.setAttribute("tabindex","-1")})},updateRange:function(){var e=function(a,o){return parseFloat(window.getComputedStyle(a)[o])},t=this.ticks.filter(".current").last(),i=0;return t.length&&(i=100*e(t[0],"left")/e(t.parent()[0],"width"),i=B&&B.isRTL()?100-i:i),this.completedRange[0].style.width="".concat(i,"%"),this},updated:function(e){return e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.buildTicks().updateRange(),this},teardown:function(){var e=this;return this.labels.forEach(function(t){e.removeTooltip(t),t.jqEl.off().removeData()}),delete this.labels,this.ticks.off("click.".concat(Vs)),this.element.off("updated.".concat(Vs)),$("body").off("resize.".concat(this.namespace)),this.ticks.remove(),this},select:function(e,t){return ms(this.activate,this.select).apply(this,[e,t])},activate:function(e,t){if(void 0===e&&!t)return this;var i=this;if(t=function n(){var l;return void 0!==e&&(null==e||!e.type||!e.target)&&!t&&(t=e),void 0===t?(l=$(e.target)).is(".label")?l.parent():l:"number"==typeof t?i.ticks.eq(t):t}(),e&&(t.is("[disabled], .is-disabled")||!t.is("a")))return e.preventDefault(),e.stopPropagation(),this;if(!1===this.element.triggerHandler("beforeactivate",[t]))return this;var o=this.ticks.index(t);return this.ticks.removeClass("complete current").eq(o).addClass("current").prevAll(".tick").addClass("complete"),this.updateRange(),this.element.trigger("activated",[t]),setTimeout(function(){i.element.trigger("afteractivated",[t])},300),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Vs)},handleEvents:function(){var e=this,t=this;return this.element.on("updated.".concat(Vs),function(){t.updated()}),this.ticks.on("click.".concat(Vs),function(i){t.activate(i,$(this))}),$("body").on("resize.".concat(this.namespace),function(){e.adjustLabels()}),this}},$.fn.wizard=function(s){return this.each(function(){var e=$.data(this,Vs);e?e.updated(s):e=$.data(this,Vs,new Nh(this,s))})};var Yi={Text:function(e,t,i){return null==i||""===i?"":i.toString()},Input:function(e,t,i,n){return n.inlineEditor?'<label for="datagrid-inline-input-'.concat(e,"-").concat(t,'" class="audible">').concat(n.name,'</label><input id="datagrid-inline-input-').concat(e,"-").concat(t,'" class="').concat("right"===n.align?"is-number-mask":"",'" value="').concat(i,'">'):null==i||""===i?"":i.toString()},Placeholder:function(e,t,i,n,a){var o=Nl(i,e,t,i,n,a);return""!==o?'<span class="is-placeholder">'.concat(o,"</span>"):null==i||""===i?"":i.toString()},Ellipsis:function(e,t,i,n){var a=null==i||""===i?"":i.toString();return n.textOverflow="ellipsis",a},Password:function(e,t,i){return(null==i||""===i?"":i.toString()).replace(/./g,"*")},Readonly:function(e,t,i){return'<span class="is-readonly">'.concat(i??"","</span>")},RowNumber:function(e,t,i,n,a,o){var l,d=o.runningCount||1;return(null==o||null===(l=o?.pagerAPI)||void 0===l?void 0:l?.activePage)>1&&(d+=(o.pagerAPI.activePage-1)*o.pagerAPI.settings.pagesize),'<span class="is-readonly">'.concat(d,"</span>")},Date:function(e,t,i,n,a,o){var p,d=i??"",h=!1,v=arguments.length>6&&void 0!==arguments[6]&&arguments[6]?null:n.dateFormat,b=a?Nl(d,e,t,i,n,a):"";return""!==b&&(h=!0),"string"==typeof i&&i?(p=B.parseDate(i,n.sourceFormat?"string"==typeof n.sourceFormat?{pattern:n.sourceFormat}:n.sourceFormat:"string"==typeof v?{pattern:v}:v))?d=B.formatDate(p,"string"==typeof v?{pattern:v}:v):("NaN/NaN/NaN"===(d=B.formatDate(i,"string"==typeof v?{pattern:v}:v))||!d)&&""!==d&&(d=i):i&&(d=B.formatDate(i,"string"==typeof v?{pattern:v}:v)),n.editor&&!0!==a?((null==d||""===d)&&(d="",b&&(h=!0,d=b)),'<span class="trigger '.concat(h?"is-placeholder":"",'">').concat(d,"</span>").concat($.createIcon({icon:"calendar",classes:["icon-calendar"]}))):h?"":d},Time:function(e,t,i,n,a){var h,o=i??"",l="object"===rt(B)&&B.calendar().dateFormat?B.calendar().dateFormat.short:null,d="object"===rt(B)&&B.calendar().timeFormat?B.calendar().timeFormat:null;return"string"==typeof i&&i?(h=B.formatDate(function(b){if(""===b)return null;var w=b.match(/(\d+)(?::(\d\d))(?::(\d\d))?\s*([pP]?)/i);if(null===w)return null;var T=function(z){return isNaN(parseInt(z,10))?0:parseInt(z,10)},k=B.currentLocale.data.calendars[0].dayPeriods,A=new Date,M=T(w[1]);return(b.indexOf(k[0])>-1||b.indexOf(k[1])>-1)&&(M-=12===M?12:0,M+=b.indexOf(k[1])>-1?12:0),A.setHours(M),A.setMinutes(T(w[2])),A.setSeconds(T(w[3])),A}(i),{pattern:"".concat(l," ").concat(n.sourceFormat||n.timeFormat||d)}))&&(o=h.slice(h.indexOf(" "))):i&&(h=B.formatDate(i,{pattern:"".concat(l," ").concat(n.sourceFormat||n.timeFormat||d)}))&&(o=h.slice(h.indexOf(" "))),o=o.replace(/^\s/,""),n.editor&&!0!==a?'<span class="trigger">'.concat(o,"</span>").concat($.createIcon({icon:"clock",classes:["icon-clock"]})):o},Autocomplete:function(e,t,i){return i??""},Lookup:function(e,t,i,n,a){var o=i??"",l=!1,d=Nl(o,e,t,i,n,a);return""!==d&&(l=!0),n.editor?(n.editorOptions&&"function"==typeof n.editorOptions.field&&(o=Fe.escapeHTML(n.editorOptions.field(a,null,null)),l=!1),(null==o||""===o)&&(o="",d&&(l=!0,o=d)),'<span class="trigger '.concat(l?"is-placeholder":"").concat("right"===n.align?"align-text-right":"",'">').concat(o,"</span>").concat($.createIcon({icon:"search-list",classes:["icon-search-list"]}))):l?'<span class="is-placeholder">'.concat(d,"</span>"):o},Decimal:function(e,t,i,n,a){var o=i,l=/[\s]*($)?[#,0-9\s\.]+%?[\s]*/;typeof B<"u"&&null!=o&&""!==o&&l.test(o)&&(o=B.formatNumber(i,n.numberFormat));var d=Nl(o=null!=o&&"NaN"!==o&&l.test(o)?o:"",e,t,i,n,a);return""!==d?'<span class="is-placeholder">'.concat(d,"</span>"):o},Integer:function(e,t,i,n){var a=i;return typeof B<"u"&&null!=a&&""!==a&&(a=B.formatNumber(i,n.numberFormat||{style:"integer"})),null==a||"NaN"===a?"":a},Hyperlink:function(e,t,i,n,a,o){var l=dp(e,t,i,n,a)?" disabled":"",d=n.href||"#";if(n.href&&"function"==typeof n.href){if(null==(d=n.href(e,t,a,n)))return n.text||i}else d=d.replace("{{value}}",i);var h=n.text||i;if(!h&&!n.icon)return"";var p="";return"string"==typeof n.cssClass&&(p=n.cssClass),"function"==typeof n.cssClass&&(p=n.cssClass(e,t,i,n,a)||""),n.icon?'<a href="'.concat(d,'"').concat(l,' class="btn-icon row-btn ').concat(p,'" ').concat(o.settings.rowNavigation?'tabindex="-1"':"").concat(n.hyperlinkTooltip?' title="'.concat(n.hyperlinkTooltip,'"'):"",">\n          ").concat($.createIcon({icon:n.icon,file:n.iconFile}),'\n          <span class="audible">').concat(h,"</span>\n        </a>"):'<a href="'.concat(d,'"').concat(l," ").concat(o.settings.rowNavigation?'tabindex="-1"':"",' class="hyperlink ').concat(p,'"').concat(n.target?' target="'.concat(n.target,'"'):"").concat(n.hyperlinkTooltip?' title="'.concat(n.hyperlinkTooltip,'"'):"",">").concat(h,"</a>")},Template:function(e,t,i,n,a){var o=n.template,l="";return hn&&a&&o&&(l=hn.compile("{{#dataset}}".concat(o,"{{/dataset}}"),{dataset:a})),l},Drilldown:function(){var e=B.translate("Drilldown");return void 0===e&&(e=""),'<button type="button" tabindex="-1" class="btn-icon small datagrid-drilldown">\n         '.concat($.createIcon({icon:"drilldown"}),"\n        <span>").concat(e,"</span>\n      </button>")},RowReorder:function(){var e=B.translate("ReorderRows");return void 0===e&&(e="Reorder Rows"),'<div class="datagrid-reorder-icon draggable">\n         '.concat($.createIcon({icon:"drag"}),'\n        <span class="audible">').concat(e,"</span>\n      </div>")},Checkbox:function(e,t,i,n,a,o){var l;l=n.isChecked?n.isChecked(i):void 0!==i&&(!0===i||1===parseInt(i,10));var d='<span class="hidden" aria-hidden="true" role="presentation"> '.concat(B.translate(l?"Yes":"No"),"</span>"),h=o.wasJustUpdated;return o.wasJustUpdated=!1,'<div class="datagrid-checkbox-wrapper"><span role="checkbox" class="datagrid-checkbox'.concat(l?" is-checked ".concat(h?" ":" no-animation"):"",'"></span>').concat(d,"</div>")},SelectionCheckbox:function(e,t,i,n,a,o){var l=void 0!==i&&!0===i;i||(l=o.isRowSelected(a));var d=" ";if(o.settings.columnIds.length>0)for(var h=0;h<o.settings.columnIds.length;h++)d+=a[o.settings.columnIds[h]];return d=Fe.ensureAlphaNumericWithSpaces(d),'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(n.name?n.name:B.translate("Select")+d,'" class="datagrid-checkbox datagrid-selection-checkbox').concat(l?" is-checked no-animate":"",'"></span></div>')},SelectionRadio:function(e,t,i,n,a,o){var l=void 0!==i&&!0===i;i||(l=o.isRowSelected(a));var d=" ";if(o.settings.columnIds.length>0)for(var h=0;h<o.settings.columnIds.length;h++)d+=a[o.settings.columnIds[h]];return d=Fe.ensureAlphaNumericWithSpaces(d),'<div class="datagrid-checkbox-wrapper"><span role="radio" aria-label="'.concat(n.name?n.name:B.translate("Select")+d,'" class="datagrid-radio datagrid-selection-radio ').concat(l?" is-checked":"",'"></span></div>')},Actions:function(e,t,i,n){return'<button type="button" class="btn-actions" aria-haspopup="true" aria-expanded="false" aria-owns="'.concat(n.menuId,'">\n        <span class="audible">').concat(n.title||B.translate("More"),"</span>\n        ").concat($.createIcon({icon:"more"}),"\n      </button>")},Textarea:function(e,t,i){return'<span class="datagrid-multiline-text">'.concat(i??"","</span>")},Editor:function(e,t,i,n){var a=i??"",o="is-editor";return o+=n.singleline?" is-singleline":" datagrid-multiline-text",'<div class="'.concat(o+=n.contentTooltip?" content-tooltip":"",'">').concat(Fe.unescapeHTML(a),"</div>")},Expander:function(e,t,i,n,a,o){var l=H.stringAttributes(o,o.settings.attributes,"btn-expand-row-".concat(e));return"<button ".concat(l,' type="button" aria-label="').concat(B.translate("ExpandCollapse"),'" ').concat(a.isSummaryRow?"disabled=true":"",' class="btn-icon datagrid-expand-btn ').concat(a.expanded?"is-expanded":"",'" tabindex="-1">\n      <span class="icon plus-minus ').concat(a.expanded?"active":"",'"></span>\n      </button>').concat(i?"<span> ".concat(i,"</span>"):"")},GroupRow:function(e,t,i,n,a,o){var l,d=o.settings.groupable,h={left:"",center:"",right:""},p=null!=o&&null!==(l=o?.settings)&&void 0!==l&&l?.rowReorder?this.RowReorder():"",v="",b=void 0===d.expanded||d.expanded;d.expanded&&"function"==typeof d.expanded&&(b=d.expanded(e,t,i,n,a,o));for(var w=0;w<d.fields.length;w++)v+=a[d.fields[w]]+(0===w?"":",");d.groupRowFormatter&&(v=d.groupRowFormatter(e,t,i,n,a,o));var T='<button type="button" class="btn-icon datagrid-expand-btn'.concat(b?" is-expanded":"",'" tabindex="-1">\n    <span class="icon plus-minus').concat(b?" active":"",'"></span>\n    <span class="audible">').concat(B.translate("ExpandCollapse"),"</span>\n    </button>").concat(p,"<span> ").concat(v,"</span>");return h[o.getContainer(d.fields?d.fields[0]:"")]=T,h},GroupFooterRow:function(e,t,i,n,a,o){var l=o.settings.groupable,d={left:"",center:"",right:""},h=o.settings.frozenColumns.left.length,p=o.settings.frozenColumns.right.length,v=o.columnIdxById(l.aggregate),b=o.getContainer(l.aggregate);return d.left='<td role="gridcell" colspan="'.concat(h,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("left"===b?a.sum:"<span>&nbsp;</span>","</div></td>"),d.center='<td role="gridcell" colspan="'.concat(v-h-p,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("center"===b?a.sum:"<span>&nbsp;</span>","</div></td>"),d.right='<td role="gridcell" colspan="'.concat(p,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("right"===b?a.sum:"<span>&nbsp;</span>","</div></td>"),l.groupFooterRowFormatter&&(d[b]=l.groupFooterRowFormatter(v,e,t,i,n,a,o)),d},SummaryRow:function(e,t,i,n){var a="",o=n.summaryText||"";return"after"===n.summaryTextPlacement&&(a=o,o=""),typeof B<"u"&&n.numberFormat&&null!=i&&""!==i&&(i=B.formatNumber(+i,n.numberFormat)),o+(null==i||""===i?"":i.toString())+a},Tree:function(e,t,i,n,a,o){var l=!a||a.expanded,d=o&&o.settings.treeDepth&&o.settings.treeDepth[e]?o.settings.treeDepth[e].depth:0,h=a&&a.isAllChildrenFiltered,p=h?" disabled":"";l&&h&&(l=!1);var v="extra-small"===o.settings.rowHeight||"small"===o.settings.rowHeight?24:27,b='<button type="button" class="btn-icon datagrid-expand-btn'.concat(l?" is-expanded":"",'" tabindex="-1"').concat(d?' style="margin-left: '.concat(d?"".concat(v*(d-1),"px"):"",'"'):"").concat(p,'>\n      <span class="icon plus-minus ').concat(l?" active":"",'"></span>\n      <span class="audible">').concat(B.translate("ExpandCollapse"),"</span>\n      </button>").concat(i?" <span>".concat(i,"</span>"):""),w=' <span class="datagrid-tree-node"'.concat(d?' style="margin-left: '.concat(d?"".concat(v*d,"px"):"",'"'):"",">").concat(i,"</span>");return a&&a[n.children?n.children:"children"]?b:w},ClassRange:function(e,t,i,n){var a=n.ranges,o="",l="";if(!a)return{};for(var d=0;d<a.length;d++)i>=a[d].min&&i<=a[d].max&&(o=a[d].classes,l=a[d].text?a[d].text:o.split(" ")[0]),i===Fe.escapeHTML(a[d].value)&&(o=a[d].classes,l=a[d].text?a[d].text:i);return{classes:o,text:l}},Badge:function(e,t,i,n){var a=n.color,o=n.name;if(n.ranges){var l=Yi.ClassRange(e,t,i,n);a=l.classes,o=l.text}return'<span class="badge '.concat(a,'">').concat(i,' <span class="audible">').concat(o,"</span></span>")},Tag:function(e,t,i,n){var a,o=Yi.ClassRange(e,t,i,n);return null!=n&&null!==(a=n?.editorOptions)&&void 0!==a&&a?.clickable?'<span class="tag is-linkable hide-focus '.concat(o.classes,'"><a class="tag-content" href="#">#').concat(i,'</a><button class="btn-linkable" focusable="false" tabindex="-1">\n        <svg class="icon caret-right" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n      </button></span>'):'<span class="tag '.concat(o.classes,' hide-focus"><span class="tag-content">').concat(i,"</span></span>")},Alert:function(e,t,i,n){var a=Yi.ClassRange(e,t,i,n),o=$.createIcon({icon:"".concat(a.classes),classes:["icon","datagrid-alert-icon","icon-".concat(a.classes)]});return"".concat(o,'<span class="datagrid-alert-text">').concat("value"===a.text?i:a.text,"</span>")},Image:function(e,t,i,n){return'<img class="'.concat(n.click?"datagrid-img actionable":"datagrid-img",'" src="').concat(i,'" alt="').concat(n.alt?n.alt:B.translate("Image"),'"').concat(n.dimensions?' style="height:'.concat(n.dimensions.height,";width:").concat(n.dimensions.height,'"'):"","/>")},Color:function(e,t,i,n){var a=Yi.ClassRange(e,t,i,n),o=null==i||""===i?"":i.toString();return'<span class="'.concat(a.classes,'">').concat(o,"</span>")},Colorpicker:function(e,t,i,n){var a=null==i||""===i?"":i.toString();if(n.inlineEditor)return a;var o="swatch".concat(""===i?" is-empty":"");return(a='<span class="colorpicker-container trigger dropdown-trigger"><span class="'.concat(o,'" style="background-color: ').concat(i,'"></span><input class="colorpicker" id="colorpicker-').concat(t,'" name="colorpicker-').concat(t,'" type="text" role="combobox" aria-autocomplete="list" value="').concat(i,'">'))+'<span class="trigger">'.concat($.createIcon({icon:"dropdown"}),"</span></span>")},Button:function(e,t,i,n,a,o){var l,d=dp(e,t,i,n,a)?" disabled":"",h=n.contentWidth?' style="width: '.concat(n.contentWidth,'"'):"";l=n.text?n.text:null==i||""===i?"":i.toString();var p='<button type="button"'.concat(d).concat(h,' class="').concat(n.icon?"btn-icon":"btn-secondary"," row-btn ").concat(n.cssClass?n.cssClass:"",'"').concat(o.settings.rowNavigation?' tabindex="-1"':""," >");return n.icon&&(p+=$.createIcon({icon:n.icon,file:n.iconFile})),p+"<span>".concat(l,"</span></button>")},MultiSelect:function(e,t,i,n,a){var l,d,h,o=i,p=!1;if(n.options&&void 0!==i){("object"===rt(l=n.caseInsensitive&&"string"==typeof i?i.toLowerCase():i)||Array.isArray(l))&&(o="");for(var v=0,b=n.options.length;v<b;v++){if(d=n.options[v],h=n.caseInsensitive&&"string"==typeof d.value?d.value.toLowerCase():d.value,("object"===rt(l)||Array.isArray(l))&&n.editorOptions.multiple)for(var w=0;w<l.length;w++)n.options[v].value===l[w]&&(o+="".concat(d.label,", "));if(h===l){o=d.label;break}}o=o.replace(/,\s*$/,"")}var T=Nl(o,e,t,i,n,a);""!==T&&(p=!0,o=T);var k='<span class="trigger dropdown-trigger '.concat(p?"is-placeholder":"",'">').concat(o,"</span>").concat($.createIcon({icon:"dropdown"}));if(n.inlineEditor){k='<label for="full-dropdown" class="audible">'.concat(n.name,'</label><select id="datagrid-dropdown').concat(e,'" class="dropdown">');for(var A=0,M=n.options.length;A<M;A++){var z,L=n.options[A];z=void 0!==L.label?L.label:void 0!==L.value?L.value:"",k+="<option".concat(void 0===L.id?"":' id="'.concat(L.id,'"'),'  value="').concat(L.value,'"').concat(L.selected||L.value===l?" selected ":"",">").concat(z,"</option>")}k+='</select>\n      <div class="dropdown-wrapper is-inline">\n        <div class="dropdown"><span>'.concat(o,'</span></div>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </div>')}return k},Dropdown:function(e,t,i,n,a){var l,d,o=i,p=!1;if(n.options&&void 0!==i){l=n.caseInsensitive&&"string"==typeof i?i.toLowerCase():i;for(var v=0,b=n.options.length;v<b;v++)if(d=n.options[v],(n.caseInsensitive&&"string"==typeof d.value?d.value.toLowerCase():d.value)===l){o=d.label;break}}var w=Nl(o,e,t,i,n,a);""!==w&&(p=!0,o=w);var T='<span class="trigger dropdown-trigger '.concat(p?"is-placeholder":"",'">').concat(o,"</span>").concat($.createIcon({icon:"dropdown"}));if(n.inlineEditor){T='<label for="full-dropdown" class="audible">'.concat(n.name,'</label><select id="datagrid-dropdown').concat(e,'" class="dropdown">');for(var k=0,A=n.options.length;k<A;k++){var L,M=n.options[k];L=void 0!==M.label?M.label:void 0!==M.value?M.value:"",T+="<option".concat(void 0===M.id?"":' id="'.concat(M.id,'"'),'  value="').concat(M.value,'"').concat(M.selected||M.value===l?" selected ":"",">").concat(L,"</option>")}T+='</select>\n      <div class="dropdown-wrapper is-inline">\n        <div class="dropdown"><span>'.concat(o,'</span></div>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </div>')}return T},Fileupload:function(e,t,i,n){var a=null==i||""===i?"":i.toString();return n.inlineEditor||(a=""===$.trim(a)?'<span class="trigger">'.concat(a,"</span>").concat($.createIcon({icon:"folder",classes:["icon-fileupload"]})):'<span class="trigger is-clearable">'.concat(a,"</span>").concat($.createIcon({icon:"close",classes:["icon-close"]})).concat($.createIcon({icon:"folder",classes:["icon-fileupload"]}))),a},Spinbox:function(e,t,i,n){var a=null==i||""===i?"":i.toString();return n.inlineEditor&&(a='<label for="spinbox-'.concat(t,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(t,'" name="spinbox-').concat(t,'" type="text" class="spinbox" value="').concat(i,'">\n        <span class="spinbox-control up">+</span></span>')),a},Favorite:function(e,t,i,n,a,o){var l;l=n.isChecked?n.isChecked(i):void 0!==i&&!0===i;var d=n.editor&&o.settings.editable;return l?'<span aria-label="'.concat(B.translate("Favorite"),'" class="icon-favorite').concat(d?" is-editable":"",'">').concat($.createIcon({icon:"star-filled"}),"</span>"):n.showEmpty?'<span aria-label="'.concat(B.translate("Favorite"),'" class="icon-favorite').concat(d?" is-editable":"",'">').concat($.createIcon({icon:"star-outlined"}),"</span>"):""},Status:function(e,t,i,n,a){return a&&a.rowStatus?"".concat($.createIcon({icon:a.rowStatus.icon,classes:["icon","icon-".concat(a.rowStatus.icon)]}),'<span class="audible">').concat(a.rowStatus.text,"</span>"):"<span></span>"},TargetedAchievement:function(e,t,i,n){var a=B.formatNumber(100*i,n.numberFormat||{minimumFractionDigits:2,maximumFractionDigits:2}),o=a.replace(",","."),l="".concat(a,"%"),d=Yi.ClassRange(e,t,o,n),h=n.target;n.text&&(l=(l=(l=(l=(l=(l=(l=n.text).replace("{{value}}",i)).replace("<% value %>",i)).replace("<%value%>",i)).replace("{{percent}}",a)).replace("<% percent %>",a)).replace("<%percent%>",a),n.showPercentText=!0);var p=n.ranges&&d.classes?d.classes:"primary";return'<div class="total bar chart-completion-target chart-targeted-achievement">\n              <div class="target remaining bar" style="width: '.concat(h||0,'%;"></div>\n              <div class="completed bar ').concat(p,'" style="width: ').concat(o,'%;"></div>\n              ').concat(n.showPercentText?'<div class="chart-targeted-text l-center">'.concat(l,"</div>\n            </div>"):'<div class="audible">'.concat(a,"%</div>"))},ProcessIndicator:function(e,t,i){if(!i.steps)return"";for(var n='<div class="process-indicator compact responsive"><div class="display">',a=0;a<i.steps;a++)n+='<div class="step">\n        <div class="lines">\n          <span class="indicator '.concat(a===i?.current-1?" current processing":""," ").concat(a<i?.current?" darker":"",'"></span>\n          <span class="separator ').concat(a<i?.current?" darker":"",'"></span>\n        </div>\n      </div>');return n+"</div></div>"}},Gn={cleanExtra:function(s,e){var A,M,L,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];if(!e&&s)n=Gn.datasetToHtml(s,t);else{var a=e.settings.groupable?e.originalDataset:e.settings.dataset,o=e.table.clone(!0);(e.settings.frozenColumns.left.length||e.settings.frozenColumns.right.length)&&o.find(".datagrid-header tr:first()").html(e.headerNodes().clone(!0)),n=Gn.appendRows(a,o[0],e,t)}if(!s&&!n[0].querySelector("thead")){for(var l=n[0].querySelector("tbody"),d=n[0].createTHead(),h=d.insertRow(0),p=e.headerNodes(),v=0;v<p.length;v++){var b=p[v],w=h.insertCell(v);w.innerHTML=b.querySelector(".datagrid-header-text").textContent.trim(),w.setAttribute("class",b.classList),w.setAttribute("id",b.getAttribute("id")),b.getAttribute("data-exportable")&&w.setAttribute("data-exportable",b.getAttribute("data-exportable"))}l.parentNode.insertBefore(d,l)}return M=function(O){O.parentNode&&O.parentNode.removeChild(O)},L=[],[].slice.call((A=n)[0].querySelectorAll("tr")).forEach(function(q){q.classList.contains("is-hidden")||q.classList.contains("datagrid-expandable-row")?M(q):[].slice.call(q.querySelectorAll("th, td, div, span")).forEach(function(_){if(_.classList.contains("is-hidden"))M(_);else{var G=_.getAttribute("data-exportable");if(G&&"no"===G){var j=_.id.match(/-header-\d+/g);return j=(j=j?j[0].match(/\d+/g):null)?j[0]:_.id.slice(-1),j=parseInt(j,10),L.push(j+1),void M(_)}var X=_.getAttribute("aria-colindex");if("td"===_.tagName.toLowerCase()&&X&&-1!==L.indexOf(parseInt(X,10)))M(_);else{for([].slice.call(_.querySelectorAll(".is-hidden, .datagrid-expand-btn, .is-draggable-target, .handle, .sort-indicator, .datagrid-filter-wrapper")).forEach(function(we){return M(we)});_.attributes.length>0;)_.removeAttribute(_.attributes[0].name);var he=_.textContent;"="===he.substr(0,1)&&""!==he.substr(1,1)&&(_.textContent="'".concat(he,"'"))}}})}),n=A,e&&e.settings.exportConvertNegative&&[].slice.call(n[0].querySelectorAll("td")).forEach(function(k){k.textContent=k.textContent.replace(/^(.+)(-$)/,"$2$1")}),n},save:function(s,e,t){var i=(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],n="string"==typeof i&&/\b(xlsx|xls)\b/g.test(i),a=new Blob([s],{type:"application/csv;charset=utf-8;"});if(t&&!n){for(var o=[255,254],l=0;l<s.length;++l){var d=s.charCodeAt(l);o.push(255&d),o.push(d/256>>>0)}a=new Blob([new Uint8Array(o)],{type:"text/plain;charset=UTF-16LE;"})}if(window.URL.createObjectURL){n&&(a=new Blob([s],{type:"application/vnd.ms-excel;charset=utf-8;"}));var h=URL.createObjectURL(a),p=document.createElement("a");p.href=h,p.download=e,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(h)}else{var v=document.createElement("a");v.href=this.base64(s),v.download=e,document.body.appendChild(v),v.click(),document.body.removeChild(v)}},datasetToHtml:function(s){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t="<tbody>",i=function(l){t+="<tr>",Object.keys(s[l]).forEach(function(d,h){var p=s[l];if(e&&"id"!==d&&!d.includes("Id"))if(isNaN(p[d])){var b=Date.parse(p[d]);isNaN(b)||(p[d]=B.formatDate(b))}else{var v=parseFloat(p[d]);p[d]=B.formatNumber(v,{style:Number.isInteger(v)?"integer":"decimal"})}p&&Object.prototype.hasOwnProperty.call(p,d)&&(t+="<td>".concat(p[d],"</td>"))}),t+="</tr>"},n=0,a=s.length;n<a;n++)i(n);return t=Fe.sanitizeHTML(t+="</tbody>"),$("<table></table>").append(t)}};Gn.appendRows=function(s,e,t){var p,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(p=e)&&(p instanceof jQuery||p.constructor.prototype.jquery)?e:$(e),o="",l=(e=a[0]).querySelector("tbody");l.innerHTML="";var d=function h(p,v){if(!p._isFilteredOut){var b=t.rowHtml(p,v,v,!1,!1,v,!0,i),w=document.createElement("tr");if(w.innerHTML=b.left+b.center+b.right,o+=w.outerHTML,p.children)for(var T=0,k=p.children.length;T<k;T++)h(p.children[T],T)}};return s.forEach(function(h,p){d(h,p)}),o=Fe.sanitizeHTML(o),l.insertAdjacentHTML("beforeend",o),a},Gn.base64=function(s){return window.btoa?"data:application/vnd.ms-excel;base64,".concat(window.btoa(unescape(encodeURIComponent(s)))):"data:application/vnd.ms-excel;,".concat(unescape(encodeURIComponent(s)))},Gn.copyToDataSet=function(s,e,t,i,n){for(var a=function(k,A,M,L){for(var z=0,q=k.length;z<q;z++){var O=A.columns[L];O.formatter!==Yi.Readonly&&("input"===O.editor.name?("integer"===O.filterType||"decimal"===O.filterType||"number"===O.filterType)&&isNaN(k[z].trim())||(M[O.field]=k[z]):"input"===O.editor.name&&(isNaN(Date.parse(k[z]))||(M[O.field]=new Date(k[z])))),L++}},o=s.length,l=n.settings.columns.length,d=0;d<o;d++){var h=s[d].split("\t"),p=t;if(e<i.length)a(h,n.settings,i[e],p);else{for(var b={},w=0;w<l;w++)b[n.settings.columns[w].field]="";a(h,n.settings,b,p),i.push(b)}e++}n.renderRows(),n.syncSelectedUI(),n.pagerRefresh("bottom")},Gn.exportToExcel=function(s,e,t){var v,n=arguments.length>4?arguments[4]:void 0,d={worksheet:e||"Worksheet",table:Gn.cleanExtra(t,n,arguments.length>3&&void 0!==arguments[3]&&arguments[3])[0].innerHTML};s="".concat(s||n.element[0].id||"Export",".xls"),Gn.save((v=d,'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:Panes></x:Panes><x:DisplayGridlines></x:DisplayGridlines></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<meta http-equiv="content-type" content="text/plain; charset=UTF-8"/></head><body><table border="1px solid #999999">{table}</table></body></html>'.replace(/{(\w+)}/g,function(b,w){return v[w]})),s)},Gn.exportToCsv=function(s,e){var k,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sep=,",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4?arguments[4]:void 0,o=function(k){return/^(false|0+|null)$/gi.test(k)},l={firstLine:!0,char:",",flexChar:!0,flexUtf8:!0};if("sep=,"!==t&&!o(t)){var d=function(k){return'"'!==k?k:l.char};if((k=t)&&"object"===rt(k)&&k.constructor===Object)l.firstLine=!o(t.firstLine),l.flexChar=!o(t.flexChar),l.flexUtf8=!o(t.flexUtf8),"string"==typeof t.char&&1===t.char.length&&!o(t.char)&&(l.char=d(t.char));else if("string"==typeof t)if(1!==t.length||o(t)){if(/^sep=.$/.test(t)){var h=t.replace("sep=","");l.char=o(h)?l.char:d(h)}}else l.char=d(t)}var v=Gn.cleanExtra(e,n,i),b=!/^[\u0000-\u007f]*$/.test(v[0].textContent)&&l.flexUtf8,w=function(k,A){var M=A&&l.flexChar?"\t":l.char,L=[];return[].slice.call(k[0].querySelectorAll("tr")).forEach(function(q){var O=[];[].slice.call(q.querySelectorAll("td, th")).forEach(function(G){return O.push(G.textContent.replace(/\r?\n|\r/g,"").replace(/"/g,'""').trim())}),L.push(O.join('"'.concat(M,'"')))}),l.firstLine&&(l.flexUtf8&&!A||!l.flexUtf8&&","!==l.char)&&L.unshift(["sep=".concat(l.char)]),"".concat(l.flexUtf8?"":"\ufeff",'"').concat(L.join('"\n"'),'"')}(v,b);s="".concat(s||n.element[0].id||"Export",".csv"),Gn.save(w,s,b)};var s,i,n,a,aa=(s=H.equals,i=function(l,d){return l.reduce(function(h,p){var v=function(l,d){for(var h={},p=0,v=d.length;p<v;p++)h[d[p]]=l[d[p]];return h}(p,d);return function(l,d){return l.some(function(h){return s(h,d)})}(h,v)||h.push(v),h},[])},n=function(l,d){var h=[];return l.map(function(p,v){for(var b in d)if(d[b]!==p[b])return;p.idx=v,h.push(p)}),h},(a=function(l,d){return i(l,d).map(function(p){return{key:p,values:n(l,p).map(function(v){return v})}})}).register=function(o,l){return a[o]=function(d,h,p){return this.extra=p,a(d,h).map(l,this)}},a);aa.register("none",function(s){return $.extend({},s.key,{values:s.values})}),aa.register("sum",function(s){var e=this.extra,t=s.values.map(function(i){return i[e]}).filter(function(i){return null!=i});return $.extend({},s.key,{values:s.values},{sum:t.reduce(function(i,n){return Number(i)+Number(n)},0)})}),aa.register("max",function(s){var e=this.extra;return $.extend({},s.key,{values:s.values},{max:Math.max.apply(Math,Mi(s.values.map(function(t){return t[e]}).filter(function(t){return null!=t})))})}),aa.register("min",function(s){var e=this.extra;return $.extend({},s.key,{values:s.values},{min:Math.min.apply(Math,Mi(s.values.map(function(t){return t[e]}).filter(function(t){return null!=t})))})}),aa.register("avg",function(s){var e=this.extra,t=s.values.map(function(i){return i[e]}).filter(function(i){return null!=i});return $.extend({},s.key,{values:s.values},{avg:t.reduce(function(i,n){return Number(i)+Number(n)},0)/t.length})}),aa.register("count",function(s){var e=this.extra,t=s.values.map(function(i){return i[e]}).filter(function(i){return null!=i});return $.extend({},s.key,{values:s.values},{count:t.length})}),aa.register("list",function(s){var e=this.extra;return $.extend({},s.key,{values:s.values},{list:s.values.map(function(t){for(var i=[],n=0,a=e.list.length;n<a;n++)t[e.list[n]]&&(!e.exclude||!t[e.exclude])&&i.push({value:t[e.list[n]],key:e.list[n]});return i})})});var up={aggregate:function(s,e){for(var t={},i=this,n=function(){if(e[a].aggregator){var d=e[a].field;i.sum=function(w,T){if(T._isFilteredOut)return w;var k;k=d.indexOf(".")>-1?d.split(".").reduce(function(L,z){return L?L[z]:""},T):T[d],k=Number(k);var A=qn.decimalPlaces(k),M=qn.decimalPlaces(w);return Number((w+k).toFixed(Math.max(A,M)))};var h=s.reduce(i[e[a].aggregator],0);if(d.indexOf(".")>-1)for(var p=t,v=0,b=d.split(".").length;v<b;v++)v===d.split(".").length-1?p[d.split(".")[v]]=h:(d.split(".")[v]in p||(p[d.split(".")[v]]={}),p=p[d.split(".")[v]]);else t[d]=h}},a=0,o=e.length;a<o;a++)n();return t}},as="lookup",Qd="lookup-datagrid";function Bh(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,i=[];return null!=s&&s?.length||null!=e&&e?.length?null!=e&&e?.length?s.length?(s.forEach(function(n){var a=e.find(function(o){return o.name===n.name});i.push(a||{name:n.name,value:"".concat(n.value,"-").concat(t)})}),i):e:(i=s.map(function(n){return{name:n.name,value:"".concat(n.value,"-").concat(t)}}),i):i}var mr={click:null,field:"id",title:null,icon:"icon-search-list",buttons:[],options:null,beforeShow:null,modalContent:null,editable:!0,autoApply:!0,validator:null,autoWidth:!1,clickArguments:{},delimiter:",",minWidth:null,clearable:!1,attributes:null,tabbable:!0,dblClickApply:!1,allowDuplicates:!1,cssClass:null};function Rh(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,mr),this.init()}function hp(s,e,t,i,n,a,o,l,d){if(a.align&&s.addClass("l-".concat(a.align,"-text")),a.maxLength&&s.attr("maxlength",a.maxLength),a.uppercase&&s.addClass("uppercase-text"),a.mask&&"function"==typeof a.mask){var h=a.mask(e,t,i,a,d);s.mask({pattern:h,mode:a.maskMode})}else if(a.maskOptions&&"function"==typeof a.maskOptions){var p=a.maskOptions(e,t,i,a,d);s.mask(p)}else a.mask&&s.mask({pattern:a.mask,mode:a.maskMode});var v={patternOptions:{allowNegative:!0,allowDecimal:!0,integerLimit:4,decimalLimit:2,symbols:{thousands:B.currentLocale.data.numbers?B.currentLocale.data.numbers.group:",",decimal:B.currentLocale.data.numbers?B.currentLocale.data.numbers.decimal:".",negative:B.currentLocale.data.numbers?B.currentLocale.data.numbers.minusSign:"-"}},process:"number"},b=!1;a.maskOptions&&(b=!0),a.numberFormat&&(b=!0,v={patternOptions:{decimalLimit:a.numberFormat.maximumFractionDigits}}),a.maskOptions&&"function"==typeof a.maskOptions&&(b=!1),b&&(a.maskOptions=H.extend(!0,{},v,a.maskOptions),s.mask(a.maskOptions)),(!a.align||"right"!==a.align)&&s.removeClass("is-number-mask")}Rh.prototype={get isFocused(){var s,e,t=document.activeElement,i=this.element.is(t),n=null===(s=this.element.parent(".lookup-wrapper")[0])||void 0===s?void 0:s?.contains(t),a=null===(e=this.modal)||void 0===e?void 0:e?.element[0].contains(t);return i||n||a},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=!!this.inlineLabelText.length,this.isContentOverflowing=!1,this.build(),this.handleEvents(),this.grid=null,this.selectedRows=null},build:function(){var e=this,t=this.element,n=function i(){var p="lookup-wrapper";return t.is(".input-xs")&&(p+=" xs"),t.is(".input-sm")&&(p+=" sm"),t.is(".input-lg")&&(p+=" lg"),p}();if(this.element.is(".has-actions")&&(n+=" has-actions-wrapper"),this.settings.noMarginWrapper&&(n+=" no-margin"),this.isInlineLabel)this.inlineLabel.addClass(n);else if(this.container=$('<span class="'.concat(n,'"></span>')),this.element.is(".field-options")){var o=this.element.closest(".field").find(".btn-actions");t.add(o).add(o.next(".popupmenu")).wrapAll(this.container)}else t.wrap(this.container);var l=this.element.next();if(l.is("button.trigger"))this.icon=l;else{this.icon=$('<button class="btn-icon trigger" type="button">\n        <span class="audible"></span>\n        '.concat($.createIcon(this.settings.icon),"\n      </button>"));var d=this.icon.children(".icon");"icon-search-list"!==this.settings.icon?d.addClass("has-custom-icon"):xe.rtl&&d.addClass("icon-rtl-rotate")}t.after(this.icon),t.hasClass("hidden")&&this.icon.addClass("hidden"),this.settings.autoWidth&&this.applyAutoWidth(),this.settings.minWidth||(this.settings.minWidth=this.settings.options&&this.settings.options.paging?482:400),t.attr("data-mask")&&t.mask(),this.element.is(":disabled")&&this.disable(),this.settings.editable||this.element.attr("readonly","true").addClass("is-not-editable"),this.makeTabbable(!this.element.is(":disabled")&&"-1"!==this.element.attr("tabindex")&&this.settings.tabbable),this.settings.clearable&&t.searchfield({clearable:!0,attributes:this.settings.attributes,tabbable:!1}),this.settings.clearable&&this.settings.clear&&t.on("cleared",function(p){e.settings.clear(p,e,e.settings.clearArguments)}),this.element.parent(".lookup-wrapper").next().is(".btn-actions")&&(this.element.data("fieldoptions")&&this.element.data("fieldoptions").destroy(),this.element.fieldoptions()),this.addAria(),void 0===t.attr("autocomplete")&&t.attr("autocomplete","off"),Array.isArray(this.settings.attributes)&&(H.addAttributes(t,this,this.settings.attributes,"input"),H.addAttributes(this.icon,this,this.settings.attributes,"trigger"))},addAria:function(){this.label=this.isInlineLabel?this.inlineLabelText:$('label[for="'.concat(this.element.attr("id"),'"]'));var e="".concat(B.translate("Lookup"),". ").concat(B.translate("PressDown")),t=this.label.children("span.audible");t.length?t.text(e):this.label.append('<span class="audible">'.concat(e,"</span>"));var i=B.translate("LookupTriggerButton");this.icon.children("span.audible").text(i)},handleEvents:function(){var e=this;this.icon.on("click.lookup",function(t){e.openDialog(t)}),this.element.on("keyup.lookup",function(t){$("#autocomplete-list").length>0||40===t.which&&e.openDialog(t)})},setTooltip:function(){this.element.tooltip({content:this.element.val()})},openDialog:function(e){var t=this;if(!(this.isChanged=!1,this.isOpen||!1===t.element.triggerHandler("beforeopen")||t.isDisabled()||t.isReadonly()&&!t.element.hasClass("is-not-editable"))){if(t.settings.click)return void t.settings.click(e,this,t.settings.clickArguments);if(this.isOpen=!0,this.settings.beforeShow)return this.element.triggerHandler("start"),void this.settings.beforeShow(this,function(l){var d=t.element&&t.element.is(":visible");return l&&t.createGrid(l),!d||"boolean"==typeof l&&!1===l?(t.isOpen=!1,!1):(t.createModal(),t.element.triggerHandler("complete"),t.element.trigger("open",[t.modal,t.grid]),t.settings.validator&&t.settings.validator(t.element,t.modal,t.grid),!0)});if(this.settings.options){t.createModal(),t.element.trigger("open",[t.modal,t.grid]),t.modal.element.find(".btn-actions").removeClass("is-selected"),t.grid&&t.grid.cellNode(0,0,!0).attr("tabindex","0");var a=t.modal.element.find(".toolbar .more > .btn-actions");a.length&&setTimeout(function(){H.fixSVGIcons(a)},600),t.element.trigger("afteropen",[t.modal,t.grid]),t.settings.validator&&t.settings.validator(t.element,t.modal,t.grid)}}},createModal:function(){var e=this,t='<div id="'.concat(Qd,'"></div>'),i=$('label[for="'.concat(e.element.attr("id"),'"]')),a=function n(){var p,v;return e.isInlineLabel?e.inlineLabelText:i.length?i.clone().find("span").remove().end().text():e.settings.title?e.settings.title:null!==(p=e.settings)&&void 0!==p&&null!==(p=p?.options)&&void 0!==p&&null!==(p=p?.toolbar)&&void 0!==p&&p?.title?null===(v=e.settings)||void 0===v||null===(v=v?.options)||void 0===v||null===(v=v?.toolbar)||void 0===v?void 0:v?.title:""}(),o=this.settings.modalContent;o&&o instanceof jQuery&&(t=o,o.show()),o&&!(o instanceof jQuery)&&(t=o);var l=this.settings.buttons;(this.settings.options&&"multiple"===this.settings.options.selectable&&0===l.length||!e.settings.autoApply&&0===l.length)&&(l=[{text:B.translate("Cancel"),click:function(v,b){b.oldActive=e.icon,b.close()}},{text:B.translate("Apply"),click:function(v,b){e.insertRows(),b.oldActive=e.icon,b.close()},isDefault:!0}]),this.settings.options&&"single"===this.settings.options.selectable&&0===l.length&&e.settings.autoApply&&(l=[{text:B.translate("Cancel"),click:function(v,b){b.oldActive=e.icon,b.close()}},{text:B.translate("Apply"),click:function(v,b){b.oldActive=e.icon,b.close(),e.insertRows()},isDefault:!0}]);var h={triggerButton:this.element,title:a,content:t,buttons:l,cssClass:"lookup-modal".concat(this.settings.options&&this.settings.options.toolbar&&this.settings.options.toolbar.keywordFilter?"":" lookup-no-search"," ").concat(this.settings.cssClass?this.settings.cssClass:""),attributes:Bh(this.settings.attributes,[],"modal")};e.settings.modalSettings&&(h=ca(ca({},h),e.settings.modalSettings)),$("body").modal(h).off("open.lookup").on("open.lookup",function(){e.createGrid()}).off("close.lookup").on("close.lookup",function(){delete e.isOpen,e.element.triggerHandler("close",[e.modal,e.grid])}),e.modal=$("body").data("modal"),this.settings.title||e.modal.element.find(".modal-title").append(' <span class="datagrid-result-count"></span>'),e.modal.element.off("afterclose.lookup").on("afterclose.lookup",function(){var p;e.isContentOverflowing=e.element[0].scrollWidth>e.element[0].offsetWidth;var v=e.element.data("tooltip");"multiple"===(null===(p=e.settings.options)||void 0===p?void 0:p?.selectable)&&(e.isContentOverflowing?e.setTooltip():v&&!e.isContentOverflowing&&v.destroy()),e.closeTearDown()}),setTimeout(function(){$(".modal.is-visible .searchfield").on("keypress.lookup",function(p){return 13!==p.keyCode})},300)},closeTearDown:function(){var e=$(".modal.is-visible .searchfield").off("keypress.lookup");e.data()&&e.data("searchfield")&&e.data("searchfield").destroy(),e.data()&&e.data("searchfield")&&(e.data("searchfield").destroy(),e.removeData()),e=null,this.grid&&this.grid.destroy&&($(this.grid.element).off("selected.lookup"),this.grid.deSelectAllRows(),this.grid.clearFilter(),this.grid.destroy(),this.grid=null)},doMerge:function(){for(var e={},t=[],i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];for(var o=0;o<n.length;o++)for(var l=0;l<n[o].length;l++)!0!==e[n[o][l]]&&(t[t.length]=n[o][l],e[n[o][l]]=!0);return t},createGrid:function(e){var t,a,i=this,n=this;e?(a=e,Qd=e.attr("id"),n.settings.options=e.data("datagrid").settings):a=n.modal.element.find("#".concat(Qd)),this.settings.minWidth&&(a=this.applyMinWidth(a)),n.settings.dblClickApply&&(n.settings.options.dblClickApply=n.settings.dblClickApply),n.settings.options&&("single"===n.settings.options.selectable&&n.settings.autoApply&&(n.settings.options.cellNavigation=!1,a.find("tr").addClass("is-clickable")),n.settings.options.isList=!0,n.settings.attributes&&(n.settings.options.attributes=Bh(n.settings.attributes,[],"datagrid")),a.data("datagrid")||a.datagrid(n.settings.options)),n.grid=a.data("datagrid"),!this.settings.title&&n.modal&&n.modal.element.find(".title").not(".selection-count").remove();var o=null===(t=this.settings)||void 0===t||null===(t=t?.options)||void 0===t||null===(t=t?.toolbar)||void 0===t?void 0:t?.keywordFilter;if(!o&&n.modal&&n.modal.element.find(".toolbar").appendTo(n.modal.element.find(".modal-header")),o&&n.grid&&(!n.grid.filterExpr||n.grid.filterExpr&&n.grid.filterExpr[0]&&""!==n.grid.filterExpr[0].value)&&n.grid.keywordSearch(""),a.off("selected.lookup"),n.initValues)n.initValues.forEach(function(h){h&&n.selectGridRows(h.value.toString())}),delete n.initValues;else{var l=n.element.val();l&&!n.settings.options.source&&("multiple"===n.settings.options.selectable&&l.indexOf(this.settings.delimiter)>1?l.split(this.settings.delimiter):[l]).forEach(function(h){return n.selectGridRows(h.toString())})}this.settings.options.source&&a.off("afterpaging.lookup").on("afterpaging.lookup",function(h,p){if(n.settings.options.source){var v=n.element.val();i.selectGridRows(v)}i.element.trigger("afterpaging",[p,i])}),this.settings.options&&(this.settings.dblClickApply&&"single"===this.settings.options.selectable&&a.on("ischanged.lookup",function(){i.isChanged=!0}),a.on("selected.lookup",function(h,p,v,b){n.settings.options.source&&"multiple"===n.settings.options.selectable?n.element.trigger("selected",[p,v,b,n]):(i.isChanged=!0,"deselect"===v&&(n.grid.recentlyRemoved||(n.grid.recentlyRemoved=[]),n.grid.recentlyRemoved.push(b)),p&&0!==p.length?(n.settings.validator&&n.settings.validator(n.element,n.modal,n.grid),"single"===n.settings.options.selectable&&n.settings.autoApply&&"deselectall"!==v&&(n.modal.close(),n.insertRows()),n.element.trigger("selected",[p,v,b,n])):"deselect"===v&&n.element.trigger("selected",[p,v,b,n]))})),this.settings.options.source&&this.grid.element.one("afterrender.lookup",function(){var h,p=i.settings.options.source&&(null===(h=i.selectedRows)||void 0===h?void 0:h?.length);if(!n.initValues||n.initValues&&!n.initValues.length||p)if(n.initValues=[],p&&!n.element.val())setTimeout(function(){var T,k=null===(T=i.grid)||void 0===T||null===(T=T?.pagerAPI)||void 0===T?void 0:T?.state;if(k){var A={min:k.activePage*k.pagesize-k.pagesize,max:k.activePage*k.pagesize-1};n.selectedRows.forEach(function(L){var z;null!=n.initValues&&n.initValues.push({value:L.data[i.settings.field],visited:(z=L,z.pagingIdx>=A.min&&z.pagingIdx<=A.max)})}),n.grid._selectedRows=n.selectedRows.slice(),n.grid.syncSelectedRows(),n.grid.syncSelectedUI()}},310);else{var b=i.element.val();b&&(b.indexOf(i.settings.delimiter)>1?b.split(i.settings.delimiter):[b]).forEach(function(T){n.initValues.push({value:T,visited:!!i.grid.settings.dataset.filter(function(k){return function(k,A){return(k[i.settings.field]||"").toString()===A.toString()}(k,T)}).length})})}})},updateSelectedRows:function(e){var t=this;if(this.settings.options.source&&(e=Array.isArray(e)?e:[],this.selectedRows.length!==e.length)){this.selectedRows=e.slice();var i=this.selectedRows.map(function(n){return n.data?n.data[t.settings.field]:""}).join(this.settings.delimiter);this.grid&&(this.grid._selectedRows=this.selectedRows.slice(),this.grid.syncSelectedRows(),this.grid.syncSelectedUI()),this.element.val(i).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows])}},selectGridRows:function(e){var t=e,i=!1;if(e){if(this.grid&&this.settings.options.source)for(var n=this.grid._selectedRows.length-1;n>-1;n--)isNaN(this.grid._selectedRows[n].idx)&&this.grid._selectedRows.splice(n,1);if(!(t.indexOf(this.settings.delimiter)>1)){var k=[];k.push(t);for(var A=!1,M=!1,L=0;L<k.length;L++){if(this.grid.recentlyRemoved)for(var z=0;z<this.grid.recentlyRemoved.length;z++)this.grid.recentlyRemoved[z][this.settings.field].toString()===k[L].toString()&&(M=!0);if(!M){if(A=this.selectRowByValue(this.settings.field,k[L]),this.grid&&this.settings.options.source&&!A){for(var O=0;O<this.grid._selectedRows.length;O++)this.grid._selectedRows[O].data[this.settings.field].toString()===k[L].toString()&&!0;if(this.grid.recentlyRemoved)for(var _=0;_<this.grid.recentlyRemoved.length;_++)this.grid.recentlyRemoved[_][this.settings.field].toString()===k[L].toString()&&!0;i=!0}if(A&&this.grid.recentlyRemoved)for(var j=0;j<this.grid.recentlyRemoved.length;j++)this.grid.recentlyRemoved[j][this.settings.field].toString()===k[L].toString()&&(i=!1)}}return void(i&&(this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(k.length," ").concat(B.translate("Selected"))),this.grid.syncSelectedUI()))}for(var a=t.split(this.settings.delimiter),o=!1,l=!1,d=0;d<a.length;d++){if(l=!1,this.grid.recentlyRemoved)for(var h=0;h<this.grid.recentlyRemoved.length;h++)this.grid.recentlyRemoved[h][this.settings.field].toString()===a[d].toString()&&(l=!0);if(!l&&(o=this.selectRowByValue(this.settings.field,a[d]),this.grid&&this.settings.options.source&&!o)){for(var p=!1,v=0;v<this.grid._selectedRows.length;v++)this.grid._selectedRows[v].data[this.settings.field].toString()===a[d].toString()&&(p=!0);if(this.grid.recentlyRemoved)for(var b=0;b<this.grid.recentlyRemoved.length;b++)this.grid.recentlyRemoved[b][this.settings.field].toString()===a[d].toString()&&(p=!0);if(!p){var w={};w[this.settings.field]=a[d],this.grid._selectedRows.push({data:w})}i=!0}}i&&(this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(a.length," ").concat(B.translate("Selected"))),this.grid.syncSelectedUI()),this.selectRowByValue(this.settings.field,t)}},selectRowByValue:function(e,t){if(!this.settings.options)return!1;var i=this.settings.options.source?this.grid.settings.dataset:this.settings.options.dataset,n=[];if(!i)return!1;for(var a=0;a<i.length;a++){var o,l,d=!1;if("function"==typeof this.settings.match&&this.settings.match(t,i[a],this.element,this.grid)&&(d=!0),"function"!=typeof this.settings.match&&(null===(o=i[a][e])||void 0===o||null==(l=o)?void 0:l.toString())===t?.toString()&&(d=!0),d){var h=this.grid.settings.source?this.grid.actualRowIndex(this.grid.tableBody.find("tr").eq(a)):a;n.push(h)}}return!!(this.grid&&n.length>0)&&(this.grid.selectRows(n,!1,!0),!0)},insertRows:function(){if(this.isChanged||this.settings.options.source){var e=[];this.selectedRows=this.grid.selectedRows().slice();for(var t=0;t<this.selectedRows.length;t++){var i;i="function"==typeof this.settings.field?this.settings.field(this.selectedRows[t].data,this.element,this.grid):this.selectedRows[t].data[this.settings.field],e.push(i);var n=this.selectedRows[t].idx;this.settings.options.dataset&&this.settings.options.dataset[n]&&delete this.settings.options.dataset[n]._selected}this.settings.allowDuplicates||(e=e.filter(function(a,o){return e.indexOf(a)===o})),this.element.val(e.join(this.settings.delimiter)).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows]),this.applyAutoWidth(),this.element.focus()}},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1).removeClass("is-not-editable"),this.element.closest(".field").removeClass("is-disabled"),this.icon.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.element.closest(".field").addClass("is-disabled"),this.icon.prop("disabled",!0)},readonly:function(){this.element.prop("readonly",!0),this.icon.prop("disabled",!1)},applyAutoWidth:function(){var e=this.element.val(),t=e.length,i=e===e.toUpperCase(),n=!isNaN(e);this.element.attr("size",t+(i&&!n?2:1))},applyMinWidth:function(e){if(null==this.settings.minWidth)return e;if($(window).width()>this.settings.minWidth){this.modal.element.addClass("has-minwidth");var t="".concat(this.settings.minWidth,"px");e.css({"min-width":t})}return e},isDisabled:function(){return this.element.prop("disabled")},isReadonly:function(){return this.element.prop("readonly")},makeTabbable:function(e){this.icon.attr("tabIndex",e?0:-1)},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings))},updateDataset:function(e,t){this.settings.options.dataset=e,t&&t.activePage&&(this.settings.options.activePage=t.activePage),t&&t.pagesize&&(this.settings.options.pagesize=t.pagesize),this.grid&&this.grid.updateDataset(e,t)},destroy:function(){$(".modal .searchfield").off("keypress.lookup"),$("body").off("open.lookup close.lookup"),this.icon.off("click.lookup"),this.icon.remove(),this.element.off("keyup.lookup"),this.element.unwrap(),this.modal&&this.modal.element&&(this.modal.element.off("afterclose.lookup"),"function"==typeof this.modal.destroy&&this.modal.destroy()),$.removeData(this.element[0],as)}},$.fn.lookup=function(s){return this.each(function(){var e=$.data(this,as);e?e.updated(s):e=$.data(this,as,new Rh(this,s))})};var Nc={Input:function(e,t,i,n,a,o,l,d){this.name="input",this.originalValue=i,this.useValue=!!a.inlineEditor,this.init=function(){this.input=a.inlineEditor?n.find("input"):$('<input type="'.concat(a.inputType||"text",'" autocomplete="off"/>')).appendTo(n),hp(this.input,e,t,i,0,a,0,0,d)},this.val=function(h){var p;return h&&this.input.val(h),a&&a.numberFormat&&"percent"===a.numberFormat.style?(p=this.input.val().trim().replace(/(\s%?|%)$/g,""),B.parseNumber(p)/100):a.numberFormat?B.parseNumber(this.input.val(),a.numberFormat):this.input.val()},a.inlineEditor||(this.focus=function(){this.input.focus(),l.settings.selectOnEdit&&this.input.select()}),this.destroy=function(){var h=this;a.inlineEditor||setTimeout(function(){h.input.remove()},0)},this.init()},Textarea:function(e,t,i,n,a,o,l){this.name="textarea",this.originalValue=i,this.init=function(){n.addClass("datagrid-textarea-cell-wrapper");var d=n.get(0).scrollHeight,h=a.editorOptions&&a.editorOptions.minHeight?'style="min-height: '.concat(a.editorOptions.minHeight,'px"'):"";this.input=$("<textarea ".concat(h,' class="textarea">').concat(this.originalValue,"</textarea>")).appendTo(n);var p=a.editorOptions?a.editorOptions:{};"characterCounter"in p||(p.characterCounter=!1),this.api=this.input.data("autogrow-start-height",d).textarea(a.editorOptions).data("textarea"),this.input.on("click.textareaeditor",function(v){v.stopPropagation()}),a.maxLength&&this.input.attr("maxlength",a.maxLength),a.uppercase&&this.input.addClass("uppercase-text")},this.val=function(d){return d&&this.input.focus().val(d),this.input.val()},this.focus=function(){this.input.focus(),l.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var d=this;n.removeClass("datagrid-textarea-cell-wrapper"),setTimeout(function(){d.input.off("click.textareaeditor"),d.input.remove()},0)},this.init()},Editor:function(e,t,i,n,a,o,l){this.name="editor",this.originalValue=i,this.init=function(){var d=this,h=$.extend({},{buttons:{editor:["header1","header2","separator","bold","italic","underline","separator","foreColor","separator","justifyLeft","justifyCenter","justifyRight"],source:[]},excludeButtons:{editor:[]}},a.editorOptions);this.editorWidth=l.setUnit(h.width||n.outerWidth()),delete h.width,n[0].innerHTML='<div class="editor-wrapper" style="width: '.concat(this.editorWidth,';">\n          <div class="editor" data-init="false">').concat(Fe.sanitizeHTML(Fe.unescapeHTML(i)),"</div>\n        </div>"),this.td=n.closest("td"),this.input=$(".editor",n),this.input.popover({content:$(".editor-wrapper",n),placementOpts:{x:0,y:"-".concat(parseInt(n[0].style.height,10)+35),parent:this.td,parentXAlignment:B.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",tooltipElement:"#editor-popup",extraClass:"editor-popup",onHidden:function(){l.commitCellEdit(d.input)}}).editor(h).on("keydown.editor",function(p){var v=p.which||p.keyCode||p.charCode||0;if((p.ctrlKey||p.metaKey)&&(13===v||10===v)){var b=d.input.data("tooltip");b&&(b.hide(),l.setNextActiveCell(p))}}),H.fixSVGIcons($("#editor-popup"))},this.val=function(){return Fe.escapeHTML(this.input.html())},this.focus=function(){var d=this;setTimeout(function(){d.input.focus()},0)},this.destroy=function(){var d=this;n.removeAttr("style"),l.quickEditMode=!1,d.input.data("editor")&&(d.input.destroy(),d.input.remove())},this.init()},Checkbox:function(e,t,i,n,a,o,l){this.name="checkbox",this.originalValue=i,this.useValue=!0,this.container=n,this.init=function(){this.input=$('<input type="checkbox" class="checkbox"/>').appendTo(n),this.input.after('<label class="checkbox-label"></label>'),a.align&&this.input.addClass("l-".concat(a.align,"-text"))},this.val=function(d){var h;if(void 0===d)return this.input.prop("checked");h=a.isChecked?a.isChecked(d):d,("click"===o.type||"keydown"===o.type&&32===o.keyCode)&&!$(o.target).is(".datagrid-checkbox-wrapper, .datagrid-cell-wrapper")&&(h=!h,l.setNextActiveCell(o)),this.input.prop("checked",h)},this.focus=function(){this.input.trigger("focusout"),this.container.parent().focus()},this.destroy=function(){var d=this;setTimeout(function(){d.input.next(".checkbox-label").remove(),d.input.remove()},0)},this.init()},Colorpicker:function(e,t,i,n,a,o,l){this.name="colorpicker",this.originalValue=i,this.useValue=!0,i=Fe.stripTags(i),this.init=function(){this.input=$('<input id="colorpicker-'.concat(t,'" name="colorpicker-').concat(t,'" class="colorpicker" value="').concat(i,'" type="text" autocomplete="off"/>')).appendTo(n),this.input.colorpicker(a.editorOptions)},this.val=function(d){return d?this.input.val(d):this.input.val()},this.focus=function(){var d=this;this.input.trigger("openlist"),l.rowNodes(e).removeClass("is-hover-row"),this.input.focus(),l.settings.selectOnEdit&&this.input.select(),this.input.off("listclosed").on("listclosed",function(){l.commitCellEdit(d.input),n.parent("td").focus()})},this.destroy=function(){},this.init()},MultiSelect:function(e,t,i,n,a,o,l,d){this.name="multiselect",this.originalValue=i,this.useValue=!0,this.cell=l.activeCell,this.init=function(){if(a.inlineEditor)this.input=n.find("select");else{if(this.input=$('<select class="multiselect"></select>').appendTo(n),a.options){var h,p,v;i=l.fieldValue(d,a.field);for(var b=a.caseInsensitive&&"string"==typeof i?i.toLowerCase():i,w=0;w<a.options.length;w++)h=$("<option></option>"),p=a.options[w],v=a.caseInsensitive&&"string"==typeof p.value?p.value.toLowerCase():p.value,(p.selected||b===v)&&(h.attr("selected","true"),this.originalValue=v),h.attr("value",p.value).attr("id",p.id).attr("data-type",rt(p.value)),h.text(p.label),this.input.append(h)}var T=a.editorOptions||{};(function k(){return T.cssClass&&/is-editing/g.test(T.cssClass)})()||(T.cssClass=T.cssClass||"",T.cssClass+=" is-editing"),this.input.multiselect(T),this.input.data("multiselect").settings.sourceArguments={column:a,container:n,grid:l,cell:t,event:o,row:e,rowData:d,value:i}}},this.val=function(h){if(this.datasetValue=h,void 0!==h){var p=a.caseInsensitive&&"string"==typeof h?h.toLowerCase():h;this.input.val(h),this.input.find("option").each(function(){var T=$(this),k=T.attr("value"),A=T.attr("data-type"),M=k;"number"===A?M=parseFloat(k):"boolean"===A?M="true"===k:"string"===A&&a.caseInsensitive&&(M=k.toLowerCase()),M===p&&T.attr("selected","true")})}var v=this.input.find(":selected"),b=v.attr("value"),w=v.attr("data-type");return v.length>1&&(b=[],v.map(function(T,k){return b.push(k.value)})),"number"===w?b=parseFloat(b):"boolean"===w&&(b="true"===b),void 0===b&&(b=v.text()),b},this.focus=function(){var h=this;if("click"===o.type?(this.input.trigger("openlist"),l.rowNodes(e).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus(),!l.settings.selectOnEdit){var v=$("#dropdown-search")[0];if(v)if("number"==typeof v.selectionStart)v.selectionEnd=v.value.length,v.selectionStart=v.selectionEnd;else if(typeof v.createTextRange<"u"){var b=v.createTextRange();b.collapse(!1),b.select()}}this.input.off("listclosed").on("listclosed",function(w,T){l.commitCellEdit(h.input),"select"!==T?"tab"===T&&setTimeout(function(){n.parent("td").focus()},100):n.parent("td").focus()})},this.destroy=function(){},this.init()},Dropdown:function(e,t,i,n,a,o,l,d){this.name="dropdown",this.originalValue=i,this.useValue=!0,this.cell=l.activeCell,this.init=function(){var h=this;if(a.inlineEditor)this.input=n.find("select");else{if(this.input=$('<select class="dropdown"></select>').appendTo(n),a.options){var p,v,b;i=l.fieldValue(d,a.field);for(var w=a.caseInsensitive&&"string"==typeof i?i.toLowerCase():i,T=0;T<a.options.length;T++)p=$("<option></option>"),v=a.options[T],b=a.caseInsensitive&&"string"==typeof v.value?v.value.toLowerCase():v.value,(v.selected||w===b)&&(p.attr("selected","true"),this.originalValue=b),p.attr("value",v.value).attr("id",v.id).attr("data-type",rt(v.value)),p.text(v.label),this.input.append(p)}var k=a.editorOptions||{};(function A(){return k.cssClass&&/is-editing/g.test(k.cssClass)})()||(k.cssClass=k.cssClass||"",k.cssClass+=" is-editing"),this.input.dropdown(k),this.input.on("requestend",function(){h.val(h.datasetValue)}),this.input.data("dropdown").settings.sourceArguments={column:a,container:n,grid:l,cell:t,event:o,row:e,rowData:d,value:i}}},this.val=function(h){if(this.datasetValue=h,void 0!==h){var p=a.caseInsensitive&&"string"==typeof h?h.toLowerCase():h;this.input.val(h),this.input.find("option").each(function(){var T=$(this),k=T.attr("value"),A=T.attr("data-type"),M=k;"number"===A?M=parseFloat(k):"boolean"===A?M="true"===k:"string"===A&&a.caseInsensitive&&(M=k.toLowerCase()),M===p&&T.attr("selected","true")})}var v=this.input.find(":selected"),b=v.attr("value"),w=v.attr("data-type");return"number"===w?b=parseFloat(b):"boolean"===w&&(b="true"===b),void 0===b&&(b=v.text()),b},this.focus=function(){var h=this;if("click"===o.type?(this.input.trigger("openlist"),l.rowNodes(e).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus(),!l.settings.selectOnEdit){var v=$("#dropdown-search")[0];if(v)if("number"==typeof v.selectionStart)v.selectionEnd=v.value.length,v.selectionStart=v.selectionEnd;else if(typeof v.createTextRange<"u"){var b=v.createTextRange();b.collapse(!1),b.select()}}this.input.off("listclosed").on("listclosed",function(w,T){l.commitCellEdit(h.input),"select"!==T?"tab"===T&&setTimeout(function(){n.parent("td").focus()},100):n.parent("td").focus()})},this.destroy=function(){},this.init()},Date:function(e,t,i,n,a,o,l){this.name="date",this.originalValue=i,this.init=function(){this.input=$('<input class="datepicker" autocomplete="off"/>').appendTo(n),a.editorOptions||(a.editorOptions={}),a.editorOptions.dateFormat||(a.editorOptions.dateFormat=a.dateFormat),"boolean"!=typeof a.editorOptions.tabbable&&(a.editorOptions.tabbable=!1),this.input.datepicker(a.editorOptions)},this.val=function(d){return("0000"===d||"000000"===d||"00000000"===d)&&(d=""),d&&this.input.val(d),Yi.Date(e,t,this.input.val(),a,!0)},this.focus=function(){var d=this;this.input.focus(),l.settings.selectOnEdit&&this.input.select(),"click"===o.type&&$(o.target).is(".icon")&&this.input.parent().find(".icon").trigger("click"),this.input.on("listclosed",function(){setTimeout(function(){d.input.trigger("focusout"),n.parent().focus(),l.setNextActiveCell(o)},1)})},this.destroy=function(){var d=this;setTimeout(function(){l.quickEditMode=!1,d.input.remove()},0)},this.init()},Fileupload:function(e,t,i,n,a,o,l){var d=this,h=H.mergeSettings(void 0,a.editorOptions,{allowedTypes:"*"}),p=h.allowedTypes.split(/[\s|]+/g),v=H.uniqueId(this,"fileupload-".concat(e,"-").concat(t,"-")),b=h.useMultiple?" multiple":"",w=h.isDisabled?" disabled":"",T="";if(1===p.length)"*"!==p[0]&&(T=".".concat(Fe.ensureAlphaNumeric(p[0])));else for(var k=0,A=p.length;k<A;k++)T+=".".concat(Fe.ensureAlphaNumeric(p[k])+(k!==A-1?",":""));""!==T&&(T=' accept="'.concat(T,'"')),this.name="fileupload",this.originalValue=i,this.status="init",this.useValue=!0,this.init=function(){v=Fe.ensureAlphaNumeric(v),b=Fe.ensureAlphaNumeric(b),w=Fe.ensureAlphaNumeric(w),this.input=$('<input id="'.concat(v,'" name="').concat(v,'" class="fileupload" type="file" ').concat(T).concat(b).concat(w,' autocomplete="off"/>')),n.append("<label>".concat(this.input[0].outerHTML,"</label>")),this.api=this.input.fileupload(a.editorOptions).data("fileupload"),this.input.closest("td").addClass("is-fileupload").find("label:eq(1)").addClass("audible")},this.val=function(M){var L=this;return new Promise(function(z){setTimeout(function(){var q;M?(M=Fe.stripTags(M),L.input.attr("value",M),q=M):q=L.input.val(),z(q)},300)})},this.focus=function(){var L=function(){""!==d.originalValue&&(d.status="clear"),l.commitCellEdit(d.input)},z=function(){d.api&&($("body").one("focusin.fileuploadeditor",function(){setTimeout(function(){"change"!==d.status&&(d.status="cancel",l.commitCellEdit(d.input))},100)}),d.api.fileInput.trigger("click"))};if(d.input.on("change.fileuploadeditor",function(){d.status="change",l.commitCellEdit(d.input)}),"keydown"===o.type){var q=o.which||o.keyCode||o.charCode||0;8===q||46===q?L():13===q||10===q?z():l.commitCellEdit(d.input)}if("click"===o.type){var O=$(o.target);O.is(".icon-close")?L():O.is(".icon-fileupload")?z():l.commitCellEdit(d.input)}},this.destroy=function(){d.input.off("change.fileuploadeditor"),l.quickEditMode=!1,d.api&&d.api.destroy()},this.init()},Time:function(e,t,i,n,a,o,l){this.name="time",this.originalValue=i,this.init=function(){this.input=$('<input class="timepicker" autocomplete="off" />').appendTo(n),a.editorOptions||(a.editorOptions={}),"boolean"!=typeof a.editorOptions.tabbable&&(a.editorOptions.tabbable=!1),this.api=this.input.timepicker(a.editorOptions).data("timepicker")},this.val=function(d){return d&&this.input.val(d),this.input.val()},this.focus=function(){var d=this;this.input.focus(),l.settings.selectOnEdit&&this.input.select(),"click"===o.type&&$(o.target).is(".icon")&&this.input.parent().find(".icon").trigger("click"),this.api.trigger.on("hide.editortime",function(){setTimeout(function(){d.input.trigger("focusout"),n.parent().focus(),l.setNextActiveCell(o)},1)})},this.destroy=function(){var d=this;d.api&&d.api.trigger&&d.api.trigger.off("hide.editortime"),setTimeout(function(){l.quickEditMode=!1,d.input.remove()},0)},this.init()},Lookup:function(e,t,i,n,a,o,l,d){this.name="lookup",this.originalValue=i,this.init=function(){this.input=$('<input class="lookup '.concat("right"===a.align?"align-text-right":"",'" data-init="false" autocomplete="off" />')).appendTo(n),hp(this.input,e,t,i,0,a,0,0,d),a.editorOptions||(a.editorOptions={}),a.editorOptions.options||(a.editorOptions.options={}),a.editorOptions.options.toolbar||(a.editorOptions.options.toolbar={}),a.editorOptions.options.toolbar.title||(a.editorOptions.options.toolbar.title=a.name),void 0===a.editorOptions.tabbable&&(a.editorOptions.tabbable=!1),this.input.lookup(a.editorOptions),n.find("span.trigger").attr("tabindex","-1"),this.input.data("lookup").settings.clickArguments={column:a,container:n,grid:l,cell:t,event:o,row:e,rowData:d,value:i}},this.val=function(h){return h?this.input.val(h):this.input.val()},this.focus=function(){var h=this,p=h.input.data("lookup"),v=h.input.closest("td");"keydown"===o.type&&(h.input.focus(),l.settings.selectOnEdit&&h.input.select(),v.on("keydown.editorlookup",function(b){40===b.keyCode&&(b.preventDefault(),b.stopPropagation())})),"click"===o.type&&($(o.target).is("svg")?p.openDialog(o):(h.input.focus(),l.settings.selectOnEdit&&h.input.select(),v.on("touchcancel.editorlookup touchend.editorlookup",".trigger",function(){p.openDialog()}))),h.input.on("change.editorlookup",function(){l.quickEditMode=!1})},this.destroy=function(){var h=this,p=this.input.closest("td");setTimeout(function(){l.quickEditMode=!1,p.off("keydown.editorlookup").find(".trigger").off("touchcancel.editorlookup touchend.editorlookup"),h.input.remove()},0)},this.init()},Autocomplete:function(e,t,i,n,a,o,l){this.name="autocomplete",this.originalValue=i,this.init=function(){this.input=$('<input class="autocomplete datagrid-autocomplete" autocomplete="off" />').appendTo(n),a.editorOptions||(a.editorOptions={}),a.editorOptions.width=n.parent().width(),a.editorOptions.offset={left:-1,top:"medium"===l.settings.rowHeight?1:5},a.maxLength&&this.input.attr("maxlength",a.maxLength),a.uppercase&&this.input.addClass("uppercase-text"),this.input.autocomplete(a.editorOptions)},this.val=function(d){return d?this.input.val(d):this.input.val()},this.focus=function(){l.quickEditMode=!0,this.input.focus(),l.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var d=this;setTimeout(function(){l.quickEditMode=!1,d.input.remove()},0)},this.init()},Spinbox:function(e,t,i,n,a,o,l){var d=this;this.name="spinbox",this.originalValue=i,this.useValue=!0,this.init=function(){if(a.inlineEditor)d.input=n.find("input");else{var h='<label for="spinbox-'.concat(t,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(t,'" name="spinbox-').concat(t,'" type="text" class="spinbox" value="\'+ ').concat(i,' +\'" autocomplete="off" />\n        <span class="spinbox-control up">+</span></span>');de.append(n,h,"<label><span><input>"),d.input=n.find("input"),a.editorOptions||(a.editorOptions={}),d.input.spinbox(a.editorOptions)}},this.val=function(h){return h&&d.input.val(h),parseInt(d.input.val(),10)},this.focus=function(){l.quickEditMode=!0,d.input.focus(),l.settings.selectOnEdit&&d.input.select()},this.destroy=function(){a.inlineEditor||setTimeout(function(){l.quickEditMode=!1;var h=d.val();d.input&&d.input.data("spinbox")&&d.input.data("spinbox").destroy(),d.input&&d.input.remove(),n.text(h)},0)},this.init()},Favorite:function(e,t,i,n,a,o,l){this.name="favorite",this.useValue=!0,this.originalValue=i,this.init=function(){this.input=$('<span class="icon-favorite">'.concat($.createIcon({icon:i?"star-filled":"star-outlined"}),'<input type="checkbox"></span>')).appendTo(n),this.input=this.input.find("input")},this.val=function(d){var h;if(void 0===d)return this.input.prop("checked");h=a.isChecked?a.isChecked(d):d,("click"===o.type||"keydown"===o.type&&32===o.keyCode)&&!$(o.target).is(".datagrid-cell-wrapper")&&(h=!h,l.setNextActiveCell(o)),this.input.prop("checked",h),this.input.find("use").attr("href",h?"#icon-star-filled":"#icon-star-outlined")},this.focus=function(){this.input.trigger("focusout").focus()},this.destroy=function(){var d=this;setTimeout(function(){d.input.parent().remove()},0)},this.init()}},Ra="datagrid",fp={actionableMode:!1,cellNavigation:!0,rowNavigation:!0,showHoverState:!0,alternateRowShading:!1,columns:[],frozenColumns:{left:[],right:[],expandRowAcrossAllCells:!0},dataset:[],columnReorder:!1,saveColumns:!1,saveUserSettings:{},focusAfterSort:!1,editable:!1,selectOnEdit:!0,isRowDisabled:null,isList:!1,menuId:null,headerMenuId:null,menuSelected:null,menuBeforeOpen:null,headerMenuSelected:null,headerMenuBeforeOpen:null,uniqueId:null,rowHeight:"large",fixedRowHeight:null,selectable:!1,selectChildren:!0,onBeforeSelect:null,allowSelectAcrossPages:null,selectAllCurrentPage:!1,groupable:null,showNewRowIndicator:!0,stretchColumn:null,stretchColumnOnChange:!1,spacerColumn:!1,stickyHeader:!1,columnSizing:"all",twoLineHeader:!1,clickToSelect:!0,keyRowSelect:!1,toolbar:!1,initializeToolbar:!0,columnIds:[],paging:!1,pagesize:25,pagesizes:[],showPageSizeSelector:!0,indeterminate:!1,source:null,hidePagerOnOnePage:!1,filterable:!1,filterWhenTyping:!0,disableClientFilter:!1,disableClientSort:!1,resultsText:null,showFilterTotal:!0,virtualized:!1,virtualRowBuffer:10,rowReorder:!1,showDirty:!1,resizeMode:"flex",showSelectAllCheckBox:!0,allowOneExpandedRow:!0,enableTooltips:!1,disableRowDeactivation:!1,disableRowDeselection:!1,sizeColumnsEqually:!1,expandableRow:!1,exportConvertNegative:!1,columnGroups:null,treeGrid:!1,onPostRenderCell:null,onDestroyCell:null,onEditCell:null,onExpandRow:null,onExpandChildren:null,onCollapseChildren:null,onKeyDown:null,emptyMessage:{title:B?B.translate("NoData"):"No data available",info:"",icon:"icon-empty-no-data-new",height:null},searchExpandableRow:!0,allowChildExpandOnMatchOnly:!1,allowChildExpandOnMatch:!1,activeCheckboxSelection:!1,dblClickApply:!1,attributes:null,allowPasteFromExcel:!1,showEditorIcons:!1,fallbackImage:"insert-image",fallbackSize:{height:40,width:40},fallbackTooltip:{content:"Image could not load",delay:200}};function Oh(s,e){this.settings=H.mergeSettings(s,e,fp),this.element=$(s),e.dataset&&(this.settings.dataset=e.dataset),typeof this.settings.frozenColumns.expandRowAcrossAllCells>"u"&&(this.settings.frozenColumns.expandRowAcrossAllCells=fp.frozenColumns.expandRowAcrossAllCells),this.init()}Oh.prototype={get pagerAPI(){var s;return this.tableBody&&this.tableBody.length&&(s=this.tableBody.data("pager")),s},init:function(){var e=$("html");this.isTouch=xe.features.touch,this.isSafari=e.is(".is-safari"),this.isWindows=-1!==navigator.userAgent.indexOf("Windows"),this.appendTooltip(),this.initSettings(),this.setOriginalColumns(),this.removeToolbarOnDestroy=!1,this.nonVisibleCellErrors=[],this.recordCount=0,this.canvas=null,this.totalWidths={left:0,center:0,right:0},this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.editor=null,this.activeCell={node:null,cell:null,row:null},this.dontSyncUi=!1,this.widthPercent=!1,this.rowSpans=[],this.filterRowRendered=!1,this.scrollLeft=0,this.scrollTop=0,this._selectedRows=[],this.restoreColumns(),this.restoreUserSettings(),this.appendToolbar(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.firstRender(),this.hasScrollbarY(),this.handleEvents(),this.handleKeys(),this.element.trigger("rendered",[this.element,this.element.find("thead"),this.pagerAPI])},initSettings:function(){this.ignoredColumnById("rowStatus"),this.setInlineActionableMode(),this.sortColumn={sortField:null,sortAsc:!0},this.gridCount=$(".datagrid").length+1,this.lastSelectedRow=0,this.contextualToolbar=this.element.prev(".contextual-toolbar"),this.contextualToolbar.addClass("datagrid-contextual-toolbar")},ignoredColumnById:function(e){var t=this.settings;if(e&&t.columns&&(!t.columns||t.columns.length)){for(var i={index:-1},n=0,a=t.columns.length;n<a;n++)t.columns[n].id===e&&(i.index=n);i.index>-1&&t.columns.splice(i.index,1)}},setInlineActionableMode:function(){var e=this.settings;if(e.columns&&(!e.columns||e.columns.length)){for(var t={index:-1},i=0,n=e.columns.length;i<n;i++)e.columns[i].inlineEditor&&(t.index=i);this.inlineMode=t.index>-1,this.inlineMode?(this.element[0].classList.add("has-inline-editor"),this.settings.actionableMode=!0):this.element[0].classList.remove("has-inline-editor")}},render:function(e,t,i){if(t||(t={}),e&&(t.type="filterrow"),this.settings.source)return t.preserveSelected=this.settings.allowSelectAcrossPages,void this.triggerSource(i?"initial":t);this.loadData(this.settings.dataset,t)},firstRender:function(){var e=this,t=e.settings.columns.some(function(o){return void 0!==o.width}),i=this.element.parents(".contextual-action-panel").length>0;if(this.hasLeftPane=this.settings.frozenColumns.left.length>0,this.hasRightPane=this.settings.frozenColumns.right.length>0,this.hasLeftPane&&(e.bodyWrapperLeft=$('<div class="datagrid-wrapper left"></div>'),e.tableLeft=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(e.bodyWrapperLeft),e.element.append(e.bodyWrapperLeft)),e.bodyWrapperCenter=$('<div class="datagrid-wrapper center scrollable-x'.concat(this.hasRightPane?"":" scrollable-y",'"></div>')),e.table=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(e.bodyWrapperCenter),e.element.append(e.bodyWrapperCenter),t&&i&&e.table.css("width","inherit"),this.hasRightPane&&(e.bodyWrapperRight=$('<div class="datagrid-wrapper right scrollable-y"></div>'),e.tableRight=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(e.bodyWrapperRight),e.element.append(e.bodyWrapperRight)),this.element.removeClass("datagrid").addClass("datagrid-container").attr("x-ms-format-detection","none"),this.settings.stickyHeader&&this.element.removeClass("datagrid").addClass("is-sticky"),"normal"!==this.settings.rowHeight&&"large"!==this.settings.rowHeight){var n="short"===this.settings.rowHeight?"small":this.settings.rowHeight;n="normal"===this.settings.rowHeight?"large":n,this.hasLeftPane&&e.tableLeft.addClass("".concat(n,"-rowheight")),e.table.addClass("".concat(n,"-rowheight")),this.hasRightPane&&e.tableRight.addClass("".concat(n,"-rowheight")),this.element.addClass("".concat(n,"-rowheight"))}if(this.settings.isList?$(this.element).addClass("is-gridlist"):$(this.element).removeClass("is-gridlist"),e.table.empty(),e.clearCache(),e.container=e.element.closest(".datagrid-container"),e.renderRows(),e.renderHeader(),this.stretchColumnDiff<0){var a=this.bodyColGroup.find("col").eq(e.getStretchColumnIdx())[0];a&&(a.style.width="".concat(this.stretchColumnWidth,"px"))}this.settings.emptyMessage&&(e.setEmptyMessage(this.settings.emptyMessage),e.checkEmptyMessage()),this.settings.showEditorIcons&&e.element.addClass("show-editor-icons"),e.buttonSelector=".btn, .btn-secondary, .btn-primary, .btn-modal-primary, .btn-tertiary, .btn-icon, .btn-actions, .btn-menu, .btn-split",$(e.buttonSelector,e.table).button(),this.handlePaging(),this.triggerSource("initial")},hasScrollbarY:function(){var e=this,t=parseInt(e.bodyWrapperCenter[0].offsetHeight,10),i=parseInt(e.bodyWrapperCenter[0].scrollHeight,10)>t+2||e.element[0].scrollHeight>e.element[0].clientHeight;e.hasVerticalScrollbar=!1!==i},editCell:function(e,t,i){var n=this;setTimeout(function(){n.setActiveCell(e,t),n.makeCellEditable(e,t,i)},100)},renderRow:function(e,t){var i=this,n="bottom"!==t,a="",o="",l="";function d(){n?(i.hasLeftPane&&de.prepend(i.tableBodyLeft,o,"*"),de.prepend(i.tableBody,a,"*"),i.hasRightPane&&de.prepend(i.tableBodyRight,l,"*")):(i.hasLeftPane&&de.append(i.tableBodyLeft,o,"*"),de.append(i.tableBody,a,"*"),i.hasRightPane&&de.append(i.tableBodyRight,l,"*"))}i.emptyMessageContainer&&i.emptyMessageContainer.hide();var h="bottom"===t?"last":"first",b=i.rowHtml(e,"last"===h?i.settings.dataset.length-1:0,i.settings.dataset.length-1);if(i.hasLeftPane&&b.left&&(o+=b.left),b.center&&(a+=b.center),i.hasRightPane&&b.right&&(l+=b.right),i.settings.groupable)for(var w=$(".datagrid-rowgroup-header").find("span:not([class])"),T=0;T<w.length;T++){var k=$(w[T]);if(e.type===k.text().trim()){de.after(k.parents("tr"),b.center,"*");break}}if(i.settings.paging&&!i.settings.groupable){var A=i.settings.dataset.length-i.pagerAPI.pageCount()*i.pagerAPI.settings.pagesize==1?1:0,M=("bottom"===t?i.pagerAPI.pageCount():1)+A;"bottom"!==t&&1===i.pagerAPI.activePage?d():(i.pagerAPI.setActivePage(M,!1,h),i.pagerAPI.triggerPagingEvents(i.pagerAPI.currentPage))}!i.settings.paging&&!i.settings.groupable&&d(),i.settings.paging&&i.tableBody.children().length>i.pagerAPI.settings.pagesize&&i.tableBody.children().last().remove(),i.refreshIndexes(),i.afterRender()},refreshIndexes:function(){this.element.find("tr").removeAttr("aria-rowindex"),this.element.find("tr").removeAttr("data-index"),this.hasLeftPane&&this.element.find(".datagrid-wrapper.left tbody > tr").each(function(t,i){var n=$(i);n.attr("aria-rowindex",t+1),n.attr("data-index",t)});var e=this.settings.paging&&this.pagerAPI.activePage>1?(this.pagerAPI.activePage-1)*this.settings.pagesize:0;this.element.find(".datagrid-wrapper.center tbody > tr").each(function(t,i){var n=$(i);n.attr("aria-rowindex",t+e+1),n.attr("data-index",t+e)}),this.hasRightPane&&this.element.find(".datagrid-wrapper.right tbody > tr").each(function(t,i){var n=$(i);n.attr("aria-rowindex",t+1),n.attr("data-index",t)})},addRow:function(e,t){var l,i=this,n=this;this.saveDirtyRows();var d=this.addToDataset([e],t)[0];this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(t),this._selectedRows.forEach(function(h){typeof h.pagingIdx<"u"&&h.pagingIdx>=d&&(h.idx++,h.pagingIdx++)}),this.clearCache(),this.renderRow(e,t),this.settings.groupable&&(l=this.dataRowNode(d),d=this.visualRowIndex(l)),this.syncSelectedUI(),setTimeout(function(){n.setActiveCell(d,0),i.settings.groupable||(l=i.visualRowNode(d)),n.element.triggerHandler("addrow",{row:d,cell:0,target:l,value:e,oldValue:{}})},100)},addRows:function(e,t){var i=this,n=this;this.saveDirtyRows();var l=this.addToDataset(e,t);if(-1!==l){this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(t),this._selectedRows.forEach(function(h){l.forEach(function(p){typeof h.pagingIdx<"u"&&h.pagingIdx>=p&&(h.idx++,h.pagingIdx++)})}),this.clearCache(),this.renderRows();var d=[];this.settings.groupable&&l.forEach(function(h,p){var v=i.dataRowNode(h);d.push(v),l[p]=i.visualRowIndex(v)}),this.syncSelectedUI(),setTimeout(function(){n.setActiveCell(l[0],0),i.settings.groupable||l.forEach(function(h){d.push(i.visualRowNode(h))}),n.element.triggerHandler("addrow",{rows:l,cell:0,target:d,value:e,oldValue:{}})},100)}},addToDataset:function(e,t){if(e&&0===e.length)return-1;var i=this.settings,n=[],a={icon:"new",text:B.translate("NewRow"),tooltip:B.translate("NewRow")},o=!1,l=this.settings.dataset;function h(b,w){b.rowStatus=b.rowStatus||a,l.splice(w,0,b),n.push(w)}if((!t||"top"===t)&&(t="top",o=!0),i.groupable)if(l=this.originalDataset||l,"string"==typeof t){var v=this.settings.groupable.fields[0];e.forEach(function(b){var w=function d(b,w,T,k){for(var A=0,M=b.length;A<M;A++){var L=k?M-1-A:A;if(b[L][w]===T)return L}return-1}(l,v,b[v],!o);h(b,w>-1?o?w:w+1:0)})}else e.forEach(function(b,w){h(b,t+w)});else e.forEach("string"==typeof t?function(b,w){h(b,o?w:l.length)}:function(b,w){h(b,t+w)});return n},pagerRefresh:function(e,t){if(this.pagerAPI){var i={};if("string"==typeof e?i.activePage="top"===e?1:this.pagerAPI.state.pages:"number"==typeof e&&(i.activePage=Math.floor(e/(this.pagerAPI.settings.pagesize+1))),this.settings.source||(i.total=this.settings.dataset.length,i.pagesize=this.settings.pagesize),t){var n=Math.ceil(this.settings.dataset.length/this.settings.pagesize);i.activePage=this.pagerAPI.activePage>n?n:this.pagerAPI.activePage}this.renderPager(i,!0)}},removeRow:function(e,t,i){var n=this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')),a=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset,o=a[e];this.saveDirtyRows(),this.unselectRow(e,t),a.splice(e,1),this.restoreDirtyRows(),this.settings.selectable&&!this.settings.groupable&&this.settings.groupable&&this.originalDataset&&this.syncDatasetWithSelectedRows(),this.preventSelection=!0,t||(this.setRowGrouping(),this.pagerRefresh("top",!0),this.clearCache(),this.renderRows()),0!==this.nonVisibleCellErrors.length&&(this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,function(d){return d.row!==e}),this.showNonVisibleCellErrors()),delete this.preventSelection,this.syncSelectedUI();var l={row:e,cell:null,target:n,item:o,oldValue:o};return i?l:(this.element.trigger("rowremove",l),!0)},removeSelected:function(e){this._selectedRows.sort(function(n,a){return n.idx<a.idx?-1:n.idx>a.idx?1:0});for(var t=[],i=this._selectedRows.length-1;i>=0;i--)t.push({row:this._selectedRows[i].idx,item:this._selectedRows[i],cell:null,target:null}),this.removeRow(this._selectedRows[i].idx,i>0,e);e&&this.element.trigger("rowremove",t)},updateDataset:function(e,t){if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var i=this.element.parent().find(".toolbar").find(".searchfield");i.val(""),i.parent().removeClass("has-text"),this.clearFilter()}this.loadData(e,t),this.syncSelectedRowsIdx()},triggerSource:function(e,t,i){if(this.settings.source){var n=this,a={};this.pagerAPI&&(a=this.pagerAPI.state),"string"==typeof e?(a.type=e,a.trigger=i):e&&(a=H.extend({},a,e)),t&&"function"!=typeof t&&"string"==typeof t.type&&(a.type=t.type),!1!==this.element.triggerHandler("beforepaging",a)&&(this.sortColumn&&this.sortColumn.sortId&&(a.sortAsc=this.sortColumn.sortAsc,a.sortField=this.sortColumn.sortField,a.sortId=this.sortColumn.sortId),this.filterExpr&&this.filterExpr.length&&(a.filterExpr=this.filterExpr),this.element.trigger("paging",a),this.settings.source(a,function l(d,h){h.activePage>-1&&(n.activePage=h.activePage),h.grandTotal&&(n.grandTotal=h.grandTotal),n.loadData(d,h),t&&"function"==typeof t&&t(!0),setTimeout(function(){n.afterPaging(a),n.element.trigger("afterpaging",a)})}))}},afterPaging:function(e){this.settings.paging&&(this.settings.source&&(this.pagerAPI&&this.pagerAPI.hidePagerBar(e)?this.element.removeClass("paginated"):this.element.addClass("paginated"),e.total&&(this.recordCount=e.total,this.displayCounts(e.total))),!this.settings.source&&this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value))},loadData:function(e,t){var i,n;this.settings.dataset=e,t||(t={}),"filterrow"===t.type&&(t.activePage=this.pagerAPI&&this.pagerAPI.activePage||1,t.pagesize=this.settings.pagesize,t.total=t.total||-1,t.type="filterrow"),t.activePage||(t.activePage=1,t.pagesize=this.settings.pagesize,t.total=-1,this.settings.treeGrid&&(t.preserveSelected=!0)),this.grandTotal=this.settings.source&&t.grandTotal?t.grandTotal:null,this.pagerAPI&&(this.pagerAPI.activePage=t.activePage||1,this.settings.showDirty&&this.settings.source&&/first|last|next|prev|sorted/.test(t.type)&&(this.dirtyArray=void 0)),this.settings.groupable&&this.settings.dataset[0]&&!this.settings.dataset[0].values&&(this._selectedRows=[],this.originalDataset=null,this.clearDirty()),this.setTreeDepth(),this.settings.source&&(this.originalDataset=null,this.setRowGrouping()),this.setTreeRootNodes(),!t.preserveSelected&&this.settings.source&&!this.settings.allowSelectAcrossPages&&(this.settings.selectAllCurrentPage?this.unSelectAllRowsCurrentPage():this.unSelectAllRows()),!t.preserveSelected&&("initial"===t.type||!t.type)&&(this.settings.selectAllCurrentPage?this.unSelectAllRowsCurrentPage():this.unSelectAllRows()),this.settings.disableClientFilter&&(this.restoreFilter=!0,this.restoreSortOrder=!0,this.savedFilter=this.filterConditions()),"initial"===t.type?(this.clearCache(),this.restoreUserSettings(),this.renderRows(),this.renderHeader()):0===this.element.find(".datagrid-filter-wrapper .is-open").length?(this.clearCache(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.renderRows()):(this.clearCache(),this.renderRows()),this.cellNode(0,0,!0).attr("tabindex","0"),this.renderPager(t,!0),this.displayCounts(),this.settings.paging&&this.settings.source&&null!==(i=t)&&void 0!==i&&i?.filterExpr&&"all"===(null===(n=t.filterExpr[0])||void 0===n?void 0:n?.column)&&this.highlightSearchRows(t.filterExpr[0].value)},uniqueId:function(e){return e=e??"",this.gridCount=this.gridCount?this.gridCount:$(".datagrid").length+1,(this.settings.uniqueId?"".concat(this.settings.uniqueId,"-").concat(e):"".concat(window.location.pathname.split("/").pop().replace(/\.xhtml|\.shtml|\.html|\.htm|\.aspx|\.asp|\.jspx|\.jsp|\.php/g,"").replace(/[^-\w]+/g,"").replace(/\./g,"-").replace(/ /g,"-").replace(/%20/g,"-"),"-").concat(this.element.attr("id")||"datagrid","-").concat(this.gridCount||0).concat(e)).replace(/--/g,"-")},visibleColumns:function(e){for(var t=[],i=0;i<this.settings.columns.length;i++){var n=this.settings.columns[i];n.hidden||e&&"selectionCheckbox"===n.id||t.push(n)}return t},getColumnGroup:function(e){for(var t=0,i=this.settings.columnGroups,n=0;n<i.length;n++)if(!i[n].hidden&&(t+=i[n].colspan)>=e)return this.uniqueId("-header-group-".concat(n));return""},updateColumnGroup:function(e,t){var i=this.settings.columnGroups;if(this.originalColGroups||(this.originalColGroups=H.deepCopy(i)),this.settings.groupable)for(var n=this.tableBody.find(".datagrid-rowgroup-header"),a=this.visibleColumns().length,o=0;o<n.length;o++)n[o].children[0].setAttribute("colspan",a);else if(i&&this.colGroups){var l=0,d=-1;this.originalColGroups.forEach(function(v,b){var w=parseInt(v.colspan,10);e>=l&&e<=l+w&&(d=b),l+=w});var h=parseInt(this.colGroups[d].getAttribute("colspan"),10),p=this.colGroups[d].classList.contains("is-hidden");if(t&&p)return void this.colGroups[d].classList.remove("is-hidden");if(t&&!p)return this.colGroups[d].classList.remove("is-hidden"),void this.colGroups[d].setAttribute("colspan",h+1);if(h-1==0)return void this.colGroups[d].classList.add("is-hidden");this.colGroups[d].setAttribute("colspan",h-1)}},updateGroupHeadersAfterColumnReorder:function(e,t){var i=this.settings.columnGroups;if(i){this.originalColGroups||(this.originalColGroups=H.deepCopy(i));var n=i.map(function(o){return parseInt(o.colspan,10)}),a={from:null,to:null,total:0};n.forEach(function(o,l){a.total+=o,a.total>e&&null===a.from&&(a.from=l),a.total>t&&null===a.to&&(a.to=l)}),a.from!==a.to&&(i[a.from].colspan-=1,i[a.to].colspan+=1)}},headerText:function(e){var t=e.name?Fe.stripTags(e.name,"<div><span><a><small><svg><i><b><use><br><strong><em>"):"";return t||"drilldown"!==e.id?t:(t=B.translate("Drilldown"),'<span class="audible">'.concat(t,"</span>"))},getContainer:function(e){return this.settings.frozenColumns.left&&this.settings.frozenColumns.left.indexOf(e)>-1?"left":this.settings.frozenColumns.right&&this.settings.frozenColumns.right.indexOf(e)>-1?"right":"center"},renderHeader:function(){var i,He,e=this,t={left:"",center:"",right:""},n=this.settings.columnGroups;if(n){this.element.addClass("has-group-headers");var b,a=this.settings.columns,o=a.length,l=this.visibleColumns().length,d=n.map(function(ot){return parseInt(ot.colspan,10)}),h=function(){return d.reduce(function(He,Ae){return He+Ae},0)};if(t.left+='<tr role="row" class="datagrid-header-groups">',t.center+='<tr role="row" class="datagrid-header-groups">',t.right+='<tr role="row" class="datagrid-header-groups">',h()>o)for(var w=!0,T=d.length-1;T>=0&&w;T--)void 0,He=h(),d[T]>=(b=He>o?He-o:o-He)?(d[T]-=b,w=!1):d[T]=0;var k=0,A=0;if(d.forEach(function(ot,He){for(var Ae=ot,We=k+ot;k<We;k++)k<o&&a[k].hidden&&Ae--;var yt=n[He].hidden||Ae<1?' class="is-hidden"':"",Dt=' colspan="'.concat(Ae>0?Ae:1,'"'),zt=n[He].align?"l-".concat(n[He].align,"-text"):"";i=e.uniqueId("-header-group-".concat(He)),Ae>0&&(A+=Ae);var _t=e.getContainer(e.settings.columns[He].id);t[_t]+="<th".concat(yt).concat(Dt,' id="').concat(i,'" class="').concat(zt,'"><div class="datagrid-column-wrapper"><span class="datagrid-header-text">').concat(n[He].name,"</span></div></th>")}),A<l){var M=' colspan="'.concat((b=l-A)>0?b:1,'"');e.hasRightPane?t.right+="<th".concat(M,"></th>"):t.center+="<th".concat(M,"></th>")}this.settings.spacerColumn&&(t.center+='<th class="datagrid-header-groups-spacer-column"></th>'),t.left+="</tr><tr>",t.center+="</tr><tr>",t.right+="</tr><tr>"}else t.left+='<tr role="row">',t.center+='<tr role="row">',t.right+='<tr role="row">';for(var L=0;L<this.settings.columns.length;L++){var z,q,O,_,G,j,X=e.settings.columns[L],fe=e.getContainer(X.id),he=e.uniqueId("-header-".concat(L)),we=void 0===X.sortable||X.sortable,re=void 0===X.resizable||X.resizable,Ne=void 0===X.exportable||X.exportable,le="selectionCheckbox"===X.id,Te=this.getHeaderAlignmentClass(X);(e.hasLeftPane||e.hasRightPane)&&(e.settings.frozenColumns.left&&e.settings.frozenColumns.left.indexOf(X.id)>-1||e.settings.frozenColumns.right&&e.settings.frozenColumns.right.indexOf(X.id)>-1)&&(X.hideable=!1),void 0===X.hideable&&(X.hideable=!0);var ge="";ge+=we?" is-sortable":"",ge+=re?" is-resizable":"",ge+=X.hidden?" is-hidden":"",ge+=X.filterType?" is-filterable":"",ge+="ellipsis"===X.textOverflow?" text-ellipsis":"",ge+=null!=X&&X?.headerIcon?" header-icon":"",ge+=null!=X&&X?.headerCssClass?" ".concat(X.headerCssClass):"",ge=""!==(ge+=""!==Te?Te:"")?' class="'.concat(ge.substr(1),'"'):"";var ce=H.stringAttributes(this,this.settings.attributes,"col-".concat(null===(z=X.id)||void 0===z||null==(q=z)?void 0:q.toLowerCase()));ce||(ce='id="'.concat(he,'"')),t[fe]+='<th scope="col" role="columnheader" '.concat(ce," ").concat(le?' aria-checked= "false"':"",' data-column-id="').concat(X.id,'"').concat(X.field?' data-field="'.concat(X.field,'"'):"").concat(X.headerTooltip?' title="'.concat(X.headerTooltip,'"'):"").concat(X.headerTooltipCssClass?' tooltipClass="'.concat(X.headerTooltipCssClass,'"'):"").concat(!1===X.reorderable?' data-reorder="false"':"").concat(n?' headers="'.concat(e.getColumnGroup(L),'"'):"",' data-exportable="').concat(Ne?"yes":"no",'"').concat(ge,">");var Be="";we&&(Be="".concat('<div class="sort-indicator"><span class="sort-asc">').concat($.createIcon({icon:"dropdown"}),"</span>")+'<span class="sort-desc">'.concat($.createIcon({icon:"dropdown"}),"</div>"));var qe=void 0!==X?.headerIconTooltip||(null==X||null===(O=X?.headerIconTooltip)||void 0===O||null==(_=O)?void 0:_.length)>0?X?.headerIconTooltip:"",Oe='\n        <svg class="icon datagrid-header-icon" focusable="false" aria-hidden="true" role="presentation" title="'.concat(qe,'">\n          <use href="#icon-').concat(X.headerIcon,'"></use>\n        </svg>\n      ');t[fe]+='<div class="'.concat(le?"datagrid-checkbox-wrapper ":"datagrid-column-wrapper").concat(Te,'">\n      <span class="datagrid-header-text').concat(X.required?" required":"",'">').concat(e.headerText(this.settings.columns[L])).concat(" l-center-text"===Te?Be:"","</span>\n      ").concat(null!==(G=this.settings.columns[L])&&void 0!==G&&null!=(j=G)&&j.headerIcon?Oe:""),le&&(t[fe]+=e.settings.showSelectAllCheckBox?'<span class="datagrid-checkbox" aria-label="Selection" role="checkbox" tabindex="0"></span>':'<span class="datagrid-checkbox" aria-label="Selection" role="checkbox" style="display:none" tabindex="0"></span>'),we&&" l-center-text"!==Te&&(t[fe]+=Be),t[fe]+="</div>".concat(e.filterRowHtml(X,L),"</th>")}this.settings.spacerColumn&&(t.center+='<th class="datagrid-header-spacer-column"></th>'),t.left+="</tr>",t.center+="</tr>",t.right+="</tr>",void 0===e.headerRow?(e.hasLeftPane&&(e.headerRowLeft=$('<thead class="datagrid-header left" role="rowgroup">'.concat(t.left,"</thead>")),e.tableLeft.find("colgroup").after(e.headerRowLeft)),e.headerRow=$('<thead class="datagrid-header center"> role="rowgroup">'.concat(t.center,"</thead>")),e.table.find("colgroup").after(e.headerRow),e.hasRightPane&&(e.headerRowRight=$('<thead class="datagrid-header right" role="rowgroup">'.concat(t.right,"</thead>")),e.tableRight.find("colgroup").after(e.headerRowRight))):(e.hasLeftPane&&de.html(e.headerRowLeft,t.left,"*"),de.html(e.headerRow,t.center,"*"),e.hasRightPane&&de.html(e.headerRowRight,t.right,"*")),n&&e.headerRow&&(e.colGroups=$.makeArray(this.container.find(".datagrid-header-groups th"))),e.syncHeaderCheckbox(this.settings.dataset),e.setScrollClass(),e.attachFilterRowEvents(),e.settings.columnReorder&&e.createDraggableColumns(),this.restoreSortOrder=!1,this.setSortIndicator(this.sortColumn.sortId,this.sortColumn.sortAsc),this.restoreFilter?(this.restoreFilter=!1,this.applyFilter(this.savedFilter,"restore"),this.savedFilter=null):this.filterExpr&&this.filterExpr.length>0&&this.setFilterConditions(this.filterExpr),this.activeEllipsisHeaderAll()},getHeaderAlignmentClass:function(e){return void 0===e.headerAlign?e.align?" l-".concat(e.align,"-text"):"":" l-".concat(e.headerAlign,"-text")},filterSetDatepicker:function(e,t,i){var n=e.data("datepicker"),a=e.data("is-range");i=i||{};var o=function(){n&&"function"==typeof n.destroy&&n.destroy(),e.datepicker(i)};if(n&&a||"in-range"!==t)(!n||a)&&"in-range"!==t&&(i.range={useRange:!1},e.removeData("is-range"),e.val(e.val().split(" - ")[0]),o());else{if(e.data("is-range",!0),0!==e.val().length&&-1===e.val().indexOf("-")){var l=e.parents("th").attr("data-column-id"),h=this.columnById(l)[0].dateFormat,p=B.formatDate("MM/dd/yyyy"===h?new Date(e.val()):e.val(),{pattern:h});e.val("".concat(p," - ").concat(p)),i.range={useRange:!0,start:p,end:p}}else i.range={useRange:!0};o()}},filterRowHtml:function(e,t){var i=this,n="",a=this.getHeaderAlignmentClass(e);if(e.filterType){var o,p,l=e,d=i.uniqueId("-header-filter-".concat(t)),h=Array.isArray(l.filterRowEditorOptions)?l.filterRowEditorOptions:l.options,v="";if("select"===l.filterType&&h){for(var b=!1,w=0,T=h.length;w<T;w++)if(!h[w].label){b=!0;break}b||(v="<option></option>")}n='<div class="datagrid-filter-wrapper'.concat(a,'" ').concat(i.settings.filterable?"":' style="display:none"',">").concat(i.filterButtonHtml(l),'<label class="audible" for="').concat(d,'">').concat(l.name,"</label>");var k=H.stringAttributes(this,this.settings.attributes,"filter-".concat(null===(o=l.id)||void 0===o?void 0:o?.toLowerCase()));k||(k='id="'.concat(d,'"'));var A=l.enterKeyHint?' enterkeyhint="'.concat(l.enterKeyHint,'"'):' enterkeyhint="enter"';switch(l.filterType){case"checkbox":break;case"date":var M,L,z=!1;(null===(M=l.filterConditions)||void 0===M?void 0:M?.map(function(re){return re.value}).indexOf("in-range"))>0?z=l.filterConditions[2].selected&&"in-range"===l.filterConditions[2].value:0===(null===(L=l.filterConditions)||void 0===L?void 0:L?.indexOf("in-range"))&&(z=!0),n+="<input ".concat(l.filterDisabled?" disabled":"",' type="text" class="datepicker" ').concat(z?'data-options="{range: {useRange: true}}"':""," ").concat(k," ").concat(A,"/>");break;case"integer":p={patternOptions:{allowNegative:!0,allowThousandsSeparator:!1,allowDecimal:!1,symbols:{thousands:B.currentLocale.data.numbers?B.currentLocale.data.numbers.group:",",decimal:B.currentLocale.data.numbers?B.currentLocale.data.numbers.decimal:".",negative:B.currentLocale.data.numbers?B.currentLocale.data.numbers.minusSign:"-"}},process:"number"},l.filterMaskOptions&&(l.filterMaskOptions=H.extend(!0,{},p,l.filterMaskOptions)),l.maskOptions&&(l.maskOptions=H.extend(!0,{},p,l.maskOptions)),n+="<input".concat(l.filterDisabled?" disabled":"",' type="text" ').concat(k," ").concat(A," />");break;case"percent":case"decimal":var q={patternOptions:{allowNegative:!0,allowDecimal:!0,symbols:{thousands:B.currentLocale.data.numbers?B.currentLocale.data.numbers.group:",",decimal:B.currentLocale.data.numbers?B.currentLocale.data.numbers.decimal:".",negative:B.currentLocale.data.numbers?B.currentLocale.data.numbers.minusSign:"-"}},process:"number"};l.numberFormat?(p={patternOptions:{decimalLimit:l.numberFormat.maximumFractionDigits}},l.filterMaskOptions&&(l.filterMaskOptions=H.extend(!0,{},p,q,l.filterMaskOptions)),l.maskOptions&&(l.maskOptions=H.extend(!0,{},p,q,l.maskOptions))):(l.filterMaskOptions&&"function"!=typeof l.filterMaskOptions&&(l.filterMaskOptions=H.extend(!0,{},q,l.filterMaskOptions)),l.maskOptions&&"function"!=typeof l.maskOptions&&(l.maskOptions=H.extend(!0,{},q,l.maskOptions))),n+="<input".concat(l.filterDisabled?" disabled":"",' type="text" ').concat(k," ").concat(A," />");break;case"contents":case"select":if(n+="<select ".concat(k," ").concat("select"===l.filterType?'class="dropdown"':'multiple class="multiselect"').concat(l.filterDisabled?" disabled":"",">").concat(v),h)for(var O=0,_=h.length;O<_;O++){var G=h[O],j=l.caseInsensitive&&"string"==typeof G.value?G.value.toLowerCase():G.value;G&&""!==j&&(n+='<option value = "'.concat(j,'">').concat(G.label,"</option>"))}n+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"multiselect":if(n+="<select ".concat(k,' class="multiselect" multiple').concat(l.filterDisabled?" disabled":"",">"),h)for(var X=0,fe=h.length;X<fe;X++){var he=h[X],we=l.caseInsensitive&&"string"==typeof he.value?he.value.toLowerCase():he.value;he&&"string"==typeof he.label&&(n+='<option value = "'.concat(we,'">').concat(he.label,"</option>"))}n+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"time":n+="<input ".concat(l.filterDisabled?" disabled":"",' type="text" class="timepicker" ').concat(k," ").concat(A,"/>");break;case"lookup":n+="<input ".concat(l.filterDisabled?" disabled":"",' type="text" class="lookup" ').concat(k," ").concat(A," >");break;default:n+="<input".concat(l.filterDisabled?" disabled":"",' tabindex="0" type="text" ').concat(k," ").concat(A,"/>")}n+="</div>"}return e.filterType||(n='<div class="datagrid-filter-wrapper is-empty'.concat(" ".concat(a),'"></div>')),n},attachFilterRowEvents:function(){var e=this,t=this;if(this.settings.filterable){this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header");var n,i=null;this.element.off("click.datagrid-filter").on("click.datagrid-filter",".btn-filter",function(){var a=this,o=$(this),d=o.data("popupmenu"),h=o.closest('th[role="columnheader"]'),p="";return d?d.close(!0,!0):o.off("beforeopen.datagrid-filter").on("beforeopen.datagrid-filter",function(v,b,w){t.hideTooltip(),i=w,p=h.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","")}).popupmenu({trigger:"immediate",offset:{y:15},placementOpts:{strategies:["flip","nudge"]}}).off("selected.datagrid-filter").on("selected.datagrid-filter",function(){var v=$(a).data("popupmenu");v&&v.destroy(),i=null;var b=t.columnById(h.attr("data-column-id"))[0],w=h.find("input"),k=h.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","");if(b&&/date|integer|decimal/.test(b.filterType))if("date"===b.filterType){var A=b.editorOptions||{};b.dateFormat&&(A.dateFormat=b.dateFormat),t.filterSetDatepicker(w,k,A)}else{var M=b.filterMaskOptions?b.filterMaskOptions:b.maskOptions,L=M?.rangeNumberDelimeter||"-",z="in-range"===k,q=w.data("mask"),O=z?{process:"rangeNumber",patternOptions:{delimeter:L}}:{process:"number",patternOptions:{delimeter:""}};q&&q.settings.process!==O.process&&(b.filterMaskOptions&&(b.filterMaskOptions=H.extend(!0,{},b.filterMaskOptions,O)),b.maskOptions&&(b.maskOptions=H.extend(!0,{},b.maskOptions,O)),q.updated(O))}var _=w.val(),G=h.attr("data-column-id");t.element.triggerHandler("filteroperatorchanged",[{operator:k,defaultOperator:p,value:_,columnId:G}]),t.applyFilter(null,"selected")}),!1}),this.element.off("keydown.datagrid-filter-input").on("keydown.datagrid-filter-input",".datagrid-filter-wrapper input",function(a){return clearTimeout(n),a.stopPropagation(),13!==a.which||(t.applyFilter(null,"enter"),a.preventDefault(),a.stopPropagation(),!1)}),this.element.off("focus.datagrid-filter-focus").on("focus.datagrid-filter-focus",".datagrid-filter-wrapper input",function(){var a;null===(a=i)||void 0===a||a?.close();var o=$("#dropdown-list").attr("data-element-id"),l=$("#".concat(o)).data("dropdown");l&&l.isOpen()&&l.closeList("click")}),this.element.off("click.datagrid-filter-click").on("click.datagrid-filter-click","th",function(){var a;null===(a=i)||void 0===a||a?.close();var o=$("#dropdown-list").attr("data-element-id"),l=$("#".concat(o)).data("dropdown");l&&l.isOpen()&&l.closeList("click")}),this.settings.filterWhenTyping&&this.element.off("keyup.datagrid-filter-input").on("keyup.datagrid-filter-input",".datagrid-filter-wrapper input",function(a){13!==a.which&&(e.activeCell&&e.activeCell.isFocused&&(e.activeCell.isFocused=!1),clearTimeout(n),n=setTimeout(function(){t.applyFilter(null,"keyup")},400))}),this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th").each(function(){var a=t.columnById($(this).attr("data-column-id"))[0],o=$(this);if(!a)return!0;o.find("select.dropdown").each(function(){var p=$(this);p.dropdown(a.editorOptions).on("selected.datagrid",function(){t.applyFilter(null,"selected")}).on("listopened.datagrid",function(){var b=p.data("dropdown");b&&(H.isInViewport(b.list[0])||t.adjustPosLeft(b.list[0]))}),p.data("dropdown").settings.sourceArguments={column:a,container:o,grid:t,cell:a,event:void 0,row:-1,rowData:{},value:void 0}}),o.find("select.multiselect").each(function(){var p=this,v=$(this);v.multiselect(a.editorOptions).on("selected.datagrid",function(){var w=$(p);$("#".concat(w.attr("id"))).val(w.val()),t.applyFilter(null,"selected")}),v.data("dropdown").settings.sourceArguments={column:a,container:o,grid:t,cell:a,event:void 0,row:-1,rowData:{},value:void 0}}),a.filterMaskOptions?o.find("input").mask(a.filterMaskOptions):a.maskOptions&&o.find("input").mask(a.maskOptions),a.filterMask?o.find("input").mask(a.filterMask):a.mask&&o.find("input").mask(a.mask);var l=o.find(".datepicker");l.length&&"function"==typeof $().datepicker&&l.datepicker(a.editorOptions||{dateFormat:a.dateFormat}).on("listclosed.datepicker",function(){t.applyFilter(null,"selected")});var d=o.find(".lookup");d.length&&"function"==typeof $().lookup&&(a.editorOptions&&(a.editorOptions.clickArguments?a.editorOptions.clickArguments.grid=t:a.editorOptions.clickArguments={grid:t},a.editorOptions.clearArguments?a.editorOptions.clearArguments.grid=t:a.editorOptions.clearArguments={grid:t}),d.lookup(a.editorOptions||{}),t.settings.filterWhenTyping&&d.on("change",function(){t.applyFilter(null,"selected")}));var h=o.find(".timepicker");return h.length&&"function"==typeof $().timepicker&&(h.timepicker(a.editorOptions||{timeFormat:a.timeFormat}),h.on("change",function(){t.applyFilter(null,"enter")})),a.filterMask?o.find("input").mask({pattern:a.filterMask,mode:a.maskMode}):a.mask&&o.find("input").mask({pattern:a.mask,mode:a.maskMode}),null}),t.filterRowRendered=!0}},filterItemHtml:function(e,t,i){var n=$.createIcon({classes:"icon icon-filter",icon:"filter-".concat(e)});return'<li class="'.concat(e," ").concat(i?" is-checked":"",'"><a href="#">').concat(n,"<span>").concat(B.translate(t),"</span></a></li>")},filterButtonHtml:function(e){var t;if(!e.filterType)return"";var i=this,n=e.filterDisabled,a=$.isArray(e.filterConditions)?e.filterConditions:[],l=!a.some(function(z){return"string"!=typeof z&&z.selected}),h=function(M,L,z){var q,O;l?(q=!(!a.length||a[0]!==M)||z,O=a):(O=[],q="string"!=typeof M&&M.selected,a.forEach(function(G){O.push("string"==typeof G?G:G.value)}));var _="string"==typeof M?M:M.value;return a.length&&!function(M,L){return L=L||a,$.inArray(M,L)>-1}(_,O)?"":i.filterItemHtml(_,L,q)},p=H.stringAttributes(this,this.settings.attributes,"btn-filter-".concat(null===(t=e.id)||void 0===t?void 0:t?.toLowerCase())),v=function(M,L){var z=void 0!==e.filterConditions&&1===e.filterConditions.length;return'<button type="button" '.concat(p,' class="btn-menu btn-filter').concat(L?" ".concat(L):"").concat(z?" single":"",'" data-init="false" ').concat(n||z?" disabled":"").concat(M?' data-default="'.concat(M,'"'):"",' tabindex="0" type="button"><span class="audible">Filter</span>')+'<svg class="icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-filter-{{icon}}"></use></svg>'.concat($.createIcon({icon:"dropdown",classes:"icon-dropdown"}),'</button><ul class="popupmenu has-icons is-translatable is-selectable">')},b=function(M){var L=M;switch("string"!=typeof L&&(L=M.value),M=L.split("-").map(function(z){return z.charAt(0).toUpperCase()+z.slice(1)}).join("")){case"StartWith":M=M.replace("StartWith","StartsWith");break;case"EndWith":M=M.replace("EndWith","EndsWith");break;case"LessEquals":M=M.replace("LessEquals","LessOrEquals");break;case"GreaterEquals":M=M.replace("GreaterEquals","GreaterOrEquals")}return M},w=function(M,L){var z=L;return M.forEach(function(q){"string"!=typeof q&&q.selected&&(z=q.value)}),z},T="",k="";return"contents"===e.filterType||"select"===e.filterType||"multiselect"===e.filterType?"":("text"===e.filterType&&(k=w(a,a.length?a[0]:"contains"),T=0===a.length?(T=v(k)+h("contains","Contains",!0)+h("does-not-contain","DoesNotContain")+h("equals","Equals")+h("does-not-equal","DoesNotEqual")+h("is-empty","IsEmpty")+h("is-not-empty","IsNotEmpty")+h("end-with","EndsWith")+h("does-not-end-with","DoesNotEndWith")+h("start-with","StartsWith")+h("does-not-start-with","DoesNotStartWith")).replace("{{icon}}",k):(T=v(k)+a.map(function(A){return h(A,b(A))}).join("")).replace("{{icon}}",k)),"checkbox"===e.filterType&&(T=(T+=v(k=a.length?a[0]:"selected-notselected","btn-filter-checkbox")+h("selected-notselected","All",!0)+h("selected","Selected")+h("not-selected","NotSelected")).replace("{{icon}}",k)),"checkbox"!==e.filterType&&"text"!==e.filterType&&(T=(T+=v(k=a.length?a[0]:"equals")+h("equals","Equals","lookup"===e.filterType||"integer"===e.filterType||"decimal"===e.filterType||"date"===e.filterType||"time"===e.filterType)+h("does-not-equal","DoesNotEqual")+h("is-empty","IsEmpty")+h("is-not-empty","IsNotEmpty")).replace("{{icon}}",k)),/\b(date|integer|decimal|percent)\b/g.test(e.filterType)&&(T+=h("in-range","InRange")),/\b(date|time)\b/g.test(e.filterType)&&(k=w(a,a.length?a[0]:"equals"),T=0===a.length?(T=v(k)+h("less-than","EarlyThan")+h("less-equals","EarlyOrEquals")+h("greater-than","LaterThan")+h("greater-equals","LaterOrEquals")).replace("{{icon}}",k):(T=v(k)+a.map(function(A){return h(A,b(A))}).join("")).replace("{{icon}}",k)),/\b(integer|decimal|percent)\b/g.test(e.filterType)&&(T=(T+="".concat(h("less-than","LessThan")).concat(h("less-equals","LessOrEquals")).concat(h("greater-than","GreaterThan")).concat(h("greater-equals","GreaterOrEquals"))).replace("{{icon}}","less-than")),"lookup"===e.filterType&&(k=w(a,a.length?a[0]:"contains"),T=0===a.length?(T=v(k)+h("contains","Contains",!0)+h("does-not-contain","DoesNotContain")+h("equals","Equals")+h("does-not-equal","DoesNotEqual")+h("is-empty","IsEmpty")+h("is-not-empty","IsNotEmpty")+h("end-with","EndsWith")+h("does-not-end-with","DoesNotEndWith")+h("start-with","StartsWith")+h("does-not-start-with","DoesNotStartWith")).replace("{{icon}}",k):(T=v(k)+a.map(function(A){return h(A,b(A))}).join("")).replace("{{icon}}",k)),T+="</ul>")},toggleFilterRow:function(){this.settings.filterable?(this.element.find(".datagrid-filter-wrapper").hide(),this.settings.filterable=!1,this.filterRowRendered=!1,this.element.removeClass("has-filterable-columns"),this.element.removeClass("has-two-line-header"),this.element.triggerHandler("closefilterrow")):(this.settings.filterable=!0,this.filterRowRendered=!0,this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.find(".datagrid-filter-wrapper").show(),this.element.triggerHandler("openfilterrow"),this.attachFilterRowEvents()),this.setupTooltips()},applyFilter:function(e,t){var i=this,n=this,a=!1,o=function q(O){for(var _=0,G=O.length;_<G;_++)typeof O[_]._isFilteredOut<"u"&&delete O[_]._isFilteredOut,O[_].children&&q(O[_].children)};e?this.setFilterConditions(e):e=this.filterConditions(),void 0===this.filterExpr&&(this.filterExpr=[]),this.pagerAPI&&JSON.stringify(e)!==JSON.stringify(this.filterExpr)&&(this.filterExpr=e,a=!0,this.settings.treeGrid&&o(this.settings.dataset));var l=function(O){for(var j,_=!0,G=function(he){var we=n.columnById(e[he].columnId)[0];if(void 0===we)return{v:!1};var He,re=O&&void 0!==O[we.field]?O[we.field]:n.fieldValue(O,we.field),Ne=null==re?"":re.toString().toLowerCase(),le=e[he].value.toString().toLowerCase(),Te=null,ge=null,ce=null,Be=!1;if("percent"===we.filterType&&(le=(le/100).toString(),"decimal"==="".concat(we.name).toLowerCase()?(re=Yi.Decimal(!1,!1,re,we),le=Yi.Decimal(!1,!1,le,we)):"integer"==="".concat(we.name).toLowerCase()&&(re=Yi.Integer(!1,!1,re,we),le=Yi.Integer(!1,!1,le,we))),"text"===we.filterType&&(Ne=null==(re=(re=n.formatValue(we.formatter,he,e[he].columnId,re,we,O,n)).replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").trim().toLowerCase())?"":re.toString().toLowerCase()),("contents"===we.filterType||"select"===we.filterType||"multiselect"===we.filterType)&&(re=null==re?"":re.toString().toLowerCase()),!("number"!=typeof re&&(isNaN(re)||""===re||e[he].value instanceof Array)||/^(date|time|text)$/.test(we.filterType)))if(re=null===re?re:parseFloat(re),we&&"rangeNumber"===(null===(He=we.maskOptions)||void 0===He?void 0:He?.process)){var Ae,We=null===(Ae=we.maskOptions.patternOptions)||void 0===Ae?void 0:Ae?.delimeter;We=")".concat(We,"("),"("===le.substr(0,1)&&(le=le.substr(1)),")"===le.substr(-1)&&(le=le.substr(0,le.length-1)),le=le.split(We).map(function(yi){return B.parseNumber(yi)}).sort(function(yi,Nt){return yi-Nt}),Be=!0}else le=B.parseNumber(le),Be=!1;if("date"===we.filterType||"time"===we.filterType){"string"==typeof re&&(re=we.formatter(!1,!1,re,we,!0));var yt=function(Nt,Ai){return(Ai=B.parseDate(Ai,e[he].format))&&("time"===we.filterType&&(Ai.setDate(1),Ai.setMonth(0),Ai.setYear(0)),Ai=Ai.getTime()),Nt instanceof Date?(Nt=new Date(Nt.getTime()),"time"===we.filterType?(Nt.setDate(1),Nt.setMonth(0),Nt.setYear(0)):we.editorOptions&&we.editorOptions.showTime||(Nt.setHours(0),Nt.setMinutes(0),Nt.setSeconds(0),Nt.setMilliseconds(0)),Nt=Nt.getTime()):"string"==typeof Nt&&Nt&&(Nt=B.parseDate(Nt,we.sourceFormat?"string"==typeof we.sourceFormat?{pattern:we.sourceFormat}:we.sourceFormat:{pattern:e[he].format}))&&("time"===we.filterType?(Nt.setDate(1),Nt.setMonth(0),Nt.setYear(0)):we.editorOptions&&we.editorOptions.showTime||(Nt.setHours(0),Nt.setMinutes(0),Nt.setSeconds(0),Nt.setMilliseconds(0)),Nt=Nt.getTime()),{rValue:Nt,cValue:Ai}},Dt=null;if("in-range"===e[he].operator){var zt=n.settings.columns.indexOf(we),ti=n.element.find(".datagrid-header th:eq(".concat(zt,") .datagrid-filter-wrapper input")).data("datepicker");ti&&(ge=ti.settings.range.separator,(Te=ti.settings.range.data)&&Te.start?Dt=yt(re,Te.start):ge&&le.indexOf(ge)>-1&&(Dt=yt(re,(ce=le.split(ge))[0])))}else Dt=yt(re,e[he].value);re=Dt?Dt.rValue:re,le=Dt?Dt.cValue:le}switch(e[he].operator){case"equals":if(e[he].value instanceof Array){_=!1;for(var ci=0;ci<e[he].value.length;ci++)e[he].value[ci].toLowerCase()===re&&(""!==re.toString()||""===e[he].value[ci])&&(_=!0)}else _=re===le&&""!==re;break;case"does-not-equal":_=re!==le;break;case"contains":_=Ne.indexOf(le)>-1&&""!==re.toString();break;case"does-not-contain":_=-1===Ne.indexOf(le);break;case"end-with":_=Ne.lastIndexOf(le)===Ne.length-le.toString().length&&""!==Ne&&Ne.length>=le.toString().length;break;case"start-with":_=0===Ne.indexOf(le)&&""!==Ne;break;case"does-not-end-with":_=!(_=Ne.lastIndexOf(le)===Ne.length-le.toString().length&&""!==Ne&&Ne.length>=le.toString().length);break;case"does-not-start-with":_=!(0===Ne.indexOf(le)&&""!==Ne);break;case"is-empty":_=""===Ne;break;case"is-not-empty":if(""===re){_=""!==re;break}_=null!==re;break;case"in-range":if(_=!1,Te&&Te.startDate&&Te.endDate){var ut=Te.startDate.getTime(),Xe=Te.endDate.getTime();_=re>=ut&&re<=Xe&&null!==re}else if(ce){var Lt=B.parseDate(ce[0],e[he].format),Tt=B.parseDate(ce[1],e[he].format);Lt&&Tt&&(Lt=Lt.getTime(),Tt=Tt.getTime(),_=re>=Lt&&re<=Tt&&null!==re)}Be&&(_=re>=le[0]&&re<=le[1]&&""!==re&&null!==re);break;case"less-than":_=re<le&&""!==re&&null!==re;break;case"less-equals":_=re<=le&&""!==re&&null!==re;break;case"greater-than":_=re>le&&""!==re&&null!==re;break;case"greater-equals":_=re>=le&&""!==re&&null!==re;break;case"selected":if(we&&we.isChecked){_=we.isChecked(re);break}_=("1"===Ne||"true"===Ne||!0===re||1===re)&&""!==Ne;break;case"not-selected":if(we&&we.isChecked){_=!we.isChecked(re);break}_="0"===Ne||"false"===Ne||!1===re||0===re||""===Ne;break;case"selected-notselected":_=!0}return _?void 0:{v:!1}},X=0;X<e.length;X++)if(j=G(X))return j.v;return _};if(!this.settings.disableClientFilter)if(this.settings.treeGrid)o(this.settings.dataset),function(){for(var O=!0,_=0,G=e.length;_<G;_++)("checkbox"===e[_].filterType||""!==e[_].value.toString().trim())&&(O=!1),"text"===e[_].filterType&&"is-empty"===e[_].operator&&(O=!1);return O}()||function q(O){for(var _=!0,G=0,j=O.length;G<j;G++){var X=O[G],fe=!0;if(X.children)if(i.settings.allowChildExpandOnMatch&&i.settings.allowChildExpandOnMatchOnly){var he=l(X);he||(fe=q(X.children)),he?(X._isFilteredOut=!1,_=!1):fe?(X._isFilteredOut=!l(X),X._isFilteredOut||(_=!1)):_=!1}else(fe=q(X.children))?(X._isFilteredOut=!l(X),X._isFilteredOut||(_=!1)):_=!1;else X._isFilteredOut=!l(X),X._isFilteredOut||(_=!1)}return _}(this.settings.dataset);else if(this.settings.groupable)for(var p,v=0,b=this.settings.dataset.length;v<b;v++){for(var w=!0,T=0,k=this.settings.dataset[v].values.length;T<k;T++)p=!l(this.settings.dataset[v].values[T]),this.settings.dataset[v].values[T]._isFilteredOut=p,p||(w=!1);this.settings.dataset[v]._isFilteredOut=w}else for(var A,M=0,L=this.settings.dataset.length;M<L;M++)A=!l(this.settings.dataset[M]),this.settings.dataset[M]._isFilteredOut=A;if(this.setChildExpandOnMatch(),!this.settings.source&&!this.settings.disableClientFilter&&(this.clearCache(),this.renderRows()),a){var z={trigger:t,type:"filtered"};this.settings.source&&(z.preserveSelected=this.settings.allowSelectAcrossPages),this.setSearchActivePage(z)}this.settings.disableClientFilter&&"restore"===t||(this.element.trigger("filtered",{op:"apply",conditions:e,trigger:t}),this.saveUserSettings())},adjustPosLeft:function(e){var i=e.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth;i.left<0&&i.right<=n?e.style.left="".concat(20,"px"):i.left>=0&&!(i.right<=n)&&(e.style.left="".concat(n-i.width-20,"px"))},setChildExpandOnMatch:function(){var e=this.settings;e.treeGrid&&(function n(a){for(var o=!1,l=0,d=a.length;l<d;l++){var h,p,v=a[l];v._isFilteredOut&&!o&&null!==(h=v.children)&&void 0!==h&&null!=(p=h)&&p.length&&(v._isFilteredOut=!n(v.children)),"boolean"==typeof v._isFilteredOut&&!v._isFilteredOut&&(o=!0)}return o}(e.dataset),function n(a,o){for(var l=0,d=a.length;l<d;l++){var h=a[l],p=h.children,v=p?p.length:0;if(v){if(!h._isFilteredOut)if(e.allowChildExpandOnMatch&&!e.allowChildExpandOnMatchOnly)for(var b=0;b<v;b++)p[b]._isFilteredOut=!1;else{for(var w=!0,T=0;T<v;T++)p[T]._isFilteredOut||(w=!1);h.isAllChildrenFiltered=w}n(p)}}}(e.dataset))},clearFilter:function(){this.settings.filterable&&(this.clearFilterFields(),this.applyFilter(),this.element.trigger("filtered",{op:"clear",conditions:[]}))},clearFilterFields:function(){this.settings.filterable&&(this.element.find(".datagrid-header input, select").each(function(){var e=$(this);e.val(""),e.is("select")&&e.find("option").each(function(){$(this).prop("selected",!1)}),e.trigger("updated")}),this.element.find(".datagrid-header .btn-filter").each(function(){var e=$(this),t=e.next(),i=t.find("li:first");e.find("svg:first > use").attr("href","#icon-filter-".concat(e.attr("data-default"))),t.find(".is-checked").removeClass("is-checked"),i.addClass("is-checked")}))},setFilterConditions:function(e){this.clearFilterFields();for(var t=0;t<e.length;t++){var i=this.element.find('.datagrid-header th[data-column-id="'.concat(e[t].columnId,'"]')),n=i.find("input, select"),a=i.find(".btn-filter"),o=a.next();if(void 0===e[t].value&&(e[t].value=""),n.val(e[t].value),n.is(".lookup")&&1===n.parent().find("svg.close").length&&e[t].value&&n.parent().find("svg.close").removeClass("is-empty"),n.is("select")){var l=e[t].value instanceof Array?e[t].value[0]:e[t].value;if(e[t].innerHTML&&(n[0].innerHTML=e[t].innerHTML),n.find('option[value="'.concat(l,'"]')).length)if(e[t].value instanceof Array&&!e[t].selectedOptions){var h=n[0].querySelectorAll("option");n.val("");for(var p=0;p<h.length;p++)h[p].selected=!1;for(var v=0;v<e[t].value.length;v++)n.find('option[value="'.concat(e[t].value[v],'"]')).prop("selected",!0)}else n.find('option[value="'.concat(e[t].value,'"]')).prop("selected",!0);else{var d=n.data("dropdown");d&&d.setCode(e[t].value)}n.trigger("updated")}a.find("svg:first > use").attr("href","#icon-filter-".concat(e[t].operator)),o.find(".is-checked").removeClass("is-checked"),o.find(".".concat(e[t].operator)).addClass("is-checked")}},filterConditions:function(){if(this.filterExpr&&1===this.filterExpr.length&&this.filterExpr[0].keywordSearch)return delete this.filterExpr[0].keywordSearch,this.filterExpr;var e=[],t=this;return this.element.find("th.is-filterable").each(function(){var i=$(this),n=i.find(".btn-filter"),a=i.find("input, select"),o=a.is("select"),l=n.find(".icon-dropdown:first"),d=null,h=null;if((n.length||o)&&!("selected-notselected"===(d=o?"equals":l.getIconName().replace("filter-",""))||""===a.val()&&-1===["is-not-empty","is-empty","selected","not-selected"].indexOf(d)||a.val()instanceof Array&&0===a.val().length)){var p=a.val()?a.val():"";a.attr("data-mask-mode")&&"number"===a.attr("data-mask-mode")&&(p=B.parseNumber(p));var v={columnId:i.attr("data-column-id"),operator:d,value:p};a.data("datepicker")&&(h=a.data("datepicker").pattern,v.format=h),a.data("timepicker")&&(h=a.data("timepicker").settings.timeFormat,v.format=h),a.is("select")&&(v.innerHTML=a[0].innerHTML);var b=t.columnById(v.columnId);b&&b[0]&&(v.filterType=b[0].filterType),e.push(v)}}),e},getExtraTop:function(){var e=this.settings,t={default:{extraSmall:0,short:0,small:0,medium:0,normal:0,large:0},filterable:{extraSmall:0,short:0,small:0,medium:0,normal:0,large:0},group:{extraSmall:-22,short:-25,small:-25,medium:-30,normal:-39,large:-39},groupFilter:{extraSmall:-28,short:-29,small:-29,medium:-32,normal:-39,large:-39}},n="extra-small"===e.rowHeight?"extraSmall":e.rowHeight;return e.columnGroups?e.filterable?t.groupFilter[n]:t.group[n]:e.filterable?t.filterable[n]:t.default[n]},getTargetHeight:function(){var e=this.settings,t={default:{extraSmall:20,short:20,small:20,medium:28,normal:35,large:35},filterable:{extraSmall:47,short:53,small:53,medium:54,normal:60,large:60},group:{extraSmall:43,short:46,small:46,medium:56,normal:74,large:74},groupFilter:{extraSmall:80,small:80,short:83,medium:87,normal:103,large:103}},n="extra-small"===e.rowHeight?"extraSmall":e.rowHeight;return e.columnGroups?e.filterable&&this.filterRowRendered?t.groupFilter[n]:t.group[n]:e.filterable&&this.filterRowRendered?t.filterable[n]:t.default[n]},getCellPadding:function(){return{"extra-small":8,short:8,small:8,medium:16,normal:16,large:16}[this.settings.rowHeight]},createDraggableColumns:function(){var e=this,t=e.headerNodes().not('[data-column-id="selectionCheckbox"]').not(".datagrid-header-spacer-column"),i=$(".drag-target-arrows",e.element);i.length||(e.element.prepend('<span class="drag-target-arrows" style="height: '.concat(e.getTargetHeight(),'px;"></span>')),i=$(".drag-target-arrows",e.element)),t.not('[data-reorder="false"]').prepend('</span><span class="handle">'.concat($.createIcon({icon:"drag"}),"</span>")),t.prepend('<span class="is-draggable-target"></span>'),t.last().append('<span class="is-draggable-target last"></span>'),e.element.addClass("has-draggable-columns"),$(".handle",t).each(function(){var n=null,a=null,o=null,l=0,d=$(this),h=d.parent();d.on("mousedown.datagrid",function(p){p.preventDefault(),e.editor&&e.editor.input&&e.commitCellEdit(),h.drag({clone:!0,cloneAppendTo:t.first().parent().parent(),clonePosIsFixed:!0}).off("dragstart.datagrid").on("dragstart.datagrid",function(v,b,w){(n=w).removeAttr("id").addClass("is-dragging-clone").css({left:B.isRTL()?b.right-n.width():b.left,top:b.top,height:h.height(),border:0}),$(".is-draggable-target",n).remove(),e.setDraggableColumnTargets(),l=e.getExtraTop(),a=h.position(),o={top:b.top-a.top,left:b.left-a.left};var T=e.targetColumn(a);e.draggableStatus.startIndex=T,p.stopImmediatePropagation()}).off("drag.datagrid").on("drag.datagrid",function(v,b){n[0].style.left="".concat(parseInt(B.isRTL()?b.left+b.offset.x-b.clone.width():b.left,10),"px"),n[0].style.top="".concat(parseInt(b.top,10),"px"),a={top:b.top-o.top,left:b.left-o.left},B.isRTL()&&(a.left=parseInt(n[0].style.left,10));var w=0,T=null,k=null,A=e.targetColumn(a);if($(".is-draggable-target",t).add(i).removeClass("is-over"),-1!==A)for(var M=function(){if(w=L+1,(T=e.draggableColumnTargets[L]).index===A&&T.index!==e.draggableStatus.startIndex){T.index>e.draggableStatus.startIndex&&w<z&&(T=e.draggableColumnTargets[w]);var O=T.el.siblings(".datagrid-column-wrapper").find(".datagrid-header-text").text();e.getFrozenColumnDetails().filter(function(X){return X.name===O}).length>0||(T.el.addClass("is-over"),i.addClass("is-over")),k=T.el[0].getBoundingClientRect(),i[0].style.left="".concat(parseInt(k.left+(B.isRTL()?2:1),10),"px");var j=0;T.el.hasClass("last")&&(j=-(h.height()-3)),i[0].style.top="".concat(parseInt(k.top,10)+1+l+j,"px")}},L=0,z=e.draggableColumnTargets.length;L<z;L++)M();p.stopImmediatePropagation()}).off("dragend.datagrid").on("dragend.datagrid",function(v,b){B.isRTL()||(n[0].style.left="".concat(parseInt(b.left,10),"px"),n[0].style.top="".concat(parseInt(b.top,10),"px")),a={top:b.top-o.top,left:b.left-o.left},B.isRTL()&&(a.left=parseInt(n[0].style.left,10));var A,M,L,z,w=e.targetColumn(a),T=h.data("drag"),k=[];if(T&&T.destroy&&T.destroy(),e.draggableStatus.endIndex=w,$(".is-draggable-target",t).add(i).removeClass("is-over"),-1!==e.draggableStatus.endIndex&&e.draggableStatus.startIndex!==e.draggableStatus.endIndex){for(A=0,M=e.settings.columns.length;A<M;A++)!e.settings.columns[A].hidden&&"selectionCheckbox"!==e.settings.columns[A].id&&k.push(A);if(L=k[e.draggableStatus.startIndex]||0,z=k[e.draggableStatus.endIndex]||0,e.settings.showDirty&&e.dirtyArray){var q=function(G,j,X,fe){for(var he=[],we=X;we<=fe;we++)j[we]&&"object"===rt(j[we])?e.setDirtyCell(G,we,j[we]):!1===j[we]&&he.push(we);he.forEach(function(re){return e.clearDirtyCell(G,re)})},O=function(G,j,X,fe,he){e.dirtyArray[G][he]&&e.dirtyArray[G][he].isDirty?X[he]=!0:(X[he]=ca({},j[fe]),X[he].cell=he,X[he].column=e.settings.columns[he])};L>z?e.dirtyArray.forEach(function(_,G){for(var j=Array(L+1).fill(!1),X=z;X<=L;X++)_&&_[X]&&_[X].isDirty&&(X===L?O(G,_,j,L,z):O(G,_,j,X,X+1));q(G,j,z,L)}):L<z&&e.dirtyArray.forEach(function(_,G){for(var j=Array(z+2).fill(!1),X=z;X>=L;X--)_&&_[X]&&_[X].isDirty&&(X===L?O(G,_,j,L,z):O(G,_,j,X,X-1));q(G,j,L,z)})}e.updateGroupHeadersAfterColumnReorder(L,z),e.arrayIndexMove(e.settings.columns,L,z),e.updateColumns(e.settings.columns),e.element.trigger("columnreorder",[{indexFrom:L,indexTo:z,columns:e.settings.columns}])}})})})},getFrozenColumnDetails:function(){var e=this,t=this.settings.frozenColumns,i=[],n=[];t.left.length>0&&(i=$.merge(i,t.left)),t.right.length>0&&(i=$.merge(i,t.right));for(var a=function(d){var h=e.settings.columns.filter(function(p){return p.id===i[d]});h.length>0&&n.push(h[0])},o=0;o<i.length;o++)a(o);return n},setDraggableColumnTargets:function(){var i,n,e=this,t=e.headerNodes().not(".is-hidden").not('[data-column-id="selectionCheckbox"]').not(".datagrid-header-spacer-column");e.draggableColumnTargets=[],e.draggableStatus={},$(".is-draggable-target.last",t.last()).length||t.last().append($(".is-draggable-target.last",e.headerNodes())),$(".is-draggable-target",t).each(function(o){var l=$(this).is(".last")?o-1:o;i=t.eq(l),n=i.position(),e.draggableColumnTargets.push({el:$(this),index:l,pos:n,width:i.outerWidth(),height:i.outerHeight(),dropArea:{x1:n.left-20,x2:n.left+i.outerWidth()+20,y1:n.top-20+e.getExtraTop(),y2:n.top+i.outerHeight()+20}})})},targetColumn:function(e){var n,a,o,i=-1;for(a=0,o=this.draggableColumnTargets.length-1;a<o;a++)if(e.left>(n=this.draggableColumnTargets[a]).dropArea.x1&&e.left<n.dropArea.x2&&e.top>n.dropArea.y1&&e.top<n.dropArea.y2&&(i=n.index,B.isRTL()))return i;return i},arrayIndexMove:function(e,t,i){for(var d,n=[e[t],e[i]],a=this.getFrozenColumnDetails(),l=function(v){if(n.filter(function(w){return w.id===a[v].id}).length>0)return{v:void 0}},h=0;h<a.length;h++)if(d=l(h))return d.v;e.splice(i,0,e.splice(t,1)[0])},resetGroupArray:function(){if(this.settings.groupable){this.groupArray=[];for(var e=0,t=this.settings.dataset.length;e<t;e++)for(var n=0,a=this.settings.dataset[e].values.length;n<a;n++)this.groupArray.push({group:e,node:n})}},resequenceGroupRows:function(){if(this.settings.groupable)for(var e=this.tableBody.find("tr:not(.datagrid-rowgroup-header)"),t=0;t<e.length;t++)e[t].setAttribute("aria-rowindex",this.pagingRowIndex(t+1))},createDraggableRowsGroupable:function(){var e=this,t=this,i=this.settings;if(i.rowReorder&&i.groupable){"rowReorder"===i.columns[0].id&&(i.columns[0].resizable=!1,this.tableBody.find('> [role="row"] td:first-child').removeClass("l-center-text").addClass("reorder-group-child-col"));var a,n="> tr:not(.is-dragging-clone)",l=function(p){for(var v=0,b=a.length;v<b;v++){var w=a[v].rect;if(p.top>=w.top&&p.top<w.bottom)return ca({},a[v])}return null};this.tableBody.find(n).find(".datagrid-reorder-icon").each(function(){var h=null,p=null,v=null,b=!1,w=$(this);w.off("mousedown.datagrid").on("mousedown.datagrid",function(T){T.preventDefault(),function(p){return!(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)&&1===(p.buttons||p.which||p.button)}(T)&&w.closest("tr").drag({axis:"y",clone:!0,cloneAppendTo:w.closest("tbody"),clonePosIsFixed:!0}).off("dragstart.datagrid").on("dragstart.datagrid",function(k,A,M){(h=M).removeAttr("id").addClass("is-dragging-clone groupable"),h.css({top:"".concat(A.top,"px")});var L=h.find("> td");$(this).find("> td").each(function(q,O){return L.eq(q).width($(O).width())}),function(){a=[];for(var p=e.tableBody.find(n),v=0,b=-1,w=-1,T=p.length;v<T;v++){var k=p[v];"rowgroup"===k.getAttribute("role")?(b++,w=-1):w++,a.push({group:b,node:w,row:k,idx:v,rect:k.getBoundingClientRect(),role:k.getAttribute("role")})}}(),(v={idx:t.tableBody.find(n).index(this),rect:this.getBoundingClientRect(),role:this.getAttribute("role"),row:this}).group=a[v.idx].group,v.node=a[v.idx].node;var z=$(this);"rowgroup"===v.role?p=z.add(z.nextUntil(".datagrid-rowgroup-header")):"row"===v.role&&(p=z),p.css("opacity",".4"),b=!0}).on("drag.datagrid",function(k,A){if(h&&b){b=!1;var M=!1,L=l(A);null!==L&&("rowgroup"===v.role&&(M=v.group!==L.group),"row"===v.role&&(M=v.role===L.role&&v.group===L.group));var z=M?"":"not-allowed";h.add(h.find(".datagrid-reorder-icon")).css("cursor",z),b=!0}}).off("dragend.datagrid").on("dragend.datagrid",function(k,A){var M=A.top>v.rect.top,L=l(A),z=!1;if(null!==L){var q;if("rowgroup"===v.role&&v.group!==L.group){var O=".datagrid-rowgroup-header";M?(q=$(L.row).nextUntil(O).last(),p.insertAfter(q)):(q="rowgroup"===L.role?L.row:$(L.row).prevUntil(O).last().prev(O),p.insertBefore(q)),t.arrayIndexMove(i.dataset,v.group,L.group),z=!0}else"row"===v.role&&v.role===L.role&&v.group===L.group&&(t.arrayIndexMove(i.dataset[v.group].values,v.node,L.node),p[M?"insertAfter":"insertBefore"](q=L.row),z=!0);z&&(t.resetGroupArray(),t.resequenceGroupRows(),t.syncSelectedRowsIdx(),t.element.trigger("rowreorder",[{start:{rowIndex:v.idx,group:v.group,node:-1!==v.node?v.node:null},end:{rowIndex:L.idx,group:L.group,node:-1!==v.node?L.node:null},rowreorderRows:p,role:v.role}]))}p.css("opacity",""),b=!1;var G=w.closest("tr").data("drag");G?.destroy()})})})}},createDraggableRows:function(){var e=this;if(this.settings.rowReorder){if(this.settings.groupable)return void this.createDraggableRowsGroupable();this.tableBody.children().filter(function(){return $(this).find(".datagrid-reorder-icon").length<1}).attr("data-arrange-exclude",!0),this.tableBody.arrange({placeholder:'<tr class="datagrid-reorder-placeholder"><td colspan="'.concat(this.visibleColumns().length,'"></td></tr>'),handle:".datagrid-reorder-icon",isVisualItems:!0}).off("beforearrange.datagrid").on("beforearrange.datagrid",function(t,i){e.isSafari&&i.start.css({display:"inline-block"})}).off("arrangeupdate.datagrid").on("arrangeupdate.datagrid",function(t,i){e.isSafari&&i.end.css({display:""}),e.reorderRow(i.startIndex,i.endIndex,i)})}},reorderRow:function(e,t,i){var n=t>e,a=this.tableBody.find("tr").eq(e),o=this.tableBody.find("tr").eq(t),l={start:this.dataRowIndex(i?i.start:o)};l.end=l.start+(t-e),this.arrayIndexMove(this.settings.dataset,l.start,l.end),i?(this.settings.rowTemplate||this.settings.expandableRow)&&(n?(this.tableBody.find("tr").eq(2*e).insertAfter(i.end),i.end.next().next().insertAfter(i.over)):this.tableBody.find("tr").eq(2*e).next().insertAfter(i.end)):a[n?"insertAfter":"insertBefore"](o);for(var d=this.tableBody.find("tr:not(.datagrid-expandable-row)"),h=0;h<d.length;h++)d[h].setAttribute("data-index",h),d[h].setAttribute("aria-rowindex",this.pagingRowIndex(h+1));this.element.trigger("rowreorder",[{endIndex:t,startIndex:e,over:o,start:a}]),this.syncSelectedRowsIdx()},fieldValue:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!e)return"";var a=(n=t.indexOf(".")>-1?t.split(".").reduce(function(o,l){return o?o[l]:""},e):e[t])||0===n||!1===n?n:"";return i&&(a=Fe.escapeHTML(a)),a},setTreeRootNodes:function(){this.settings.treeGrid&&(this.settings.treeRootNodes=this.settings.treeDepth.filter(function(e){return 1===e.depth}))},setTreeDepth:function(e){if(this.settings.treeGrid){var t=this,i=0,n=function l(d,h){var p,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];i++,t.settings.treeDepth.push({idx:i,depth:h,parents:v.slice(),node:d});var b=null==d||null===(p=d?.children)||void 0===p?void 0:p?.length;if(b){v.push(i-1);for(var w=0;w<b;w++)l(d.children[w],h+1,v.slice())}};e=e||this.settings.dataset,t.settings.treeDepth=[];for(var a=0,o=e.length;a<o;a++)n(e[a],1)}},setRowGrouping:function(){var e=this.settings.groupable;if(e){if(this.originalDataset?(!this.settings.dataset||this.settings.dataset.length>0)&&(this.settings.dataset=this.originalDataset):this.originalDataset=this.settings.dataset.slice(),!e.aggregator||"none"===e.aggregator)return void(this.settings.dataset=aa.none(this.settings.dataset,e.fields));if("sum"===e.aggregator)return void(this.settings.dataset=aa.sum(this.settings.dataset,e.fields,e.aggregate));if("max"===e.aggregator)return void(this.settings.dataset=aa.max(this.settings.dataset,e.fields,e.aggregate));if("min"===e.aggregator)return void(this.settings.dataset=aa.min(this.settings.dataset,e.fields,e.aggregate));if("avg"===e.aggregator)return void(this.settings.dataset=aa.avg(this.settings.dataset,e.fields,e.aggregate));if("count"===e.aggregator)return void(this.settings.dataset=aa.count(this.settings.dataset,e.fields,e.aggregate));if("list"===e.aggregator)return void(this.settings.dataset=aa.list(this.settings.dataset,e.fields,e.aggregatorOptions));this.settings.dataset=aa(this.settings.dataset,e.fields)}},renderRows:function(){var e="",t="",i="",n=0,a=this,o=a.settings,l=a.table.find("tbody"),d=1;if(a.pagerAPI){var h=a.pagerAPI.state;d=h.filteredActivePage?h.filteredActivePage:h.activePage}for(a.bodyColGroupHtmlLeft="<colgroup>",a.bodyColGroupHtml="<colgroup>",a.bodyColGroupHtmlRight="<colgroup>",a.triggerDestroyCell(),(!a.settings.columns||0===a.settings.columns.length)&&a.settings.columns.push({id:"blank",value:"",field:""}),this.currentPageRows=[],n=0;n<a.settings.columns.length;n++){var p=a.settings.columns[n],v=a.getContainer(p.id),b=a.columnWidth(p,n);switch(v){case"left":a.bodyColGroupHtmlLeft+="<col".concat(b).concat(p.hidden?' class="is-hidden"':"","></col>");break;case"right":a.bodyColGroupHtmlRight+="<col".concat(b).concat(p.hidden?' class="is-hidden"':"","></col>");break;default:a.bodyColGroupHtml+="<col".concat(b).concat(p.hidden?' class="is-hidden"':"","></col>")}p.colspan&&(a.hasColSpans=!0)}a.emptyMessageContainer&&a.emptyMessageContainer.hide(),0===l.length&&(a.hasLeftPane&&(a.tableBodyLeft=$('<tbody role="rowgroup"></tbody>'),a.tableLeft.append(a.tableBodyLeft)),a.tableBody=$('<tbody role="rowgroup"></tbody>'),a.table.append(a.tableBody),a.hasRightPane&&(a.tableBodyRight=$('<tbody role="rowgroup"></tbody>'),a.tableRight.append(a.tableBodyRight))),a.groupArray=[],a.recordCount=0,a.filteredCount=0,a.runningCount=0,o.treeGrid&&o.paging&&!o.source&&d>1&&(a.recordCount=o.treeRootNodes[o.pagesize*d-o.pagesize].idx-1),this.restoreSortOrder&&this.sortDataset();var w=!1;a.originalDataset&&!o.groupable&&o.dataset.length>0&&(o.dataset=a.originalDataset);for(var T=0;T<o.dataset.length;T++){var k,A,M,L;if(o.paging&&!o.source){if(1===d&&T-this.filteredCount>=o.pagesize){o.dataset[T]._isFilteredOut?this.filteredCount++:this.recordCount++;continue}if(d>1&&!(T-this.filteredCount>=o.pagesize*(d-1)&&T-this.filteredCount<o.pagesize*d)){o.dataset[T]._isFilteredOut?this.filteredCount++:this.filteredCount&&this.recordCount++;continue}}if(!o.virtualized||this.isRowVisible(this.recordCount))if((!o.treeGrid&&o.dataset[T])._isFilteredOut)this.filteredCount++;else if(this.settings.groupable){if(o.dataset[T].values){for(var z=o.dataset[T].values.length,q=0,O=0;O<z;O++)o.dataset[T].values[O]._isFilteredOut&&q++;if(q===z)continue}if(!this.settings.groupable.suppressGroupRow){var _=a.rowHtml(o.dataset[T],this.recordCount,T,!0);this.hasLeftPane&&_.left&&(t+=_.left),_.center&&(e+=_.center),this.hasRightPane&&_.right&&(i+=_.right)}if(this.settings.groupable.showOnlyGroupRow&&o.dataset[T].values[0]){var G=o.dataset[T].values[0];o.dataset[T].list&&(G.list=o.dataset[T].list),G.values=o.dataset[T].values;var j=a.rowHtml(G,this.recordCount,T);this.hasLeftPane&&j.left&&(t+=j.left),j.center&&(e+=j.center),this.hasRightPane&&j.right&&(i+=j.right),this.recordCount++,a.groupArray.push({group:T,node:0});continue}for(var X=0;X<o.dataset[T].values.length;X++)if(!o.dataset[T].values[X]._isFilteredOut){var fe=a.rowHtml(o.dataset[T].values[X],this.recordCount,o.dataset[T].values[X].idx);a.hasLeftPane&&fe.left&&(t+=fe.left),fe.center&&(e+=fe.center),a.hasRightPane&&fe.right&&(i+=fe.right),this.recordCount++,a.groupArray.push({group:T,node:X})}if(this.settings.groupable.groupFooterRow){var he=a.rowHtml(o.dataset[T],this.recordCount,T,!0,!0);a.hasLeftPane&&he.left&&(t+=he.left),he.center&&(e+=he.center),a.hasRightPane&&he.right&&(i+=he.right)}}else{var we=T;o.treeGrid&&(we=this.recordCount),a.runningCount++;var Ne,le,re=a.rowHtml(o.dataset[T],we,T);a.hasLeftPane&&re.left&&(t+=re.left),re.center&&(e+=re.center,o.treeGrid&&null!==(Ne=this.filterExpr)&&void 0!==Ne&&null!=(le=Ne)&&le.length&&$("<table>".concat(re.center,"</table>")).find("tr:first").is(".is-hidden")&&this.filteredCount++),a.hasRightPane&&re.right&&(i+=re.right),null!==(k=o.dataset[T])&&void 0!==k&&null!=(A=k)&&A._isFilteredOut||this.recordCount++,this.visibleRowCount=we+1,null!==(M=o.dataset[T])&&void 0!==M&&null!=(L=M)&&L.rowStatus&&(w=!0)}else this.recordCount++}if(this.settings.summaryRow){a.element.addClass("has-summary-row");var Te=a.calculateTotals(),ge=a.rowHtml(Te,this.recordCount,null,!1,!0);a.hasLeftPane&&ge.left&&(t+=ge.left),ge.center&&(e+=ge.center),a.hasRightPane&&ge.right&&(i+=ge.right)}"<colgroup>"!==a.bodyColGroupHtml&&this.settings.spacerColumn&&(a.bodyColGroupHtml+='<col style="width: 100%">'),a.bodyColGroupHtmlLeft+="</colgroup>",a.bodyColGroupHtml+="</colgroup>",a.bodyColGroupHtmlRight+="</colgroup>",a.bodyColGroupLeft&&a.bodyColGroupLeft.remove(),a.bodyColGroup&&a.bodyColGroup.remove(),a.bodyColGroupRight&&a.bodyColGroupRight.remove(),a.hasLeftPane&&(a.bodyColGroupLeft=$(a.bodyColGroupHtmlLeft),(a.tableBodyLeft||a.headerRowLeft).before(a.bodyColGroupLeft)),a.bodyColGroup=$(a.bodyColGroupHtml),(a.headerRow||a.tableBody).before(a.bodyColGroup),a.hasRightPane&&(a.bodyColGroupRight=$(a.bodyColGroupHtmlRight),(a.tableBodyRight||a.headerRowRight).before(a.bodyColGroupRight)),a.hasLeftPane&&de.html(a.tableBodyLeft,t,"*"),de.html(a.tableBody,e,"*"),a.hasRightPane&&de.html(a.tableBodyRight,i,"*"),a.setVirtualHeight(),a.setScrollClass(),a.setupTooltips(w),a.afterRender()},afterRender:function(){var e=this,t=this;this.settings.fixedRowHeight&&"auto"===this.settings.fixedRowHeight&&this.settings.frozenColumns&&t.tableBody.find("tr").each(function(l){var h,d=0,p=0,v=$(this);h=v.height(),t.tableBodyLeft&&(d=t.tableBodyLeft.find("tr").eq(l).height()),t.tableBodyRight&&(p=t.tableBodyLeft.find("tr").eq(l).height());var b=Math.max(d,h,p);return v.css("height",b),t.tableBodyLeft&&(d=t.tableBodyLeft.find("tr").eq(l).css("height",b)),t.tableBodyRight&&(p=t.tableBodyLeft.find("tr").eq(l).css("height",b)),!0}),this.postRenderCell();var i=t.tableBody.find("select.dropdown");i.dropdown&&i.dropdown(),t.tableBody.find(".dropdown-wrapper.is-inline").prev("select").on("listclosed",function(){var l=$(this),d=l.val(),h=l.closest("tr");t.updateCellNode(h.attr("aria-rowindex"),l.closest("td").index(),d,!1,!0)});var n=t.tableBody.find(".spinbox");n.spinbox&&n.spinbox(),t.settings.source||t.displayCounts(),t.setAlternateRowShading(),t.createDraggableRows();var a=document.activeElement;if(t.activeCell.isFocused&&(!a||a&&"body"===a.tagName.toLowerCase())&&t.setActiveCell(t.activeCell.row,t.activeCell.cell),t.settings.paging&&t.settings.source&&!t.settings.allowSelectAcrossPages&&(t.preventSelection||(t._selectedRows=[]),t.syncSelectedUI()),t.settings.paging&&t.settings.source&&t.settings.allowSelectAcrossPages&&(t.syncSelectedRows(),t.syncSelectedUI()),t.settings.paging&&!t.settings.source&&null===t.settings.allowSelectAcrossPages&&(t.syncSelectedRows(),t.syncSelectedUI()),this.stretchColumnDiff<0){var o=this.bodyColGroup.find("col").eq(t.getStretchColumnIdx())[0];o&&(o.style.width="".concat(this.stretchColumnWidth,"px"))}this.element.find(".datagrid-img").off("error.datagrid").on("error.datagrid",function(l){var d=$(l.target),h=d.parent(),p=$('<svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-'.concat(e.settings.fallbackImage,'"></use></svg>'));p.tooltip(e.settings.fallbackTooltip),p.css(e.settings.fallbackSize),h.append(p),d.remove()}),setTimeout(function(){t.element.trigger("afterrender",{body:t.container.find("tbody"),header:t.container.find("thead"),pager:t.pagerAPI}),e.activateFirstCell()})},postRenderCell:function(){var e=this;if(this.settings.onPostRenderCell)for(var t=function(){var a=e.settings.columns[i];a.component&&e.tableBody.find("tr").each(function(){var o,l=$(this),d=e.settings.treeGrid?e.actualPagingRowIndex(e.actualRowIndex(l)):e.dataRowIndex(l),h=l.attr("data-lineage"),p=e.rowData(d),v=e.columnIdxById(a.id)-((null===(o=e.settings.frozenColumns)||void 0===o||null===(o=o?.left)||void 0===o?void 0:o?.length)||0),b={row:h||d,cell:v,value:p,rowData:p,col:a,api:e};e.settings.onPostRenderCell(l.find("td").eq(v).find(".datagrid-cell-wrapper .content")[0],b)})},i=0;i<this.settings.columns.length;i++)t()},activateFirstCell:function(){(!this.activeCell||!this.activeCell.node)&&(this.activeCell={node:this.cellNode(0,0).attr("tabindex","0"),isFocused:!1,cell:0,row:0})},triggerDestroyCell:function(){var e=this,t=this;if(t.tableBody&&this.settings.onPostRenderCell&&this.settings.onDestroyCell){var i=t.tableBody.find("tr");if(0===i.length)return;for(var n=function(){var l=e.settings.columns[a];l.component&&i.each(function(){var d=$(this),h=d.index(),p=t.columnIdxById(l.id),v={row:d.index(),cell:p,value:t.settings.dataset[h],col:l,api:t};t.settings.onDestroyCell(d.find("td").eq(p).find(".datagrid-cell-wrapper .content")[0],v)})},a=0;a<this.settings.columns.length;a++)n()}},cacheVirtualStats:function(){var t=this.bodyWrapperCenter[0].scrollTop,i="normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?40:"medium"===this.settings.rowHeight?30:25,n=this.element[0].offsetHeight-i,a="normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?50:"medium"===this.settings.rowHeight?40:30;"extra-small"===this.settings.rowHeight&&(i=22,a=27),this.virtualRange={rowHeight:a,top:Math.max(t-(this.settings.virtualRowBuffer-1)*a,0),bottom:t+n+(this.settings.virtualRowBuffer-1)*a,totalHeight:a*this.settings.dataset.length,bodyHeight:n}},isRowVisible:function(e){if(!this.settings.virtualized)return!(this.settings.paging&&!this.settings.source&&e&&this.pagerAPI)||(this.pagerAPI.activePage-1)*this.settings.pagesize<=e&&this.pagerAPI.activePage*this.settings.pagesize>=e;0===e&&this.cacheVirtualStats();var t=e*this.virtualRange.rowHeight;return t>=this.virtualRange.top&&t<this.virtualRange.bottom},setVirtualHeight:function(){if(this.settings.virtualized&&this.virtualRange){var e=this.virtualRange.totalHeight-this.virtualRange.bottom,t=this.virtualRange.top;this.topSpacer=this.tableBody.find(".datagrid-virtual-row-top"),this.bottomSpacer=this.tableBody.find(".datagrid-virtual-row-bottom"),t>0&&!this.topSpacer.length&&(this.topSpacer=$('<tr class="datagrid-virtual-row-top" style="height: '.concat(t,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.prepend(this.topSpacer)),t>0&&this.topSpacer.length&&this.topSpacer.css("height","".concat(t,"px")),0===t&&(this.topSpacer.length||this.virtualRange.topRow<=1)&&this.topSpacer.remove(),e>0&&!this.bottomSpacer.length&&(this.bottomSpacer=$('<tr class="datagrid-virtual-row-bottom" style="height: '.concat(e,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.append(this.bottomSpacer)),e>0&&this.bottomSpacer.length&&this.bottomSpacer.css("height","".concat(e,"px")),e<=0&&(this.bottomSpacer.length||this.virtualRange.bottomRow>=this.settings.dataset.length)&&this.bottomSpacer.remove()}},setAlternateRowShading:function(){this.settings.alternateRowShading&&this.settings.treeGrid&&$('tr[role="row"]:visible',this.tableBody).removeClass("alt-shading").filter(":odd").addClass("alt-shading")},formatValue:function(e,t,i,n,a,o,l){var d=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return l=l||this,void 0===e&&(e=this.defaultFormatter),"string"==typeof e?Yi[e](t,i,n,a,o,l,d).toString():e(t,i,n,a,o,l,d).toString()},rowHtml:function(e,t,i,n,a,o,l){var h,k,L,d=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=this,v=this.settings.summaryRow&&!n&&a,b=p.pagerAPI?p.pagerAPI.activePage:1,w={left:"",center:"",right:""},T=p.settings.treeDepth?p.settings.treeDepth[t]:0,A=0,M=!1;if(!e)return"";var q=p.settings.enableTooltips,O=!1;if(v&&(e.isSummaryRow=v),p.settings.isRowDisabled&&"function"==typeof p.settings.isRowDisabled&&p.settings.isRowDisabled(i,e)&&(O=!0),e.isRowDisabled&&(O=!0),k=T=T?T.depth:0,p.settings.treeDepth&&p.settings.treeDepth.length)if(e._isFilteredOut)M=!0;else{var G,j=p.settings.treeDepth[t];if(j&&j.depth>1&&null!==(G=j.parents)&&void 0!==G&&G?.length)for(var X=0,fe=j.parents.length;X<fe;X++){var we=p.settings.treeDepth[j.parents[X]];if(we.node&&void 0!==we.node.expanded&&!we.node.expanded){M=!0;break}}}if(this.settings.groupable&&!a){var re=this.settings.groupable;M=void 0!==re.expanded&&!re.expanded,re.expanded&&"function"==typeof re.expanded&&(M=!re.expanded(t,0,null,null,e,this),this.isFooterHidden=M)}var Ne=this.settings.frozenColumns.left.length,le=this.settings.frozenColumns.right.length,Te=this.visibleColumns().length-Ne-le;if(this.settings.groupable&&n&&!a){var ge=Yi.GroupRow(t,0,null,null,e,this);return w.left='<tr class="datagrid-rowgroup-header'.concat(M?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(Ne,'">').concat(ge.left||"<span>&nbsp;</span>","</td></tr>"),w.center='<tr class="datagrid-rowgroup-header'.concat(M?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(Te,'">').concat(ge.center||"<span>&nbsp;</span>","</td></tr>"),w.right='<tr class="datagrid-rowgroup-header'.concat(M?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(le,'">').concat(ge.right||"<span>&nbsp;</span>","</td></tr>"),w}if(this.settings.groupable&&n&&a){var ce=Yi.GroupFooterRow(t,0,null,null,e,this);return w.left='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(ce.left||"<span>&nbsp;</span>","</tr>"),w.center='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(ce.center||"<span>&nbsp;</span>","</tr>"),w.right='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(ce.right||"<span>&nbsp;</span>","</tr>"),this.isFooterHidden=!1,w}var qe=(p.settings.treeGrid||v?t:i)+1+(p.settings.source&&!p.settings.indeterminate?(b-1)*p.settings.pagesize:0);h=this.recordCount%2==0;var Oe=this.isRowSelected(e),ot=e._rowactivated,He={class:"",svg:""};e&&e.rowStatus&&("new"!==e.rowStatus.icon||p.settings.showNewRowIndicator)&&(He.show=!0,He.class=" rowstatus-row-".concat(e.rowStatus.icon),He.icon="success"===e.rowStatus.icon?"#icon-check":"#icon-exclamation",He.title=""!==e.rowStatus.tooltip?' title="'.concat(e.rowStatus.tooltip,'"'):"",He.svg='<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"'.concat(He.title,'><use href="').concat(He.icon,'"></use></svg>'));var Ae="";for(this.settings.fixedRowHeight&&"function"==typeof this.settings.fixedRowHeight&&(Ae=' style="height: '.concat(this.settings.fixedRowHeight(this.recordCount,qe,i,e),'"px" ')),this.settings.fixedRowHeight&&"number"==typeof this.settings.fixedRowHeight&&(Ae=' style="height: '.concat(this.settings.fixedRowHeight,'px" ')),this.currentPageRows&&this.currentPageRows.push({ariaRowindex:qe,actualIndexLineage:o,dataIndex:i,isFilteredOut:e._isFilteredOut}),w.center='<tr role="row" aria-rowindex="'.concat(qe,'"')+' data-index="'.concat(i,'"').concat(o?' data-lineage="'.concat(o,'"'):"").concat(p.settings.treeGrid&&e.children?' aria-expanded="'.concat(e.expanded?'true"':'false"'):"").concat(p.settings.treeGrid?' aria-level="'.concat(k,'"'):"").concat(O?' aria-disabled="true"':"").concat(Oe?' aria-selected="true"':"",' class="datagrid-row').concat(He.class).concat(M?" is-hidden":"").concat(e._isFilteredOut?" is-filtered":"").concat(ot?" is-rowactivated":"").concat(O?" is-rowdisabled":"").concat(q?" is-tooltips-enabled":"").concat(Oe?"mixed"===this.settings.selectable?" is-selected hide-selected-color":" is-selected":"").concat(p.settings.alternateRowShading&&!h?" alt-shading":"").concat(v?" datagrid-summary-row":"").concat(p.settings.treeGrid?e.children?" datagrid-tree-parent":k>1?" datagrid-tree-child":"":"",'"').concat(Ae,">"),w.left=w.center,w.right=w.center,A=0;A<p.settings.columns.length;A++){var yt,Dt,zt,_t,ti,ci,di,ut,Xe=p.settings.columns[A],Lt=this.getContainer(Xe.id),Tt="",yi=v?Xe.summaryRowFormatter||Xe.formatter||p.defaultFormatter:Xe.formatter||p.defaultFormatter,Nt=p.formatValue(yi,t,A,p.fieldValue(e,p.settings.columns[A].field),p.settings.columns[A],e,p,d);if(0===Nt.indexOf('<span class="is-readonly">')&&(Xe.readonly=!0),(Nt.indexOf("datagrid-checkbox")>-1||Nt.indexOf("btn-actions")>-1)&&(Tt+=" l-center-text"),Nt.indexOf("trigger")>-1&&(Tt+=" datagrid-trigger-cell"),-1===Nt.indexOf("trigger")&&Xe&&Xe.editor){var Ai=this.getEditorName(Xe.editor);["colorpicker","dropdown","time","lookup","date"].indexOf(Ai)>=0&&(Tt+=" datagrid-trigger-cell datagrid-no-default-formatter")}if(yi.name&&"Fileupload"===yi.name&&(Tt+=" is-fileupload"),Xe.editor&&this.settings.editable&&(Tt+=" has-editor"),Xe.expanded&&(p.treeExpansionField=Xe.expanded),Xe.align&&(Tt+=" l-".concat(Xe.align,"-text")),"ellipsis"===Xe.textOverflow&&(Tt+=" text-ellipsis"),Xe.uppercase&&(Tt+=" uppercase-text"),Tt+=Xe.readonly?" is-readonly":"",Tt+=Xe.hidden?" is-hidden":"",Xe.isEditable&&!Xe.readonly){var Jn=p.fieldValue(e,p.settings.columns[A].field);Xe.isEditable(qe-1,A,Jn,Xe,e)||(Tt+=" is-readonly")}var ri="selectionCheckbox"===Xe.id||!Xe.readonly&&void 0!==Xe.editor?"":'aria-readonly="true"';if(Tt.indexOf("is-readonly")>-1&&(ri='aria-readonly="true"'),Xe.isReadonly&&!Xe.readonly&&"selectionCheckbox"!==Xe.id){var Yn=p.fieldValue(e,p.settings.columns[A].field);Xe.isReadonly(this.recordCount,A,Yn,Xe,e)&&(Tt+=" is-cell-readonly",ri='aria-readonly="true"')}var Cn=p.fieldValue(e,p.settings.columns[A].field);Xe.cssClass&&"function"==typeof Xe.cssClass&&(Tt+=" ".concat(Xe.cssClass(this.recordCount,A,Cn,Xe,e))),Xe.cssClass&&"string"==typeof Xe.cssClass&&(Tt+=" ".concat(Xe.cssClass)),Tt+=Xe.focusable?" is-focusable":"",Tt+="Actions"===yi.name?" has-btn-actions":"";var rs=this.calculateRowspan(Cn,t,Xe);if(""!==rs){var Fi=0;if(L>0&&!Xe.hidden){var Ni,On,Oa;L-=1,Tt+=" is-spanned-hidden";var et=null===(Ni=this.settings)||void 0===Ni||null===(Ni=null==(On=Ni)?void 0:On.frozenColumns)||void 0===Ni||null==(Oa=Ni)?void 0:Oa.left.length;et>0&&A===et&&(Tt=Tt.replace(" is-spanned-hidden"," is-spanned-invisible"),(Fi=L+1)>0&&this.visibleColumns().length-A===Fi&&(Tt+=" is-spanned-last")),et>0&&A<et&&(Tt=Tt.replace(" is-spanned-hidden"," is-spanned-last"))}if(Xe.colspan&&"function"==typeof Xe.colspan&&!L){var Yt=p.fieldValue(e,p.settings.columns[A].field);if((Fi=Xe.colspan(qe-1,A,Yt,Xe,e,p))>0){var kt,en,En;L=Fi-1;var Ze=null===(kt=this.settings)||void 0===kt||null===(kt=null==(en=kt)?void 0:en.frozenColumns)||void 0===kt||null==(En=kt)?void 0:En.left.length;Ze>0&&A<Ze&&(Tt+=" is-spanned-last")}if(Fi>0){var it,at,ct;L=Fi-1;var ft=null===(it=this.settings)||void 0===it||null===(it=null==(at=it)?void 0:at.frozenColumns)||void 0===it||null==(ct=it)?void 0:ct.left.length;ft>0&&A<ft&&-1===Tt.indexOf("is-spanned-last")&&(Tt+=" is-spanned-last")}Fi>0&&-1===Tt.indexOf("is-spanned-last")&&this.visibleColumns().length-1===Fi&&(Tt+=" is-spanned-last")}0!==A&&(He.class="",He.svg=""),""!==He.class&&(Tt+=" rowstatus-cell"),p.isCellDirty(p.settings.groupable?i:t,A)&&(Tt+=" is-dirty-cell"),p.uniqueId().indexOf("inline")>0&&(Tt+=" has-inline-editor"),""!==Tt&&(Tt=Tt.replace(/^\s+|\s+$/g,"").replace(/\s+/g," "));var qt=null===(yt=this.settings.attributes)||void 0===yt||null==(Dt=yt)?void 0:Dt.filter(function(Jr){return"id"===Jr.name}),Ei='aria-describedby="'.concat(1===qt?.length?"".concat(qt[0].value,"-col-").concat(null===(zt=Xe.id)||void 0===zt||null==(_t=zt)?void 0:_t.toLowerCase()):p.uniqueId("-header-".concat(A)),'"'),Vi="";if(null!=Xe&&Xe?.ariaDescribedBy&&(Ei="aria-describedBy=".concat(Xe.ariaDescribedBy(e.id,A))),0===(null===(ti=Xe.formatter)||void 0===ti||null==(ci=ti)?void 0:ci.toString().indexOf("function Checkbox"))){var sa;sa=Xe.isChecked?Xe.isChecked(Cn):void 0!==Cn&&(!0===Cn||1===parseInt(Cn,10)),Vi=' aria-checked="'.concat(sa,'"')}0===(null===(di=Xe.formatter)||void 0===di||null==(ut=di)?void 0:ut.toString().indexOf("function SelectionCheckbox("))&&(Vi=' aria-checked="'.concat(this.isRowSelected(e),'"')),w[Lt]+='<td role="gridcell" '.concat(ri,' aria-colindex="').concat(A+1,'"')+" ".concat(Xe.disableTooltip?"disabletooltip ":"")+"".concat(Ei).concat(Vi).concat(Oe?' aria-selected="true"':"").concat(Tt?' class="'.concat(Tt,'"'):"").concat(Fi?' colspan="'.concat(Fi,'"'):"").concat(Xe.tooltip&&"string"==typeof Xe.tooltip?' title="'.concat(Xe.tooltip.replace("{{value}}",Cn),'"'):"").concat(p.settings.columnGroups?'headers = "'.concat(p.uniqueId("-header-".concat(A))," ").concat(p.getColumnGroup(A),'"'):"").concat(rs||"",">").concat(He.svg,'<div class="datagrid-cell-wrapper"\n        ').concat(Xe.whiteSpace?'style="white-space: '.concat(Xe.whiteSpace,'"'):"",">"),Xe.contentVisible&&(Xe.contentVisible(t+1,A,Cn,Xe,e)||(Nt="")),p.settings.onPostRenderCell&&Xe.component&&(w[Lt]+='<div class="content"></div>',Nt=""),w[Lt]+="".concat(Nt,"</div></td>")}}if(this.settings.spacerColumn&&(w.center+='<td class="datagrid-spacer-column"></td>'),w.left+="</tr>",w.center+="</tr>",w.right+="</tr>",p.settings.rowTemplate&&!v){var Ea=e,os=p.settings.rowTemplateHeight||107,ls="";hn&&Ea&&(ls=hn.compile("{{#dataset}}".concat(p.settings.rowTemplate,"{{/dataset}}"),{dataset:Ea})),this.hasLeftPane&&(w.left+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(Ne,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(os,'px"></div></div>\n          </td></tr>')),w.center+='<tr class="datagrid-expandable-row '.concat(Ea.expanded?" is-expanded":"",'"><td colspan="').concat(Te+(this.settings.spacerColumn?1:0),'">\n        <div class="datagrid-row-detail" ').concat(Ea.expanded?' style="height: auto"':"",'><div class="datagrid-row-detail-padding">').concat(ls,"</div></div>\n        </td></tr>"),this.hasRightPane&&(w.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(le,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(os,'px"></div></div>\n          </td></tr>'))}if(p.settings.expandableRow&&(this.hasLeftPane&&(w.left+='<tr class="datagrid-expandable-row"><td colspan="'.concat(Ne,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>')),w.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(Te,'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n        </td></tr>'),this.hasRightPane&&(w.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(le,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>'))),!e.children||l||e._isFilteredOut){if(this.settings.treeGrid&&!l&&e._isFilteredOut)if(e.children){var js=function Jr(ma){var Es=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Es+=ma.length;for(var cs=0,ds=ma.length;cs<ds;cs++)ma[cs].children&&(Es=Jr(ma[cs].children,Es));return Es}(e.children);this.recordCount+=js+(e._isFilteredOut&&1===k?1:0)}else 1===k&&this.recordCount++}else for(var Fn=0,As=e.children.length;Fn<As;Fn++){var Ys=o?"".concat(o,".").concat(i):"".concat(i);this.recordCount++;var Ui=p.rowHtml(e.children[Fn],this.recordCount,Fn,!1,!1,Ys);w.left+=Ui.left,w.center+=Ui.center,w.right+=Ui.right}return w},getEditorName:function(e){if(!e)return"";var t=e.name;return function(){}.name||(t=function(a){return(a.toString().match(/function (.+?)\(/)||[,""])[1]}(e)),t?t.toLowerCase():""},calculateTextWidth:function(e){var t=e.name||"",i=0,n=0,a=0,o="",l=!1,d=this;if(e.formatter===Yi.Colorpicker)o="";else if(e.formatter===Yi.Dropdown&&e.options&&"data"!==this.settings.columnSizing){for(var p="",v=0;v<e.options.length;v++)e.options[v].label.length>p.length&&(p=e.options[v].label);p=d.formatValue(e.formatter,0,0,p,e,null,d),o=p=Fe.stripHTML(p)}else{var b=0,w=this.settings.dataset;this.settings.groupable&&(w=this.originalDataset);for(var T=0;T<w.length;T++){var k=this.fieldValue(w[T],e.field),A=w[T];if(l=(k=d.formatValue(e.formatter,T,0,k,e,A,d)).toString().indexOf("btn-secondary")>-1,b=(k=Fe.stripHTML(k)).toString().length,this.settings.groupable&&A)for(var M=0;M<A.length;M++){var L=this.fieldValue(A[M],e.field);L=d.formatValue(e.formatter,T,0,L,e,A,d),(b=(L=Fe.stripHTML(L)).toString().length)>i&&(i=b,o=L)}b>i&&(i=b,o=k)}if(this.filterExpr&&this.filterExpr.length>0){var z=$.grep(this.filterExpr,function(re){return re.columnId===e.id});if(z&&1===z.length){var q=z[0].value;(b=q.toString().length)>i&&(i=b,o=q)}}if(""===o&&(e.formatter===Yi.Date||e.formatter===Yi.Time)){var _=new Date(9999,11,31,23,59,59,999);_=d.formatValue(e.formatter,0,0,_,e,null,d),o=_=Fe.stripHTML(_)}}var G=!!e.formatter&&e.formatter.toString().indexOf('<span class="tag')>-1,j=!!e.formatter&&e.formatter.toString().indexOf("datagrid-alert-icon")>-1,X=e.formatter===Yi.Date||e.formatter===Yi.Time||e.formatter===Yi.Lookup||e.formatter===Yi.Colorpicker||e.formatter===Yi.Dropdown;a+=2*this.getCellPadding(),j&&(a+=20),G&&(a+=10),l&&(a+=50),this.settings.editable&&e.editor===Nc.Spinbox&&(a+=46),this.settings.editable&&(e.formatter===Yi.Dropdown||e.formatter===Yi.Lookup||e.editor===Nc.Time)&&(a+=10),this.settings.editable&&e.editor===Nc.Date&&(a+=5),n=this.calculateTextRenderWidth(o)+a,e.formatter===Yi.Colorpicker&&(n=150);var he=void 0===e.sortable||e.sortable?2*this.getCellPadding()+15:2*this.getCellPadding(),we=this.calculateTextRenderWidth(t,!0)+he;return e.filterType&&this.settings.filterable&&(we<2*this.getCellPadding()&&(we=5*this.getCellPadding()+n+36),"checkbox"!==e.filterType&&(""!==o?we<n+(2*this.getCellPadding()+32)&&""!==o&&(we=n+(2*this.getCellPadding()+32)):we<100&&(we=100)),"ellipsis"===e?.textOverflow&&("small"===this.settings.rowHeight||"extra-small"===this.settings.rowHeight)&&(we+=6)),"data"===this.settings.columnSizing&&(we=50+2*this.getCellPadding()+(X?25:0)),"header"===this.settings.columnSizing&&(n=0),Math.ceil(Math.max(n,we))},calculateTextRenderWidth:function(e,t){var i,n;if(this.canvas=this.canvas||(this.canvas=document.createElement("canvas")),!this.canvas||null===(i=this.canvas)||void 0===i||!i?.getContext)return 0;var a=null===(n=this.canvas)||void 0===n?void 0:n?.getContext("2d"),o=Et.currentTheme.id.indexOf("uplift")>-1||Et.currentTheme.id.indexOf("new")>-1;return(!this.fontCached||!this.fontHeaderCached)&&(this.fontCached=Et.currentTheme.id&&o?"400 16px arial":"400 14px arial",this.fontHeaderCached=Et.currentTheme.id&&o?"600 14px arial":"700 12px arial","extra-small"===this.settings.rowHeight&&(this.fontCached=Et.currentTheme.id&&o?"400 14px arial":"400 12px arial",this.fontHeaderCached=Et.currentTheme.id&&o?"600 14px arial":"700 12px arial")),null!=a&&a?.font?(a.font=this.fontCached,t&&(a.font=this.fontHeaderCached),a.measureText(e).width):0},setScrollClass:function(){if(this.bodyWrapperCenter[0]&&this.bodyWrapperCenter[0].offsetHeight){var e=parseInt(this.bodyWrapperCenter[0].offsetHeight,10),t=this.headerRow?this.headerRow[0].offsetHeight:0,i=parseInt(this.tableBody[0].offsetHeight,10);if(this.element.removeClass("has-vertical-scroll has-visible-last-row has-horizontal-scroll"),i<e-t&&this.element.addClass("has-visible-last-row"),this.hasLeftPane||this.hasRightPane){var n=parseInt(this.bodyWrapperCenter[0].scrollHeight,10)>e+2,a=parseInt(this.bodyWrapperCenter[0].offsetWidth,10),o=parseInt(this.bodyWrapperCenter[0].scrollWidth,10)>a;n&&this.element.addClass("has-vertical-scroll"),o&&this.element.addClass("has-horizontal-scroll")}}},clearCache:function(){this.totalWidths.left=0,this.totalWidths.center=0,this.totalWidths.right=0,this.elemWidth=0,this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.fontCached=null,this.fontHeaderCached=null,this.fixColumnIds()},fixColumnIds:function(){for(var e=0;e<this.settings.columns.length;e++){var i=this.columnById(this.settings.columns[e].id);if(i.length>1)for(var n=1;n<i.length;n++)i[n].id="".concat(i[n].id,"-").concat(n)}},getStretchColumnIdx:function(){var e=this,t=e.stretchColumnIdx;return-1===t&&"last"!==e.settings.stretchColumn&&e.headerNodes().each(function(i){$(this).attr("data-column-id")===e.settings.stretchColumn&&(t=i)}),t},columnWidth:function(e,t){return this.elemWidth||(this.elemWidth=this.element.parents(".modal").length>0&&!1===this.element.parents(".modal").hasClass("is-visible")?void 0:this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),this.widthSpecified=!1,this.widthPixel=!1),this.calculateColumnWidth(e,t)},calculateColumnWidth:function(e,t){var i,n,a=this.visibleColumns(!0),o=t===this.visibleColumns().length-1,l=this.getContainer(e.id);e.width&&(this.widthSpecified=!0,this.widthPercent=!1),!this.widthPixel&&e.width&&(this.widthPixel="string"!=typeof e.width);var d=e.width;"string"==typeof e.width&&-1===e.width.indexOf("px")&&(this.widthPercent=!0,n=e.width.replace("%",""));var h=this.calculateTextWidth(e);if((!this.widthSpecified||!d)&&(d=Math.max(h,d||0)),(!this.widthSpecified||void 0===e.width)&&this.settings.sizeColumnsEqually&&-1===["selectionCheckbox","expander","drilldown","rowStatus","favorite"].indexOf(e.id)){var p=Math.round(this.elemWidth/a.length);d=p-(o?2:0),p<h&&(d=h)}if(("selectionCheckbox"===e.id||"selectionRadio"===e.id||"favorite"===e.id)&&(e.width=d=43),"favorite"===e.id&&(e.width=d=62),!e.width&&(null===(i=e.formatter)||void 0===i||null===(i=i?.toString())||void 0===i?void 0:i?.indexOf("ProcessIndicator"))>-1&&(e.width=d=155),"expander"===e.id&&(e.width=d=55),"rowStatus"===e.id&&(e.width=d=62),"rowReorder"===e.id&&(e.width=d=this.settings.groupable?105:62),"drilldown"===e.id&&(e.width=d=62),e.minWidth&&d<e.minWidth&&(d=e.minWidth),e.minWidth&&d>e.maxWidth&&(d=e.maxWidth),this.totalWidths[l]+=e.hidden?0:d,o){var v=this.elemWidth-this.totalWidths[l];"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&(this.stretchColumnDiff=v),("last"===this.settings.stretchColumn||this.settings.stretchColumn===e.id)&&(this.stretchColumnIdx=t,v<d?this.stretchColumnWidth=d:this.stretchColumnDiff=d=v),this.hasLeftPane&&this.tableLeft.css("width",this.totalWidths.left),this.hasRightPane&&this.tableRight.css("width",this.totalWidths.right)}return"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&this.settings.stretchColumn===e.id?(this.stretchColumnIdx=t,this.stretchColumnWidth=d,' style="width: 99%"'):this.widthPercent||void 0!==d?' style="width: '.concat(this.widthPercent?"".concat(n,"%"):"".concat(d,"px"),'"'):""},calculateRowspan:function(e,t,i){var n=0,a=null;if(!i.rowspan)return null;for(var o=0;o<this.settings.dataset.length;o++)e===this.settings.dataset[o][i.field]&&(n++,null===a&&(a=o));return t===a?' rowspan ="'.concat(n,'"'):""},calculateTotals:function(){return this.settings.totals=up.aggregate(this.settings.dataset,this.settings.columns),this.settings.totals},setUnit:function(e){return e+(/(px|%)/i.test("".concat(e))?"":"px")},setupTooltips:function(e,t){var i=this;if(e||t||this.settings.enableTooltips){var l,n=this,o=n.element.find(".datagrid-header-icon").length>0,d={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus',headerIcon:".datagrid-header th .datagrid-header-icon"};this.settings.filterable?(d.headerColumn="".concat(d.th," .datagrid-column-wrapper"),d.headerFilter="".concat(d.th," .datagrid-filter-wrapper .btn-menu"),d.header="".concat(d.headerColumn,", ").concat(d.headerFilter)):d.header=o?d.headerIcon:d.th,d.iconAlert="".concat(d.td," .icon-alert"),d.iconSuccess="".concat(d.td," .icon-success"),d.iconError="".concat(d.td," .icon-error"),d.iconInfo="".concat(d.td," .icon-info"),d.icons="".concat(d.iconAlert,", ").concat(d.iconSuccess,", ").concat(d.iconError,", ").concat(d.iconInfo),d.str=e&&this.settings.enableTooltips?"".concat(d.header,", ").concat(d.td,", ").concat(d.icons,", ").concat(d.rowstatus):e?"".concat(d.header,", ").concat(d.rowstatus):"".concat(d.header,", ").concat(d.td,", ").concat(d.icons);var h=function(b,w){w=typeof w>"u"?400:w,l=setTimeout(function(){var T=de.hasClass(b,"datagrid-column-wrapper"),k=de.hasClass(b.parentNode,"datagrid-filter-wrapper"),A=de.hasClass(b,"datagrid-header-icon"),M=!!k&&b.parentNode.querySelectorAll(".popupmenu.is-open").length>0,z=n.getOuterWidth(T||A?b.parentNode:b),q=$(b).data("gridtooltip")||n.cacheTooltip(b);q&&(q.forced||q.textwidth>z-35)&&!M&&n.showTooltip(q)},w)},p=function(b,w){w=typeof w>"u"?400:w,clearTimeout(l),setTimeout(function(){$(".grid-tooltip:hover").length>0||(n.hideTooltip(),de.hasClass(b.parentNode,"datagrid-filter-wrapper")&&n.removeTooltipData(b))},w)};this.element.off("mouseenter.gridtooltip focus.gridtooltip",d.str).on("mouseenter.gridtooltip focus.gridtooltip",d.str,function(){h(this)}).off("mouseleave.gridtooltip click.gridtooltip blur.gridtooltip",d.str).on("mouseleave.gridtooltip click.gridtooltip blur.gridtooltip",d.str,function(){p(this)}).off("longpress.gridtooltip",d.str).on("longpress.gridtooltip",d.str,function(){h(this,0)}).off("keydown.gridtooltip",d.str).on("keydown.gridtooltip",d.str,function(v){var b=v.which||v.keyCode||v.charCode||0,w=!1;return v.shiftKey&&112===b?h(this,0):27===b&&(w=n.isGridtooltip(),p(this,0)),w&&v.preventDefault(),!w}).off("mousemove.gridtooltip").on("mousemove.gridtooltip",function(v){$(v.target).parents(".datagrid").length>0||!$(".grid-tooltip").hasClass("is-hidden")&&!$(".grid-tooltip:hover").length>0&&p(i)}),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").on("mouseenter.tableerrortooltip",".icon",function(){h(this)}).off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").on("mouseleave.tableerrortooltip click.tableerrortooltip",".icon",function(){p(this)}).off("longpress.tableerrortooltip",".icon").on("longpress.tableerrortooltip",".icon",function(){h(this,0)}),this.element.find(".datagrid-header-icon").length>0&&this.element.find(".datagrid-header-icon").off("mouseenter.headericon").on("mouseenter.headericon",function(){h(this)}).off("mouseleave.headericon").on("mouseleave.headericon",function(){p(this)})}},getOuterWidth:function(e){var t=getComputedStyle(e);return e.offsetWidth+(parseInt(t.marginLeft,10)+parseInt(t.marginRight,10))},closest:function(e,t){return e&&(t(e)?e:this.closest(e.parentNode,t))},headerNodes:function(){return this.headerRow?this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th"):$()},colGroupNodes:function(){return this.headerRow?this.element.find("colgroup col"):$()},updateRow:function(e,t){var i=this.settings,n=t;n||(n=i.treeGrid?i.treeDepth[e].node:this.getActiveDataset()[e]);for(var a=0;a<this.settings.columns.length;a++){var o=this.settings.columns[a];o.hidden||o.component&&this.settings.onPostRenderCell||this.updateCellNode(e,a,this.fieldValue(n,o.field),!0)}!i.treeGrid&&void 0!==i.dataset[e]&&(this.settings.dataset[e]=H.extend(!0,this.settings.dataset[e],t)),this.settings.rowReorder&&this.tableBody.data("arrange")&&this.tableBody.data("arrange").updated(),this.postRenderCell()},updateColumns:function(e,t){void 0===t?t=this.settings.columnGroups:(null===t||0===t.length)&&(this.settings.groupable=null);var i=[];this.settings.filterable&&this.filterRowRendered&&(i=this.filterConditions()),this.settings.columns=e,this.settings.columnGroups=t,this.rerender(),this.element.trigger("columnchange",[{type:"updatecolumns",columns:this.settings.columns}]),this.saveUserSettings(),this.settings.filterable&&this.filterRowRendered&&this.setFilterConditions(i)},saveUserSettings:function(){this.element.trigger("settingschanged",[{rowHeight:this.settings.rowHeight,columns:this.settings.columns,sortOrder:this.sortColumn,pagesize:this.settings.pagesize,showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.pagerAPI?this.pagerAPI.activePage:1,filter:this.filterConditions()}]);var e=this.settings.saveUserSettings;$.isEmptyObject(e)||!this.canUseLocalStorage()||(e.columns&&(localStorage[this.uniqueId("usersettings-columns")]=this.copyThenStringify(this.settings.columns)),e.rowHeight&&(localStorage[this.uniqueId("usersettings-row-height")]=this.settings.rowHeight),e.sortOrder&&(localStorage[this.uniqueId("usersettings-sort-order")]=JSON.stringify(this.sortColumn)),e.pagesize&&(localStorage[this.uniqueId("usersettings-pagesize")]=this.settings.pagesize),e.showPageSizeSelector&&(localStorage[this.uniqueId("usersettings-show-pagesize-selector")]=this.settings.showPageSizeSelector),e.activePage&&this.pagerAPI&&(localStorage[this.uniqueId("usersettings-active-page")]=this.pagerAPI.activePage),e.filter&&(localStorage[this.uniqueId("usersettings-filter")]=JSON.stringify(this.filterConditions())))},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch{return!1}return!1},setOriginalColumns:function(){this.originalColumns=H.deepCopy(this.settings.columns)},columnsFromString:function(e,t){if(!e)return[];var n=JSON.parse(e);if(!n)return[];for(var a=0;a<n.length;a++){var o=void 0,l=this.columnById(n[a].id),d=l.width;l&&(o=n[a].hidden,$.extend(n[a],l[0]),void 0!==o?n[a].hidden=o:delete n[a].hidden,t&&(n[a].width=d))}return n},restoreColumns:function(e){if(this.settings.saveColumns&&this.canUseLocalStorage()){if(e)return void this.updateColumns(e);var t=localStorage[this.uniqueId("columns")];!e&&t&&(this.originalColumns=H.deepCopy(this.settings.columns),this.settings.columns=this.columnsFromString(t))}},restoreUserSettings:function(e){var t=this.settings.saveUserSettings;if(e||!$.isEmptyObject(t)&&this.canUseLocalStorage()){if(e){if(e.columns&&this.updateColumns(e.columns),e.rowHeight&&this.rowHeight(e.rowHeight),e.sortOrder&&this.setSortColumn(e.sortOrder.sortId,e.sortOrder.sortAsc),e.pagesize&&(this.settings.pagesize=parseInt(e.pagesize,10),this.pagerAPI.settings.pagesize=parseInt(e.pagesize,10),e.activePage||this.pagerAPI.setActivePage(1,!0)),e.showPageSizeSelector&&(this.settings.showPageSizeSelector=e.showPageSizeSelector,this.pagerAPI.showPageSizeSelector(e.showPageSizeSelector)),e.filter&&this.applyFilter(e.filter,"restore"),e.activePage){var i=parseInt(e.activePage,10);this.pagerAPI.setActivePage(i,!0),this.restoreActivePage=!0}return}if(t.columns){var n=localStorage[this.uniqueId("usersettings-columns")];n&&(this.settings.columns=this.columnsFromString(n))}if(t.rowHeight){var a=localStorage[this.uniqueId("usersettings-row-height")];a&&(this.settings.rowHeight=a)}if(t.sortOrder){var o=localStorage[this.uniqueId("usersettings-sort-order")];o&&(this.sortColumn=JSON.parse(o),this.restoreSortOrder=!0)}if(t.pagesize){var l=localStorage[this.uniqueId("usersettings-pagesize")];l&&(this.settings.pagesize=parseInt(l,10))}if(t.showPageSizeSelector){var d=localStorage[this.uniqueId("usersettings-show-pagesize-selector")];(d="true"===d.toString().toLowerCase())&&(this.settings.showPageSizeSelector=d)}if(t.activePage){var h=localStorage[this.uniqueId("usersettings-active-page")];h&&(this.savedActivePage=parseInt(h,10),this.restoreActivePage=!0)}if(t.filter){var p=localStorage[this.uniqueId("usersettings-filter")];p&&(this.savedFilter=JSON.parse(p),this.restoreFilter=!0)}}},copyThenStringify:function(e){if(!e)return JSON.stringify(e);var t=e.map(function(i){var n=H.extend({},i);return n.editorOptions&&delete n.editorOptions,n});return JSON.stringify(t)},resetColumns:function(){if(this.canUseLocalStorage()&&localStorage.removeItem(this.uniqueId("columns")),this.originalColumns){var e=H.deepCopy(this.originalColumns);this.updateColumns(e,this.settings.columnGroups&&this.originalColGroups?this.originalColGroups:null)}this.clearFilter()},hideColumn:function(e){var t,i,n,a,o,l=this.columnIdxById(e);if(!(-1===l||null!==(t=this.settings.columns[l])&&void 0!==t&&t?.hidden)){this.settings.columns[l].hidden=!0;var d=this.headerNodes().eq(l);this.headerNodeCheckbox=d.find(".datagrid-checkbox").length>0?d:void 0,null!==(i=this.settings)&&void 0!==i&&null!==(i=i?.frozenColumns)&&void 0!==i&&i?.left.length||this.headerNodes().eq(l).addClass("is-hidden"),0===l&&"selectionCheckbox"===e&&null!==(n=this.settings)&&void 0!==n&&null!==(n=n?.frozenColumns)&&void 0!==n&&n?.left.length?this.headerNodes().eq(l).off().remove():this.headerNodes().eq(l).addClass("is-hidden"),this.colGroupNodes().eq(l).addClass("is-hidden");var h=(null===(a=this.settings)||void 0===a||null===(a=a?.frozenColumns)||void 0===a?void 0:a?.left.length)||0;if(this.tableBody.find("> tr > td:nth-child(".concat(l-h+1,")")).addClass("is-hidden"),this.bodyColGroup.find("col").eq(l-h).addClass("is-hidden"),null!==(o=this.tableBodyLeft)&&void 0!==o&&o?.find("> tr > td .datagrid-checkbox-wrapper")&&(this.bodyNodeCheckboxes=this.tableBodyLeft.find("> tr > td:nth-child(".concat(l+1,")")),this.tableBodyLeft.find("> tr > td:nth-child(".concat(l+1,")")).remove()),this.updateColumnGroup(l,!1),this.hasColSpans){var p=this.element.find(".datagrid-header th").eq(l).attr("colspan");if(p&&p>0){p-=1;for(var v=0;v<p;v++)this.tableBody.find("> tr > td:nth-child(".concat((l+=p)+1,")")).addClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"hidecolumn",index:l,columns:this.settings.columns}]),this.saveUserSettings()}},syncExpandableRowColspan:function(){var e=this.visibleColumns().length;this.tableBody.find(".datagrid-expandable-row > td").attr("colspan",e)},showColumn:function(e){var t,i=this.columnIdxById(e);if(-1!==i&&this.settings.columns[i].hidden){this.settings.columns[i].hidden=!1,this.headerNodes().eq(i).removeClass("is-hidden"),this.colGroupNodes().eq(i).removeClass("is-hidden");var a,o,n=(null===(t=this.settings)||void 0===t||null===(t=t?.frozenColumns)||void 0===t?void 0:t?.left.length)||0;if(this.tableBody.find("> tr > td:nth-child(".concat(i-n+1,")")).removeClass("is-hidden"),this.bodyColGroup.find("col").eq(i-n).removeClass("is-hidden"),n)this.tableBodyLeft.find("> tr > td:nth-child(".concat(i+1,")")).removeClass("is-hidden"),this.headerNodeCheckbox&&!this.headerRowLeft.find("> tr th:nth-child(".concat(i+1,") .datagrid-checkbox-wrapper")).length&&(null===(a=this.headerRowLeft)||void 0===a||a?.find("> tr").prepend(this.headerNodeCheckbox)),this.bodyNodeCheckboxes&&!this.tableBodyLeft.find("> tr td:nth-child(".concat(i+1,") .datagrid-checkbox-wrapper")).length&&(null===(o=this.tableBodyLeft)||void 0===o||o?.find("> tr").prepend(this.bodyNodeCheckboxes[i]));if(this.updateColumnGroup(i,!0),this.hasColSpans){var l=this.element.find(".datagrid-header th").eq(i).attr("colspan");if(l&&l>0){l-=1;for(var d=0;d<l;d++)this.tableBody.find("> tr > td:nth-child(".concat((i+=l)+1,")")).removeClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"showcolumn",index:i,columns:this.settings.columns}]),this.saveUserSettings()}},exportToCsv:function(e,t,i){Gn.exportToCsv(e,t,i,arguments.length>3&&void 0!==arguments[3]&&arguments[3],this)},exportToExcel:function(e,t,i){Gn.exportToExcel(e,t,i,arguments.length>3&&void 0!==arguments[3]&&arguments[3],this)},copyToDataSet:function(e,t,i,n){Gn.copyToDataSet(e,t,i,n,this)},personalizeColumns:function(){var e=this,t=this,i='<div class="listview-search alternate-bg"><label class="audible" for="gridfilter">Search</label><input class="searchfield" placeholder="'.concat(B.translate("SearchColumnName"),'" name="searchfield" id="gridfilter"></div>');i+='<div class="listview alternate-bg personalize-col" id="search-listview"><ul></ul></div>';var n=t.settings.columns,a='\n    <ul class="arrange list" data-arrange-handle=".handle">\n      {{#dataset}}\n        {{#name}}\n          <li {{^hideable}}data-arrange-exclude="true"{{/hideable}}>\n            <div class="switch field">\n              <span class="handle"><svg class="icon icon-handle child" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-drag"></use></svg></span>\n              <input id="{{id}}-switch" class="switch" type="checkbox" data-column-id="{{id}}" {{^hidden}}checked{{/hidden}} {{^hideable}}disabled{{/hideable}} />\n              <span for="{{id}}-switch" class="label-text">{{name}}</span>\n            </div>\n          </li>\n        {{/name}}\n      {{/dataset}}\n    </ul>';$("body").modal({title:B.translate("PersonalizeColumns"),content:i,cssClass:"full-width datagrid-columns-dialog",buttons:[{text:B.translate("Close"),click:function(l,d){d.close(),$("body").off("beforeopen.datagrid")}}]}).off("beforeopen.datagrid").on("beforeopen.datagrid",function(o,l){if(l){if(t.settings.columnGroups){var d=H.deepCopy(t.settings.columnGroups),h=0;d.forEach(function(T){var k=t.settings.columns.slice(h,h+T.colspan);T.hidden=k.some(function(A){return!0===A.hidden}),T.hideable=k.some(function(A){return!0===A.hideable}),T.columns=k,T.groupId=T.id,T.groupName=T.name,delete T.id,delete T.name,h+=T.colspan}),n=d,a='\n            <ul class="arrange list" data-arrange-handle=".handle">\n            {{#dataset}}\n              <li data-group-id="{{groupId}}" {{^hideable}}class="is-disabled"{{/hideable}}>\n                <div class="switch field">\n                  <span class="handle"><svg class="icon icon-handle" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-drag"></use></svg></span>\n                  <input id="{{groupId}}-grp-switch" class="switch" type="checkbox" {{^hidden}}checked{{/hidden}} {{^hideable}}disabled{{/hideable}}/>\n                  <span for="{{groupId}}-grp-switch" class="label-text">{{groupName}}</span>\n                </div>\n              </li>\n              {{#columns}}\n                {{#name}}\n                <li class="child" data-group-id="{{groupId}}" {{^hideable}}data-arrange-exclude="true"{{/hideable}}>\n                  <div class="switch field">\n                    <span class="handle"><svg class="icon icon-handle child" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-drag"></use></svg></span>\n                    <input id="{{id}}-switch" class="switch" type="checkbox" data-column-id="{{id}}" {{^hidden}}checked{{/hidden}} {{^hideable}}disabled{{/hideable}}/>\n                    <span for="{{id}}-switch" class="label-text">{{name}}</span>\n                  </div>\n                </li>\n                {{/name}}\n              {{/columns}}\n            {{/dataset}}\n            </ul>'}t.isColumnsChanged=!1,l.element.find(".searchfield").searchfield({clearable:!0,tabbable:!1});var p={source:n,template:a,searchable:!0,selectOnFocus:!1,listFilterSettings:{filterMode:"contains",searchableTextCallback:function(k){return k.name||k.id}}};t.settings.columnGroups&&(p.hasChildren=!0,p.children="columns");var v=l.element.find(".listview").listview(p).data("listview"),b=function(k){var A=k.find("input.switch"),M=A.attr("data-column-id"),L=A.prop("checked");if(k.removeClass("is-selected hide-selected-color"),!A.is(":disabled")){if(t.isColumnsChanged=!0,t.settings.columnGroups)if(k.hasClass("child"))L?(t.hideColumn(M),A.prop("checked",!1)):(t.showColumn(M),A.prop("checked",!0));else{var z=k.attr("data-group-id"),q=k.siblings('.child[data-group-id="'.concat(z,'"]')),O=function(G,j){var X=G.find("input.switch"),fe=X.attr("data-column-id");X.is(":disabled")||X.prop("checked")!==j&&(j?t.showColumn(fe):t.hideColumn(fe),X.prop("checked",j))};L?(q.each(function(_,G){O($(G),!1)}),A.prop("checked",!1)):(q.each(function(_,G){O($(G),!0)}),A.prop("checked",!0))}else L?(t.hideColumn(M),A.prop("checked",!1)):(t.showColumn(M),A.prop("checked",!0));t.settings.groupable&&t.rerender()}},w=function(){v.element.find(".switch span.label-text, .switch input").on("click",function(A){var M=$(A.target).parent().parent();b(M)}),t.settings.columnReorder&&v.element.find("ul").arrange({handle:".icon-handle.child",isVisualItems:!0}).data("arrange").element.on("arrangeupdate",function(A,M){var O,_,G,L=M.start.find("input.switch"),z=e.columnIdxById(L.attr("data-column-id")),q=M.start.next();if(0===q.length){if(q=M.start.prev(),t.settings.columnGroups)for(G=M.start.attr("data-group-id"),_=q.attr("data-group-id"),M.start.attr("data-group-id",_);!q.hasClass("child");)q=q.prev();var j=q.find("input.switch");O=e.columnIdxById(j.attr("data-column-id"))}else{if(t.settings.columnGroups)if(G=M.start.attr("data-group-id"),q.hasClass("child"))_=q.attr("data-group-id"),M.start.attr("data-group-id",_);else for(_=M.start.prev().attr("data-group-id"),M.start.attr("data-group-id",_);!q.hasClass("child");)q=q.next();var X=q.find("input.switch");z<(O=e.columnIdxById(X.attr("data-column-id")))&&O--}if(t.settings.columnGroups){var fe=t.settings.columnGroups.findIndex(function(we){return we.id===G}),he=t.settings.columnGroups.findIndex(function(we){return we.id===_});t.settings.columnGroups[fe].colspan--,t.settings.columnGroups[he].colspan++}t.updateGroupHeadersAfterColumnReorder(z,O),t.arrayIndexMove(t.settings.columns,z,O),t.updateColumns(t.settings.columns),t.element.trigger("columnreorder",[{indexFrom:z,indexTo:O,columns:t.settings.columns}])})};w(),v.element.on("rendered",function(){w()}).on("selected",function(T,k){k.isKey&&b(k.elem)}),l.element.on("close.datagrid",function(){t.isColumnsChanged=!1}),l.element.on("keydown.datagrid",function(T){27===T.keyCode&&(l.close(),$("body").off("beforeopen.datagrid"))})}})},setColumnWidth:function(e,t,i){var a=parseFloat(t),o=this.columnById(e)[0],l=-1;if(a&&e&&("string"==typeof e&&this.headerNodes().each(function(h){$(this).attr("data-column-id")===e&&(l=h)}),"number"!=typeof t&&(t=a/100*this.element.width()),!(Math.abs(t-o.width)<2))){if("number"==typeof o.colspan&&(t/=o.colspan),o&&(o.width=t),i){var d=this.bodyColGroup.find("col").eq(l)[0];d&&(d.style.width="".concat(t,"px"))}this.element.trigger("columnchange",[{type:"resizecolumn",index:l,columns:this.settings.columns}]),this.saveUserSettings()}},isEllipsisActiveHeader:function(e){return(void 0===(e=e||{}).sortable||e.sortable)&&"ellipsis"===e.textOverflow},activeEllipsisHeaderAll:function(){for(var e=0,t=this.settings.columns.length;e<t;e++){var i=this.settings.columns[e].id,n=this.columnById(i)[0];if(this.isEllipsisActiveHeader(n)){var a=this.element[0].querySelector('.datagrid-header th[data-column-id="'.concat(i,'"]'));this.activeEllipsisHeader(a)}}},activeEllipsisHeader:function(e){if(e){var t=e.querySelector(".datagrid-column-wrapper .datagrid-header-text");e.classList[e.scrollWidth<t.scrollWidth+65?"add":"remove"]("is-ellipsis-active")}},createResizeHandle:function(){var e=this,t=this;if(!this.resizeHandle){this.resizeHandle=$('<div class="resize-handle" aria-hidden="true"></div>'),this.settings.columnGroups&&(this.resizeHandle[0].style.height="80px"),this.settings.filterable&&(this.resizeHandle[0].style.height="62px"),this.element.find("table.datagrid").before(this.resizeHandle);var i,n,a,o,l,d=!1;this.resizeHandle.drag({axis:"x"}).on("dragstart.datagrid",function(){t.currentHeader&&(t.dragging=!0,d=!1,n=t.currentHeader.attr("data-column-id"),i=t.columnById(n)[0],t.isEllipsisActiveHeader(i)&&t.currentHeader[0].classList.add("is-ellipsis-active"))}).on("drag.datagrid",function(h,p){if(t.currentHeader&&i){var v=i.minWidth||12,b=i.maxWidth||2e3,w=t.currentHeader,T=w.index(),k="left"===t.getContainer(w.attr("data-column-id"));e.dragging=!0;var A=p.left+5,M=e.bodyColGroup.find("col").eq(T)[0];k&&(M=e.bodyColGroupLeft.find("col").eq(T)[0]);var L=parseInt(t.currentHeader.width(),10),z=parseInt(M.style.width||L,10);M.style.width.indexOf("%")>-1&&(z=L);var q=parseFloat(t.currentHeader.offsetParent().offset().left),O=parseFloat(t.currentHeader.offset().left),_=0===T?0:O-q-2;t.hasLeftPane&&!k&&0===T&&(_=O-q-2);var G=L-(A-_),j=z-G;if((a=a&&Math.abs(j-a)<=3?a:j)<v||a>b)return void t.resizeHandle.css("cursor","inherit");if(a!==z&&(M.style.width="".concat(a,"px"),(T===e.settings.frozenColumns.left.length-1||T<=e.settings.frozenColumns.left.length-1&&G>0)&&"left"===e.getContainer(n)&&(e.totalWidths.left+=G<0?Math.abs(G):-G,e.tableLeft.css("width",e.totalWidths.left)),Ql.pressedKeys.get("Shift")&&(d=!0),"fit"===e.settings.resizeMode&&!d||"flex"===e.settings.resizeMode&&d)){var fe=B.isRTL()?T+1:T-1,he=t.settings.columns[fe];if(!he)return;var we=he.minWidth||12,re=he.maxWidth||1e3,Ne=B.isRTL()?de.getPreviousSibling(t.currentHeader,":not(.is-hidden)"):de.getNextSibling(t.currentHeader,":not(.is-hidden)");l=Ne.getAttribute("data-column-id");var le=B.isRTL()?de.getPreviousSibling(M,":not(.is-hidden)"):de.getNextSibling(M,":not(.is-hidden)"),Te=parseInt(Ne.offsetWidth,10),ge=parseInt(le.style.width||Te,10);if(le.style.width.indexOf("%")>-1&&(ge=Te),(o=ge+G)<we||o>re)return void t.resizeHandle.css("cursor","inherit");if(o===ge||!le)return;le.style.width="".concat(o,"px")}}}).on("dragend.datagrid",function(){e.dragging=!1,t.isEllipsisActiveHeader(i)&&t.activeEllipsisHeader(t.currentHeader[0]),t.setColumnWidth(n,a),l&&("fit"===e.settings.resizeMode&&!d||"flex"===e.settings.resizeMode&&d)&&t.setColumnWidth(l,o)})}},displayCounts:function(e){var t,p,v,i=this,n=i.tableBody.find("tr:visible").length,a=0,o="",l=[],d=i.settings.paging&&!i.settings.source,h=function(A){return B.formatNumber(A,{style:"integer"})};if((d||!e)&&(this.recordCount=i.settings.dataset.length,n=i.settings.dataset.length),(this.settings.treeGrid&&d||!e)&&(this.filteredCount=i.settings.dataset.filter(function(k){return k._isFilteredOut}).length,n=i.settings.dataset.length,this.recordCount=i.settings.dataset.filter(function(k){return!k._isFilteredOut}).length),i.settings.groupable&&(a=n,n=i.originalDataset.length,o=(o="({0} ".concat(B.translate(1===a?"Group":"Groups"),")")).replace("{0}",h(a))),i.contextualToolbar&&i.contextualToolbar.length&&(i._selectedRows.forEach(function(k){l.push(k.idx);var A=l.filter(function(M,L){return l.indexOf(M)===L});i.contextualToolbar.find(".selection-count").text("".concat(A.length," ").concat(B.translate("Selected")))}),i.settings.allowSelectAcrossPages&&i.contextualToolbar.find(".selection-count").text("".concat(i._selectedRows.length," ").concat(B.translate("Selected")))),e&&-1!==e&&(n=e),void 0===e&&this.settings.source&&(n=i.settings.dataset.length),void 0===e&&this.settings.source&&null!==(t=this.pagerAPI)&&void 0!==t&&null!==(t=t?.state)&&void 0!==t&&t?.total&&(n=null===(p=this.pagerAPI)||void 0===p||null===(p=p?.state)||void 0===p?void 0:p?.total),i.settings.showFilterTotal&&i.filteredCount>0)v=(v=(v="(".concat(B.translate(1===n?"ResultOf":"ResultsOf"),")")).replace("{0}",h(n-i.filteredCount))).replace("{1}",h(n));else{var b=B.translate(1===n?"Result":"Results");v=(v=-1===b.indexOf("{0}")?"({0} ".concat(b,")"):b).replace("{0}",h(n))}if(i.settings.resultsText&&(v="function"==typeof i.settings.resultsText?i.grandTotal?i.settings.resultsText(i,i.grandTotal,n===i.grandTotal?0:n):i.settings.resultsText(i,n,0===i.filteredCount?0:n-i.filteredCount):i.settings.resultsText),i.toolbar){de.html(i.toolbar.find(".datagrid-result-count"),v,"<span>"),de.html(i.toolbar.find(".datagrid-group-count"),o,"<span>"),i.toolbar[0].setAttribute("aria-label",i.toolbar.find(".title").text()),i.toolbar.find(".datagrid-row-count").text(n),H.addAttributes(i.toolbar.find(".title"),this,this.settings.attributes,"title"),H.addAttributes(i.toolbar.find(".btn-actions"),this,this.settings.attributes,"actions");var T=i.toolbar.find("#gridfilter");H.addAttributes(T,this,this.settings.attributes,"search"),T.prev("label").attr("for",T.attr("id"))}de.html(i.element.closest(".modal").find(".datagrid-result-count"),v,"<span>"),this.lastCount=n,this.checkEmptyMessage()},setEmptyMessage:function(e){this.element["small"===e?.height?"addClass":"removeClass"]("empty-message-height-small"),this.emptyMessage?(this.emptyMessage.settings=e,this.emptyMessage.updated()):(this.emptyMessageContainer=$('<div class="empty-message-container"><div></div></div>'),this.element.append(this.emptyMessageContainer).addClass("has-empty-message"),this.emptyMessage=this.emptyMessageContainer.find("div").emptymessage(e).data("emptymessage"),this.checkEmptyMessage())},checkEmptyMessage:function(){this.emptyMessage&&this.emptyMessageContainer&&(0===this.recordCount?(this.emptyMessageContainer.show(),this.element.addClass("is-empty")):(this.emptyMessageContainer.hide(),this.element.removeClass("is-empty")))},triggerRowEvent:function(e,t,i){var n=this,a=$(t.target),o=a.closest("tr"),l=a.closest("td"),d=l.index(),h=this.settings.treeGrid?this.actualRowIndex(o):this.dataRowIndex(o),p=!0;(a.is("a")||a.closest("a").length)&&(i=!1),i&&(t.stopPropagation(),t.preventDefault());var v=n.settings.dataset[h];return this.settings.groupable&&(o.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")?p=!1:(h=n.actualPagingRowIndex(n.actualRowIndex(o)),n.groupArray[h]&&(v=n.settings.dataset[n.groupArray[h].group])&&v.values&&(v=v.values[n.groupArray[h].node]))),p&&n.element.trigger(e,[{row:h,rowElem:o,cell:d,cellElem:l,item:v,originalEvent:t}]),!1},verticalScrollToEnd:function(e){var t=e.currentTarget,n=Math.round((t.scrollTop+t.clientHeight)/t.scrollHeight*100),a=t.scrollHeight-t.scrollTop-t.clientHeight<1&&100===n;this.element.trigger("scroll",{percent:n,percentScrolled:100}),this.isVerticalScrollToEnd=!1!==a},handleScrollY:function(e){var i=e.currentTarget.scrollTop;i!==this.scrollTop&&this.bodyWrapperCenter&&(this.bodyWrapperLeft||this.bodyWrapperRight)&&(this.scrollTop=i,this.bodyWrapperLeft&&(this.bodyWrapperLeft[0].scrollTop=this.scrollTop),this.bodyWrapperRight&&(this.bodyWrapperRight[0].scrollTop=this.scrollTop),this.bodyWrapperCenter[0].scrollTop=this.scrollTop)},rerender:function(){this.clearCache(),this.renderRows(),this.renderHeader()},handleEvents:function(){var e=this,t=this;if($("body").on("open.modal.datagrid",function(o){var l=$(o.target);l.find(e.table).length>0&&e.table.width()>l.width()&&e.widthSpecified&&e.table.width(466)}),t.element.on("focus.datagrid","tbody > tr",function(o){if(!t.settings.cellNavigation&&t.settings.rowNavigation&&!o.target.matches("a, a *")){var l=t.rowNodes($(this));if(!l.hasClass("is-active-row")){l.addClass("is-active-row");var d=t.actualRowIndex(l);t.settings.keyRowSelect&&t.selectRow(d)}}}).on("blur.datagrid","tbody > tr",function(o){if(!t.settings.cellNavigation&&t.settings.rowNavigation&&!o.target.matches("a, a *")){var l=t.rowNodes($(this));l.hasClass("is-active-row")&&l.removeClass("is-active-row")}}),this.attachPagingEvents(),t.settings.showHoverState&&t.element.off("mouseenter.datagrid, mouseleave.datagrid").on("mouseenter.datagrid","tbody > tr",function(){var o=t.rowNodes($(this));o.addClass("is-hover-row").removeClass("is-clickable"),!t.settings.cellNavigation&&!1!==t.settings.selectable&&o.addClass("is-clickable")}).on("mouseleave.datagrid","tbody > tr",function(){t.rowNodes($(this)).removeClass("is-hover-row")}),(this.hasLeftPane||this.hasRightPane||this.hasVerticalScrollbar)&&(t.element.find(".datagrid-wrapper").on("scroll.table",function(o){t.handleScrollY(o),t.verticalScrollToEnd(o)}),t.element.find(".datagrid-wrapper").on("wheel.table",function(o){0!==o.originalEvent.deltaY&&(o.currentTarget.scrollTop+=o.originalEvent.deltaY,o.preventDefault(),t.handleScrollY(o),t.verticalScrollToEnd(o))})),this.settings.virtualized){var i=0,n=0;t.bodyWrapperCenter.on("scroll.vtable",Xn(function(){var o=this.scrollTop;o!==i&&(o<t.virtualRange.top+25||o>t.virtualRange.bottom-t.virtualRange.bodyHeight-25)&&(i=this.scrollTop,t.clearCache(),t.renderRows())},0)),$("body").on("resize.vtable",function(){this.offsetHeight!==n&&(n=this.scrollTop,t.clearCache(),t.renderRows())})}t.settings.frozenColumns.left.length&&$("body").on("resize.frozencolumns",function(){t.setScrollClass()}),this.element.off("click.datagrid-header").on("click.datagrid-header",".datagrid-header th.is-sortable, .datagrid-header th.btn-filter",function(o){var l=$(o.target).parent();return l.is(".datagrid-filter-wrapper")||l.is(".lookup-wrapper")||l.is(".has-close-icon-button")||(o.stopPropagation(),t.editor=null,t.setSortColumn($(this).attr("data-column-id"))),!1}),this.element.off("click.datagrid-links").on("click.datagrid-links","tbody .datagrid-row a",function(o){var l=o.currentTarget.getAttribute("href");(!l||"#"===l)&&o.preventDefault()}),t.settings.allowPasteFromExcel&&t.settings.editable&&this.element.off("paste.datagrid").on("paste.datagrid",function(o){var l;l=o.originalEvent.clipboardData&&o.originalEvent.clipboardData.getData?o.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var d=/\n/.exec(l),h=/\r/.exec(l),p=/\r\n/.exec(l);if((!t.activeCell||!t.activeCell.node.hasClass("is-readonly"))&&(l&&h||d||p)){var v=l.split(d?"\n":"\r");p&&(v=l.split("\r\n")),v.pop();var b=parseInt($(o.target)[0].parentElement.parentElement.parentElement.getAttribute("data-index"),10),w=parseInt($(o.target)[0].parentElement.parentElement.getAttribute("aria-colindex"),10)-1;t.editor&&t.editor.input&&t.commitCellEdit(),t.copyToDataSet(v,b,w,t.settings.dataset)}});var a=t.settings.dblClickApply?"dblclick.datagrid, click.datagrid, select.datagrid":"click.datagrid, select.datagrid";this.element.off(a).on(a,"tbody td",function(o){var l,d,h=null,p=null,v=$(o.target),b=v.closest("td"),T=b.closest("table").find("thead > tr > th:not([colspan])").eq(b.index()).attr("data-column-id"),k=t.settings.columns[t.columnIdxById(T)];if(("select"!==o.type||null!=k&&k?.inlineEditor)&&(1!==$(o.currentTarget).closest(".datagrid-expandable-row").length||"gridcell"===$(o.currentTarget).attr("role"))){if(b.is(".has-btn-actions")&&!v.is(".btn-actions"))return void t.setActiveCell(b);v.parents("td").length>1&&(o.preventDefault(),o.stopPropagation());var A=$("#colorpicker-menu.is-open");if(t.triggerRowEvent(t.settings.dblClickApply?o.type:"click",o,!0),v.is("a, a *")||t.setActiveCell(b),v.is(".datagrid-expand-btn"))return h=$(this).closest("tr"),p=t.actualRowIndex(h),t.toggleRowDetail(p),t.toggleGroupChildren(h),t.toggleChildren(o,p),!1;var M=v.is(".datagrid-selection-checkbox")||1===v.find(".datagrid-selection-checkbox").length,L=v.is(".datagrid-selection-radio")||1===v.find(".datagrid-selection-radio").length,z=!(!t.settings.clickToSelect&&!M)||L;if(v.is(".datagrid-drilldown")&&(z=!1),"mixed"===t.settings.selectable&&((z=M)||(o.shiftKey&&t.activatedRow().length&&(t.selectRowsBetweenIndexes([t.activatedRow()[0].row,v.closest("tr").attr("aria-rowindex")-1]),o.preventDefault()),t.toggleRowActivation(v.closest("tr")))),z&&("multiple"===t.settings.selectable||"mixed"===t.settings.selectable)&&o.shiftKey)t.selectRowsBetweenIndexes([t.lastSelectedRow,v.closest("tr").attr("aria-rowindex")-1]),o.preventDefault();else if(z&&t.settings.dblClickApply){var q="dblclick"===o.type;t.toggleRowSelection(v.closest("tr"),q),"dblclick"!==o.type&&t.element.triggerHandler("ischanged")}else z&&!v.is("a, a *")&&t.toggleRowSelection(v.closest("tr"));var O=b.attr("aria-colindex")-1,_=t.columnSettings(O);if(!_||v.is(".datagrid-checkbox")||_.editor!==Nc.Checkbox){if(1===(null===(l=A)||void 0===l?void 0:l?.length))return void(A=null);var G=t.makeCellEditable(t.activeCell.rowIndex,t.activeCell.cell,o);if(_.click&&"function"==typeof _.click&&v.is("button, input[checkbox], a, a.search-mode i, img")||v.parent().is("button:not(.trigger)")){var j=$(this).closest("tr"),X=t.actualRowIndex(j);p=t.dataRowIndex(j);var fe=t.settings.treeGrid?t.settings.treeDepth[X].node:t.settings.dataset[p];if(b.hasClass("is-focusable")&&!v.is(t.buttonSelector)&&!v.parent("button").is(t.buttonSelector))return;t.settings.groupable&&(j.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")||(X=t.actualPagingRowIndex(t.actualRowIndex(j)),(fe=t.settings.dataset[t.groupArray[X].group])&&fe.values&&(fe=fe.values[t.groupArray[X].node]))),(!b.hasClass("is-cell-readonly")&&!v.is("[disabled]")&&v.is("button, input[checkbox], a, a.search-mode i, img")||v.parent().is("button"))&&_.click(o,[{row:X,cell:t.activeCell.cell,item:fe,originalEvent:o}]),v.is("[disabled]")&&_.formatter===Yi.Hyperlink&&(o.stopImmediatePropagation(),o.preventDefault())}if(null!=k&&k?.inlineEditor&&"click"===o.type&&"input"===o.target.nodeName.toLowerCase()){var he=o.target;he.focus(),he.select(),o.preventDefault(),o.stopPropagation()}if(_.menuId){t.closePrevPopupmenu();var we=$(this).find("button");we.popupmenu({attachToBody:!0,menuId:_.menuId,trigger:"immediate",offset:{y:5},returnFocus:function(){return b.focus()}}).off("close.gridpopupbtn").on("close.gridpopupbtn",function(){var re=$(this);re.data("popupmenu")&&!re.data("tooltip")&&re.data("popupmenu").destroy()}),_.selected&&we.off("selected.gridpopupbtn").on("selected.gridpopupbtn",_.selected)}G&&null!==(d=t.settings)&&void 0!==d&&d?.actionableMode&&setTimeout(function(){$("textarea, input",b).length&&!$(".dropdown,[type=file],[type=image],[type=button],[type=submit],[type=reset],[type=checkbox],[type=radio]",b).length&&(t.quickEditMode=!0)},0)}}}),"last"!==this.stretchColumn&&($(window).on("orientationchange.datagrid",function(){e.rerender()}),$(window).on("resize.datagrid",function(){var o=0;for(e.clearCache(),o=0;o<t.settings.columns.length;o++)t.columnWidth(t.settings.columns[o],o);if(t.stretchColumnDiff>0||t.stretchColumnWidth>0){var d=t.bodyColGroup.find("col").eq(t.getStretchColumnIdx())[0];d&&(d.style.width="".concat("".concat(t.stretchColumnDiff>0?t.stretchColumnDiff:t.stretchColumnWidth,"px")))}})),this.settings.dblClickApply||this.element.off("dblclick.datagrid").on("dblclick.datagrid","tbody tr",function(o){t.triggerRowEvent("dblclick",o,!0)}),this.element.off("contextmenu.datagrid").on("contextmenu.datagrid","tbody td",function(o){var l=$(o.currentTarget);o.stopPropagation(),t.closePrevPopupmenu(),t.triggerRowEvent("contextmenu",o,!!t.settings.menuId);var d=function(){return t.settings.menuId&&$("#".concat(t.settings.menuId)).length>0};return!d()||!H.isSubscribedTo(t.element[0],o,"contextmenu","datagrid")&&!d()||(o.preventDefault(),t.setActiveCell(parseInt(l.parent().attr("aria-rowindex"),10)-1,parseInt(l.attr("aria-colindex"),10)-1),t.activeCell.node.focus(),l.popupmenu({menuId:t.settings.menuId,eventObj:o,beforeOpen:t.settings.menuBeforeOpen,attachToBody:!0,trigger:"immediate"}).off("selected.gridpopuptr").on("selected.gridpopuptr",function(h,p){t.settings.menuSelected&&t.settings.menuSelected(h,p)}).off("close.gridpopuptr").on("close.gridpopuptr",function(){var h=$(this);h.data("popupmenu")&&h.data("popupmenu").destroy()}),!1)}),this.headerRow.add(this.headerRowLeft).off("mousemove.datagrid").on("mousemove.datagrid","th",function(o){if(!t.dragging&&(t.currentHeader=$(o.target).closest("th"),t.currentHeader.hasClass("is-resizable")&&!t.currentHeader.hasClass("datagrid-header-spacer-column"))){var l=t.currentHeader.closest(".header-detail"),d=l.length?parseInt(l.css("margin-left"),10):0,h=parseInt(t.currentHeader.position().left,10)-(d||0)+t.element.scrollLeft(),p=h+t.currentHeader.outerWidth(),v=o.pageX-h>p-o.pageX,b=0;b=v?p-5:h-5;var w=t.currentHeader.parent().find("th:visible").index(t.currentHeader);(0===w&&(B.isRTL()?v:!v)||w===t.visibleColumns().length)&&(b="-999"),!B.isRTL()&&!v&&(t.currentHeader=t.currentHeader.prevAll(":visible").not(".is-hidden").first()),B.isRTL()&&!v&&(t.currentHeader=t.currentHeader.nextAll(":visible").not(".is-hidden").first()),t.currentHeader.hasClass("is-resizable")&&(t.createResizeHandle(),t.resizeHandle[0].style.left="".concat(b,"px"),t.resizeHandle[0].style.cursor="")}}).off("contextmenu.datagrid").on("contextmenu.datagrid","th",function(o){return!t.settings.headerMenuId||(o.preventDefault(),t.closePrevPopupmenu(),$(o.currentTarget).popupmenu({menuId:t.settings.headerMenuId,eventObj:o,attachToBody:!0,beforeOpen:t.settings.headerMenuBeforeOpen,trigger:"immediate"}).off("selected.gridpopupth").on("selected.gridpopupth",function(l,d){t.settings.headerMenuSelected(l,d)}).off("close.gridpopupth").on("close.gridpopupth",function(){var l=$(this);l.data("popupmenu")&&l.data("popupmenu").destroy()}),!1)}),this.element.off("click.datagrid-header-select").on("click.datagrid-header-select","th .datagrid-checkbox",function(){var o=$(this);o.hasClass("is-checked")?(o.removeClass("is-checked").attr("aria-checked","false"),t.settings.selectAllCurrentPage?t.unSelectAllRowsCurrentPage():t.unSelectAllRows()):(o.addClass("is-checked").attr("aria-checked","true"),t.settings.selectAllCurrentPage?t.selectAllRowsCurrentPage():t.selectAllRows())}),this.element.off("focusout.datagrid").on("focusout.datagrid","tbody td input, tbody td textarea, tbody div.dropdown",function(o){var l=o.target;$(l).is("input.lookup, input.timepicker, input.datepicker, input.spinbox, input.colorpicker")?setTimeout(function(){var d=$("*:focus");if(!$(".lookup-modal.is-visible, #timepicker-popup, #monthview-popup, #colorpicker-menu").length&&t.editor){if(d.is(".spinbox, .trigger, .code-block-actions")||!$(l).is(":visible")||d&&t.editor.className&&d.closest(t.editor.className).length>0)return;t.commitCellEdit()}},150):$("#dropdown-list, .autocomplete.popupmenu.is-open, #timepicker-popup, .is-editing .code-block").is(":visible")||t.editor&&t.editor.input&&t.commitCellEdit()})},attachPagingEvents:function(){var e=this,t=this;this.settings.paging&&(this.pagerId=$(".pager-toolbar .btn-menu").attr("aria-controls"),this.tableBody.off("page.".concat(Ra)).on("page.".concat(Ra),function(i,n){void 0!==n.type&&("filtered"===n.type&&e.settings.source||(t.closePopupmenuOnPaging(),t.saveUserSettings(),t.render(null,n),t.afterPaging(n)))}).off("pagesizechange.".concat(Ra)).on("pagesizechange.".concat(Ra),function(i,n){n.preserveSelected=!0,t.closePopupmenuOnPaging(),t.render(null,n),t.afterPaging(n)}))},closePopupmenuOnPaging:function(){var e=this.element.find(".datagrid-filter-wrapper .btn-filter.is-open"),t=e?.data("popupmenu");$(".pager-toolbar .btn-menu").attr("aria-controls",this.pagerId).length&&t?.close(!0,!0)},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach(function(t){var i=$(t);i.data("popupmenu")&&i.trigger("close")})},refreshSelectedRowHeight:function(){var t=this.element.parent().find(".toolbar:not(.contextual-toolbar)").find(".btn-actions").data("popupmenu");if(null!=t&&t?.wrapper){var i=t.wrapper.find('[data-option="row-extra-small"]'),n=t.wrapper.find('[data-option="row-small"]'),a=t.wrapper.find('[data-option="row-short"]'),o=t.wrapper.find('[data-option="row-medium"]'),l=t.wrapper.find('[data-option="row-normal"]'),d=t.wrapper.find('[data-option="row-large"]');"extra-small"===this.settings.rowHeight&&(i.parent().addClass("is-checked"),n.parent().removeClass("is-checked"),a.parent().removeClass("is-checked"),o.parent().removeClass("is-checked"),l.parent().removeClass("is-checked"),d.parent().removeClass("is-checked")),("short"===this.settings.rowHeight||"small"===this.settings.rowHeight)&&(i.parent().removeClass("is-checked"),n.parent().addClass("is-checked"),a.parent().addClass("is-checked"),o.parent().removeClass("is-checked"),l.parent().removeClass("is-checked"),d.parent().removeClass("is-checked")),"medium"===this.settings.rowHeight&&(i.parent().removeClass("is-checked"),n.parent().removeClass("is-checked"),a.parent().addClass("is-checked"),o.parent().addClass("is-checked"),l.parent().removeClass("is-checked"),d.parent().removeClass("is-checked")),("normal"===this.settings.rowHeight||"large"===this.settings.rowHeight)&&(i.parent().removeClass("is-checked"),n.parent().removeClass("is-checked"),a.parent().addClass("is-checked"),o.parent().removeClass("is-checked"),l.parent().addClass("is-checked"),d.parent().addClass("is-checked")),$(".drag-target-arrows",this.element).css("height","".concat(this.getTargetHeight(),"px"))}},appendToolbar:function(){var e=null,t="",i=null,n=this.settings.useFlexToolbar,a=this;if(this.settings.toolbar){if(1===this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)").length)e=this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)"),this.refreshSelectedRowHeight();else{e=$('<div class="'.concat(n?"flex-toolbar":"toolbar",' datagrid-toolbar" role="toolbar"></div>')),this.removeToolbarOnDestroy=!0,this.settings.toolbar.title&&(t=$('<div class="'.concat(n?"toolbar-section ":"",'title">').concat(this.settings.toolbar.title,"  </div>"))),t||(t=e.find(".title")),e.append(t),this.settings.toolbar.results&&t.append('<span class="datagrid-result-count"></span>');var o=$('<div class="'.concat(n?"toolbar-section ":"",'buttonset"></div>')).appendTo(e),l=$('<div class="'.concat(n?"toolbar-section ":"",'search"></div>')).appendTo(e);if(this.settings.toolbar.keywordFilter){var d=$('<label class="audible" for="gridfilter">'.concat(B.translate("Keyword"),"</label>")),h=$('<input class="searchfield" name="searchfield" placeholder="'.concat(B.translate("Keyword"),'" id="gridfilter">'));this.settings.toolbar.collapsibleFilter||h.attr("data-options",'{ "collapsible": false }'),this.settings.useFlexToolbar?(l.append(d),l.append(h)):(o.append(d),o.append(h))}this.settings.toolbar.dateFilter&&o.append('<button class="btn" type="button">'.concat($.createIcon({icon:"calendar"}),"<span>").concat(B.translate("Date"),"</span></button>")),this.settings.toolbar.actions&&((i=$('<div class="'.concat(n?"toolbar-section ":"",'more"></div>'))).append('<button class="btn-actions" title="More" type="button">'.concat($.createIcon({icon:"more"}),'<span class="audible">Grid Features</span></button>')),e.addClass("has-more-button"));var p=$('<ul class="popupmenu"></ul>');if(this.settings.toolbar.personalize&&p.append('<li><a href="#" data-option="personalize-columns">'.concat(B.translate("PersonalizeColumns"),"</a></li>")),this.settings.toolbar.resetLayout&&p.append('<li><a href="#" data-option="reset-layout">'.concat(B.translate("ResetDefault"),"</a></li>")),this.settings.toolbar.exportToExcel&&p.append('<li><a href="#" data-option="export-to-excel">'.concat(B.translate("ExportToExcel"),"</a></li>")),this.settings.toolbar.exportToCsv&&p.append('<li><a href="#" data-option="export-to-csv">'.concat(B.translate("ExportToCsv"),"</a></li>")),this.settings.toolbar.advancedFilter&&p.append('<li><a href="#">'.concat(B.translate("AdvancedFilter"),"</a></li>")),this.settings.toolbar.views&&p.append('<li><a href="#">'.concat(B.translate("SaveCurrentView"),"</a></li> ")+'<li class="separator"></li> '+'<li class="heading">'.concat(B.translate("SavedViews"),"</li>")+'<li><a href="#">View One</a></li>'),this.settings.toolbar.rowHeight&&p.append("".concat('<li class="separator single-selectable-section"></li><li class="heading">').concat(B.translate("RowHeight"),"</li>")+'<li class="is-selectable'.concat("extra-small"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-extra-small">').concat(B.translate("ExtraSmall"),"</a></li>")+'<li class="is-selectable'.concat("short"===this.settings.rowHeight||"small"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-small">').concat(B.translate("Small"),"</a></li>")+'<li class="is-selectable'.concat("medium"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-medium">').concat(B.translate("Medium"),"</a></li>")+'<li class="is-selectable'.concat("normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-large">').concat(B.translate("Large"),"</a></li>")),!0===this.settings.toolbar.filterRow&&p.append("".concat('<li class="separator"></li><li class="heading">').concat(B.translate("Filter"),"</li>")+'<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(B.translate("ShowFilterRow"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="run-filter">'.concat(B.translate("RunFilter"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(B.translate("ClearFilter"),"</a></li>")),"object"===rt(this.settings.toolbar.filterRow)){var v='<li class="separator"></li>';this.settings.toolbar.filterRow.showFilter&&(v+='<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(B.translate("ShowFilterRow"),"</a></li>")),this.settings.toolbar.filterRow.runFilter&&!this.settings.filterWhenTyping&&(v+='<li class="is-indented"><a href="#" data-option="run-filter">'.concat(B.translate("RunFilter"),"</a></li>")),this.settings.toolbar.filterRow.clearFilter&&(v+='<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(B.translate("ClearFilter"),"</a></li>")),p.append(v)}this.settings.toolbar.actions&&i.append(p),this.settings.useFlexToolbar&&e.append(l),e.append(o),e.append(i),this.element.prev().is(".contextual-toolbar")?this.element.prev().before(e):this.element.before(e)}var b=e.find(".btn-actions"),w=e.is(".flex-toolbar");if(this.settings.stickyHeader&&e.addClass("is-sticky"),w||b.popupmenu(),(w?e:b).on("selected",function(_,G,j){var X;null!=G&&G?.attr?X=G?.attr("data-option"):"function"==typeof j?.attr&&(X=j?.attr("data-option")),X&&(("row-extra-small"===X||"row-small"===X||"row-short"===X||"row-medium"===X||"row-normal"===X||"row-large"===X)&&a.rowHeight(X.substr(4)),"personalize-columns"===X&&a.personalizeColumns(),"reset-layout"===X&&a.resetColumns(),"export-to-excel"===X&&a.exportToExcel(),"export-to-csv"===X&&a.exportToCsv(),"show-filter-row"===X&&a.toggleFilterRow(),"run-filter"===X&&a.applyFilter(null,"menu"),"clear-filter"===X&&a.clearFilter())}),this.settings.initializeToolbar&&!e.data("toolbar")&&!e.hasClass("flex-toolbar")){var k=$.fn.parseOptions(e);this.settings.toolbar.placeholder&&(k.placeholder=this.settings.toolbar.placeholder),this.settings.toolbar.fullWidth&&(k.rightAligned=!0),e.toolbar(k)}if(this.settings.initializeToolbar&&e.hasClass("flex-toolbar")&&!e.data("toolbarFlex")){var A=$.fn.parseOptions(e);this.settings.toolbar.collapsibleFilter&&(A.collapsibleFilter=!0),e.toolbarflex(A)}if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var z,M=e.find(".searchfield"),L=M.next();M.off("keypress.datagrid").on("keypress.datagrid",function(O){(13===O.keyCode||"change"===O.type)&&(clearTimeout(z),O.preventDefault(),a.keywordSearch(M.val())),a.settings.filterWhenTyping&&(clearTimeout(z),z=setTimeout(function(){a.keywordSearch(M.val())},400))}),L.off("click.datagrid").on("click.datagrid",function(){a.keywordSearch(M.val())})}this.settings.toolbar&&this.settings.toolbar.contextualToolbar&&(this.element.before('\n        <div class="contextual-toolbar datagrid-contextual-toolbar toolbar is-hidden">\n          <div class="title selection-count">1 Selected</div>\n        </div>'),this.contextualToolbar=this.element.prev(".contextual-toolbar")),this.toolbar=e,this.element.addClass("has-toolbar")}},hideContextualToolbar:function(){var e,t=this;(null===(e=this.contextualToolbar)||void 0===e?void 0:e?.length)>0&&this.contextualToolbar.one("animateclosedcomplete.datagrid",function(){t.contextualToolbar.css("display","none")}).animateClosed()},rowHeight:function(e){var t=[];return e&&(this.settings.rowHeight!==e&&t.push({before:this.settings.rowHeight,after:e}),this.settings.rowHeight=e),this.setRowHeightClass(),this.virtualRange&&this.virtualRange.rowHeight&&(this.virtualRange.rowHeight="normal"===e||"large"===e?40:"medium"===e?30:25,"extra-small"===e&&(this.virtualRange.rowHeight=22)),this.saveUserSettings(),this.refreshSelectedRowHeight(),this.rerender(),t.length&&this.element.triggerHandler("rowheightchanged",t),this.settings.rowHeight},setRowHeightClass:function(){var e=this.settings.rowHeight;"short"===e&&(e="small"),"large"===e&&(e="normal"),this.element.add(this.table).add(this.tableLeft).add(this.tableRight).removeClass("extra-small-rowheight small-rowheight short-rowheight medium-rowheight normal-rowheight large-rowheight").addClass("".concat(e,"-rowheight")),this.refreshSelectedRowHeight()},keywordSearch:function(e){this.element.find('tr[role="row"]').removeClass("is-filtered").show(),this.filterExpr=[],this.element.find(".datagrid-expandable-row").each(function(){var t=$(this);t.prev().find(".datagrid-expand-btn").removeClass("is-expanded"),t.prev().find(".plus-minus").removeClass("active"),t.removeClass("is-expanded").css("display",""),t.find(".datagrid-row-detail").css("height","")}),this.element.find(".search-mode").each(function(){var t=$(this),i=t.text();t.text(i.replace("<i>","").replace("</i>",""))}),e=(e||"").toLowerCase(),this.filterExpr.push({column:"all",operator:"contains",value:e,keywordSearch:!0}),this.filterKeywordSearch(),this.clearCache(),this.renderRows(),this.setSearchActivePage({trigger:"searched",type:"filtered"}),this.settings.paging&&this.settings.source||this.highlightSearchRows(e)},setSearchActivePage:function(e){if(this.pagerAPI){var t=this;e||(e={});var n=!0;this.filterExpr&&1===this.filterExpr.length?""!==this.filterExpr[0].value?(e.activePage=this.pagerAPI.filteredActivePage||1,this.settings.source&&this.settings.allowSelectAcrossPages&&e.activePage!==this.activePage&&(n=!1)):""===this.filterExpr[0].value&&this.pagerAPI.filteredActivePage&&(e=i(e)):this.restoreActivePage||(e=i(e),this.restoreActivePage=!1),n&&(e.activePage=this.activePage),this.renderPager(e)}function i(a){return a.activePage=1,t.grandTotal&&(a.grandTotal=t.grandTotal),a}},filterKeywordSearch:function(){var t,i,n,a,e=this,o=e.filterExpr,l=function(h,p){var v=!1,b=function(T){var k=e.columnById(T)[0],A=e.fieldValue(h,k.field),L=e.settings.columns.indexOf(k);return e.formatValue(k.formatter,p,L,A,k,h,e).toLowerCase().replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").indexOf(Fe.escapeHTML(o.value))>-1};return"all"===o.column?e.element.find("th:visible").each(function(){var T=$(this).attr("data-column-id");if(T&&(v=b(T)))return!1}):o.columnId&&(v=b(o.columnId)),v};if(o&&1===o.length)if(o=o[0],e.settings.treeGrid)for(n=0,a=(t=e.settings.treeDepth).length;n<a;n++)i=""!==o.value&&!l(t[n].node,n),t[n].node._isFilteredOut=i;else for(n=0,a=(t=e.settings.dataset).length;n<a;n++)i=""!==o.value&&!l(t[n],n),t[n]._isFilteredOut=i},highlightSearchRows:function(e){var t=this,i=this;e&&""!==e&&i.tableBody.find("tr").toArray().forEach(function(o){var l=i.rowNodes(o.getAttribute("aria-rowindex")-1),d=function(l){var d=!1;return l.toArray().forEach(function(h){[].slice.call(h.querySelectorAll("td")).forEach(function(p){var v=p.innerText.toLowerCase(),b=!!i.settings.searchExpandableRow||!de.hasClass(t,"datagrid-expandable-row");v.indexOf(e)>-1&&b&&(d=!0,[].slice.call(p.querySelectorAll("*")).forEach(function(w){[].slice.call(w.childNodes).forEach(function(T){var k=T.parentElement;if(3===T.nodeType&&"i"!==k.tagName.toLowerCase()&&Fe.unescapeHTML(k.innerHTML)===T.textContent){var A=T.textContent,M=new RegExp("(".concat(st.escapeRegExp(e),")"),"gi");de.addClass(k,"search-mode"),de.html(k,A.replace(M,"<i>$1</i>"))}})}))})}),d}(l);d||l.find(".datagrid-row-detail").length?i.settings.searchExpandableRow&&d&&l.is(".datagrid-expandable-row")&&""!==e&&(l.prev().show(),l.prev().find(".datagrid-expand-btn").addClass("is-expanded"),l.prev().find(".plus-minus").addClass("active"),l.addClass("is-expanded").css("display","table-row"),l.find(".datagrid-row-detail").css("height","auto")):l.addClass("is-filtered").hide()})},getActiveDataset:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;return e.groupable&&(t=this.originalDataset),t},getDataset:function(){return this.settings.dataset.map(function(t){return delete t._isFilteredOut,t})},selectAllRows:function(){for(var e=[],t=this.getActiveDataset(),i=0,n=t.length;i<n;i++){var a=this.settings.groupable?i:this.pagingRowIndex(i);this.filterRowRendered||this.filterExpr&&this.filterExpr[0]&&this.filterExpr[0].keywordSearch?!t[i]._isFilteredOut&&!t[i]._selected&&e.push(a):t[i]._selected||e.push(a)}this.dontSyncUi=!0,this.selectRows(e,!0,!0),this.dontSyncUi=!1,this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"selectall"])},deSelectAllRows:function(){this.unSelectAllRows()},unSelectAllRows:function(e,t){if(this._selectedRows&&0!==this._selectedRows.length){this.dontSyncUi=!0;for(var i=this._selectedRows.length-1;i>=0;i--)if(this._selectedRows[i]){var n=this.settings.groupable?this._selectedRows[i].idx:this.pagingRowIndex(this._selectedRows[i].idx);this.unselectRow(n,!0,!0)}this.settings.dataset.map(function(o){delete o._selected}),this.dontSyncUi=!1;var a=this.element.closest(".lookup-modal");this._selectedRows=1===a.length?this._selectedRows:[],this.displayCounts(),e||this.syncSelectedUI(),t||this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])}else this.settings.dataset.map(function(o){delete o._selected})},unSelectAllRowsCurrentPage:function(e){var t,n,i=this,a=this.settings;this.dontSyncUi=!0,null===(t=this.currentPageRows)||void 0===t||t?.forEach(function(h){var p=a.groupable?h.dataIndex:i.pagingRowIndex(h.dataIndex);i.unselectRow(p,!0,!0)});var o=this.getActiveDataset(),l=(null===(n=this.currentPageRows)||void 0===n?void 0:n?.map(function(h){return h.dataIndex}))||[];o.filter(function(h,p){return l.indexOf(p)>-1}).map(function(h){return delete h._selected}),this.dontSyncUi=!1,e||this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])},selectAllRowsCurrentPage:function(e){var t;this.dontSyncUi=!0;var i=(null===(t=this.currentPageRows)||void 0===t?void 0:t?.map(function(n){return n.dataIndex}))||[];i.length&&this.selectRowsBetweenIndexes([i[0],i[i.length-1]]),this.dontSyncUi=!1,e||this.syncSelectedUI()},isRowSelected:function(e){return!!e&&!0===e._selected},selectNode:function(e,t,i,n){var a=null,o=null,d="is-selected".concat("mixed"===this.settings.selectable?" hide-selected-color":"");(!i||this.isRowSelected(i))&&!n||(e.addClass(d).attr("aria-selected","true"),(a=e.find(".datagrid-selection-checkbox").closest("td")).length&&(a.attr("aria-checked","true"),a.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked")),(o=e.find(".datagrid-selection-radio").closest("td")).length&&(this.unSelectAllRows(),o.attr("aria-checked","true"),o.find(".datagrid-cell-wrapper .datagrid-radio").addClass("is-checked")),i&&(i._selected=!0))},selectRow:function(e,t,i){var o,n=this,a=null,l=this,d=this.settings,h={};if(void 0!==e&&-1!==e&&d.selectable&&!this.isRowDisabled(e)&&(a=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),o=this.dataRowIndex(a),isNaN(o)&&(o=e),a&&(a.length||!d.source))){if("function"==typeof d.onBeforeSelect&&!i&&!1===d.onBeforeSelect({node:a,idx:o}))return;var b=function(X,fe){return!!n._selectedRows.filter(function(he){return function(X,fe,he){return he&&he.idx===X&&he.elem&&he.elem.is(fe)}(X,fe,he)}).length};if("single"===d.selectable){var w=-1;this._selectedRows.length>0?w=this._selectedRows[0].pagingIdx:a[0]&&a[0].classList.contains("is-selected")&&(w=o),-1!==w&&(this.unselectRow(w,!0,!0),!a.length&&this._selectedRows.length>0&&this._selectedRows.pop())}var T=d.source&&"multiple"===d.selectable&&d.allowSelectAcrossPages;if(!a.hasClass("is-selected")||T){var k;if(d.treeGrid&&d.treeDepth&&d.treeDepth.length>0){var A=parseInt(a.attr("aria-level"),10);if(k=d.treeDepth[l.pagerAPI&&d.source?a.index():e].node,a.is(".datagrid-tree-parent")&&"multiple"===d.selectable)a.add(a.nextUntil('[aria-level="'.concat(A,'"]'))).each(function(j){var X=$(this),fe=X.attr("aria-rowindex")-1,he=l.actualPagingRowIndex(fe),we=d.treeDepth[he].node;if(d.selectChildren||!d.selectChildren&&0===j){var re=!X.is(a)&&!X.hasClass("is-selected");if(l.selectNode(X,fe,we),re&&!b(he,X)){if(h={idx:he,data:we,elem:X,page:l.pagerAPI?l.pagerAPI.activePage:1,pagingIdx:he,pagesize:d.pagesize},l.settings.source&&l.settings.allowSelectAcrossPages){var Ne=l.getUniqueRowID(we);Ne&&(h.uniqueRowID=Ne)}l._selectedRows.push(h)}}});else if("siblings"===d.selectable){var M,L;l.settings.selectAllCurrentPage?l.unSelectAllRowsCurrentPage(!0):l.unSelectAllRows(!0,!0),1===A?M=a.parent().find('[aria-level="1"]'):A>1&&(M=a.nextUntil('[aria-level="'.concat(A-1,'"]')).filter('[aria-level="'.concat(A,'"]')),L=a.prevUntil('[aria-level="'.concat(A-1,'"]')).filter('[aria-level="'.concat(A,'"]'))),a.add(M).add(L).each(function(j){var X=$(this),fe=X.attr("aria-rowindex")-1,he=l.actualPagingRowIndex(fe),we=d.treeDepth[he].node;if(d.selectChildren||!d.selectChildren&&0===j){var re=!X.is(a)&&!X.hasClass("is-selected");if(l.selectNode(X,fe,we),re&&!b(he,X)){if(h={idx:he,data:we,elem:X,page:l.pagerAPI?l.pagerAPI.activePage:1,pagingIdx:he,pagesize:d.pagesize},l.settings.source&&l.settings.allowSelectAcrossPages){var Ne=l.getUniqueRowID(we);Ne&&(h.uniqueRowID=Ne)}l._selectedRows.push(h)}}})}else l.selectNode(a,e,k);l.setNodeStatus(a),l.lastSelectedRow=e}else{if(k=d.dataset[o],d.groupable){var z=l.actualPagingRowIndex(l.actualRowIndex(a));if(isNaN(z))return;var q=l.groupArray[z];if(!b((k=l.settings.dataset[q.group].values[q.node]).idx,a)){if(h={idx:k.idx,data:k,elem:a,group:d.dataset[l.groupArray[z].group],page:l.pagerAPI?l.pagerAPI.activePage:1,pagingIdx:o,pagesize:l.settings.pagesize},l.settings.source&&l.settings.allowSelectAcrossPages){var O=l.getUniqueRowID(k);O&&(h.uniqueRowID=O)}this._selectedRows.push(h)}}l.selectNode(a,o,k),l.lastSelectedRow=e}if(!d.groupable){var _=l.actualPagingRowIndex(e);if(-1===_&&(_=e),!b(_,l.visualRowNode(_))){if(h={idx:_,data:k,elem:l.visualRowNode(_),page:l.pagerAPI?l.pagerAPI.activePage:1,pagingIdx:e,pagesize:l.settings.pagesize},l.settings.source&&l.settings.allowSelectAcrossPages){var G=l.getUniqueRowID(k);G&&(h.uniqueRowID=G)}this._selectedRows.push(h)}}}t||l.syncSelectedUI(),i||this.element.triggerHandler("selected",[this._selectedRows,"select"])}},selectRowsBetweenIndexes:function(e){e.sort(function(i,n){return i-n});for(var t=e[0];t<=e[1];t++)this.selectRow(t);this.displayCounts()},syncHeaderCheckbox:function(e){if(0!==this.headerNodes().length){var t=this.settings,i=this.getActiveDataset(),n=this.headerNodes().find(".datagrid-checkbox"),a=e.length,o=this._selectedRows.length,l=n.data("selected");if(t.selectAllCurrentPage&&this.currentPageRows&&i.length!==e.length){var d,h=(null===(d=this.currentPageRows)||void 0===d?void 0:d?.map(function(v){return v.dataIndex}))||[];o=i.filter(function(v,b){return h.indexOf(b)>-1}).filter(function(v){return v._selected}).length}t.source&&t.allowSelectAcrossPages&&(o=i.filter(function(v){return v._selected}).length),!(o!==a&&o>0&&"partial"===l||o===a&&"all"===l&&0!==o||0===o&&"none"===l)&&(o>0&&n.data("selected","partial").addClass("is-checked is-partial").attr("aria-checked","mixed"),o===a&&n.data("selected","all").addClass("is-checked").removeClass("is-partial").attr("aria-checked","true"),0===o&&n.data("selected","none").removeClass("is-checked is-partial").attr("aria-checked","false"))}},getUniqueRowID:function(e){var t=null;if(this.settings.columnIds.length>0){t="rowId";for(var i=0;i<this.settings.columnIds.length;i++)t+=" ".concat(e[this.settings.columnIds[i]]);t=t.replace(/([0-9A-Z]+)/g,function(n,a){return" ".concat(a)}).replace(/([0-9a-z]+)/g,function(n,a){return"".concat(a," ")}).trim(),t=Fe.toCamelCase(t)}return t},syncSelectedRows:function(){for(var e=this,t=this.settings,i=t.groupable&&this.originalDataset?this.originalDataset:t.dataset,n=null,a=function(T){var k=t.groupable?e.dataRowNode(n):e.visualRowNode(n);k[0]&&(e._selectedRows[T].elem=k,e.selectNode(k,n,i[n],!0))},l=0,d=this._selectedRows.length;l<d;l++){var h=(T=this._selectedRows[l])?T.uniqueRowID:null;if(this.settings.source&&this.settings.allowSelectAcrossPages&&h){for(var p=0,v=i.length;p<v;p++)if(h===this.getUniqueRowID(i[p])){var b=t.groupable?this.dataRowNode(p):this.visualRowNode(p);b[0]&&(this._selectedRows[l].elem=b,this.selectNode(b,p,i[p],!0))}}else this.pagerAPI&&this._selectedRows[l].page===this.pagerAPI.activePage&&(n=this._selectedRows[l].idx,a(l)),this._selectedRows[l].pagesize!==t.pagesize&&!t.groupable&&(t.dataset[n=this._selectedRows[l].pagingIdx]?(a(l),this._selectedRows[l].idx=n,this._selectedRows[l].page=this.pagerAPI.activePage,this._selectedRows[l].pagesize=t.pagesize):(this._selectedRows[l].idx=n%t.pagesize,this._selectedRows[l].page=Math.round(n/t.pagesize)+1,this._selectedRows[l].pagesize=t.pagesize))}var T},calculatePagerInfo:function(e,t,i){for(var n=this.settings,o={idx:e,page:1,pagesize:i="number"==typeof i&&i>0?i:n.pagesize,numOfPages:Math.ceil((t||n.treeGrid?n.treeDepth:n.dataset).length/i)},l=0;l<o.numOfPages;l++){if(e>=(o.page-1)*o.pagesize&&e<o.page*o.pagesize){o.pagingIdx=e-o.pagesize*l;break}o.page++}return o},syncSelectedRowsIdx:function(){var e=this.getActiveDataset();if(0!==this._selectedRows.length&&0!==e.length){this._selectedRows=[];for(var t=0;t<e.length;t++){var i=this.settings.treeGrid?e[t].node:e[t];if(i._selected){var n={idx:t,data:i,elem:this.dataRowNode(t),pagingIdx:t,pagesize:this.settings.pagesize};if(this.settings.groupable){var a=this.rowNodesByDataIndex(t);if(a.length){var o=this.actualPagingRowIndex(this.actualRowIndex(a)),l=this.groupArray[o].group;n.group=this.settings.dataset[l],n.page=this.calculatePagerInfo(l).page}}else n.page=this.calculatePagerInfo(t).page;this._selectedRows.push(n)}}}},syncSelectedUI:function(){var e,t,n,a,o,l,i=this,d=this.getActiveDataset(),h=d;if(this.settings.selectAllCurrentPage){var p,v=(null===(p=this.currentPageRows)||void 0===p?void 0:p?.map(function(L){return L.dataIndex}))||[];h=d.filter(function(L,z){return v.indexOf(z)>-1})}var b=h;if(this.filterRowRendered){b=[];for(var w=0,T=null===(k=h)||void 0===k?void 0:k?.length;w<T;w++){var k;h[w]._isFilteredOut||b.push(w)}}if(this.syncHeaderCheckbox(b),1===(null===(e=this.contextualToolbar)||void 0===e?void 0:e?.length)&&!this.dontSyncUi&&(0===(null===(t=this._selectedRows)||void 0===t?void 0:t?.length)&&this.contextualToolbar.one("animateclosedcomplete.datagrid",function(){i.contextualToolbar.css("display","none")}).animateClosed(),(null===(n=this._selectedRows)||void 0===n?void 0:n?.length)>0&&(0===(null===(a=this.contextualToolbar)||void 0===a?void 0:a?.height())||null===(o=this.contextualToolbar)||void 0===o||!o?.is(":visible")||null===(l=this.contextualToolbar)||void 0===l||!l?.hasClass("is-hidden")))){var A=this.contextualToolbar.hasClass("flex-toolbar")?"recalculate-buttonset":"recalculate-buttons",M=this.contextualToolbar.hasClass("flex-toolbar")?"flex":"block";this.contextualToolbar.find(".selection-count").text("".concat(this._selectedRows.length," ").concat(B.translate("Selected"))),this.contextualToolbar.removeClass("is-hidden").css("display",M).one("animateopencomplete.datagrid",function(){$(this).removeClass("is-hidden").triggerHandler(A)}).animateOpen()}},activateRow:function(e){this.activatedRow()[0].row!==e&&this.toggleRowActivation(e)},deactivateRow:function(){var e=this.activatedRow()[0].row;e>=0&&this.toggleRowActivation(e)},activatedRow:function(){var e=[{row:-1,item:void 0,elem:void 0}];if(this.tableBody){var t=this.settings,i=t.treeGrid?t.treeDepth:t.dataset,n=this.tableBody.find("tr.is-rowactivated");if(n.length){var a=this.dataRowIndex(n),o=t.indeterminate?a:this.actualRowIndex(n);e=[{row:o,item:i[o],elem:n}]}else{e=null;for(var l=0;l<i.length;l++)if(i[l]._rowactivated){e=[{row:l,item:i[l],elem:void 0}];break}null===e&&(e=[{row:-1,item:void 0,elem:n}])}}return e},toggleRowActivation:function(e){var n,a,o,t=this.settings,i=t.treeGrid?t.treeDepth:t.dataset;"number"==typeof e?(n=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(e+1,'"]')),o=e,this.pagerAPI&&t.source&&t.indeterminate&&(n=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(e+(this.pagerAPI.activePage-1)*t.pagesize+1,'"]')))):(n=(a=e instanceof jQuery?e:$(e))[0],o=t.treeGrid||t.groupable?this.actualRowIndex(a):this.dataRowIndex(a)),t.indeterminate&&!n&&(n=(a=this.actualRowNode(o))[0]),i[o]&&i[o]._rowactivated?this.deactivateRowNode(o,i):(this.deactivateAllRowNodes(i),this.activateAllRowNodes(o,i))},activateAllRowNodes:function(e,t){var i=this;if(!("number"!=typeof e||e<0)){var n=this.settings;typeof t>"u"&&(t=n.treeGrid?n.treeDepth:n.dataset);var a=[{row:e,item:t[e]}];t[e]&&$.when(this.element.triggerHandler("beforerowactivated",a)).done(function(l){var p;"string"==typeof(p=l)&&"false"===p.toLowerCase()||"boolean"==typeof p&&!1===p||"number"==typeof p&&0===p||((n.paging&&n.source&&"mixed"===n.selectable?i.rowNodesByDataIndex(e).toArray():i.rowNodes(e).toArray()).forEach(function(h){h.classList.add("is-rowactivated")}),t[e]._rowactivated=!0,i.element.triggerHandler("rowactivated",a=[{row:e,item:t[e]}]))})}},deactivateRowNode:function(e,t){if(!("number"!=typeof e||e<0)){var i=this.settings;typeof t>"u"&&(t=i.treeGrid?i.treeDepth:i.dataset),t[e]&&!i.disableRowDeactivation&&(this.rowNodes(e).toArray().forEach(function(a){a.classList.remove("is-rowactivated")}),delete t[e]._rowactivated,this.element.triggerHandler("rowdeactivated",[{row:e,item:t[e]}]))}},deactivateAllRowNodes:function(e){var t=this.settings,i=null;typeof e>"u"&&(e=t.treeGrid?t.treeDepth:t.dataset);var n=[].slice.call(this.element[0].querySelectorAll("tr.is-rowactivated"));if(n.length>0){n.forEach(function(d){d.classList.remove("is-rowactivated")});var a=t.treeGrid||t.groupable?this.actualRowIndex($(n)):this.dataRowIndex($(n));i={row:a,item:e[a]},e[a]&&delete e[a]._rowactivated}else for(var o=0;o<e.length;o++){var l=e[o];if(l._rowactivated){delete l._rowactivated,i={row:o,item:l};break}}null!==i&&this.element.triggerHandler("rowdeactivated",[i])},toggleRowSelection:function(e,t){var i="number"==typeof e?this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')):e,n="number"==typeof e?e:this.actualRowIndex(i);if(this.settings.groupable&&(n=this.dataRowIndex(i)),!(!1===this.settings.selectable||this.editor&&i.hasClass("is-selected")))return this.settings.dblClickApply||"single"!==this.settings.selectable||!i.hasClass("is-selected")||this.settings.disableRowDeselection?(i.hasClass("is-selected")?this.settings.disableRowDeselection||this.unselectRow(n):this.settings.dblClickApply?this.selectRow(n,!1,!0):this.selectRow(n),this.settings.dblClickApply&&t&&this.selectRow(n),this.displayCounts(),this._selectedRows):(this.unselectRow(n),this.displayCounts(),this._selectedRows)},unselectRow:function(e,t,i){var n=this,a=n.settings,o=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),l=a.source&&"multiple"===a.selectable&&a.allowSelectAcrossPages,d=null,h=null;if(o&&void 0!==e){var p=a.treeGrid?a.treeDepth[e].node:a.dataset[e],v=function(A){return A?A.uniqueRowID:null},b=function(A,M){var L=function(G,j){delete G._selected,typeof j>"u"&&(j=M);for(var X=0;X<n._selectedRows.length;X++){var fe=v(n._selectedRows[X]);if(a.source&&a.allowSelectAcrossPages&&fe){if(fe===n.getUniqueRowID(G)){n._selectedRows.splice(X,1);break}}else if(n._selectedRows[X].idx===j){if(l&&n._selectedRows[X].elem&&!n._selectedRows[X].elem.is(A))continue;n._selectedRows.splice(X,1);break}}};if(A.removeClass("is-selected hide-selected-color").removeAttr("aria-selected"),-1!==n.columnIdxById("selectionCheckbox")&&((d=n.cellNode(A,n.columnIdxById("selectionCheckbox"))).attr("aria-checked","false"),d.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked no-animate").removeAttr("aria-label")),-1!==n.columnIdxById("selectionRadio")&&((h=n.cellNode(A,n.columnIdxById("selectionRadio"))).attr("aria-checked","false"),h.find(".datagrid-cell-wrapper .datagrid-radio").removeClass("is-checked no-animate").removeAttr("aria-label")),a.treeGrid)for(var q=0;q<a.treeDepth.length;q++)n.isRowSelected(a.treeDepth[q].node)&&(typeof M<"u"?M===a.treeDepth[q].idx-1&&L(a.treeDepth[q].node):L(a.treeDepth[q].node));else{var O=A.length?n.dataRowIndex(A):M;void 0!==O&&O>-1&&(p=a.dataset[O]),a.groupable&&(p=n.originalDataset[O]),void 0!==p&&(a.paging&&a.source?L(p,O):L(p))}};if(a.treeGrid){var w=parseInt(o.attr("aria-level"),10);if(o.is(".datagrid-tree-parent")&&"multiple"===a.selectable)o.add(o.nextUntil('[aria-level="'.concat(w,'"]'))).each(function(k){var A=$(this),M=A.attr("aria-rowindex")-1,L=n.actualPagingRowIndex(M);(a.selectChildren||!a.selectChildren&&0===k)&&b(A,L)});else if("siblings"===a.selectable)o.parent().find(".is-selected").each(function(k){var A=$(this),M=A.attr("aria-rowindex")-1,L=n.actualPagingRowIndex(M);(a.selectChildren||!a.selectChildren&&0===k)&&b(A,L)});else{var T=n.actualPagingRowIndex(e);b(o,T)}n.setNodeStatus(o)}else b(o,e);t||n.syncSelectedUI(),i||n.element.triggerHandler("selected",[n._selectedRows,"deselect",p])}},setNodeStatus:function(e){var o,t=this,i="multiple"===t.settings.selectable,n=t.settings,a=t.cellNode(e,t.columnIdxById("selectionCheckbox"));if(!i)return a.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial"),a.attr("aria-checked","false"),void(e.is(".is-selected")&&(a.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true"),a.attr("aria-checked","true")));var l=function(h,p){h.each(function(){var v=$(this),b=t.cellNode(v,t.columnIdxById("selectionCheckbox")),w=t.getSelectedStatus(v,p);b.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial"),b.attr("aria-checked","false"),"mixed"===w?(b.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked is-partial").attr("aria-checked","mixed"),b.attr("aria-checked","mixed")):w&&(b.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked"),b.attr("aria-checked","true"))})};o=e.add(e.nextUntil('[aria-level="1"]')).filter(".datagrid-tree-parent"),n.selectChildren&&l(o),o=e,+e.attr("aria-level")>1&&(o=o.add(e.prevUntil('[aria-level="1"]')).add(e.prevAll('[aria-level="1"]:first'))),o=o.filter(".datagrid-tree-parent"),n.selectChildren&&l(o)},getSelectedStatus:function(e){var t=this.settings,n=0,a=0,o=0,l=e.add(e.nextUntil('[aria-level="1"]'));if(t.treeGrid&&"multiple"===t.selectable){var d=e.attr("aria-level");l=e.add(e.nextUntil('[aria-level="'.concat(d,'"]')))}return l.each(function(){n++,$(this).is(".is-selected")?a++:o++}),n===a||n!==o&&"mixed"},selectedRows:function(){return this._selectedRows},selectRows:function(e,t,i){var n=-1,a=this.settings,o="siblings"===a.selectable,l=this.getActiveDataset();if("number"==typeof e&&(e=[e]),!e||0===e.length)return this._selectedRows;if("single"===a.selectable&&(this._selectedRows.length&&this.unselectRow(this._selectedRows[0].idx,!0,!0),n="[object Array]"===Object.prototype.toString.call(e)?e[0]:e.index(),this.selectRow(n,!0,!0)),"multiple"===a.selectable||"mixed"===a.selectable||o)if("[object Array]"===Object.prototype.toString.call(e)){for(var d=0;d<e.length;d++)this.selectRow(e[d],!0,!0);if(0===e.length)for(var h=0,p=l.length;h<p;h++)this.unselectRow(h,!0,!0)}else this.selectRow(e.index(),!0,!0);return this.displayCounts(),t||this.syncSelectedUI(),i||this.element.triggerHandler("selected",[this._selectedRows,"select"]),this._selectedRows},findRowsByValue:function(e,t){for(var i=this.settings,n=this.getActiveDataset(),a=-1,o=[],l=0;l<n.length;l++)if(i.groupable)for(var h=0;h<n[l].values.length;h++)a++,n[l].values[h][e]===t&&o.push(a);else(i.treeGrid?n[l].node:n[l])[e]===t&&o.push(l);return o},rowStatus:function(e,t,i){var n=this.getActiveDataset();if(!t)return delete n[e].rowStatus,this.settings.treeGrid&&delete n[e].node.rowStatus,void this.updateRow(e);if(!/dirty/.test(t)&&n[e]){n[e].rowStatus={};var a=n[e].rowStatus;a.icon=t,t=(t=t.charAt(0).toUpperCase()+t.slice(1)).replace("-progress","Progress"),a.text=B.translate(t),i=i?i.charAt(0).toUpperCase()+i.slice(1):a.text,a.tooltip=i,this.updateRow(e),this.setupTooltips(!0)}},columnById:function(e){return $.grep(this.settings.columns,function(t){return t.id===e})},columnIdxById:function(e){for(var t=this.settings.columns,i=-1,n=0;n<t.length;n++)if(t[n].id===e){i=n;break}return i},handleKeys:function(){var e=this,t=this,i=$("th .datagrid-checkbox",t.headerRow);t.element.on("keydown.datagrid","th",function(n){var p,v,a=n.which||n.keyCode||n.charCode||0,o=$(this),l=t.columnIdxById(o.attr("data-column-id")),d=t.visibleColumns().length-1,h=$(n.target);if(!(h.closest(".popupmenu").length>0)){if(13===a||32===a){if(p="multiple"===t.settings.selectable&&0===l?$(".datagrid-checkbox",o):o,h.is(".btn-menu.btn-filter"))return void p.trigger("click.datagrid");var b=function(k){var A;return k&&"selectionCheckbox"===(null===(A=k[0])||void 0===A?void 0:A?.dataset.columnId)},w=b(p)||b(p.prevObject);if(h.is("th.is-sortable")&&t.setSortColumn($(this).attr("data-column-id")),("multiple"===t.settings.selectable||"mixed"===t.settings.selectable)&&w){if(i.addClass("is-checked").removeClass("is-partial"),i.closest("th").attr("aria-checked","true"),t.recordCount===t._selectedRows.length)return void(t.settings.selectAllCurrentPage?t.unSelectAllRowsCurrentPage():t.unSelectAllRows());t.settings.selectAllCurrentPage?t.selectAllRowsCurrentPage():t.selectAllRows()}32===a&&n.preventDefault()}-1!==[35,36,37,39].indexOf(a)&&(l,v=/35|36/i.test(a)||(n.ctrlKey||n.metaKey)&&/37|39/i.test(a)?B.isRTL()?36===a||(n.ctrlKey||n.metaKey)&&37===a?d:0:35===a||(n.ctrlKey||n.metaKey)&&39===a?d:0:B.isRTL()?39===a?l>0?l-1:l:l<d?l+1:d:37===a?l>0?l-1:l:l<d?l+1:d,t.activeCell.cell=v,o.removeAttr("tabindex").removeClass("is-active"),n.preventDefault()),40===a&&(o.removeAttr("tabindex"),t.activeCell.node=t.cellNode(0,t.settings.groupable?0:t.activeCell.cell).attr("tabindex","0").focus(),n.preventDefault()),h.parents(".modal").length>0&&h.hasClass("btn-filter")&&(n.shiftKey&&9===a?h.parents("th").prev("th").length>0?(n.preventDefault(),h.parents("th").prev("th").find("[tabindex=0]").trigger("focus")):h.parents(".modal-content").find(".toolbar").length>0&&(n.preventDefault(),n.stopPropagation(),h.parents(".modal-content").find(".toolbar").find("button[tabindex=0]").trigger("focus")):9===a&&(n.preventDefault(),h.siblings("input").trigger("focus")))}}),t.element.on("keydown.datagrid","td, input",function(n){var a=n.which||n.keyCode||n.charCode||0,o=!1;113===a&&!e.inlineMode&&(t.settings.actionableMode=!t.settings.actionableMode,o=!0);var l=t.element.parents(".modal");if(27===a&&0!==l.length&&l.data().modal.close(),o)return n.preventDefault(),n.stopPropagation(),o}),t.element.on("keydown.datagrid","td",function(n){var a=n.which||n.keyCode||n.charCode||0,o=!1,l=$(n.target),d=B.isRTL(),h=t.activeCell.node,p=$(this).parent(),v=p.prevAll(":not(.is-hidden, .datagrid-expandable-row)").first(),b=p.nextAll(":not(.is-hidden, .datagrid-expandable-row)").first(),w=t.activeCell.row,T=t.activeCell.cell,k=t.columnSettings(T),A=p.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"),M=t.settings.dataset[t.dataRowIndex(p)],L=t.tableBody.find("tr:visible"),z=function(qe){var Oe=L.filter('[aria-rowindex="'.concat(qe+1,'"]'));return Oe.is(".datagrid-rowgroup-header")?Oe.index():t.dataRowIndex(Oe)};h.length||(t.activeCell.node=t.cellNode(w,T),h=t.activeCell.node);var O=function(qe,Oe,ot){if(A)return function(qe,Oe,ot){var He=t.activeCell.groupNode||h;return qe+(ot?-1:1)>Oe?ot?He.prevAll(":visible").last():He.nextAll(":visible").last():ot?He.prevAll(":visible").first():He.nextAll(":visible").first()}(qe,Oe,ot);var He=qe+(ot?-1:1);if(He>Oe)return Oe;for(;t.settings.columns[He]&&t.settings.columns[He].hidden;)He=ot?He-1:He+1;return He},_=!!$(".datagrid-selection-checkbox",h).length,G=L.last(),j=t.settings.columns.length-1;if(t.settings.onKeyDown){var X=function(qe){qe||(n.stopPropagation(),n.preventDefault())};if(!1===t.settings.onKeyDown(n,{activeCell:t.activeCell,row:w,cell:T},X)||!X)return n.stopPropagation(),void n.preventDefault()}if(121===a&&n.shiftKey&&l.trigger("contextmenu"),-1===[9,37,38,39,40].indexOf(a)||(!l.closest(".code-block").length||9===a&&n.shiftKey&&0===t.getFocusables(h).index)&&(9===a||!l.is(".code-block-actions")&&!l.closest(".popupmenu.is-open").closest(".popupmenu-wrapper").prev().is(".code-block-actions"))){if(-1!==[9,37,39].indexOf(a))if(9!==a&&n.altKey)t.setActiveCell(w,T=37===a&&!d||39===a&&d?0:j);else if(!t.quickEditMode||9===a){if(9!==a&&void 0!==k.editor&&h.is(".is-editing")||(9===a&&n.shiftKey&&l.is(".code-block-actions")?t.focusNextPrev("prev",h):T=!d&&(37===a||9===a&&n.shiftKey)||d&&(39===a||9===a)?O(T,j,!0):O(T,j),-1===T&&!t.settings.actionableMode||!t.settings.cellNavigation)||-1===T&&t.settings.actionableMode&&(T=j,-1==--w)||T===j&&j===t.activeCell.cell&&t.settings.actionableMode&&(T=0,++w===t.visibleRowCount))return;T instanceof jQuery?t.setActiveCell(T):t.setActiveCell(w,T),t.settings.actionableMode&&(t.makeCellEditable(t.activeCell.rowIndex,T,n),t.containsTextField(h)&&t.containsTriggerField(h)&&(t.quickEditMode=!0)),t.quickEditMode=!1,o=!0}if(38===a&&!t.quickEditMode)if(n.altKey||n.metaKey){var we=z(0);t.setActiveCell(we,T),o=!0}else{if(0===w&&!v.is(".datagrid-rowgroup-header"))return h.removeAttr("tabindex"),void t.element.find("th").eq(T).attr("tabindex","0").focus();t.setActiveCell(v,T),o=!0}if(40===a&&!t.quickEditMode&&(n.altKey||n.metaKey?(t.setActiveCell(G,T),o=!0):(t.setActiveCell(b,T),o=!0)),32===a&&n.ctrlKey&&h){var re="";(w=h.closest("tr")).children().each(function(){var Be=$(this);re+="".concat(Be.text()," ")}),$("body").toast({title:"",audibleOnly:!0,message:re}),o=!0}if(36===a&&!h.hasClass("is-editing")&&(t.setActiveCell(w,0),o=!0),35===a&&!h.hasClass("is-editing")&&(t.setActiveCell(w,j),o=!0),34===a&&(t.setActiveCell(G,T),o=!0),33===a&&(t.setActiveCell(z(0),T),o=!0),32===a&&(!t.settings.editable||_)){if(w=h.closest("tr"),1===l.closest(".datagrid-row-detail").length)return;n.preventDefault();var Ne=l.find(".datagrid-expand-btn, .datagrid-drilldown");if(Ne&&Ne.length)return Ne.trigger("click"),void n.preventDefault();"multiple"!==t.settings.selectable&&"mixed"!==t.settings.selectable||!n.shiftKey?t.toggleRowSelection(w):t.selectRowsBetweenIndexes([t.lastSelectedRow,w.attr("aria-rowindex")-1])}if(t.settings.editable&&32===a){var le=l?.find(".datagrid-expand-btn");le.length>0&&(le.trigger("click"),n.preventDefault()),t.editor||t.makeCellEditable(t.activeCell.rowIndex,T,n)}if(13===a&&h.is(".has-btn-actions")){var Te=h.find(".btn-actions");Te.length&&Te.trigger("click")}if(13===a&&k.click&&"function"==typeof k.click&&(h.hasClass("is-cell-readonly")||k.click(n,[{row:w,cell:T,item:M,originalEvent:n}])),t.settings.editable&&13===a){if(l.is("textarea")&&n.shiftKey||l.is(".btn-menu")||l.closest(".popupmenu.is-open").length)return;var ge;t.editor?(t.quickEditMode=!1,t.commitCellEdit(),t.setNextActiveCell(n)):(t.makeCellEditable(t.activeCell.rowIndex,T,n),t.containsTextField(h)&&t.containsTriggerField(h)&&null!==(ge=t.settings)&&void 0!==ge&&ge?.actionableMode&&(t.quickEditMode=!0)),o=!0}var ce;if(-1!==[9,13,32,35,36,37,38,39,40,113].indexOf(a)||n.altKey||n.shiftKey||n.ctrlKey||n.metaKey||!t.settings.editable||!t.editor&&(null===(ce=n.currentTarget)||void 0===ce||null===(ce=ce?.parentElement)||void 0===ce||!ce?.classList.contains("datagrid-expandable-row"))&&t.makeCellEditable(t.activeCell.rowIndex,T,n),("multiple"===t.settings.selectable||"mixed"===t.settings.selectable)&&!t.editor&&(n.ctrlKey||n.metaKey)&&65===a){if(i.addClass("is-checked").removeClass("is-partial"),i.closest("th").attr("aria-checked","true"),t.recordCount===t._selectedRows.length)return void(t.settings.selectAllCurrentPage?t.unSelectAllRowsCurrentPage():t.unSelectAllRows());t.settings.selectAllCurrentPage?t.selectAllRowsCurrentPage():t.selectAllRows(),o=!0}if(o)return n.preventDefault(),n.stopPropagation(),!1}})},getFocusables:function(e){var t=$(":focusable",e);return{elements:t,index:t.index($(":focus"))}},focusNextPrev:function(e,t){if(t&&"string"==typeof e){e=e.toLowerCase();var i=this.getFocusables(t),n=i.elements,a=n.length,o=i.index;/\b(next|prev)\b/g.test(e)&&n.eq(o="next"===e?o+1>=a?0:o+1:o-1<0?a:o-1).focus()}},containsTextField:function(e){var a,t=["image","button","submit","reset","checkbox","radio"],i="textarea, input:not(.colorpicker)",n=t.length;for(i+=n?":not(":"",a=0;a<n;a++)i+="[type=".concat(t[a],"],");return i=n?"".concat(i.slice(0,-1),")"):"",!!$(i,e).length},containsTriggerField:function(e){return!$(".dropdown, .datepicker, .lookup",e).length},isRowDisabled:function(e){return!(!this.settings.isRowDisabled||"function"!=typeof this.settings.isRowDisabled||"true"!==this.rowNodes(e).attr("aria-disabled"))},isCellEditable:function(e,t){if(!this.settings.editable)return!1;var i=this.columnSettings(t);if(i.readonly||this.isRowDisabled(e)||!this.activeCell.node)return!1;var n=this.activeCell.node.find(".datagrid-cell-wrapper"),a=n.text()?n.text():this.fieldValue(this.settings.dataset[e],i.field);if(i.isEditable){var o=this.settings.dataset[e];if(this.settings.treeDepth&&this.settings.treeDepth[e]&&(o=this.settings.treeDepth[e].node),!i.isEditable(e,t,a,i,o,this,"is-editable"))return!1}return!!i.editor},makeCellEditable:function(e,t,i){var n,a,o,l;if(!this.activeCell.node.closest("tr").hasClass("datagrid-summary-row")){var d=this.activeCell.node.find(".datagrid-cell-wrapper"),h=d.parent("td"),p=$(".datagrid-tree-node",d).length>0,v=$(".datagrid-expand-btn",d).length>0;if(h.hasClass("is-editing")||h.hasClass("is-editing-inline"))return!1;this.editor&&this.editor.input&&this.commitCellEdit();var b=this.columnSettings(t);if(!b.editor)return 32===i.keyCode&&!$(i.currentTarget).find(".datagrid-selection-checkbox").length&&this.toggleRowSelection(this.activeCell.node.closest("tr")),!1;var w=this.actualRowNode(e),T=this.settings.treeGrid?this.actualPagingRowIndex(this.actualRowIndex(w)):this.dataRowIndex(w);!this.settings.treeGrid&&this.settings.paging&&this.pagerAPI.activePage>1&&T<(this.pagerAPI.activePage-1)*this.settings.pagesize&&(T+=(this.pagerAPI.activePage-1)*this.settings.pagesize);var k=this.rowData(T),A=$(".is-editor",h).length>0,M=$(".is-placeholder",d).length>0,L=d.text()&&d.text().trim().length>0?d.text():this.fieldValue(k,b.field);if((A||M)&&(L=this.fieldValue(k,b.field)),!this.isCellEditable(T,t))return!1;(v||p)&&(v&&(L=$("> span",d).text()),"string"==typeof L&&(L=L.replace(/^\s/,""))),b.inlineEditor?h.addClass("is-editing-inline"):(A&&d.css({position:"static",height:d.outerHeight()}),h.addClass("is-editing"),!b.doNotEmptyCellWhenEditing&&!h.hasClass("is-fileupload")&&d.empty()),L=Fe.sanitizeConsoleMethods(L),this.element.triggerHandler("beforeentereditmode",[{row:T,cell:t,item:k,target:d,value:L,column:b,editor:this.editor}]),1===this.visibleColumns().length&&h.addClass("has-singlecolumn"),this.editor=new b.editor(T,t,L,d,b,i,this,k),null!==(n=this.editor)&&void 0!==n&&null!==(n=n?.input)&&void 0!==n&&n?.is(".dropdown")&&null!==(a=this.editor)&&void 0!==a&&null!==(a=a?.input)&&void 0!==a&&null!==(a=a?.parent())&&void 0!==a&&a?.is(".datagrid-cell-wrapper")&&this.editor.input.parent().addClass("is-dropdown-wrapper"),this.editor.row=T,this.editor.cell=t;var z=(null===(o=b.formatter)||void 0===o?void 0:o?.toString())||"";if((0===z.indexOf("function Badge")||0===z.indexOf("function Alert"))&&(this.editor.useValue=!0),this.settings.onEditCell&&this.settings.onEditCell(this.editor),this.editor.useValue&&(L=this.fieldValue(k,b.field)),this.editor.val(L),this.settings.showDirty){var q=L;""===q&&/checkbox|favorite/i.test(this.getEditorName(this.editor))&&(q=!1),this.addToDirtyArray(T,t,{originalVal:q,isDirty:!1})}return b.inlineEditor||this.editor.focus(),null!==(l=this.editor)&&void 0!==l&&l?.input.is(".dropdown")&&i.keyCode&&![9,13,32,37,38,39,40].includes(i.keyCode)&&this.editor.input.data("dropdown").handleAutoComplete(i),this.element.triggerHandler("entereditmode",[{row:T,cell:t,item:k,target:d,value:L,column:b,editor:this.editor}]),!0}},rowData:function(e){if(this.settings.groupable)return this.originalDataset[e];var t=this.settings.treeGrid?this.settings.treeDepth[e].node:this.settings.dataset[e];return this.settings.treeGrid&&this.settings.treeDepth[e].rowStatus&&(this.settings.treeDepth[e].node.rowStatus=this.settings.treeDepth[e].rowStatus),t},commitCellEdit:function(e){var t=this;if(this.editor){var n,i=this.editor.input,a=this.getEditorName(this.editor),o="editor"===a,l="fileupload"===a,d=!i.is(".timepicker, .datepicker, .lookup, .spinbox, .colorpicker");if(l)"function"==typeof this.editor.val&&(n=this.editor.val()),Promise.resolve(n).then(function(b){t.commitCellEditUtil(i,b,o,l,d,e)});else{if("function"==typeof this.editor.val){var h=this.editor.val();if(n=h,"date"===this.editor.name&&!n){var p,v=null===(p=this.columnSettings(this.editor.cell))||void 0===p?void 0:p?.dateFormat;n=void 0===v?isNaN(B.parseDate(h))?"":h:isNaN(B.parseDate(h,{dateFormat:v}))?"":h}}this.commitCellEditUtil(i,n,o,l,d,e)}}},commitCellEditUtil:function(e,t,i,n,a,o){if(this.editor){var l,d,h;i?l=this.editor.td:n?("clear"===this.editor.status?t="":("init"===this.editor.status||"cancel"===this.editor.status)&&(t=this.editor.originalValue),l=this.tableBody.find("#".concat(e.attr("id"))).closest("td"),t=Fe.escapeHTML(t)):(l=e.closest("td"),t=Fe.escapeHTML(t)),null!==this.settings.source&&a?(d=this.activeCell.rowIndex,h=this.activeCell.dataRow):(d=this.actualRowIndex(l.parent()),h=this.dataRowIndex(l.parent()));var p=l.attr("aria-colindex")-1,v=this.columnSettings(p),b=this.settings.treeGrid?this.settings.treeDepth[h].node:this.getActiveDataset()[h],w=this.fieldValue(b,v.field);if("number"==typeof w&&"string"==typeof t&&(t=w===Number(t)?w:t),v.beforeCommitCellEdit&&(n||!o)&&!1===v.beforeCommitCellEdit({cell:p,row:h,item:b,editor:this.editor,api:this}))return;if(this.editor){w=Fe.sanitizeConsoleMethods(w),t=Fe.sanitizeConsoleMethods(t),v.serialize&&(t=v.serialize(t,w,v,h,p,b));var A=l.hasClass("is-editing-inline");l.removeClass("is-editing is-editing-inline has-singlecolumn"),this.editor.destroy(),this.editor=null,this.updateCellNode(this.settings.groupable?h:d,p,t,!1,A,w);var M=this.fieldValue(b,v.field);this.element.triggerHandler("exiteditmode",[{row:d,cell:p,item:b,target:l,value:M,oldValue:w,column:v,editor:this.editor}])}}},validateCell:function(e,t){var i,d,n=this,a=this,o=this.columnSettings(t);if(o.validate){var h,A,p=[],v=o.validate.split(" "),b=$.fn.validation,w=this.fieldValue(this.settings.dataset[e],o.field),T=[],k="";for(A=0;A<v.length;A++){var L=b.rules[v[A]],z={row:e,cell:t,item:this.settings.dataset[e],column:o,grid:a};h=$.Deferred(),L.async?L.check(w,$("<input>").val(w),z,M,h):M(L.check(w,$("<input>").val(w),z),!0,v[A],h),p.push(h)}(i=$).when.apply(i,p).then(function(){var q=$.fn.validation.ValidationTypes;for(var O in q)if(k="",T[(d=q[O]).type]&&(k=T[d.type]),""!==k){a.showCellError(e,t,k,d.type);var _=n.dataRowNode(e);a.element.trigger("cell".concat(d.type),{row:e,cell:t,message:k,target:n.cellNode(_,t),value:w,column:o})}else a.clearCellError(e,t,d.type)})}function M(q,O,_,G){var j=b.rules[_];d=$.fn.validation.ValidationTypes[j.type]||$.fn.validation.ValidationTypes.error,k="",T[d.type]&&(k=T[d.type]),!q&&O&&(k?(k=(/^\u2022/.test(k)?"":"\u2022 ")+k,k+="<br/>".concat("\u2022 ",j.message)):k=j.message,T[d.type]=k),G.resolve()}},showCellError:function(e,t,i,n){var a=this.dataRowNode(e),o=this.cellNode(a,t);if(this.clearNonVisibleCellErrors(e,t,n),!o.length)return this.nonVisibleCellErrors.push({row:e,cell:t,message:i,type:n}),void this.showNonVisibleCellErrors();o.addClass(n).attr("data-".concat(n,"message"),i);var l=o.find(".icon-".concat(n));l.length||(o.find(".datagrid-cell-wrapper").append($($.createIcon({classes:["icon-".concat(n)],icon:n}))),l=o.find(".icon-".concat(n)),this.cacheTooltip(l,{forced:!0,placement:"bottom",content:i,isError:"error"===n||"dirtyerror"===n,wrapper:l,y:5}),this.setupTooltips(!1,!0))},showNonVisibleCellErrors:function(){var e=this;if(this.toolbar||(this.settings.toolbar={title:" "},this.appendToolbar()),0===this.nonVisibleCellErrors.length)this.toolbar&&1===this.toolbar.parent().find(".table-errors").length&&this.toolbar.parent().find(".table-errors").remove(),this.removeToolbar();else{var t=function(){var a=$.fn.validation.ValidationTypes[i].type,o=$.grep(e.nonVisibleCellErrors,function(l){return l.type===a});e.showNonVisibleCellErrorType(o,a)};for(var i in $.fn.validation.ValidationTypes)t()}},removeToolbar:function(){this.toolbar.find(".buttonset").children().length<1&&this.toolbar.find(".title").text().trim().length<1&&(this.toolbar.destroy(),this.toolbar.remove(),delete this.toolbar)},showNonVisibleCellErrorType:function(e,t){var i,n,a,o,l=[],d=$.fn.validation.ValidationTypes[t]||$.fn.validation.ValidationTypes.error;if(1===this.toolbar.parent().find(".table-errors").length&&(n=this.toolbar.parent().find(".table-errors")),0!==e.length){for(o=0;o<e.length;o++){var h=Math.floor((e[o].row+this.settings.pagesize)/this.settings.pagesize);-1===$.inArray(h,l)&&l.push(h)}for(o=0;o<l.length;o++)i="".concat((i?"".concat(i,"<br>"):"")+B.translate(d.pagingMessageID)," ").concat(l[o]);0===this.toolbar.parent().find(".table-errors").length&&(n=$('<div class="table-errors"></div>')),(a=n.find(".icon-".concat(t))).length||(n.append($($.createIcon({classes:["icon-".concat(t)],icon:t}))),a=n.find(".icon-".concat(t))),this.element.hasClass("has-toolbar")&&this.toolbar.children(".title").append(n),this.cacheTooltip(a,{forced:!0,placement:"bottom",content:i,isError:"error"===t||"dirtyerror"===t,wrapper:a}),this.setupTooltips(!1,!0)}else n&&n.length&&(a=n.find(".icon-".concat(d.type)),this.hideTooltip(),n.find(".icon-".concat(d.type)).remove())},clearAllCellError:function(e,t){var i=$.fn.validation.ValidationTypes;for(var n in i)this.clearCellError(e,t,i[n].type)},clearCellError:function(e,t,i){this.clearNonVisibleCellErrors(e,t,i);var n=this.dataRowNode(e),a=this.cellNode(n,t);a.length&&this.clearNodeErrors(a,i)},clearNonVisibleCellErrors:function(e,t,i){if(this.nonVisibleCellErrors.length){if(this.toolbar&&this.toolbar.parent()&&this.toolbar.parent().find(".table-errors").length>0){var n=this.toolbar.parent().find(".table-errors").find(".icon-".concat(i));n.length&&($.grep(this.nonVisibleCellErrors,function(o){return o.type===i?o:""}).length||n.remove())}this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,function(o){return o.row===e&&o.cell===t&&o.type===i?"":o}),this.nonVisibleCellErrors.length||this.showNonVisibleCellErrors()}},clearRowError:function(e){this.dataRowNode(e).removeClass("error alert rowstatus-row-new rowstatus-row-error rowstatus-row-alert rowstatus-row-info rowstatus-row-in-progress rowstatus-row-success"),this.rowStatus(e,"","");for(var n=0;n<this.settings.columns.length;n++)this.clearAllCellError(e,n)},clearAllErrors:function(){for(var e=0,t=0;t<this.settings.dataset.length;t++){this.settings.dataset[t].rowStatus&&(delete this.settings.dataset[t].rowStatus,e++);for(var i=0;i<this.settings.columns.length;i++)this.clearAllCellError(t,i)}e>0&&this.render()},clearNodeErrors:function(e,t){var i;(e=e instanceof jQuery?e[0]:e).classList.remove(t),e.removeAttribute("data-".concat(t,"message"));var n=e.querySelector(".icon-".concat(t));null===(i=e)||void 0===i||i?.classList.remove("rowstatus-cell"),n&&(n.parentNode.removeChild(n),this.hideTooltip())},resetRowStatus:function(){for(var e=this.settings.dataset.filter(function(l){return l.rowStatus}),t=0;t<e.length;t++){var i,n,a;if(delete e[t].rowStatus,null!==(i=e[t])&&void 0!==i&&null!==(i=null==(n=i)?void 0:n.children)&&void 0!==i&&null!=(a=i)&&a.length)for(var o=0;o<e[t].children.length;o++)delete e[t].children[o].rowStatus}e.length>0&&this.render(),this.clearDirty()},clearDirtyClass:function(e){e instanceof jQuery&&e.length<0||e.each(function(t,i){[].slice.call(i.querySelectorAll(".is-dirty-cell")).forEach(function(a){a.classList.remove("is-dirty-cell")})})},clearDirty:function(){this.settings.showDirty&&(this.clearDirtyClass(this.element),this.dirtyArray=void 0)},clearDirtyRow:function(e){if(this.settings.showDirty&&"number"==typeof e){var t=this.rowNodes(e);this.clearDirtyClass(t),this.dirtyArray&&(this.dirtyArray[e]=void 0)}},clearDirtyCell:function(e,t){this.settings.showDirty&&this.dirtyArray&&"number"==typeof e&&"number"==typeof t&&typeof this.dirtyArray[e]<"u"&&(this.cellNode(e,t).removeClass("is-dirty-cell"),this.dirtyArray[e][t]=void 0)},dirtyCells:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset,i=[];if(e.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var n=0,a=t.length;n<a;n++){var o=this.dirtyArray[n];if(typeof o<"u")for(var l=0,d=o.length;l<d;l++){var h=o[l];typeof h<"u"&&h.isDirty&&i.push(e.treeGrid?t[n].node:t[n])}}return i},dirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset,i=[];if(e.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var n=0,a=t.length;n<a;n++){var o=this.dirtyArray[n];if(typeof o<"u")for(var l=0,d=o.length;l<d;l++){var h=o[l];if(typeof h<"u"&&h.isDirty){i.push(e.treeGrid?t[n].node:t[n]);break}}}return i},getModifiedRows:function(e){for(var t=this.settings,i=t.treeGrid?t.treeDepth:t.dataset,n=[],a=0;a<i.length;a++){var o=t.treeGrid?i[a].node:i[a],l={row:a,data:o,cells:[]};if(this.isRowDirty(a)){l.type="dirty";for(var d=0;!e&&d<this.dirtyArray[a].length;d++){var h=this.dirtyArray[a][d];typeof h<"u"&&h.isDirty&&l.cells.push({row:a,col:d,cellData:h})}}typeof o.rowStatus<"u"&&("error"===o.rowStatus.icon||"in-progress"===o.rowStatus.icon)&&(l.type="dirty"===l.type?["dirty",o.rowStatus.icon]:o.rowStatus.icon),typeof l.type<"u"&&n.push(e?o:l)}return n},showRowError:function(e,t,i){var n=i||"error";this.dataRowNode(e).addClass(i),this.rowStatus(e,n,t)},validateRow:function(e){if(void 0!==e)for(var t=0;t<this.settings.columns.length;t++)this.validateCell(e,t)},validateAll:function(){for(var e=0;e<this.settings.dataset.length;e++)for(var t=0;t<this.settings.columns.length;t++)this.validateCell(e,t)},columnSettings:function(e){return this.settings.columns[e]||{}},updateCell:function(e,t,i){var n=this.columnSettings(t);void 0===i&&(i=this.fieldValue(this.settings.dataset[e],n.field)),this.updateCellNode(e,t,i,!0),this.postRenderCell()},updateColumn:function(e){if(e&&e.length){var t=this,i=t.columnIdxById(e);$.each(t.settings.dataset,function(n,a){t.updateCell(n,i,a[e])})}},updateCellNode:function(e,t,i,n,a){var l,o=this,d=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),h=d.find("td").eq(t),p=this.settings.columns[t]||{},v="",b=p.formatter?p.formatter:this.defaultFormatter,w=$(".editor",h).length>0,T=this.settings.treeGrid,k=T?this.actualPagingRowIndex(this.actualRowIndex(d)):this.dataRowIndex(d);(null==k||isNaN(k))&&(k=e),!T&&this.settings.paging&&this.pagerAPI.activePage>1&&!this.settings.source&&k<(this.pagerAPI.activePage-1)*this.settings.pagesize&&(k+=(this.pagerAPI.activePage-1)*this.settings.pagesize);var A=this.rowData(k);0===d.length&&this.settings.paging&&(h=(d=this.visualRowNode(e)).find("td").eq(t));var M=this.fieldValue(A,p.field,!1);if(l=i,d.length&&A&&!A.rowStatus){var L=d.find("svg.icon-rowstatus");L.length&&L.remove()}if(this.removeTooltipData(h),0===t&&A&&A.rowStatus){var z=h.find("svg.icon-rowstatus");if(d&&h[0]){for(var q=0;q<d.length;q++)d[q].classList.add("rowstatus-row-".concat(A.rowStatus.icon));h[0].classList.add("rowstatus-cell"),z.length||h.prepend('<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"><use href="'.concat("success"===A.rowStatus.icon?"#icon-check":"#icon-exclamation",'"></use></svg>'))}if(A.rowStatus.tooltip){z=h.find("svg.icon-rowstatus");var _=A.rowStatus.icon;this.cacheTooltip(z,{forced:!0,placement:"right",content:A.rowStatus.tooltip,isError:"error"===_||"dirtyerror"===_,wrapper:h})}}if(l=Fe.unescapeHTML(l),p.field&&l!==M)if(p.field.indexOf(".")>-1){var G=A,j=p.field.split(".").length;p.field.split(".").forEach(function(He,Ae){Ae===j-1?G[He]=l:G=G[He]})}else A[p.field]=l;var X=function(Ae,We){var yt=("string"==typeof Ae?Ae.match(We):[""])||[""];return o.settings.trimSpaces||(yt=yt[0].replace(/\s/g,"&nbsp;")),yt},fe=Fe.escapeHTML(l),he=w?l:fe;"string"==typeof he&&(he="".concat(X(he,/^\s*/)).concat(he.trim()).concat(X(he,/\s*$/))),v=this.formatValue(b,e,t,he,p,A),p.contentVisible&&(p.contentVisible(e,t,fe,p,A)||(v=""));var qe,re=h.find(".datagrid-cell-wrapper");if(!a&&re[0]&&(re.html(v),0===re.children().length&&(re.innerText=Fe.unescapeHTML(v))),n||(this.validateCell(k,t),this.isDirtyCellUndefined(k,t)||(this.dirtyArray[k][t].value=i,this.dirtyArray[k][t].coercedVal=l,this.dirtyArray[k][t].escapedCoercedVal=Fe.escapeHTML(l),this.dirtyArray[k][t].cellNodeText=h.text(),this.dirtyArray[k][t].cell=t,this.dirtyArray[k][t].column=this.settings.columns[t],this.setDirtyCell(k,t))),this.settings.stretchColumnOnChange&&p){var le=this.calculateTextWidth(p);p.minWidth&&le<p.minWidth&&(le=p.minWidth),p.minWidth&&le>p.maxWidth&&(le=p.maxWidth),le>0&&le-this.stretchColumnWidth>this.stretchColumnDiff&&(this.stretchColumnWidth=le,this.stretchColumnDiff=0,this.setColumnWidth(p.id,le,!0))}if(this.settings.rowTemplate){var ge=A,ce="";hn&&ge&&(ce=hn.compile("{{#dataset}}".concat(this.settings.rowTemplate,"{{/dataset}}"),{dataset:ge})),h.parent().next().is(".datagrid-expandable-row")&&h.parent().next().find(".datagrid-row-detail-padding").html(ce)}if(this.settings.summaryRow&&!this.settings.groupable&&this.updateSummaryRow(p,t),"string"==typeof M&&"string"==typeof l){var Oe={oldVal:"".concat(X(M,/^\s*/)).concat(M.trim()).concat(X(M,/\s*$/)),coercedVal:"".concat(X(l,/^\s*/)).concat(l.trim()).concat(X(l,/\s*$/))};qe=Oe.coercedVal!==Oe.oldVal&&!n}else qe=l!==M&&!n;if(qe){var ot={row:null!==this.settings.source?k:e,relativeRow:e,cell:t,target:h,value:l,oldValue:M,column:p,api:this};ot.rowData=T&&this.settings.treeDepth[e]?this.settings.treeDepth[e].node:A,!this.isCellDirty(e,t)&&!this.settings.actionableMode&&this.setActiveCell(e,t),this.element.trigger("cellchange",ot),this.wasJustUpdated=!0}},updateSummaryRow:function(e,t){if(e.summaryRowFormatter){var i=this.calculateTotals(),n=this.rowNodes(this.settings.dataset.length).find("td").eq(t),a='<div class="datagrid-cell-wrapper">'.concat(i[e.id],"</div>");n.html(a)}},isRowDirty:function(e){var t=!1;if("number"==typeof e&&this.dirtyArray&&this.dirtyArray.length){var i=this.dirtyArray[e];if(typeof i<"u")for(var n=0,a=i.length;n<a;n++){var o=i[n];if(typeof o<"u"&&o.isDirty){t=!0;break}}}return t},isCellDirty:function(e,t){return!this.isDirtyCellUndefined(e,t)&&this.dirtyArray[e][t].isDirty},addToDirtyArray:function(e,t,i){typeof this.dirtyArray>"u"&&(this.dirtyArray=[]),typeof this.dirtyArray[e]>"u"?(this.dirtyArray[e]=[],this.dirtyArray[e][t]=i):typeof this.dirtyArray[e][t]>"u"&&(this.dirtyArray[e][t]=i)},setDirtyCell:function(e,t,i){var n=this.cellNode(e,t);i&&this.addToDirtyArray(e,t,i);var a=this.dirtyArray[e][t];a.originalVal!==a.value&&a.originalVal!==a.coercedVal&&a.originalVal!==a.escapedCoercedVal&&a.originalVal!==a.cellNodeText||a.originalVal.length!==a.value.length&&a.originalVal.length!==a.cellNodeText.length?(this.dirtyArray[e][t].isDirty=!0,n[0].classList.add("is-dirty-cell"),this.setDirtyIndicator(e,t,!0)):(this.dirtyArray[e][t].isDirty=!1,this.setDirtyIndicator(e,t,!1)),("string"==typeof a.originalVal||a.originalVal instanceof String)&&a?.originalVal===a?.value&&(this.dirtyArray[e][t].isDirty=!1,this.setDirtyIndicator(e,t,!1))},setDirtyIndicator:function(e,t,i,n){var a=this.cellNode(e,t);n&&this.addToDirtyArray(e,t,n),!(e<0||t<0)&&a.length&&(i?a[0].classList.add("is-dirty-cell"):a[0].classList.remove("is-dirty-cell"))},isDirtyCellUndefined:function(e,t){return!(this.settings.showDirty&&"number"==typeof e&&"number"==typeof t&&e>-1&&t>-1&&typeof this.dirtyArray<"u"&&typeof this.dirtyArray[e]<"u"&&typeof this.dirtyArray[e][t]<"u")},visualRowIndex:function(e){var t="tr:visible:not(.is-hidden, .datagrid-expandable-row)",i=this.tableBody.find(t).index(e);return-1===i&&this.tableBodyLeft&&(i=this.tableBodyLeft.find(t).index(e)),-1===i&&this.tableBodyRight&&(i=this.tableBodyRight.find(t).index(e)),i},visualRowNode:function(e){var t=e;return this.settings.paging&&this.settings.source&&(t+=(this.pagerAPI.activePage-1)*this.settings.pagesize),this.isRowVisible(e)?this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]')):$([])},actualRowNode:function(e){return this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]'))},rowNodes:function(e){var t=this.element;return e instanceof jQuery&&(t=e.closest(".datagrid-container"),e=e.attr("aria-rowindex")-1),t.find('> .datagrid-wrapper > table > tbody > tr[aria-rowindex="'.concat(e+1,'"]'))},rowNodesByDataIndex:function(e){e instanceof jQuery&&(e=e.attr("data-index"));var t=this.tableBodyLeft?this.tableBodyLeft.find('tr[data-index="'.concat(e,'"]')):$(),i=this.tableBody.find('tr[data-index="'.concat(e,'"]')),n=this.tableBodyRight?this.tableBodyRight.find('tr[data-index="'.concat(e,'"]')):$();return $(i).add(t).add(n)},cellNode:function(e,t){var i=this.settings.groupable?this.rowNodesByDataIndex(e).find("td"):this.rowNodes(e).find("td");return i.eq(t>=i.length?i.length-1:t)},actualRowIndex:function(e){return(e=e instanceof jQuery?e:$(e)).attr("aria-rowindex")-1},pagingRowIndex:function(e){var t=e;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(t+=(this.pagerAPI.activePage-1)*this.settings.pagesize),t},actualPagingRowIndex:function(e){var t=e;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(t-=(this.pagerAPI.activePage-1)*this.settings.pagesize),t},dataRowNode:function(e){return this.tableBody.find('tr[data-index="'.concat(e,'"]'))},dataRowIndex:function(e){return e=e instanceof jQuery?e:$(e),parseInt(e.attr("data-index"),10)},setActiveCell:function(e,t){var l,d,h,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this,a=n.activeCell,o=e,p=e instanceof jQuery&&e.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer");if(!(e instanceof jQuery&&0===e.length||("number"==typeof e&&(l=e,o=this.settings.treeGrid?this.actualRowNode(e):this.tableBody.find("tr:visible").eq(e),d=this.actualRowIndex(o),h=this.dataRowIndex(o)),e instanceof jQuery&&e.is("td")&&(p=e.parent().is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"),p&&(o=e.parent()),t=e.attr("aria-colindex")-1,l=this.visualRowIndex(e.parent()),d=this.actualRowIndex(e.parent()),h=this.dataRowIndex(e.parent()),o=e.parent()),e instanceof jQuery&&e.is("tr")&&(l=this.visualRowIndex(e),d=this.actualRowIndex(e),h=this.dataRowIndex(e),o=e),l<0||t<0))){a.node&&1===a.node.length&&n.activeCell.node.removeAttr("tabindex").removeClass("is-active"),(a.cell!==t||a.row!==e)&&n.hideTooltip(),n.activeCell.node=n.cellNode(p||o?o:d>-1?d:l,t).attr("tabindex","0"),n.activeCell.node&&1===a.node.length?(n.activeCell.row=l,n.activeCell.cell=t,d=this.actualRowIndex(n.activeCell.node.parent()),h=this.dataRowIndex(n.activeCell.node.parent())):n.activeCell=a,(!$("input:not(.colorpicker), select, button:not(.btn-secondary, .row-btn, .datagrid-expand-btn, .datagrid-drilldown, .btn-icon)",n.activeCell.node).length||n.activeCell.node.is(".has-btn-actions")&&n.activeCell.node.find(".btn-actions").length)&&((!function v(A){if(null!=A&&A[0]){var M=A[0].getBoundingClientRect();return M.x+M.width<0||M.y+M.height<0||M.x>window.innerWidth||M.y>window.innerHeight}}(n.activeCell.node)||i)&&n.activeCell.node.focus(),p&&(n.activeCell.groupNode=n.activeCell.node)),n.activeCell.node.is(".is-focusable")&&n.activeCell.node.find("button").focus(),void 0!==h&&(n.activeCell.dataRow=h),void 0!==d&&(n.activeCell.rowIndex=d);var b=+o.find("td[colspan]").attr("colspan");if(p&&n.activeCell.node&&a.node&&!(e instanceof jQuery&&e.is("td"))&&(t<b?(o.find("td[colspan]").attr("tabindex","0").focus(),n.activeCell.groupNode=o.find("td[colspan]")):t>=b?(o.find("td").eq(t-b+1).attr("tabindex","0").focus(),n.activeCell.groupNode=o.find("td").eq(t-b+1)):(o.find("td").eq(t).attr("tabindex","0").focus(),n.activeCell.groupNode=o.find("td").eq(t))),p&&e instanceof jQuery&&e.is("td")&&(n.activeCell.cell=b-1+t,e.is("[colspan]")&&(n.activeCell.cell=t)),this.settings.cellNavigation){var w=n.headerNodes(),T=0;this.hasColSpans&&(T=0,w.eq(t).prevAll("[colspan]").each(function(A,M){var L=$(M).attr("colspan")-1;T+=L}),t-=T),this.settings.activeCheckboxSelection&&(w.removeClass("is-active"),w.eq(t).addClass("is-active"))}this.activeCell.isFocused=!0;var k=this.settings.columns[t];k&&k.expandOnActivate&&this.activeCell&&this.activeCell.node&&n.activeCell.node.addClass("is-active"),n.element.trigger("activecellchange",{node:this.activeCell.node,row:this.activeCell.row,cell:this.activeCell.cell,api:n})}},setNextActiveCell:function(e){var t=this;if("keydown"===e.type)if(this.settings.actionableMode){var i=13===e.keyCode?40:e.keyCode;if(32===i)return;setTimeout(function(){var n=$.Event("keydown.datagrid");n.keyCode=i,t.activeCell.node.trigger(n)},0)}else this.setActiveCell(this.activeCell.row,this.activeCell.cell)},addChildren:function(e,t){if(!(!t||t&&!t.length||e<0)){var i=this.settings.treeDepth[e].node;i.children=i.children||[];for(var n=0,a=(t=JSON.parse(JSON.stringify(t))).length;n<a;n++)i.children.push(t[n]);this.updateDataset(this.settings.dataset)}},setExpandedInDataset:function(e,t){this.settings.treeDepth[e].node.expanded=t},toggleChildren:function(e,t){if(!this.settings.groupable){var i=this,n=this.settings,a=this.rowNodes(t),o=a.find(".datagrid-expand-btn"),l=parseInt(a.attr("aria-level"),10),d=o.hasClass("is-expanded"),h=[{grid:i,row:t,item:a}];if(i.settings.treeDepth&&i.settings.treeDepth[t]&&(h[0].rowData=i.settings.treeDepth[t].node),a.hasClass("datagrid-tree-parent")&&($(e.target).is(o)||!i.settings.editable&&!i.settings.selectable)){var p=function(){a=i.rowNodes(t),o=a.find(".datagrid-expand-btn");var w=a.nextUntil('[aria-level="'.concat(l,'"]')),T=i.settings.treeGrid&&i.settings.source&&i.settings.paging?i.dataRowIndex(a):t;d?(a.attr("aria-expanded",!1),o.removeClass("is-expanded").find(".plus-minus").removeClass("active")):(a.attr("aria-expanded",!0),o.addClass("is-expanded").find(".plus-minus").addClass("active")),i.setExpandedInDataset(T,!d),function A(M,L,z){M.nextUntil('[aria-level="'.concat(L,'"]')).each(z?function(){var O=$(this);parseInt(O.attr("aria-level"),10)>L&&O.addClass("is-hidden")}:function(){var O=$(this),_=parseInt(O.attr("aria-level"),10);if(_===L+1){if(!O.hasClass("is-filtered")&&(O.removeClass("is-hidden"),i.settings.frozenColumns)){var G=O.attr("aria-rowindex");i.tableBody.find('[aria-rowindex="'.concat(G,'"]')).removeClass("is-hidden")}if(O.is(".datagrid-tree-parent")){var j=O.find(".datagrid-expand-btn.is-expanded").length>0;j&&A(O,_,!j)}}})}(a,l,d),i.setAlternateRowShading(),h.children=w};$.when(i.element.triggerHandler(d?"collapserow":"expandrow",h)).done(function(b){var w=function(k){return"string"==typeof k&&"false"===k.toLowerCase()||"boolean"==typeof k&&!1===k||"number"==typeof k&&0===k};w(b)||("function"!=typeof n.onExpandChildren||d?"function"==typeof n.onCollapseChildren&&d?$.when(n.onCollapseChildren(h[0])).done(function(T){w(T)||p()}):p():$.when(n.onExpandChildren(h[0])).done(function(T){w(T)||p()}))})}}},toggleRowDetail:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this,n=i.rowNodes(e);!n.length&&i.settings.paging&&(i.settings.rowTemplate||i.settings.expandableRow)&&(n=i.dataRowNode(e+=(i.pagerAPI.activePage-1)*i.settings.pagesize));var a=n.next(),o=n.find(".datagrid-expand-btn"),l=a.find(".datagrid-row-detail"),d=i.settings.dataset[i.dataRowIndex(n)];if(!n.hasClass("datagrid-tree-parent")){if(i.settings.allowOneExpandedRow&&null===i.settings.groupable){var p=i.tableBody.add(i.tableBodyLeft).add(i.tableBodyRight).find("tr.is-expanded"),v=p.prev().find(".datagrid-expand-btn"),b=p.prev(),w=i.actualRowNode(b),T=i.dataRowIndex(b);if(p.length&&a.index()!==p.index()){var k=p.find(".datagrid-row-detail");p.add(v).removeClass("is-expanded"),b.removeClass("is-rowactivated"),b.find(".plus-minus").removeClass("active"),k.animateClosed().on("animateclosedcomplete",function(){p.removeClass("is-expanded"),i.element.triggerHandler("collapserow",[{grid:i,row:w,detail:k,item:i.settings.dataset[T]}])});var A=p.prev().find(".btn-primary");A.length&&A.attr("class",A.attr("class").replace("btn-primary","btn-secondary"))}var M=!a.hasClass("is-expanded"),L=a.prev().find(M?".btn-secondary":".btn-primary");if(d.expanded=!1,L.length>0&&b&&L){var z=L.attr("class")||"";L.attr("class",z.replace(M?"btn-secondary":"btn-primary",M?"btn-primary":"btn-secondary"))}}if(a.hasClass("is-expanded")&&!t)l.one("animateclosedcomplete",function(){a.removeClass("is-expanded")}).animateClosed(),o.removeClass("is-expanded").find(".plus-minus").removeClass("active"),i.settings.allowOneExpandedRow&&n.removeClass("is-rowactivated"),d.expanded=!1,i.element.triggerHandler("collapserow",[{grid:i,row:e,detail:l,item:d}]);else if(d){a.addClass("is-expanded"),o.addClass("is-expanded").find(".plus-minus").addClass("active"),d.expanded=!0,a.find(".constrained-width").css("max-width",this.element.outerWidth());var q=[{grid:i,row:e,detail:l,item:d}];if(i.element.triggerHandler("expandrow",q),i.settings.allowOneExpandedRow&&"multiple"!==this.settings.selectable&&n.addClass("is-rowactivated"),i.settings.onExpandRow?i.settings.onExpandRow(q[0],function(X){X&&l.find(".datagrid-row-detail-padding").empty().append(X),i.adjustExpandRowHeight(l),l.animateOpen()}):(i.adjustExpandRowHeight(l),l.animateOpen()),i.settings.frozenColumns.expandRowAcrossAllCells&&i.frozenExpandRowAcrossAllCells(),i.settings.frozenColumns.left.length||i.settings.frozenColumns.right.length){var _={left:l.eq(0)[0],center:l.eq(1)[0],right:l.eq(2)[0]},G={theme:"themechanged.".concat(Ra),rowheight:"rowheightchanged.".concat(Ra)};$("html").off(G.theme).on(G.theme,function(){i.frozenExpandRowSetHeight(_)}),i.element.off(G.rowheight).on(G.rowheight,function(){i.frozenExpandRowSetHeight(_)})}}}},adjustExpandRowHeight:function(e){if(e.length&&(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length)){var t={left:e.eq(0)[0]?e.eq(0)[0].children[0]:null,center:e.eq(1)[0],right:e.eq(2)[0]?e.eq(2)[0].children[0]:null},i=0;t.center&&(t.center.style.height="auto",i=t.center.offsetHeight-1,t.center.style.height=""),i>0&&(t.left&&(t.left.style.height="".concat(i,"px")),t.right&&(t.right.style.height="".concat(i,"px")))}},frozenExpandRowSetHeight:function(e){if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var t=0;if(e&&e.center&&(e.padding=e.center.querySelector(".datagrid-row-detail-padding"),t=e.padding.offsetHeight),t&&(e.center.style.height="".concat(t,"px"),e.left&&(e.left.style.height="".concat(t,"px")),e.right&&(e.right.style.height="".concat(t,"px")),this.settings.frozenColumns.expandRowAcrossAllCells)){var i={container:this.element[0].getBoundingClientRect(),centerEl:e.center.getBoundingClientRect()},n="".concat(i.centerEl.top-i.container.top,"px");e.padding.style.top=n}}},frozenExpandRowAcrossAllCells:function(){var e=this;if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var t={row:".datagrid-expandable-row.is-expanded"};t.detail="".concat(t.row," > td .datagrid-row-detail"),t.padding="".concat(t.detail," .datagrid-row-detail-padding");var i={left:this.tableBodyLeft?this.tableBodyLeft[0]:null,center:this.tableBody?this.tableBody[0]:null,right:this.tableBodyRight?this.tableBodyRight[0]:null},n={rows:{left:i.left?i.left.querySelector(t.row):null,center:i.center?i.center.querySelector(t.row):null,right:i.right?i.right.querySelector(t.row):null},details:{left:i.left?i.left.querySelector(t.detail):null,center:i.center?i.center.querySelector(t.detail):null,right:i.right?i.right.querySelector(t.detail):null},padding:this.tableBody[0].querySelector(t.padding)};if(n.padding&&(n.details.left||n.details.right)){var a="is-expanded-frozen";n.padding.style.opacity="0",n.rows.left&&n.rows.left.classList.add(a),n.rows.right&&n.rows.right.classList.add(a),$(n.details.center).one("animateopencomplete.datagrid.expandedfrozen",function(){(n.details.left||n.details.right)&&setTimeout(function(){n.rows.center.classList.add(a),e.frozenExpandRowSetHeight(n.details),n.padding.style.opacity="",$(window).on("resize.datagrid.expandedfrozen",function(){e.frozenExpandRowSetHeight(n.details)})},10)}).one("animateclosedstart.datagrid.expandedfrozen",function(){$(window).off("resize.datagrid.expandedfrozen"),n.padding.style.opacity="0",n.padding.style.top="",n.rows.center.classList.remove(a),n.rows.left&&n.rows.left.classList.remove(a),n.rows.right&&n.rows.right.classList.remove(a)}).one("animateclosedcomplete.datagrid.expandedfrozen",function(){n.padding.style.opacity=""})}}},toggleGroupChildren:function(e){if(this.settings.groupable){var t=this,i=e.index(),n=$(),a=$(),o=$();this.hasLeftPane&&(n=this.tableLeft.find("tbody tr").eq(i).nextUntil(".datagrid-rowgroup-header")),a=this.table.find("tbody tr").eq(i).nextUntil(".datagrid-rowgroup-header"),this.hasRightPane&&(o=this.tableRight.find("tbody tr").eq(i).nextUntil(".datagrid-rowgroup-header"));var l=e.find(".datagrid-expand-btn");e.hasClass("is-expanded")?(l.removeClass("is-expanded").find(".plus-minus").removeClass("active"),n.hide(),n.addClass("is-hidden"),a.hide(),a.addClass("is-hidden"),o.hide(),o.addClass("is-hidden"),t.element.triggerHandler("collapserow",[{grid:t,row:e.index(),detail:a,item:{}}]),e.removeClass("is-expanded")):(l.addClass("is-expanded").find(".plus-minus").addClass("active"),n.show(),n.removeClass("is-hidden"),a.show(),a.removeClass("is-hidden"),o.show(),o.removeClass("is-hidden"),t.element.triggerHandler("expandrow",[{grid:t,row:e.index(),detail:a,item:{}}]),e.addClass("is-expanded"))}},setSortColumn:function(e,t){var i=!0;if(void 0!==t?(this.sortColumn.sortAsc===t&&this.sortColumn.sortId===e&&(i=!1),this.sortColumn.sortAsc=t):(this.sortColumn.sortAsc=this.sortColumn.sortId!==e||!this.sortColumn.sortAsc,t=this.sortColumn.sortAsc),this.sortColumn.sortId=e,this.sortColumn.sortField=this.columnById(e)[0]?this.columnById(e)[0].field:e,this.sortColumn.sortAsc=t,this.setSortIndicator(e,t),i&&this.sortDataset(),!this.settings.focusAfterSort&&this.activeCell&&this.activeCell.isFocused&&(this.activeCell.isFocused=!1),i){var n=this.activeCell.isFocused;this.settings.source||(this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.clearCache(),this.renderRows(),this.syncSelectedUI()),n&&1===this.activeCell.node.length&&this.setActiveCell(this.activeCell.row,this.activeCell.cell),this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value),this.settings.source&&this.triggerSource({type:"sorted"})}this.tableBody.removeClass("is-loading"),this.saveUserSettings(),this.validateAll(),this.element.trigger("sorted",[this.sortColumn])},sortDataset:function(){if(this.settings.disableClientSort)this.restoreSortOrder=!0;else{this.settings.groupable&&this.originalDataset&&(this.settings.dataset=this.originalDataset);var e=this.sortFunction(this.sortColumn.sortId,this.sortColumn.sortAsc);this.saveDirtyRows(),this.settings.dataset.sort(e),this.setTreeDepth(),this.restoreDirtyRows(),this.settings.selectable&&this.syncDatasetWithSelectedRows()}},saveDirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;if(this.settings.groupable&&(t=this.originalDataset||t),e.showDirty&&!this.settings.source&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,n=t.length;i<n;i++)typeof this.dirtyArray[i]<"u"&&((e.treeGrid?t[i].node:t[i]).tempNodeIndex=i)},restoreDirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;if(this.settings.groupable&&(t=this.originalDataset||t),e.showDirty&&this.dirtyArray&&this.dirtyArray.length){for(var i=[],n=0,a=t.length;n<a;n++){var o=e.treeGrid?t[n].node:t[n];typeof o.tempNodeIndex<"u"&&(i.push({newIdx:n,oldIdx:o.tempNodeIndex}),delete o.tempNodeIndex)}for(var l=[],d=0,h=i.length;d<h;d++)l[i[d].newIdx]=this.dirtyArray[i[d].oldIdx];this.dirtyArray=l}},syncDatasetWithSelectedRows:function(){var e,t=this,i=this.settings;if(!(i.source&&i.paging&&i.allowSelectAcrossPages&&null!==(e=i.columnIds)&&void 0!==e&&e?.length)){this._selectedRows=[];for(var d,n=i.treeGrid?i.treeDepth:i.dataset,a=-1,o=function(p,v){if(i.groupable&&!t.originalDataset)for(var b=0;b<Object.keys(n[v]).length;b++)a++,p=Object.keys(n[v]).map(function(w){return n[v][w]}),t.isRowSelected(p)&&t._selectedRows.push({idx:a,data:p,elem:t.dataRowNode(a),group:n[v],page:t.pagerAPI?t.pagerAPI.activePage:1,pagingIdx:a,pagesize:t.settings.pagesize});else t.isRowSelected(p=i.treeGrid?n[v].node:n[v])&&t._selectedRows.push({idx:v,data:p,elem:t.visualRowNode(v),pagesize:t.settings.pagesize,page:t.pagerAPI?t.pagerAPI.activePage:1,pagingIdx:v});d=p},l=0;l<n.length;l++)o(d,l)}},setSortIndicator:function(e,t){this.headerRow&&(this.sortColumn={sortId:e,sortAsc:t,sortField:this.columnById(e)[0]?this.columnById(e)[0].field:e},this.element.find(".is-sorted-asc, .is-sorted-desc").removeClass("is-sorted-asc is-sorted-desc"),this.element.find('[data-column-id="'.concat(e,'"]')).addClass(t?"is-sorted-asc":"is-sorted-desc").attr("aria-sort",t?"ascending":"descending"))},sortFunction:function(e,t){var i=this.columnById(e),n=0===i.length?null:i[0],a=null===n?e:n.field,o=this,d=function(p){return function(p){return"string"==typeof(p=p??"")&&(p=p.toUpperCase(),$.isNumeric(p)&&(p=parseFloat(p))),p}(o.fieldValue(p,a))};return n&&n.sortFunction&&(d=function(p){return n.sortFunction(o.fieldValue(p,a))}),t=t?1:-1,function(h,p){return h=d(h),p=d(p),"number"==typeof h&&"string"==typeof p&&""!==p?-1*t:"string"==typeof h&&"number"==typeof p&&""!==h?t:""===h?""===p?0:1:""===p?""===h?0:-1:(rt(h)!==rt(p)&&(h=h.toString().toLowerCase(),p=p.toString().toLowerCase()),t*((h>p)-(p>h)))}},defaultFormatter:function(e,t,i,n,a,o){if(arguments.length>6&&void 0!==arguments[6]&&arguments[6]){var d=parseFloat(i);if(isNaN(d)){var h=Date.parse(i);isNaN(h)||(i=B.formatDate(h))}else i=B.formatNumber(d,{style:Number.isInteger(d)?"integer":"decimal"})}return null==i||""===i?"":i.toString()},handlePaging:function(){this.settings.paging&&(this.element.addClass("paginated"),this.tableBody.pager({componentAPI:this,dataset:this.settings.dataset,hideOnOnePage:this.settings.hidePagerOnOnePage,source:this.settings.source,pagesize:this.settings.pagesize,indeterminate:this.settings.indeterminate,rowTemplate:this.settings.rowTemplate,pagesizes:this.settings.pagesizes,pageSizeSelectorText:this.settings.groupable?"GroupsPerPage":"RecordsPerPage",showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.restoreActivePage?parseInt(this.savedActivePage,10):1}),this.restoreActivePage&&(this.savedActivePage=null,this.restoreActivePage=!1))},renderPager:function(e,t,i){this.pagerAPI&&(this.settings.source||(this.pagerAPI.settings.dataset=this.settings.dataset,e.isFilteredClientside=!0),this.pagerAPI.updatePagingInfo(e,t),t||this.triggerSource(e,i),this.syncSelectedUI())},getPageableElements:function(){var e=this.element.children().not(".datagrid-expandable-row");return e.is("table")&&(e=e.find("tbody tr")),e},appendTooltip:function(e){var t=this,i="grid-tooltip",n=new RegExp("\\b".concat(i,"\\b"),"g");"string"==typeof e?n.test(e)||(e+=" ".concat(i)):e=i;var a=this.uniqueId("tooltip");if(this.tooltip=document.getElementById(a),!this.tooltip){var o=""+'<div id="'.concat(a,'" class="tooltip ').concat(e,' is-hidden">\n          <div class="arrow"></div>\n          <div class="tooltip-content"></div>\n        </div>');document.body.insertAdjacentHTML("beforeend",o),this.tooltip=document.getElementById(a),this.isTouch&&(this.tooltip.style.pointerEvents="auto",$(this.tooltip).on("touchend.gridtooltip",function(){t.hideTooltip()}))}},cacheTooltip:function(e,t){if(void 0!==$(e).attr("disabletooltip"))return t;if(typeof t>"u"){var i,n,A,a=e.querySelector(".is-editor.content-tooltip"),o=e.querySelector("a[title]"),l=de.hasClass(e,"rowstatus-cell"),d="svg"===e.tagName.toLowerCase(),h=e.classList.contains("datagrid-header-icon"),p="th"===e.tagName.toLowerCase(),v=de.hasClass(e,"datagrid-column-wrapper"),b=de.hasClass(e.parentNode,"datagrid-filter-wrapper"),w=e.getAttribute("aria-colindex")-1,T=this.columnSettings(w),k=$(".grid-tooltip");(t={content:"",wrapper:e.querySelector(".datagrid-cell-wrapper")}).extraClassList=[];var M,L=$(e).index();if(v){var z=$(e).attr("data-column-id");M=this.settings.columns[this.columnIdxById(z)]}else{var O=$(e).closest("table").find("thead > tr > th").eq(L).attr("data-column-id");M=this.settings.columns[this.columnIdxById(O)]}if((p||v||b||h)&&(t.wrapper=e,t.distance=b||h?15:null,t.placement=v||h?"top":"bottom"),l||d&&!h){var _=this.closest(e,function(ut){return de.hasClass(ut,"datagrid-row")});t.isError=(_?_.classList:[]).contains("rowstatus-row-error"),t.placement="right",d&&(t.wrapper=this.closest(e,function(ut){return"td"===ut.tagName.toLowerCase()}))}if(a){var j=!(!T.editorOptions||!T.editorOptions.width)&&this.setUnit(T.editorOptions.width),X=$(a).clone()[0];X.style.width=j||"".concat(e.offsetWidth,"px");var fe=X.outerHTML;""!==Fe.stripHTML(fe)&&(t.content=fe,t.extraClassList=["popover","alternate","content-tooltip"])}else if(o)t.content=o.getAttribute("title"),o.removeAttribute("title");else if(A=e.getAttribute("title")){var he=e.querySelector(".row-btn[disabled]");t.content=he?"":A,e.removeAttribute("title")}else if(p&&!b){var we=e.querySelector(".datagrid-header-text");t.content=we?Fe.stripHTML(we.textContent):""}else if(b){if(!(e.parentNode.querySelectorAll('.dropdown.is-disabled, input[type="text"][disabled], .btn-filter[disabled]').length>0)){var Ne=e.parentNode.querySelector(".is-checked");t.content=Ne?Fe.stripHTML(Ne.textContent):""}}else if(h){var le=$(e).parents("th").attr("data-column-id"),Te=e.previousElementSibling.textContent,ge=this.settings.columns[this.columnIdxById(le)].headerIconTooltip;t.content=Fe.stripHTML(ge),t.headerText=Fe.stripHTML(Te)}else t.wrapper.querySelector(".datagrid-expand-btn")?Array.prototype.filter.call(t.wrapper.children,function(ut){return!ut.matches(".datagrid-expand-btn")}).forEach(function(ut){t.content=ut.textContent}):t.content=t.wrapper.textContent,t.content=Fe.stripHTML(t.content).trim();var ce=e.getAttribute("tooltipClass");ce&&t.extraClassList.push(ce);var Be=null===(i=t.wrapper)||void 0===i?void 0:i?.querySelector("select");if(Be&&Be.selectedIndex&&Be.options[Be.selectedIndex]&&Be.options[Be.selectedIndex].innerHTML&&(t.content=xe.features.touch?"":Be.options[Be.selectedIndex].innerHTML.trim()),p&&(t.content=t.content.trim()),""!==t.content){var qe=de.hasClass(v?e.parentNode:e,"text-ellipsis"),Oe=[].slice.call(e.querySelectorAll(".icon")),ot=qe?8:0;if(Oe.forEach(function(ut){var Xe="function"==typeof ut.getBBox?ut.getBBox():ut.getBoundingClientRect();ot+=Xe.width+8}),this.settings.treeGrid){var He=function(Xe){return!!t.wrapper.querySelector(Xe)};if(He(".datagrid-tree-node")||He(".datagrid-expand-btn")){var Ae=this.closest(t.wrapper,function(ut){return de.hasClass(ut,"datagrid-row")}),We=parseInt(Ae.getAttribute("aria-level"),10);We&&(ot+=30*We)}}if(qe&&v){var yt=e.querySelector(".datagrid-header-text");t.textwidth=yt.scrollWidth+(Be?0:ot)}else t.textwidth=st.textWidth(t.content)+(Be?0:ot);if(p&&(t.textwidth=st.textWidth(t.content)),k){var Dt=k.attr("id");k.attr("data-automation-id","".concat(Dt,"-grid-tooltip")),$(this.tooltip).find(".tooltip-content").attr("data-automation-id","".concat(Dt,"-content"))}t.content=a?t.content:"<p>".concat(t.content,"</p>"),h&&(t.content='<p class="align-text-left text-strong">'.concat(e.previousElementSibling.textContent,"</p>").concat(t.content)),(A||b||h)&&(t.forced=!0)}if("function"==typeof T.tooltip){var ti,ci,_t=this.closest(e,function(ut){return de.hasClass(ut,"datagrid-row")});this.settings.treeGrid&&this.settings.treeDepth?(ti=this.actualRowIndex(_t),ci=this.settings.treeDepth[ti].node):(ti=this.dataRowIndex(_t),ci=this.rowData(ti));var di=this.fieldValue(ci,T.field);t.content=T.tooltip(ti,w,di,T,ci,this),t.textwidth=st.textWidth(t.content)+20,null!=t.content&&""!==t.content&&(t.forced=!0)}null!==(n=M)&&void 0!==n&&n?.tooltipOptions&&(M.tooltipOptions.placement&&(t.placement=M.tooltipOptions.placement),M.tooltipOptions.x&&(t.x=M.tooltipOptions.x),M.tooltipOptions.y&&(t.y=M.tooltipOptions.y))}return(e=e instanceof jQuery?e:$(e)).data("gridtooltip",t),t},showTooltip:function(e){var t=this;if(this.tooltip){var i=$(this.tooltip),n=this.tooltip.querySelector(".tooltip-content");if(n){var a;n.innerHTML=Fe.sanitizeHTML(e.content),this.tooltip.classList.remove("is-hidden","top","right","bottom","left"),this.tooltip.style.display="",this.tooltip.classList.add(e.placement||"top"),e.isError&&this.tooltip.classList.add("is-error"),e.extraClassList&&e.extraClassList.length>0&&e.extraClassList.map(function(h){return t.tooltip.classList.add(h)});var o=null===(a=e.wrapper.classList)||void 0===a?void 0:a?.contains("datagrid-header-icon");n.classList[o?"add":"remove"]("header-icon");var l="number"==typeof e.distance?e.distance:0,d={x:e.x||0,y:e.y||l,container:this.element.closest(".page-container.scrollable")||$("body"),containerOffsetX:e.wrapper.offsetLeft,containerOffsetY:e.wrapper.offsetTop,parent:$(e?.wrapper),placement:e.placement||"top",strategies:["flip","nudge"]};("left"===d.placement||"right"===d.placement)&&(d.x=l,d.y=0),i.one("afterplace.gridtooltip",function(h,p){t.handleAfterPlaceTooltip(h,i,p)}).on("click.gridtooltip",function(){t.hideTooltip()}),i.data("place")||i.place(d),i.data("place").place(d),i.data("gridtooltip",!0),$("body, .scrollable").off("scroll.gridtooltip").on("scroll.gridtooltip",function(){t.hideTooltip()})}}},handleAfterPlaceTooltip:function(e,t,i){var n=t||$("#tooltip");n[0]&&(n.data("place").setArrowPosition(e,i,n),n.triggerHandler("tooltipafterplace",[i]))},hideTooltip:function(){var e=this;this.tooltip&&(this.removeTooltipData(this.tooltip),this.tooltip.classList.add("is-hidden"),this.tooltip.classList.remove("is-error","popover","alternate","content-tooltip"),this.tooltip.style.left="-999px"),$("body, .scrollable").off("scroll.gridtooltip",function(){e.hideTooltip()})},isGridtooltip:function(){var e=!1;return this.tooltip&&(this.tooltip instanceof jQuery?this.tooltip:$(this.tooltip)).data("gridtooltip")&&(e=!0),e},removeTooltipData:function(e){(e=e instanceof jQuery?e:$(e)).data("gridtooltip")&&$.removeData(e[0],"gridtooltip")},removeTooltip:function(){var e=this;if(this.tooltip){var t=$(this.tooltip),i={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};i.str="".concat(i.th,", ").concat(i.td,", ").concat(i.rowstatus),$("body, .scrollable").off("scroll.gridtooltip"),t.off("touchend.gridtooltip"),this.element.off("mouseenter.gridtooltip mouseleave.gridtooltip click.gridtooltip longpress.gridtooltip keydown.gridtooltip",i.str),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").off("longpress.tableerrortooltip",".icon");var n=t.data("place");n&&n.destroy(),[].slice.call(this.element[0].querySelectorAll(i.str)).forEach(function(o){return e.removeTooltipData(o)}),this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip)}this.tooltip=void 0},destroy:function(){var e,t,i,n=this.element.prev(".toolbar, .contextual-toolbar");n=n.add(n.find("*"));var a=this.element.next(".pager-toolbar");a=a.add(a.find("*")),this.element.add(n).add(a).find("*").each(function(p,v){Object.values($(v).data()).forEach(function(b){"function"==typeof b?.destroy&&b.destroy()})}),null===(e=this.canvas)||void 0===e||null===(e=e?.parentNode)||void 0===e||null===(t=e?.removeChild)||void 0===t||null==(i=t.call)||i.call(t,e,this.canvas),this.canvas=null,this.removeTooltip(),$("html").off("themechanged.".concat(Ra)),this.element.find(".datagrid-img").off("error.datagrid"),this.element.add(this.element.find("*")).off("selected.gridpopupth close.gridpopupth selected.gridpopuptr close.gridpopuptr selected.gridpopupbtn close.gridpopupbtn"),this.pagerAPI&&(this.tableBody.off("page.".concat(Ra," pagesizechange.").concat(Ra)),this.pagerAPI.destroy()),this.element.off().empty().removeClass("datagrid-container");var o=this.element.prev(".toolbar");if(this.triggerDestroyCell(),this.removeToolbarOnDestroy&&this.settings.toolbar&&this.settings.toolbar.keywordFilter){var l=o.find(".searchfield"),d=l.data("searchfield"),h=l.parent().find(".close.icon");l.off("keypress.datagrid"),h.off("click.datagrid"),d&&"function"==typeof d.destroy&&d.destroy(),l.removeData("options")}return this.removeToolbarOnDestroy&&(o.data("toolbar")&&o.data("toolbar").destroy(),o.remove()),this.element.next(".pager-toolbar").remove(),$.removeData(this.element[0],Ra),this.element.off(),$(document).off("touchstart.datagrid touchend.datagrid touchcancel.datagrid click.datagrid touchmove.datagrid"),$("body").off("resize.vtable resize.datagrid resize.frozencolumns"),$("body").off("open.modal.datagrid"),$(window).off("orientationchange.datagrid"),$(window).off("resize.datagrid"),this},updated:function(e,t){var i=this.settings.paging!==e?.paging&&e?.paging&&!t;if(this.settings=H.mergeSettings(this.element,e,this.settings),!(null!=e&&e?.paging)&&this.pagerAPI&&"function"==typeof this.pagerAPI.destroy&&this.pagerAPI.destroy(),e&&e.frozenColumns&&(this.headerRow=void 0,this.element.empty(),this.firstRender()),e&&e.dataset&&(this.settings.dataset=e.dataset),e&&e.columns&&(this.settings.columns=e.columns),e&&e.toolbar&&!this.toolbar&&this.appendToolbar(),e&&e.toolbar&&this.toolbar&&this.toolbar.hasClass("datagrid-toolbar")){var n=this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)"),a=this.toolbar.data("toolbar")?this.toolbar.data("toolbar"):this.toolbar.data("toolbarFlex");a&&a.destroy(),n.remove(),this.appendToolbar()}return this.setRowHeightClass(),this.handlePaging(),this.attachPagingEvents(),this.render(null,t,i),this.renderHeader(),this}},$.fn.datagrid=function(s){return this.each(function(){var e=$.data(this,Ra);e?e.updated(s):e=$.data(this,Ra,new Oh(this,s))})};var br="formcompact",Fh={},pp="is-focused";function zh(s,e){if(!(s instanceof HTMLElement))throw new Error("Element used for `FormCompact` component must be an instance of HTMLElement");this.settings=H.mergeSettings(s,e,Fh),this.element=s,this.init()}zh.prototype={init:function(){this.form=this.element.querySelector("form"),this.inputs=H.getArrayFromList(this.element.querySelectorAll("input")),this.renderProps(),this.handleEvents()},renderProps:function(){var e=this;if(this.inputs&&this.inputs.length){var t=["disabled","readonly"];this.inputs.forEach(function(i){t.forEach(function(n){e.setState(n,i)})})}},handleEvents:function(){var e=this;$(this.form).on("focusin.".concat(br),"input",function(n){return e.handleFocusIn(n)}).on("focusout.".concat(br),"input",function(n){return e.handleFocusOut(n)});var t=["disabled","readonly"];this.inputsObserver=new MutationObserver(function(n){n.length&&n.forEach(function(a){"attributes"===a.type&&t.indexOf(a.attributeName)>-1&&e.setState(a.attributeName,a.target)})});var i={attributes:!0};this.inputs.forEach(function(n){e.inputsObserver.observe(n,i)})},handleFocusIn:function(e){de.parents(e.target,".column, .columns",!0).classList.add(pp)},handleFocusOut:function(e){de.parents(e.target,".column, .columns",!0).classList.remove(pp)},setState:function(e,t){"string"==typeof e&&t instanceof HTMLElement&&(["checkbox","radio"].indexOf(t.type)>-1||("readonly"===e&&(e="readOnly"),t.parentNode.classList[!0===t[e]?"add":"remove"]("is-".concat(e.toLowerCase()))))},updated:function(e){e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){this.inputsObserver.disconnect(),delete this.inputsObserver,$(this.form).off(["focusin.".concat(br),"focusout.".concat(br)].join(" ")),delete this.form,delete this.inputs},destroy:function(){this.teardown(),$.removeData(this.element,br)}},$.fn.formcompact=function(s){return this.each(function(){var e=$.data(this,br);e?e.updated(s):e=$.data(this,br,new zh(this,s))})};var Rn="header",gp={addScrollClass:!1,demoOptions:!0,tabs:null,toolbarSettings:void 0,useAlternate:!1,useBackButton:!0,useBreadcrumb:!1,useFlexToolbar:!1,usePopupmenu:!1,wizardTicks:null};function Jd(s,e){this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,gp),this.init()}Jd.prototype={get toolbarAPI(){if(this.toolbarElem)return this.toolbarElem.data("toolbar-flex")||this.toolbarElem.data("toolbar")},get toolbar(){return gi("toolbarAPI","toolbar"),this.toolbarAPI},get titleButton(){var s=".title > button";return this.toolbarElem&&this.toolbarElem.is(".flex-toolbar")&&(s=".toolbar-section:first-child > button"),this.element.find(s)},get hasTitleButton(){return this.titleButton.length>0},init:function(){this.setup().build().handleEvents(),this.settings.demoOptions&&this.initPageChanger()},setup:function(){return this.settings.demoOptions=this.element.attr("data-demo-options")?"true"===this.element.attr("data-demo-options"):this.settings.demoOptions,this.settings.useBackButton=this.element.attr("data-use-backbutton")?"true"===this.element.attr("data-use-backbutton"):this.settings.useBackButton,this.settings.useBreadcrumb=this.element.attr("data-use-breadcrumb")?"true"===this.element.attr("data-use-breadcrumb"):this.settings.useBreadcrumb,this.settings.useAlternate=this.element.attr("data-use-alternate")?"true"===this.element.attr("data-use-alternate"):this.settings.useAlternate,this.settings.tabs=$.isArray(this.settings.tabs)?this.settings.tabs:null,this.settings.wizardTicks=$.isArray(this.settings.wizardTicks)?this.settings.wizardTicks:null,this.titleText=this.element.find(".title > h1"),this.levelsDeep=[],this.levelsDeep.push("".concat(this.titleText.text())),this},build:function(){var e=!1,t=this.element.find(".toolbar, .flex-toolbar");if(!t.length)return this;if(t.is(".flex-toolbar")&&(e=!0),this.toolbarElem=t,this.toolbarElem[e?"toolbarflex":"toolbar"](this.settings.toolbarSettings),!this.hasTitleButton&&this.levelsDeep.length>1&&this.buildTitleButton(),this.settings.tabs&&this.settings.tabs.length&&this.buildTabs(),this.settings.wizardTicks&&this.settings.wizardTicks.length&&this.buildWizard(),this.settings.usePopupmenu&&this.buildPopupmenu(),this.settings.addScrollClass){var n=$(this.element),a=$(this.element).next(".scrollable"),o=1===a.length?a:$(window),l=this.settings.scrollThreshold?this.settings.scrollThreshold:15;o.on("scroll.header",function(){this.scrollTop>l?n.addClass("is-scrolled-down"):n.removeClass("is-scrolled-down")}),o.scrollTop()>l&&n.addClass("is-scrolled-down")}return this},personalizationColors:function(e){var t=Object.values(e).reduce(function(i,n){var a=n.id;return i[a]=a,i},{});return t},removeClasses:function(e,t){if(!e||!t)return!1;var i=e.classList;if(i)if("string"==typeof t)i.remove(t);else{if(!Array.isArray(t))throw new TypeError("Classes parameter must be a string or an array of strings.");t.forEach(function(n){return i.remove(n)})}return!0},buildTitleButton:function(){if(this.levelsDeep.length>1&&!this.hasTitleButton&&!this.titleButton.length){this.toolbarAPI.teardown();var e=$('<button class="btn-icon back-button" type="button">\n        <span class="audible">'.concat(B.translate("Drillup"),'</span>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-arrow-left"></use>\n        </svg>\n      </button>')),t=this.toolbarElem.find(".title");if(this.settings.useFlexToolbar){var i=t.prev(".toolbar-section");i.length||(i=$('<div class="toolbar-section"></div>').insertBefore(t)),e.prependTo(i)}else e.prependTo(t);this.toolbarAPI.init()}this.toolbarElem.addClass("has-title-button"),this.titleButton.find(".icon.app-header").addClass("go-back");var n=$("#application-menu").data("applicationmenu");n?n.modifyTriggers([this.titleButton],null,!0):$("#application-menu").applicationmenu({triggers:[this.titleButton]}),this.handleTitleButtonEvents()},getCurrentBreadcrumbData:function(){var e=this;function t(){var i=this.index,n=e.breadcrumbAPI.list;if(!this.current){if(0===i)return void e.reset();var a,o=n.childNodes.length-1;if(i<o)for(a=o-i;a>0;)e.drillup(),e.breadcrumbAPI.remove(o,!1,!0),a-=1,o-=1;e.breadcrumbAPI.render()}}return this.levelsDeep.map(function(i,n){var a="header-breadcrumb-".concat(i.replace(" ","-").toLowerCase());return{callback:t,content:i,current:n+1===e.levelsDeep.length,id:a}})},buildBreadcrumb:function(){var e="has-breadcrumb",t="default";this.settings.useAlternate&&(e="has-alternate-breadcrumb",t="alternate"),this.element.addClass(e),this.breadcrumb=this.element.find(".breadcrumb"),this.breadcrumb.length||(this.breadcrumb=$('<nav class="breadcrumb hidden" role="navigation"></nav>').appendTo(this.element),this.breadcrumb.breadcrumb({breadcrumbs:this.getCurrentBreadcrumbData(),style:t}),this.breadcrumbAPI=this.breadcrumb.data("breadcrumb")),this.adjustBreadcrumb()},adjustBreadcrumb:function(){this.breadcrumbAPI&&this.breadcrumbAPI.updated({breadcrumbs:this.getCurrentBreadcrumbData()})},buildTabs:function(){if(this.tabsContainer=this.element.find(".tab-container"),!this.tabsContainer.length){this.tabsContainer=$('<div class="tab-container"></div>').appendTo(this.element);var e=$('<ul class="tab-list" role="tablist"></ul>').appendTo(this.tabsContainer);$('<li class="tab"><a href="#header-tabs-home" role="tab">IDS Enterprise Controls | Patterns</a></li>').appendTo(e),$('<li class="tab"><a href="#header-tabs-level-1" role="tab">Level 1 Detail</a></li>').appendTo(e),$('<li class="tab"><a href="#header-tabs-level-2" role="tab">Level 2 Detail</a></li>').appendTo(e)}this.element.addClass(this.settings.useAlternate?"has-alternate-tabs":"has-tabs"),this.tabsContainer[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),$("#header-tabs-level-1").removeAttr("style"),$("#header-tabs-level-2").removeAttr("style"),this.tabsContainer.tabs({containerElement:"#maincontent"})},buildWizard:function(){if(this.element.addClass("has-wizard"),this.wizard=this.element.find(".wizard"),!this.wizard.length){this.wizard=$('<div class="wizard"></div>').appendTo(this.element);var e=$('<div class="wizard-header"></div>').appendTo(this.wizard),t=$('<div class="bar"></div>').appendTo(e);$('<div class="completed-range"></div>').appendTo(t),$('<a href="#" class="tick current"><span class="label">Context Apps</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">Utility Apps</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">Inbound Configuration</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">OID Mapping</span></a>').appendTo(t)}this.wizard[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.wizard.wizard()},buildPopupmenu:function(){this.toolbarAPI.teardown();var e=this.toolbarElem.children(".title");if(this.titlePopup=e.find(".btn-menu"),!this.titlePopup.length){var t=e.find("h1");t.wrap('<button id="header-menu" type="button" class="btn-menu"></button>'),this.titlePopup=t.parent(".btn-menu")}this.titlePopupMenu=this.titlePopup.next(".popupmenu"),this.titlePopupMenu.length||(this.titlePopupMenu=$('<ul class="popupmenu is-selectable"></ul>').insertAfter(this.titlePopup),$('<li class="is-checked"><a href="#">Page One Title</a></li><li><a href="#">Page Two Title</a></li><li><a href="#">Page Three Title</a></li><li class="is-disabled"><a href="#">Page Four Title</a></li><li><a href="#">Page Five Title</a></li>').appendTo(this.titlePopupMenu)),this.titlePopupMenu.addClass("is-selectable");var i=this.titlePopupMenu.children(".is-checked").first().text();i||(i=this.titlePopupMenu.children().first().text()),this.titlePopup.children("h1").text(i),this.titlePopup.button().popupmenu(),this.element.addClass("has-popupmenu-title"),this.toolbarAPI.init()},handleEvents:function(){var e=this,t=this;return this.element.on("updated.".concat(Rn),function(i,n){t.updated(n)}).on("reset.".concat(Rn),function(){t.reset()}).on("drilldown.".concat(Rn),function(i,n){t.drilldown(n)}).on("drillup.".concat(Rn),function(i,n){t.drillup(n)}),$("html").on("themechanged.".concat(Rn),function(){e.updatePageChanger()}),this.handleTitleButtonEvents(),this.titlePopup&&this.titlePopup.length&&this.titlePopup.on("selected.".concat(Rn),function(i,n){var a;a=n instanceof $?n.text():$(n.element).text(),$(this).children("h1").text(a)}),this},handleTitleButtonEvents:function(){var e=this;!this.titleButton||!this.titleButton.length||this.titleButton.bindFirst("click.".concat(Rn),function(t){e.levelsDeep.length>1&&(t.stopImmediatePropagation(),e.drillup(),t.returnValue=!1)})},initPageChanger:function(){if(this.changer=this.element.find(".page-changer"),this.changer.length){var t=this.changer.data("popupmenu").menu,i=t.find("li.personalization-colors");if(i.length>0){var n=Et.personalizationColors(),a=i.parent().hasClass("popupmenu")?"":'<li class="heading" role="presentation">Personalization</li>';Object.keys(n).forEach(function(h){return a+='<li class="is-selectable'.concat("Default"===n[h].name?" is-checked is-default":"",'"><a href="#" data-rgbcolor="').concat(n[h].value,'">').concat(n[h].name,"</a></li>"),h}),i.replaceWith(a)}this.changer.on("selected.header",function(h,p){h.preventDefault(),void 0!==p&&!(p instanceof $)&&p.element instanceof HTMLElement&&(p=$(p.element));var v=p.attr("data-theme-name"),b=p.attr("data-theme-mode");if(v||b){var w=t.find(".is-checked a[data-theme-name]").attr("data-theme-name"),T=t.find(".is-checked a[data-theme-mode]").attr("data-theme-mode");w&&T&&yn.setTheme("".concat(w,"-").concat(T))}else{var k=p.attr("data-theme");if(k)yn.setTheme(k);else if(p.parent().hasClass("is-default"))yn.setColorsToDefault();else{var M=p.attr("data-rgbcolor");yn.setColors(M)}}});var o=Et.currentTheme;if("theme-new-light"!==o.id||"theme-uplift-light"!==o.id){var l=o.id.split("-");$("body").find(".popupmenu [data-theme-name]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-name="'.concat(l[0],"-").concat(l[1],'"]')).parent().addClass("is-checked"),$("body").find(".popupmenu [data-theme-mode]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-mode="'.concat(l[2],'"]')).parent().addClass("is-checked")}if(yn.settings.colors){var d="object"===rt(yn.settings.colors)?yn.settings.colors.header:yn.settings.colors;d=d.replace("#",""),$("body").find(".popupmenu [data-rgbcolor]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-rgbcolor="#'.concat(d,'"]')).parent().addClass("is-checked")}}},updatePageChanger:function(){if(this.change&&0!==this.changer.length)for(var i=this.changer.data("popupmenu").menu.find("[data-rgbcolor]"),n=Et.personalizationColors(),a=Object.keys(n),o=0;o<i.length;o++)i[o].setAttribute("data-rgbcolor",n[a[o]].value)},drilldown:function(e){this.element.addClass("is-drilldown"),this.levelsDeep.push(e.toString()),this.titleText.text(this.levelsDeep[this.levelsDeep.length-1]),this.settings.useBackButton&&this.buildTitleButton(),this.settings.useBreadcrumb&&(this.breadcrumb&&this.breadcrumb.length?this.adjustBreadcrumb():(this.buildBreadcrumb(),this.breadcrumb.css({display:"block",height:"auto"}).removeClass("hidden")))},drillup:function(e){var t;if(this.element.removeClass("is-drilldown"),this.levelsDeep.length>1&&(this.levelsDeep.pop(),t=this.levelsDeep[this.levelsDeep.length-1]),void 0!==e&&(t=e),this.levelsDeep.length>1)return this.settings.useBreadcrumb&&this.adjustBreadcrumb(),void this.titleText.text(t);t=this.levelsDeep[0],this.settings.useBackButton&&this.removeButton(),this.settings.useBreadcrumb&&this.removeBreadcrumb(),this.settings.usePopupmenu&&this.removePopupmenu(),this.titleText.text(t),this.element.trigger("drillTop")},reset:function(){for(;this.levelsDeep.length>1;)this.levelsDeep.pop();return this.titleText.text(this.levelsDeep[0]),this.removeBreadcrumb(),this.removeTabs(),this.removeWizard(),this.removePopupmenu(),this.removeButton(),this.element.trigger("afterreset"),this},removeButton:function(){if(this.hasTitleButton)this.titleButton.find(".icon.app-header").removeClass("go-back");else if(this.titleButton&&this.titleButton.length){this.toolbarAPI.teardown();var e=$("#application-menu").data("applicationmenu");e&&e.modifyTriggers([this.titleButton],!0,!0),this.titleButton.off("click.".concat(Rn)).remove(),this.titleButton=$(),this.toolbarAPI.init()}},removeBackButton:function(){this.titleButton.length&&this.element.find(".go-back").removeClass("go-back")},removeBreadcrumb:function(){if(this.breadcrumb&&this.breadcrumb.length){var i,e=this,t=$.fn.transitionEndName();e.element.removeClass("has-breadcrumb").removeClass("has-alternate-breadcrumb"),this.breadcrumb.is(":not(:hidden)")?(this.element.one("".concat(t,".breadcrumb-header"),n),i=setTimeout(n,300)):n()}function n(){i&&(clearTimeout(i),i=null),e.element.off("".concat(t,".breadcrumb-header")),e.breadcrumbAPI.destroy(),e.breadcrumb.remove(),delete e.breadcrumbAPI,delete e.breadcrumb}},removeTabs:function(){if(this.tabsContainer&&this.tabsContainer.length){var i,e=this,t=$.fn.transitionEndName();this.element.removeClass("has-tabs").removeClass("has-alternate-tabs"),this.tabsContainer.is(":not(:hidden)")?(this.element.one("".concat(t,".tabs-header"),n),i=setTimeout(n,300)):n()}function n(){i&&(clearTimeout(i),i=null),e.element.off("".concat(t,".tabs-header")),e.tabsContainer.data("tabs").destroy(),e.tabsContainer.remove(),e.tabsContainer=null,$("#header-tabs-level-1").css("display","none"),$("#header-tabs-level-2").css("display","none")}},removeWizard:function(){if(this.wizard&&this.wizard.length){var i,e=this,t=$.fn.transitionEndName();this.element.removeClass("has-wizard"),this.wizard.is(":not(:hidden)")?(this.element.one("".concat(t,".wizard-header"),n),i=setTimeout(n,300)):n()}function n(){i&&(clearTimeout(i),i=null),e.element.off("".concat(t,".wizard-header")),e.wizard.data("wizard").destroy(),e.wizard.remove(),e.wizard=null}},removePopupmenu:function(){!this.titlePopup||!this.titlePopup.length||(this.toolbarAPI.teardown(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("popupmenu").destroy(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("button").destroy(),this.titlePopupMenu.remove(),this.titlePopup.children("h1").detach().insertBefore(this.titlePopup),this.titlePopup.remove(),this.titlePopup=void 0,this.titlePopupMenu=void 0,this.element.removeClass("has-popupmenu-title"),this.toolbarAPI.init())},unbind:function(){return this.titleButton&&this.titleButton.length&&this.titleButton.off("click.".concat(Rn)),this.titlePopup&&this.titlePopup.length&&this.titlePopup.off("updated.".concat(Rn)),this.element.off(["updated.".concat(Rn),"reset.".concat(Rn),"drilldown.".concat(Rn),"drillup.".concat(Rn)].join(" ")),$("html").off("themechanged.".concat(Rn)),this},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.reset().unbind().init()},destroy:function(){if(this.unbind(),this.hasTitleButton&&this.toolbarElem.removeClass("has-title-button"),this.changer){var e=this.changer.data("popupmenu");e&&"function"==typeof e.destroy&&e.destroy(),this.changer.remove(),delete this.changer}$.removeData(this.element[0],Rn)}},$.fn.header=function(s){return this.each(function(){var e=$.data(this,Rn);e?e.updated(s):e=$.data(this,Rn,new Jd(this,s))})};var Hh="multitabs",av={tabContainers:[],sortable:!1},Bc=["primary","secondary","tertiary"];function Us(s,e){return this.element=$(s),this.settings=H.mergeSettings(this.element[0],e,av),this.tabContainers={},this.init()}Us.prototype={init:function(){var t,e=this;t=this.settings.tabContainers instanceof Array&&this.settings.tabContainers.length?this.settings.tabContainers:this.element.find(".tab-container").filter(function(){return!$(this).parents(".tab-panel-container").length}),$(t).each(function(){e.setupTabsInstance($(this))})},setupTabsInstance:function(e){if(e instanceof $){var t=this,i=!1;if(Bc.forEach(function(a){if(!i&&!Object.prototype.hasOwnProperty.call(t.tabContainers,a)){var o=e.data("tabs");o||(e.tabs(),o=e.data("tabs")),o.settings.sortable=t.settings.sortable,o.multitabsID=a,o.createSortable(),e.attr("data-multitabs",a),t.tabContainers[a]=e,i=!0}}),t.settings.sortable&&$(e.siblings(".tab-panel-container")).prepend('<div class="tab-overlay"><div class="overlay-left"></div><div class="overlay-right"></div></div>'),!i)throw new Error("all tab-container slots in MultiTabs component are taken, so a new tabs container was not invoked and stored")}},add:function(e,t,i,n){return(e=this.checkForValidTabContainer(e)).data("tabs").add(t,i,n)},remove:function(e,t,i){return(e=this.checkForValidTabContainer(e)).data("tabs").remove(t,i)},move:function(e,t,i){if(!e||!t)throw new Error("can't move a tab without both a tabId and a targetTabContainerName");var n,a,l;if(this.getFilterableTabContainers().each(function(){var d=$(this).data("tabs"),h=d.getTab(null,e);null!==h&&(l=d.multitabsID,n=h.clone(),a=d.getPanel(e).children())}),!n)throw new Error('No tab markup was found in any Multitabs container for href "'.concat(e,'"'));this.remove(l,e),this.add(t,e,{name:n.children("a").text().trim(),content:a,doActivate:i})},getTabContainer:function(e){var i,t=this;return Bc.forEach(function(n){i||!t.tabContainers[n]||e===n&&(i=t.tabContainers[n])}),i},getFilterableTabContainers:function(){var e=$();return this.performOnAllContainers(function(t,i){e=e.add(i)}),e},checkForValidTabContainer:function(e){if(!e)throw new Error("Need to have a tabContainer defined to hide a tabs instance");if("string"==typeof e&&(e=this.getTabContainer(e)),!(e instanceof $&&e.length))throw new Error("No matching tabContainer could be found and hidden.");return e},performOnAllContainers:function(e,t){var i=this;Array.isArray(t)||(t=t?[t]:[]),Bc.forEach(function(n){var a=i.tabContainers[n],o=[];a&&(o.push(n,a),o=o.concat(t),e.apply(this,o))})},adjustModuleTabContainers:function(){this.performOnAllContainers(function(e,t){var i=t.data("tabs");i.isModuleTabs()&&i.adjustModuleTabs()})},hideTabsInstance:function(e){(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").addClass("hidden"),this.adjustModuleTabContainers()},showTabsInstance:function(e){(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").removeClass("hidden"),this.adjustModuleTabContainers()},destroyTabsInstance:function(e){if(e instanceof $&&e.data("tabs")&&"function"==typeof e.data("tabs").destroy){var t=this,i=!1;if(Bc.forEach(function(n){if(!i&&t.tabContainers[n].is(e)){var a=e.data("tabs");delete a.multitabsID,e.removeAttr("data-multitabs"),a.destroy(),delete t.tabContainers[n],i=!0}}),!i)throw new Error("could not destroy a tabContainer because it was not associated with this Multitabs instance")}},isHidden:function(e){return(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").is(".hidden")},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings))},teardown:function(){var e=this;return Object.keys(this.tabContainers).forEach(function(i){e.destroyTabsInstance(i)}),this},destroy:function(){this.teardown(),$.removeData(this.element[0],Hh)}},$.fn.multitabs=function(s){return this.each(function(){var e=$.data(this,Hh);e?e.updated(s):e=$.data(this,Hh,new Us(this,s))})};var ss="listdetail",vp={backElement:void 0,edgeBleed:!1,edgeBleedBreakpoint:"phone",listElement:void 0,listCloseElement:void 0,toggleElement:void 0,detailElement:void 0},rv=["accordion","listview"];function mp(s){var t;if(s instanceof HTMLElement)return Object.keys($(s).data()).forEach(function(i){rv.indexOf(i)>-1&&(t=i)}),t}function Rc(s,e){s instanceof HTMLElement&&(this.element=s,this.settings=H.mergeSettings(this.element,e,vp),this.init())}Rc.prototype={init:function(){var e=this;if(this.setInternalElementReference("listElement",function(o){return function bp(s){return s instanceof HTMLElement&&void 0!==mp(s)}(e.settings[o])}),this.setInternalElementReference("detailElement"),this.setInternalElementReference("backElement"),this.setInternalElementReference("listCloseElement"),this.setInternalElementReference("toggleElement"),this.showDetail=!1,this.element.classList.contains("show-detail")&&(this.showDetail=!0),this.showSidebar=!0,this.listElement){this.listComponentType=mp(this.listElement);var t=this.getListAPI();t&&(t.isControllingDetails=!0)}if(this.backElement){this.backElement.classList.add("list-detail-back-button");var i=this.backElement.querySelector(".icon");i&&(this.backElementIcon=i),this.listContainsBackElement&&(this.listContainsBackElement=this.listElement.contains(this.backElement)),this.detailContainsBackElement=this.detailElement.contains(this.backElement)}if(this.toggleElement){this.mainElement=this.element.querySelector(".main"),this.sidebarElement=this.element.querySelector(".sidebar"),this.toggleElement.classList.add("list-detail-toggle-button");var n=this.toggleElement.querySelector(".icon");n&&(this.toggleElementIcon=n,this.toggleElementIcon.classList.add("go-back"))}var a=this.element.querySelectorAll(".list-detail");a&&(this.childrenListDetailElements=a),this.settings.edgeBleed?(this.edgeBleed=!0,this.element.classList.add("bleeding-edge__".concat(this.settings.edgeBleedBreakpoint))):(this.edgeBleed=!1,this.element.classList.remove("bleeding-edge__phone","bleeding-edge__tablet")),this.setBreakpointChecks(),this.handleEvents()},setBreakpointChecks:function(){this.abovePhoneBreakpoint=Jt.isAbove("phone-to-tablet"),this.aboveTabletBreakpoint=Jt.isAbove("desktop")},setInternalElementReference:function(e,t){if("string"==typeof this.settings[e]&&this.settings[e].length){var i=document.querySelector(this.settings[e]);i&&(this.settings[e]=i)}t="function"!=typeof t||t(e),this.settings[e]instanceof HTMLElement&&t&&(this[e]=this.settings[e])},handleEvents:function(){var e=this;$(this.element).on("drilldown.".concat(ss),function(t,i){t.stopPropagation(),e.drilldown(i,t.target)}).on("drillup.".concat(ss),function(t){t.stopPropagation(),e.drillup()}),this.backElement&&this.backElement.addEventListener("click",this.handleBackClick.bind(this)),this.toggleElement&&this.toggleElement.addEventListener("click",this.handleToggleClick.bind(this)),this.listCloseElement&&this.listCloseElement.addEventListener("click",this.handleClose.bind(this)),$("body").off("resize.".concat(ss)).on("resize.".concat(ss),function(){e.handleResize()})},drilldown:function(e,t){this.showDetail||t&&t.innerHTML!==this.listElement.innerHTML||(this.showDetail=!0,this.element.classList.add("show-detail"),this.addBackElementIconContext(),this.isAboveBreakpoint()||this.getListAPI().disable(),this.detailArea&&$(this.detailElement).triggerHandler("activatescreen",[e]))},drillup:function(){this.showDetail&&(this.removeBackElementIconContext(),this.getListAPI().enable(),this.showDetail=!1,this.element.classList.remove("show-detail"))},addBackElementIconContext:function(){this.showDetail&&this.backElementIcon&&!this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.add("go-back")},removeBackElementIconContext:function(){this.backElementIcon&&this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.remove("go-back")},toggleSidebar:function(e){e?(this.sidebarElement.classList.add("hidden"),this.mainElement.style.width="100%",this.toggleElementIcon.classList.remove("go-back")):(this.sidebarElement.classList.remove("hidden"),this.mainElement.style.width="",this.toggleElementIcon.classList.add("go-back")),this.showSidebar=!e},handleBackClick:function(e){function t(){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}if(!this.showDetail){if(this.edgeBleed){var i=this.getCurrentSelectedListItem();if(i)return this.drilldown(i),t(),!1}return!0}return this.drillup(),this.childrenListDetailElements&&this.childrenListDetailElements.forEach(function(n){var a=$(n).data(ss);a&&"function"==typeof a.drillup&&a.drillup()}),t(),!1},handleToggleClick:function(){this.toggleSidebar(this.showSidebar)},handleClose:function(){if(!this.showDetail){var e=this.getCurrentSelectedListItem();this.drilldown(e)}},handleResize:function(){this.setBreakpointChecks();var e=this.getListAPI();this.isAboveBreakpoint()?this.edgeBleed&&!this.showDetail&&this.listElement.classList.contains("is-disabled")&&e.enable():this.edgeBleed&&this.showDetail&&!this.listElement.classList.contains("is-disabled")&&e.disable(),this.isAboveBreakpoint()?this.removeBackElementIconContext():(this.addBackElementIconContext(),this.toggleElement&&this.toggleSidebar(!1)),Jt.isAbove("desktop")&&void 0!==e&&e.enable()},isAboveBreakpoint:function(){return this["above".concat(st.capitalize(this.settings.edgeBleedBreakpoint),"Breakpoint")]},getListAPI:function(){if(this.listElement)return $(this.listElement).data(this.listComponentType)},getCurrentSelectedListItem:function(){return this.listElement?(e=this.getListAPI().getSelected(),de.convertToHTMLElement(e)):"";var e},updated:function(e){e&&(this.settings=H.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init()},teardown:function(){if($("body").off("resize.".concat(ss)),$(this.element).off("drilldown.".concat(ss," drillup.").concat(ss)),this.backElement&&this.backElement.removeEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.removeEventListener("click",this.handleClose.bind(this)),this.listComponentType){var e=this.getListAPI();e&&delete e.isControllingDetails}delete this.listElement,delete this.detailElement,delete this.backElement,delete this.backElementIcon,delete this.mainElement,delete this.sidebarElement,delete this.toggleElement,delete this.toggleElementIcon,delete this.edgeBleed,delete this.listContainsBackElement,delete this.detailContainsBackElement,delete this.childrenListDetailElements,delete this.showDetail,delete this.showSidebar},destroy:function(){this.teardown(),$.removeData(this.element,ss)}},$.fn.listdetail=function(s){return this.each(function(){var e=$.data(this,ss);e?e.updated(s):(e=$.data(this,ss,new Rc(this,s))).destroy=function(){this.teardown(),$.removeData(this.element,ss),$.removeData(this.element,"options")}})};var _h="stepprocess",yp={linearProgression:!1,folderIconOpen:"caret-up",folderIconClosed:"caret-down",stepList:"#step-list",stepLi:".js-step",stepLink:".js-step-link",stepFolder:".js-step-folder",btnPrev:".js-step-link-prev",btnNext:".js-step-link-next",btnSaveClose:".js-btn-save-changes",beforeSelectStep:null};function qh(s,e){this.settings=H.mergeSettings(s,e,yp),this.element=$(s),this.init(),Ps("Stepprocess")}qh.prototype={init:function(){this.stepListJq=$(this.settings.stepList),this.initStepprocess(),this.handleKeys(),this.setupEvents(),this.focusFirst()},initStepprocess:function(){for(var e=this.stepListJq.find(this.settings.stepLi),t=0,i=e.length;t<i;t++)this.decorateNode(e[t]);var a=$("".concat(this.settings.stepLi,".is-selected")).find(this.settings.stepLink);this.selectStep(a)},decorateNode:function(e){var i=$(e),n=i.children(this.settings.stepLink),a=i.children(this.settings.stepFolder),o=n.hasClass("is-disabled"),l=a.hasClass("is-open");if(o&&n.attr("aria-disabled","true"),a.length){if(i.addClass("folder"),a.attr("role","group"),o&&(a.addClass("disabled"),l))for(var d=a.children(),h=0,p=d.length;h<p;h++)$(d[h]).find(this.settings.stepLink).addClass("is-disabled").attr("aria-disabled","true");n.attr("aria-expanded",l)}var v=n.parentsUntil(this.stepListJq,"ul").length-1,b=i.index(),w=i.siblings().addBack().length;n.attr({role:"stepitem",tabindex:"-1","aria-selected":"false","aria-level":v+1,"aria-posinset":b+1,"aria-setsize":w,"aria-disabled":o}).addClass("hide-focus").hideFocus()},focusFirst:function(){this.stepListJq.find("".concat(this.settings.stepLi,":first")).attr("tabindex","0")},folderClose:function(e){var t=this,i=$(e),n=i.children(this.settings.stepLink),a=i.children(this.settings.stepFolder),o=n.closest(".folder").removeClass("is-open").end().find("svg.icon-tree");this.setIcon(o,this.settings.folderIconClosed),this.isAnimating=!0,a.one("animateclosedcomplete",function(){a.removeClass("is-open"),t.isAnimating=!1}).animateClosed(),n.attr("aria-expanded","false")},folderOpen:function(e){var t=this,i=$(e);if(!this.isOpen(i)){var n=i.children(this.settings.stepLink),a=i.children(this.settings.stepFolder);i.addClass("is-open"),n.attr("aria-expanded","true");var o=n.find("svg.icon-tree");this.setIcon(o,this.settings.folderIconOpen),this.isAnimating=!0,a.one("animateopencomplete",function(){t.isAnimating=!1}).addClass("is-open").css("height",0).animateOpen()}},folderToggle:function(e){var t=e.closest(this.settings.stepLi);if(this.isFolder(t)){var i=t.children(this.settings.stepFolder);this.isOpen(i)?this.folderClose(t):this.folderOpen(t)}},getSelectedStep:function(){return $("".concat(this.settings.stepLi,".is-selected"),this.stepListJq)},getNextNode:function(e){var t=this.settings,i=e.parent().next().find("".concat(t.stepLink,":first"));if(e.next().is(t.stepFolder)&&e.next().hasClass("is-open")&&(i=e.next().find("".concat(t.stepLink,":first"))),i.hasClass("is-disabled")&&(i=this.getNextNode(i)),0===i.length)for(var n=0,o=e;n<2&&!(i=(o=o.parent().closest(".folder")).next().find("".concat(t.stepLink,":first"))).length;n++);return i},getNextStep:function(e){var t=e.children(this.settings.stepLink),i=e.next(this.settings.stepFolder),n=this.getNextNode(t),a=n.next(this.settings.stepFolder),o=null,l=null;return(o=i.length?(l=i).children().length?l.find(this.settings.stepLink).first():n:a.length&&(l=a).children().length?l.find(this.settings.stepLink).first():n).hasClass("is-disabled")&&(o=this.getNextStep(o.parent())),o},getPreviousNode:function(e){var t=this.settings,i=e.parent().prev().find("".concat(t.stepLink,":first")),n=i.closest(t.stepLi);return n.is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(i=n.find("ul.is-open ".concat(t.stepLink,":last"))),i.hasClass("is-disabled")&&this.getPreviousNode(i),0===i.length&&(i=e.closest(t.stepFolder).prev(t.stepLink)),i},getPreviousStep:function(e){var t=this.settings,i=e.children(t.stepLink),n=this.getPreviousNode(i),a=n.closest(t.stepLi),o=n;if(this.isFolder(a))if(this.isOpen(a))o=this.getPreviousNode(n);else{var l=a.children(t.stepFolder);l.children().length&&(o=l.find(t.stepLink).last())}return o.hasClass("is-disabled")&&(o=this.getPreviousStep(o.parent())),o},goToNextStep:function(){var e=this,t=this.getSelectedStep(),i=e.getNextStep(t);if(i.length)e.selectStep(i,"next");else if("function"==typeof e.settings.beforeSelectStep){var a=e.settings.beforeSelectStep({isStepping:"next"});a.done&&"function"==typeof a.done?a.done(function(o,l){o&&l&&e.selectStepFinish(l)}):a&&e.selectStepFinish(i)}},goToPreviousStep:function(){var e=this.getSelectedStep(),t=this.getPreviousStep(e);t.length&&this.selectStep(t,"prev")},handleKeys:function(){var e=this,t=this.settings;this.stepListJq.on("focus.stepprocess",t.stepLink,function(){var i=$(this);if(0===parseInt(i.attr("aria-level"),10)&&1===parseInt(i.attr("aria-posinset"),10)&&i.hasClass("is-disabled")){var n=$.Event("keydown.stepprocess");return n.keyCode=40,void i.trigger(n)}}),this.stepListJq.on("keydown.stepprocess",t.stepLink,function(i){var o,l,n=i.charCode||i.keyCode,a=$(this);if(!e.isAnimating){if(40===n){var d=e.getNextNode(a);e.setFocus(d)}if(38===n){var h=e.getPreviousNode(a);e.setFocus(h)}if(32===i.keyCode&&a.trigger("click.stepprocess"),37===n)return B.isRTL()?a.next().hasClass("is-open")?(l=a.next().find("".concat(t.stepLink,":first")),e.setFocus(l)):e.folderToggle(a):a.next().hasClass("is-open")?e.folderToggle(a):(l=a.closest(".folder").find("".concat(t.stepLink,":first")),e.setFocus(l)),i.stopPropagation(),!1;if(39===n)return B.isRTL()?a.next().hasClass("is-open")?e.folderToggle(a):(o=a.closest(".folder").find("".concat(t.stepLink,":first")),e.setFocus(o)):a.next().hasClass("is-open")?(o=a.next().find("".concat(t.stepLink,":first")),e.setFocus(o)):(e.folderToggle(a),e.setFocus(a)),i.stopPropagation(),!1;36===n&&(o=e.stepListJq.find("".concat(t.stepLink,":first:visible")),e.setFocus(o)),35===n&&(o=e.stepListJq.find("".concat(t.stepLink,":last:visible")),e.setFocus(o))}}),this.stepListJq.on("keypress.stepprocess",t.stepLink,function(i){var n=i.charCode||i.keyCode,a=$(this);if(n>=37&&n<=40||32===n)return i.stopPropagation(),!1;0!==i.which&&a.closest(t.stepLi).nextAll().find(".js-step-link:visible").each(function(){var o=$(this);if(o.text().substr(0,1).toLowerCase()===String.fromCharCode(i.which).toLowerCase())return e.setFocus(o),!1})})},isFolder:function(e){return $(e).hasClass("folder")},isInFolder:function(e){return $(e).closest(this.settings.stepFolder,this.stepListJq).length},isOpen:function(e){return $(e).hasClass("is-open")},setFocus:function(e){e.focus()},setIcon:function(e,t){var i=t.replace(/icon-|hide-focus|\s?/gi,"");e.changeIcon(i)},selectStep:function(e,t){var n,i=this;void 0===t&&(t="none"),"function"==typeof i.settings.beforeSelectStep?(n=i.settings.beforeSelectStep({stepLink:e,isStepping:t})).done&&"function"==typeof n.done?n.done(function(o,l){o&&(l&&(e=l),i.selectStepFinish(e,t))}):n&&i.selectStepFinish(e,t):i.selectStepFinish(e,t)},selectStepFinish:function(e,t){var i=this,n=$(this.settings.stepLink,this.stepListJq),a=e.closest(this.settings.stepLi);if(this.isFolder(a)||(n.attr({tabindex:"-1","aria-selected":"false"}).parent().removeClass("is-selected"),e.attr({tabindex:"0","aria-selected":"true"}),a.addClass("is-selected")),this.isFolder(a))"none"===t?this.folderToggle(a):this.folderOpen(a);else{var o=a.closest(this.settings.stepFolder,this.stepListJq);o.length&&this.folderOpen(o.closest(this.settings.stepLi)),this.showStepPanel(e.attr("href"))}e.focus(),setTimeout(function(){i.element.triggerHandler("selected",e)},0)},unSelectedNode:function(e){var t=$(this.settings.stepLink,this.stepListJq),i=$(e),n=i.children(this.settings.stepLink);t.attr("tabindex","-1"),n.attr("tabindex","0"),i.removeClass("is-selected"),n.attr("aria-selected","false")},setupEvents:function(){var e=this,t=this,i=this.settings;this.stepListJq.on("updated.stepprocess",function(){e.initStepprocess()}).on("click.stepprocess","".concat(i.stepLink,":not(.is-clone)"),function(n){if(n.preventDefault(),!i.linearProgression){var a=$(this);a.is(".is-disabled, .is-loading")||(t.selectStep(a),n.stopPropagation())}}),$(i.btnPrev).on("click",function(n){n.preventDefault(),e.goToPreviousStep.call(t)}),$(i.btnNext).on("click",function(n){n.preventDefault(),e.goToNextStep.call(t)}),$(i.contentScroll).scrollaction({scrollActionTarget:".main"}),$(i.stepListScroll).scrollaction({scrollActionTarget:".sidebar"}),$(".js-toggle-sidebar").click(function(n){n.preventDefault(),e.element.toggleClass("tablet-hide-steps").toggleClass("phone-hide-steps")})},showStepPanel:function(e){$(".step-panel-active").removeClass("step-panel-active"),$(e).addClass("step-panel-active"),this.element.addClass("phone-hide-steps")},unbind:function(){return this.stepListJq.off("updated.stepprocess click.stepprocess focus.stepprocess keydown.stepprocess keypress.stepprocess").empty(),this},updated:function(e){return typeof e<"u"&&(this.settings=H.mergeSettings(this.element,e,yp)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],_h)}},$.fn.stepprocess=function(s){return this.each(function(){var e=$.data(this,_h);e?e.updated(s):e=$.data(this,_h,new qh(this,s))})};var ov={locale:"en-US",language:null},Wh=".no-init, [data-init]";function Qr(s,e,t){return $(s)[e](t)}function wn(s,e){var t=s.find(e).not(Wh);return s.filter(e).length&&(t=t.add(s)),t}var wp=[["texttranslations",'[data-translate="text"]',function(s,e,t){wn(s,t).each(function(i,n){var a=$(n);a.attr("data-translate-key",a.text()),a.text(B.translate(a.text(),!0))})}],["texttranslations",'[data-translate="value"]',function(s,e,t){wn(s,t).each(function(i,n){var a=$(n);a.attr("data-translate-key",a.attr("value")),a.attr("value",B.translate(a.attr("value"),!0))})}],["texttranslations",'[data-translate="placeholder"]',function(s,e,t){wn(s,t).each(function(i,n){var a=$(n);a.attr("data-translate-key",a.attr("placeholder")),a.attr("placeholder",B.translate(a.attr("placeholder"),!0))})}],["applicationmenu","#application-menu",function(s,e,t){wn(s,t).each(function(i,n){$(n).applicationmenu({triggers:s.find(".application-menu-trigger")})})}],["modulenav",".module-nav",function(s,e,t){wn(s,t).each(function(i,n){$(n).modulenav()})}],["modulenavsettings",".module-nav-settings-btn",function(s,e,t){wn(s,t).each(function(i,n){$(n).modulenavsettings()})}],["modulenavswitcher",".module-nav-switcher",function(s,e,t){wn(s,t).each(function(i,n){$(n).modulenavswitcher()})}],["personalize",null,function(){$("html").personalize()}],["hyperlink"],["icon"],["radio",".radio-section input:radio.handle",function(s,e,t){wn(s,t).change(function(){if(this.checked){var i=$(this).closest(".option"),n=i.siblings(),a='button, select, input[type="text"]';$(a,i).removeAttr("disabled"),$(a,n).attr("disabled","disabled")}})}],["splitter"],["tabs",".tab-container:not(.vertical)"],["verticaltabs",".tab-container.vertical"],["multitabs",".multitabs-container"],["dropdown","select.dropdown:not(.multiselect)"],["dropdown","select.dropdown-xs:not(.multiselect)"],["dropdown","select.dropdown-sm:not(.multiselect)"],["dropdown","select.dropdown-lg:not(.multiselect)"],["modal"],["revealText","input.input-password-reveal"],["slider",'input[type="range"], .slider'],["editor"],["tooltip","button[title], span[title], .hyperlink[title], .icon[title], input[title]"],["tree"],["rating"],["link"],["listbuilder"],["compositeform",".composite-form"],["progress",".progress-bar"],["mask","input[data-mask], .new-mask"],["autocomplete",".autocomplete:not([data-init])"],["cards",".card:not([data-init])"],["multiselect","select[multiple]:not(.dropdown), .multiselect:not([data-init])"],["button",[".btn",".btn-toggle",".btn-secondary",".btn-primary",".btn-modal-primary",".btn-tertiary",".btn-icon",".btn-actions",".btn-menu",".btn-split",".btn-secondary-border"].join(", "),function(s,e,t){wn(s,t).each(function(i,n){$(n).parents(".modal").length||$(n).button()})}],["hideFocus","a.hide-focus, a.tick, .checkbox, .radio, .switch"],["circlepager"],["clearable",['[data-clearable="true"]'].join(", "),function(s,e,t){wn(s,t).each(function(i,n){var a=$(n).attr("data-tabbable");void 0===a?$(n).clearable({tabbable:!0}):$(n).clearable({tabbable:"true"===a})})}],["textarea","textarea"],["spinbox"],["arrange"],["swaplist"],["colorpicker"],["datepicker"],["timepicker"],["tag"],["busyindicator",".busy, .busy-xs, .busy-sm"],["header"],["fileupload",'input.fileupload:not(.fileupload-background-transparent):not([type="text"])'],["fileuploadadvanced",".fileupload-advanced"],["fieldfilter",".field-filter"],["fieldoptions",".field-options"],["about"],["contextualactionpanel",".contextual-action-panel-trigger"],["expandablearea",".expandable-area"],["signin"],["homepage"],["lookup",".lookup:not([data-init])"],["wizard"],["popdown","[data-popdown]"],["stepchart",".step-chart"],["calendar",".calendar"],["calendartoolbar",".calendar-toolbar"],["monthview",".monthview"],["weekview",".week-view"],["listview"],["trackdirty",'[data-trackdirty="true"]'],["virtualscroll",".virtual-scroll"],["popupmenu","[data-popupmenu]:not(.btn-actions, .btn-filter, .btn-menu)",function(s,e,t){wn(s,t).each(function(i,n){var a=$(n),o=$.extend({},H.parseOptions(a)),l=a.attr("data-popupmenu");l&&(o.menuId=l),Qr(a,e,o)})}],["popupmenu",".btn-actions, .btn-filter, .btn-menu, .module-nav-settings-btn",function(s,e,t){wn(s,t).each(function(i,n){var a=$(n);a.parents(".toolbar, .flex-toolbar").length>0||Qr(a,e)})}],["popover","[data-popover]",function(s,e,t){wn(s,t).each(function(){var i=H.parseOptions(this),n=$(this),a=n.attr("data-trigger"),o=n.attr("data-title"),l=n.attr("data-placement");$.isEmptyObject(i)?n.popover({content:$("#".concat(n.attr("data-popover"))),popover:!0,trigger:a||"click",title:o||void 0,placement:l||"right",extraClass:i.extraClass||void 0}):n.popover({content:$(i.content),popover:!0,trigger:i.trigger||"click",title:i.title||void 0,placement:i.placement||"right",extraClass:i.extraClass||void 0})})}],["searchfield",".searchfield",function(s,e,t){var i=wn(s,t),n=i.filter(function(){return $(this).parents(".toolbar").length});(i=i.not(n)).each(function(){Qr(this,"searchfield")})}],["toolbar",".toolbar",function(s,e,t){wn(s,t).each(function(i,n){var a=$(n);a.parents(".header, .contextual-action-panel .modal-header").length&&!s.is(".toolbar")||Qr(a,"toolbar")})}],["toolbarflex",".flex-toolbar"],["accordion",".accordion",function(s,e,t){wn(s,t).each(function(i,n){var a=$(n);a.parents(".application-menu").length||Qr(a,"accordion")})}],["taglist",".tag-list"],["breadcrumb",".breadcrumb"],["swipeaction",".swipe-action"],["formcompact",".form-compact-container",function(s,e,t){wn(s,t).each(function(i,n){Qr($(n),"formcompact")})}],["listdetail",".list-detail",function(s,e,t){wn(s,t).each(function(i,n){Qr($(n),"listdetail")})}],["breadcrumblabels",".breadcrumb ol",function(s,e,t){wn(s,t).attr("aria-label",B.translate("Breadcrumb"))}],["validate","[data-validate]",function(s,e,t){wn(s,t).closest("form, body").validate()}],["validate",'form[data-validate-on="submit"]']];function Zd(s,e,t,i){if($.fn[e]||"texttranslations"===e){if(typeof t>"u"&&(t=".".concat(e)),"function"==typeof i)return void i(s,e,t);wn(s,t).each(function(){var n=$(this);n.is(Wh)||n.parents(Wh).length||Qr(this,e)})}}function Vh(s,e){var t=e;"string"==typeof e&&(t={locale:e}),this.element=$(s),B.currentLocale&&B.currentLocale.name&&!e&&(t={locale:B.currentLocale.name}),B.currentLanguage&&B.currentLanguage.name&&B.currentLocale.name.substr(0,2)!==B.currentLanguage.name&&!e&&(t.language=B.currentLanguage.name),this.settings=H.mergeSettings(this.element[0],t,ov),this.init()}Vh.prototype={init:function(){var e=this,t=this;return B.set(this.settings.locale).done(function(){e.settings.language?B.setLanguage(e.settings.language).done(function(){t.initAll()}):t.initAll()}),this},initAll:function(){return this.element.each(function(){for(var t=0;t<wp.length;t++)Zd.apply(void 0,[$(this)].concat(Mi(wp[t])))}),this.element.triggerHandler("initialized",{locale:B.currentLocale}),$.fn.validate&&this.element.validate(),this}},$.fn.initialize=function(s){return this.each(function(){return new Vh(this,s)})};var Aa="longpress",lv={delay:400,mouseEvents:!1};function eu(s){return this.settings=H.mergeSettings(this.element,s,lv),this.init()}eu.prototype={timer:null,init:function(){var e=this,t=this.getInputEventNames(),i=this;$(document).on("".concat(t.mousedown,".").concat(Aa),function(n){var a=n.target;e.timer=new Li({id:"".concat(Aa,"-timer"),duration:_n.convertDelayToFPS(e.settings.delay),timeoutCallback:function(){i.fire(a,n)}}),_i.register(e.timer)}),$(document).on(["".concat(t.mouseup,".").concat(Aa),"".concat(t.mouseout,".").concat(Aa),"".concat(t.mousemove,".").concat(Aa)].join(" "),function(){e.killTimer()})},fire:function(e,t){$(e).trigger("".concat(Aa),[t])},killTimer:function(){this.timer&&(this.timer.destroy(!0),this.timer=null)},getInputEventNames:function(){var i=xe.features.touch||!this.settings.mouseEvents;return{mousedown:i?"touchstart":"mousedown",mouseout:i?"touchcancel":"mouseout",mouseup:i?"touchend":"mouseup",mousemove:i?"touchmove":"mousemove"}},updated:function(e){e&&(this.settings=H.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){var e=this.getInputEventNames();this.killTimer(),$(document).off(["".concat(e.mousedown,".").concat(Aa),"".concat(e.mouseup,".").concat(Aa),"".concat(e.mouseout,".").concat(Aa),"".concat(e.mousemove,".").concat(Aa)].join(" "))}};var cv=new eu,dv=Object.freeze({__proto__:null,About:un,Accordion:Xi,ActionSheet:Wn,ApplicationMenu:pa,Autocomplete:qr,Bar:es,Blockgrid:yc,Breadcrumb:Wr,Bullet:ke,BusyIndicator:xo,Button:mo,ButtonSet:dr,Calendar:Gu,CalendarToolbar:Do,Cards:To,ColorPicker:An,Column:Un,CompletionChart:Ue,CompositeForm:Tc,ContextualActionPanel:Dd,Datagrid:Oh,DatePicker:xl,Drag:Br,Dropdown:fl,EmptyMessage:Rt,ExpandableArea:_r,FontPicker:Nd,FontPickerStyle:Wi,FormCompact:zh,Header:Jd,Hyperlink:hc,Icon:go,Line:It,Link:ah,ListBuilder:lh,ListDetail:Rc,ListFilter:yo,ListView:sh,Lookup:Rh,MaskInput:ze,Message:Po,Modal:dh,ModuleNav:hh,ModuleNavSettings:Ml,ModuleNavSwitcher:Ic,MonthView:ml,MultiSelect:El,MultiTabs:Us,Notification:Il,Pager:Wd,Pie:ws,Popdown:vh,PopupMenu:Mt,Radar:Ur,SearchField:vc,Slider:yh,Sparkline:pt,Spinbox:Ch,Splitter:xh,StepChart:Eh,Stepprocess:qh,SwipeAction:Sh,Tabs:Dh,Tag:Ao,TagList:xd,Textarea:Mh,TimePicker:wl,Tmpl:hn,Toast:Qu,Toolbar:Rd,ToolbarFlex:kd,Tooltip:rl,Tree:Lh,Treemap:Ph,Validator:Io,VirtualScroll:Td,WeekView:vr,Wizard:Nh});return F.DOM=de,F.Editors=Nc,F.Formatters=Yi,F.GroupBy=aa,F.HideFocus=cn,F.Initialize=Vh,F.Locale=B,F.Place=Or,F.RenderLoopItem=Li,F.Validation=Ts,F.base=Ja,F.breakpoints=Jt,F.colors=xt,F.components=dv,F.debug=ro,F.defer=Jo,F.env=xe,F.excel=Gn,F.getColorStyleSheet=function Nr(s){return yn.getColorStyleSheet(s)},F.keyboard=Ql,F.longPress=cv,F.masks=bt,F.modalManager=La,F.notificationManager=Bs,F.number=qn,F.object=Xl,F.personalization=yn,F.renderLoop=_i,F.setColors=function Pr(s){return yn.setColors(s)},F.setTheme=function po(s){return yn.setTheme(s)},F.smoothScrollTo=Kl,F.string=st,F.theme=Et,F.uniqueIdCount=rr,F.utils=H,F.version="4.96.0",F.xss=Fe,F}({});